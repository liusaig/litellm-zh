"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2280],{17976:(e,a,i)=>{i.d(a,{e:()=>n});var l=i(95155),t=i(26313),s=i(87278),r=i(92622);i(12115);let n=({onClick:e,active:a,hasActiveFilters:i,label:n="Filters"})=>(0,l.jsx)(t.A,{color:"blue",dot:i,children:(0,l.jsx)(s.Ay,{type:"default",onClick:e,icon:(0,l.jsx)(r.A,{size:16}),className:a?"bg-gray-100":"",children:n})})},25495:(e,a,i)=>{i.d(a,{Z:()=>d});var l=i(95155),t=i(87287),s=i(91808),r=i(29822),n=i.n(r),o=i(12115);let d=({placeholder:e,value:a,onChange:i,icon:r,className:d})=>{let[c,m]=(0,o.useState)(a);(0,o.useEffect)(()=>{m(a)},[a]);let g=(0,o.useMemo)(()=>n()(e=>i(e),300),[i]);(0,o.useEffect)(()=>()=>{g.cancel()},[g]);let u=(0,o.useCallback)(e=>{let a=e.target.value;m(a),g(a)},[g]);return(0,l.jsx)(s.A,{placeholder:e,value:c,onChange:u,prefix:r?(0,l.jsx)(r,{size:16,className:"text-gray-500"}):void 0,className:(0,t.cx)("w-64",d)})}},32280:(e,a,i)=>{i.d(a,{A:()=>em,f:()=>ec});var l=i(95155),t=i(25495),s=i(17976),r=i(89337),n=i(61878),o=i(42869);let d=({filters:e,showFilters:a,onToggleFilters:i,onChange:d,onReset:c})=>{let m=!!(e.org_id||e.org_alias);return(0,l.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,l.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,l.jsx)(t.Z,{placeholder:"按组织名称搜索",value:e.org_alias,onChange:e=>d("org_alias",e),icon:n.A,className:"w-64"}),(0,l.jsx)(s.e,{onClick:()=>i(!a),active:a,hasActiveFilters:m,label:"筛选"}),(0,l.jsx)(r.$,{onClick:c,label:"重置筛选"})]}),a&&(0,l.jsx)("div",{className:"flex flex-wrap items-center gap-3 mt-3",children:(0,l.jsx)(t.Z,{placeholder:"按组织 ID 搜索",value:e.org_id,onChange:e=>d("org_id",e),icon:o.A,className:"w-64"})})]})};var c=i(94300),m=i(73317),g=i(17293),u=i(30947),x=i(34254),_=i(38983),h=i(42837),p=i(27309),j=i(13121),b=i(19602),v=i(2212),z=i(87927),A=i(56680),f=i(73806),w=i(79363),y=i(30489),D=i(96961),N=i(95517),S=i(8179),C=i(31556),k=i(95171),T=i(75892),F=i(34487),I=i(25387),L=i(22277),E=i(3373),P=i(23060),O=i(91808),M=i(12115),V=i(14290),B=i(88534),U=i(66793),$=i(82426),R=i(64601),q=i(11072),H=i(14824),G=i(12120),Y=i(28436),J=i(4862),W=i(84649),Z=i(44926),K=i(64628),Q=i(41326),X=i(87278),ee=i(99904),ea=i(94514),ei=i(67635),el=i(31851),et=i(49827),es=i(81783),er=i(66904),en=i(19692),eo=i(66927);let ed=({organizationId:e,onClose:a,accessToken:i,is_org_admin:t,is_proxy_admin:s,userModels:r,editOrg:n})=>{let[o,d]=(0,M.useState)(null),[c,m]=(0,M.useState)(!0),[g]=I.A.useForm(),[u,p]=(0,M.useState)(!1),[b,v]=(0,M.useState)(!1),[z,A]=(0,M.useState)(!1),[f,w]=(0,M.useState)(null),[y,D]=(0,M.useState)({}),[N,S]=(0,M.useState)(!1),C=t||s,{data:k}=(0,J.S3)(),{t:L}=(0,V.o)(),E=(0,M.useMemo)(()=>(0,W.O)(k),[k]),U=async()=>{try{if(m(!0),!i)return;let a=await (0,Y.organizationInfoCall)(i,e);d(a)}catch(e){G.Ay.fromBackend(L("organizationDetail.errors.loadFailed")),console.error("Error fetching organization info:",e)}finally{m(!1)}};(0,M.useEffect)(()=>{U()},[e,i]);let $=async a=>{try{if(null==i)return;let l={user_email:a.user_email,user_id:a.user_id,role:a.role};await (0,Y.organizationMemberAddCall)(i,e,l),G.Ay.success(L("organizationDetail.notifications.memberAdded")),v(!1),g.resetFields(),U()}catch(e){G.Ay.fromBackend(L("organizationDetail.errors.memberAddFailed")),console.error("Error adding organization member:",e)}},R=async a=>{try{if(!i)return;let l={user_email:a.user_email,user_id:a.user_id,role:a.role};await (0,Y.organizationMemberUpdateCall)(i,e,l),G.Ay.success(L("organizationDetail.notifications.memberUpdated")),A(!1),g.resetFields(),U()}catch(e){G.Ay.fromBackend(L("organizationDetail.errors.memberUpdateFailed")),console.error("Error updating organization member:",e)}},ed=async a=>{try{if(!i)return;await (0,Y.organizationMemberDeleteCall)(i,e,a.user_id),G.Ay.success(L("organizationDetail.notifications.memberDeleted")),A(!1),g.resetFields(),U()}catch(e){G.Ay.fromBackend(L("organizationDetail.errors.memberDeleteFailed")),console.error("Error deleting organization member:",e)}},ec=async a=>{try{if(!i)return;S(!0);let l={organization_id:e,organization_alias:a.organization_alias,models:a.models,litellm_budget_table:{tpm_limit:a.tpm_limit,rpm_limit:a.rpm_limit,max_budget:a.max_budget,budget_duration:a.budget_duration},metadata:a.metadata?JSON.parse(a.metadata):null};if((void 0!==a.vector_stores||void 0!==a.mcp_servers_and_groups)&&(l.object_permission={...o?.object_permission,vector_stores:a.vector_stores||[]},void 0!==a.mcp_servers_and_groups)){let{servers:e,accessGroups:i}=a.mcp_servers_and_groups||{servers:[],accessGroups:[]};e&&e.length>0&&(l.object_permission.mcp_servers=e),i&&i.length>0&&(l.object_permission.mcp_access_groups=i)}await (0,Y.organizationUpdateCall)(i,l),G.Ay.success(L("organizationDetail.notifications.settingsUpdated")),p(!1),U()}catch(e){G.Ay.fromBackend(L("organizationDetail.errors.settingsUpdateFailed")),console.error("Error updating organization:",e)}finally{S(!1)}};if(c)return(0,l.jsx)("div",{className:"p-4",children:L("organizationDetail.loading")});if(!o)return(0,l.jsx)("div",{className:"p-4",children:L("organizationDetail.notFound")});let em=async(e,a)=>{await (0,B.lW)(e)&&(D(e=>({...e,[a]:!0})),setTimeout(()=>{D(e=>({...e,[a]:!1}))},2e3))},eg=[{title:L("organizationDetail.columns.spend"),key:"spend",render:(e,a)=>{let i=null!=a.user_id?(o.members||[]).find(e=>e.user_id===a.user_id):void 0;return(0,l.jsx)(Q.A.Text,{children:(0,B.HY)(i?.spend??0,4)})}},{title:L("organizationDetail.columns.createdAt"),key:"created_at",render:(e,a)=>{let i=null!=a.user_id?(o.members||[]).find(e=>e.user_id===a.user_id):void 0;return(0,l.jsx)(Q.A.Text,{children:i?.created_at?new Date(i.created_at).toLocaleString():"-"})}}];return(0,l.jsxs)("div",{className:"w-full h-screen p-4 bg-white",children:[(0,l.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,l.jsxs)("div",{children:[(0,l.jsx)(_.A,{icon:Z.A,onClick:a,variant:"light",className:"mb-4",children:L("organizationDetail.backButton")}),(0,l.jsx)(K.A,{children:o.organization_alias}),(0,l.jsxs)("div",{className:"flex items-center cursor-pointer",children:[(0,l.jsx)(T.A,{className:"text-gray-500 font-mono",children:o.organization_id}),(0,l.jsx)(X.Ay,{type:"text",size:"small",icon:y["org-id"]?(0,l.jsx)(ea.A,{size:12}):(0,l.jsx)(ei.A,{size:12}),onClick:()=>em(o.organization_id,"org-id"),className:`left-2 z-10 transition-all duration-200 ${y["org-id"]?"text-green-600 bg-green-50 border-green-200":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`})]})]})}),(0,l.jsx)(ee.A,{defaultActiveKey:n?"settings":"overview",className:"mb-4",items:[{key:"overview",label:L("organizationDetail.tabs.overview"),children:(0,l.jsxs)(j.A,{numItems:1,numItemsSm:2,numItemsLg:3,className:"gap-6",children:[(0,l.jsxs)(h.A,{children:[(0,l.jsx)(T.A,{children:L("organizationDetail.overview.orgDetails")}),(0,l.jsxs)("div",{className:"mt-2",children:[(0,l.jsxs)(T.A,{children:[L("organizationDetail.overview.created"),": ",new Date(o.created_at).toLocaleDateString()]}),(0,l.jsxs)(T.A,{children:[L("organizationDetail.overview.updated"),": ",new Date(o.updated_at).toLocaleDateString()]}),(0,l.jsxs)(T.A,{children:[L("organizationDetail.overview.createdBy"),": ",o.created_by]})]})]}),(0,l.jsxs)(h.A,{children:[(0,l.jsx)(T.A,{children:L("organizationDetail.overview.budgetStatus")}),(0,l.jsxs)("div",{className:"mt-2",children:[(0,l.jsx)(K.A,{children:(0,B.HY)(o.spend,4)}),(0,l.jsxs)(T.A,{children:[L("organizationDetail.overview.of")," ",null===o.litellm_budget_table.max_budget?L("organizationDetail.overview.unlimited"):(0,B.HY)(o.litellm_budget_table.max_budget,4)]}),o.litellm_budget_table.budget_duration&&(0,l.jsxs)(T.A,{className:"text-gray-500",children:[L("organizationDetail.overview.reset"),": ",o.litellm_budget_table.budget_duration]})]})]}),(0,l.jsxs)(h.A,{children:[(0,l.jsx)(T.A,{children:L("organizationDetail.overview.rateLimits")}),(0,l.jsxs)("div",{className:"mt-2",children:[(0,l.jsxs)(T.A,{children:[L("organizationDetail.overview.tpm"),": ",o.litellm_budget_table.tpm_limit||L("organizationDetail.overview.unlimited")]}),(0,l.jsxs)(T.A,{children:[L("organizationDetail.overview.rpm"),": ",o.litellm_budget_table.rpm_limit||L("organizationDetail.overview.unlimited")]}),o.litellm_budget_table.max_parallel_requests&&(0,l.jsxs)(T.A,{children:[L("organizationDetail.overview.maxParallelRequests"),": ",o.litellm_budget_table.max_parallel_requests]})]})]}),(0,l.jsxs)(h.A,{children:[(0,l.jsx)(T.A,{children:L("organizationDetail.overview.models")}),(0,l.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:0===o.models.length?(0,l.jsx)(x.A,{color:"red",children:L("organizationDetail.overview.allProxyModels")}):o.models.map((e,a)=>(0,l.jsx)(x.A,{color:"red",children:e},a))})]}),(0,l.jsxs)(h.A,{children:[(0,l.jsx)(T.A,{children:L("organizationDetail.overview.teams")}),(0,l.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:o.teams?.map((e,a)=>(0,l.jsx)(x.A,{color:"red",children:E[e.team_id]||e.team_id},a))})]}),(0,l.jsx)(es.A,{objectPermission:o.object_permission,variant:"card",accessToken:i})]})},{key:"members",label:L("organizationDetail.tabs.members"),children:(0,l.jsx)("div",{className:"space-y-4",children:(0,l.jsx)(el.A,{members:(o.members||[]).map(e=>({role:e.user_role||"",user_id:e.user_id,user_email:e.user_email})),canEdit:C,onEdit:e=>{w(e),A(!0)},onDelete:e=>ed(e),onAddMember:()=>v(!0),roleColumnTitle:L("organizationDetail.members.roleColumn"),extraColumns:eg,emptyText:L("organizationDetail.members.noMembers")})})},{key:"settings",label:L("organizationDetail.tabs.settings"),children:(0,l.jsxs)(h.A,{className:"overflow-y-auto max-h-[65vh]",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsx)(K.A,{children:L("organizationDetail.settings.title")}),C&&!u&&(0,l.jsx)(_.A,{onClick:()=>p(!0),children:L("organizationDetail.settings.editButton")})]}),u?(0,l.jsxs)(I.A,{form:g,onFinish:ec,initialValues:{organization_alias:o.organization_alias,models:o.models,tpm_limit:o.litellm_budget_table.tpm_limit,rpm_limit:o.litellm_budget_table.rpm_limit,max_budget:o.litellm_budget_table.max_budget,budget_duration:o.litellm_budget_table.budget_duration,metadata:o.metadata?JSON.stringify(o.metadata,null,2):"",vector_stores:o.object_permission?.vector_stores||[],mcp_servers_and_groups:{servers:o.object_permission?.mcp_servers||[],accessGroups:o.object_permission?.mcp_access_groups||[]}},layout:"vertical",children:[(0,l.jsx)(I.A.Item,{label:L("organizationDetail.settings.orgName"),name:"organization_alias",rules:[{required:!0,message:L("organizationDetail.settings.orgNameRequired")}],children:(0,l.jsx)(F.A,{placeholder:L("organizations.modal.orgNamePlaceholder")})}),(0,l.jsx)(I.A.Item,{label:L("organizationDetail.settings.models"),name:"models",children:(0,l.jsx)(H.o,{value:g.getFieldValue("models"),onChange:e=>g.setFieldValue("models",e),context:"organization",placeholder:L("organizations.modal.modelsPlaceholder"),options:{includeSpecialOptions:!0,showAllProxyModelsOverride:!0}})}),(0,l.jsx)(I.A.Item,{label:L("organizationDetail.settings.maxBudget"),name:"max_budget",children:(0,l.jsx)(er.A,{step:.01,precision:2,style:{width:"100%"},placeholder:L("organizations.modal.maxBudgetPlaceholder")})}),(0,l.jsx)(I.A.Item,{label:L("organizationDetail.settings.resetBudget"),name:"budget_duration",children:(0,l.jsxs)(P.A,{placeholder:L("organizations.modal.budgetDurationPlaceholder"),children:[(0,l.jsx)(P.A.Option,{value:"24h",children:L("organizationDetail.settings.daily")}),(0,l.jsx)(P.A.Option,{value:"7d",children:L("organizationDetail.settings.weekly")}),(0,l.jsx)(P.A.Option,{value:"30d",children:L("organizationDetail.settings.monthly")})]})}),(0,l.jsx)(I.A.Item,{label:L("organizationDetail.settings.tpmLimit"),name:"tpm_limit",children:(0,l.jsx)(er.A,{step:1,style:{width:"100%"},placeholder:L("organizations.modal.tpmLimitPlaceholder")})}),(0,l.jsx)(I.A.Item,{label:L("organizationDetail.settings.rpmLimit"),name:"rpm_limit",children:(0,l.jsx)(er.A,{step:1,style:{width:"100%"},placeholder:L("organizations.modal.rpmLimitPlaceholder")})}),(0,l.jsx)(I.A.Item,{label:L("organizationDetail.settings.vectorStores"),name:"vector_stores",children:(0,l.jsx)(eo.A,{onChange:e=>g.setFieldValue("vector_stores",e),value:g.getFieldValue("vector_stores"),accessToken:i||"",placeholder:L("organizations.modal.vectorStoresPlaceholder")})}),(0,l.jsx)(I.A.Item,{label:L("organizationDetail.settings.mcpServers"),name:"mcp_servers_and_groups",children:(0,l.jsx)(q.A,{onChange:e=>g.setFieldValue("mcp_servers_and_groups",e),value:g.getFieldValue("mcp_servers_and_groups"),accessToken:i||"",placeholder:L("organizations.modal.mcpServersPlaceholder")})}),(0,l.jsx)(I.A.Item,{label:L("organizationDetail.settings.metadata"),name:"metadata",children:(0,l.jsx)(O.A.TextArea,{rows:4,placeholder:L("organizations.modal.metadata")})}),(0,l.jsx)("div",{className:"sticky z-10 bg-white p-4 border-t border-gray-200 bottom-[-1.5rem] inset-x-[-1.5rem]",children:(0,l.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,l.jsx)(_.A,{variant:"secondary",onClick:()=>p(!1),disabled:N,children:L("organizationDetail.settings.cancel")}),(0,l.jsx)(_.A,{type:"submit",loading:N,children:L("organizationDetail.settings.saveChanges")})]})})]}):(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(T.A,{className:"font-medium",children:L("organizationDetail.settings.orgName")}),(0,l.jsx)("div",{children:o.organization_alias})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(T.A,{className:"font-medium",children:L("organizationDetail.settings.orgId")}),(0,l.jsx)("div",{className:"font-mono",children:o.organization_id})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(T.A,{className:"font-medium",children:L("organizationDetail.settings.createdAt")}),(0,l.jsx)("div",{children:new Date(o.created_at).toLocaleString()})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(T.A,{className:"font-medium",children:L("organizationDetail.settings.models")}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:o.models.map((e,a)=>(0,l.jsx)(x.A,{color:"red",children:e},a))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(T.A,{className:"font-medium",children:L("organizationDetail.settings.rateLimits")}),(0,l.jsxs)("div",{children:[L("organizationDetail.overview.tpm"),": ",o.litellm_budget_table.tpm_limit||L("organizationDetail.overview.unlimited")]}),(0,l.jsxs)("div",{children:[L("organizationDetail.overview.rpm"),": ",o.litellm_budget_table.rpm_limit||L("organizationDetail.overview.unlimited")]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(T.A,{className:"font-medium",children:L("organizationDetail.settings.budget")}),(0,l.jsxs)("div",{children:[L("organizationDetail.settings.max"),":"," ",null!==o.litellm_budget_table.max_budget?(0,B.HY)(o.litellm_budget_table.max_budget,4):L("organizationDetail.settings.noLimit")]}),(0,l.jsxs)("div",{children:[L("organizationDetail.settings.reset"),": ",o.litellm_budget_table.budget_duration||L("organizationDetail.settings.never")]})]}),(0,l.jsx)(es.A,{objectPermission:o.object_permission,variant:"inline",className:"pt-4 border-t border-gray-200",accessToken:i})]})]})}]}),(0,l.jsx)(et.A,{isVisible:b,onCancel:()=>v(!1),onSubmit:$,accessToken:i,title:L("organizationDetail.members.addMemberTitle"),roles:[{label:"org_admin",value:"org_admin",description:L("organizationDetail.members.roles.orgAdmin.description")},{label:"internal_user",value:"internal_user",description:L("organizationDetail.members.roles.internalUser.description")},{label:"internal_user_viewer",value:"internal_user_viewer",description:L("organizationDetail.members.roles.internalUserViewer.description")}],defaultRole:"internal_user"}),(0,l.jsx)(en.A,{visible:z,onCancel:()=>A(!1),onSubmit:R,initialData:f,mode:"edit",config:{title:L("organizationDetail.members.editMemberTitle"),showEmail:!0,showUserId:!0,roleOptions:[{label:L("organizationDetail.members.roles.orgAdmin.label"),value:"org_admin"},{label:L("organizationDetail.members.roles.internalUser.label"),value:"internal_user"},{label:L("organizationDetail.members.roles.internalUserViewer.label"),value:"internal_user_viewer"}]}})]})},ec=async(e,a,i=null,l=null)=>{a(await (0,Y.organizationListCall)(e,i,l))},em=({organizations:e,userRole:a,userModels:i,accessToken:t,lastRefreshed:s,handleRefreshClick:r,currentOrg:n,guardrailsList:o=[],setOrganizations:J,premiumUser:W})=>{let{t:Z}=(0,V.o)(),[K,Q]=(0,M.useState)(null),[X,ee]=(0,M.useState)(!1),[ea,ei]=(0,M.useState)(!1),[el,et]=(0,M.useState)(null),[es,en]=(0,M.useState)(!1),[em,eg]=(0,M.useState)(!1),[eu]=I.A.useForm(),[ex,e_]=(0,M.useState)({}),[eh,ep]=(0,M.useState)(!1),[ej,eb]=(0,M.useState)({org_id:"",org_alias:"",sort_by:"created_at",sort_order:"desc"}),ev=async()=>{if(el&&t)try{en(!0),await (0,Y.organizationDeleteCall)(t,el),G.Ay.success(Z("organizations.notifications.deleteSuccess")),ei(!1),et(null),await ec(t,J,ej.org_id||null,ej.org_alias||null)}catch(e){console.error("Error deleting organization:",e)}finally{en(!1)}},ez=async e=>{try{if(!t)return;console.log(`values in organizations new create call: ${JSON.stringify(e)}`),(e.allowed_vector_store_ids&&e.allowed_vector_store_ids.length>0||e.allowed_mcp_servers_and_groups&&(e.allowed_mcp_servers_and_groups.servers?.length>0||e.allowed_mcp_servers_and_groups.accessGroups?.length>0))&&(e.object_permission={},e.allowed_vector_store_ids&&e.allowed_vector_store_ids.length>0&&(e.object_permission.vector_stores=e.allowed_vector_store_ids,delete e.allowed_vector_store_ids),e.allowed_mcp_servers_and_groups&&(e.allowed_mcp_servers_and_groups.servers?.length>0&&(e.object_permission.mcp_servers=e.allowed_mcp_servers_and_groups.servers),e.allowed_mcp_servers_and_groups.accessGroups?.length>0&&(e.object_permission.mcp_access_groups=e.allowed_mcp_servers_and_groups.accessGroups),delete e.allowed_mcp_servers_and_groups)),await (0,Y.organizationCreateCall)(t,e),G.Ay.success(Z("organizations.notifications.createSuccess")),eg(!1),eu.resetFields(),ec(t,J,ej.org_id||null,ej.org_alias||null)}catch(e){console.error("Error creating organization:",e)}};return(0,l.jsxs)("div",{className:"w-full mx-4 h-[75vh]",children:[(0,l.jsx)(j.A,{numItems:1,className:"gap-2 p-8 w-full mt-2",children:(0,l.jsxs)(p.A,{numColSpan:1,className:"flex flex-col gap-2",children:[(0,l.jsxs)(_.A,{className:"w-fit",onClick:()=>eg(!0),children:["+ ",Z("organizations.createButton")]}),K?(0,l.jsx)(ed,{organizationId:K,onClose:()=>{Q(null),ee(!1)},accessToken:t,is_org_admin:!0,is_proxy_admin:"Admin"===a,userModels:i,editOrg:X}):(0,l.jsxs)(z.A,{className:"gap-2 h-[75vh] w-full",children:[(0,l.jsxs)(A.A,{className:"flex justify-between mt-2 w-full items-center",children:[(0,l.jsx)("div",{className:"flex",children:(0,l.jsx)(v.A,{children:Z("organizations.myOrganizations")})}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[s&&(0,l.jsxs)(T.A,{children:[Z("organizations.lastRefreshed"),s]}),(0,l.jsx)(b.A,{icon:m.A,variant:"shadow",size:"xs",className:"self-center",onClick:r})]})]}),(0,l.jsx)(w.A,{children:(0,l.jsxs)(f.A,{children:[(0,l.jsx)(T.A,{children:Z("organizations.clickToView")}),(0,l.jsx)(j.A,{numItems:1,className:"gap-2 pt-2 pb-2 h-[75vh] w-full mt-2",children:(0,l.jsx)(p.A,{numColSpan:1,children:(0,l.jsxs)(h.A,{className:"w-full mx-auto flex-auto overflow-hidden overflow-y-auto max-h-[50vh]",children:[(0,l.jsx)("div",{className:"border-b px-6 py-4",children:(0,l.jsx)("div",{className:"flex flex-col space-y-4",children:(0,l.jsx)(d,{filters:ej,showFilters:eh,onToggleFilters:ep,onChange:(e,a)=>{let i={...ej,[e]:a};eb(i),t&&(0,Y.organizationListCall)(t,i.org_id||null,i.org_alias||null).then(e=>{e&&J(e)}).catch(e=>{console.error("Error fetching organizations:",e)})},onReset:()=>{eb({org_id:"",org_alias:"",sort_by:"created_at",sort_order:"desc"}),t&&(0,Y.organizationListCall)(t,null,null).then(e=>{e&&J(e)}).catch(e=>{console.error("Error fetching organizations:",e)})}})})}),(0,l.jsxs)(y.A,{children:[(0,l.jsx)(S.A,{children:(0,l.jsxs)(k.A,{children:[(0,l.jsx)(C.A,{children:Z("organizations.table.orgId")}),(0,l.jsx)(C.A,{children:Z("organizations.table.orgName")}),(0,l.jsx)(C.A,{children:Z("organizations.table.createdAt")}),(0,l.jsx)(C.A,{children:Z("organizations.table.spend")}),(0,l.jsx)(C.A,{children:Z("organizations.table.budget")}),(0,l.jsx)(C.A,{children:Z("organizations.table.models")}),(0,l.jsx)(C.A,{children:Z("organizations.table.tpmRpmLimit")}),(0,l.jsx)(C.A,{children:Z("organizations.table.info")}),(0,l.jsx)(C.A,{children:Z("organizations.table.actions")})]})}),(0,l.jsx)(D.A,{children:e&&e.length>0?e.sort((e,a)=>new Date(a.created_at).getTime()-new Date(e.created_at).getTime()).map(e=>(0,l.jsxs)(k.A,{children:[(0,l.jsx)(N.A,{children:(0,l.jsx)("div",{className:"overflow-hidden",children:(0,l.jsx)(L.A,{title:e.organization_id,children:(0,l.jsxs)(_.A,{size:"xs",variant:"light",className:"font-mono text-[#6E29F6] bg-[#F1EAFE] hover:bg-[#E6D9FE] text-xs font-normal px-2 py-0.5 text-left overflow-hidden truncate max-w-[200px]",onClick:()=>Q(e.organization_id),children:[e.organization_id?.slice(0,7),"..."]})})})}),(0,l.jsx)(N.A,{children:e.organization_alias}),(0,l.jsx)(N.A,{children:e.created_at?new Date(e.created_at).toLocaleDateString():Z("organizations.table.noDate")}),(0,l.jsx)(N.A,{children:(0,B.HY)(e.spend,4)}),(0,l.jsx)(N.A,{children:e.litellm_budget_table?.max_budget!==null&&e.litellm_budget_table?.max_budget!==void 0?e.litellm_budget_table?.max_budget:Z("organizations.table.unlimited")}),(0,l.jsx)(N.A,{style:{maxWidth:"8-x",whiteSpace:"pre-wrap",overflow:"hidden"},className:e.models.length>3?"px-0":"",children:(0,l.jsx)("div",{className:"flex flex-col",children:Array.isArray(e.models)?(0,l.jsx)("div",{className:"flex flex-col",children:0===e.models.length?(0,l.jsx)(x.A,{size:"xs",className:"mb-1",color:"red",children:(0,l.jsx)(T.A,{children:Z("organizations.table.allModels")})}):(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"flex items-start",children:[e.models.length>3&&(0,l.jsx)("div",{children:(0,l.jsx)(b.A,{icon:ex[e.organization_id||""]?g.A:u.A,className:"cursor-pointer",size:"xs",onClick:()=>{e_(a=>({...a,[e.organization_id||""]:!a[e.organization_id||""]}))}})}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.models.slice(0,3).map((e,a)=>"all-proxy-models"===e?(0,l.jsx)(x.A,{size:"xs",color:"red",children:(0,l.jsx)(T.A,{children:Z("organizations.table.allModels")})},a):(0,l.jsx)(x.A,{size:"xs",color:"blue",children:(0,l.jsx)(T.A,{children:e.length>30?`${(0,R.$L)(e).slice(0,30)}...`:(0,R.$L)(e)})},a)),e.models.length>3&&!ex[e.organization_id||""]&&(0,l.jsx)(x.A,{size:"xs",color:"gray",className:"cursor-pointer",children:(0,l.jsxs)(T.A,{children:["+",e.models.length-3,Z("organizations.table.moreModels")]})}),ex[e.organization_id||""]&&(0,l.jsx)("div",{className:"flex flex-wrap gap-1",children:e.models.slice(3).map((e,a)=>"all-proxy-models"===e?(0,l.jsx)(x.A,{size:"xs",color:"red",children:(0,l.jsx)(T.A,{children:Z("organizations.table.allModels")})},a+3):(0,l.jsx)(x.A,{size:"xs",color:"blue",children:(0,l.jsx)(T.A,{children:e.length>30?`${(0,R.$L)(e).slice(0,30)}...`:(0,R.$L)(e)})},a+3))})]})]})})}):null})}),(0,l.jsx)(N.A,{children:(0,l.jsxs)(T.A,{children:[Z("organizations.table.tpm"),e.litellm_budget_table?.tpm_limit?e.litellm_budget_table?.tpm_limit:Z("organizations.table.unlimited"),(0,l.jsx)("br",{}),Z("organizations.table.rpm"),e.litellm_budget_table?.rpm_limit?e.litellm_budget_table?.rpm_limit:Z("organizations.table.unlimited")]})}),(0,l.jsx)(N.A,{children:(0,l.jsxs)(T.A,{children:[e.members?.length||0,Z("organizations.table.members")]})}),(0,l.jsx)(N.A,{children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)($.A,{variant:"Edit",tooltipText:Z("organizations.actions.edit"),onClick:()=>{Q(e.organization_id),ee(!0)}}),(0,l.jsx)($.A,{variant:"Delete",tooltipText:Z("organizations.actions.delete"),onClick:()=>{var a;(a=e.organization_id)&&(et(a),ei(!0))}})]})})]},e.organization_id)):null})]})]})})})]})})]})]})}),(0,l.jsx)(E.A,{title:Z("organizations.modal.createTitle"),visible:em,width:800,footer:null,onCancel:()=>{eg(!1),eu.resetFields()},children:(0,l.jsxs)(I.A,{form:eu,onFinish:ez,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,l.jsx)(I.A.Item,{label:Z("organizations.modal.orgName"),name:"organization_alias",rules:[{required:!0,message:Z("organizations.modal.orgNameRequired")}],children:(0,l.jsx)(F.A,{placeholder:Z("organizations.modal.orgNamePlaceholder")})}),(0,l.jsx)(I.A.Item,{label:Z("organizations.modal.models"),name:"models",style:{marginTop:16},children:(0,l.jsx)(H.o,{options:{showAllProxyModelsOverride:!0,includeSpecialOptions:!0},value:eu.getFieldValue("models"),onChange:e=>eu.setFieldValue("models",e),context:"organization",placeholder:Z("organizations.modal.modelsPlaceholder")})}),(0,l.jsx)(I.A.Item,{label:Z("organizations.modal.maxBudget"),name:"max_budget",style:{marginTop:16},children:(0,l.jsx)(er.A,{step:.01,precision:2,width:200,placeholder:Z("organizations.modal.maxBudgetPlaceholder")})}),(0,l.jsx)(I.A.Item,{label:Z("organizations.modal.budgetDuration"),name:"budget_duration",style:{marginTop:16},children:(0,l.jsxs)(P.A,{defaultValue:null,placeholder:Z("organizations.modal.budgetDurationPlaceholder"),children:[(0,l.jsx)(P.A.Option,{value:"24h",children:Z("organizations.modal.budgetDaily")}),(0,l.jsx)(P.A.Option,{value:"7d",children:Z("organizations.modal.budgetWeekly")}),(0,l.jsx)(P.A.Option,{value:"30d",children:Z("organizations.modal.budgetMonthly")})]})}),(0,l.jsx)(I.A.Item,{label:Z("organizations.modal.tpmLimit"),name:"tpm_limit",style:{marginTop:16},children:(0,l.jsx)(er.A,{step:1,width:400,placeholder:Z("organizations.modal.tpmLimitPlaceholder")})}),(0,l.jsx)(I.A.Item,{label:Z("organizations.modal.rpmLimit"),name:"rpm_limit",style:{marginTop:16},children:(0,l.jsx)(er.A,{step:1,width:400,placeholder:Z("organizations.modal.rpmLimitPlaceholder")})}),(0,l.jsx)(I.A.Item,{label:(0,l.jsxs)("span",{children:[Z("organizations.modal.vectorStores")," ",(0,l.jsx)(L.A,{title:Z("organizations.modal.vectorStoresTooltip"),children:(0,l.jsx)(c.A,{style:{marginLeft:"4px"}})})]}),name:"allowed_vector_store_ids",style:{marginTop:16,marginBottom:32},help:Z("organizations.modal.vectorStoresHelp"),children:(0,l.jsx)(eo.A,{onChange:e=>eu.setFieldValue("allowed_vector_store_ids",e),value:eu.getFieldValue("allowed_vector_store_ids"),accessToken:t||"",placeholder:Z("organizations.modal.vectorStoresPlaceholder")})}),(0,l.jsx)(I.A.Item,{label:(0,l.jsxs)("span",{children:[Z("organizations.modal.mcpServers")," ",(0,l.jsx)(L.A,{title:Z("organizations.modal.mcpServersTooltip"),children:(0,l.jsx)(c.A,{style:{marginLeft:"4px"}})})]}),name:"allowed_mcp_servers_and_groups",style:{marginTop:20,marginBottom:32},help:Z("organizations.modal.mcpServersHelp"),children:(0,l.jsx)(q.A,{onChange:e=>eu.setFieldValue("allowed_mcp_servers_and_groups",e),value:eu.getFieldValue("allowed_mcp_servers_and_groups"),accessToken:t||"",placeholder:Z("organizations.modal.mcpServersPlaceholder")})}),(0,l.jsx)(I.A.Item,{label:Z("organizations.modal.metadata"),name:"metadata",style:{marginTop:16},children:(0,l.jsx)(O.A.TextArea,{rows:4})}),(0,l.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,l.jsx)(_.A,{type:"submit",children:Z("organizations.modal.createSubmit")})})]})}),(0,l.jsx)(U.A,{isOpen:ea,title:Z("organizations.delete.title"),message:Z("organizations.delete.message"),resourceInformationTitle:Z("organizations.delete.resourceTitle"),resourceInformation:[{label:Z("organizations.delete.resourceLabel"),value:el,code:!0}],onCancel:()=>{ei(!1),et(null)},onOk:ev,confirmLoading:es,cancelText:Z("organizations.delete.cancel"),okText:Z("organizations.delete.confirm"),okLoadingText:Z("organizations.delete.deleting")})]})}},84649:(e,a,i)=>{i.d(a,{O:()=>l,S:()=>t});let l=e=>e?e.reduce((e,a)=>(e[a.team_id]=a.team_alias,e),{}):{},t=(e,a)=>{let i=a.find(a=>a.team_id===e);return i?i.team_alias:null}},89337:(e,a,i)=>{i.d(a,{$:()=>r});var l=i(95155),t=i(87278),s=i(9199);i(12115);let r=({onClick:e,label:a="Reset Filters"})=>(0,l.jsx)(t.Ay,{type:"default",onClick:e,icon:(0,l.jsx)(s.A,{size:16}),children:a})}}]);