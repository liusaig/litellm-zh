"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8931],{6761:(e,l,s)=>{s.d(l,{p:()=>g});var t=s(95155),a=s(67667),r=s(87056),i=s(99904),n=s(51914),o=s(12115),d=s(23060),c=s(22277),m=s(13545),u=s(56842),x=s(33210);function h({group:e,onChange:l,availableModels:s,maxFallbacks:a}){let r=s.filter(l=>l!==e.primaryModel),i=e.fallbackModels.length<a;return(0,t.jsxs)("div",{className:"flex flex-col gap-8 py-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Primary Model ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(d.A,{className:"w-full h-12",size:"large",placeholder:"Select primary model",value:e.primaryModel,onChange:s=>{let t=[...e.fallbackModels];t.includes(s)&&(t=t.filter(e=>e!==s)),l({...e,primaryModel:s,fallbackModels:t})},showSearch:!0,filterOption:(e,l)=>(l?.label??"").toLowerCase().includes(e.toLowerCase()),options:s.map(e=>({label:e,value:e}))}),!e.primaryModel&&(0,t.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-amber-600 text-xs bg-amber-50 p-2 rounded",children:[(0,t.jsx)(m.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"Select a model to begin configuring fallbacks"})]})]}),(0,t.jsx)("div",{className:"flex items-center justify-center -my-4 z-10",children:(0,t.jsxs)("div",{className:"bg-indigo-50 text-indigo-500 px-4 py-1 rounded-full text-xs font-bold border border-indigo-100 flex items-center gap-2 shadow-sm",children:[(0,t.jsx)(u.A,{className:"w-4 h-4"}),"IF FAILS, TRY..."]})}),(0,t.jsxs)("div",{className:`transition-opacity duration-300 ${!e.primaryModel?"opacity-50 pointer-events-none":"opacity-100"}`,children:[(0,t.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Fallback Chain ",(0,t.jsx)("span",{className:"text-red-500",children:"*"}),(0,t.jsxs)("span",{className:"text-xs text-gray-500 font-normal ml-2",children:["(Max ",a," fallbacks at a time)"]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)(d.A,{mode:"multiple",className:"w-full",size:"large",placeholder:i?"Select fallback models to add...":`Maximum ${a} fallbacks reached`,value:e.fallbackModels,onChange:s=>{let t=s.slice(0,a);l({...e,fallbackModels:t})},disabled:!e.primaryModel,options:r.map(e=>({label:e,value:e})),optionRender:(l,s)=>{let a=e.fallbackModels.includes(l.value),r=a?e.fallbackModels.indexOf(l.value)+1:null;return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[a&&null!==r&&(0,t.jsx)("span",{className:"flex items-center justify-center w-5 h-5 rounded bg-indigo-100 text-indigo-600 text-xs font-bold",children:r}),(0,t.jsx)("span",{children:l.label})]})},maxTagCount:"responsive",maxTagPlaceholder:e=>(0,t.jsx)(c.A,{styles:{root:{pointerEvents:"none"}},title:e.map(({value:e})=>e).join(", "),children:(0,t.jsxs)("span",{children:["+",e.length," more"]})}),showSearch:!0,filterOption:(e,l)=>(l?.label??"").toLowerCase().includes(e.toLowerCase())}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1 ml-1",children:i?`Search and select multiple models. Selected models will appear below in order. (${e.fallbackModels.length}/${a} used)`:`Maximum ${a} fallbacks reached. Remove some to add more.`})]}),(0,t.jsx)("div",{className:"space-y-2 min-h-[100px]",children:0===e.fallbackModels.length?(0,t.jsxs)("div",{className:"h-32 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center text-gray-400",children:[(0,t.jsx)("span",{className:"text-sm",children:"No fallback models selected"}),(0,t.jsx)("span",{className:"text-xs mt-1",children:"Add models from the dropdown above"})]}):e.fallbackModels.map((s,a)=>(0,t.jsxs)("div",{className:"group flex items-center justify-between p-3 bg-white rounded-lg border border-gray-200 hover:border-indigo-300 hover:shadow-sm transition-all",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-6 h-6 rounded bg-gray-100 text-gray-400 group-hover:text-indigo-500 group-hover:bg-indigo-50",children:(0,t.jsx)("span",{className:"text-xs font-bold",children:a+1})}),(0,t.jsx)("div",{children:(0,t.jsx)("span",{className:"font-medium text-gray-800",children:s})})]}),(0,t.jsx)("button",{type:"button",onClick:()=>{let s;return s=e.fallbackModels.filter((e,l)=>l!==a),void l({...e,fallbackModels:s})},className:"opacity-0 group-hover:opacity-100 transition-opacity text-gray-400 hover:text-red-500 p-1",children:(0,t.jsx)(x.A,{className:"w-4 h-4"})})]},`${s}-${a}`))})]})]})]})}function g({groups:e,onGroupsChange:l,availableModels:s,maxFallbacks:d=10,maxGroups:c=5}){let[m,u]=(0,o.useState)(e.length>0?e[0].id:"1");(0,o.useEffect)(()=>{e.length>0?e.some(e=>e.id===m)||u(e[0].id):u("1")},[e]);let x=()=>{if(e.length>=c)return;let s=Date.now().toString();l([...e,{id:s,primaryModel:null,fallbackModels:[]}]),u(s)},g=s=>{l(e.map(e=>e.id===s.id?s:e))},p=e.map((l,a)=>{let r=l.primaryModel?l.primaryModel:`Group ${a+1}`;return{key:l.id,label:r,closable:e.length>1,children:(0,t.jsx)(h,{group:l,onChange:g,availableModels:s,maxFallbacks:d})}});return 0===e.length?(0,t.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg border border-dashed border-gray-300",children:[(0,t.jsx)("p",{className:"text-gray-500 mb-4",children:"No fallback groups configured"}),(0,t.jsx)(a.$,{variant:"primary",onClick:x,icon:()=>(0,t.jsx)(n.A,{className:"w-4 h-4"}),children:"Create First Group"})]}):(0,t.jsx)(i.A,{type:"editable-card",activeKey:m,onChange:u,onEdit:(s,t)=>{"add"===t?x():"remove"===t&&e.length>1&&(s=>{if(1===e.length)return r.Ay.warning("At least one group is required");let t=e.filter(e=>e.id!==s);l(t),m===s&&t.length>0&&u(t[t.length-1].id)})(s)},items:p,className:"fallback-tabs",tabBarStyle:{marginBottom:0},hideAdd:e.length>=c})}},9803:(e,l,s)=>{s.d(l,{A:()=>x});var t=s(95155),a=s(12115),r=s(23060),i=s(22277),n=s(7339),o=s(16989),d=s(94300),c=s(73648),m=s(14290);let{Option:u}=r.A,x=({form:e,autoRotationEnabled:l,onAutoRotationChange:s,rotationInterval:x,onRotationIntervalChange:h,isCreateMode:g=!1})=>{let{t:p}=(0,m.o)(),y=x&&!["7d","30d","90d","180d","365d"].includes(x),[j,f]=(0,a.useState)(y),[b,_]=(0,a.useState)(y?x:""),[v,N]=(0,a.useState)(e?.getFieldValue?.("duration")||"");return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:p("keyDetail.keyLifecycle.title")}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"text-sm font-medium text-gray-700 flex items-center space-x-1",children:[(0,t.jsx)("span",{children:p("keyDetail.keyLifecycle.expireKey")}),(0,t.jsx)(i.A,{title:p(g?"keyDetail.keyLifecycle.expireKeyTooltipCreate":"keyDetail.keyLifecycle.expireKeyTooltipEdit"),children:(0,t.jsx)(d.A,{className:"text-gray-400 cursor-help text-xs"})})]}),(0,t.jsx)(c.k,{name:"duration",placeholder:p(g?"keyDetail.keyLifecycle.expirePlaceholderCreate":"keyDetail.keyLifecycle.expirePlaceholderEdit"),className:"w-full",value:v,onValueChange:l=>{N(l),e&&"function"==typeof e.setFieldValue?e.setFieldValue("duration",l):e&&"function"==typeof e.setFieldsValue&&e.setFieldsValue({duration:l})}})]})]}),(0,t.jsx)(n.A,{}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:p("keyDetail.keyLifecycle.rotationSettings")}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"text-sm font-medium text-gray-700 flex items-center space-x-1",children:[(0,t.jsx)("span",{children:p("keyDetail.keyLifecycle.enableRotation")}),(0,t.jsx)(i.A,{title:p("keyDetail.keyLifecycle.enableRotationTooltip"),children:(0,t.jsx)(d.A,{className:"text-gray-400 cursor-help text-xs"})})]}),(0,t.jsx)(o.A,{checked:l,onChange:s,size:"default",className:l?"":"bg-gray-400"})]}),l&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"text-sm font-medium text-gray-700 flex items-center space-x-1",children:[(0,t.jsx)("span",{children:p("keyDetail.keyLifecycle.rotationInterval")}),(0,t.jsx)(i.A,{title:p("keyDetail.keyLifecycle.rotationIntervalTooltip"),children:(0,t.jsx)(d.A,{className:"text-gray-400 cursor-help text-xs"})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(r.A,{value:j?"custom":x,onChange:e=>{"custom"===e?f(!0):(f(!1),_(""),h(e))},className:"w-full",placeholder:p("keyDetail.keyLifecycle.selectInterval"),children:[(0,t.jsx)(u,{value:"7d",children:p("keyDetail.keyLifecycle.7days")}),(0,t.jsx)(u,{value:"30d",children:p("keyDetail.keyLifecycle.30days")}),(0,t.jsx)(u,{value:"90d",children:p("keyDetail.keyLifecycle.90days")}),(0,t.jsx)(u,{value:"180d",children:p("keyDetail.keyLifecycle.180days")}),(0,t.jsx)(u,{value:"365d",children:p("keyDetail.keyLifecycle.365days")}),(0,t.jsx)(u,{value:"custom",children:p("keyDetail.keyLifecycle.customInterval")})]}),j&&(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(c.k,{value:b,onChange:e=>{let l=e.target.value;_(l),h(l)},placeholder:p("keyDetail.keyLifecycle.customIntervalPlaceholder")}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:p("keyDetail.keyLifecycle.supportedFormats")})]})]})]})]}),l&&(0,t.jsx)("div",{className:"bg-blue-50 p-3 rounded-md text-sm text-blue-700",children:p("keyDetail.keyLifecycle.rotationNotice")})]})]})}},11698:(e,l,s)=>{s.d(l,{_Q:()=>c,oV:()=>o,xc:()=>u});var t=s(26708),a=s(5858),r=s(90078),i=s(28436),n=s(42696);let o=(0,r.D)("keys"),d=async(e,l,s,t={})=>{try{let a=(0,i.getProxyBaseUrl)(),r=new URLSearchParams(Object.entries({team_id:t.teamID,organization_id:t.organizationID,key_alias:t.selectedKeyAlias,key_hash:t.keyHash,user_id:t.userID,page:l,size:s,sort_by:t.sortBy,sort_order:t.sortOrder,expand:t.expand,status:t.status,return_full_object:"true",include_team_keys:"true",include_created_by_keys:"true"}).filter(([,e])=>null!=e).map(([e,l])=>[e,String(l)])),n=`${a?`${a}/key/list`:"/key/list"}?${r}`,o=await fetch(n,{method:"GET",headers:{[(0,i.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"}});if(!o.ok){let e=await o.json(),l=(0,i.deriveErrorMessage)(e);throw(0,i.handleError)(l),Error(l)}let d=await o.json();return console.log("/key/list API Response:",d),d}catch(e){throw console.error("Failed to list keys:",e),e}},c=(e,l,s={})=>{let{accessToken:r}=(0,n.A)();return(0,t.I)({queryKey:o.list({page:e,limit:l,...s}),queryFn:async()=>await d(r,e,l,s),enabled:!!r,staleTime:3e4,placeholderData:a.rX})},m=(0,r.D)("deletedKeys"),u=(e,l,s={})=>{let{accessToken:r}=(0,n.A)();return(0,t.I)({queryKey:m.list({page:e,limit:l,...s}),queryFn:async()=>await d(r,e,l,{...s,status:"deleted"}),enabled:!!r,staleTime:3e4,placeholderData:a.rX})}},19113:(e,l,s)=>{s.d(l,{A:()=>u});var t=s(95155);s(12115);var a=s(73648);let r={ttl:3600,lowest_latency_buffer:0},i=({routingStrategyArgs:e})=>{let l={ttl:"Sliding window to look back over when calculating the average latency of a deployment. Default - 1 hour (in seconds).",lowest_latency_buffer:"Shuffle between deployments within this % of the lowest latency. Default - 0 (i.e. always pick lowest latency)."};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"max-w-3xl",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Latency-Based Configuration"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Fine-tune latency-based routing behavior"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2 xl:grid-cols-3",children:Object.entries(e||r).map(([e,s])=>(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsxs)("label",{className:"block",children:[(0,t.jsx)("span",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:e.replace(/_/g," ")}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-0.5 mb-2",children:l[e]||""}),(0,t.jsx)(a.k,{name:e,defaultValue:"object"==typeof s?JSON.stringify(s,null,2):s?.toString(),className:"font-mono text-sm w-full"})]})},e))})]}),(0,t.jsx)("div",{className:"border-t border-gray-200"})]})},n=({routerSettings:e,routerFieldsMetadata:l})=>(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"max-w-3xl",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Reliability & Retries"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Configure retry logic and failure handling"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2 xl:grid-cols-3",children:Object.entries(e).filter(([e,l])=>"fallbacks"!=e&&"context_window_fallbacks"!=e&&"routing_strategy_args"!=e&&"routing_strategy"!=e&&"enable_tag_filtering"!=e).map(([e,s])=>(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsxs)("label",{className:"block",children:[(0,t.jsx)("span",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:l[e]?.ui_field_name||e}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-0.5 mb-2",children:l[e]?.field_description||""}),(0,t.jsx)(a.k,{name:e,defaultValue:null==s||"null"===s?"":"object"==typeof s?JSON.stringify(s,null,2):s?.toString()||"",placeholder:"—",className:"font-mono text-sm w-full"})]})},e))})]});var o=s(23060);let d=({selectedStrategy:e,availableStrategies:l,routingStrategyDescriptions:s,routerFieldsMetadata:a,onStrategyChange:r})=>(0,t.jsxs)("div",{className:"space-y-2 max-w-3xl",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:a.routing_strategy?.ui_field_name||"Routing Strategy"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-0.5 mb-2",children:a.routing_strategy?.field_description||""})]}),(0,t.jsx)("div",{className:"routing-strategy-select max-w-3xl",children:(0,t.jsx)(o.A,{value:e,onChange:r,style:{width:"100%"},size:"large",children:l.map(e=>(0,t.jsx)(o.A.Option,{value:e,label:e,children:(0,t.jsxs)("div",{className:"flex flex-col gap-0.5 py-1",children:[(0,t.jsx)("span",{className:"font-mono text-sm font-medium",children:e}),s[e]&&(0,t.jsx)("span",{className:"text-xs text-gray-500 font-normal",children:s[e]})]})},e))})})]});var c=s(88636);let m=({enabled:e,routerFieldsMetadata:l,onToggle:s})=>(0,t.jsx)("div",{className:"space-y-3 max-w-3xl",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("label",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:l.enable_tag_filtering?.ui_field_name||"Enable Tag Filtering"}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-0.5",children:[l.enable_tag_filtering?.field_description||"",l.enable_tag_filtering?.link&&(0,t.jsxs)(t.Fragment,{children:[" ",(0,t.jsx)("a",{href:l.enable_tag_filtering.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"Learn more"})]})]})]}),(0,t.jsx)(c.A,{checked:e,onChange:s,className:"ml-4"})]})}),u=({value:e,onChange:l,routerFieldsMetadata:s,availableRoutingStrategies:a,routingStrategyDescriptions:r})=>(0,t.jsxs)("div",{className:"w-full space-y-8 py-2",children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"max-w-3xl",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Routing Settings"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Configure how requests are routed to deployments"})]}),a.length>0&&(0,t.jsx)(d,{selectedStrategy:e.selectedStrategy||e.routerSettings.routing_strategy||null,availableStrategies:a,routingStrategyDescriptions:r,routerFieldsMetadata:s,onStrategyChange:s=>{l({...e,selectedStrategy:s})}}),(0,t.jsx)(m,{enabled:e.enableTagFiltering,routerFieldsMetadata:s,onToggle:s=>{l({...e,enableTagFiltering:s})}})]}),(0,t.jsx)("div",{className:"border-t border-gray-200"}),"latency-based-routing"===e.selectedStrategy&&(0,t.jsx)(i,{routingStrategyArgs:e.routerSettings.routing_strategy_args}),(0,t.jsx)(n,{routerSettings:e.routerSettings,routerFieldsMetadata:s})]})},21465:(e,l,s)=>{s.d(l,{A:()=>d});var t=s(95155);s(12115);var a=s(23060),r=s(25387),i=s(22277),n=s(94300);let{Option:o}=a.A,d=({type:e,name:l,showDetailedDescriptions:s=!0,className:d="",initialValue:c=null,form:m,onChange:u})=>{let x=e.toUpperCase(),h=e.toLowerCase(),g=`Select 'guaranteed_throughput' to prevent overallocating ${x} limit when the key belongs to a Team with specific ${x} limits.`;return(0,t.jsx)(r.A.Item,{label:(0,t.jsxs)("span",{children:[x," Rate Limit Type"," ",(0,t.jsx)(i.A,{title:g,children:(0,t.jsx)(n.A,{style:{marginLeft:"4px"}})})]}),name:l,initialValue:c,className:d,children:(0,t.jsx)(a.A,{defaultValue:s?"default":void 0,placeholder:"Select rate limit type",style:{width:"100%"},optionLabelProp:s?"label":void 0,onChange:e=>{m&&m.setFieldValue(l,e),u&&u(e)},children:s?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o,{value:"best_effort_throughput",label:"Default",children:(0,t.jsxs)("div",{style:{padding:"4px 0"},children:[(0,t.jsx)("div",{style:{fontWeight:500},children:"Default"}),(0,t.jsxs)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:["Best effort throughput - no error if we're overallocating ",h," (Team/Key Limits checked at runtime)."]})]})}),(0,t.jsx)(o,{value:"guaranteed_throughput",label:"Guaranteed throughput",children:(0,t.jsxs)("div",{style:{padding:"4px 0"},children:[(0,t.jsx)("div",{style:{fontWeight:500},children:"Guaranteed throughput"}),(0,t.jsxs)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:["Guaranteed throughput - raise an error if we're overallocating ",h," (also checks model-specific limits)"]})]})}),(0,t.jsx)(o,{value:"dynamic",label:"Dynamic",children:(0,t.jsxs)("div",{style:{padding:"4px 0"},children:[(0,t.jsx)("div",{style:{fontWeight:500},children:"Dynamic"}),(0,t.jsxs)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:["If the key has a set ",x," (e.g. 2 ",x,") and there are no 429 errors, it can dynamically exceed the limit when the model being called is not erroring."]})]})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o,{value:"best_effort_throughput",children:"Best effort throughput"}),(0,t.jsx)(o,{value:"guaranteed_throughput",children:"Guaranteed throughput"}),(0,t.jsx)(o,{value:"dynamic",children:"Dynamic"})]})})})}},46547:(e,l,s)=>{s.d(l,{A:()=>m});var t=s(95155),a=s(12115),r=s(4068),i=s(44993),n=s(45588),o=s(78211),d=s(78585),c=s(12120);let m=({accessToken:e,initialModelAliases:l={},onAliasUpdate:s,showExampleConfig:m=!0})=>{let[u,x]=(0,a.useState)([]),[h,g]=(0,a.useState)({aliasName:"",targetModel:""}),[p,y]=(0,a.useState)(null);(0,a.useEffect)(()=>{x(Object.entries(l).map(([e,l],s)=>({id:`${s}-${e}`,aliasName:e,targetModel:l})))},[l]);let j=()=>{if(!p)return;if(!p.aliasName||!p.targetModel)return void c.Ay.fromBackend("Please provide both alias name and target model");if(u.some(e=>e.id!==p.id&&e.aliasName===p.aliasName))return void c.Ay.fromBackend("An alias with this name already exists");let e=u.map(e=>e.id===p.id?p:e);x(e),y(null);let l={};e.forEach(e=>{l[e.aliasName]=e.targetModel}),s&&s(l),c.Ay.success("Alias updated successfully")},f=()=>{y(null)},b=u.reduce((e,l)=>(e[l.aliasName]=l.targetModel,e),{});return(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)(o.EY,{className:"text-sm font-medium text-gray-700 mb-2",children:"Add New Alias"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Alias Name"}),(0,t.jsx)("input",{type:"text",value:h.aliasName,onChange:e=>g({...h,aliasName:e.target.value}),placeholder:"e.g., gpt-4o",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Target Model"}),(0,t.jsx)(d.A,{accessToken:e,value:h.targetModel,placeholder:"Select target model",onChange:e=>g({...h,targetModel:e}),showLabel:!1})]}),(0,t.jsx)("div",{className:"flex items-end",children:(0,t.jsxs)("button",{onClick:()=>{if(!h.aliasName||!h.targetModel)return void c.Ay.fromBackend("Please provide both alias name and target model");if(u.some(e=>e.aliasName===h.aliasName))return void c.Ay.fromBackend("An alias with this name already exists");let e=[...u,{id:`${Date.now()}-${h.aliasName}`,aliasName:h.aliasName,targetModel:h.targetModel}];x(e),g({aliasName:"",targetModel:""});let l={};e.forEach(e=>{l[e.aliasName]=e.targetModel}),s&&s(l),c.Ay.success("Alias added successfully")},disabled:!h.aliasName||!h.targetModel,className:`flex items-center px-4 py-2 rounded-md text-sm ${!h.aliasName||!h.targetModel?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:[(0,t.jsx)(r.A,{className:"w-4 h-4 mr-1"}),"Add Alias"]})})]})]}),(0,t.jsx)(o.EY,{className:"text-sm font-medium text-gray-700 mb-2",children:"Manage Existing Aliases"}),(0,t.jsx)("div",{className:"rounded-lg custom-border relative mb-6",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(o.XI,{className:"[&_td]:py-0.5 [&_th]:py-1",children:[(0,t.jsx)(o.nd,{children:(0,t.jsxs)(o.Hj,{children:[(0,t.jsx)(o.M_,{className:"py-1 h-8",children:"Alias Name"}),(0,t.jsx)(o.M_,{className:"py-1 h-8",children:"Target Model"}),(0,t.jsx)(o.M_,{className:"py-1 h-8",children:"Actions"})]})}),(0,t.jsxs)(o.BF,{children:[u.map(l=>(0,t.jsx)(o.Hj,{className:"h-8",children:p&&p.id===l.id?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.nA,{className:"py-0.5",children:(0,t.jsx)("input",{type:"text",value:p.aliasName,onChange:e=>y({...p,aliasName:e.target.value}),className:"w-full px-2 py-1 border border-gray-300 rounded-md text-sm"})}),(0,t.jsx)(o.nA,{className:"py-0.5",children:(0,t.jsx)(d.A,{accessToken:e,value:p.targetModel,onChange:e=>y({...p,targetModel:e}),showLabel:!1,style:{height:"32px"}})}),(0,t.jsx)(o.nA,{className:"py-0.5 whitespace-nowrap",children:(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("button",{onClick:j,className:"text-xs bg-blue-50 text-blue-600 px-2 py-1 rounded hover:bg-blue-100",children:"Save"}),(0,t.jsx)("button",{onClick:f,className:"text-xs bg-gray-50 text-gray-600 px-2 py-1 rounded hover:bg-gray-100",children:"Cancel"})]})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.nA,{className:"py-0.5 text-sm text-gray-900",children:l.aliasName}),(0,t.jsx)(o.nA,{className:"py-0.5 text-sm text-gray-500",children:l.targetModel}),(0,t.jsx)(o.nA,{className:"py-0.5 whitespace-nowrap",children:(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("button",{onClick:()=>{y({...l})},className:"text-xs bg-blue-50 text-blue-600 px-2 py-1 rounded hover:bg-blue-100",children:(0,t.jsx)(i.A,{className:"w-3 h-3"})}),(0,t.jsx)("button",{onClick:()=>{var e;let t,a;return e=l.id,x(t=u.filter(l=>l.id!==e)),a={},void(t.forEach(e=>{a[e.aliasName]=e.targetModel}),s&&s(a),c.Ay.success("Alias deleted successfully"))},className:"text-xs bg-red-50 text-red-600 px-2 py-1 rounded hover:bg-red-100",children:(0,t.jsx)(n.A,{className:"w-3 h-3"})})]})})]})},l.id)),0===u.length&&(0,t.jsx)(o.Hj,{children:(0,t.jsx)(o.nA,{colSpan:3,className:"py-0.5 text-sm text-gray-500 text-center",children:"No aliases added yet. Add a new alias above."})})]})]})})}),m&&(0,t.jsxs)(o.Zp,{children:[(0,t.jsx)(o.hE,{className:"mb-4",children:"Configuration Example"}),(0,t.jsx)(o.EY,{className:"text-gray-600 mb-4",children:"Here's how your current aliases would look in the config:"}),(0,t.jsx)("div",{className:"bg-gray-100 rounded-lg p-4 font-mono text-sm",children:(0,t.jsxs)("div",{className:"text-gray-700",children:["model_aliases:",0===Object.keys(b).length?(0,t.jsxs)("span",{className:"text-gray-500",children:[(0,t.jsx)("br",{}),"\xa0\xa0# No aliases configured yet"]}):Object.entries(b).map(([e,l])=>(0,t.jsxs)("span",{children:[(0,t.jsx)("br",{}),'\xa0\xa0"',e,'": "',l,'"']},e))]})})]})]})}},52046:(e,l,s)=>{s.d(l,{A:()=>i});var t=s(95155);s(12115);var a=s(21796),r=s(69975);let i=function({value:e,onChange:l,premiumUser:s=!1,disabledCallbacks:i=[],onDisabledCallbacksChange:n}){return s?(0,t.jsx)(r.A,{value:e,onChange:l,disabledCallbacks:i,onDisabledCallbacksChange:n}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 mb-3",children:[(0,t.jsx)("div",{className:"inline-flex items-center px-3 py-1.5 rounded-lg bg-green-50 border border-green-200 text-green-800 text-sm font-medium opacity-50",children:"✨ langfuse-logging"}),(0,t.jsx)("div",{className:"inline-flex items-center px-3 py-1.5 rounded-lg bg-green-50 border border-green-200 text-green-800 text-sm font-medium opacity-50",children:"✨ datadog-logging"})]}),(0,t.jsx)("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,t.jsxs)(a.E,{className:"text-sm text-yellow-800",children:["Setting Key/Team logging settings is a Silinex Enterprise feature. Global Logging Settings are available for all free users. Get a trial key"," ",(0,t.jsx)("a",{href:"https://www.litellm.ai/#pricing",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"here"}),"."]})})]})}},78585:(e,l,s)=>{s.d(l,{A:()=>d});var t=s(95155),a=s(12115),r=s(58337),i=s(23060),n=s(19910),o=s(22603);let d=({accessToken:e,value:l,placeholder:s="Select a Model",onChange:d,disabled:c=!1,style:m,className:u,showLabel:x=!0,labelText:h="Select Model"})=>{let[g,p]=(0,a.useState)(l),[y,j]=(0,a.useState)(!1),[f,b]=(0,a.useState)([]),_=(0,a.useRef)(null);return(0,a.useEffect)(()=>{p(l)},[l]),(0,a.useEffect)(()=>{e&&(async()=>{try{let l=await (0,o.Q)(e);console.log("Fetched models for selector:",l),l.length>0&&b(l)}catch(e){console.error("Error fetching model info:",e)}})()},[e]),(0,t.jsxs)("div",{children:[x&&(0,t.jsxs)(r.E,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,t.jsx)(n.A,{className:"mr-2"})," ",h]}),(0,t.jsx)(i.A,{value:g,placeholder:s,onChange:e=>{"custom"===e?(j(!0),p(void 0)):(j(!1),p(e),d&&d(e))},options:[...Array.from(new Set(f.map(e=>e.model_group))).map((e,l)=>({value:e,label:e,key:l})),{value:"custom",label:"Enter custom model",key:"custom"}],style:{width:"100%",...m},showSearch:!0,className:`rounded-md ${u||""}`,disabled:c}),y&&(0,t.jsx)(r.k,{className:"mt-2",placeholder:"Enter custom model name",onValueChange:e=>{_.current&&clearTimeout(_.current),_.current=setTimeout(()=>{p(e),d&&d(e)},500)},disabled:c})]})}},87525:(e,l,s)=>{s.d(l,{A:()=>o});var t=s(95155),a=s(12115),r=s(99312),i=s(87056),n=s(87278);let o=({apiKey:e})=>{let[l,s]=(0,a.useState)(!1);return(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"mb-2",children:["Please save this secret key somewhere safe and accessible. For security reasons,"," ",(0,t.jsx)("b",{children:"you will not be able to view it again"})," through your Silinex account. If you lose this secret key, you will need to generate a new one."]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-3 mb-1",children:"Virtual Key:"}),(0,t.jsx)("div",{style:{background:"#f8f8f8",padding:"10px",borderRadius:"5px",marginBottom:"10px"},children:(0,t.jsx)("pre",{style:{wordWrap:"break-word",whiteSpace:"normal",margin:0},children:e})}),(0,t.jsx)(r.CopyToClipboard,{text:e,onCopy:()=>{s(!0),i.Ay.success("Key copied to clipboard"),setTimeout(()=>s(!1),2e3)},children:(0,t.jsx)(n.Ay,{type:"primary",style:{marginTop:12},children:l?"Copied!":"Copy Virtual Key"})})]})}},98931:(e,l,s)=>{s.d(l,{Ay:()=>er,uy:()=>et,kE:()=>ea});var t=s(95155),a=s(14290),r=s(11698),i=s(42696),n=s(88534),o=s(94300),d=s(35625),c=s(95875),m=s(56691),u=s(20645),x=s(38983),h=s(27309),g=s(13121),p=s(75892),y=s(34487),j=s(64628),f=s(23060),b=s(25387),_=s(3373),v=s(22277),N=s(55895),A=s(87278),k=s(16989),w=s(91808),S=s(29822),C=s.n(S),M=s(12115),L=s(90550),F=s(53800),I=s(46428),T=s(32521),D=s(90630),E=s(9803),P=s(46547),V=s(13506),$=s(52046),R=s(21465),O=s(96130),K=s(28436),B=s(19113),G=s(6761),q=s(22603);let z=(0,M.forwardRef)(({accessToken:e,value:l,onChange:s,modelData:a},r)=>{let[i,n]=(0,M.useState)({routerSettings:{},selectedStrategy:null,enableTagFiltering:!1}),[o,d]=(0,M.useState)([]),[c,m]=(0,M.useState)([]),[u,x]=(0,M.useState)([]),[h,g]=(0,M.useState)([]),[p,y]=(0,M.useState)({}),[j,f]=(0,M.useState)({}),b=(0,M.useRef)(!1),_=(0,M.useRef)(null);(0,M.useEffect)(()=>{let e=l?.router_settings?JSON.stringify({routing_strategy:l.router_settings.routing_strategy,fallbacks:l.router_settings.fallbacks,enable_tag_filtering:l.router_settings.enable_tag_filtering}):null;if(b.current&&e===_.current){b.current=!1;return}if(b.current&&e!==_.current&&(b.current=!1),e!==_.current)if(_.current=e,l?.router_settings){let e=l.router_settings,{fallbacks:s,...t}=e;n({routerSettings:t,selectedStrategy:e.routing_strategy||null,enableTagFiltering:e.enable_tag_filtering??!1});let a=e.fallbacks||[];d(a),m(a&&0!==a.length?a.map((e,l)=>{let[s,t]=Object.entries(e)[0];return{id:(l+1).toString(),primaryModel:s||null,fallbackModels:t||[]}}):[{id:"1",primaryModel:null,fallbackModels:[]}])}else n({routerSettings:{},selectedStrategy:null,enableTagFiltering:!1}),d([]),m([{id:"1",primaryModel:null,fallbackModels:[]}])},[l]),(0,M.useEffect)(()=>{e&&(0,K.getRouterSettingsCall)(e).then(e=>{if(e.fields){let l={};e.fields.forEach(e=>{l[e.field_name]={ui_field_name:e.ui_field_name,field_description:e.field_description,options:e.options,link:e.link}}),y(l);let s=e.fields.find(e=>"routing_strategy"===e.field_name);s?.options&&g(s.options),e.routing_strategy_descriptions&&f(e.routing_strategy_descriptions)}})},[e]),(0,M.useEffect)(()=>{e&&(async()=>{try{let l=await (0,q.Q)(e);x(l)}catch(e){console.error("Error fetching model info for fallbacks:",e)}})()},[e]);let v=()=>{let e=new Set(["allowed_fails","cooldown_time","num_retries","timeout","retry_after"]),l=new Set(["model_group_alias","retry_policy"]),s=Object.fromEntries(Object.entries({...i.routerSettings,enable_tag_filtering:i.enableTagFiltering,routing_strategy:i.selectedStrategy,fallbacks:o.length>0?o:null}).map(([s,t])=>{if("routing_strategy_args"!==s&&"routing_strategy"!==s&&"enable_tag_filtering"!==s&&"fallbacks"!==s){let a=document.querySelector(`input[name="${s}"]`);if(a&&void 0!==a.value&&""!==a.value){let r=((s,t,a)=>{if(null==t)return a;let r=String(t).trim();if(""===r||"null"===r.toLowerCase())return null;if(e.has(s)){let e=Number(r);return Number.isNaN(e)?a:e}if(l.has(s)){if(""===r)return null;try{return JSON.parse(r)}catch{return a}}return"true"===r.toLowerCase()||"false"!==r.toLowerCase()&&r})(s,a.value,t);return[s,r]}}else if("routing_strategy"===s)return[s,i.selectedStrategy];else if("enable_tag_filtering"===s)return[s,i.enableTagFiltering];else if("fallbacks"===s)return[s,o.length>0?o:null];else if("routing_strategy_args"===s&&"latency-based-routing"===i.selectedStrategy){let e=document.querySelector('input[name="lowest_latency_buffer"]'),l=document.querySelector('input[name="ttl"]'),s={};return e?.value&&(s.lowest_latency_buffer=Number(e.value)),l?.value&&(s.ttl=Number(l.value)),["routing_strategy_args",Object.keys(s).length>0?s:null]}return[s,t]}).filter(e=>null!=e)),t=(e,l=!1)=>null==e||"object"==typeof e&&!Array.isArray(e)&&0===Object.keys(e).length||l&&("number"!=typeof e||Number.isNaN(e))?null:e;return{routing_strategy:t(s.routing_strategy),allowed_fails:t(s.allowed_fails,!0),cooldown_time:t(s.cooldown_time,!0),num_retries:t(s.num_retries,!0),timeout:t(s.timeout,!0),retry_after:t(s.retry_after,!0),fallbacks:o.length>0?o:null,context_window_fallbacks:t(s.context_window_fallbacks),retry_policy:t(s.retry_policy),model_group_alias:t(s.model_group_alias),enable_tag_filtering:i.enableTagFiltering,routing_strategy_args:t(s.routing_strategy_args)}};(0,M.useEffect)(()=>{if(!s)return;let e=setTimeout(()=>{b.current=!0,s({router_settings:v()})},100);return()=>clearTimeout(e)},[i,o]);let N=Array.from(new Set(u.map(e=>e.model_group))).sort();return((0,M.useImperativeHandle)(r,()=>({getValue:()=>({router_settings:v()})})),e)?(0,t.jsx)("div",{className:"w-full",children:(0,t.jsxs)(O.fu,{className:"w-full",children:[(0,t.jsxs)(O.wb,{variant:"line",defaultValue:"1",className:"px-8 pt-4",children:[(0,t.jsx)(O.oz,{value:"1",children:"Loadbalancing"}),(0,t.jsx)(O.oz,{value:"2",children:"Fallbacks"})]}),(0,t.jsxs)(O.T2,{className:"px-8 py-6",children:[(0,t.jsx)(O.Kp,{children:(0,t.jsx)(B.A,{value:i,onChange:n,routerFieldsMetadata:p,availableRoutingStrategies:h,routingStrategyDescriptions:j})}),(0,t.jsx)(O.Kp,{children:(0,t.jsx)(G.p,{groups:c,onGroupsChange:e=>{m(e),d(e.filter(e=>e.primaryModel&&e.fallbackModels.length>0).map(e=>({[e.primaryModel]:e.fallbackModels})))},availableModels:N,maxGroups:5})})]})]})}):null});z.displayName="RouterSettingsAccordion";var U=s(42025),J=s(27707),H=s(48154),W=s(64601),Y=s(11072),Q=s(25707),X=s(12120),Z=s(66904),ee=s(66927),el=s(87525);let{Option:es}=f.A,et=async(e,l,s,t)=>{try{if(null===e||null===l)return[];if(null!==s){let a=(await (0,K.modelAvailableCall)(s,e,l,!0,t,!0)).data.map(e=>e.id);return console.log("available_model_names:",a),a}return[]}catch(e){return console.error("Error fetching user models:",e),[]}},ea=async(e,l,s,t)=>{try{if(null===e||null===l)return;if(null!==s){let a=(await (0,K.modelAvailableCall)(s,e,l)).data.map(e=>e.id);console.log("available_model_names:",a),t(a)}}catch(e){console.error("Error fetching user models:",e)}},er=({team:e,teams:l,data:s,addKey:S})=>{let{accessToken:O,userId:B,userRole:G,premiumUser:q}=(0,i.A)(),{t:er}=(0,a.o)(),ei=(0,d.jE)(),[en]=b.A.useForm(),[eo,ed]=(0,M.useState)(!1),[ec,em]=(0,M.useState)(null),[eu,ex]=(0,M.useState)(null),[eh,eg]=(0,M.useState)([]),[ep,ey]=(0,M.useState)([]),[ej,ef]=(0,M.useState)("you"),[eb,e_]=(0,M.useState)((e=>{let l=[];if(console.log("data:",JSON.stringify(e)),e)for(let s of e)s.metadata&&s.metadata.tags&&l.push(...s.metadata.tags);let s=Array.from(new Set(l)).map(e=>({value:e,label:e}));return console.log("uniqueTags:",s),s})(s)),[ev,eN]=(0,M.useState)([]),[eA,ek]=(0,M.useState)([]),[ew,eS]=(0,M.useState)([]),[eC,eM]=(0,M.useState)([]),[eL,eF]=(0,M.useState)(e),[eI,eT]=(0,M.useState)(!1),[eD,eE]=(0,M.useState)(null),[eP,eV]=(0,M.useState)({}),[e$,eR]=(0,M.useState)([]),[eO,eK]=(0,M.useState)(!1),[eB,eG]=(0,M.useState)([]),[eq,ez]=(0,M.useState)([]),[eU,eJ]=(0,M.useState)("llm_api"),[eH,eW]=(0,M.useState)({}),[eY,eQ]=(0,M.useState)(!1),[eX,eZ]=(0,M.useState)("30d"),[e0,e1]=(0,M.useState)(null),[e4,e5]=(0,M.useState)(0),e2=()=>{ed(!1),en.resetFields(),eM([]),ez([]),eJ("llm_api"),eW({}),eQ(!1),eZ("30d"),e1(null),e5(e=>e+1)},e3=()=>{ed(!1),em(null),eF(null),en.resetFields(),eM([]),ez([]),eJ("llm_api"),eW({}),eQ(!1),eZ("30d"),e1(null),e5(e=>e+1)};(0,M.useEffect)(()=>{B&&G&&O&&ea(B,G,O,eg)},[O,B,G]),(0,M.useEffect)(()=>{let e=async()=>{try{let e=(await (0,K.getPoliciesList)(O)).policies.map(e=>e.policy_name);ek(e)}catch(e){console.error("Failed to fetch policies:",e)}},l=async()=>{try{let e=await (0,K.getPromptsList)(O);eS(e.prompts.map(e=>e.prompt_id))}catch(e){console.error("Failed to fetch prompts:",e)}};(async()=>{try{let e=(await (0,K.getGuardrailsList)(O)).guardrails.map(e=>e.guardrail_name);eN(e)}catch(e){console.error("Failed to fetch guardrails:",e)}})(),e(),l()},[O]),(0,M.useEffect)(()=>{(async()=>{try{if(O){let e=sessionStorage.getItem("possibleUserRoles");if(e)eV(JSON.parse(e));else{let e=await (0,K.getPossibleUserRoles)(O);sessionStorage.setItem("possibleUserRoles",JSON.stringify(e)),eV(e)}}}catch(e){console.error("Error fetching possible user roles:",e)}})()},[O]);let e6=ep.includes("no-default-models")&&!eL,e8=async e=>{try{let l=e?.key_alias??"",t=e?.team_id??null;if((s?.filter(e=>e.team_id===t).map(e=>e.key_alias)??[]).includes(l))throw Error(`Key alias ${l} already exists for team with ID ${t}, please provide another key alias`);X.Ay.info("Making API Call"),ed(!0),"you"===ej&&(e.user_id=B);let a={};try{a=JSON.parse(e.metadata||"{}")}catch(e){console.error("Error parsing metadata:",e)}if(eC.length>0&&(a={...a,logging:eC.filter(e=>e.callback_name)}),eq.length>0){let e=(0,I.xZ)(eq);a={...a,litellm_disabled_callbacks:e}}if(eY&&(e.auto_rotate=!0,e.rotation_interval=eX),e.duration&&""!==e.duration.trim()||(e.duration=null),e.metadata=JSON.stringify(a),e.allowed_vector_store_ids&&e.allowed_vector_store_ids.length>0&&(e.object_permission={vector_stores:e.allowed_vector_store_ids},delete e.allowed_vector_store_ids),e.allowed_mcp_servers_and_groups&&(e.allowed_mcp_servers_and_groups.servers?.length>0||e.allowed_mcp_servers_and_groups.accessGroups?.length>0)){e.object_permission||(e.object_permission={});let{servers:l,accessGroups:s}=e.allowed_mcp_servers_and_groups;l&&l.length>0&&(e.object_permission.mcp_servers=l),s&&s.length>0&&(e.object_permission.mcp_access_groups=s),delete e.allowed_mcp_servers_and_groups}let i=e.mcp_tool_permissions||{};if(Object.keys(i).length>0&&(e.object_permission||(e.object_permission={}),e.object_permission.mcp_tool_permissions=i),delete e.mcp_tool_permissions,e.allowed_mcp_access_groups&&e.allowed_mcp_access_groups.length>0&&(e.object_permission||(e.object_permission={}),e.object_permission.mcp_access_groups=e.allowed_mcp_access_groups,delete e.allowed_mcp_access_groups),e.allowed_agents_and_groups&&(e.allowed_agents_and_groups.agents?.length>0||e.allowed_agents_and_groups.accessGroups?.length>0)){e.object_permission||(e.object_permission={});let{agents:l,accessGroups:s}=e.allowed_agents_and_groups;l&&l.length>0&&(e.object_permission.agents=l),s&&s.length>0&&(e.object_permission.agent_access_groups=s),delete e.allowed_agents_and_groups}Object.keys(eH).length>0&&(e.aliases=JSON.stringify(eH)),e0?.router_settings&&Object.values(e0.router_settings).some(e=>null!=e&&""!==e)&&(e.router_settings=e0.router_settings);let n=await (0,K.keyCreateCall)(O,B,e);console.log("key create Response:",n),S(n),ei.invalidateQueries({queryKey:r.oV.lists()}),em(n.key),ex(n.soft_budget),X.Ay.success("Virtual Key Created"),en.resetFields(),localStorage.removeItem("userData"+B)}catch(l){console.log("error in create key:",l);let e=(e=>{let l;if(!(l=!e||"object"!=typeof e||e instanceof Error?String(e):JSON.stringify(e)).includes("/key/generate")&&!l.includes("KeyManagementRoutes.KEY_GENERATE"))return`Error creating the key: ${e}`;let s=l;try{if(!e||"object"!=typeof e||e instanceof Error){let e=l.match(/\{[\s\S]*\}/);if(e){let l=JSON.parse(e[0]),t=l?.error||l;t?.message&&(s=t.message)}}else{let l=e?.error||e;l?.message&&(s=l.message)}}catch(e){}return l.includes("team_member_permission_error")||s.includes("Team member does not have permissions")?"Team member does not have permission to generate key for this team. Ask your proxy admin to configure the team member permission settings.":`Error creating the key: ${e}`})(l);X.Ay.fromBackend(e)}};(0,M.useEffect)(()=>{B&&G&&O&&et(B,G,O,eL?.team_id??null).then(e=>{ey(Array.from(new Set([...eL?.models??[],...e])))}),en.setFieldValue("models",[])},[eL,O,B,G]);let e7=async e=>{if(!e)return void eR([]);eK(!0);try{let l=new URLSearchParams;if(l.append("user_email",e),null==O)return;let s=(await (0,K.userFilterUICall)(O,l)).map(e=>({label:`${e.user_email} (${e.user_id})`,value:e.user_id,user:e}));eR(s)}catch(e){console.error("Error fetching users:",e),X.Ay.fromBackend("Failed to search for users")}finally{eK(!1)}},e9=(0,M.useCallback)(C()(e=>e7(e),300),[O]);return(0,t.jsxs)("div",{children:[G&&L.FJ.includes(G)&&(0,t.jsx)(x.A,{className:"mx-auto",onClick:()=>ed(!0),children:"+ 创建新密钥"}),(0,t.jsx)(_.A,{open:eo,width:1e3,footer:null,onOk:e2,onCancel:e3,children:(0,t.jsxs)(b.A,{form:en,onFinish:e8,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",className:"[&_.ant-form-item]:mb-6",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)(j.A,{className:"mb-4",children:"创建密钥"}),(0,t.jsx)(b.A.Item,{label:(0,t.jsxs)("span",{children:["所有者"," ",(0,t.jsx)(v.A,{title:"选择谁将拥有此API密钥",children:(0,t.jsx)(o.A,{style:{marginLeft:"4px"}})})]}),className:"mb-4",children:(0,t.jsxs)(N.Ay.Group,{onChange:e=>ef(e.target.value),value:ej,children:[(0,t.jsx)(N.Ay,{value:"you",children:"您"}),"Admin"===G&&(0,t.jsx)(N.Ay,{value:"another_user",children:"其他用户"})]})}),"another_user"===ej&&(0,t.jsx)(b.A.Item,{label:(0,t.jsxs)("span",{children:["用户 ID"," ",(0,t.jsx)(v.A,{title:"将拥有此密钥并负责其使用的用户",children:(0,t.jsx)(o.A,{style:{marginLeft:"4px"}})})]}),name:"user_id",className:"mt-4",rules:[{required:"another_user"===ej,message:`请输入您要分配密钥的用户 ID`}],children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{display:"flex",marginBottom:"8px"},children:[(0,t.jsx)(f.A,{showSearch:!0,placeholder:"输入用户名搜索用户",filterOption:!1,onSearch:e=>{e9(e)},onSelect:(e,l)=>{let s;return s=l.user,void en.setFieldsValue({user_id:s.user_id})},options:e$,loading:eO,allowClear:!0,style:{width:"100%"},notFoundContent:eO?"搜索中...":"未找到用户"}),(0,t.jsx)(A.Ay,{onClick:()=>eT(!0),style:{marginLeft:"8px"},children:"创建用户"})]}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"通过用户名搜索用户"})]})}),(0,t.jsx)(b.A.Item,{label:(0,t.jsxs)("span",{children:["分组"," ",(0,t.jsx)(v.A,{title:"此密钥所属的分组，决定可用模型和预算限制",children:(0,t.jsx)(o.A,{style:{marginLeft:"4px"}})})]}),name:"team_id",initialValue:e?e.team_id:null,className:"mt-4",children:(0,t.jsx)(J.A,{teams:l,onChange:e=>{eF(l?.find(l=>l.team_id===e)||null)}})})]}),e6&&(0,t.jsx)("div",{className:"mb-8 p-4 bg-blue-50 border border-blue-200 rounded-md",children:(0,t.jsx)(p.A,{className:"text-blue-800 text-sm",children:"请选择分组以继续配置您的 API 密钥。如果您没有看到任何分组，请联系您的代理管理员为您提供模型访问权限或将您添加到分组中。"})}),!e6&&(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)(j.A,{className:"mb-4",children:"密钥详情"}),(0,t.jsx)(b.A.Item,{label:(0,t.jsxs)("span",{children:["密钥名称"," ",(0,t.jsx)(v.A,{title:"用于识别此密钥的描述性名称",children:(0,t.jsx)(o.A,{style:{marginLeft:"4px"}})})]}),name:"key_alias",rules:[{required:!0,message:"请输入密钥名称"}],children:(0,t.jsx)(y.A,{placeholder:""})}),(0,t.jsx)(b.A.Item,{label:(0,t.jsxs)("span",{children:["模型"," ",(0,t.jsx)(v.A,{title:"选择此密钥可以访问的模型。选择“所有分组模型”以授予对分组所有可用模型的访问权限",children:(0,t.jsx)(o.A,{style:{marginLeft:"4px"}})})]}),name:"models",rules:"management"===eU||"read_only"===eU?[]:[{required:!0,message:"请选择模型"}],help:"management"===eU||"read_only"===eU?"此密钥类型禁用模型字段":void 0,className:"mt-4",children:(0,t.jsxs)(f.A,{mode:"multiple",placeholder:"选择模型",style:{width:"100%"},disabled:"management"===eU||"read_only"===eU,onChange:e=>{e.includes("all-team-models")&&en.setFieldsValue({models:["all-team-models"]})},children:[(0,t.jsx)(es,{value:"all-team-models",children:er("keyDetail.settings.messages.allTeamModels").replace("团队","分组")},"all-team-models"),ep.map(e=>(0,t.jsx)(es,{value:e,children:(0,W.$L)(e)},e))]})}),(0,t.jsx)(b.A.Item,{label:(0,t.jsxs)("span",{children:["密钥类型"," ",(0,t.jsx)(v.A,{title:"选择密钥类型以确定此密钥可以访问的路由和操作",children:(0,t.jsx)(o.A,{style:{marginLeft:"4px"}})})]}),name:"key_type",initialValue:"llm_api",className:"mt-4",children:(0,t.jsxs)(f.A,{defaultValue:"llm_api",placeholder:"选择密钥类型",style:{width:"100%"},optionLabelProp:"label",onChange:e=>{eJ(e),("management"===e||"read_only"===e)&&en.setFieldsValue({models:[]})},children:[(0,t.jsx)(es,{value:"default",label:"默认",children:(0,t.jsxs)("div",{style:{padding:"4px 0"},children:[(0,t.jsx)("div",{style:{fontWeight:500},children:"默认"}),(0,t.jsx)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:"可调用 AI API + 管理路由"})]})}),(0,t.jsx)(es,{value:"llm_api",label:"AI API",children:(0,t.jsxs)("div",{style:{padding:"4px 0"},children:[(0,t.jsx)("div",{style:{fontWeight:500},children:"AI API"}),(0,t.jsx)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:"仅可调用 AI API 路由（chat/completions、embeddings 等）"})]})}),(0,t.jsx)(es,{value:"management",label:"管理",children:(0,t.jsxs)("div",{style:{padding:"4px 0"},children:[(0,t.jsx)("div",{style:{fontWeight:500},children:"管理"}),(0,t.jsx)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:"仅可调用管理路由（用户/分组/密钥管理）"})]})})]})}),(0,t.jsx)(b.A.Item,{className:"mt-4 mb-8",style:{marginBottom:40},label:(0,t.jsxs)("span",{children:["最大预算"," ",(0,t.jsx)(v.A,{title:"此密钥可以消费的最大金额。达到后，密钥将被阻止发起进一步请求",children:(0,t.jsx)(o.A,{style:{marginLeft:"4px"}})})]}),name:"max_budget",help:(0,t.jsx)("div",{className:"pb-2",children:`预算不能超过分组最大预算：\xa5${e?.max_budget!==null&&e?.max_budget!==void 0?e.max_budget:"无限制"}`}),rules:[{validator:async(l,s)=>{if(s&&e&&null!==e.max_budget&&s>e.max_budget)throw Error(`预算不能超过分组最大预算：\xa5${(0,n.HY)(e.max_budget,4)}`)}}],children:(0,t.jsx)(Z.A,{step:.01,precision:2,width:200,placeholder:er("keyDetail.settings.placeholders.enterNumericalValue")})}),(0,t.jsx)(b.A.Item,{className:"mt-4 mb-8",style:{marginBottom:40},label:(0,t.jsxs)("span",{children:["重置预算"," ",(0,t.jsx)(v.A,{title:"预算应多久重置一次。例如，设置'每天'将每 24 小时重置一次预算",children:(0,t.jsx)(o.A,{style:{marginLeft:"4px"}})})]}),name:"budget_duration",help:(0,t.jsx)("div",{className:"pb-2",children:`分组重置预算：${e?.budget_duration!==null&&e?.budget_duration!==void 0?e.budget_duration:"无"}`}),children:(0,t.jsx)(T.A,{onChange:e=>en.setFieldValue("budget_duration",e)})})]}),!e6&&(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsxs)(c.h,{className:"mt-4 mb-4",children:[(0,t.jsx)(u.A,{children:(0,t.jsx)(j.A,{className:"m-0",children:"可选设置"})}),(0,t.jsxs)(m.A,{children:[(0,t.jsx)(b.A.Item,{className:"mt-4",label:(0,t.jsxs)("span",{children:["每分钟 Token 限制 (TPM)"," ",(0,t.jsx)(v.A,{title:"此密钥每分钟可以处理的最大 token 数量。有助于控制使用和成本",children:(0,t.jsx)(o.A,{style:{marginLeft:"4px"}})})]}),name:"tpm_limit",help:`TPM 不能超过分组 TPM 限制：${e?.tpm_limit!==null&&e?.tpm_limit!==void 0?e?.tpm_limit:"无限制"}`,rules:[{validator:async(l,s)=>{if(s&&e&&null!==e.tpm_limit&&s>e.tpm_limit)throw Error(`TPM 限制不能超过分组 TPM 限制：${e.tpm_limit}`)}}],children:(0,t.jsx)(Z.A,{step:1,width:400,placeholder:er("keyDetail.settings.placeholders.enterNumericalValue")})}),(0,t.jsx)(R.A,{type:"tpm",name:"tpm_limit_type",className:"mt-4",initialValue:null,form:en,showDetailedDescriptions:!0}),(0,t.jsx)(b.A.Item,{className:"mt-4",label:(0,t.jsxs)("span",{children:["每分钟请求限制 (RPM)"," ",(0,t.jsx)(v.A,{title:"此密钥每分钟可以发起的最大 API 请求数。有助于防止滥用和管理负载",children:(0,t.jsx)(o.A,{style:{marginLeft:"4px"}})})]}),name:"rpm_limit",help:`RPM 不能超过分组 RPM 限制：${e?.rpm_limit!==null&&e?.rpm_limit!==void 0?e?.rpm_limit:"无限制"}`,rules:[{validator:async(l,s)=>{if(s&&e&&null!==e.rpm_limit&&s>e.rpm_limit)throw Error(`RPM 限制不能超过分组 RPM 限制：${e.rpm_limit}`)}}],children:(0,t.jsx)(Z.A,{step:1,width:400,placeholder:er("keyDetail.settings.placeholders.enterNumericalValue")})}),(0,t.jsx)(R.A,{type:"rpm",name:"rpm_limit_type",className:"mt-4",initialValue:null,form:en,showDetailedDescriptions:!0}),q&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b.A.Item,{label:(0,t.jsxs)("span",{children:["安全防护"," ",(0,t.jsx)(v.A,{title:"为此密钥应用安全防护以过滤内容或强制执行策略",children:(0,t.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/guardrails/quick_start",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(o.A,{style:{marginLeft:"4px"}})})})]}),name:"guardrails",className:"mt-4",help:"选择现有安全防护或输入新的",children:(0,t.jsx)(f.A,{mode:"tags",style:{width:"100%"},placeholder:"选择或输入安全防护",options:ev.map(e=>({value:e,label:e}))})}),(0,t.jsx)(b.A.Item,{label:(0,t.jsxs)("span",{children:["禁用全局安全防护"," ",(0,t.jsx)(v.A,{title:"启用后，此密钥将绕过任何配置为在每个请求上运行的安全防护（全局安全防护）",children:(0,t.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/guardrails/quick_start",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(o.A,{style:{marginLeft:"4px"}})})})]}),name:"disable_global_guardrails",className:"mt-4",valuePropName:"checked",help:"为此密钥绕过全局安全防护",children:(0,t.jsx)(k.A,{checkedChildren:"是",unCheckedChildren:"否"})}),(0,t.jsx)(b.A.Item,{label:(0,t.jsxs)("span",{children:["策略"," ",(0,t.jsx)(v.A,{title:"为此密钥应用策略以控制安全防护和其他设置",children:(0,t.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/guardrails/guardrail_policies",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(o.A,{style:{marginLeft:"4px"}})})})]}),name:"policies",className:"mt-4",help:"选择现有策略或输入新的",children:(0,t.jsx)(f.A,{mode:"tags",style:{width:"100%"},placeholder:"选择或输入策略",options:eA.map(e=>({value:e,label:e}))})}),(0,t.jsx)(b.A.Item,{label:(0,t.jsxs)("span",{children:["提示词"," ",(0,t.jsx)(v.A,{title:"允许此密钥使用特定的提示词模板",children:(0,t.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/prompt_management",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(o.A,{style:{marginLeft:"4px"}})})})]}),name:"prompts",className:"mt-4",help:"选择现有提示词或输入新的",children:(0,t.jsx)(f.A,{mode:"tags",style:{width:"100%"},placeholder:er("keyDetail.settings.placeholders.selectPrompts"),options:ew.map(e=>({value:e,label:e}))})})]}),(0,t.jsx)(b.A.Item,{label:(0,t.jsxs)("span",{children:["访问组"," ",(0,t.jsx)(v.A,{title:"为此密钥分配访问组。访问组控制此密钥可以使用的模型、MCP 服务器和智能体",children:(0,t.jsx)(o.A,{style:{marginLeft:"4px"}})})]}),name:"access_group_ids",className:"mt-4",help:er("keyDetail.settings.accessGroupsTooltip"),children:(0,t.jsx)(U.A,{placeholder:er("keyDetail.settings.placeholders.selectAccessGroups")})}),q&&(0,t.jsx)(b.A.Item,{label:(0,t.jsxs)("span",{children:["允许的透传路由"," ",(0,t.jsx)(v.A,{title:"允许此密钥使用特定的透传路由",children:(0,t.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/pass_through",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(o.A,{style:{marginLeft:"4px"}})})})]}),name:"allowed_passthrough_routes",className:"mt-4",help:"选择现有透传路由或输入新的",children:(0,t.jsx)(V.A,{onChange:e=>en.setFieldValue("allowed_passthrough_routes",e),value:en.getFieldValue("allowed_passthrough_routes"),accessToken:O,placeholder:"选择或输入透传路由",teamId:eL?eL.team_id:null})}),(0,t.jsx)(b.A.Item,{label:(0,t.jsxs)("span",{children:["允许的向量库"," ",(0,t.jsx)(v.A,{title:"选择此密钥可以访问的向量库。如果未选择，密钥将可以访问所有可用的向量库",children:(0,t.jsx)(o.A,{style:{marginLeft:"4px"}})})]}),name:"allowed_vector_store_ids",className:"mt-4",help:er("keyDetail.settings.vectorStores"),children:(0,t.jsx)(ee.A,{onChange:e=>en.setFieldValue("allowed_vector_store_ids",e),value:en.getFieldValue("allowed_vector_store_ids"),accessToken:O,placeholder:er("keyDetail.settings.placeholders.selectVectorStores")})}),(0,t.jsx)(b.A.Item,{label:(0,t.jsxs)("span",{children:["元数据"," ",(0,t.jsx)(v.A,{title:"包含有关此密钥的附加信息的 JSON 对象。用于跟踪或自定义逻辑",children:(0,t.jsx)(o.A,{style:{marginLeft:"4px"}})})]}),name:"metadata",className:"mt-4",children:(0,t.jsx)(w.A.TextArea,{rows:4,placeholder:er("keyDetail.settings.metadataLabel")})}),(0,t.jsx)(b.A.Item,{label:(0,t.jsxs)("span",{children:["标签"," ",(0,t.jsx)(v.A,{title:"用于跟踪消费和/或进行基于标签的路由。用于分析和过滤",children:(0,t.jsx)(o.A,{style:{marginLeft:"4px"}})})]}),name:"tags",className:"mt-4",help:`用于跟踪消费和/或进行基于标签的路由。`,children:(0,t.jsx)(f.A,{mode:"tags",style:{width:"100%"},placeholder:er("keyDetail.settings.placeholders.selectTags"),tokenSeparators:[","],options:eb})}),(0,t.jsxs)(c.h,{className:"mt-4 mb-4",children:[(0,t.jsx)(u.A,{children:(0,t.jsx)("b",{children:"MCP 设置"})}),(0,t.jsxs)(m.A,{children:[(0,t.jsx)(b.A.Item,{label:(0,t.jsxs)("span",{children:["允许的 MCP 服务器"," ",(0,t.jsx)(v.A,{title:"选择此密钥可以访问的 MCP 服务器或访问组",children:(0,t.jsx)(o.A,{style:{marginLeft:"4px"}})})]}),name:"allowed_mcp_servers_and_groups",help:er("keyDetail.settings.mcpServers"),children:(0,t.jsx)(Y.A,{onChange:e=>en.setFieldValue("allowed_mcp_servers_and_groups",e),value:en.getFieldValue("allowed_mcp_servers_and_groups"),accessToken:O,placeholder:er("keyDetail.settings.placeholders.selectMcpServers")})}),(0,t.jsx)(b.A.Item,{name:"mcp_tool_permissions",initialValue:{},hidden:!0,children:(0,t.jsx)(w.A,{type:"hidden"})}),(0,t.jsx)(b.A.Item,{noStyle:!0,shouldUpdate:(e,l)=>e.allowed_mcp_servers_and_groups!==l.allowed_mcp_servers_and_groups||e.mcp_tool_permissions!==l.mcp_tool_permissions,children:()=>(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsx)(Q.A,{accessToken:O,selectedServers:en.getFieldValue("allowed_mcp_servers_and_groups")?.servers||[],toolPermissions:en.getFieldValue("mcp_tool_permissions")||{},onChange:e=>en.setFieldsValue({mcp_tool_permissions:e})})})})]})]}),(0,t.jsxs)(c.h,{className:"mt-4 mb-4",children:[(0,t.jsx)(u.A,{children:(0,t.jsx)("b",{children:"智能体设置"})}),(0,t.jsx)(m.A,{children:(0,t.jsx)(b.A.Item,{label:(0,t.jsxs)("span",{children:["允许的智能体"," ",(0,t.jsx)(v.A,{title:"选择此密钥可以访问的智能体或访问组",children:(0,t.jsx)(o.A,{style:{marginLeft:"4px"}})})]}),name:"allowed_agents_and_groups",help:er("keyDetail.settings.agents"),children:(0,t.jsx)(F.A,{onChange:e=>en.setFieldValue("allowed_agents_and_groups",e),value:en.getFieldValue("allowed_agents_and_groups"),accessToken:O,placeholder:er("keyDetail.settings.placeholders.selectAgents")})})})]}),q&&(0,t.jsxs)(c.h,{className:"mt-4 mb-4",children:[(0,t.jsx)(u.A,{children:(0,t.jsx)("b",{children:"日志设置"})}),(0,t.jsx)(m.A,{children:(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)($.A,{value:eC,onChange:eM,premiumUser:!0,disabledCallbacks:eq,onDisabledCallbacksChange:ez})})})]}),(0,t.jsxs)(c.h,{className:"mt-4 mb-4",children:[(0,t.jsx)(u.A,{children:(0,t.jsx)("b",{children:"路由设置"})}),(0,t.jsx)(m.A,{children:(0,t.jsx)("div",{className:"mt-4 w-full",children:(0,t.jsx)(z,{accessToken:O||"",value:e0||void 0,onChange:e1,modelData:eh.length>0?{data:eh.map(e=>({model_name:e}))}:void 0},e4)})})]},`router-settings-accordion-${e4}`),(0,t.jsxs)(c.h,{className:"mt-4 mb-4",children:[(0,t.jsx)(u.A,{children:(0,t.jsx)("b",{children:"模型别名"})}),(0,t.jsx)(m.A,{children:(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)(p.A,{className:"text-sm text-gray-600 mb-4",children:"为模型创建可在 API 调用中使用的自定义别名。这允许您为特定模型创建快捷方式。 shortcuts for specific models."}),(0,t.jsx)(P.A,{accessToken:O,initialModelAliases:eH,onAliasUpdate:eW,showExampleConfig:!1})]})})]}),(0,t.jsxs)(c.h,{className:"mt-4 mb-4",children:[(0,t.jsx)(u.A,{children:(0,t.jsx)("b",{children:"密钥生命周期"})}),(0,t.jsx)(m.A,{children:(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(E.A,{form:en,autoRotationEnabled:eY,onAutoRotationChange:eQ,rotationInterval:eX,onRotationIntervalChange:eZ,isCreateMode:!0})})}),(0,t.jsx)(b.A.Item,{name:"duration",hidden:!0,initialValue:null,children:(0,t.jsx)(w.A,{})})]}),(0,t.jsxs)(c.h,{className:"mt-4 mb-4",children:[(0,t.jsx)(u.A,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("b",{children:"高级设置"}),(0,t.jsx)(v.A,{title:(0,t.jsxs)("span",{children:["在我们的文档中了解更多关于高级设置的信息"," ",(0,t.jsx)("a",{href:K.proxyBaseUrl?`${K.proxyBaseUrl}/#/key%20management/generate_key_fn_key_generate_post`:"/#/key%20management/generate_key_fn_key_generate_post",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300",children:"文档"})]}),children:(0,t.jsx)(o.A,{className:"text-gray-400 hover:text-gray-300 cursor-help"})})]})}),(0,t.jsx)(m.A,{children:(0,t.jsx)(D.A,{schemaComponent:"GenerateKeyRequest",form:en,excludedFields:["key_alias","team_id","models","duration","metadata","tags","guardrails","max_budget","budget_duration","tpm_limit","rpm_limit"]})})]})]})]})}),(0,t.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,t.jsx)(A.Ay,{htmlType:"submit",disabled:e6,style:{opacity:e6?.5:1},children:"创建密钥"})})]})}),eI&&(0,t.jsx)(_.A,{title:"创建新用户",open:eI,onCancel:()=>eT(!1),footer:null,width:800,children:(0,t.jsx)(H.C,{userID:B,accessToken:O,teams:l,possibleUIRoles:eP,onUserCreated:e=>{eE(e),en.setFieldsValue({user_id:e}),eT(!1)},isEmbedded:!0})}),ec&&(0,t.jsx)(_.A,{open:eo,onOk:e2,onCancel:e3,footer:null,children:(0,t.jsxs)(g.A,{numItems:1,className:"gap-2 w-full",children:[(0,t.jsx)(j.A,{children:"保存您的密钥"}),(0,t.jsx)(h.A,{numColSpan:1,children:null!=ec?(0,t.jsx)(el.A,{apiKey:ec}):(0,t.jsx)(p.A,{children:"密钥创建中，这可能需要 30 秒"})})]})})]})}}}]);