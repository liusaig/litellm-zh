"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8700],{28700:(e,s,a)=>{a.d(s,{A:()=>R,O:()=>F});var l=a(95155),t=a(34410),r=a(42696),i=a(63003),n=a(86960),o=a(40193),d=a(19910),c=a(70757),m=a(68851),g=a(1331),x=a(22347),u=a(68413),p=a(64e3),h=a(78897),b=a(24805),y=a(5533),j=a(94210),f=a(55454),N=a(93076),w=a(73504),v=a(46185),k=a(44647),L=a(58847),A=a(54550),_=a(13008),C=a(15517),O=a(84979),S=a(88653),X=a(32339),E=a(12115),P=a(90550),M=a(26313),I=a(5266);function $(e){let s=s=>{"disableShowNewBadge"===s.key&&e()},a=s=>{let{key:a}=s.detail;"disableShowNewBadge"===a&&e()};return window.addEventListener("storage",s),window.addEventListener(I.xE,a),()=>{window.removeEventListener("storage",s),window.removeEventListener(I.xE,a)}}function z(){return"true"===(0,I._S)("disableShowNewBadge")}var U=a(55882),B=a(53221);let{Sider:T}=O.A,F=[{groupLabel:"AI 网关",items:[{key:"api-keys",page:"api-keys",label:"API密钥",icon:(0,l.jsx)(i.A,{})},{key:"llm-playground",page:"llm-playground",label:"模型调试",icon:(0,l.jsx)(n.A,{}),roles:P.FJ},{key:"models",page:"models",label:"模型管理",icon:(0,l.jsx)(o.A,{}),roles:P.FJ},{key:"agents",page:"agents",label:"智能体",icon:(0,l.jsx)(d.A,{}),roles:P.FJ},{key:"mcp-servers",page:"mcp-servers",label:"MCP 服务",icon:(0,l.jsx)(c.A,{})},{key:"guardrails",page:"guardrails",label:"安全护栏",icon:(0,l.jsx)(m.A,{}),roles:P.CX},{key:"policies",page:"policies",label:(0,l.jsx)("span",{className:"flex items-center gap-4",children:"策略中心"}),icon:(0,l.jsx)(g.A,{}),roles:P.CX},{key:"tools",page:"tools",label:"工具集",icon:(0,l.jsx)(c.A,{}),children:[{key:"search-tools",page:"search-tools",label:"搜索工具",icon:(0,l.jsx)(x.A,{})},{key:"vector-stores",page:"vector-stores",label:"向量库",icon:(0,l.jsx)(u.A,{})},{key:"tool-policies",page:"tool-policies",label:"工具策略",icon:(0,l.jsx)(m.A,{})}]}]},{groupLabel:"可观测性",items:[{key:"new_usage",page:"new_usage",icon:(0,l.jsx)(p.A,{}),roles:[...P.CX,...P.UX],label:"用量分析"},{key:"logs",page:"logs",label:"请求日志",icon:(0,l.jsx)(h.A,{})},{key:"guardrails-monitor",page:"guardrails-monitor",label:"护栏监控",icon:(0,l.jsx)(m.A,{}),roles:[...P.CX,...P.UX]}]},{groupLabel:"权限与访问",items:[{key:"users",page:"users",label:"用户管理",icon:(0,l.jsx)(b.A,{}),roles:P.CX},{key:"teams",page:"teams",label:"分组管理",icon:(0,l.jsx)(y.A,{})},{key:"organizations",page:"organizations",label:"组织管理",icon:(0,l.jsx)(j.A,{}),roles:P.CX},{key:"access-groups",page:"access-groups",label:(0,l.jsxs)("span",{className:"flex items-center gap-2",children:["资源访问组 ",(0,l.jsx)(function({children:e,dot:s=!1}){return(0,E.useSyncExternalStore)($,z)?e?(0,l.jsx)(l.Fragment,{children:e}):null:e?(0,l.jsx)(M.A,{color:"blue",count:s?void 0:"New",dot:s,children:e}):(0,l.jsx)(M.A,{color:"blue",count:s?void 0:"New",dot:s})},{})]}),icon:(0,l.jsx)(o.A,{}),roles:P.CX},{key:"budgets",page:"budgets",label:"预算",icon:(0,l.jsx)(f.A,{}),roles:P.CX}]},{groupLabel:"开发者工具",items:[{key:"api_ref",page:"api_ref",label:"API 文档",icon:(0,l.jsx)(N.A,{})},{key:"model-hub-table",page:"model-hub-table",label:"AI 资源中心",icon:(0,l.jsx)(w.A,{})},{key:"learning-resources",page:"learning-resources",label:"学习资源",icon:(0,l.jsx)(v.A,{}),external_url:"https://models.litellm.ai/cookbook"},{key:"experimental",page:"experimental",label:"实验功能",icon:(0,l.jsx)(k.A,{}),children:[{key:"caching",page:"caching",label:"缓存",icon:(0,l.jsx)(u.A,{}),roles:P.CX},{key:"prompts",page:"prompts",label:"提示词",icon:(0,l.jsx)(L.A,{}),roles:P.CX},{key:"transform-request",page:"transform-request",label:"API 调试台",icon:(0,l.jsx)(N.A,{}),roles:[...P.CX,...P.UX]},{key:"tag-management",page:"tag-management",label:"标签管理",icon:(0,l.jsx)(A.A,{}),roles:P.CX},{key:"claude-code-plugins",page:"claude-code-plugins",label:"Claude Code 插件",icon:(0,l.jsx)(c.A,{}),roles:P.CX},{key:"4",page:"usage",label:"旧版用量",icon:(0,l.jsx)(p.A,{})}]}]},{groupLabel:"系统设置",roles:P.CX,items:[{key:"settings",page:"settings",label:(0,l.jsx)("span",{className:"flex items-center gap-4",children:"系统设置"}),icon:(0,l.jsx)(_.A,{}),roles:P.CX,children:[{key:"router-settings",page:"router-settings",label:"路由设置",icon:(0,l.jsx)(_.A,{}),roles:P.CX},{key:"logging-and-alerts",page:"logging-and-alerts",label:"日志与告警",icon:(0,l.jsx)(_.A,{}),roles:P.CX},{key:"admin-panel",page:"admin-panel",label:"管理设置",icon:(0,l.jsx)(_.A,{}),roles:P.CX},{key:"cost-tracking",page:"cost-tracking",label:"成本追踪",icon:(0,l.jsx)(p.A,{}),roles:P.CX},{key:"ui-theme",page:"ui-theme",label:"界面主题",icon:(0,l.jsx)(C.A,{}),roles:P.CX}]}]}],R=({setPage:e,defaultSelectedKey:s,collapsed:a=!1,enabledPagesInternalUsers:i})=>{let n,{userId:o,accessToken:d,userRole:c}=(0,r.A)(),{data:m}=(0,t.G)(),g=(0,E.useMemo)(()=>!!o&&!!m&&m.some(e=>e.members?.some(e=>e.user_id===o&&"org_admin"===e.user_role)),[o,m]),x=s=>{let a=new URLSearchParams(window.location.search);a.set("page",s),window.history.pushState(null,"",`?${a.toString()}`),e(s)},u=e=>{let s=(0,P.OY)(c);return null!=i&&console.log("[LeftNav] Filtering with enabled pages:",{userRole:c,isAdmin:s,enabledPagesInternalUsers:i}),e.map(e=>({...e,children:e.children?u(e.children):void 0})).filter(e=>{if((0,B.j)(e.page))return!1;if("organizations"===e.key){if(!(!e.roles||e.roles.includes(c)||g))return!1;if(!s&&null!=i){let s=i.includes(e.page);return console.log(`[LeftNav] Page "${e.page}" (${e.key}): ${s?"VISIBLE":"HIDDEN"}`),s}return!0}if(e.roles&&!e.roles.includes(c))return!1;if(!s&&null!=i){if(e.children&&e.children.length>0&&e.children.some(e=>i.includes(e.page)))return console.log(`[LeftNav] Parent "${e.page}" (${e.key}): VISIBLE (has visible children)`),!0;let s=i.includes(e.page);return console.log(`[LeftNav] Page "${e.page}" (${e.key}): ${s?"VISIBLE":"HIDDEN"}`),s}return!0})},p=(e=>{for(let s of F)for(let a of s.items){if(a.page===e)return a.key;if(a.children){let s=a.children.find(s=>s.page===e);if(s)return s.key}}return"api-keys"})(s);return(0,l.jsx)(O.A,{children:(0,l.jsxs)(T,{theme:"light",width:220,collapsed:a,collapsedWidth:80,collapsible:!0,trigger:null,style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative"},children:[(0,l.jsx)(S.Ay,{theme:{components:{Menu:{iconSize:15,fontSize:13,itemMarginInline:4,itemPaddingInline:8,itemHeight:30,itemBorderRadius:6,subMenuItemBorderRadius:6,groupTitleFontSize:10,groupTitleLineHeight:1.5}}},children:(0,l.jsx)(X.A,{mode:"inline",selectedKeys:[p],defaultOpenKeys:[],inlineCollapsed:a,className:"custom-sidebar-menu",style:{borderRight:0,backgroundColor:"transparent",fontSize:"13px",paddingTop:"4px"},items:(n=[],F.forEach(e=>{if((0,B.p)(e.groupLabel)||e.roles&&!e.roles.includes(c))return;let s=u(e.items);0!==s.length&&n.push({type:"group",label:a?null:(0,l.jsx)("span",{style:{fontSize:"10px",fontWeight:600,color:"#6b7280",letterSpacing:"0.05em",padding:"12px 0 4px 12px",display:"block",marginBottom:"2px"},children:e.groupLabel}),children:s.map(e=>({key:e.key,icon:e.icon,label:e.label,children:e.children?.map(e=>({key:e.key,icon:e.icon,label:e.label,onClick:()=>{e.external_url?window.open(e.external_url,"_blank"):x(e.page)}})),onClick:e.children?void 0:()=>{e.external_url?window.open(e.external_url,"_blank"):x(e.page)}}))})}),n)})}),(0,P.OY)(c)&&!a&&(0,l.jsx)(U.A,{accessToken:d,width:220})]})})}},53221:(e,s,a)=>{a.d(s,{j:()=>n,p:()=>o});let l=e=>e.trim().toLowerCase(),t=e=>e?e.split(",").map(e=>e.trim()).filter(e=>e.length>0):[],r=new Set([...["api_ref","model-hub-table","experimental","access-groups","budgets"].map(l),...t("api_ref,model-hub-table,experimental,policies,tools").map(l)]),i=new Set([...["开发者工具"].map(l),...t("开发者工具").map(l)]),n=e=>r.has(l(e)),o=e=>i.has(l(e))},55882:(e,s,a)=>{a.d(s,{A:()=>p});var l=a(95155),t=a(13755);a(77062);var r=a(41585),i=a(44071),n=a(7810),o=a(6296),d=a(82482);a(9921),a(66088);var c=a(57420),m=a(10184),g=a(12115),x=a(28436);let u=(...e)=>e.filter(Boolean).join(" ");function p({accessToken:e,width:s=220}){let a=(0,t.e)(),[p,h]=(0,g.useState)(!1),[b,y]=(0,g.useState)(!1),[j,f]=(0,g.useState)(null),[N,w]=(0,g.useState)(null),[v,k]=(0,g.useState)(!1),[L,A]=(0,g.useState)(null);(0,g.useEffect)(()=>{(async()=>{if(e){k(!0),A(null);try{let[s,a]=await Promise.all([(0,x.getRemainingUsers)(e),(0,x.getLicenseInfo)(e).catch(()=>null)]);f(s),w(a)}catch(e){console.error("Failed to fetch usage data:",e),A("Failed to load usage data")}finally{k(!1)}}})()},[e]);let _=N?.expiration_date?(e=>{if(!e)return null;let s=new Date(e+"T00:00:00Z"),a=new Date;return a.setHours(0,0,0,0),Math.ceil((s.getTime()-a.getTime())/864e5)})(N.expiration_date):null,C=null!==_&&_<0,O=null!==_&&_>=0&&_<30,{isOverLimit:S,isNearLimit:X,usagePercentage:E,userMetrics:P,teamMetrics:M}=(e=>{if(!e)return{isOverLimit:!1,isNearLimit:!1,usagePercentage:0,userMetrics:{isOverLimit:!1,isNearLimit:!1,usagePercentage:0},teamMetrics:{isOverLimit:!1,isNearLimit:!1,usagePercentage:0}};let s=e.total_users?e.total_users_used/e.total_users*100:0,a=s>100,l=s>=80&&s<=100,t=e.total_teams?e.total_teams_used/e.total_teams*100:0,r=t>100,i=t>=80&&t<=100,n=a||r;return{isOverLimit:n,isNearLimit:(l||i)&&!n,usagePercentage:Math.max(s,t),userMetrics:{isOverLimit:a,isNearLimit:l,usagePercentage:s},teamMetrics:{isOverLimit:r,isNearLimit:i,usagePercentage:t}}})(j),I=S||X||C||O,$=S||C,z=(X||O)&&!$;return a||!e||j?.total_users===null&&j?.total_teams===null?null:(0,l.jsx)("div",{className:"fixed bottom-4 left-4 z-50",style:{width:`${Math.min(s,220)}px`},children:(0,l.jsx)(()=>b?(0,l.jsx)("button",{onClick:()=>y(!1),className:u("bg-white border border-gray-200 rounded-lg shadow-sm p-3 hover:shadow-md transition-all w-full"),title:"Show usage details",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(n.A,{className:"h-4 w-4 flex-shrink-0"}),I&&(0,l.jsx)("span",{className:"flex-shrink-0",children:$?(0,l.jsx)(r.A,{className:"h-3 w-3"}):z?(0,l.jsx)(i.A,{className:"h-3 w-3"}):null}),(0,l.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium truncate",children:[j&&null!==j.total_users&&(0,l.jsxs)("span",{className:u("flex-shrink-0 px-1.5 py-0.5 rounded text-xs border",P.isOverLimit&&"bg-red-50 text-red-700 border-red-200",P.isNearLimit&&"bg-yellow-50 text-yellow-700 border-yellow-200",!P.isOverLimit&&!P.isNearLimit&&"bg-gray-50 text-gray-700 border-gray-200"),children:["U: ",j.total_users_used,"/",j.total_users]}),j&&null!==j.total_teams&&(0,l.jsxs)("span",{className:u("flex-shrink-0 px-1.5 py-0.5 rounded text-xs border",M.isOverLimit&&"bg-red-50 text-red-700 border-red-200",M.isNearLimit&&"bg-yellow-50 text-yellow-700 border-yellow-200",!M.isOverLimit&&!M.isNearLimit&&"bg-gray-50 text-gray-700 border-gray-200"),children:["T: ",j.total_teams_used,"/",j.total_teams]}),N?.expiration_date&&null!==_&&(0,l.jsx)("span",{className:u("flex-shrink-0 px-1.5 py-0.5 rounded text-xs border",C&&"bg-red-50 text-red-700 border-red-200",O&&"bg-yellow-50 text-yellow-700 border-yellow-200",!C&&!O&&"bg-gray-50 text-gray-700 border-gray-200"),children:_<0?"Exp!":`${_}d`}),!j||null===j.total_users&&null===j.total_teams&&!N&&(0,l.jsx)("span",{className:"truncate",children:"Usage"})]})]})}):v?(0,l.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-4 w-full",children:(0,l.jsxs)("div",{className:"flex items-center justify-center gap-2 py-2",children:[(0,l.jsx)(o.A,{className:"h-4 w-4 animate-spin"}),(0,l.jsx)("span",{className:"text-sm text-gray-500 truncate",children:"Loading..."})]})}):L||!j?(0,l.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-4 group w-full",children:(0,l.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,l.jsx)("div",{className:"flex-1 min-w-0",children:(0,l.jsx)("span",{className:"text-sm text-gray-500 truncate block",children:L||"No data"})}),(0,l.jsx)("button",{onClick:()=>y(!0),className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-gray-100 rounded transition-all flex-shrink-0",title:"Minimize",children:(0,l.jsx)(d.A,{className:"h-3 w-3 text-gray-400"})})]})}):(0,l.jsxs)("div",{className:u("bg-white border rounded-lg shadow-sm p-3 transition-all duration-200 group w-full"),children:[(0,l.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[(0,l.jsx)(n.A,{className:"h-4 w-4 flex-shrink-0"}),(0,l.jsx)("span",{className:"font-medium text-sm truncate",children:"Usage"})]}),(0,l.jsx)("button",{onClick:()=>y(!0),className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-gray-100 rounded transition-all flex-shrink-0",title:"Minimize",children:(0,l.jsx)(d.A,{className:"h-3 w-3 text-gray-400"})})]}),(0,l.jsxs)("div",{className:"space-y-3 text-sm",children:[N?.has_license&&N.expiration_date&&(0,l.jsxs)("div",{className:u("space-y-1 border rounded-md p-2",C&&"border-red-200 bg-red-50",O&&"border-yellow-200 bg-yellow-50"),children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-600 mb-1",children:[(0,l.jsx)(c.A,{className:"h-3 w-3"}),(0,l.jsx)("span",{className:"font-medium",children:"License"}),(0,l.jsx)("span",{className:u("ml-1 px-1.5 py-0.5 rounded border",C&&"bg-red-50 text-red-700 border-red-200",O&&"bg-yellow-50 text-yellow-700 border-yellow-200",!C&&!O&&"bg-gray-50 text-gray-600 border-gray-200"),children:C?"Expired":O?"Expiring soon":"OK"})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600 text-xs",children:"Status:"}),(0,l.jsx)("span",{className:u("font-medium text-right",C&&"text-red-600",O&&"text-yellow-600"),children:(e=>{if(null===e)return"No expiration";if(e<0)return"Expired";if(0===e)return"Expires today";if(1===e)return"1 day remaining";if(e<30)return`${e} days remaining`;if(e<60)return"1 month remaining";let s=Math.floor(e/30);return`${s} months remaining`})(_)})]}),N.license_type&&(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600 text-xs",children:"Type:"}),(0,l.jsx)("span",{className:"font-medium text-right capitalize",children:N.license_type})]})]}),null!==j.total_users&&(0,l.jsxs)("div",{className:u("space-y-1 border rounded-md p-2",P.isOverLimit&&"border-red-200 bg-red-50",P.isNearLimit&&"border-yellow-200 bg-yellow-50"),children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-600 mb-1",children:[(0,l.jsx)(n.A,{className:"h-3 w-3"}),(0,l.jsx)("span",{className:"font-medium",children:"Users"}),(0,l.jsx)("span",{className:u("ml-1 px-1.5 py-0.5 rounded border",P.isOverLimit&&"bg-red-50 text-red-700 border-red-200",P.isNearLimit&&"bg-yellow-50 text-yellow-700 border-yellow-200",!P.isOverLimit&&!P.isNearLimit&&"bg-gray-50 text-gray-600 border-gray-200"),children:P.isOverLimit?"Over limit":P.isNearLimit?"Near limit":"OK"})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600 text-xs",children:"Used:"}),(0,l.jsxs)("span",{className:"font-medium text-right",children:[j.total_users_used,"/",j.total_users]})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600 text-xs",children:"Remaining:"}),(0,l.jsx)("span",{className:u("font-medium text-right",P.isOverLimit&&"text-red-600",P.isNearLimit&&"text-yellow-600"),children:j.total_users_remaining})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600 text-xs",children:"Usage:"}),(0,l.jsxs)("span",{className:"font-medium text-right",children:[Math.round(P.usagePercentage),"%"]})]}),(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,l.jsx)("div",{className:u("h-2 rounded-full transition-all duration-300",P.isOverLimit&&"bg-red-500",P.isNearLimit&&"bg-yellow-500",!P.isOverLimit&&!P.isNearLimit&&"bg-green-500"),style:{width:`${Math.min(P.usagePercentage,100)}%`}})})]}),null!==j.total_teams&&(0,l.jsxs)("div",{className:u("space-y-1 border rounded-md p-2",M.isOverLimit&&"border-red-200 bg-red-50",M.isNearLimit&&"border-yellow-200 bg-yellow-50"),children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-600 mb-1",children:[(0,l.jsx)(m.A,{className:"h-3 w-3"}),(0,l.jsx)("span",{className:"font-medium",children:"Teams"}),(0,l.jsx)("span",{className:u("ml-1 px-1.5 py-0.5 rounded border",M.isOverLimit&&"bg-red-50 text-red-700 border-red-200",M.isNearLimit&&"bg-yellow-50 text-yellow-700 border-yellow-200",!M.isOverLimit&&!M.isNearLimit&&"bg-gray-50 text-gray-600 border-gray-200"),children:M.isOverLimit?"Over limit":M.isNearLimit?"Near limit":"OK"})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600 text-xs",children:"Used:"}),(0,l.jsxs)("span",{className:"font-medium text-right",children:[j.total_teams_used,"/",j.total_teams]})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600 text-xs",children:"Remaining:"}),(0,l.jsx)("span",{className:u("font-medium text-right",M.isOverLimit&&"text-red-600",M.isNearLimit&&"text-yellow-600"),children:j.total_teams_remaining})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600 text-xs",children:"Usage:"}),(0,l.jsxs)("span",{className:"font-medium text-right",children:[Math.round(M.usagePercentage),"%"]})]}),(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,l.jsx)("div",{className:u("h-2 rounded-full transition-all duration-300",M.isOverLimit&&"bg-red-500",M.isNearLimit&&"bg-yellow-500",!M.isOverLimit&&!M.isNearLimit&&"bg-green-500"),style:{width:`${Math.min(M.usagePercentage,100)}%`}})})]})]})]}),{})})}},77062:(e,s,a)=>{a.d(s,{E:()=>l.A});var l=a(34254)}}]);