"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8086],{4782:(e,s,t)=>{t.d(s,{n:()=>a});function a(e){return""===e?null:e}},16252:(e,s,t)=>{t.d(s,{$n:()=>l.A,EY:()=>g.A,Ex:()=>a.A,Kp:()=>c.A,T2:()=>m.A,Zp:()=>i.A,fu:()=>d.A,hE:()=>x.A,oz:()=>n.A,wb:()=>o.A,xA:()=>r.A});var a=t(34254),l=t(38983),i=t(42837),r=t(13121),n=t(2212),d=t(87927),o=t(56680),c=t(73806),m=t(79363),g=t(75892),x=t(64628)},20589:(e,s,t)=>{t.d(s,{j:()=>l});var a=t(28436);let l=async(e,s,t,l)=>"Admin"!=t&&"Admin Viewer"!=t?await (0,a.teamListCall)(e,l?.organization_id||null,s):await (0,a.teamListCall)(e,l?.organization_id||null)},21590:(e,s,t)=>{t.d(s,{$:()=>a.A,k:()=>l.A});var a=t(38983),l=t(34487)},27873:(e,s,t)=>{t.d(s,{A:()=>r});var a=t(12115),l=t(42696),i=t(20589);let r=()=>{let[e,s]=(0,a.useState)([]),{accessToken:t,userId:r,userRole:n}=(0,l.A)();return(0,a.useEffect)(()=>{(async()=>{s(await (0,i.j)(t,r,n,null))})()},[t,r,n]),{teams:e,setTeams:s}}},29653:(e,s,t)=>{t.d(s,{E:()=>a.A,l:()=>l.A});var a=t(34254),l=t(75892)},66793:(e,s,t)=>{t.d(s,{A:()=>x});var a=t(95155),l=t(41326),i=t(99476),r=t(3373),n=t(99876),d=t(69779),o=t(30648),c=t(91808),m=t(81283),g=t(12115);function x({isOpen:e,title:s,alertMessage:t,message:x,resourceInformationTitle:u,resourceInformation:p,onCancel:h,onOk:y,confirmLoading:j,requiredConfirmation:_,okText:b="Delete",okLoadingText:v="Deleting...",cancelText:k="Cancel"}){let{Title:f,Text:A}=l.A,{token:N}=i.A.useToken(),[D,w]=(0,g.useState)("");return(0,g.useEffect)(()=>{e&&w("")},[e]),(0,a.jsx)(r.A,{title:s,open:e,onOk:y,onCancel:h,confirmLoading:j,okText:j?v:b,cancelText:k,okButtonProps:{danger:!0,disabled:!!_&&D!==_||j},cancelButtonProps:{disabled:j},children:(0,a.jsxs)("div",{className:"space-y-4",children:[t&&(0,a.jsx)(n.A,{message:t,type:"warning"}),(0,a.jsx)(d.A,{title:u,className:"mt-4",styles:{body:{padding:"16px"},header:{backgroundColor:N.colorErrorBg,borderColor:N.colorErrorBorder}},style:{backgroundColor:N.colorErrorBg,borderColor:N.colorErrorBorder},children:(0,a.jsx)(o.A,{column:1,size:"small",children:p&&p.map(({label:e,value:s,...t})=>(0,a.jsx)(o.A.Item,{label:(0,a.jsx)("span",{className:"font-semibold",children:e}),children:(0,a.jsx)(A,{...t,children:s??"-"})},e))})}),(0,a.jsx)("div",{children:(0,a.jsx)(A,{children:x})}),_&&(0,a.jsxs)("div",{className:"mb-6 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)(A,{className:"block text-base font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,a.jsx)(A,{children:"Type "}),(0,a.jsx)(A,{strong:!0,type:"danger",children:_}),(0,a.jsx)(A,{children:" to confirm deletion:"})]}),(0,a.jsx)(c.A,{value:D,onChange:e=>w(e.target.value),placeholder:_,className:"rounded-md",prefix:(0,a.jsx)(m.A,{style:{color:N.colorError}}),autoFocus:!0})]})]})})}},68462:(e,s,t)=>{t.d(s,{Ay:()=>n});var a=t(95155),l=t(12115),i=t(23060),r=t(28436);let n=({onChange:e,value:s,className:t,accessToken:n,disabled:d,onPoliciesLoaded:o})=>{let[c,m]=(0,l.useState)([]),[g,x]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{(async()=>{if(n){x(!0);try{let e=await (0,r.getPoliciesList)(n);e.policies&&(m(e.policies),o?.(e.policies))}catch(e){console.error("Error fetching policies:",e)}finally{x(!1)}}})()},[n,o]),(0,a.jsx)("div",{children:(0,a.jsx)(i.A,{mode:"multiple",disabled:d,placeholder:d?"Setting policies is a premium feature.":"Select policies (production or published versions)",onChange:s=>{e(s)},value:s,loading:g,className:t,allowClear:!0,options:c.filter(e=>(e.version_status??"draft")!=="draft").map(e=>{var s;let t=e.version_number??1,a=e.version_status??"draft";return{label:`${e.policy_name} — v${t} (${a})${e.description?` — ${e.description}`:""}`,value:"production"===a?e.policy_name:e.policy_id?(s=e.policy_id,`policy_${s}`):e.policy_name}}),optionFilterProp:"label",showSearch:!0,style:{width:"100%"}})})}},68676:(e,s,t)=>{t.d(s,{A:()=>i});var a=t(95155);t(12115);var l=t(69975);let i=({value:e,onChange:s,disabledCallbacks:t=[],onDisabledCallbacksChange:i})=>(0,a.jsx)(l.A,{value:e,onChange:s,disabledCallbacks:t,onDisabledCallbacksChange:i})},69125:(e,s,t)=>{t.d(s,{A:()=>d});var a=t(95155),l=t(41326),i=t(48849),r=t(14290);let{Text:n}=l.A;function d({userId:e}){let{t:s}=(0,r.o)();return"default_user_id"===e?(0,a.jsx)(i.A,{color:"blue",children:s("memberTable.defaultProxyAdmin")}):(0,a.jsx)(n,{children:e})}},81783:(e,s,t)=>{t.d(s,{A:()=>j});var a=t(95155),l=t(14290),i=t(12115),r=t(21796),n=t(29653),d=t(24669),o=t(28436);let c=function({vectorStores:e,accessToken:s}){let{t}=(0,l.o)(),[r,c]=(0,i.useState)([]);return(0,i.useEffect)(()=>{(async()=>{if(s&&0!==e.length)try{let e=await (0,o.vectorStoreListCall)(s);e.data&&c(e.data.map(e=>({vector_store_id:e.vector_store_id,vector_store_name:e.vector_store_name})))}catch(e){console.error("Error fetching vector stores:",e)}})()},[s,e.length]),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.A,{className:"h-4 w-4 text-blue-600"}),(0,a.jsx)(n.l,{className:"font-semibold text-gray-900",children:t("keyDetail.objectPermissions.vectorStores")}),(0,a.jsx)(n.E,{color:"blue",size:"xs",children:e.length})]}),e.length>0?(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:e.map((e,s)=>{let t;return(0,a.jsx)("div",{className:"inline-flex items-center px-3 py-1.5 rounded-lg bg-blue-50 border border-blue-200 text-blue-800 text-sm font-medium",children:(t=r.find(s=>s.vector_store_id===e))?`${t.vector_store_name||t.vector_store_id} (${t.vector_store_id})`:e},s)})}):(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-gray-50 border border-gray-200",children:[(0,a.jsx)(d.A,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)(n.l,{className:"text-gray-500 text-sm",children:t("keyDetail.objectPermissions.noVectorStores")})]})]})};var m=t(68367),g=t(17293),x=t(30947),u=t(22277);let p=function({mcpServers:e,mcpAccessGroups:s=[],mcpToolPermissions:r={},accessToken:d}){let{t:c}=(0,l.o)(),[p,h]=(0,i.useState)([]),[y,j]=(0,i.useState)([]),[_,b]=(0,i.useState)(new Set);(0,i.useEffect)(()=>{(async()=>{if(d&&e.length>0)try{let e=await (0,o.fetchMCPServers)(d);e&&Array.isArray(e)?h(e):e.data&&Array.isArray(e.data)&&h(e.data)}catch(e){console.error("Error fetching MCP servers:",e)}})()},[d,e.length]),(0,i.useEffect)(()=>{(async()=>{if(d&&s.length>0)try{let e=await Promise.resolve().then(t.bind(t,28436)).then(e=>e.fetchMCPAccessGroups(d));j(Array.isArray(e)?e:e.data||[])}catch(e){console.error("Error fetching MCP access groups:",e)}})()},[d,s.length]);let v=[...e.map(e=>({type:"server",value:e})),...s.map(e=>({type:"accessGroup",value:e}))],k=v.length;return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"h-4 w-4 text-blue-600"}),(0,a.jsx)(n.l,{className:"font-semibold text-gray-900",children:c("keyDetail.objectPermissions.mcpServers")}),(0,a.jsx)(n.E,{color:"blue",size:"xs",children:k})]}),k>0?(0,a.jsx)("div",{className:"max-h-[400px] overflow-y-auto space-y-2 pr-1",children:v.map((e,s)=>{let t="server"===e.type?r[e.value]:void 0,l=t&&t.length>0,i=_.has(e.value);return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{onClick:()=>{var s;return l&&(s=e.value,void b(e=>{let t=new Set(e);return t.has(s)?t.delete(s):t.add(s),t}))},className:`flex items-center gap-3 py-2 px-3 rounded-lg border border-gray-200 transition-all ${l?"cursor-pointer hover:bg-gray-50 hover:border-gray-300":"bg-white"}`,children:[(0,a.jsx)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:"server"===e.type?(0,a.jsx)(u.A,{title:`Full ID: ${e.value}`,placement:"top",children:(0,a.jsxs)("div",{className:"inline-flex items-center gap-2 min-w-0",children:[(0,a.jsx)("span",{className:"inline-block w-1.5 h-1.5 bg-blue-500 rounded-full flex-shrink-0"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900 truncate",children:(e=>{let s=p.find(s=>s.server_id===e);if(s){let t=e.length>7?`${e.slice(0,3)}...${e.slice(-4)}`:e;return`${s.alias} (${t})`}return e})(e.value)})]})}):(0,a.jsxs)("div",{className:"inline-flex items-center gap-2 min-w-0",children:[(0,a.jsx)("span",{className:"inline-block w-1.5 h-1.5 bg-green-500 rounded-full flex-shrink-0"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900 truncate",children:e.value}),(0,a.jsx)("span",{className:"ml-1 px-1.5 py-0.5 text-[9px] font-semibold text-green-600 bg-green-50 border border-green-200 rounded uppercase tracking-wide flex-shrink-0",children:c("keyDetail.objectPermissions.group")})]})}),l&&(0,a.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0 whitespace-nowrap",children:[(0,a.jsx)("span",{className:"text-xs font-medium text-gray-600",children:t.length}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:1===t.length?c("keyDetail.objectPermissions.tool"):c("keyDetail.objectPermissions.tools")}),i?(0,a.jsx)(g.A,{className:"h-3.5 w-3.5 text-gray-400 ml-0.5"}):(0,a.jsx)(x.A,{className:"h-3.5 w-3.5 text-gray-400 ml-0.5"})]})]}),l&&i&&(0,a.jsx)("div",{className:"ml-4 pl-4 border-l-2 border-blue-200 pb-1",children:(0,a.jsx)("div",{className:"flex flex-wrap gap-1.5",children:t.map((e,s)=>(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-lg bg-blue-50 border border-blue-200 text-blue-800 text-xs font-medium",children:e},s))})})]},s)})}):(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-gray-50 border border-gray-200",children:[(0,a.jsx)(m.A,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)(n.l,{className:"text-gray-500 text-sm",children:c("keyDetail.objectPermissions.noMCPServers")})]})]})};var h=t(10512);let y=function({agents:e,agentAccessGroups:s=[],accessToken:t}){let{t:r}=(0,l.o)(),[d,c]=(0,i.useState)([]);(0,i.useEffect)(()=>{(async()=>{if(t&&e.length>0)try{let e=await (0,o.getAgentsList)(t);e&&e.agents&&Array.isArray(e.agents)&&c(e.agents)}catch(e){console.error("Error fetching agents:",e)}})()},[t,e.length]);let m=[...e.map(e=>({type:"agent",value:e})),...s.map(e=>({type:"accessGroup",value:e}))],g=m.length;return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 text-purple-600"}),(0,a.jsx)(n.l,{className:"font-semibold text-gray-900",children:r("keyDetail.objectPermissions.agents")}),(0,a.jsx)(n.E,{color:"purple",size:"xs",children:g})]}),g>0?(0,a.jsx)("div",{className:"max-h-[400px] overflow-y-auto space-y-2 pr-1",children:m.map((e,s)=>(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsx)("div",{className:"flex items-center gap-3 py-2 px-3 rounded-lg border border-gray-200 bg-white",children:(0,a.jsx)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:"agent"===e.type?(0,a.jsx)(u.A,{title:`Full ID: ${e.value}`,placement:"top",children:(0,a.jsxs)("div",{className:"inline-flex items-center gap-2 min-w-0",children:[(0,a.jsx)("span",{className:"inline-block w-1.5 h-1.5 bg-purple-500 rounded-full flex-shrink-0"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900 truncate",children:(e=>{let s=d.find(s=>s.agent_id===e);if(s){let t=e.length>7?`${e.slice(0,3)}...${e.slice(-4)}`:e;return`${s.agent_name} (${t})`}return e})(e.value)})]})}):(0,a.jsxs)("div",{className:"inline-flex items-center gap-2 min-w-0",children:[(0,a.jsx)("span",{className:"inline-block w-1.5 h-1.5 bg-green-500 rounded-full flex-shrink-0"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900 truncate",children:e.value}),(0,a.jsx)("span",{className:"ml-1 px-1.5 py-0.5 text-[9px] font-semibold text-green-600 bg-green-50 border border-green-200 rounded uppercase tracking-wide flex-shrink-0",children:r("keyDetail.objectPermissions.group")})]})})})},s))}):(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-gray-50 border border-gray-200",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)(n.l,{className:"text-gray-500 text-sm",children:r("keyDetail.objectPermissions.noAgents")})]})]})},j=function({objectPermission:e,variant:s="card",className:t="",accessToken:i}){let{t:n}=(0,l.o)(),d=e?.vector_stores||[],o=e?.mcp_servers||[],m=e?.mcp_access_groups||[],g=e?.mcp_tool_permissions||{},x=e?.agents||[],u=e?.agent_access_groups||[],h=(0,a.jsxs)("div",{className:"card"===s?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:[(0,a.jsx)(c,{vectorStores:d,accessToken:i}),(0,a.jsx)(p,{mcpServers:o,mcpAccessGroups:m,mcpToolPermissions:g,accessToken:i}),(0,a.jsx)(y,{agents:x,agentAccessGroups:u,accessToken:i})]});return"card"===s?(0,a.jsxs)("div",{className:`bg-white border border-gray-200 rounded-lg p-6 ${t}`,children:[(0,a.jsx)("div",{className:"flex items-center gap-2 mb-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(r.E,{className:"font-semibold text-gray-900",children:n("keyDetail.objectPermissions.title")}),(0,a.jsx)(r.E,{className:"text-xs text-gray-500",children:n("keyDetail.objectPermissions.description")})]})}),h]}):(0,a.jsxs)("div",{className:`${t}`,children:[(0,a.jsx)(r.E,{className:"font-medium text-gray-900 mb-3",children:n("keyDetail.objectPermissions.title")}),h]})}},87433:(e,s,t)=>{t.d(s,{A:()=>n});var a=t(95155),l=t(12115),i=t(23060),r=t(28436);let n=({onChange:e,value:s,className:t,accessToken:n,disabled:d})=>{let[o,c]=(0,l.useState)([]),[m,g]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{(async()=>{if(n){g(!0);try{let e=await (0,r.getGuardrailsList)(n);console.log("Guardrails response:",e),e.guardrails&&(console.log("Guardrails data:",e.guardrails),c(e.guardrails))}catch(e){console.error("Error fetching guardrails:",e)}finally{g(!1)}}})()},[n]),(0,a.jsx)("div",{children:(0,a.jsx)(i.A,{mode:"multiple",disabled:d,placeholder:d?"Setting guardrails is a premium feature.":"Select guardrails",onChange:s=>{console.log("Selected guardrails:",s),e(s)},value:s,loading:m,className:t,allowClear:!0,options:o.map(e=>(console.log("Mapping guardrail:",e),{label:`${e.guardrail_name}`,value:e.guardrail_name})),optionFilterProp:"label",showSearch:!0,style:{width:"100%"}})})}},96173:(e,s,t)=>{t.d(s,{A:()=>o});var a=t(95155);t(12115);var l=t(14290),i=t(29653),r=t(4853),n=t(34671),d=t(46428);let o=function({loggingConfigs:e=[],disabledCallbacks:s=[],variant:t="card",className:o=""}){let{t:c}=(0,l.o)(),m=(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(r.A,{className:"h-4 w-4 text-blue-600"}),(0,a.jsx)(i.l,{className:"font-semibold text-gray-900",children:c("keyDetail.loggingSettings.loggingIntegrations")}),(0,a.jsx)(i.E,{color:"blue",size:"xs",children:e.length})]}),e.length>0?(0,a.jsx)("div",{className:"space-y-3",children:e.map((e,s)=>{var t;let l=(t=e.callback_name,Object.entries(d.Zv).find(([e,s])=>s===t)?.[0]||t),n=d.G7[l]?.logo;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-blue-50 border border-blue-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[n?(0,a.jsx)("img",{src:n,alt:l,className:"w-5 h-5 object-contain"}):(0,a.jsx)(r.A,{className:"h-5 w-5 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i.l,{className:"font-medium text-blue-800",children:l}),(0,a.jsx)(i.l,{className:"text-xs text-blue-600",children:c("keyDetail.loggingSettings.parametersConfigured").replace("{count}",String(Object.keys(e.callback_vars).length))})]})]}),(0,a.jsx)(i.E,{color:(e=>{switch(e){case"success":return"green";case"failure":return"red";case"success_and_failure":return"blue";default:return"gray"}})(e.callback_type),size:"sm",children:(e=>{switch(e){case"success":return"Success Only";case"failure":return"Failure Only";case"success_and_failure":return"Success & Failure";default:return e}})(e.callback_type)})]},s)})}):(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-gray-50 border border-gray-200",children:[(0,a.jsx)(r.A,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)(i.l,{className:"text-gray-500 text-sm",children:c("keyDetail.loggingSettings.noIntegrations")})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n.A,{className:"h-4 w-4 text-red-600"}),(0,a.jsx)(i.l,{className:"font-semibold text-gray-900",children:c("keyDetail.loggingSettings.disabledCallbacks")}),(0,a.jsx)(i.E,{color:"red",size:"xs",children:s.length})]}),s.length>0?(0,a.jsx)("div",{className:"space-y-3",children:s.map((e,s)=>{let t=d.wX[e]||e,l=d.G7[t]?.logo;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-red-50 border border-red-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[l?(0,a.jsx)("img",{src:l,alt:t,className:"w-5 h-5 object-contain"}):(0,a.jsx)(n.A,{className:"h-5 w-5 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i.l,{className:"font-medium text-red-800",children:t}),(0,a.jsx)(i.l,{className:"text-xs text-red-600",children:"Disabled for this key"})]})]}),(0,a.jsx)(i.E,{color:"red",size:"sm",children:c("keyDetail.loggingSettings.callbackDisabled")})]},s)})}):(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-gray-50 border border-gray-200",children:[(0,a.jsx)(n.A,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)(i.l,{className:"text-gray-500 text-sm",children:c("keyDetail.loggingSettings.noCallbacksDisabled")})]})]})]});return"card"===t?(0,a.jsxs)("div",{className:`bg-white border border-gray-200 rounded-lg p-6 ${o}`,children:[(0,a.jsx)("div",{className:"flex items-center gap-2 mb-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(i.l,{className:"font-semibold text-gray-900",children:c("keyDetail.loggingSettings.title")}),(0,a.jsx)(i.l,{className:"text-xs text-gray-500",children:c("keyDetail.loggingSettings.description")})]})}),m]}):(0,a.jsxs)("div",{className:`${o}`,children:[(0,a.jsx)(i.l,{className:"font-medium text-gray-900 mb-3",children:c("keyDetail.loggingSettings.title")}),m]})}},98086:(e,s,t)=>{t.d(s,{A:()=>eS});var a=t(95155),l=t(42696),i=t(27873),r=t(14290),n=t(88534),d=t(4782),o=t(44926),c=t(16252),m=t(48849),g=t(12115),x=t(41326),u=t(87278),p=t(96073),h=t(54481),y=t(22277),j=t(7339),_=t(22864),b=t(89889),v=t(26626),k=t(24611),f=t(94274),A=t(24805),N=t(78940),D=t(45196),w=t(84425),E=t(58873),S=t(69125);let{Text:C}=x.A;function I({label:e,value:s,icon:t,truncate:l=!1,copyable:i=!1,defaultUserIdCheck:r=!1}){let n=!s,d=r&&"default_user_id"===s,o=d?(0,a.jsx)(S.A,{userId:s}):(0,a.jsx)(C,{strong:!0,copyable:!!(i&&!n&&!d)&&{tooltips:[`Copy ${e}`,"Copied!"]},ellipsis:l,style:l?{maxWidth:160,display:"block"}:void 0,children:n?"-":s});return(0,a.jsxs)("div",{children:[(0,a.jsxs)(h.A,{size:4,children:[(0,a.jsx)(C,{type:"secondary",children:t}),(0,a.jsx)(C,{type:"secondary",style:{fontSize:12,textTransform:"uppercase",letterSpacing:"0.05em"},children:e})]}),(0,a.jsx)("div",{children:o})]})}let{Title:T,Text:Y}=x.A;function P({data:e,onBack:s,onCreateNew:t,onRegenerate:l,onDelete:i,canModifyKey:n=!0,backButtonText:d="Back to Keys",showRegenerateButton:o=!0,regenerateDisabled:c=!1,regenerateTooltip:m}){let{t:g}=(0,r.o)();return(0,a.jsxs)("div",{children:[t&&(0,a.jsx)("div",{style:{marginBottom:16},children:(0,a.jsx)(u.Ay,{type:"primary",icon:(0,a.jsx)(_.A,{}),onClick:t,children:g("keyDetail.header.createNewKey")})}),(0,a.jsx)("div",{style:{marginBottom:16},children:(0,a.jsx)(u.Ay,{type:"text",icon:(0,a.jsx)(b.A,{}),onClick:s,children:g("keyDetail.header.backToKeys")})}),(0,a.jsxs)(p.A,{justify:"space-between",align:"start",style:{marginBottom:20},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(T,{level:3,copyable:{tooltips:[g("keyDetail.header.copyKeyAlias"),g("keyDetail.header.copied")]},style:{margin:0},children:e.keyName}),(0,a.jsxs)(Y,{type:"secondary",copyable:{text:e.keyId,tooltips:[g("keyDetail.header.copyKeyId"),g("keyDetail.header.copied")]},children:[g("keyDetail.header.keyIdLabel")," ",e.keyId]})]}),n&&(0,a.jsxs)(h.A,{children:[o&&(0,a.jsx)(y.A,{title:m||"",children:(0,a.jsx)("span",{children:(0,a.jsx)(u.Ay,{icon:(0,a.jsx)(v.A,{}),onClick:l,disabled:c,children:g("keyDetail.header.regenerateKey")})})}),(0,a.jsx)(u.Ay,{danger:!0,icon:(0,a.jsx)(k.A,{}),onClick:i,children:g("keyDetail.header.deleteKey")})]})]}),(0,a.jsxs)(p.A,{align:"stretch",gap:40,style:{marginBottom:40},children:[(0,a.jsxs)(h.A,{direction:"vertical",size:16,children:[(0,a.jsx)(I,{label:g("keyDetail.header.userEmail"),value:e.userEmail,icon:(0,a.jsx)(f.A,{})}),(0,a.jsx)(I,{label:g("keyDetail.header.userId"),value:e.userId,icon:(0,a.jsx)(A.A,{}),truncate:!0,copyable:!0,defaultUserIdCheck:!0})]}),(0,a.jsx)(j.A,{type:"vertical",style:{height:"auto"}}),(0,a.jsxs)(h.A,{direction:"vertical",size:16,children:[(0,a.jsx)(I,{label:g("keyDetail.header.createdAt"),value:e.createdAt,icon:(0,a.jsx)(N.A,{})}),(0,a.jsx)(I,{label:g("keyDetail.header.createdBy"),value:e.createdBy,icon:(0,a.jsx)(D.A,{}),truncate:!0,copyable:!0,defaultUserIdCheck:!0})]}),(0,a.jsx)(j.A,{type:"vertical",style:{height:"auto"}}),(0,a.jsxs)(h.A,{direction:"vertical",size:16,children:[(0,a.jsx)(I,{label:g("keyDetail.header.lastUpdated"),value:e.lastUpdated,icon:(0,a.jsx)(w.A,{})}),(0,a.jsx)(I,{label:g("keyDetail.header.lastActive"),value:e.lastActive,icon:(0,a.jsx)(E.A,{})})]})]})]})}var F=t(90550),$=t(46428),R=t(29653),L=t(73317),V=t(88516);let z=({autoRotate:e=!1,rotationInterval:s,lastRotationAt:t,keyRotationAt:l,nextRotationAt:i,variant:n="card",className:d=""})=>{let{t:o}=(0,r.o)(),c=e=>{let s=new Date(e),t=s.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),a=s.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return`${t} at ${a}`},m=(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"space-y-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(L.A,{className:"h-4 w-4 text-blue-600"}),(0,a.jsx)(R.l,{className:"font-semibold text-gray-900",children:o("keyDetail.autoRotation.title")}),(0,a.jsx)(R.E,{color:e?"green":"gray",size:"xs",children:o(e?"keyDetail.autoRotation.enabled":"keyDetail.autoRotation.disabled")}),e&&s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R.l,{className:"text-gray-400",children:"•"}),(0,a.jsx)(R.l,{className:"text-sm text-gray-600",children:o("keyDetail.autoRotation.every").replace("{interval}",s)})]})]})}),(e||t||l||i)&&(0,a.jsxs)("div",{className:"space-y-3",children:[t&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-gray-50 border border-gray-200 rounded-md",children:[(0,a.jsx)(V.A,{className:"w-4 h-4 text-gray-500"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(R.l,{className:"font-medium text-gray-700",children:o("keyDetail.autoRotation.lastRotation")}),(0,a.jsx)(R.l,{className:"text-sm text-gray-600",children:c(t)})]})]}),(l||i)&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-gray-50 border border-gray-200 rounded-md",children:[(0,a.jsx)(V.A,{className:"w-4 h-4 text-gray-500"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(R.l,{className:"font-medium text-gray-700",children:o("keyDetail.autoRotation.nextScheduledRotation")}),(0,a.jsx)(R.l,{className:"text-sm text-gray-600",children:c(i||l||"")})]})]}),e&&!t&&!l&&!i&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-gray-50 border border-gray-100 rounded-md",children:[(0,a.jsx)(V.A,{className:"w-4 h-4 text-gray-500"}),(0,a.jsx)(R.l,{className:"text-gray-600",children:o("keyDetail.autoRotation.noHistory")})]})]}),!e&&!t&&!l&&!i&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-gray-50 border border-gray-100 rounded-md",children:[(0,a.jsx)(L.A,{className:"w-4 h-4 text-gray-400"}),(0,a.jsx)(R.l,{className:"text-gray-600",children:o("keyDetail.autoRotation.notEnabled")})]})]});return"card"===n?(0,a.jsxs)("div",{className:`bg-white border border-gray-200 rounded-lg p-6 ${d}`,children:[(0,a.jsx)("div",{className:"flex items-center gap-2 mb-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(R.l,{className:"font-semibold text-gray-900",children:o("keyDetail.autoRotation.title")}),(0,a.jsx)(R.l,{className:"text-xs text-gray-500",children:o("keyDetail.autoRotation.description")})]})}),m]}):(0,a.jsxs)("div",{className:`${d}`,children:[(0,a.jsx)(R.l,{className:"font-medium text-gray-900 mb-3",children:o("keyDetail.autoRotation.title")}),m]})};var G=t(66793);let K=["logging"],O=e=>e&&"object"==typeof e&&Array.isArray(e.logging)?e.logging:[],B=(e,s=2)=>JSON.stringify(e&&"object"==typeof e?Object.fromEntries(Object.entries(e).filter(([e])=>!K.includes(e))):{},null,s),M=e=>{if(!e||"object"!=typeof e)return e;let{tags:s,...t}=e;return t};var U=t(96173),W=t(12120),Z=t(28436),q=t(81783),H=t(38983),J=t(27309),Q=t(13121),X=t(75892),ee=t(34487),es=t(64628),et=t(25387),ea=t(3373),el=t(8208),ei=t(19060),er=t(99312);function en({selectedToken:e,visible:s,onClose:t,onKeyUpdate:i}){let{accessToken:r}=(0,l.A)(),[n]=et.A.useForm(),[d,o]=(0,g.useState)(null),[c,m]=(0,g.useState)(null),[x,u]=(0,g.useState)(null),[p,h]=(0,g.useState)(!1),[y,j]=(0,g.useState)(!1),[_,b]=(0,g.useState)(null);(0,g.useEffect)(()=>{s&&e&&r&&(n.setFieldsValue({key_alias:e.key_alias,max_budget:e.max_budget,tpm_limit:e.tpm_limit,rpm_limit:e.rpm_limit,duration:e.duration||"",grace_period:""}),b(r),j(e.key_name===r))},[s,e,n,r]),(0,g.useEffect)(()=>{s||(o(null),h(!1),j(!1),b(null),n.resetFields())},[s,n]);let v=e=>{if(!e)return null;try{let s,t=new Date;if(e.endsWith("s"))s=(0,ei.W)(t,{seconds:parseInt(e)});else if(e.endsWith("h"))s=(0,ei.W)(t,{hours:parseInt(e)});else if(e.endsWith("d"))s=(0,ei.W)(t,{days:parseInt(e)});else throw Error("Invalid duration format");return s.toLocaleString()}catch(e){return null}};(0,g.useEffect)(()=>{c?.duration?u(v(c.duration)):u(null)},[c?.duration]);let k=async()=>{if(e&&_){h(!0);try{let s=await n.validateFields(),t=await (0,Z.regenerateKeyCall)(_,e.token||e.token_id,s);o(t.key),W.Ay.success("Virtual Key regenerated successfully"),console.log("Full regenerate response:",t);let a={token:t.token||t.key_id||e.token,key_name:t.key,max_budget:s.max_budget,tpm_limit:s.tpm_limit,rpm_limit:s.rpm_limit,expires:s.duration?v(s.duration):e.expires,...t};console.log("Updated key data with new token:",a),i&&i(a),h(!1)}catch(e){console.error("Error regenerating key:",e),W.Ay.fromBackend(e),h(!1)}}},f=()=>{o(null),h(!1),j(!1),b(null),n.resetFields(),t()};return(0,a.jsx)(ea.A,{title:"Regenerate Virtual Key",open:s,onCancel:f,footer:d?[(0,a.jsx)(H.A,{onClick:f,children:"Close"},"close")]:[(0,a.jsx)(H.A,{onClick:f,className:"mr-2",children:"Cancel"},"cancel"),(0,a.jsx)(H.A,{onClick:k,disabled:p,children:p?"Regenerating...":"Regenerate"},"regenerate")],children:d?(0,a.jsxs)(Q.A,{numItems:1,className:"gap-2 w-full",children:[(0,a.jsx)(es.A,{children:"Regenerated Key"}),(0,a.jsx)(J.A,{numColSpan:1,children:(0,a.jsxs)("p",{children:["Please replace your old key with the new key generated. For security reasons,"," ",(0,a.jsx)("b",{children:"you will not be able to view it again"})," through your Silinex account. If you lose this secret key, you will need to generate a new one."]})}),(0,a.jsxs)(J.A,{numColSpan:1,children:[(0,a.jsx)(X.A,{className:"mt-3",children:"Key Alias:"}),(0,a.jsx)("div",{className:"bg-gray-100 p-2 rounded mb-2",children:(0,a.jsx)("pre",{className:"break-words whitespace-normal",children:e?.key_alias||"No alias set"})}),(0,a.jsx)(X.A,{className:"mt-3",children:"New Virtual Key:"}),(0,a.jsx)("div",{className:"bg-gray-100 p-2 rounded mb-2",children:(0,a.jsx)("pre",{className:"break-words whitespace-normal",children:d})}),(0,a.jsx)(er.CopyToClipboard,{text:d,onCopy:()=>W.Ay.success("Virtual Key copied to clipboard"),children:(0,a.jsx)(H.A,{className:"mt-3",children:"Copy Virtual Key"})})]})]}):(0,a.jsxs)(et.A,{form:n,layout:"vertical",onValuesChange:e=>{"duration"in e&&m(s=>({...s,duration:e.duration}))},children:[(0,a.jsx)(et.A.Item,{name:"key_alias",label:"Key Alias",children:(0,a.jsx)(ee.A,{disabled:!0})}),(0,a.jsx)(et.A.Item,{name:"max_budget",label:"最大预算",children:(0,a.jsx)(el.A,{step:.01,precision:2,style:{width:"100%"}})}),(0,a.jsx)(et.A.Item,{name:"tpm_limit",label:"TPM Limit",children:(0,a.jsx)(el.A,{style:{width:"100%"}})}),(0,a.jsx)(et.A.Item,{name:"rpm_limit",label:"RPM Limit",children:(0,a.jsx)(el.A,{style:{width:"100%"}})}),(0,a.jsx)(et.A.Item,{name:"duration",label:"Expire Key (eg: 30s, 30h, 30d)",className:"mt-8",children:(0,a.jsx)(ee.A,{placeholder:""})}),(0,a.jsxs)("div",{className:"mt-2 text-sm text-gray-500",children:["Current expiry: ",e?.expires?new Date(e.expires).toLocaleString():"Never"]}),x&&(0,a.jsxs)("div",{className:"mt-2 text-sm text-green-600",children:["New expiry: ",x]}),(0,a.jsx)(et.A.Item,{name:"grace_period",label:"Grace Period (eg: 24h, 2d)",tooltip:"Keep the old key valid for this duration after rotation. Both keys work during this period for seamless cutover. Empty = immediate revoke.",className:"mt-8",rules:[{pattern:/^(\d+(s|m|h|d|w|mo))?$/,message:"Must be a duration like 30s, 30m, 24h, 2d, 1w, or 1mo"}],children:(0,a.jsx)(ee.A,{placeholder:"e.g. 24h, 2d (empty = immediate revoke)"})}),(0,a.jsx)("div",{className:"mt-2 text-sm text-gray-500",children:"Recommended: 24h to 72h for production keys to allow seamless client migration."})]})})}var ed=t(34425),eo=t(87433),ec=t(68462),em=t(94300),eg=t(21590),ex=t(23060),eu=t(91808),ep=t(16989),eh=t(53800),ey=t(42025),ej=t(9803),e_=t(13506),eb=t(21465),ev=t(11072),ek=t(25707),ef=t(98931),eA=t(66904),eN=t(68676),eD=t(66927);function ew({keyData:e,onCancel:s,onSubmit:t,teams:l,accessToken:i,userID:n,userRole:d,premiumUser:o=!1}){let{t:c}=(0,r.o)(),[m]=et.A.useForm(),[x,u]=(0,g.useState)([]),[p,h]=(0,g.useState)({}),j=l?.find(s=>s.team_id===e.team_id),[_,b]=(0,g.useState)([]),[v,k]=(0,g.useState)(Array.isArray(e.metadata?.litellm_disabled_callbacks)?(0,$.zQ)(e.metadata.litellm_disabled_callbacks):[]),[f,A]=(0,g.useState)(e.auto_rotate||!1),[N,D]=(0,g.useState)(e.rotation_interval||""),[w,E]=(0,g.useState)(!1);(0,g.useEffect)(()=>{let s=async()=>{if(n&&d&&i)try{if(null===e.team_id){let e=(await (0,Z.modelAvailableCall)(i,n,d)).data.map(e=>e.id);b(e)}else if(j?.team_id){let e=await (0,ef.uy)(n,d,i,j.team_id);b(Array.from(new Set([...j.models,...e])))}}catch(e){console.error("Error fetching models:",e)}};(async()=>{if(i)try{let e=await (0,Z.getPromptsList)(i);u(e.prompts.map(e=>e.prompt_id))}catch(e){console.error("Failed to fetch prompts:",e)}})(),s()},[n,d,i,j,e.team_id]),(0,g.useEffect)(()=>{m.setFieldValue("disabled_callbacks",v)},[m,v]);let S=e=>e&&({"24h":"daily","7d":"weekly","30d":"monthly"})[e]||null,C={...e,token:e.token||e.token_id,budget_duration:S(e.budget_duration),metadata:B(M(e.metadata)),guardrails:e.metadata?.guardrails,disable_global_guardrails:e.metadata?.disable_global_guardrails||!1,prompts:e.metadata?.prompts,tags:e.metadata?.tags,vector_stores:e.object_permission?.vector_stores||[],mcp_servers_and_groups:{servers:e.object_permission?.mcp_servers||[],accessGroups:e.object_permission?.mcp_access_groups||[]},mcp_tool_permissions:e.object_permission?.mcp_tool_permissions||{},agents_and_groups:{agents:e.object_permission?.agents||[],accessGroups:e.object_permission?.agent_access_groups||[]},logging_settings:O(e.metadata),disabled_callbacks:Array.isArray(e.metadata?.litellm_disabled_callbacks)?(0,$.zQ)(e.metadata.litellm_disabled_callbacks):[],access_group_ids:e.access_group_ids||[],auto_rotate:e.auto_rotate||!1,...e.rotation_interval&&{rotation_interval:e.rotation_interval},allowed_routes:Array.isArray(e.allowed_routes)&&e.allowed_routes.length>0?e.allowed_routes.join(", "):""};(0,g.useEffect)(()=>{m.setFieldsValue({...e,token:e.token||e.token_id,budget_duration:S(e.budget_duration),metadata:B(M(e.metadata)),guardrails:e.metadata?.guardrails,disable_global_guardrails:e.metadata?.disable_global_guardrails||!1,prompts:e.metadata?.prompts,tags:e.metadata?.tags,vector_stores:e.object_permission?.vector_stores||[],mcp_servers_and_groups:{servers:e.object_permission?.mcp_servers||[],accessGroups:e.object_permission?.mcp_access_groups||[]},mcp_tool_permissions:e.object_permission?.mcp_tool_permissions||{},logging_settings:O(e.metadata),disabled_callbacks:Array.isArray(e.metadata?.litellm_disabled_callbacks)?(0,$.zQ)(e.metadata.litellm_disabled_callbacks):[],access_group_ids:e.access_group_ids||[],auto_rotate:e.auto_rotate||!1,...e.rotation_interval&&{rotation_interval:e.rotation_interval},allowed_routes:Array.isArray(e.allowed_routes)&&e.allowed_routes.length>0?e.allowed_routes.join(", "):""})},[e,m]),(0,g.useEffect)(()=>{m.setFieldValue("auto_rotate",f)},[f,m]),(0,g.useEffect)(()=>{N&&m.setFieldValue("rotation_interval",N)},[N,m]),(0,g.useEffect)(()=>{(async()=>{if(i)try{let e=await (0,Z.tagListCall)(i);h(e)}catch(e){W.Ay.fromBackend("Error fetching tags: "+e)}})()},[i]);let I=async e=>{try{if(E(!0),"string"==typeof e.allowed_routes){let s=e.allowed_routes.trim();""===s?e.allowed_routes=[]:e.allowed_routes=s.split(",").map(e=>e.trim()).filter(e=>e.length>0)}await t(e)}finally{E(!1)}};return(0,a.jsxs)(et.A,{form:m,onFinish:I,initialValues:C,layout:"vertical",children:[(0,a.jsx)(et.A.Item,{label:c("keyDetail.settings.keyAlias"),name:"key_alias",children:(0,a.jsx)(eg.k,{})}),(0,a.jsx)(et.A.Item,{label:c("keyDetail.settings.models"),name:"models",children:(0,a.jsx)(et.A.Item,{noStyle:!0,shouldUpdate:(e,s)=>e.allowed_routes!==s.allowed_routes||e.models!==s.models,children:({getFieldValue:e,setFieldValue:s})=>{let t=e("allowed_routes")||"",l="string"==typeof t&&""!==t.trim()?t.split(",").map(e=>e.trim()).filter(e=>e.length>0):[],i=l.includes("management_routes")||l.includes("info_routes"),r=e("models")||[];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ex.A,{mode:"multiple",placeholder:c("keyDetail.settings.placeholders.selectModels"),style:{width:"100%"},disabled:i,value:i?[]:r,onChange:e=>s("models",e),children:[_.length>0&&(0,a.jsx)(ex.A.Option,{value:"all-team-models",children:c("keyDetail.settings.messages.allTeamModels")}),_.map(e=>(0,a.jsx)(ex.A.Option,{value:e,children:e},e))]}),i&&(0,a.jsx)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:c("keyDetail.settings.messages.modelsFieldDisabled")})]})}})}),(0,a.jsx)(et.A.Item,{label:c("keyDetail.settings.keyType"),children:(0,a.jsx)(et.A.Item,{noStyle:!0,shouldUpdate:(e,s)=>e.allowed_routes!==s.allowed_routes,children:({getFieldValue:e,setFieldValue:s})=>{var t;let l=e("allowed_routes")||"",i=(t="string"==typeof l&&""!==l.trim()?l.split(",").map(e=>e.trim()).filter(e=>e.length>0):[])&&0!==t.length?t.includes("llm_api_routes")?"llm_api":t.includes("management_routes")?"management":t.includes("info_routes")?"read_only":"default":"default";return(0,a.jsxs)(ex.A,{placeholder:c("keyDetail.settings.placeholders.selectKeyType"),style:{width:"100%"},optionLabelProp:"label",value:i,onChange:e=>{switch(e){case"default":s("allowed_routes","");break;case"llm_api":s("allowed_routes","llm_api_routes");break;case"management":s("allowed_routes","management_routes"),s("models",[])}},children:[(0,a.jsx)(ex.A.Option,{value:"default",label:c("keyDetail.settings.keyTypes.default.value"),children:(0,a.jsxs)("div",{style:{padding:"4px 0"},children:[(0,a.jsx)("div",{style:{fontWeight:500},children:c("keyDetail.settings.keyTypes.default.value")}),(0,a.jsx)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:c("keyDetail.settings.keyTypes.default.description")})]})}),(0,a.jsx)(ex.A.Option,{value:"llm_api",label:c("keyDetail.settings.keyTypes.llmApi.value"),children:(0,a.jsxs)("div",{style:{padding:"4px 0"},children:[(0,a.jsx)("div",{style:{fontWeight:500},children:c("keyDetail.settings.keyTypes.llmApi.value")}),(0,a.jsx)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:c("keyDetail.settings.keyTypes.llmApi.description")})]})}),(0,a.jsx)(ex.A.Option,{value:"management",label:c("keyDetail.settings.keyTypes.management.value"),children:(0,a.jsxs)("div",{style:{padding:"4px 0"},children:[(0,a.jsx)("div",{style:{fontWeight:500},children:c("keyDetail.settings.keyTypes.management.value")}),(0,a.jsx)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:c("keyDetail.settings.keyTypes.management.description")})]})})]})}})}),(0,a.jsx)(et.A.Item,{label:(0,a.jsxs)("span",{children:[c("keyDetail.settings.allowedRoutes")," ",(0,a.jsx)(y.A,{title:c("keyDetail.settings.placeholders.allowedRoutesTooltip"),children:(0,a.jsx)(em.A,{style:{marginLeft:"4px"}})})]}),name:"allowed_routes",children:(0,a.jsx)(eu.A,{placeholder:c("keyDetail.settings.placeholders.allowedRoutesPlaceholder")})}),(0,a.jsx)(et.A.Item,{label:c("keyDetail.settings.maxBudget"),name:"max_budget",children:(0,a.jsx)(eA.A,{step:.01,style:{width:"100%"},placeholder:c("keyDetail.settings.placeholders.enterNumericalValue")})}),(0,a.jsx)(et.A.Item,{label:c("keyDetail.settings.resetBudget"),name:"budget_duration",children:(0,a.jsxs)(ex.A,{placeholder:c("keyDetail.settings.placeholders.na"),children:[(0,a.jsx)(ex.A.Option,{value:"daily",children:c("keyDetail.settings.budgetDuration.daily")}),(0,a.jsx)(ex.A.Option,{value:"weekly",children:c("keyDetail.settings.budgetDuration.weekly")}),(0,a.jsx)(ex.A.Option,{value:"monthly",children:c("keyDetail.settings.budgetDuration.monthly")})]})}),(0,a.jsx)(et.A.Item,{label:c("keyDetail.settings.tpmLimit"),name:"tpm_limit",children:(0,a.jsx)(eA.A,{min:0})}),(0,a.jsx)(eb.A,{type:"tpm",name:"tpm_limit_type",showDetailedDescriptions:!1}),(0,a.jsx)(et.A.Item,{label:c("keyDetail.settings.rpmLimit"),name:"rpm_limit",children:(0,a.jsx)(eA.A,{min:0})}),(0,a.jsx)(eb.A,{type:"rpm",name:"rpm_limit_type",showDetailedDescriptions:!1}),(0,a.jsx)(et.A.Item,{label:c("keyDetail.settings.maxParallelRequests"),name:"max_parallel_requests",children:(0,a.jsx)(eA.A,{min:0})}),(0,a.jsx)(et.A.Item,{label:c("keyDetail.settings.modelTpmLimits"),name:"model_tpm_limit",children:(0,a.jsx)(eu.A.TextArea,{rows:4,placeholder:'{"gpt-4": 100, "claude-v1": 200}'})}),(0,a.jsx)(et.A.Item,{label:c("keyDetail.settings.modelRpmLimits"),name:"model_rpm_limit",children:(0,a.jsx)(eu.A.TextArea,{rows:4,placeholder:'{"gpt-4": 100, "claude-v1": 200}'})}),(0,a.jsx)(et.A.Item,{label:c("keyDetail.settings.guardrails"),name:"guardrails",children:i&&(0,a.jsx)(eo.A,{onChange:e=>{m.setFieldValue("guardrails",e)},accessToken:i,disabled:!o})}),(0,a.jsx)(et.A.Item,{label:(0,a.jsxs)("span",{children:[c("keyDetail.settings.disableGlobalGuardrailsLabel")," ",(0,a.jsx)(y.A,{title:c("keyDetail.settings.disableGlobalGuardrailsTooltip"),children:(0,a.jsx)(em.A,{style:{marginLeft:"4px"}})})]}),name:"disable_global_guardrails",valuePropName:"checked",children:(0,a.jsx)(ep.A,{disabled:!o,checkedChildren:"Yes",unCheckedChildren:"No"})}),(0,a.jsx)(et.A.Item,{label:(0,a.jsxs)("span",{children:[c("keyDetail.settings.policies")," ",(0,a.jsx)(y.A,{title:c("keyDetail.settings.policiesTooltip"),children:(0,a.jsx)(em.A,{style:{marginLeft:"4px"}})})]}),name:"policies",children:i&&(0,a.jsx)(ec.Ay,{onChange:e=>{m.setFieldValue("policies",e)},accessToken:i,disabled:!o})}),(0,a.jsx)(et.A.Item,{label:c("keyDetail.settings.tags"),name:"tags",children:(0,a.jsx)(ex.A,{mode:"tags",style:{width:"100%"},placeholder:c("keyDetail.settings.placeholders.selectTags"),options:Object.values(p).map(e=>({value:e.name,label:e.name,title:e.description||e.name}))})}),(0,a.jsx)(et.A.Item,{label:c("keyDetail.settings.prompts"),name:"prompts",children:(0,a.jsx)(y.A,{title:o?"":c("keyDetail.settings.features.upgradeForPrompts"),placement:"top",children:(0,a.jsx)(ex.A,{mode:"tags",style:{width:"100%"},disabled:!o,placeholder:o?Array.isArray(e.metadata?.prompts)&&e.metadata.prompts.length>0?`Current: ${e.metadata.prompts.join(", ")}`:c("keyDetail.settings.placeholders.selectPrompts"):c("keyDetail.settings.features.upgradeForPrompts"),options:x.map(e=>({value:e,label:e}))})})}),(0,a.jsx)(et.A.Item,{label:(0,a.jsxs)("span",{children:[c("keyDetail.settings.accessGroups")," ",(0,a.jsx)(y.A,{title:c("keyDetail.settings.accessGroupsTooltip"),children:(0,a.jsx)(em.A,{style:{marginLeft:"4px"}})})]}),name:"access_group_ids",children:(0,a.jsx)(ey.A,{placeholder:c("keyDetail.settings.placeholders.selectAccessGroups")})}),(0,a.jsx)(et.A.Item,{label:c("keyDetail.settings.allowedPassThroughRoutesLabel"),name:"allowed_passthrough_routes",children:(0,a.jsx)(y.A,{title:o?"":c("keyDetail.settings.features.upgradeForPassThrough"),placement:"top",children:(0,a.jsx)(e_.A,{onChange:e=>m.setFieldValue("allowed_passthrough_routes",e),value:m.getFieldValue("allowed_passthrough_routes"),accessToken:i||"",placeholder:o?Array.isArray(e.metadata?.allowed_passthrough_routes)&&e.metadata.allowed_passthrough_routes.length>0?`Current: ${e.metadata.allowed_passthrough_routes.join(", ")}`:c("keyDetail.settings.placeholders.selectTags"):c("keyDetail.settings.features.upgradeForPassThrough"),disabled:!o})})}),(0,a.jsx)(et.A.Item,{label:c("keyDetail.settings.vectorStores"),name:"vector_stores",children:(0,a.jsx)(eD.A,{onChange:e=>m.setFieldValue("vector_stores",e),value:m.getFieldValue("vector_stores"),accessToken:i||"",placeholder:c("keyDetail.settings.placeholders.selectVectorStores")})}),(0,a.jsx)(et.A.Item,{label:c("keyDetail.settings.mcpServers"),name:"mcp_servers_and_groups",children:(0,a.jsx)(ev.A,{onChange:e=>m.setFieldValue("mcp_servers_and_groups",e),value:m.getFieldValue("mcp_servers_and_groups"),accessToken:i||"",placeholder:c("keyDetail.settings.placeholders.selectMcpServers")})}),(0,a.jsx)(et.A.Item,{name:"mcp_tool_permissions",initialValue:{},hidden:!0,children:(0,a.jsx)(eu.A,{type:"hidden"})}),(0,a.jsx)(et.A.Item,{noStyle:!0,shouldUpdate:(e,s)=>e.mcp_servers_and_groups!==s.mcp_servers_and_groups||e.mcp_tool_permissions!==s.mcp_tool_permissions,children:()=>(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(ek.A,{accessToken:i||"",selectedServers:m.getFieldValue("mcp_servers_and_groups")?.servers||[],toolPermissions:m.getFieldValue("mcp_tool_permissions")||{},onChange:e=>m.setFieldsValue({mcp_tool_permissions:e})})})}),(0,a.jsx)(et.A.Item,{label:c("keyDetail.settings.agents"),name:"agents_and_groups",children:(0,a.jsx)(eh.A,{onChange:e=>m.setFieldValue("agents_and_groups",e),value:m.getFieldValue("agents_and_groups"),accessToken:i||"",placeholder:c("keyDetail.settings.placeholders.selectAgents")})}),(0,a.jsx)(et.A.Item,{label:c("keyDetail.settings.teamId"),name:"team_id",children:(0,a.jsx)(ex.A,{placeholder:c("keyDetail.settings.placeholders.selectTeam"),showSearch:!0,style:{width:"100%"},filterOption:(e,s)=>{let t=l?.find(e=>e.team_id===s?.value);return!!t&&(t.team_alias?.toLowerCase().includes(e.toLowerCase())??!1)},children:l?.map(e=>(0,a.jsx)(ex.A.Option,{value:e.team_id,children:`${e.team_alias} (${e.team_id})`},e.team_id))})}),(0,a.jsx)(et.A.Item,{label:c("keyDetail.settings.loggingSettings"),name:"logging_settings",children:(0,a.jsx)(eN.A,{value:m.getFieldValue("logging_settings"),onChange:e=>m.setFieldValue("logging_settings",e),disabledCallbacks:v,onDisabledCallbacksChange:e=>{k((0,$.zQ)(e)),m.setFieldValue("disabled_callbacks",e)}})}),(0,a.jsx)(et.A.Item,{label:c("keyDetail.settings.metadataLabel"),name:"metadata",children:(0,a.jsx)(eu.A.TextArea,{rows:10})}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)(ej.A,{form:m,autoRotationEnabled:f,onAutoRotationChange:A,rotationInterval:N,onRotationIntervalChange:D}),(0,a.jsx)(et.A.Item,{name:"duration",hidden:!0,initialValue:"",children:(0,a.jsx)(eu.A,{})})]}),(0,a.jsx)(et.A.Item,{name:"token",hidden:!0,children:(0,a.jsx)(eu.A,{})}),(0,a.jsx)(et.A.Item,{name:"disabled_callbacks",hidden:!0,children:(0,a.jsx)(eu.A,{})}),(0,a.jsx)(et.A.Item,{name:"auto_rotate",hidden:!0,children:(0,a.jsx)(eu.A,{})}),(0,a.jsx)(et.A.Item,{name:"rotation_interval",hidden:!0,children:(0,a.jsx)(eu.A,{})}),(0,a.jsx)("div",{className:"sticky z-10 bg-white p-4 border-t border-gray-200 bottom-[-1.5rem] inset-x-[-1.5rem]",children:(0,a.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,a.jsx)(eg.$,{variant:"secondary",onClick:s,disabled:w,children:c("keyDetail.settings.button.cancel")}),(0,a.jsx)(eg.$,{type:"submit",loading:w,children:c("keyDetail.settings.button.saveChanges")})]})})]})}var eE=t(64601);function eS({onClose:e,keyData:s,teams:t,onKeyDataUpdate:x,onDelete:u,backButtonText:p}){let{accessToken:h,userId:y,userRole:j,premiumUser:_}=(0,l.A)(),{t:b}=(0,r.o)(),v=e=>"all-team-models"===e?b("keyDetail.settings.messages.allTeamModels").replace("团队","分组"):"all-proxy-models"===e?b("teams.allProxyModels"):(0,eE.$L)(e),{teams:k}=(0,i.A)(),[f,A]=(0,g.useState)(!1),[N,D]=(0,g.useState)(!1),[w,E]=(0,g.useState)(!1),[S,C]=(0,g.useState)(""),[I,T]=(0,g.useState)(!1),[Y,R]=(0,g.useState)(s),[L,V]=(0,g.useState)(null),[K,H]=(0,g.useState)(!1),[J,Q]=(0,g.useState)({}),[X,ee]=(0,g.useState)(!1);if((0,g.useEffect)(()=>{s&&R(s)},[s]),(0,g.useEffect)(()=>{(async()=>{let e=Y?.metadata?.policies;if(!h||!e||!Array.isArray(e)||0===e.length)return;ee(!0);let s={};try{await Promise.all(e.map(async e=>{try{let t=await (0,Z.getPolicyInfoWithGuardrails)(h,e);s[e]=t.resolved_guardrails||[]}catch(t){console.error(`Failed to fetch guardrails for policy ${e}:`,t),s[e]=[]}})),Q(s)}catch(e){console.error("Failed to fetch policy guardrails:",e)}finally{ee(!1)}})()},[h,Y?.metadata?.policies]),(0,g.useEffect)(()=>{if(K){let e=setTimeout(()=>{H(!1)},5e3);return()=>clearTimeout(e)}},[K]),!Y)return(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)(c.$n,{icon:o.A,variant:"light",onClick:e,className:"mb-4",children:p}),(0,a.jsx)(c.EY,{children:b("keyDetail.notFound")})]});let es=((t&&t.length>0?t:k)||[]).find(e=>e?.team_id===Y.team_id),et=es?.team_alias||es?.team_name||es?.alias,ea=async e=>{try{if(!h)return;let s=e.token;if(e.key=s,_||(delete e.guardrails,delete e.prompts),e.max_budget=(0,d.n)(e.max_budget),void 0!==e.vector_stores&&(e.object_permission={...Y.object_permission,vector_stores:e.vector_stores||[]},delete e.vector_stores),void 0!==e.mcp_servers_and_groups){let{servers:s,accessGroups:t}=e.mcp_servers_and_groups||{servers:[],accessGroups:[]};e.object_permission={...Y.object_permission,mcp_servers:s||[],mcp_access_groups:t||[]},delete e.mcp_servers_and_groups}if(void 0!==e.mcp_tool_permissions){let s=e.mcp_tool_permissions||{};Object.keys(s).length>0&&(e.object_permission={...e.object_permission,mcp_tool_permissions:s}),delete e.mcp_tool_permissions}if(void 0!==e.agents_and_groups){let{agents:s,accessGroups:t}=e.agents_and_groups||{agents:[],accessGroups:[]};e.object_permission={...e.object_permission,agents:s||[],agent_access_groups:t||[]},delete e.agents_and_groups}if(e.max_budget=(0,d.n)(e.max_budget),e.tpm_limit=(0,d.n)(e.tpm_limit),e.rpm_limit=(0,d.n)(e.rpm_limit),e.max_parallel_requests=(0,d.n)(e.max_parallel_requests),e.metadata&&"string"==typeof e.metadata)try{let s=JSON.parse(e.metadata);"tags"in s&&delete s.tags,e.metadata={...s,...Array.isArray(e.tags)&&e.tags.length>0?{tags:e.tags}:{},...e.guardrails?.length>0?{guardrails:e.guardrails}:{},...Array.isArray(e.logging_settings)&&e.logging_settings.length>0?{logging:e.logging_settings}:{},...e.disabled_callbacks?.length>0?{litellm_disabled_callbacks:(0,$.xZ)(e.disabled_callbacks)}:{}}}catch(e){console.error("Error parsing metadata JSON:",e),W.Ay.error("Invalid metadata JSON");return}else{let{tags:s,...t}=e.metadata||{};e.metadata={...t,...Array.isArray(e.tags)&&e.tags.length>0?{tags:e.tags}:{},...e.guardrails?.length>0?{guardrails:e.guardrails}:{},...Array.isArray(e.logging_settings)&&e.logging_settings.length>0?{logging:e.logging_settings}:{},...e.disabled_callbacks?.length>0?{litellm_disabled_callbacks:(0,$.xZ)(e.disabled_callbacks)}:{}}}"tags"in e&&delete e.tags,delete e.logging_settings,e.budget_duration&&(e.budget_duration=({daily:"24h",weekly:"7d",monthly:"30d"})[e.budget_duration]);let t=await (0,Z.keyUpdateCall)(h,e);R(e=>e?{...e,...t}:void 0),x&&x(t),W.Ay.success(b("keyDetail.notifications.updateSuccess")),A(!1)}catch(e){W.Ay.fromBackend((0,ed.x)(e)),console.error("Error updating key:",e)}},el=async()=>{try{if(E(!0),!h)return;await (0,Z.keyDeleteCall)(h,Y.token||Y.token_id),W.Ay.success(b("keyDetail.notifications.deleteSuccess")),u&&u(),e()}catch(e){console.error("Error deleting the key:",e),W.Ay.fromBackend(e)}finally{E(!1),D(!1),C("")}},ei=e=>{let s=new Date(e),t=s.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),a=s.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return`${t} at ${a}`},er=(0,F.G9)(j||"")||k&&(0,F.WU)(k?.filter(e=>e.team_id===Y.team_id)[0]?.members_with_roles,y||"")||y===Y.user_id&&"Internal Viewer"!==j;return(0,a.jsxs)("div",{className:"w-full h-screen p-4",children:[(0,a.jsx)(P,{data:{keyName:Y.key_alias||b("keyDetail.header.virtualKey"),keyId:Y.token_id||Y.token,userId:Y.user_id||"",userEmail:Y.user_email||"",createdBy:Y.user_email||Y.user_id||"",createdAt:Y.created_at?ei(Y.created_at):"",lastUpdated:Y.updated_at?ei(Y.updated_at):"",lastActive:Y.last_active?ei(Y.last_active):b("keyDetail.header.never")},onBack:e,onRegenerate:()=>T(!0),onDelete:()=>D(!0),canModifyKey:er,backButtonText:p,showRegenerateButton:!1,regenerateDisabled:!_,regenerateTooltip:_?void 0:b("keyDetail.header.regenerateTooltip")}),(0,a.jsx)(en,{selectedToken:Y,visible:I,onClose:()=>T(!1),onKeyUpdate:e=>{R(s=>{if(s)return{...s,...e,created_at:new Date().toLocaleString()}}),V(new Date),H(!0),x&&x({...e,created_at:new Date().toLocaleString()})}}),(0,a.jsx)(G.A,{isOpen:N,title:"Delete Key",alertMessage:b("keyDetail.deleteModal.alertMessage"),message:b("keyDetail.deleteModal.message"),resourceInformationTitle:b("keyDetail.deleteModal.resourceTitle"),resourceInformation:[{label:b("keyDetail.deleteModal.keyAlias"),value:Y?.key_alias||"-"},{label:b("keyDetail.deleteModal.keyId"),value:Y?.token_id||Y?.token||"-",code:!0},{label:"分组 ID",value:Y?.team_id||"-",code:!0},{label:"分组名称",value:et||"-"},{label:b("keyDetail.deleteModal.spend"),value:Y?.spend?`\xa5${(0,n.HY)(Y.spend,4)}`:"\xa50.0000"}],onCancel:()=>{D(!1),C("")},onOk:el,confirmLoading:w,requiredConfirmation:Y?.key_alias}),(0,a.jsxs)(c.fu,{children:[(0,a.jsxs)(c.wb,{className:"mb-4",children:[(0,a.jsx)(c.oz,{children:b("keyDetail.tabs.overview")}),(0,a.jsx)(c.oz,{children:b("keyDetail.tabs.settings")})]}),(0,a.jsxs)(c.T2,{children:[(0,a.jsx)(c.Kp,{children:(0,a.jsxs)(c.xA,{numItems:1,numItemsSm:2,numItemsLg:3,className:"gap-6",children:[(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.EY,{children:b("keyDetail.overview.spend")}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)(c.hE,{children:["\xa5",(0,n.HY)(Y.spend,4)]}),(0,a.jsxs)(c.EY,{children:[b("keyDetail.overview.of")," ",null!==Y.max_budget?`\xa5${(0,n.HY)(Y.max_budget)}`:b("keyDetail.overview.unlimited")]})]})]}),(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.EY,{children:b("keyDetail.overview.rateLimits")}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)(c.EY,{children:[b("keyDetail.overview.tpm"),": ",null!==Y.tpm_limit?Y.tpm_limit:b("keyDetail.overview.unlimited")]}),(0,a.jsxs)(c.EY,{children:[b("keyDetail.overview.rpm"),": ",null!==Y.rpm_limit?Y.rpm_limit:b("keyDetail.overview.unlimited")]})]})]}),(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.EY,{children:b("keyDetail.overview.models")}),(0,a.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:Y.models&&Y.models.length>0?Y.models.map((e,s)=>(0,a.jsx)(c.Ex,{color:"red",children:v(e)},s)):(0,a.jsx)(c.EY,{children:b("keyDetail.overview.noModels")})})]}),(0,a.jsx)(c.Zp,{children:(0,a.jsx)(q.A,{objectPermission:Y.object_permission,variant:"inline",accessToken:h})}),(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.EY,{className:"font-medium mb-3",children:b("keyDetail.overview.guardrails")}),Array.isArray(Y.metadata?.guardrails)&&Y.metadata.guardrails.length>0?(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:Y.metadata.guardrails.map((e,s)=>(0,a.jsx)(c.Ex,{color:"blue",children:e},s))}):(0,a.jsx)(c.EY,{className:"text-gray-500",children:b("keyDetail.overview.noGuardrails")}),"boolean"==typeof Y.metadata?.disable_global_guardrails&&!0===Y.metadata.disable_global_guardrails&&(0,a.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:(0,a.jsx)(c.Ex,{color:"yellow",children:b("keyDetail.overview.globalGuardrailsDisabled")})})]}),(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.EY,{className:"font-medium mb-3",children:b("keyDetail.overview.policies")}),Array.isArray(Y.metadata?.policies)&&Y.metadata.policies.length>0?(0,a.jsx)("div",{className:"space-y-4",children:Y.metadata.policies.map((e,s)=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.Ex,{color:"purple",children:e}),X&&(0,a.jsx)(c.EY,{className:"text-xs text-gray-400",children:b("keyDetail.overview.loadingGuardrails")})]}),!X&&J[e]&&J[e].length>0&&(0,a.jsxs)("div",{className:"ml-4 pl-3 border-l-2 border-gray-200",children:[(0,a.jsxs)(c.EY,{className:"text-xs text-gray-500 mb-1",children:[b("keyDetail.overview.resolvedGuardrails"),":"]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:J[e].map((e,s)=>(0,a.jsx)(c.Ex,{color:"blue",size:"xs",children:e},s))})]})]},s))}):(0,a.jsx)(c.EY,{className:"text-gray-500",children:b("keyDetail.overview.noPolicies")})]}),(0,a.jsx)(U.A,{loggingConfigs:O(Y.metadata),disabledCallbacks:Array.isArray(Y.metadata?.litellm_disabled_callbacks)?(0,$.zQ)(Y.metadata.litellm_disabled_callbacks):[],variant:"card"}),(0,a.jsx)(z,{autoRotate:Y.auto_rotate,rotationInterval:Y.rotation_interval,lastRotationAt:Y.last_rotation_at,keyRotationAt:Y.key_rotation_at,nextRotationAt:Y.next_rotation_at,variant:"card"})]})}),(0,a.jsx)(c.Kp,{children:(0,a.jsxs)(c.Zp,{className:"overflow-y-auto max-h-[65vh]",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)(c.hE,{children:b("keyDetail.settings.title")}),!f&&er&&(0,a.jsx)(c.$n,{onClick:()=>A(!0),children:b("keyDetail.settings.editButton")})]}),f?(0,a.jsx)(ew,{keyData:Y,onCancel:()=>A(!1),onSubmit:ea,teams:t,accessToken:h,userID:y,userRole:j,premiumUser:_}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c.EY,{className:"font-medium",children:b("keyDetail.settings.keyId")}),(0,a.jsx)(c.EY,{className:"font-mono",children:Y.token_id||Y.token})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.EY,{className:"font-medium",children:b("keyDetail.settings.keyAlias")}),(0,a.jsx)(c.EY,{children:Y.key_alias||b("keyDetail.settings.notSet")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.EY,{className:"font-medium",children:b("keyDetail.settings.secretKey")}),(0,a.jsx)(c.EY,{className:"font-mono",children:Y.key_name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.EY,{className:"font-medium",children:b("keyDetail.settings.teamId").replace("团队","分组")}),(0,a.jsx)(c.EY,{children:Y.team_id||b("keyDetail.settings.notSet")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.EY,{className:"font-medium",children:"分组名称"}),(0,a.jsx)(c.EY,{children:et||b("keyDetail.settings.notSet")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.EY,{className:"font-medium",children:b("keyDetail.settings.organization")}),(0,a.jsx)(c.EY,{children:Y.organization_id||b("keyDetail.settings.notSet")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.EY,{className:"font-medium",children:b("keyDetail.settings.created")}),(0,a.jsx)(c.EY,{children:ei(Y.created_at)})]}),L&&(0,a.jsxs)("div",{children:[(0,a.jsx)(c.EY,{className:"font-medium",children:b("keyDetail.settings.lastRegenerated")}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.EY,{children:ei(L)}),(0,a.jsx)(c.Ex,{color:"green",size:"xs",children:b("keyDetail.settings.recent")})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.EY,{className:"font-medium",children:b("keyDetail.settings.expires")}),(0,a.jsx)(c.EY,{children:Y.expires?ei(Y.expires):b("keyDetail.settings.never")})]}),(0,a.jsx)(z,{autoRotate:Y.auto_rotate,rotationInterval:Y.rotation_interval,lastRotationAt:Y.last_rotation_at,keyRotationAt:Y.key_rotation_at,nextRotationAt:Y.next_rotation_at,variant:"inline",className:"pt-4 border-t border-gray-200"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.EY,{className:"font-medium",children:b("keyDetail.settings.spend")}),(0,a.jsxs)(c.EY,{children:["\xa5",(0,n.HY)(Y.spend,4)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.EY,{className:"font-medium",children:b("keyDetail.settings.budget")}),(0,a.jsx)(c.EY,{children:null!==Y.max_budget?`\xa5${(0,n.HY)(Y.max_budget,2)}`:b("keyDetail.settings.unlimited")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.EY,{className:"font-medium",children:b("keyDetail.settings.tags")}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:Array.isArray(Y.metadata?.tags)&&Y.metadata.tags.length>0?Y.metadata.tags.map((e,s)=>(0,a.jsx)("span",{className:"px-2 mr-2 py-1 bg-blue-100 rounded text-xs",children:e},s)):b("keyDetail.settings.noTags")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.EY,{className:"font-medium",children:b("keyDetail.settings.prompts")}),(0,a.jsx)(c.EY,{children:Array.isArray(Y.metadata?.prompts)&&Y.metadata.prompts.length>0?Y.metadata.prompts.map((e,s)=>(0,a.jsx)("span",{className:"px-2 mr-2 py-1 bg-blue-100 rounded text-xs",children:e},s)):b("keyDetail.settings.noPrompts")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.EY,{className:"font-medium",children:b("keyDetail.settings.allowedRoutes")}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:Array.isArray(Y.allowed_routes)&&Y.allowed_routes.length>0?Y.allowed_routes.map((e,s)=>(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100 rounded text-xs",children:e},s)):(0,a.jsx)(m.A,{color:"green",children:b("keyDetail.settings.allRoutesAllowed")})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.EY,{className:"font-medium",children:b("keyDetail.settings.allowedPassThroughRoutes")}),(0,a.jsx)(c.EY,{children:Array.isArray(Y.metadata?.allowed_passthrough_routes)&&Y.metadata.allowed_passthrough_routes.length>0?Y.metadata.allowed_passthrough_routes.map((e,s)=>(0,a.jsx)("span",{className:"px-2 mr-2 py-1 bg-blue-100 rounded text-xs",children:e},s)):b("keyDetail.settings.noPassThroughRoutes")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.EY,{className:"font-medium",children:b("keyDetail.settings.disableGlobalGuardrails")}),(0,a.jsx)(c.EY,{children:Y.metadata?.disable_global_guardrails===!0?(0,a.jsx)(c.Ex,{color:"yellow",children:b("keyDetail.settings.globalGuardrailsEnabled")}):(0,a.jsx)(c.Ex,{color:"green",children:b("keyDetail.settings.globalGuardrailsDisabled")})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.EY,{className:"font-medium",children:b("keyDetail.settings.models")}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:Y.models&&Y.models.length>0?Y.models.map((e,s)=>(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100 rounded text-xs",children:v(e)},s)):(0,a.jsx)(c.EY,{children:b("keyDetail.settings.noModels")})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.EY,{className:"font-medium",children:b("keyDetail.settings.rateLimits")}),(0,a.jsxs)(c.EY,{children:[b("keyDetail.settings.tpm"),": ",null!==Y.tpm_limit?Y.tpm_limit:b("keyDetail.settings.unlimited")]}),(0,a.jsxs)(c.EY,{children:[b("keyDetail.settings.rpm"),": ",null!==Y.rpm_limit?Y.rpm_limit:b("keyDetail.settings.unlimited")]}),(0,a.jsxs)(c.EY,{children:[b("keyDetail.settings.maxParallelRequests"),":"," ",null!==Y.max_parallel_requests?Y.max_parallel_requests:b("keyDetail.settings.unlimited")]}),(0,a.jsxs)(c.EY,{children:[b("keyDetail.settings.modelTpmLimits"),":"," ",Y.metadata?.model_tpm_limit?JSON.stringify(Y.metadata.model_tpm_limit):b("keyDetail.settings.unlimited")]}),(0,a.jsxs)(c.EY,{children:[b("keyDetail.settings.modelRpmLimits"),":"," ",Y.metadata?.model_rpm_limit?JSON.stringify(Y.metadata.model_rpm_limit):b("keyDetail.settings.unlimited")]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(c.EY,{className:"font-medium",children:b("keyDetail.settings.metadata")}),(0,a.jsx)("pre",{className:"bg-gray-100 p-2 rounded text-xs overflow-auto mt-1",children:B(M(Y.metadata))})]}),(0,a.jsx)(q.A,{objectPermission:Y.object_permission,variant:"inline",className:"pt-4 border-t border-gray-200",accessToken:h}),(0,a.jsx)(U.A,{loggingConfigs:O(Y.metadata),disabledCallbacks:Array.isArray(Y.metadata?.litellm_disabled_callbacks)?(0,$.zQ)(Y.metadata.litellm_disabled_callbacks):[],variant:"inline",className:"pt-4 border-t border-gray-200"})]})]})})]})]})]})}}}]);