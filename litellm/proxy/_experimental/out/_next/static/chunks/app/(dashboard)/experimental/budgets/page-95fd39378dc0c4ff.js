(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6900],{15109:(e,t,s)=>{Promise.resolve().then(s.bind(s,56856))},20803:(e,t,s)=>{"use strict";s.d(t,{A:()=>R});var l=s(95155),r=s(38983),n=s(42837),i=s(2212),a=s(87927),o=s(56680),d=s(73806),c=s(79363),u=s(30489),m=s(96961),h=s(95517),x=s(8179),p=s(31556),A=s(95171),g=s(75892),j=s(12115),b=s(27397),y=s(66793),_=s(82426),f=s(12120),k=s(28436),v=s(95875),w=s(56691),C=s(20645),B=s(34487),I=s(25387),T=s(3373),N=s(8208),E=s(23060),O=s(87278);let D=({isModalVisible:e,accessToken:t,setIsModalVisible:s,setBudgetList:r})=>{let[n]=I.A.useForm(),i=async e=>{if(null!=t&&void 0!=t)try{f.Ay.info("Making API Call");let s=await (0,k.budgetCreateCall)(t,e);console.log("key create Response:",s),r(e=>e?[...e,s]:[s]),f.Ay.success("Budget Created"),n.resetFields()}catch(e){console.error("Error creating the key:",e),f.Ay.fromBackend(`Error creating the key: ${e}`)}};return(0,l.jsx)(T.A,{title:"Create Budget",open:e,width:800,footer:null,onOk:()=>{s(!1),n.resetFields()},onCancel:()=>{s(!1),n.resetFields()},children:(0,l.jsxs)(I.A,{form:n,onFinish:i,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(I.A.Item,{label:"Budget ID",name:"budget_id",rules:[{required:!0,message:"Please input a human-friendly name for the budget"}],help:"A human-friendly name for the budget",children:(0,l.jsx)(B.A,{placeholder:""})}),(0,l.jsx)(I.A.Item,{label:"Max Tokens per minute",name:"tpm_limit",help:"Default is model limit.",children:(0,l.jsx)(N.A,{step:1,precision:2,width:200})}),(0,l.jsx)(I.A.Item,{label:"Max Requests per minute",name:"rpm_limit",help:"Default is model limit.",children:(0,l.jsx)(N.A,{step:1,precision:2,width:200})}),(0,l.jsxs)(v.h,{className:"mt-20 mb-8",children:[(0,l.jsx)(C.A,{children:(0,l.jsx)("b",{children:"Optional Settings"})}),(0,l.jsxs)(w.A,{children:[(0,l.jsx)(I.A.Item,{label:"æœ€å¤§é¢„ç®—",name:"max_budget",children:(0,l.jsx)(N.A,{step:.01,precision:2,width:200})}),(0,l.jsx)(I.A.Item,{className:"mt-8",label:"Reset Budget",name:"budget_duration",children:(0,l.jsxs)(E.A,{defaultValue:null,placeholder:"n/a",children:[(0,l.jsx)(E.A.Option,{value:"24h",children:"daily"}),(0,l.jsx)(E.A.Option,{value:"7d",children:"weekly"}),(0,l.jsx)(E.A.Option,{value:"30d",children:"monthly"})]})})]})]})]}),(0,l.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,l.jsx)(O.Ay,{htmlType:"submit",children:"Create Budget"})})]})})},P=({isModalVisible:e,accessToken:t,setIsModalVisible:s,setBudgetList:r,existingBudget:n,handleUpdateCall:i})=>{console.log("existingBudget",n);let[a]=I.A.useForm();(0,j.useEffect)(()=>{a.setFieldsValue(n)},[n,a]);let o=async e=>{if(null!=t&&void 0!=t)try{f.Ay.info("Making API Call"),s(!0);let l=await (0,k.budgetUpdateCall)(t,e);r(e=>e?[...e,l]:[l]),f.Ay.success("Budget Updated"),a.resetFields(),i()}catch(e){console.error("Error creating the key:",e),f.Ay.fromBackend(`Error creating the key: ${e}`)}};return(0,l.jsx)(T.A,{title:"Edit Budget",open:e,width:800,footer:null,onOk:()=>{s(!1),a.resetFields()},onCancel:()=>{s(!1),a.resetFields()},children:(0,l.jsxs)(I.A,{form:a,onFinish:o,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",initialValues:n,children:[(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(I.A.Item,{label:"Budget ID",name:"budget_id",rules:[{required:!0,message:"Please input a human-friendly name for the budget"}],help:"A human-friendly name for the budget",children:(0,l.jsx)(B.A,{placeholder:""})}),(0,l.jsx)(I.A.Item,{label:"Max Tokens per minute",name:"tpm_limit",help:"Default is model limit.",children:(0,l.jsx)(N.A,{step:1,precision:2,width:200})}),(0,l.jsx)(I.A.Item,{label:"Max Requests per minute",name:"rpm_limit",help:"Default is model limit.",children:(0,l.jsx)(N.A,{step:1,precision:2,width:200})}),(0,l.jsxs)(v.h,{className:"mt-20 mb-8",children:[(0,l.jsx)(C.A,{children:(0,l.jsx)("b",{children:"Optional Settings"})}),(0,l.jsxs)(w.A,{children:[(0,l.jsx)(I.A.Item,{label:"æœ€å¤§é¢„ç®—",name:"max_budget",children:(0,l.jsx)(N.A,{step:.01,precision:2,width:200})}),(0,l.jsx)(I.A.Item,{className:"mt-8",label:"Reset Budget",name:"budget_duration",children:(0,l.jsxs)(E.A,{defaultValue:null,placeholder:"n/a",children:[(0,l.jsx)(E.A.Option,{value:"24h",children:"daily"}),(0,l.jsx)(E.A.Option,{value:"7d",children:"weekly"}),(0,l.jsx)(E.A.Option,{value:"30d",children:"monthly"})]})})]})]})]}),(0,l.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,l.jsx)(O.Ay,{htmlType:"submit",children:"Save"})})]})})},M=`
curl -X POST --location '<your_proxy_base_url>/end_user/new' \\

-H 'Authorization: Bearer <your-master-key>' \\

-H 'Content-Type: application/json' \\

-d '{"user_id": "my-customer-id', "budget_id": "<BUDGET_ID>"}' # ðŸ‘ˆ KEY CHANGE

`,F=`
curl -X POST --location '<your_proxy_base_url>/chat/completions' \\

-H 'Authorization: Bearer <your-master-key>' \\

-H 'Content-Type: application/json' \\

-d '{
  "model": "gpt-3.5-turbo',
  "messages":[{"role": "user", "content": "Hey, how's it going?"}],
  "user": "my-customer-id"
}' # ðŸ‘ˆ KEY CHANGE

`,S=`from openai import OpenAI
client = OpenAI(
  base_url="<your_proxy_base_url>",
  api_key="<your_proxy_key>"
)

completion = client.chat.completions.create(
  model="gpt-3.5-turbo",
  messages=[
    {"role": "system", "content": "You are a helpful assistant."},
    {"role": "user", "content": "Hello!"}
  ],
  user="my-customer-id"
)

print(completion.choices[0].message)`,R=({accessToken:e})=>{let[t,s]=(0,j.useState)(!1),[v,w]=(0,j.useState)(!1),[C,B]=(0,j.useState)(null),[I,T]=(0,j.useState)([]),[N,E]=(0,j.useState)(!1),[O,R]=(0,j.useState)(!1);(0,j.useEffect)(()=>{e&&(0,k.getBudgetList)(e).then(e=>{T(e)})},[e]);let L=async t=>{null!=e&&(B(t),w(!0))},U=async()=>{if(C&&null!=e){E(!0);try{await (0,k.budgetDeleteCall)(e,C.budget_id),f.Ay.success("Budget deleted."),await V()}catch(e){console.error("Error deleting budget:",e),"function"==typeof f.Ay.fromBackend?f.Ay.fromBackend("Failed to delete budget"):f.Ay.info("Failed to delete budget")}finally{E(!1),R(!1),B(null)}}},V=async()=>{null!=e&&(0,k.getBudgetList)(e).then(e=>{T(e)})};return(0,l.jsxs)("div",{className:"w-full mx-auto flex-auto overflow-y-auto m-8 p-2",children:[(0,l.jsx)(r.A,{size:"sm",variant:"primary",className:"mb-2",onClick:()=>s(!0),children:"+ Create Budget"}),(0,l.jsxs)(a.A,{children:[(0,l.jsxs)(o.A,{children:[(0,l.jsx)(i.A,{children:"Budgets"}),(0,l.jsx)(i.A,{children:"Examples"})]}),(0,l.jsxs)(c.A,{children:[(0,l.jsx)(d.A,{children:(0,l.jsxs)("div",{className:"mt-6",children:[(0,l.jsx)(D,{accessToken:e,isModalVisible:t,setIsModalVisible:s,setBudgetList:T}),C&&(0,l.jsx)(P,{accessToken:e,isModalVisible:v,setIsModalVisible:w,setBudgetList:T,existingBudget:C,handleUpdateCall:V}),(0,l.jsxs)(n.A,{children:[(0,l.jsx)(g.A,{children:"Create a budget to assign to customers."}),(0,l.jsxs)(u.A,{children:[(0,l.jsx)(x.A,{children:(0,l.jsxs)(A.A,{children:[(0,l.jsx)(p.A,{children:"Budget ID"}),(0,l.jsx)(p.A,{children:"Max Budget"}),(0,l.jsx)(p.A,{children:"TPM"}),(0,l.jsx)(p.A,{children:"RPM"})]})}),(0,l.jsx)(m.A,{children:I.slice().sort((e,t)=>new Date(t.updated_at).getTime()-new Date(e.updated_at).getTime()).map((e,t)=>(0,l.jsxs)(A.A,{children:[(0,l.jsx)(h.A,{children:e.budget_id}),(0,l.jsx)(h.A,{children:e.max_budget?e.max_budget:"n/a"}),(0,l.jsx)(h.A,{children:e.tpm_limit?e.tpm_limit:"n/a"}),(0,l.jsx)(h.A,{children:e.rpm_limit?e.rpm_limit:"n/a"}),(0,l.jsx)(_.A,{variant:"Edit",tooltipText:"Edit budget",onClick:()=>L(e),dataTestId:"edit-budget-button"}),(0,l.jsx)(_.A,{variant:"Delete",tooltipText:"Delete budget",onClick:()=>{B(e),R(!0)},dataTestId:"delete-budget-button"})]},t))})]})]}),(0,l.jsx)(y.A,{isOpen:O,title:"Delete Budget?",message:"Are you sure you want to delete this budget? This action cannot be undone.",resourceInformationTitle:"Budget Information",resourceInformation:[{label:"Budget ID",value:C?.budget_id,code:!0},{label:"Max Budget",value:C?.max_budget},{label:"TPM",value:C?.tpm_limit},{label:"RPM",value:C?.rpm_limit}],onCancel:()=>{R(!1)},onOk:U,confirmLoading:N})]})}),(0,l.jsx)(d.A,{children:(0,l.jsxs)("div",{className:"mt-6",children:[(0,l.jsx)(g.A,{className:"text-base",children:"How to use budget id"}),(0,l.jsxs)(a.A,{children:[(0,l.jsxs)(o.A,{children:[(0,l.jsx)(i.A,{children:"Assign Budget to Customer"}),(0,l.jsx)(i.A,{children:"Test it (Curl)"}),(0,l.jsx)(i.A,{children:"Test it (OpenAI SDK)"})]}),(0,l.jsxs)(c.A,{children:[(0,l.jsx)(d.A,{children:(0,l.jsx)(b.A,{language:"bash",children:M})}),(0,l.jsx)(d.A,{children:(0,l.jsx)(b.A,{language:"bash",children:F})}),(0,l.jsx)(d.A,{children:(0,l.jsx)(b.A,{language:"python",children:S})})]})]})]})})]})]})]})}},40230:(e,t,s)=>{"use strict";s.d(t,{I:()=>l.A});var l=s(19602)},42696:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var l=s(28436),r=s(12352),n=s(97035),i=s(73321),a=s(12115),o=s(64394);let d=()=>{let e=(0,i.useRouter)(),{data:t,isLoading:s}=(0,o._)(),d="u">typeof document?(0,r.R)("token"):null,c=(0,a.useMemo)(()=>(0,n.oL)(d),[d]),u=(0,a.useMemo)(()=>(0,n.eP)(d),[d])&&!t?.admin_ui_disabled;return(0,a.useEffect)(()=>{!s&&(u||(d&&(0,r.E)(),e.replace(`${(0,l.getProxyBaseUrl)()}/ui/login`)))},[s,u,d,e]),{isLoading:s,isAuthorized:u,token:u?d:null,accessToken:c?.key??null,userId:c?.user_id??null,userEmail:c?.user_email??null,userRole:function(e){if(!e)return"Undefined Role";switch(e.toLowerCase()){case"app_owner":case"demo_app_owner":return"App Owner";case"app_admin":case"proxy_admin":return"Admin";case"proxy_admin_viewer":return"Admin Viewer";case"org_admin":return"Org Admin";case"internal_user":return"Internal User";case"internal_user_viewer":case"internal_viewer":return"Internal Viewer";case"app_user":return"App User";default:return"Unknown Role"}}(c?.user_role),premiumUser:c?.premium_user??null,disabledPersonalKeyCreation:c?.disabled_non_admin_personal_key_creation??null,showSSOBanner:c?.login_method==="username_password"}}},56856:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var l=s(95155),r=s(20803),n=s(42696);let i=()=>{let{accessToken:e}=(0,n.A)();return(0,l.jsx)(r.A,{accessToken:e})}},66793:(e,t,s)=>{"use strict";s.d(t,{A:()=>h});var l=s(95155),r=s(41326),n=s(99476),i=s(3373),a=s(99876),o=s(69779),d=s(30648),c=s(91808),u=s(81283),m=s(12115);function h({isOpen:e,title:t,alertMessage:s,message:h,resourceInformationTitle:x,resourceInformation:p,onCancel:A,onOk:g,confirmLoading:j,requiredConfirmation:b,okText:y="Delete",okLoadingText:_="Deleting...",cancelText:f="Cancel"}){let{Title:k,Text:v}=r.A,{token:w}=n.A.useToken(),[C,B]=(0,m.useState)("");return(0,m.useEffect)(()=>{e&&B("")},[e]),(0,l.jsx)(i.A,{title:t,open:e,onOk:g,onCancel:A,confirmLoading:j,okText:j?_:y,cancelText:f,okButtonProps:{danger:!0,disabled:!!b&&C!==b||j},cancelButtonProps:{disabled:j},children:(0,l.jsxs)("div",{className:"space-y-4",children:[s&&(0,l.jsx)(a.A,{message:s,type:"warning"}),(0,l.jsx)(o.A,{title:x,className:"mt-4",styles:{body:{padding:"16px"},header:{backgroundColor:w.colorErrorBg,borderColor:w.colorErrorBorder}},style:{backgroundColor:w.colorErrorBg,borderColor:w.colorErrorBorder},children:(0,l.jsx)(d.A,{column:1,size:"small",children:p&&p.map(({label:e,value:t,...s})=>(0,l.jsx)(d.A.Item,{label:(0,l.jsx)("span",{className:"font-semibold",children:e}),children:(0,l.jsx)(v,{...s,children:t??"-"})},e))})}),(0,l.jsx)("div",{children:(0,l.jsx)(v,{children:h})}),b&&(0,l.jsxs)("div",{className:"mb-6 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,l.jsxs)(v,{className:"block text-base font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,l.jsx)(v,{children:"Type "}),(0,l.jsx)(v,{strong:!0,type:"danger",children:b}),(0,l.jsx)(v,{children:" to confirm deletion:"})]}),(0,l.jsx)(c.A,{value:C,onChange:e=>B(e.target.value),placeholder:b,className:"rounded-md",prefix:(0,l.jsx)(u.A,{style:{color:w.colorError}}),autoFocus:!0})]})]})})}},82426:(e,t,s)=>{"use strict";s.d(t,{A:()=>A});var l=s(95155),r=s(55726),n=s(45588),i=s(14862),a=s(73317),o=s(14992),d=s(17293),c=s(53535),u=s(22277),m=s(87287),h=s(40230);function x({icon:e,onClick:t,className:s,disabled:r,dataTestId:n}){return r?(0,l.jsx)(h.I,{icon:e,size:"sm",className:"opacity-50 cursor-not-allowed","data-testid":n}):(0,l.jsx)(h.I,{icon:e,size:"sm",onClick:t,className:(0,m.cx)("cursor-pointer",s),"data-testid":n})}s(12115);let p={Edit:{icon:r.A,className:"hover:text-blue-600"},Delete:{icon:n.A,className:"hover:text-red-600"},Test:{icon:i.A,className:"hover:text-blue-600"},Regenerate:{icon:a.A,className:"hover:text-green-600"},Up:{icon:o.A,className:"hover:text-blue-600"},Down:{icon:d.A,className:"hover:text-blue-600"},Open:{icon:c.A,className:"hover:text-green-600"}};function A({onClick:e,tooltipText:t,disabled:s=!1,disabledTooltipText:r,dataTestId:n,variant:i}){let{icon:a,className:o}=p[i];return(0,l.jsx)(u.A,{title:s?r:t,children:(0,l.jsx)("span",{children:(0,l.jsx)(x,{icon:a,onClick:e,className:o,disabled:s,dataTestId:n})})})}},87287:(e,t,s)=>{"use strict";s.d(t,{cx:()=>i});var l=s(57838),r=s(622);let{cva:n,cx:i,compose:a}=(0,l.C8)({hooks:{onComplete:e=>(0,r.QP)(e)}})},97035:(e,t,s)=>{"use strict";s.d(t,{eP:()=>i,oL:()=>n,xP:()=>r});var l=s(19253);function r(e){try{let t=(0,l.s)(e);if(t&&"number"==typeof t.exp)return 1e3*t.exp<=Date.now();return!1}catch{return!0}}function n(e){if(!e)return null;try{return(0,l.s)(e)}catch{return null}}function i(e){return!!e&&null!==n(e)&&!r(e)}}},e=>{e.O(0,[3725,5884,1145,1909,1326,8536,8267,3146,9904,1291,2360,54,4725,7397,1197,4394,8441,3794,7358],()=>e(e.s=15109)),_N_E=e.O()}]);