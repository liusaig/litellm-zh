(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3420],{6761:(e,l,a)=>{"use strict";a.d(l,{p:()=>x});var r=a(95155),t=a(67667),s=a(87056),n=a(99904),i=a(51914),o=a(12115),c=a(23060),d=a(22277),u=a(13545),m=a(56842),g=a(33210);function p({group:e,onChange:l,availableModels:a,maxFallbacks:t}){let s=a.filter(l=>l!==e.primaryModel),n=e.fallbackModels.length<t;return(0,r.jsxs)("div",{className:"flex flex-col gap-8 py-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Primary Model ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)(c.A,{className:"w-full h-12",size:"large",placeholder:"Select primary model",value:e.primaryModel,onChange:a=>{let r=[...e.fallbackModels];r.includes(a)&&(r=r.filter(e=>e!==a)),l({...e,primaryModel:a,fallbackModels:r})},showSearch:!0,filterOption:(e,l)=>(l?.label??"").toLowerCase().includes(e.toLowerCase()),options:a.map(e=>({label:e,value:e}))}),!e.primaryModel&&(0,r.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-amber-600 text-xs bg-amber-50 p-2 rounded",children:[(0,r.jsx)(u.A,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"Select a model to begin configuring fallbacks"})]})]}),(0,r.jsx)("div",{className:"flex items-center justify-center -my-4 z-10",children:(0,r.jsxs)("div",{className:"bg-indigo-50 text-indigo-500 px-4 py-1 rounded-full text-xs font-bold border border-indigo-100 flex items-center gap-2 shadow-sm",children:[(0,r.jsx)(m.A,{className:"w-4 h-4"}),"IF FAILS, TRY..."]})}),(0,r.jsxs)("div",{className:`transition-opacity duration-300 ${!e.primaryModel?"opacity-50 pointer-events-none":"opacity-100"}`,children:[(0,r.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Fallback Chain ",(0,r.jsx)("span",{className:"text-red-500",children:"*"}),(0,r.jsxs)("span",{className:"text-xs text-gray-500 font-normal ml-2",children:["(Max ",t," fallbacks at a time)"]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)(c.A,{mode:"multiple",className:"w-full",size:"large",placeholder:n?"Select fallback models to add...":`Maximum ${t} fallbacks reached`,value:e.fallbackModels,onChange:a=>{let r=a.slice(0,t);l({...e,fallbackModels:r})},disabled:!e.primaryModel,options:s.map(e=>({label:e,value:e})),optionRender:(l,a)=>{let t=e.fallbackModels.includes(l.value),s=t?e.fallbackModels.indexOf(l.value)+1:null;return(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[t&&null!==s&&(0,r.jsx)("span",{className:"flex items-center justify-center w-5 h-5 rounded bg-indigo-100 text-indigo-600 text-xs font-bold",children:s}),(0,r.jsx)("span",{children:l.label})]})},maxTagCount:"responsive",maxTagPlaceholder:e=>(0,r.jsx)(d.A,{styles:{root:{pointerEvents:"none"}},title:e.map(({value:e})=>e).join(", "),children:(0,r.jsxs)("span",{children:["+",e.length," more"]})}),showSearch:!0,filterOption:(e,l)=>(l?.label??"").toLowerCase().includes(e.toLowerCase())}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1 ml-1",children:n?`Search and select multiple models. Selected models will appear below in order. (${e.fallbackModels.length}/${t} used)`:`Maximum ${t} fallbacks reached. Remove some to add more.`})]}),(0,r.jsx)("div",{className:"space-y-2 min-h-[100px]",children:0===e.fallbackModels.length?(0,r.jsxs)("div",{className:"h-32 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center text-gray-400",children:[(0,r.jsx)("span",{className:"text-sm",children:"No fallback models selected"}),(0,r.jsx)("span",{className:"text-xs mt-1",children:"Add models from the dropdown above"})]}):e.fallbackModels.map((a,t)=>(0,r.jsxs)("div",{className:"group flex items-center justify-between p-3 bg-white rounded-lg border border-gray-200 hover:border-indigo-300 hover:shadow-sm transition-all",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"flex items-center justify-center w-6 h-6 rounded bg-gray-100 text-gray-400 group-hover:text-indigo-500 group-hover:bg-indigo-50",children:(0,r.jsx)("span",{className:"text-xs font-bold",children:t+1})}),(0,r.jsx)("div",{children:(0,r.jsx)("span",{className:"font-medium text-gray-800",children:a})})]}),(0,r.jsx)("button",{type:"button",onClick:()=>{let a;return a=e.fallbackModels.filter((e,l)=>l!==t),void l({...e,fallbackModels:a})},className:"opacity-0 group-hover:opacity-100 transition-opacity text-gray-400 hover:text-red-500 p-1",children:(0,r.jsx)(g.A,{className:"w-4 h-4"})})]},`${a}-${t}`))})]})]})]})}function x({groups:e,onGroupsChange:l,availableModels:a,maxFallbacks:c=10,maxGroups:d=5}){let[u,m]=(0,o.useState)(e.length>0?e[0].id:"1");(0,o.useEffect)(()=>{e.length>0?e.some(e=>e.id===u)||m(e[0].id):m("1")},[e]);let g=()=>{if(e.length>=d)return;let a=Date.now().toString();l([...e,{id:a,primaryModel:null,fallbackModels:[]}]),m(a)},x=a=>{l(e.map(e=>e.id===a.id?a:e))},f=e.map((l,t)=>{let s=l.primaryModel?l.primaryModel:`Group ${t+1}`;return{key:l.id,label:s,closable:e.length>1,children:(0,r.jsx)(p,{group:l,onChange:x,availableModels:a,maxFallbacks:c})}});return 0===e.length?(0,r.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg border border-dashed border-gray-300",children:[(0,r.jsx)("p",{className:"text-gray-500 mb-4",children:"No fallback groups configured"}),(0,r.jsx)(t.$,{variant:"primary",onClick:g,icon:()=>(0,r.jsx)(i.A,{className:"w-4 h-4"}),children:"Create First Group"})]}):(0,r.jsx)(n.A,{type:"editable-card",activeKey:u,onChange:m,onEdit:(a,r)=>{"add"===r?g():"remove"===r&&e.length>1&&(a=>{if(1===e.length)return s.Ay.warning("At least one group is required");let r=e.filter(e=>e.id!==a);l(r),u===a&&r.length>0&&m(r[r.length-1].id)})(a)},items:f,className:"fallback-tabs",tabBarStyle:{marginBottom:0},hideAdd:e.length>=d})}},15997:(e,l,a)=>{"use strict";a.d(l,{A:()=>J});var r=a(95155),t=a(12115),s=a(34254),n=a(38983),i=a(42837),o=a(19602),c=a(88636),d=a(30489),u=a(96961),m=a(95517),g=a(8179),p=a(31556),x=a(95171),f=a(75892),h=a(96130),y=a(28436),b=a(8208),A=a(92982),j=a(45588),_=a(67667),v=a(12120),k=a(19113);let w=({accessToken:e,userRole:l,userID:a,modelData:s})=>{let[n,i]=(0,t.useState)({routerSettings:{},selectedStrategy:null,enableTagFiltering:!1}),[o,c]=(0,t.useState)([]),[d,u]=(0,t.useState)({}),[m,g]=(0,t.useState)({});return((0,t.useEffect)(()=>{e&&l&&a&&((0,y.getCallbacksCall)(e,a,l).then(e=>{console.log("callbacks",e);let l=e.router_settings;"model_group_retry_policy"in l&&delete l.model_group_retry_policy;let a=l.routing_strategy||null;i(e=>({...e,routerSettings:l,selectedStrategy:a}))}),(0,y.getRouterSettingsCall)(e).then(e=>{if(console.log("router settings from API",e),e.fields){let l={};e.fields.forEach(e=>{l[e.field_name]={ui_field_name:e.ui_field_name,field_description:e.field_description,options:e.options,link:e.link}}),u(l);let a=e.fields.find(e=>"routing_strategy"===e.field_name);a?.options&&c(a.options),e.routing_strategy_descriptions&&g(e.routing_strategy_descriptions);let r=e.fields.find(e=>"enable_tag_filtering"===e.field_name);r?.field_value!==null&&r?.field_value!==void 0&&i(e=>({...e,enableTagFiltering:r.field_value}))}}))},[e,l,a]),e)?(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)(k.A,{value:n,onChange:i,routerFieldsMetadata:d,availableRoutingStrategies:o,routingStrategyDescriptions:m}),(0,r.jsxs)("div",{className:"border-t border-gray-200 pt-6 flex justify-end gap-3",children:[(0,r.jsx)(_.$,{variant:"secondary",size:"sm",onClick:()=>window.location.reload(),className:"text-sm",children:"Reset"}),(0,r.jsx)(_.$,{size:"sm",onClick:()=>{if(!e)return;let l=n.routerSettings;console.log("router_settings",l);let a=new Set(["allowed_fails","cooldown_time","num_retries","timeout","retry_after"]),r=new Set(["model_group_alias","retry_policy"]),t=Object.fromEntries(Object.entries({...l,enable_tag_filtering:n.enableTagFiltering}).map(([e,l])=>{if("routing_strategy_args"!==e&&"routing_strategy"!==e&&"enable_tag_filtering"!==e){let t=document.querySelector(`input[name="${e}"]`),s=((e,l,t)=>{if(void 0===l)return t;let s=l.trim();if("null"===s.toLowerCase())return null;if(a.has(e)){let e=Number(s);return Number.isNaN(e)?t:e}if(r.has(e)){if(""===s)return null;try{return JSON.parse(s)}catch{return t}}return"true"===s.toLowerCase()||"false"!==s.toLowerCase()&&s})(e,t?.value,l);return[e,s]}if("routing_strategy"===e)return[e,n.selectedStrategy];if("enable_tag_filtering"===e)return[e,n.enableTagFiltering];if("routing_strategy_args"===e&&"latency-based-routing"===n.selectedStrategy){let e={},l=document.querySelector('input[name="lowest_latency_buffer"]'),a=document.querySelector('input[name="ttl"]');return l?.value&&(e.lowest_latency_buffer=Number(l.value)),a?.value&&(e.ttl=Number(a.value)),console.log(`setRoutingStrategyArgs: ${e}`),["routing_strategy_args",e]}return null}).filter(e=>null!=e));console.log("updatedVariables",t);try{(0,y.setCallbacksCall)(e,{router_settings:t})}catch(e){v.Ay.fromBackend("Failed to update router settings: "+e)}v.Ay.success("router settings updated successfully")},className:"text-sm font-medium",children:"Save Changes"})]})]}):null};var N=a(75954),I=a(44817),S=a(14862),C=a(41326),M=a(22277),$=a(69285),O=a(66793),T=a(86019),F=a(87056),E=a(87278),D=a(22603),L=a(3373),z=a(99247);function P({open:e,onCancel:l,children:a}){return(0,r.jsx)(L.A,{title:(0,r.jsx)("div",{className:"pb-4 border-b border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 text-gray-800",children:[(0,r.jsx)("div",{className:"p-2 bg-indigo-50 rounded-lg",children:(0,r.jsx)(z.A,{className:"w-5 h-5 text-indigo-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-bold m-0",children:"Configure Model Fallbacks"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 font-normal m-0",children:"Manage multiple fallback chains for different models (up to 5 groups at a time)"})]})]})}),open:e,width:900,footer:null,onCancel:l,maskClosable:!1,className:"top-8",styles:{body:{padding:"24px"},header:{padding:"24px 24px 0 24px",border:"none"}},children:(0,r.jsx)("div",{className:"mt-6",children:a})})}var R=a(6761);function G({models:e,accessToken:l,value:a=[],onChange:s}){let[n,i]=(0,t.useState)(!1),[o,c]=(0,t.useState)([]),[d,u]=(0,t.useState)(0),[m,g]=(0,t.useState)(!1),[p,x]=(0,t.useState)([{id:"1",primaryModel:null,fallbackModels:[]}]);(0,t.useEffect)(()=>{n&&(x([{id:"1",primaryModel:null,fallbackModels:[]}]),u(e=>e+1))},[n]),(0,t.useEffect)(()=>{let e=async()=>{try{let e=await (0,D.Q)(l);console.log("Fetched models for fallbacks:",e),c(e)}catch(e){console.error("Error fetching model info for fallbacks:",e)}};n&&e()},[l,n]);let f=Array.from(new Set(o.map(e=>e.model_group))).sort(),h=()=>{i(!1),x([{id:"1",primaryModel:null,fallbackModels:[]}])},y=async()=>{let e=p.filter(e=>!e.primaryModel||0===e.fallbackModels.length);if(e.length>0)return void F.Ay.error(`Please complete configuration for all groups. ${e.length} group(s) incomplete.`);let l=[...a||[],...p.map(e=>({[e.primaryModel]:e.fallbackModels}))];if(s){g(!0);try{await s(l),v.Ay.success(`${p.length} fallback configuration(s) added successfully!`),h()}catch(e){console.error("Error saving fallbacks:",e)}finally{g(!1)}}else v.Ay.fromBackend("onChange callback not provided")};return(0,r.jsxs)("div",{children:[(0,r.jsx)(_.$,{className:"mx-auto",onClick:()=>i(!0),icon:()=>(0,r.jsx)("span",{className:"mr-1",children:"+"}),children:"Add Fallbacks"}),(0,r.jsxs)(P,{open:n,onCancel:h,children:[(0,r.jsx)(R.p,{groups:p,onGroupsChange:x,availableModels:f,maxFallbacks:10,maxGroups:5},d),p.length>0&&(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-6 mt-6 border-t border-gray-100",children:[(0,r.jsx)(E.Ay,{type:"default",onClick:h,disabled:m,children:"Cancel"}),(0,r.jsx)(E.Ay,{type:"default",onClick:y,disabled:0===p.length||m,loading:m,children:m?"Saving Configuration...":"Save All Configurations"})]})]})]})}let B="inline-flex items-center gap-2 px-2.5 py-1 rounded-md border border-gray-200 bg-gray-50 text-sm font-medium text-gray-800 shrink-0";async function V(e,l){console.log=function(){};let a=window.location.origin,t=new $.Ay.OpenAI({apiKey:l,baseURL:a,dangerouslyAllowBrowser:!0});try{v.Ay.info("Testing fallback model response...");let l=await t.chat.completions.create({model:e,messages:[{role:"user",content:"Hi, this is a test message"}],mock_testing_fallbacks:!0});v.Ay.success((0,r.jsxs)("span",{children:["Test model=",(0,r.jsx)("strong",{children:e}),", received model=",(0,r.jsx)("strong",{children:l.model}),". See"," ",(0,r.jsx)("a",{href:"#",onClick:()=>window.open("https://docs.litellm.ai/docs/proxy/reliability","_blank"),style:{textDecoration:"underline",color:"blue"},children:"curl"})]}))}catch(e){v.Ay.fromBackend(`Error occurred while generating model response. Please try again. Error: ${e}`)}}let q=({accessToken:e,userRole:l,userID:a,modelData:s})=>{let[n,i]=(0,t.useState)({}),[c,f]=(0,t.useState)(!1),[h,b]=(0,t.useState)(null),[A,_]=(0,t.useState)(!1),{data:k}=(0,N.o)(),w=e=>null!=k&&"object"==typeof k&&e in k?k[e].litellm_provider??"":"";(0,t.useEffect)(()=>{e&&l&&a&&(0,y.getCallbacksCall)(e,a,l).then(e=>{console.log("callbacks",e);let l=e.router_settings;"model_group_retry_policy"in l&&delete l.model_group_retry_policy,i(l)})},[e,l,a]);let $=e=>{b(e),_(!0)},F=async()=>{if(!h||!e)return;let l=Object.keys(h)[0];if(!l)return;f(!0);let a=n.fallbacks.map(e=>{let a={...e};return l in a&&Array.isArray(a[l])&&delete a[l],a}).filter(e=>Object.keys(e).length>0),r={...n,fallbacks:a};try{await (0,y.setCallbacksCall)(e,{router_settings:r}),i(r),v.Ay.success("Router settings updated successfully")}catch(e){v.Ay.fromBackend("Failed to update router settings: "+e)}finally{f(!1),_(!1),b(null)}};if(!e)return null;let E=async r=>{if(!e)return;let t={...n,fallbacks:r};try{await (0,y.setCallbacksCall)(e,{router_settings:t}),i(t)}catch(r){throw v.Ay.fromBackend("Failed to update router settings: "+r),e&&l&&a&&(0,y.getCallbacksCall)(e,a,l).then(e=>{let l=e.router_settings;"model_group_retry_policy"in l&&delete l.model_group_retry_policy,i(l)}),r}},D=Array.isArray(n.fallbacks)&&n.fallbacks.length>0;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(G,{models:s?.data?s.data.map(e=>e.model_name):[],accessToken:e||"",value:n.fallbacks||[],onChange:E}),D?(0,r.jsxs)(d.A,{children:[(0,r.jsx)(g.A,{children:(0,r.jsxs)(x.A,{children:[(0,r.jsx)(p.A,{children:"Model Name"}),(0,r.jsx)(p.A,{children:"Fallbacks"}),(0,r.jsx)(p.A,{children:"Actions"})]})}),(0,r.jsx)(u.A,{children:n.fallbacks.map((l,a)=>Object.entries(l).map(([s,n])=>{let i;return(0,r.jsxs)(x.A,{children:[(0,r.jsx)(m.A,{className:"align-top",children:(i=w?.(s)??s,(0,r.jsxs)("span",{className:B,children:[(0,r.jsx)(T.v,{provider:i,className:"w-4 h-4 shrink-0"}),(0,r.jsx)("span",{children:s})]}))}),(0,r.jsx)(m.A,{className:"align-top",children:function(e,l,a){let s=Array.isArray(l)?l:[];if(0===s.length)return null;let n=({modelName:e})=>{let l=a?.(e)??e;return(0,r.jsxs)("span",{className:B,children:[(0,r.jsx)(T.v,{provider:l,className:"w-4 h-4 shrink-0"}),(0,r.jsx)("span",{children:e})]})};return(0,r.jsxs)("span",{className:"grid grid-cols-[auto_1fr] items-start gap-x-2 w-full min-w-0",children:[(0,r.jsx)("span",{className:"inline-flex items-center justify-center w-8 h-8 shrink-0 self-start text-blue-600","aria-hidden":!0,children:(0,r.jsx)(I.A,{className:"w-5 h-5 stroke-[2.5]"})}),(0,r.jsx)("span",{className:"flex flex-wrap items-start gap-1 min-w-0",children:s.map((e,l)=>(0,r.jsxs)(t.Fragment,{children:[l>0&&(0,r.jsx)(o.A,{icon:I.A,size:"xs",className:"shrink-0 text-gray-400"}),(0,r.jsx)(n,{modelName:e})]},e))})]})}(0,Array.isArray(n)?n:[],w)}),(0,r.jsxs)(m.A,{className:"align-top",children:[(0,r.jsx)(M.A,{title:"Test fallback",children:(0,r.jsx)(o.A,{icon:S.A,size:"sm",onClick:()=>V(Object.keys(l)[0],e||""),className:"cursor-pointer hover:text-blue-600"})}),(0,r.jsx)(M.A,{title:"Delete fallback",children:(0,r.jsx)("span",{"data-testid":"delete-fallback-button",role:"button",tabIndex:0,onClick:()=>$(l),onKeyDown:e=>"Enter"===e.key&&$(l),className:"cursor-pointer inline-flex",children:(0,r.jsx)(o.A,{icon:j.A,size:"sm",className:"hover:text-red-600"})})})]})]},a.toString()+s)}))})]}):(0,r.jsx)("div",{className:"rounded-lg border border-gray-200 bg-gray-50 px-4 py-6 text-center",children:(0,r.jsx)(C.A.Text,{type:"secondary",children:"No fallbacks configured. Add fallbacks to automatically try another model when the primary fails."})}),(0,r.jsx)(O.A,{isOpen:A,title:"Delete Fallback?",message:"Are you sure you want to delete this fallback? This action cannot be undone.",resourceInformationTitle:"Fallback Information",resourceInformation:[{label:"Model Name",value:h?Object.keys(h)[0]:"",code:!0}],onCancel:()=>{_(!1),b(null)},onOk:F,confirmLoading:c})]})},J=({accessToken:e,userRole:l,userID:a,modelData:_})=>{let[v,k]=(0,t.useState)([]);(0,t.useEffect)(()=>{e&&(0,y.getGeneralSettingsCall)(e).then(e=>{k(e)})},[e]);let N=(e,l)=>{k(v.map(a=>a.field_name===e?{...a,field_value:l}:a))};return e?(0,r.jsx)("div",{className:"w-full",children:(0,r.jsxs)(h.fu,{className:"h-[75vh] w-full",children:[(0,r.jsxs)(h.wb,{variant:"line",defaultValue:"1",className:"px-8 pt-4",children:[(0,r.jsx)(h.oz,{value:"1",children:"Loadbalancing"}),(0,r.jsx)(h.oz,{value:"2",children:"Fallbacks"}),(0,r.jsx)(h.oz,{value:"3",children:"General"})]}),(0,r.jsxs)(h.T2,{className:"px-8 py-6",children:[(0,r.jsx)(h.Kp,{children:(0,r.jsx)(w,{accessToken:e,userRole:l,userID:a,modelData:_})}),(0,r.jsx)(h.Kp,{children:(0,r.jsx)(q,{accessToken:e,userRole:l,userID:a,modelData:_})}),(0,r.jsx)(h.Kp,{children:(0,r.jsx)(i.A,{children:(0,r.jsxs)(d.A,{children:[(0,r.jsx)(g.A,{children:(0,r.jsxs)(x.A,{children:[(0,r.jsx)(p.A,{children:"Setting"}),(0,r.jsx)(p.A,{children:"Value"}),(0,r.jsx)(p.A,{children:"Status"}),(0,r.jsx)(p.A,{children:"Action"})]})}),(0,r.jsx)(u.A,{children:v.filter(e=>"TypedDictionary"!==e.field_type).map((l,a)=>(0,r.jsxs)(x.A,{children:[(0,r.jsxs)(m.A,{children:[(0,r.jsx)(f.A,{children:l.field_name}),(0,r.jsx)("p",{style:{fontSize:"0.65rem",color:"#808080",fontStyle:"italic"},className:"mt-1",children:l.field_description})]}),(0,r.jsx)(m.A,{children:"Integer"==l.field_type?(0,r.jsx)(b.A,{step:1,value:l.field_value,onChange:e=>N(l.field_name,e)}):"Boolean"==l.field_type?(0,r.jsx)(c.A,{checked:!0===l.field_value||"true"===l.field_value,onChange:e=>N(l.field_name,e)}):null}),(0,r.jsx)(m.A,{children:!0==l.stored_in_db?(0,r.jsx)(s.A,{icon:A.A,className:"text-white",children:"In DB"}):!1==l.stored_in_db?(0,r.jsx)(s.A,{className:"text-gray bg-white outline",children:"In Config"}):(0,r.jsx)(s.A,{className:"text-gray bg-white outline",children:"Not Set"})}),(0,r.jsxs)(m.A,{children:[(0,r.jsx)(n.A,{onClick:()=>((l,a)=>{if(!e)return;let r=v[a].field_value;if(null!=r&&void 0!=r)try{(0,y.updateConfigFieldSetting)(e,l,r);let a=v.map(e=>e.field_name===l?{...e,stored_in_db:!0}:e);k(a)}catch(e){}})(l.field_name,a),children:"Update"}),(0,r.jsx)(o.A,{icon:j.A,color:"red",onClick:()=>((l,a)=>{if(e)try{(0,y.deleteConfigFieldSetting)(e,l);let a=v.map(e=>e.field_name===l?{...e,stored_in_db:null,field_value:null}:e);k(a)}catch(e){}})(l.field_name,0),children:"Reset"})]})]},a))})]})})})]})]})}):null}},19033:(e,l,a)=>{Promise.resolve().then(a.bind(a,69192))},19113:(e,l,a)=>{"use strict";a.d(l,{A:()=>m});var r=a(95155);a(12115);var t=a(73648);let s={ttl:3600,lowest_latency_buffer:0},n=({routingStrategyArgs:e})=>{let l={ttl:"Sliding window to look back over when calculating the average latency of a deployment. Default - 1 hour (in seconds).",lowest_latency_buffer:"Shuffle between deployments within this % of the lowest latency. Default - 0 (i.e. always pick lowest latency)."};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"max-w-3xl",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Latency-Based Configuration"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Fine-tune latency-based routing behavior"})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2 xl:grid-cols-3",children:Object.entries(e||s).map(([e,a])=>(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsxs)("label",{className:"block",children:[(0,r.jsx)("span",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:e.replace(/_/g," ")}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-0.5 mb-2",children:l[e]||""}),(0,r.jsx)(t.k,{name:e,defaultValue:"object"==typeof a?JSON.stringify(a,null,2):a?.toString(),className:"font-mono text-sm w-full"})]})},e))})]}),(0,r.jsx)("div",{className:"border-t border-gray-200"})]})},i=({routerSettings:e,routerFieldsMetadata:l})=>(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"max-w-3xl",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Reliability & Retries"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Configure retry logic and failure handling"})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2 xl:grid-cols-3",children:Object.entries(e).filter(([e,l])=>"fallbacks"!=e&&"context_window_fallbacks"!=e&&"routing_strategy_args"!=e&&"routing_strategy"!=e&&"enable_tag_filtering"!=e).map(([e,a])=>(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsxs)("label",{className:"block",children:[(0,r.jsx)("span",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:l[e]?.ui_field_name||e}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-0.5 mb-2",children:l[e]?.field_description||""}),(0,r.jsx)(t.k,{name:e,defaultValue:null==a||"null"===a?"":"object"==typeof a?JSON.stringify(a,null,2):a?.toString()||"",placeholder:"â€”",className:"font-mono text-sm w-full"})]})},e))})]});var o=a(23060);let c=({selectedStrategy:e,availableStrategies:l,routingStrategyDescriptions:a,routerFieldsMetadata:t,onStrategyChange:s})=>(0,r.jsxs)("div",{className:"space-y-2 max-w-3xl",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:t.routing_strategy?.ui_field_name||"Routing Strategy"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-0.5 mb-2",children:t.routing_strategy?.field_description||""})]}),(0,r.jsx)("div",{className:"routing-strategy-select max-w-3xl",children:(0,r.jsx)(o.A,{value:e,onChange:s,style:{width:"100%"},size:"large",children:l.map(e=>(0,r.jsx)(o.A.Option,{value:e,label:e,children:(0,r.jsxs)("div",{className:"flex flex-col gap-0.5 py-1",children:[(0,r.jsx)("span",{className:"font-mono text-sm font-medium",children:e}),a[e]&&(0,r.jsx)("span",{className:"text-xs text-gray-500 font-normal",children:a[e]})]})},e))})})]});var d=a(88636);let u=({enabled:e,routerFieldsMetadata:l,onToggle:a})=>(0,r.jsx)("div",{className:"space-y-3 max-w-3xl",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("label",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:l.enable_tag_filtering?.ui_field_name||"Enable Tag Filtering"}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-0.5",children:[l.enable_tag_filtering?.field_description||"",l.enable_tag_filtering?.link&&(0,r.jsxs)(r.Fragment,{children:[" ",(0,r.jsx)("a",{href:l.enable_tag_filtering.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"Learn more"})]})]})]}),(0,r.jsx)(d.A,{checked:e,onChange:a,className:"ml-4"})]})}),m=({value:e,onChange:l,routerFieldsMetadata:a,availableRoutingStrategies:t,routingStrategyDescriptions:s})=>(0,r.jsxs)("div",{className:"w-full space-y-8 py-2",children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"max-w-3xl",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Routing Settings"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Configure how requests are routed to deployments"})]}),t.length>0&&(0,r.jsx)(c,{selectedStrategy:e.selectedStrategy||e.routerSettings.routing_strategy||null,availableStrategies:t,routingStrategyDescriptions:s,routerFieldsMetadata:a,onStrategyChange:a=>{l({...e,selectedStrategy:a})}}),(0,r.jsx)(u,{enabled:e.enableTagFiltering,routerFieldsMetadata:a,onToggle:a=>{l({...e,enableTagFiltering:a})}})]}),(0,r.jsx)("div",{className:"border-t border-gray-200"}),"latency-based-routing"===e.selectedStrategy&&(0,r.jsx)(n,{routingStrategyArgs:e.routerSettings.routing_strategy_args}),(0,r.jsx)(i,{routerSettings:e.routerSettings,routerFieldsMetadata:a})]})},22603:(e,l,a)=>{"use strict";a.d(l,{Q:()=>t});var r=a(28436);let t=async e=>{try{let l=await (0,r.modelHubCall)(e);if(console.log("model_info:",l),l?.data.length>0){let e=l.data.map(e=>({model_group:e.model_group,mode:e?.mode}));return e.sort((e,l)=>e.model_group.localeCompare(l.model_group)),e}return[]}catch(e){throw console.error("Error fetching model info:",e),e}}},42696:(e,l,a)=>{"use strict";a.d(l,{A:()=>c});var r=a(28436),t=a(12352),s=a(97035),n=a(73321),i=a(12115),o=a(64394);let c=()=>{let e=(0,n.useRouter)(),{data:l,isLoading:a}=(0,o._)(),c="u">typeof document?(0,t.R)("token"):null,d=(0,i.useMemo)(()=>(0,s.oL)(c),[c]),u=(0,i.useMemo)(()=>(0,s.eP)(c),[c])&&!l?.admin_ui_disabled;return(0,i.useEffect)(()=>{!a&&(u||(c&&(0,t.E)(),e.replace(`${(0,r.getProxyBaseUrl)()}/ui/login`)))},[a,u,c,e]),{isLoading:a,isAuthorized:u,token:u?c:null,accessToken:d?.key??null,userId:d?.user_id??null,userEmail:d?.user_email??null,userRole:function(e){if(!e)return"Undefined Role";switch(e.toLowerCase()){case"app_owner":case"demo_app_owner":return"App Owner";case"app_admin":case"proxy_admin":return"Admin";case"proxy_admin_viewer":return"Admin Viewer";case"org_admin":return"Org Admin";case"internal_user":return"Internal User";case"internal_user_viewer":case"internal_viewer":return"Internal Viewer";case"app_user":return"App User";default:return"Unknown Role"}}(d?.user_role),premiumUser:d?.premium_user??null,disabledPersonalKeyCreation:d?.disabled_non_admin_personal_key_creation??null,showSSOBanner:d?.login_method==="username_password"}}},66793:(e,l,a)=>{"use strict";a.d(l,{A:()=>g});var r=a(95155),t=a(41326),s=a(99476),n=a(3373),i=a(99876),o=a(69779),c=a(30648),d=a(91808),u=a(81283),m=a(12115);function g({isOpen:e,title:l,alertMessage:a,message:g,resourceInformationTitle:p,resourceInformation:x,onCancel:f,onOk:h,confirmLoading:y,requiredConfirmation:b,okText:A="Delete",okLoadingText:j="Deleting...",cancelText:_="Cancel"}){let{Title:v,Text:k}=t.A,{token:w}=s.A.useToken(),[N,I]=(0,m.useState)("");return(0,m.useEffect)(()=>{e&&I("")},[e]),(0,r.jsx)(n.A,{title:l,open:e,onOk:h,onCancel:f,confirmLoading:y,okText:y?j:A,cancelText:_,okButtonProps:{danger:!0,disabled:!!b&&N!==b||y},cancelButtonProps:{disabled:y},children:(0,r.jsxs)("div",{className:"space-y-4",children:[a&&(0,r.jsx)(i.A,{message:a,type:"warning"}),(0,r.jsx)(o.A,{title:p,className:"mt-4",styles:{body:{padding:"16px"},header:{backgroundColor:w.colorErrorBg,borderColor:w.colorErrorBorder}},style:{backgroundColor:w.colorErrorBg,borderColor:w.colorErrorBorder},children:(0,r.jsx)(c.A,{column:1,size:"small",children:x&&x.map(({label:e,value:l,...a})=>(0,r.jsx)(c.A.Item,{label:(0,r.jsx)("span",{className:"font-semibold",children:e}),children:(0,r.jsx)(k,{...a,children:l??"-"})},e))})}),(0,r.jsx)("div",{children:(0,r.jsx)(k,{children:g})}),b&&(0,r.jsxs)("div",{className:"mb-6 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)(k,{className:"block text-base font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,r.jsx)(k,{children:"Type "}),(0,r.jsx)(k,{strong:!0,type:"danger",children:b}),(0,r.jsx)(k,{children:" to confirm deletion:"})]}),(0,r.jsx)(d.A,{value:N,onChange:e=>I(e.target.value),placeholder:b,className:"rounded-md",prefix:(0,r.jsx)(u.A,{style:{color:w.colorError}}),autoFocus:!0})]})]})})}},67667:(e,l,a)=>{"use strict";a.d(l,{$:()=>r.A});var r=a(38983)},69192:(e,l,a)=>{"use strict";a.r(l),a.d(l,{default:()=>n});var r=a(95155),t=a(15997),s=a(42696);let n=()=>{let{accessToken:e,userRole:l,userId:a}=(0,s.A)();return(0,r.jsx)(t.A,{accessToken:e,userRole:l,userID:a,modelData:{}})}},75954:(e,l,a)=>{"use strict";a.d(l,{o:()=>n});var r=a(28436),t=a(26708);let s=(0,a(90078).D)("modelCostMap"),n=()=>(0,t.I)({queryKey:s.list({}),queryFn:async()=>await (0,r.modelCostMap)(),staleTime:6e4,gcTime:6e4})},86019:(e,l,a)=>{"use strict";a.d(l,{v:()=>n});var r=a(95155),t=a(12115),s=a(90314);let n=({provider:e,className:l="w-4 h-4"})=>{let[a,n]=(0,t.useState)(!1),{logo:i}=(0,s.li)(e);return a||!i?(0,r.jsx)("div",{className:`${l} rounded-full bg-gray-200 flex items-center justify-center text-xs`,children:e?.charAt(0)||"-"}):(0,r.jsx)("img",{src:i,alt:`${e} logo`,className:l,onError:()=>n(!0)})}},90314:(e,l,a)=>{"use strict";a.d(l,{G_:()=>c,JQ:()=>s,SM:()=>d,bb:()=>t,li:()=>o,rm:()=>i});var r,t=((r={}).A2A_Agent="A2A Agent",r.AIML="AI/ML API",r.Bedrock="Amazon Bedrock",r.Anthropic="Anthropic",r.AssemblyAI="AssemblyAI",r.SageMaker="AWS SageMaker",r.Azure="Azure",r.Azure_AI_Studio="Azure AI Foundry (Studio)",r.Cerebras="Cerebras",r.Cohere="Cohere",r.Dashscope="Dashscope",r.Databricks="Databricks (Qwen API)",r.DeepInfra="DeepInfra",r.Deepgram="Deepgram",r.Deepseek="Deepseek",r.ElevenLabs="ElevenLabs",r.FalAI="Fal AI",r.FireworksAI="Fireworks AI",r.Google_AI_Studio="Google AI Studio",r.GradientAI="GradientAI",r.Groq="Groq",r.Hosted_Vllm="vllm",r.Infinity="Infinity",r.JinaAI="Jina AI",r.MiniMax="MiniMax",r.MistralAI="Mistral AI",r.Ollama="Ollama",r.OpenAI="OpenAI",r.OpenAI_Compatible="OpenAI-Compatible Endpoints (Together AI, etc.)",r.OpenAI_Text="OpenAI Text Completion",r.OpenAI_Text_Compatible="OpenAI-Compatible Text Completion Models (Together AI, etc.)",r.Openrouter="Openrouter",r.Oracle="Oracle Cloud Infrastructure (OCI)",r.Perplexity="Perplexity",r.RunwayML="RunwayML",r.Sambanova="Sambanova",r.Snowflake="Snowflake",r.TogetherAI="TogetherAI",r.Triton="Triton",r.Vertex_AI="Vertex AI (Anthropic, Gemini, etc.)",r.VolcEngine="VolcEngine",r.Voyage="Voyage AI",r.xAI="xAI",r.SAP="SAP Generative AI Hub",r.Watsonx="Watsonx",r);let s={A2A_Agent:"a2a_agent",AIML:"aiml",OpenAI:"openai",OpenAI_Text:"text-completion-openai",Azure:"azure",Azure_AI_Studio:"azure_ai",Anthropic:"anthropic",Google_AI_Studio:"gemini",Bedrock:"bedrock",Groq:"groq",MiniMax:"minimax",MistralAI:"mistral",Cohere:"cohere",OpenAI_Compatible:"openai",OpenAI_Text_Compatible:"text-completion-openai",Vertex_AI:"vertex_ai",Databricks:"databricks",Dashscope:"dashscope",xAI:"xai",Deepseek:"deepseek",Ollama:"ollama",AssemblyAI:"assemblyai",Cerebras:"cerebras",Sambanova:"sambanova",Perplexity:"perplexity",RunwayML:"runwayml",TogetherAI:"together_ai",Openrouter:"openrouter",Oracle:"oci",Snowflake:"snowflake",FireworksAI:"fireworks_ai",GradientAI:"gradient_ai",Triton:"triton",Deepgram:"deepgram",ElevenLabs:"elevenlabs",FalAI:"fal_ai",SageMaker:"sagemaker_chat",Voyage:"voyage",JinaAI:"jina_ai",VolcEngine:"volcengine",DeepInfra:"deepinfra",Hosted_Vllm:"hosted_vllm",Infinity:"infinity",SAP:"sap",Watsonx:"watsonx"},n="../ui/assets/logos/",i={"A2A Agent":`${n}a2a_agent.png`,"AI/ML API":`${n}aiml_api.svg`,Anthropic:`${n}anthropic.svg`,AssemblyAI:`${n}assemblyai_small.png`,Azure:`${n}microsoft_azure.svg`,"Azure AI Foundry (Studio)":`${n}microsoft_azure.svg`,"Amazon Bedrock":`${n}bedrock.svg`,"AWS SageMaker":`${n}bedrock.svg`,Cerebras:`${n}cerebras.svg`,Cohere:`${n}cohere.svg`,"Databricks (Qwen API)":`${n}databricks.svg`,Dashscope:`${n}dashscope.svg`,Deepseek:`${n}deepseek.svg`,"Fireworks AI":`${n}fireworks.svg`,Groq:`${n}groq.svg`,"Google AI Studio":`${n}google.svg`,vllm:`${n}vllm.png`,Infinity:`${n}infinity.png`,MiniMax:`${n}minimax.svg`,"Mistral AI":`${n}mistral.svg`,Ollama:`${n}ollama.svg`,OpenAI:`${n}openai_small.svg`,"OpenAI Text Completion":`${n}openai_small.svg`,"OpenAI-Compatible Text Completion Models (Together AI, etc.)":`${n}openai_small.svg`,"OpenAI-Compatible Endpoints (Together AI, etc.)":`${n}openai_small.svg`,Openrouter:`${n}openrouter.svg`,"Oracle Cloud Infrastructure (OCI)":`${n}oracle.svg`,Perplexity:`${n}perplexity-ai.svg`,RunwayML:`${n}runwayml.png`,Sambanova:`${n}sambanova.svg`,Snowflake:`${n}snowflake.svg`,TogetherAI:`${n}togetherai.svg`,"Vertex AI (Anthropic, Gemini, etc.)":`${n}google.svg`,xAI:`${n}xai.svg`,GradientAI:`${n}gradientai.svg`,Triton:`${n}nvidia_triton.png`,Deepgram:`${n}deepgram.png`,ElevenLabs:`${n}elevenlabs.png`,"Fal AI":`${n}fal_ai.jpg`,"Voyage AI":`${n}voyage.webp`,"Jina AI":`${n}jina.png`,VolcEngine:`${n}volcengine.png`,DeepInfra:`${n}deepinfra.png`,"SAP Generative AI Hub":`${n}sap.png`},o=e=>{if(!e)return{logo:"",displayName:"-"};if("gemini"===e.toLowerCase()){let e="Google AI Studio";return{logo:i[e],displayName:e}}let l=Object.keys(s).find(l=>s[l].toLowerCase()===e.toLowerCase());if(!l)return{logo:"",displayName:e};let a=t[l];return{logo:i[a],displayName:a}},c=e=>{if("AI/ML API"===e)return"aiml/flux-pro/v1.1";if("Vertex AI (Anthropic, Gemini, etc.)"===e)return"gemini-pro";if("Anthropic"==e)return"claude-3-opus";if("Amazon Bedrock"==e)return"claude-3-opus";if("AWS SageMaker"==e)return"sagemaker/jumpstart-dft-meta-textgeneration-llama-2-7b";else if("Google AI Studio"==e)return"gemini-pro";else if("Azure AI Foundry (Studio)"==e)return"azure_ai/command-r-plus";else if("Azure"==e)return"my-deployment";else if("Oracle Cloud Infrastructure (OCI)"==e)return"oci/xai.grok-4";else if("Snowflake"==e)return"snowflake/mistral-7b";else if("Voyage AI"==e)return"voyage/";else if("Jina AI"==e)return"jina_ai/";else if("VolcEngine"==e)return"volcengine/<any-model-on-volcengine>";else if("DeepInfra"==e)return"deepinfra/<any-model-on-deepinfra>";else if("Fal AI"==e)return"fal_ai/fal-ai/flux-pro/v1.1-ultra";else if("RunwayML"==e)return"runwayml/gen4_turbo";else if("Watsonx"===e)return"watsonx/ibm/granite-3-3-8b-instruct";else return"gpt-3.5-turbo"},d=(e,l)=>{console.log(`Provider key: ${e}`);let a=s[e];console.log(`Provider mapped to: ${a}`);let r=[];return e&&"object"==typeof l&&(Object.entries(l).forEach(([e,l])=>{if(null!==l&&"object"==typeof l&&"litellm_provider"in l){let t=l.litellm_provider;(t===a||"string"==typeof t&&t.includes(a))&&r.push(e)}}),"Cohere"==e&&(console.log("Adding cohere chat models"),Object.entries(l).forEach(([e,l])=>{null!==l&&"object"==typeof l&&"litellm_provider"in l&&"cohere_chat"===l.litellm_provider&&r.push(e)})),"AWS SageMaker"==e&&(console.log("Adding sagemaker chat models"),Object.entries(l).forEach(([e,l])=>{null!==l&&"object"==typeof l&&"litellm_provider"in l&&"sagemaker_chat"===l.litellm_provider&&r.push(e)}))),r}},96130:(e,l,a)=>{"use strict";a.d(l,{Kp:()=>n.A,T2:()=>i.A,fu:()=>t.A,oz:()=>r.A,wb:()=>s.A});var r=a(2212),t=a(87927),s=a(56680),n=a(73806),i=a(79363)},97035:(e,l,a)=>{"use strict";a.d(l,{eP:()=>n,oL:()=>s,xP:()=>t});var r=a(19253);function t(e){try{let l=(0,r.s)(e);if(l&&"number"==typeof l.exp)return 1e3*l.exp<=Date.now();return!1}catch{return!0}}function s(e){if(!e)return null;try{return(0,r.s)(e)}catch{return null}}function n(e){return!!e&&null!==s(e)&&!t(e)}}},e=>{e.O(0,[3725,5884,1145,1909,1326,8536,8267,3146,9904,1291,2360,54,9285,5496,4394,8441,3794,7358],()=>e(e.s=19033)),_N_E=e.O()}]);