(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{2283:(e,t,s)=>{"use strict";s.d(t,{h:()=>a.A});var a=s(64628)},5963:(e,t,s)=>{"use strict";s.d(t,{A:()=>p});var a=s(95155);s(12115);var r=s(13121),l=s(2212),n=s(87927),i=s(56680),o=s(73806),d=s(79363),c=s(75892),m=s(50995),u=s(22164);let x=({href:e,className:t})=>(0,a.jsxs)("a",{href:e,target:"_blank",rel:"noopener noreferrer",title:"Open documentation in a new tab",className:function(...e){return e.filter(Boolean).join(" ")}("inline-flex items-center gap-2 rounded-xl border border-zinc-200 bg-white/80 px-3.5 py-2 text-sm font-medium text-zinc-700 shadow-sm","hover:bg-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 active:translate-y-[0.5px]",t),children:[(0,a.jsx)("span",{children:"API Reference Docs"}),(0,a.jsx)(u.A,{"aria-hidden":!0,className:"h-4 w-4 opacity-80"}),(0,a.jsx)("span",{className:"sr-only",children:"(opens in a new tab)"})]}),p=({proxySettings:e})=>{let t="<your_proxy_base_url>",s=e?.LITELLM_UI_API_DOC_BASE_URL;return s&&s.trim()?t=s:e?.PROXY_BASE_URL&&(t=e.PROXY_BASE_URL),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(r.A,{className:"gap-2 p-8 h-[80vh] w-full mt-2",children:(0,a.jsxs)("div",{className:"mb-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-2xl text-tremor-content-strong dark:text-dark-tremor-content-strong font-semibold",children:"OpenAI Compatible Proxy: API Reference"}),(0,a.jsx)(x,{className:"ml-3 shrink-0",href:"https://docs.litellm.ai/docs/proxy/user_keys"})]}),(0,a.jsxs)(c.A,{className:"mt-2 mb-2",children:["Silinex is OpenAI Compatible. This means your API Key works with the OpenAI SDK. Just replace the base_url to point to your silinex proxy. Example Below"," "]}),(0,a.jsxs)(n.A,{children:[(0,a.jsxs)(i.A,{children:[(0,a.jsx)(l.A,{children:"OpenAI Python SDK"}),(0,a.jsx)(l.A,{children:"LlamaIndex"}),(0,a.jsx)(l.A,{children:"Langchain Py"})]}),(0,a.jsxs)(d.A,{children:[(0,a.jsx)(o.A,{children:(0,a.jsx)(m.A,{language:"python",code:`import openai
client = openai.OpenAI(
    api_key="your_api_key",
    base_url="${t}" # Silinex Proxy is OpenAI compatible, Read More: https://docs.litellm.ai/docs/proxy/user_keys
)

response = client.chat.completions.create(
    model="gpt-3.5-turbo", # model to send to the proxy
    messages = [
        {
            "role": "user",
            "content": "this is a test request, write a short poem"
        }
    ]
)

print(response)`})}),(0,a.jsx)(o.A,{children:(0,a.jsx)(m.A,{language:"python",code:`import os, dotenv

from llama_index.llms import AzureOpenAI
from llama_index.embeddings import AzureOpenAIEmbedding
from llama_index import VectorStoreIndex, SimpleDirectoryReader, ServiceContext

llm = AzureOpenAI(
    engine="azure-gpt-3.5",               # model_name on silinex proxy
    temperature=0.0,
    azure_endpoint="${t}", # silinex proxy endpoint
    api_key="sk-1234",                    # silinex proxy API Key
    api_version="2023-07-01-preview",
)

embed_model = AzureOpenAIEmbedding(
    deployment_name="azure-embedding-model",
    azure_endpoint="${t}",
    api_key="sk-1234",
    api_version="2023-07-01-preview",
)

documents = SimpleDirectoryReader("llama_index_data").load_data()
service_context = ServiceContext.from_defaults(llm=llm, embed_model=embed_model)
index = VectorStoreIndex.from_documents(documents, service_context=service_context)

query_engine = index.as_query_engine()
response = query_engine.query("What did the author do growing up?")
print(response)`})}),(0,a.jsx)(o.A,{children:(0,a.jsx)(m.A,{language:"python",code:`from langchain.chat_models import ChatOpenAI
from langchain.prompts.chat import (
    ChatPromptTemplate,
    HumanMessagePromptTemplate,
    SystemMessagePromptTemplate,
)
from langchain.schema import HumanMessage, SystemMessage

chat = ChatOpenAI(
    openai_api_base="${t}",
    model = "gpt-3.5-turbo",
    temperature=0.1
)

messages = [
    SystemMessage(
        content="You are a helpful assistant that im using to make a test request to."
    ),
    HumanMessage(
        content="test from silinex. tell me why it's amazing in 1 sentence"
    ),
]
response = chat(messages)

print(response)`})})]})]})]})})})}},15997:(e,t,s)=>{"use strict";s.d(t,{A:()=>H});var a=s(95155),r=s(12115),l=s(34254),n=s(38983),i=s(42837),o=s(19602),d=s(88636),c=s(30489),m=s(96961),u=s(95517),x=s(8179),p=s(31556),h=s(95171),g=s(75892),y=s(96130),f=s(28436),j=s(8208),b=s(92982),v=s(45588),_=s(67667),A=s(12120),N=s(19113);let k=({accessToken:e,userRole:t,userID:s,modelData:l})=>{let[n,i]=(0,r.useState)({routerSettings:{},selectedStrategy:null,enableTagFiltering:!1}),[o,d]=(0,r.useState)([]),[c,m]=(0,r.useState)({}),[u,x]=(0,r.useState)({});return((0,r.useEffect)(()=>{e&&t&&s&&((0,f.getCallbacksCall)(e,s,t).then(e=>{console.log("callbacks",e);let t=e.router_settings;"model_group_retry_policy"in t&&delete t.model_group_retry_policy;let s=t.routing_strategy||null;i(e=>({...e,routerSettings:t,selectedStrategy:s}))}),(0,f.getRouterSettingsCall)(e).then(e=>{if(console.log("router settings from API",e),e.fields){let t={};e.fields.forEach(e=>{t[e.field_name]={ui_field_name:e.ui_field_name,field_description:e.field_description,options:e.options,link:e.link}}),m(t);let s=e.fields.find(e=>"routing_strategy"===e.field_name);s?.options&&d(s.options),e.routing_strategy_descriptions&&x(e.routing_strategy_descriptions);let a=e.fields.find(e=>"enable_tag_filtering"===e.field_name);a?.field_value!==null&&a?.field_value!==void 0&&i(e=>({...e,enableTagFiltering:a.field_value}))}}))},[e,t,s]),e)?(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(N.A,{value:n,onChange:i,routerFieldsMetadata:c,availableRoutingStrategies:o,routingStrategyDescriptions:u}),(0,a.jsxs)("div",{className:"border-t border-gray-200 pt-6 flex justify-end gap-3",children:[(0,a.jsx)(_.$,{variant:"secondary",size:"sm",onClick:()=>window.location.reload(),className:"text-sm",children:"Reset"}),(0,a.jsx)(_.$,{size:"sm",onClick:()=>{if(!e)return;let t=n.routerSettings;console.log("router_settings",t);let s=new Set(["allowed_fails","cooldown_time","num_retries","timeout","retry_after"]),a=new Set(["model_group_alias","retry_policy"]),r=Object.fromEntries(Object.entries({...t,enable_tag_filtering:n.enableTagFiltering}).map(([e,t])=>{if("routing_strategy_args"!==e&&"routing_strategy"!==e&&"enable_tag_filtering"!==e){let r=document.querySelector(`input[name="${e}"]`),l=((e,t,r)=>{if(void 0===t)return r;let l=t.trim();if("null"===l.toLowerCase())return null;if(s.has(e)){let e=Number(l);return Number.isNaN(e)?r:e}if(a.has(e)){if(""===l)return null;try{return JSON.parse(l)}catch{return r}}return"true"===l.toLowerCase()||"false"!==l.toLowerCase()&&l})(e,r?.value,t);return[e,l]}if("routing_strategy"===e)return[e,n.selectedStrategy];if("enable_tag_filtering"===e)return[e,n.enableTagFiltering];if("routing_strategy_args"===e&&"latency-based-routing"===n.selectedStrategy){let e={},t=document.querySelector('input[name="lowest_latency_buffer"]'),s=document.querySelector('input[name="ttl"]');return t?.value&&(e.lowest_latency_buffer=Number(t.value)),s?.value&&(e.ttl=Number(s.value)),console.log(`setRoutingStrategyArgs: ${e}`),["routing_strategy_args",e]}return null}).filter(e=>null!=e));console.log("updatedVariables",r);try{(0,f.setCallbacksCall)(e,{router_settings:r})}catch(e){A.Ay.fromBackend("Failed to update router settings: "+e)}A.Ay.success("router settings updated successfully")},className:"text-sm font-medium",children:"Save Changes"})]})]}):null};var w=s(75954),C=s(44817),S=s(14862),T=s(41326),I=s(22277),M=s(69285),D=s(66793),E=s(86019),P=s(87056),q=s(87278),L=s(22603),$=s(3373),F=s(99247);function R({open:e,onCancel:t,children:s}){return(0,a.jsx)($.A,{title:(0,a.jsx)("div",{className:"pb-4 border-b border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-800",children:[(0,a.jsx)("div",{className:"p-2 bg-indigo-50 rounded-lg",children:(0,a.jsx)(F.A,{className:"w-5 h-5 text-indigo-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-bold m-0",children:"Configure Model Fallbacks"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 font-normal m-0",children:"Manage multiple fallback chains for different models (up to 5 groups at a time)"})]})]})}),open:e,width:900,footer:null,onCancel:t,maskClosable:!1,className:"top-8",styles:{body:{padding:"24px"},header:{padding:"24px 24px 0 24px",border:"none"}},children:(0,a.jsx)("div",{className:"mt-6",children:s})})}var z=s(6761);function O({models:e,accessToken:t,value:s=[],onChange:l}){let[n,i]=(0,r.useState)(!1),[o,d]=(0,r.useState)([]),[c,m]=(0,r.useState)(0),[u,x]=(0,r.useState)(!1),[p,h]=(0,r.useState)([{id:"1",primaryModel:null,fallbackModels:[]}]);(0,r.useEffect)(()=>{n&&(h([{id:"1",primaryModel:null,fallbackModels:[]}]),m(e=>e+1))},[n]),(0,r.useEffect)(()=>{let e=async()=>{try{let e=await (0,L.Q)(t);console.log("Fetched models for fallbacks:",e),d(e)}catch(e){console.error("Error fetching model info for fallbacks:",e)}};n&&e()},[t,n]);let g=Array.from(new Set(o.map(e=>e.model_group))).sort(),y=()=>{i(!1),h([{id:"1",primaryModel:null,fallbackModels:[]}])},f=async()=>{let e=p.filter(e=>!e.primaryModel||0===e.fallbackModels.length);if(e.length>0)return void P.Ay.error(`Please complete configuration for all groups. ${e.length} group(s) incomplete.`);let t=[...s||[],...p.map(e=>({[e.primaryModel]:e.fallbackModels}))];if(l){x(!0);try{await l(t),A.Ay.success(`${p.length} fallback configuration(s) added successfully!`),y()}catch(e){console.error("Error saving fallbacks:",e)}finally{x(!1)}}else A.Ay.fromBackend("onChange callback not provided")};return(0,a.jsxs)("div",{children:[(0,a.jsx)(_.$,{className:"mx-auto",onClick:()=>i(!0),icon:()=>(0,a.jsx)("span",{className:"mr-1",children:"+"}),children:"Add Fallbacks"}),(0,a.jsxs)(R,{open:n,onCancel:y,children:[(0,a.jsx)(z.p,{groups:p,onGroupsChange:h,availableModels:g,maxFallbacks:10,maxGroups:5},c),p.length>0&&(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-6 mt-6 border-t border-gray-100",children:[(0,a.jsx)(q.Ay,{type:"default",onClick:y,disabled:u,children:"Cancel"}),(0,a.jsx)(q.Ay,{type:"default",onClick:f,disabled:0===p.length||u,loading:u,children:u?"Saving Configuration...":"Save All Configurations"})]})]})]})}let B="inline-flex items-center gap-2 px-2.5 py-1 rounded-md border border-gray-200 bg-gray-50 text-sm font-medium text-gray-800 shrink-0";async function Y(e,t){console.log=function(){};let s=window.location.origin,r=new M.Ay.OpenAI({apiKey:t,baseURL:s,dangerouslyAllowBrowser:!0});try{A.Ay.info("Testing fallback model response...");let t=await r.chat.completions.create({model:e,messages:[{role:"user",content:"Hi, this is a test message"}],mock_testing_fallbacks:!0});A.Ay.success((0,a.jsxs)("span",{children:["Test model=",(0,a.jsx)("strong",{children:e}),", received model=",(0,a.jsx)("strong",{children:t.model}),". See"," ",(0,a.jsx)("a",{href:"#",onClick:()=>window.open("https://docs.litellm.ai/docs/proxy/reliability","_blank"),style:{textDecoration:"underline",color:"blue"},children:"curl"})]}))}catch(e){A.Ay.fromBackend(`Error occurred while generating model response. Please try again. Error: ${e}`)}}let U=({accessToken:e,userRole:t,userID:s,modelData:l})=>{let[n,i]=(0,r.useState)({}),[d,g]=(0,r.useState)(!1),[y,j]=(0,r.useState)(null),[b,_]=(0,r.useState)(!1),{data:N}=(0,w.o)(),k=e=>null!=N&&"object"==typeof N&&e in N?N[e].litellm_provider??"":"";(0,r.useEffect)(()=>{e&&t&&s&&(0,f.getCallbacksCall)(e,s,t).then(e=>{console.log("callbacks",e);let t=e.router_settings;"model_group_retry_policy"in t&&delete t.model_group_retry_policy,i(t)})},[e,t,s]);let M=e=>{j(e),_(!0)},P=async()=>{if(!y||!e)return;let t=Object.keys(y)[0];if(!t)return;g(!0);let s=n.fallbacks.map(e=>{let s={...e};return t in s&&Array.isArray(s[t])&&delete s[t],s}).filter(e=>Object.keys(e).length>0),a={...n,fallbacks:s};try{await (0,f.setCallbacksCall)(e,{router_settings:a}),i(a),A.Ay.success("Router settings updated successfully")}catch(e){A.Ay.fromBackend("Failed to update router settings: "+e)}finally{g(!1),_(!1),j(null)}};if(!e)return null;let q=async a=>{if(!e)return;let r={...n,fallbacks:a};try{await (0,f.setCallbacksCall)(e,{router_settings:r}),i(r)}catch(a){throw A.Ay.fromBackend("Failed to update router settings: "+a),e&&t&&s&&(0,f.getCallbacksCall)(e,s,t).then(e=>{let t=e.router_settings;"model_group_retry_policy"in t&&delete t.model_group_retry_policy,i(t)}),a}},L=Array.isArray(n.fallbacks)&&n.fallbacks.length>0;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(O,{models:l?.data?l.data.map(e=>e.model_name):[],accessToken:e||"",value:n.fallbacks||[],onChange:q}),L?(0,a.jsxs)(c.A,{children:[(0,a.jsx)(x.A,{children:(0,a.jsxs)(h.A,{children:[(0,a.jsx)(p.A,{children:"Model Name"}),(0,a.jsx)(p.A,{children:"Fallbacks"}),(0,a.jsx)(p.A,{children:"Actions"})]})}),(0,a.jsx)(m.A,{children:n.fallbacks.map((t,s)=>Object.entries(t).map(([l,n])=>{let i;return(0,a.jsxs)(h.A,{children:[(0,a.jsx)(u.A,{className:"align-top",children:(i=k?.(l)??l,(0,a.jsxs)("span",{className:B,children:[(0,a.jsx)(E.v,{provider:i,className:"w-4 h-4 shrink-0"}),(0,a.jsx)("span",{children:l})]}))}),(0,a.jsx)(u.A,{className:"align-top",children:function(e,t,s){let l=Array.isArray(t)?t:[];if(0===l.length)return null;let n=({modelName:e})=>{let t=s?.(e)??e;return(0,a.jsxs)("span",{className:B,children:[(0,a.jsx)(E.v,{provider:t,className:"w-4 h-4 shrink-0"}),(0,a.jsx)("span",{children:e})]})};return(0,a.jsxs)("span",{className:"grid grid-cols-[auto_1fr] items-start gap-x-2 w-full min-w-0",children:[(0,a.jsx)("span",{className:"inline-flex items-center justify-center w-8 h-8 shrink-0 self-start text-blue-600","aria-hidden":!0,children:(0,a.jsx)(C.A,{className:"w-5 h-5 stroke-[2.5]"})}),(0,a.jsx)("span",{className:"flex flex-wrap items-start gap-1 min-w-0",children:l.map((e,t)=>(0,a.jsxs)(r.Fragment,{children:[t>0&&(0,a.jsx)(o.A,{icon:C.A,size:"xs",className:"shrink-0 text-gray-400"}),(0,a.jsx)(n,{modelName:e})]},e))})]})}(0,Array.isArray(n)?n:[],k)}),(0,a.jsxs)(u.A,{className:"align-top",children:[(0,a.jsx)(I.A,{title:"Test fallback",children:(0,a.jsx)(o.A,{icon:S.A,size:"sm",onClick:()=>Y(Object.keys(t)[0],e||""),className:"cursor-pointer hover:text-blue-600"})}),(0,a.jsx)(I.A,{title:"Delete fallback",children:(0,a.jsx)("span",{"data-testid":"delete-fallback-button",role:"button",tabIndex:0,onClick:()=>M(t),onKeyDown:e=>"Enter"===e.key&&M(t),className:"cursor-pointer inline-flex",children:(0,a.jsx)(o.A,{icon:v.A,size:"sm",className:"hover:text-red-600"})})})]})]},s.toString()+l)}))})]}):(0,a.jsx)("div",{className:"rounded-lg border border-gray-200 bg-gray-50 px-4 py-6 text-center",children:(0,a.jsx)(T.A.Text,{type:"secondary",children:"No fallbacks configured. Add fallbacks to automatically try another model when the primary fails."})}),(0,a.jsx)(D.A,{isOpen:b,title:"Delete Fallback?",message:"Are you sure you want to delete this fallback? This action cannot be undone.",resourceInformationTitle:"Fallback Information",resourceInformation:[{label:"Model Name",value:y?Object.keys(y)[0]:"",code:!0}],onCancel:()=>{_(!1),j(null)},onOk:P,confirmLoading:d})]})},H=({accessToken:e,userRole:t,userID:s,modelData:_})=>{let[A,N]=(0,r.useState)([]);(0,r.useEffect)(()=>{e&&(0,f.getGeneralSettingsCall)(e).then(e=>{N(e)})},[e]);let w=(e,t)=>{N(A.map(s=>s.field_name===e?{...s,field_value:t}:s))};return e?(0,a.jsx)("div",{className:"w-full",children:(0,a.jsxs)(y.fu,{className:"h-[75vh] w-full",children:[(0,a.jsxs)(y.wb,{variant:"line",defaultValue:"1",className:"px-8 pt-4",children:[(0,a.jsx)(y.oz,{value:"1",children:"Loadbalancing"}),(0,a.jsx)(y.oz,{value:"2",children:"Fallbacks"}),(0,a.jsx)(y.oz,{value:"3",children:"General"})]}),(0,a.jsxs)(y.T2,{className:"px-8 py-6",children:[(0,a.jsx)(y.Kp,{children:(0,a.jsx)(k,{accessToken:e,userRole:t,userID:s,modelData:_})}),(0,a.jsx)(y.Kp,{children:(0,a.jsx)(U,{accessToken:e,userRole:t,userID:s,modelData:_})}),(0,a.jsx)(y.Kp,{children:(0,a.jsx)(i.A,{children:(0,a.jsxs)(c.A,{children:[(0,a.jsx)(x.A,{children:(0,a.jsxs)(h.A,{children:[(0,a.jsx)(p.A,{children:"Setting"}),(0,a.jsx)(p.A,{children:"Value"}),(0,a.jsx)(p.A,{children:"Status"}),(0,a.jsx)(p.A,{children:"Action"})]})}),(0,a.jsx)(m.A,{children:A.filter(e=>"TypedDictionary"!==e.field_type).map((t,s)=>(0,a.jsxs)(h.A,{children:[(0,a.jsxs)(u.A,{children:[(0,a.jsx)(g.A,{children:t.field_name}),(0,a.jsx)("p",{style:{fontSize:"0.65rem",color:"#808080",fontStyle:"italic"},className:"mt-1",children:t.field_description})]}),(0,a.jsx)(u.A,{children:"Integer"==t.field_type?(0,a.jsx)(j.A,{step:1,value:t.field_value,onChange:e=>w(t.field_name,e)}):"Boolean"==t.field_type?(0,a.jsx)(d.A,{checked:!0===t.field_value||"true"===t.field_value,onChange:e=>w(t.field_name,e)}):null}),(0,a.jsx)(u.A,{children:!0==t.stored_in_db?(0,a.jsx)(l.A,{icon:b.A,className:"text-white",children:"In DB"}):!1==t.stored_in_db?(0,a.jsx)(l.A,{className:"text-gray bg-white outline",children:"In Config"}):(0,a.jsx)(l.A,{className:"text-gray bg-white outline",children:"Not Set"})}),(0,a.jsxs)(u.A,{children:[(0,a.jsx)(n.A,{onClick:()=>((t,s)=>{if(!e)return;let a=A[s].field_value;if(null!=a&&void 0!=a)try{(0,f.updateConfigFieldSetting)(e,t,a);let s=A.map(e=>e.field_name===t?{...e,stored_in_db:!0}:e);N(s)}catch(e){}})(t.field_name,s),children:"Update"}),(0,a.jsx)(o.A,{icon:v.A,color:"red",onClick:()=>((t,s)=>{if(e)try{(0,f.deleteConfigFieldSetting)(e,t);let s=A.map(e=>e.field_name===t?{...e,stored_in_db:null,field_value:null}:e);N(s)}catch(e){}})(t.field_name,0),children:"Reset"})]})]},s))})]})})})]})]})}):null}},20803:(e,t,s)=>{"use strict";s.d(t,{A:()=>F});var a=s(95155),r=s(38983),l=s(42837),n=s(2212),i=s(87927),o=s(56680),d=s(73806),c=s(79363),m=s(30489),u=s(96961),x=s(95517),p=s(8179),h=s(31556),g=s(95171),y=s(75892),f=s(12115),j=s(27397),b=s(66793),v=s(82426),_=s(12120),A=s(28436),N=s(95875),k=s(56691),w=s(20645),C=s(34487),S=s(25387),T=s(3373),I=s(8208),M=s(23060),D=s(87278);let E=({isModalVisible:e,accessToken:t,setIsModalVisible:s,setBudgetList:r})=>{let[l]=S.A.useForm(),n=async e=>{if(null!=t&&void 0!=t)try{_.Ay.info("Making API Call");let s=await (0,A.budgetCreateCall)(t,e);console.log("key create Response:",s),r(e=>e?[...e,s]:[s]),_.Ay.success("Budget Created"),l.resetFields()}catch(e){console.error("Error creating the key:",e),_.Ay.fromBackend(`Error creating the key: ${e}`)}};return(0,a.jsx)(T.A,{title:"Create Budget",open:e,width:800,footer:null,onOk:()=>{s(!1),l.resetFields()},onCancel:()=>{s(!1),l.resetFields()},children:(0,a.jsxs)(S.A,{form:l,onFinish:n,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S.A.Item,{label:"Budget ID",name:"budget_id",rules:[{required:!0,message:"Please input a human-friendly name for the budget"}],help:"A human-friendly name for the budget",children:(0,a.jsx)(C.A,{placeholder:""})}),(0,a.jsx)(S.A.Item,{label:"Max Tokens per minute",name:"tpm_limit",help:"Default is model limit.",children:(0,a.jsx)(I.A,{step:1,precision:2,width:200})}),(0,a.jsx)(S.A.Item,{label:"Max Requests per minute",name:"rpm_limit",help:"Default is model limit.",children:(0,a.jsx)(I.A,{step:1,precision:2,width:200})}),(0,a.jsxs)(N.h,{className:"mt-20 mb-8",children:[(0,a.jsx)(w.A,{children:(0,a.jsx)("b",{children:"Optional Settings"})}),(0,a.jsxs)(k.A,{children:[(0,a.jsx)(S.A.Item,{label:"æœ€å¤§é¢„ç®—",name:"max_budget",children:(0,a.jsx)(I.A,{step:.01,precision:2,width:200})}),(0,a.jsx)(S.A.Item,{className:"mt-8",label:"Reset Budget",name:"budget_duration",children:(0,a.jsxs)(M.A,{defaultValue:null,placeholder:"n/a",children:[(0,a.jsx)(M.A.Option,{value:"24h",children:"daily"}),(0,a.jsx)(M.A.Option,{value:"7d",children:"weekly"}),(0,a.jsx)(M.A.Option,{value:"30d",children:"monthly"})]})})]})]})]}),(0,a.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,a.jsx)(D.Ay,{htmlType:"submit",children:"Create Budget"})})]})})},P=({isModalVisible:e,accessToken:t,setIsModalVisible:s,setBudgetList:r,existingBudget:l,handleUpdateCall:n})=>{console.log("existingBudget",l);let[i]=S.A.useForm();(0,f.useEffect)(()=>{i.setFieldsValue(l)},[l,i]);let o=async e=>{if(null!=t&&void 0!=t)try{_.Ay.info("Making API Call"),s(!0);let a=await (0,A.budgetUpdateCall)(t,e);r(e=>e?[...e,a]:[a]),_.Ay.success("Budget Updated"),i.resetFields(),n()}catch(e){console.error("Error creating the key:",e),_.Ay.fromBackend(`Error creating the key: ${e}`)}};return(0,a.jsx)(T.A,{title:"Edit Budget",open:e,width:800,footer:null,onOk:()=>{s(!1),i.resetFields()},onCancel:()=>{s(!1),i.resetFields()},children:(0,a.jsxs)(S.A,{form:i,onFinish:o,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",initialValues:l,children:[(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S.A.Item,{label:"Budget ID",name:"budget_id",rules:[{required:!0,message:"Please input a human-friendly name for the budget"}],help:"A human-friendly name for the budget",children:(0,a.jsx)(C.A,{placeholder:""})}),(0,a.jsx)(S.A.Item,{label:"Max Tokens per minute",name:"tpm_limit",help:"Default is model limit.",children:(0,a.jsx)(I.A,{step:1,precision:2,width:200})}),(0,a.jsx)(S.A.Item,{label:"Max Requests per minute",name:"rpm_limit",help:"Default is model limit.",children:(0,a.jsx)(I.A,{step:1,precision:2,width:200})}),(0,a.jsxs)(N.h,{className:"mt-20 mb-8",children:[(0,a.jsx)(w.A,{children:(0,a.jsx)("b",{children:"Optional Settings"})}),(0,a.jsxs)(k.A,{children:[(0,a.jsx)(S.A.Item,{label:"æœ€å¤§é¢„ç®—",name:"max_budget",children:(0,a.jsx)(I.A,{step:.01,precision:2,width:200})}),(0,a.jsx)(S.A.Item,{className:"mt-8",label:"Reset Budget",name:"budget_duration",children:(0,a.jsxs)(M.A,{defaultValue:null,placeholder:"n/a",children:[(0,a.jsx)(M.A.Option,{value:"24h",children:"daily"}),(0,a.jsx)(M.A.Option,{value:"7d",children:"weekly"}),(0,a.jsx)(M.A.Option,{value:"30d",children:"monthly"})]})})]})]})]}),(0,a.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,a.jsx)(D.Ay,{htmlType:"submit",children:"Save"})})]})})},q=`
curl -X POST --location '<your_proxy_base_url>/end_user/new' \\

-H 'Authorization: Bearer <your-master-key>' \\

-H 'Content-Type: application/json' \\

-d '{"user_id": "my-customer-id', "budget_id": "<BUDGET_ID>"}' # ðŸ‘ˆ KEY CHANGE

`,L=`
curl -X POST --location '<your_proxy_base_url>/chat/completions' \\

-H 'Authorization: Bearer <your-master-key>' \\

-H 'Content-Type: application/json' \\

-d '{
  "model": "gpt-3.5-turbo',
  "messages":[{"role": "user", "content": "Hey, how's it going?"}],
  "user": "my-customer-id"
}' # ðŸ‘ˆ KEY CHANGE

`,$=`from openai import OpenAI
client = OpenAI(
  base_url="<your_proxy_base_url>",
  api_key="<your_proxy_key>"
)

completion = client.chat.completions.create(
  model="gpt-3.5-turbo",
  messages=[
    {"role": "system", "content": "You are a helpful assistant."},
    {"role": "user", "content": "Hello!"}
  ],
  user="my-customer-id"
)

print(completion.choices[0].message)`,F=({accessToken:e})=>{let[t,s]=(0,f.useState)(!1),[N,k]=(0,f.useState)(!1),[w,C]=(0,f.useState)(null),[S,T]=(0,f.useState)([]),[I,M]=(0,f.useState)(!1),[D,F]=(0,f.useState)(!1);(0,f.useEffect)(()=>{e&&(0,A.getBudgetList)(e).then(e=>{T(e)})},[e]);let R=async t=>{null!=e&&(C(t),k(!0))},z=async()=>{if(w&&null!=e){M(!0);try{await (0,A.budgetDeleteCall)(e,w.budget_id),_.Ay.success("Budget deleted."),await O()}catch(e){console.error("Error deleting budget:",e),"function"==typeof _.Ay.fromBackend?_.Ay.fromBackend("Failed to delete budget"):_.Ay.info("Failed to delete budget")}finally{M(!1),F(!1),C(null)}}},O=async()=>{null!=e&&(0,A.getBudgetList)(e).then(e=>{T(e)})};return(0,a.jsxs)("div",{className:"w-full mx-auto flex-auto overflow-y-auto m-8 p-2",children:[(0,a.jsx)(r.A,{size:"sm",variant:"primary",className:"mb-2",onClick:()=>s(!0),children:"+ Create Budget"}),(0,a.jsxs)(i.A,{children:[(0,a.jsxs)(o.A,{children:[(0,a.jsx)(n.A,{children:"Budgets"}),(0,a.jsx)(n.A,{children:"Examples"})]}),(0,a.jsxs)(c.A,{children:[(0,a.jsx)(d.A,{children:(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)(E,{accessToken:e,isModalVisible:t,setIsModalVisible:s,setBudgetList:T}),w&&(0,a.jsx)(P,{accessToken:e,isModalVisible:N,setIsModalVisible:k,setBudgetList:T,existingBudget:w,handleUpdateCall:O}),(0,a.jsxs)(l.A,{children:[(0,a.jsx)(y.A,{children:"Create a budget to assign to customers."}),(0,a.jsxs)(m.A,{children:[(0,a.jsx)(p.A,{children:(0,a.jsxs)(g.A,{children:[(0,a.jsx)(h.A,{children:"Budget ID"}),(0,a.jsx)(h.A,{children:"Max Budget"}),(0,a.jsx)(h.A,{children:"TPM"}),(0,a.jsx)(h.A,{children:"RPM"})]})}),(0,a.jsx)(u.A,{children:S.slice().sort((e,t)=>new Date(t.updated_at).getTime()-new Date(e.updated_at).getTime()).map((e,t)=>(0,a.jsxs)(g.A,{children:[(0,a.jsx)(x.A,{children:e.budget_id}),(0,a.jsx)(x.A,{children:e.max_budget?e.max_budget:"n/a"}),(0,a.jsx)(x.A,{children:e.tpm_limit?e.tpm_limit:"n/a"}),(0,a.jsx)(x.A,{children:e.rpm_limit?e.rpm_limit:"n/a"}),(0,a.jsx)(v.A,{variant:"Edit",tooltipText:"Edit budget",onClick:()=>R(e),dataTestId:"edit-budget-button"}),(0,a.jsx)(v.A,{variant:"Delete",tooltipText:"Delete budget",onClick:()=>{C(e),F(!0)},dataTestId:"delete-budget-button"})]},t))})]})]}),(0,a.jsx)(b.A,{isOpen:D,title:"Delete Budget?",message:"Are you sure you want to delete this budget? This action cannot be undone.",resourceInformationTitle:"Budget Information",resourceInformation:[{label:"Budget ID",value:w?.budget_id,code:!0},{label:"Max Budget",value:w?.max_budget},{label:"TPM",value:w?.tpm_limit},{label:"RPM",value:w?.rpm_limit}],onCancel:()=>{F(!1)},onOk:z,confirmLoading:I})]})}),(0,a.jsx)(d.A,{children:(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)(y.A,{className:"text-base",children:"How to use budget id"}),(0,a.jsxs)(i.A,{children:[(0,a.jsxs)(o.A,{children:[(0,a.jsx)(n.A,{children:"Assign Budget to Customer"}),(0,a.jsx)(n.A,{children:"Test it (Curl)"}),(0,a.jsx)(n.A,{children:"Test it (OpenAI SDK)"})]}),(0,a.jsxs)(c.A,{children:[(0,a.jsx)(d.A,{children:(0,a.jsx)(j.A,{language:"bash",children:q})}),(0,a.jsx)(d.A,{children:(0,a.jsx)(j.A,{language:"bash",children:L})}),(0,a.jsx)(d.A,{children:(0,a.jsx)(j.A,{language:"python",children:$})})]})]})]})})]})]})]})}},35222:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var a=s(95155),r=s(12115),l=s(23745),n=s(89270),i=s(75266),o=s(28436),d=s(12120);let c=({userID:e,userRole:t,accessToken:s})=>{let{logoUrl:c,setLogoUrl:m,faviconUrl:u,setFaviconUrl:x}=(0,n.D)(),[p,h]=(0,r.useState)(""),[g,y]=(0,r.useState)(""),[f,j]=(0,r.useState)(!1);(0,r.useEffect)(()=>{s&&b()},[s]);let b=async()=>{try{let e=(0,o.getProxyBaseUrl)(),t=e?`${e}/get/ui_theme_settings`:"/get/ui_theme_settings",a=await fetch(t,{method:"GET",headers:{[(0,o.getGlobalLitellmHeaderName)()]:`Bearer ${s}`,"Content-Type":"application/json"}});if(a.ok){let e=await a.json();h(e.values?.logo_url||""),y(e.values?.favicon_url||""),m(e.values?.logo_url||null),x(e.values?.favicon_url||null)}}catch(e){console.error("Error fetching theme settings:",e)}},v=async()=>{j(!0);try{let e=(0,o.getProxyBaseUrl)(),t=e?`${e}/update/ui_theme_settings`:"/update/ui_theme_settings";if((await fetch(t,{method:"PATCH",headers:{[(0,o.getGlobalLitellmHeaderName)()]:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({logo_url:p||null,favicon_url:g||null})})).ok)d.Ay.success("Theme settings updated successfully!"),m(p||null),x(g||null);else throw Error("Failed to update settings")}catch(e){console.error("Error updating theme settings:",e),d.Ay.fromBackend("Failed to update theme settings")}finally{j(!1)}},_=async()=>{h(""),y(""),m(null),x(null),j(!0);try{let e=(0,o.getProxyBaseUrl)(),t=e?`${e}/update/ui_theme_settings`:"/update/ui_theme_settings";if((await fetch(t,{method:"PATCH",headers:{[(0,o.getGlobalLitellmHeaderName)()]:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({logo_url:null,favicon_url:null})})).ok)d.Ay.success("Theme settings reset to default!");else throw Error("Failed to reset")}catch(e){console.error("Error resetting theme settings:",e),d.Ay.fromBackend("Failed to reset theme settings")}finally{j(!1)}};return s?(0,a.jsxs)("div",{className:"w-full mx-auto max-w-4xl px-6 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)(l.hE,{className:"text-2xl font-bold mb-2",children:"UI Theme Customization"}),(0,a.jsx)(l.EY,{className:"text-gray-600",children:"Customize your Silinex admin dashboard with a custom logo and favicon."})]}),(0,a.jsx)(l.Zp,{className:"shadow-sm p-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(l.EY,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Custom Logo URL"}),(0,a.jsx)(l.ks,{placeholder:`https://example.com/logo.svg (default: ${i.Il})`,value:p,onValueChange:e=>{h(e),m(e||null)},className:"w-full"}),(0,a.jsx)(l.EY,{className:"text-xs text-gray-500 mt-1",children:"Enter a URL for your custom logo or leave empty for default"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l.EY,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Custom Favicon URL"}),(0,a.jsx)(l.ks,{placeholder:"https://example.com/favicon.ico",value:g,onValueChange:e=>{y(e),x(e||null)},className:"w-full"}),(0,a.jsx)(l.EY,{className:"text-xs text-gray-500 mt-1",children:"Enter a URL for your custom favicon (.ico, .png, or .svg) or leave empty for default"})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)(l.$n,{onClick:v,loading:f,disabled:f,color:"indigo",children:"Save Changes"}),(0,a.jsx)(l.$n,{onClick:_,loading:f,disabled:f,variant:"secondary",color:"gray",children:"Reset to Default"})]})]})})]}):null}},41482:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>aV});var a=s(95155),r=s(5963),l=s(28700),n=s(28436),i=s(42696),o=s(12115);let d=({setPage:e,defaultSelectedKey:t,sidebarCollapsed:s})=>{let{accessToken:r}=(0,i.A)(),[d,c]=(0,o.useState)(null);return(0,o.useEffect)(()=>{(async()=>{if(!r)return console.log("[SidebarProvider] No access token, skipping UI settings fetch");try{console.log("[SidebarProvider] Fetching UI settings from /get/ui_settings");let e=await (0,n.getUISettings)(r);console.log("[SidebarProvider] UI settings response:",e),e?.values?.enabled_ui_pages_internal_users!==void 0?(console.log("[SidebarProvider] Setting enabled pages:",e.values.enabled_ui_pages_internal_users),c(e.values.enabled_ui_pages_internal_users)):console.log("[SidebarProvider] No enabled_ui_pages_internal_users in response (all pages visible by default)")}catch(e){console.error("[SidebarProvider] Failed to fetch UI settings:",e)}})()},[r]),(0,a.jsx)(l.A,{setPage:e,defaultSelectedKey:t,collapsed:s,enabledPagesInternalUsers:d})};var c=s(6675),m=s(34749),u=s(67382),x=s(67667),p=s(3373),h=s(26290),g=s(25387),y=s(87056),f=s(23060),j=s(7339),b=s(48849),v=s(91808),_=s(55895),A=s(73504),N=s(19910),k=s(63003),w=s(35120),C=s(87525),S=s(10639),T=s(16989),I=s(87278),M=s(73896),D=s(22864);let E={basic:{key:"basic",title:"Basic Information",defaultExpanded:!0,fields:[{name:"name",label:"Display Name",type:"text",required:!0,placeholder:"e.g., Customer Support Agent"},{name:"description",label:"Description",type:"textarea",required:!0,placeholder:"Describe what this agent does...",rows:3},{name:"url",label:"URL",type:"url",required:!1,placeholder:"http://localhost:9999/",tooltip:"Base URL where the agent is hosted (optional)"},{name:"version",label:"Version",type:"text",placeholder:"1.0.0",defaultValue:"1.0.0"},{name:"protocolVersion",label:"Protocol Version",type:"text",placeholder:"1.0",defaultValue:"1.0"}]},skills:{key:"skills",title:"Skills",fields:[{name:"skills",label:"Skills",type:"list",defaultValue:[]}]},capabilities:{key:"capabilities",title:"Capabilities",fields:[{name:"streaming",label:"Streaming",type:"switch",defaultValue:!1},{name:"pushNotifications",label:"Push Notifications",type:"switch"},{name:"stateTransitionHistory",label:"State Transition History",type:"switch"}]},optional:{key:"optional",title:"Optional Settings",fields:[{name:"iconUrl",label:"Icon URL",type:"url",placeholder:"https://example.com/icon.png"},{name:"documentationUrl",label:"Documentation URL",type:"url",placeholder:"https://docs.example.com"},{name:"supportsAuthenticatedExtendedCard",label:"Supports Authenticated Extended Card",type:"switch"}]},litellm:{key:"litellm",title:"Silinex Parameters",fields:[{name:"model",label:"Model (Optional)",type:"text"},{name:"make_public",label:"Make Public",type:"switch"}]},cost:{key:"cost",title:"Cost Configuration",fields:[{name:"cost_per_query",label:"Cost Per Query (\xa5)",type:"text",placeholder:"0.0",tooltip:"Fixed cost per query"},{name:"input_cost_per_token",label:"Input Cost Per Token (\xa5)",type:"text",placeholder:"0.000001",tooltip:"Cost per input token"},{name:"output_cost_per_token",label:"Output Cost Per Token (\xa5)",type:"text",placeholder:"0.000002",tooltip:"Cost per output token"}]}},P="Skill ID",q=!0,L="e.g., hello_world",$="Skill Name",F=!0,R="e.g., Returns hello world",z="Description",O=!0,B="What this skill does",Y=2,U="Tags (comma-separated)",H=!0,V="e.g., hello world, greeting",G="Examples (comma-separated)",K="e.g., hi, hello world",W=(e,t)=>{let s={agent_name:e.agent_name,agent_card_params:{protocolVersion:e.protocolVersion||"1.0",name:e.name||e.agent_name,description:e.description||"",url:e.url||"",version:e.version||"1.0.0",defaultInputModes:t?.agent_card_params?.defaultInputModes||["text"],defaultOutputModes:t?.agent_card_params?.defaultOutputModes||["text"],capabilities:{streaming:!0===e.streaming,...void 0!==e.pushNotifications&&{pushNotifications:e.pushNotifications},...void 0!==e.stateTransitionHistory&&{stateTransitionHistory:e.stateTransitionHistory}},skills:e.skills||[],...e.iconUrl&&{iconUrl:e.iconUrl},...e.documentationUrl&&{documentationUrl:e.documentationUrl},...void 0!==e.supportsAuthenticatedExtendedCard&&{supportsAuthenticatedExtendedCard:e.supportsAuthenticatedExtendedCard}}},a={};return e.model&&(a.model=e.model),void 0!==e.make_public&&(a.make_public=e.make_public),e.cost_per_query&&(a.cost_per_query=parseFloat(e.cost_per_query)),e.input_cost_per_token&&(a.input_cost_per_token=parseFloat(e.input_cost_per_token)),e.output_cost_per_token&&(a.output_cost_per_token=parseFloat(e.output_cost_per_token)),Object.keys(a).length>0&&(s.litellm_params=a),s},J=e=>{let t=e.agent_card_params?.skills?.map(e=>({...e,tags:e.tags,examples:e.examples||[]}))||[];return{agent_name:e.agent_name,name:e.agent_card_params?.name,description:e.agent_card_params?.description,url:e.agent_card_params?.url,version:e.agent_card_params?.version,protocolVersion:e.agent_card_params?.protocolVersion,streaming:e.agent_card_params?.capabilities?.streaming,pushNotifications:e.agent_card_params?.capabilities?.pushNotifications,stateTransitionHistory:e.agent_card_params?.capabilities?.stateTransitionHistory,skills:t,iconUrl:e.agent_card_params?.iconUrl,documentationUrl:e.agent_card_params?.documentationUrl,supportsAuthenticatedExtendedCard:e.agent_card_params?.supportsAuthenticatedExtendedCard,model:e.litellm_params?.model,make_public:e.litellm_params?.make_public,cost_per_query:e.litellm_params?.cost_per_query,input_cost_per_token:e.litellm_params?.input_cost_per_token,output_cost_per_token:e.litellm_params?.output_cost_per_token}},Q=()=>(0,a.jsx)(a.Fragment,{children:E.cost.fields.map(e=>(0,a.jsx)(g.A.Item,{label:e.label,name:e.name,tooltip:e.tooltip,children:(0,a.jsx)(v.A,{placeholder:e.placeholder,type:"number",step:"0.000001"})},e.name))}),{Panel:X}=S.A,Z=({showAgentName:e=!0,visiblePanels:t})=>{let s=e=>!t||t.includes(e);return(0,a.jsxs)(a.Fragment,{children:[e&&(0,a.jsx)(g.A.Item,{label:"Agent Name",name:"agent_name",rules:[{required:!0,message:"Please enter a unique agent name"}],tooltip:"Unique identifier for the agent",children:(0,a.jsx)(v.A,{placeholder:"e.g., customer-support-agent"})}),(0,a.jsxs)(S.A,{defaultActiveKey:["basic"],style:{marginBottom:16},children:[s(E.basic.key)&&(0,a.jsx)(X,{header:`${E.basic.title} (Required)`,children:E.basic.fields.map(e=>(0,a.jsx)(g.A.Item,{label:e.label,name:e.name,rules:e.required?[{required:!0,message:`Please enter ${e.label.toLowerCase()}`}]:void 0,tooltip:e.tooltip,children:"textarea"===e.type?(0,a.jsx)(v.A.TextArea,{rows:e.rows,placeholder:e.placeholder}):(0,a.jsx)(v.A,{placeholder:e.placeholder})},e.name))},E.basic.key),s(E.skills.key)&&(0,a.jsx)(X,{header:`${E.skills.title} (Required)`,children:(0,a.jsx)(g.A.List,{name:"skills",children:(e,{add:t,remove:s})=>(0,a.jsxs)(a.Fragment,{children:[e.map(e=>(0,a.jsxs)("div",{style:{marginBottom:16,padding:16,border:"1px solid #d9d9d9",borderRadius:4},children:[(0,a.jsx)(g.A.Item,{...e,label:P,name:[e.name,"id"],rules:[{required:q,message:"Required"}],children:(0,a.jsx)(v.A,{placeholder:L})}),(0,a.jsx)(g.A.Item,{...e,label:$,name:[e.name,"name"],rules:[{required:F,message:"Required"}],children:(0,a.jsx)(v.A,{placeholder:R})}),(0,a.jsx)(g.A.Item,{...e,label:z,name:[e.name,"description"],rules:[{required:O,message:"Required"}],children:(0,a.jsx)(v.A.TextArea,{rows:Y,placeholder:B})}),(0,a.jsx)(g.A.Item,{...e,label:U,name:[e.name,"tags"],rules:[{required:H,message:"Required"}],getValueFromEvent:e=>e.target.value.split(",").map(e=>e.trim()),getValueProps:e=>({value:Array.isArray(e)?e.join(", "):e}),children:(0,a.jsx)(v.A,{placeholder:V})}),(0,a.jsx)(g.A.Item,{...e,label:G,name:[e.name,"examples"],getValueFromEvent:e=>e.target.value.split(",").map(e=>e.trim()).filter(e=>e),getValueProps:e=>({value:Array.isArray(e)?e.join(", "):""}),children:(0,a.jsx)(v.A,{placeholder:K})}),(0,a.jsx)(I.Ay,{type:"link",danger:!0,onClick:()=>s(e.name),icon:(0,a.jsx)(M.A,{}),children:"Remove Skill"})]},e.key)),(0,a.jsx)(I.Ay,{type:"dashed",onClick:()=>t(),icon:(0,a.jsx)(D.A,{}),style:{width:"100%"},children:"Add Skill"})]})})},E.skills.key),s(E.capabilities.key)&&(0,a.jsx)(X,{header:E.capabilities.title,children:E.capabilities.fields.map(e=>(0,a.jsx)(g.A.Item,{label:e.label,name:e.name,valuePropName:"checked",children:(0,a.jsx)(T.A,{})},e.name))},E.capabilities.key),s(E.optional.key)&&(0,a.jsx)(X,{header:E.optional.title,children:E.optional.fields.map(e=>(0,a.jsx)(g.A.Item,{label:e.label,name:e.name,valuePropName:"switch"===e.type?"checked":void 0,children:"switch"===e.type?(0,a.jsx)(T.A,{}):(0,a.jsx)(v.A,{placeholder:e.placeholder})},e.name))},E.optional.key),s(E.cost.key)&&(0,a.jsx)(X,{header:E.cost.title,children:(0,a.jsx)(Q,{})},E.cost.key),s(E.litellm.key)&&(0,a.jsx)(X,{header:E.litellm.title,children:E.litellm.fields.map(e=>(0,a.jsx)(g.A.Item,{label:e.label,name:e.name,valuePropName:"switch"===e.type?"checked":void 0,children:"switch"===e.type?(0,a.jsx)(T.A,{}):(0,a.jsx)(v.A,{placeholder:e.placeholder})},e.name))},E.litellm.key)]})]})},{Panel:ee}=S.A,et=(e,t)=>{let s={...t.litellm_params_template||{}};for(let a of t.credential_fields){let t=e[a.key];t&&!1!==a.include_in_litellm_params&&(s[a.key]=t)}if(e.cost_per_query&&(s.cost_per_query=parseFloat(e.cost_per_query)),e.input_cost_per_token&&(s.input_cost_per_token=parseFloat(e.input_cost_per_token)),e.output_cost_per_token&&(s.output_cost_per_token=parseFloat(e.output_cost_per_token)),t.model_template){let a=t.model_template;for(let s of t.credential_fields){let t=`{${s.key}}`;a.includes(t)&&e[s.key]&&(a=a.replace(t,e[s.key]))}s.model=a}return{agent_name:e.agent_name,agent_card_params:{protocolVersion:"1.0",name:e.display_name||e.agent_name,description:e.description||`${t.agent_type_display_name} agent`,url:e.api_base||"",version:"1.0.0",defaultInputModes:["text"],defaultOutputModes:["text"],capabilities:{streaming:!0},skills:[{id:"chat",name:"Chat",description:"General chat capability",tags:["chat","conversation"]}]},litellm_params:s}},es=({agentTypeInfo:e})=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.A.Item,{label:"Agent Name",name:"agent_name",rules:[{required:!0,message:"Please enter a unique agent name"}],tooltip:"Unique identifier for the agent",children:(0,a.jsx)(v.A,{placeholder:"e.g., my-langgraph-agent"})}),(0,a.jsx)(g.A.Item,{label:"Description",name:"description",tooltip:"Brief description of what this agent does",children:(0,a.jsx)(v.A.TextArea,{rows:2,placeholder:"Describe what this agent does..."})}),e.credential_fields.map(e=>(0,a.jsx)(g.A.Item,{label:e.label,name:e.key,rules:e.required?[{required:!0,message:`Please enter ${e.label}`}]:void 0,tooltip:e.tooltip,initialValue:e.default_value,children:"password"===e.field_type?(0,a.jsx)(v.A.Password,{placeholder:e.placeholder||""}):"textarea"===e.field_type?(0,a.jsx)(v.A.TextArea,{rows:3,placeholder:e.placeholder||""}):"select"===e.field_type&&e.options?(0,a.jsx)(f.A,{placeholder:e.placeholder||"",children:e.options.map(e=>(0,a.jsx)(f.A.Option,{value:e,children:e},e))}):(0,a.jsx)(v.A,{placeholder:e.placeholder||""})},e.key)),(0,a.jsx)(S.A,{style:{marginBottom:16},children:(0,a.jsx)(ee,{header:E.cost.title,children:(0,a.jsx)(Q,{})},E.cost.key)})]}),{Step:ea}=h.A,er="custom",el=({visible:e,onClose:t,accessToken:s,onSuccess:r})=>{let l,i,[d]=g.A.useForm(),[c,m]=(0,o.useState)(0),[u,S]=(0,o.useState)(!1),[T,I]=(0,o.useState)("a2a"),[M,D]=(0,o.useState)([]),[P,q]=(0,o.useState)(!1),[L,$]=(0,o.useState)("create_new"),[F,R]=(0,o.useState)(""),[z,O]=(0,o.useState)([]),[B,Y]=(0,o.useState)([]),[U,H]=(0,o.useState)(null),[V,G]=(0,o.useState)(!1),[K,J]=(0,o.useState)(""),[Q,X]=(0,o.useState)(null),[ee,el]=(0,o.useState)(null);(0,o.useEffect)(()=>{(async()=>{q(!0);try{let e=await (0,n.getAgentCreateMetadata)();D(e)}catch(e){console.error("Error fetching agent metadata:",e)}finally{q(!1)}})()},[]),(0,o.useEffect)(()=>{1===c&&s&&0===B.length&&(async()=>{G(!0);try{let e=await (0,n.keyListCall)(s,null,null,null,null,null,1,100);Y(e?.keys||[])}catch(e){console.error("Error fetching keys:",e)}finally{G(!1)}})()},[c,s]);let en=M.find(e=>e.agent_type===T),ei=async()=>{try{if(0===c){await d.validateFields(["agent_name"]);let e=d.getFieldValue("agent_name");e&&!F&&R(`${e}-key`)}m(e=>e+1)}catch{}},eo=async()=>{if(!s)return void y.Ay.error("No access token available");S(!0);try{await d.validateFields();let e={...d.getFieldsValue(!0)},t=(e=>{if(T===er)return{agent_name:e.agent_name,agent_card_params:{protocolVersion:"1.0",name:e.agent_name,description:e.description||"",url:"",version:"1.0.0",defaultInputModes:["text"],defaultOutputModes:["text"],capabilities:{streaming:!1},skills:[]}};if("a2a"===T)return W(e);if(en?.use_a2a_form_fields){let t=W(e);for(let s of(en.litellm_params_template&&(t.litellm_params={...t.litellm_params,...en.litellm_params_template}),en.credential_fields)){let a=e[s.key];a&&!1!==s.include_in_litellm_params&&(t.litellm_params[s.key]=a)}return t}return en?et(e,en):null})(e);if(!t){y.Ay.error("Failed to build agent data"),S(!1);return}let a=await (0,n.createAgentCall)(s,t),l=a.agent_id,i=a.agent_name||e.agent_name||l;if(J(i),"create_new"===L&&F){let e=await (0,n.keyCreateForAgentCall)(s,l,F,z);X(e.key||null)}else if("existing_key"===L){if(!U){y.Ay.error("Please select an existing key to assign"),S(!1);return}await (0,n.keyUpdateCall)(s,{key:U,agent_id:l});let e=B.find(e=>e.token===U);el(e?.key_alias||U.slice(0,12)+"â€¦")}m(2),r()}catch(e){console.error("Error creating agent:",e),y.Ay.error("Failed to create agent")}finally{S(!1)}},ed=()=>{d.resetFields(),I("a2a"),m(0),$("create_new"),R(""),O([]),H(null),J(""),X(null),el(null),t()},ec=e=>{I(e),d.resetFields()},em=T===er?null:en?.logo_url||M.find(e=>"a2a"===e.agent_type)?.logo_url;return(0,a.jsx)(p.A,{title:(0,a.jsxs)("div",{className:"flex items-center space-x-3 pb-4 border-b border-gray-100",children:[em&&c<1&&(0,a.jsx)("img",{src:em,alt:"Agent",className:"w-6 h-6 object-contain"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Add New Agent"})]}),open:e,onCancel:ed,footer:null,width:900,className:"top-8",styles:{body:{padding:"24px"},header:{padding:"24px 24px 0 24px",border:"none"}},children:(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)(h.A,{current:c,size:"small",className:"mb-8",children:[(0,a.jsx)(ea,{title:"Configure"}),(0,a.jsx)(ea,{title:"Assign Key"}),(0,a.jsx)(ea,{title:"Ready"})]}),(0,a.jsxs)(g.A,{form:d,layout:"vertical",initialValues:"a2a"===T?(l={defaultInputModes:["text"],defaultOutputModes:["text"]},Object.values(E).forEach(e=>{e.fields.forEach(e=>{void 0!==e.defaultValue&&(l[e.name]=e.defaultValue)})}),l):{},className:"space-y-4",children:[0===c&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.A.Item,{label:(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Agent Type"}),required:!0,tooltip:"Select the type of agent you want to create",children:(0,a.jsx)(f.A,{value:T,onChange:ec,size:"large",style:{width:"100%"},optionLabelProp:"label",dropdownRender:e=>(0,a.jsxs)(a.Fragment,{children:[e,(0,a.jsx)(j.A,{style:{margin:"4px 0"}}),(0,a.jsxs)("div",{className:"px-2 py-1",children:[(0,a.jsx)("div",{className:"text-xs text-gray-400 font-medium mb-1 uppercase tracking-wide px-2",children:"Not listed?"}),(0,a.jsxs)("div",{className:`flex items-center gap-3 px-2 py-2 rounded cursor-pointer transition-colors ${T===er?"bg-amber-50":"hover:bg-amber-50"}`,onClick:()=>ec(er),children:[(0,a.jsx)(A.A,{className:"text-amber-600 text-lg"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium text-amber-700",children:"Custom / Other"}),(0,a.jsx)(b.A,{color:"orange",style:{fontSize:10,padding:"0 4px"},children:"GENERIC"})]}),(0,a.jsx)("div",{className:"text-xs text-amber-600",children:"For agents that don't follow a standard protocol â€” just needs a virtual key"})]})]})]})]}),children:M.map(e=>(0,a.jsx)(f.A.Option,{value:e.agent_type,label:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("img",{src:e.logo_url||"",alt:"",className:"w-4 h-4 object-contain"}),(0,a.jsx)("span",{children:e.agent_type_display_name})]}),children:(0,a.jsxs)("div",{className:"flex items-center gap-3 py-1",children:[(0,a.jsx)("img",{src:e.logo_url||"",alt:e.agent_type_display_name,className:"w-5 h-5 object-contain"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.agent_type_display_name}),e.description&&(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]})]})},e.agent_type))})}),(0,a.jsx)("div",{className:"mt-4",children:T===er?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(g.A.Item,{label:"Agent Name",name:"agent_name",rules:[{required:!0,message:"Please enter an agent name"}],children:(0,a.jsx)(v.A,{placeholder:"e.g. my-custom-agent"})}),(0,a.jsx)(g.A.Item,{label:"Description",name:"description",children:(0,a.jsx)(v.A.TextArea,{placeholder:"Describe what this agent doesâ€¦",rows:3})})]}):"a2a"===T?(0,a.jsx)(Z,{showAgentName:!0}):en?.use_a2a_form_fields?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Z,{showAgentName:!0}),en.credential_fields.length>0&&(0,a.jsxs)("div",{className:"mt-4 p-4 border border-gray-200 rounded-lg",children:[(0,a.jsxs)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:[en.agent_type_display_name," Settings"]}),en.credential_fields.map(e=>(0,a.jsx)(g.A.Item,{label:e.label,name:e.key,rules:e.required?[{required:!0,message:`Please enter ${e.label}`}]:void 0,tooltip:e.tooltip,initialValue:e.default_value,children:"password"===e.field_type?(0,a.jsx)(v.A.Password,{placeholder:e.placeholder||""}):(0,a.jsx)(v.A,{placeholder:e.placeholder||""})},e.key))]})]}):en?(0,a.jsx)(es,{agentTypeInfo:en}):null})]}),1===c&&(i=d.getFieldValue("agent_name")||"your-agent",(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex justify-center mb-6",children:(0,a.jsx)(b.A,{icon:(0,a.jsx)(N.A,{}),color:"purple",className:"px-3 py-1 text-sm",children:i})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-colors ${"create_new"===L?"border-indigo-600 bg-indigo-50":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:()=>$("create_new"),children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,a.jsx)(_.Ay,{value:"create_new",checked:"create_new"===L,onChange:()=>$("create_new")}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(k.A,{className:"text-indigo-600"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"Create a new key for this agent"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"A dedicated key scoped to this agent."}),"create_new"===L&&(0,a.jsxs)("div",{className:"mt-3 space-y-3",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600 block mb-1",children:"Key Name"}),(0,a.jsx)(v.A,{value:F,onChange:e=>R(e.target.value),placeholder:"e.g. my-agent-key"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"text-sm text-gray-600 block mb-1",children:["Allowed Models ",(0,a.jsx)("span",{className:"text-gray-400",children:"(optional â€” leave empty for all models)"})]}),(0,a.jsx)(f.A,{mode:"tags",style:{width:"100%"},placeholder:"e.g. gpt-4o, claude-3-5-sonnet",value:z,onChange:O,tokenSeparators:[","]})]})]})]})]}),(0,a.jsx)(b.A,{color:"green",children:"Recommended"})]})}),(0,a.jsx)("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-colors ${"existing_key"===L?"border-indigo-600 bg-indigo-50":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:()=>$("existing_key"),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(_.Ay,{value:"existing_key",checked:"existing_key"===L,onChange:()=>$("existing_key")}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(k.A,{className:"text-gray-500"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"Assign an existing key"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Re-assign a key you already have to this agent."}),"existing_key"===L&&(0,a.jsx)("div",{className:"mt-3",onClick:e=>e.stopPropagation(),children:(0,a.jsx)(f.A,{showSearch:!0,style:{width:"100%"},placeholder:"Search by key nameâ€¦",loading:V,value:U,onChange:e=>H(e),filterOption:(e,t)=>(t?.label??"").toLowerCase().includes(e.toLowerCase()),options:B.map(e=>({label:e.key_alias||e.token?.slice(0,12)+"â€¦",value:e.token}))})})]})]})})]}),(0,a.jsx)("div",{className:"text-center mt-4",children:(0,a.jsx)("button",{type:"button",className:"text-sm text-gray-500 underline hover:text-gray-700",onClick:()=>$("skip"),children:"Skip for now â€” I'll assign a key later"})})]})),2===c&&(0,a.jsxs)("div",{className:"text-center py-6",children:[(0,a.jsx)(w.A,{className:"text-5xl text-green-500 mb-4",style:{fontSize:48}}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Agent Created!"}),(0,a.jsx)("div",{className:"flex justify-center mb-4",children:(0,a.jsx)(b.A,{icon:(0,a.jsx)(N.A,{}),color:"purple",className:"px-3 py-1 text-sm",children:K})}),Q&&(0,a.jsx)("div",{className:"mt-4 text-left max-w-md mx-auto",children:(0,a.jsx)(C.A,{apiKey:Q})}),ee&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["Key ",(0,a.jsx)("span",{className:"font-medium",children:ee})," has been assigned to this agent."]}),!Q&&!ee&&"skip"===L&&(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"No key assigned. You can create one from the Virtual Keys page."})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-6 border-t border-gray-100 mt-6",children:[(0,a.jsx)("div",{children:c>0&&c<2&&(0,a.jsx)("button",{type:"button",onClick:()=>{m(e=>Math.max(0,e-1))},className:"text-sm text-gray-600 border border-gray-300 rounded px-4 py-2 hover:bg-gray-50",children:"â† Back"})}),(0,a.jsxs)("div",{className:"flex gap-3",children:[c<2&&(0,a.jsx)(x.$,{variant:"secondary",onClick:ed,children:"Cancel"}),0===c&&(0,a.jsx)(x.$,{variant:"primary",onClick:ei,children:"Next â†’"}),1===c&&(0,a.jsx)(x.$,{variant:"primary",loading:u,onClick:eo,children:u?"Creating...":"Create Agent â†’"}),2===c&&(0,a.jsx)(x.$,{variant:"primary",onClick:ed,children:"Done"})]})]})]})})};var en=s(36904),ei=s(45588),eo=s(14992),ed=s(17293),ec=s(73946),em=s(22277),eu=s(34537),ex=s(37621),ep=s(3134);let eh=({agentsList:e,isLoading:t,onDeleteClick:s,accessToken:r,onAgentUpdated:l,isAdmin:n,onAgentClick:i})=>{let[d,c]=(0,o.useState)([{id:"created_at",desc:!0}]),m=[{header:"Agent Name",accessorKey:"agent_name",cell:({row:e})=>{let t=e.original,s=t.agent_name||"";return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(em.A,{title:s,children:(0,a.jsx)(en.$n,{size:"xs",variant:"light",className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left overflow-hidden truncate min-w-[200px] justify-start",onClick:()=>i(t.agent_id),children:s})}),(0,a.jsx)(em.A,{title:"Copy Agent ID",children:(0,a.jsx)(eu.A,{onClick:e=>{var s;e.stopPropagation(),s=t.agent_id,navigator.clipboard.writeText(s)},className:"cursor-pointer text-gray-500 hover:text-blue-500 text-xs"})})]})}},{header:"Description",accessorKey:"agent_card_params.description",cell:({row:e})=>{let t=e.original.agent_card_params?.description||"No description";return(0,a.jsx)("span",{className:"text-xs text-gray-600 block max-w-[300px] truncate",children:t})}},{header:"Created At",accessorKey:"created_at",cell:({row:e})=>{var t;let s=e.original;return(0,a.jsx)(em.A,{title:s.created_at,children:(0,a.jsx)("span",{className:"text-xs",children:(t=s.created_at)?new Date(t).toLocaleString():"-"})})}},...n?[{header:"Actions",id:"actions",enableSorting:!1,cell:({row:e})=>{let t=e.original;return(0,a.jsx)("div",{className:"flex items-center gap-1",children:(0,a.jsx)(em.A,{title:"Delete agent",children:(0,a.jsx)(en.$n,{size:"xs",variant:"light",color:"red",onClick:e=>{e.stopPropagation(),s(t.agent_id,t.agent_name)},icon:ei.A,className:"text-red-500 hover:text-red-700 hover:bg-red-50"})})})}}]:[]],u=(0,ex.N4)({data:e,columns:m,state:{sorting:d},onSortingChange:c,getCoreRowModel:(0,ep.HT)(),getSortedRowModel:(0,ep.h5)(),enableSorting:!0});return(0,a.jsx)("div",{className:"rounded-lg custom-border relative",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(en.XI,{className:"[&_td]:py-0.5 [&_th]:py-1",children:[(0,a.jsx)(en.nd,{children:u.getHeaderGroups().map(e=>(0,a.jsx)(en.Hj,{children:e.headers.map(e=>(0,a.jsx)(en.M_,{className:"py-1 h-8",onClick:e.column.getToggleSortingHandler(),children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsx)("div",{className:"flex items-center",children:e.isPlaceholder?null:(0,ex.Kv)(e.column.columnDef.header,e.getContext())}),(0,a.jsx)("div",{className:"w-4",children:e.column.getIsSorted()?({asc:(0,a.jsx)(eo.A,{className:"h-4 w-4 text-blue-500"}),desc:(0,a.jsx)(ed.A,{className:"h-4 w-4 text-blue-500"})})[e.column.getIsSorted()]:(0,a.jsx)(ec.A,{className:"h-4 w-4 text-gray-400"})})]})},e.id))},e.id))}),(0,a.jsx)(en.BF,{children:t?(0,a.jsx)(en.Hj,{children:(0,a.jsx)(en.nA,{colSpan:m.length,className:"h-8 text-center",children:(0,a.jsx)("div",{className:"text-center text-gray-500",children:(0,a.jsx)("p",{children:"Loading..."})})})}):e&&e.length>0?u.getRowModel().rows.map(e=>(0,a.jsx)(en.Hj,{className:"h-8",children:e.getVisibleCells().map(e=>(0,a.jsx)(en.nA,{className:"py-0.5 max-h-8 overflow-hidden text-ellipsis whitespace-nowrap",children:(0,ex.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,a.jsx)(en.Hj,{children:(0,a.jsx)(en.nA,{colSpan:m.length,className:"h-8 text-center",children:(0,a.jsx)("div",{className:"text-center text-gray-500",children:(0,a.jsx)("p",{children:"No agents found. Create one to get started."})})})})})]})})})};var eg=s(90550),ey=s(38983),ef=s(42837),ej=s(2212),eb=s(87927),ev=s(56680),e_=s(73806),eA=s(79363),eN=s(75892),ek=s(64628),ew=s(95049),eC=s(30648),eS=s(44926),eT=s(2283);let eI=({agent:e})=>{let t=e.litellm_params;return t?.cost_per_query===void 0&&t?.input_cost_per_token===void 0&&t?.output_cost_per_token===void 0?null:(0,a.jsxs)("div",{style:{marginTop:24},children:[(0,a.jsx)(eT.h,{children:"Cost Configuration"}),(0,a.jsxs)(eC.A,{bordered:!0,column:1,style:{marginTop:16},children:[void 0!==t.cost_per_query&&(0,a.jsxs)(eC.A.Item,{label:"Cost Per Query",children:["$",t.cost_per_query]}),void 0!==t.input_cost_per_token&&(0,a.jsxs)(eC.A.Item,{label:"Input Cost Per Token",children:["$",t.input_cost_per_token]}),void 0!==t.output_cost_per_token&&(0,a.jsxs)(eC.A.Item,{label:"Output Cost Per Token",children:["$",t.output_cost_per_token]})]})]})},eM=e=>{let t=e.litellm_params?.model||"",s=e.litellm_params?.custom_llm_provider;return"langgraph"===s?"langgraph":"azure_ai"===s?"azure_ai_foundry":"bedrock"===s?"bedrock_agentcore":t.startsWith("langgraph/")?"langgraph":t.startsWith("azure_ai/agents/")?"azure_ai_foundry":t.startsWith("bedrock/agentcore/")?"bedrock_agentcore":"a2a"},eD=(e,t)=>{let s={agent_name:e.agent_name,description:e.agent_card_params?.description||""};for(let a of t.credential_fields)if(!1!==a.include_in_litellm_params)s[a.key]=e.litellm_params?.[a.key]||a.default_value||"";else if(t.model_template&&e.litellm_params?.model){let r=e.litellm_params.model,l=t.model_template.split("/"),n=r.split("/");l.forEach((e,t)=>{e===`{${a.key}}`&&n[t]&&(s[a.key]=n[t])})}return s.cost_per_query=e.litellm_params?.cost_per_query,s.input_cost_per_token=e.litellm_params?.input_cost_per_token,s.output_cost_per_token=e.litellm_params?.output_cost_per_token,s},eE=({agentId:e,onClose:t,accessToken:s,isAdmin:r})=>{let[l,i]=(0,o.useState)(null),[d,c]=(0,o.useState)(!0),[m,u]=(0,o.useState)(!1),[x,p]=(0,o.useState)(!1),[h]=g.A.useForm(),[f,j]=(0,o.useState)([]),[b,_]=(0,o.useState)("a2a");(0,o.useEffect)(()=>{(async()=>{try{let e=await (0,n.getAgentCreateMetadata)();j(e)}catch(e){console.error("Error fetching agent metadata:",e)}})()},[]),(0,o.useEffect)(()=>{A()},[e,s]);let A=async()=>{if(s){c(!0);try{let t=await (0,n.getAgentInfo)(s,e);i(t);let a=eM(t);if(_(a),"a2a"===a)h.setFieldsValue(J(t));else{let e=f.find(e=>e.agent_type===a);e?h.setFieldsValue(eD(t,e)):h.setFieldsValue(J(t))}}catch(e){console.error("Error fetching agent info:",e),y.Ay.error("Failed to load agent information")}finally{c(!1)}}};(0,o.useEffect)(()=>{if(l&&f.length>0){let e=eM(l);if("a2a"!==e){let t=f.find(t=>t.agent_type===e);t&&h.setFieldsValue(eD(l,t))}}},[f,l]);let N=f.find(e=>e.agent_type===b),k=async t=>{if(s&&l){p(!0);try{let a;"a2a"===b?a=W(t,l):N?(a=et(t,N)).agent_name=t.agent_name:a=W(t,l),await (0,n.patchAgentCall)(s,e,a),y.Ay.success("Agent updated successfully"),u(!1),A()}catch(e){console.error("Error updating agent:",e),y.Ay.error("Failed to update agent")}finally{p(!1)}}};if(d)return(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)(ew.A,{size:"large"})})});if(!l)return(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("div",{className:"text-center",children:"Agent not found"}),(0,a.jsx)(ey.A,{onClick:t,className:"mt-4",children:"Back to Agents List"})]});let w=e=>e?new Date(e).toLocaleString():"-";return(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(ey.A,{icon:eS.A,variant:"light",onClick:t,className:"mb-4",children:"Back to Agents"}),(0,a.jsx)(ek.A,{children:l.agent_name||"Unnamed Agent"}),(0,a.jsx)(eN.A,{className:"text-gray-500 font-mono",children:l.agent_id})]}),(0,a.jsxs)(eb.A,{children:[(0,a.jsxs)(ev.A,{className:"mb-4",children:[(0,a.jsx)(ej.A,{children:"Overview"},"overview"),r?(0,a.jsx)(ej.A,{children:"Settings"},"settings"):(0,a.jsx)(a.Fragment,{})]}),(0,a.jsxs)(eA.A,{children:[(0,a.jsxs)(e_.A,{children:[(0,a.jsxs)(eC.A,{bordered:!0,column:1,children:[(0,a.jsx)(eC.A.Item,{label:"Agent ID",children:l.agent_id}),(0,a.jsx)(eC.A.Item,{label:"Agent Name",children:l.agent_name}),(0,a.jsx)(eC.A.Item,{label:"Display Name",children:l.agent_card_params?.name||"-"}),(0,a.jsx)(eC.A.Item,{label:"Description",children:l.agent_card_params?.description||"-"}),(0,a.jsx)(eC.A.Item,{label:"URL",children:l.agent_card_params?.url||"-"}),(0,a.jsx)(eC.A.Item,{label:"Version",children:l.agent_card_params?.version||"-"}),(0,a.jsx)(eC.A.Item,{label:"Protocol Version",children:l.agent_card_params?.protocolVersion||"-"}),(0,a.jsx)(eC.A.Item,{label:"Streaming",children:l.agent_card_params?.capabilities?.streaming?"Yes":"No"}),l.agent_card_params?.capabilities?.pushNotifications&&(0,a.jsx)(eC.A.Item,{label:"Push Notifications",children:"Yes"}),l.agent_card_params?.capabilities?.stateTransitionHistory&&(0,a.jsx)(eC.A.Item,{label:"State Transition History",children:"Yes"}),(0,a.jsxs)(eC.A.Item,{label:"Skills",children:[l.agent_card_params?.skills?.length||0," configured"]}),l.litellm_params?.model&&(0,a.jsx)(eC.A.Item,{label:"Model",children:l.litellm_params.model}),l.litellm_params?.make_public!==void 0&&(0,a.jsx)(eC.A.Item,{label:"Make Public",children:l.litellm_params.make_public?"Yes":"No"}),l.agent_card_params?.iconUrl&&(0,a.jsx)(eC.A.Item,{label:"Icon URL",children:l.agent_card_params.iconUrl}),l.agent_card_params?.documentationUrl&&(0,a.jsx)(eC.A.Item,{label:"Documentation URL",children:l.agent_card_params.documentationUrl}),(0,a.jsx)(eC.A.Item,{label:"Created At",children:w(l.created_at)}),(0,a.jsx)(eC.A.Item,{label:"Updated At",children:w(l.updated_at)})]}),(0,a.jsx)(eI,{agent:l}),l.agent_card_params?.skills&&l.agent_card_params.skills.length>0&&(0,a.jsxs)("div",{style:{marginTop:24},children:[(0,a.jsx)(ek.A,{children:"Skills"}),(0,a.jsx)(eC.A,{bordered:!0,column:1,style:{marginTop:16},children:l.agent_card_params.skills.map((e,t)=>(0,a.jsx)(eC.A.Item,{label:e.name||`Skill ${t+1}`,children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"ID:"})," ",e.id]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Description:"})," ",e.description]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Tags:"})," ",Array.isArray(e.tags)?e.tags.join(", "):e.tags]}),e.examples&&e.examples.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Examples:"})," ",Array.isArray(e.examples)?e.examples.join(", "):e.examples]})]})},t))})]})]}),r&&(0,a.jsx)(e_.A,{children:(0,a.jsxs)(ef.A,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)(ek.A,{children:"Agent Settings"}),!m&&(0,a.jsx)(ey.A,{onClick:()=>u(!0),children:"Edit Settings"})]}),m?(0,a.jsxs)(g.A,{form:h,layout:"vertical",onFinish:k,children:[(0,a.jsx)(g.A.Item,{label:"Agent ID",children:(0,a.jsx)(v.A,{value:l.agent_id,disabled:!0})}),"a2a"===b?(0,a.jsx)(Z,{showAgentName:!0}):N?(0,a.jsx)(es,{agentTypeInfo:N}):(0,a.jsx)(Z,{showAgentName:!0}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 mt-6",children:[(0,a.jsx)(I.Ay,{onClick:()=>{u(!1),A()},children:"Cancel"}),(0,a.jsx)(ey.A,{loading:x,children:"Save Changes"})]})]}):(0,a.jsx)(eN.A,{children:'Click "Edit Settings" to modify agent configuration.'})]})})]})]})]})};var eP=s(12120);let eq=({accessToken:e,userRole:t})=>{let[s,r]=(0,o.useState)([]),[l,i]=(0,o.useState)(!1),[d,c]=(0,o.useState)(!1),[m,u]=(0,o.useState)(!1),[h,g]=(0,o.useState)(null),[y,f]=(0,o.useState)(null),j=!!t&&(0,eg.OY)(t),b=async()=>{if(e){c(!0);try{let t=await (0,n.getAgentsList)(e);console.log(`agents: ${JSON.stringify(t)}`),r(t.agents)}catch(e){console.error("Error fetching agents:",e)}finally{c(!1)}}};(0,o.useEffect)(()=>{b()},[e]);let v=async()=>{if(h&&e){u(!0);try{await (0,n.deleteAgentCall)(e,h.id),eP.Ay.success(`Agent "${h.name}" deleted successfully`),b()}catch(e){console.error("Error deleting agent:",e),eP.Ay.fromBackend("Failed to delete agent")}finally{u(!1),g(null)}}};return(0,a.jsxs)("div",{className:"w-full mx-auto flex-auto overflow-y-auto m-8 p-2",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 mb-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Agents"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"List of A2A-spec agents that are available to be used in your organization. Go to AI Hub, to make agents public."}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(x.$,{onClick:()=>{y&&f(null),i(!0)},disabled:!e,children:"+ Add New Agent"})})]}),y?(0,a.jsx)(eE,{agentId:y,onClose:()=>f(null),accessToken:e,isAdmin:j}):(0,a.jsx)(eh,{agentsList:s,isLoading:d,onDeleteClick:(e,t)=>{g({id:e,name:t})},accessToken:e,onAgentUpdated:b,isAdmin:j,onAgentClick:e=>f(e)}),(0,a.jsx)(el,{visible:l,onClose:()=>{i(!1)},accessToken:e,onSuccess:()=>{b()}}),h&&(0,a.jsxs)(p.A,{title:"Delete Agent",open:null!==h,onOk:v,onCancel:()=>{g(null)},confirmLoading:m,okText:"Delete",okButtonProps:{danger:!0},children:[(0,a.jsxs)("p",{children:["Are you sure you want to delete agent: ",h.name,"?"]}),(0,a.jsx)("p",{children:"This action cannot be undone."})]})]})};var eL=s(20803),e$=s(4e3),eF=s(87905),eR=s(26562),ez=s(96637),eO=s(95875),eB=s(56691),eY=s(20645),eU=s(19602),eH=s(34487),eV=s(10746),eG=s(87830),eK=s(55726),eW=s(30489),eJ=s(96961),eQ=s(95517),eX=s(8179),eZ=s(31556),e0=s(95171);function e1({data:e,columns:t,isLoading:s=!1,loadingMessage:r="Loading...",emptyMessage:l="No data",getRowKey:n}){return(0,a.jsxs)(eW.A,{children:[(0,a.jsx)(eX.A,{children:(0,a.jsx)(e0.A,{children:t.map((e,t)=>(0,a.jsx)(eZ.A,{style:{width:e.width},children:e.header},t))})}),(0,a.jsx)(eJ.A,{children:s?(0,a.jsx)(e0.A,{children:(0,a.jsx)(eQ.A,{colSpan:t.length,className:"text-center",children:(0,a.jsx)(eN.A,{className:"text-gray-500",children:r})})}):e.length>0?e.map((e,s)=>(0,a.jsx)(e0.A,{children:t.map((t,s)=>(0,a.jsx)(eQ.A,{children:t.cell?t.cell(e):String(e[t.accessor]??"")},s))},n?n(e,s):s)):(0,a.jsx)(e0.A,{children:(0,a.jsx)(eQ.A,{colSpan:t.length,className:"text-center",children:(0,a.jsx)(eN.A,{className:"text-gray-500",children:l})})})})]})}var e2=s(90314);let e5=e=>{let t=Object.keys(e2.JQ).find(t=>e2.JQ[t]===e);if(t){let e=e2.bb[t],s=e2.rm[e];return{displayName:e,logo:s,enumKey:t}}return{displayName:e,logo:"",enumKey:null}},e4=e=>e2.JQ[e]||null,e6=(e,t)=>{let s=e.target,a=s.parentElement;if(a){let e=document.createElement("div");e.className="w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=t.charAt(0),a.replaceChild(e,s)}},e3=({discountConfig:e,onDiscountChange:t,onRemoveProvider:s})=>{let[r,l]=(0,o.useState)(null),[n,i]=(0,o.useState)(""),d=e=>{let s=parseFloat(n);!isNaN(s)&&s>=0&&s<=100&&t(e,(s/100).toString()),l(null),i("")},c=()=>{l(null),i("")},m=Object.entries(e).map(([e,t])=>({provider:e,discount:t})).sort((e,t)=>{let s=e5(e.provider).displayName,a=e5(t.provider).displayName;return s.localeCompare(a)});return(0,a.jsx)(e1,{data:m,columns:[{header:"Provider",cell:e=>{let{displayName:t,logo:s}=e5(e.provider);return(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[s&&(0,a.jsx)("img",{src:s,alt:`${t} logo`,className:"w-5 h-5",onError:e=>e6(e,t)}),(0,a.jsx)("span",{className:"font-medium",children:t})]})}},{header:"Discount Percentage",cell:e=>(0,a.jsx)("div",{className:"flex items-center gap-2",children:r===e.provider?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eH.A,{value:n,onValueChange:i,onKeyDown:t=>{var s;return s=e.provider,void("Enter"===t.key?d(s):"Escape"===t.key&&c())},placeholder:"5",className:"w-20",autoFocus:!0}),(0,a.jsx)("span",{className:"text-gray-600",children:"%"}),(0,a.jsx)(eU.A,{icon:eV.A,size:"sm",onClick:()=>d(e.provider),className:"cursor-pointer text-green-600 hover:text-green-700"}),(0,a.jsx)(eU.A,{icon:eG.A,size:"sm",onClick:c,className:"cursor-pointer text-gray-600 hover:text-gray-700"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(eN.A,{className:"font-medium",children:[(100*e.discount).toFixed(1),"%"]}),(0,a.jsx)(eU.A,{icon:eK.A,size:"sm",onClick:()=>{var t,s;return t=e.provider,s=e.discount,void(l(t),i((100*s).toString()))},className:"cursor-pointer text-blue-600 hover:text-blue-700"})]})}),width:"250px"},{header:"Actions",cell:e=>{let{displayName:t}=e5(e.provider);return(0,a.jsx)(eU.A,{icon:ei.A,size:"sm",onClick:()=>s(e.provider,t),className:"cursor-pointer hover:text-red-600"})},width:"80px"}],getRowKey:e=>e.provider,emptyMessage:"No provider discounts configured"})};var e8=s(21590),e9=s(94300);let e7=({discountConfig:e,selectedProvider:t,newDiscount:s,onProviderChange:r,onDiscountChange:l,onAddProvider:n})=>(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(g.A.Item,{label:(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["Provider",(0,a.jsx)(em.A,{title:"Select the LLM provider you want to configure a discount for",children:(0,a.jsx)(e9.A,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),rules:[{required:!0,message:"Please select a provider"}],children:(0,a.jsx)(f.A,{showSearch:!0,placeholder:"Select provider",value:t,onChange:r,style:{width:"100%"},size:"large",optionFilterProp:"children",filterOption:(e,t)=>String(t?.label??"").toLowerCase().includes(e.toLowerCase()),children:Object.entries(e2.bb).map(([t,s])=>{let r=e2.JQ[t];return r&&e[r]?null:(0,a.jsx)(f.A.Option,{value:t,label:s,children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("img",{src:e2.rm[s],alt:`${t} logo`,className:"w-5 h-5",onError:e=>e6(e,s)}),(0,a.jsx)("span",{children:s})]})},t)})})}),(0,a.jsx)(g.A.Item,{label:(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["Discount Percentage",(0,a.jsx)(em.A,{title:"Enter a percentage value (e.g., 5 for 5% discount)",children:(0,a.jsx)(e9.A,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),rules:[{required:!0,message:"Please enter a discount percentage"}],children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(e8.k,{placeholder:"5",value:s,onValueChange:l,className:"rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500 flex-1"}),(0,a.jsx)("span",{className:"text-gray-600",children:"%"})]})}),(0,a.jsx)("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t border-gray-100",children:(0,a.jsx)(e8.$,{variant:"primary",onClick:n,disabled:!t||!s,children:"Add Provider Discount"})})]}),te=({marginConfig:e,onMarginChange:t,onRemoveProvider:s})=>{let[r,l]=(0,o.useState)(null),[n,i]=(0,o.useState)(""),[d,c]=(0,o.useState)(""),m=()=>{l(null),i(""),c("")},u=Object.entries(e).map(([e,t])=>({provider:e,margin:t})).sort((e,t)=>{if("global"===e.provider)return -1;if("global"===t.provider)return 1;let s=e5(e.provider).displayName,a=e5(t.provider).displayName;return s.localeCompare(a)});return(0,a.jsx)(e1,{data:u,columns:[{header:"Provider",cell:e=>{if("global"===e.provider)return(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsx)("span",{className:"font-medium",children:"Global (All Providers)"})});let{displayName:t,logo:s}=e5(e.provider);return(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[s&&(0,a.jsx)("img",{src:s,alt:`${t} logo`,className:"w-5 h-5",onError:e=>e6(e,t)}),(0,a.jsx)("span",{className:"font-medium",children:t})]})}},{header:"Margin",cell:e=>(0,a.jsx)("div",{className:"flex items-center gap-2",children:r===e.provider?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eH.A,{value:n,onValueChange:i,placeholder:"10",className:"w-20",autoFocus:!0}),(0,a.jsx)("span",{className:"text-gray-600",children:"%"}),(0,a.jsx)("span",{className:"text-gray-400",children:"+"}),(0,a.jsx)("span",{className:"text-gray-600",children:"$"}),(0,a.jsx)(eH.A,{value:d,onValueChange:c,placeholder:"0.001",className:"w-24"})]}),(0,a.jsx)(eU.A,{icon:eV.A,size:"sm",onClick:()=>{var s;let a,r;return s=e.provider,a=n?parseFloat(n):void 0,r=d?parseFloat(d):void 0,void(void 0!==a&&!isNaN(a)&&a>=0&&a<=1e3?void 0!==r&&!isNaN(r)&&r>=0?t(s,{percentage:a/100,fixed_amount:r}):t(s,a/100):void 0!==r&&!isNaN(r)&&r>=0&&t(s,{fixed_amount:r}),l(null),i(""),c(""))},className:"cursor-pointer text-green-600 hover:text-green-700"}),(0,a.jsx)(eU.A,{icon:eG.A,size:"sm",onClick:m,className:"cursor-pointer text-gray-600 hover:text-gray-700"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eN.A,{className:"font-medium",children:(e=>{if("number"==typeof e)return`${(100*e).toFixed(1)}%`;let t=[];return void 0!==e.percentage&&t.push(`${(100*e.percentage).toFixed(1)}%`),void 0!==e.fixed_amount&&t.push(`$${e.fixed_amount.toFixed(6)}`),t.join(" + ")||"0%"})(e.margin)}),(0,a.jsx)(eU.A,{icon:eK.A,size:"sm",onClick:()=>{var t,s;return t=e.provider,s=e.margin,void(l(t),"number"==typeof s?(i((100*s).toString()),c("")):(i(s.percentage?(100*s.percentage).toString():""),c(s.fixed_amount?s.fixed_amount.toString():"")))},className:"cursor-pointer text-blue-600 hover:text-blue-700"})]})}),width:"350px"},{header:"Actions",cell:e=>{let t="global"===e.provider?"Global":e5(e.provider).displayName;return(0,a.jsx)(eU.A,{icon:ei.A,size:"sm",onClick:()=>s(e.provider,t),className:"cursor-pointer hover:text-red-600"})},width:"80px"}],getRowKey:e=>e.provider,emptyMessage:"No provider margins configured"})},tt=({marginConfig:e,selectedProvider:t,marginType:s,percentageValue:r,fixedAmountValue:l,onProviderChange:n,onMarginTypeChange:i,onPercentageChange:o,onFixedAmountChange:d,onAddProvider:c})=>(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(g.A.Item,{label:(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["Provider",(0,a.jsx)(em.A,{title:"Select 'Global' to apply margin to all providers, or select a specific provider",children:(0,a.jsx)(e9.A,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),rules:[{required:!0,message:"Please select a provider"}],children:(0,a.jsxs)(f.A,{showSearch:!0,placeholder:"Select provider or 'Global'",value:t,onChange:n,style:{width:"100%"},size:"large",optionFilterProp:"children",filterOption:(e,t)=>String(t?.label??"").toLowerCase().includes(e.toLowerCase()),children:[(0,a.jsx)(f.A.Option,{value:"global",label:"Global (All Providers)",children:(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsx)("span",{className:"font-medium",children:"Global (All Providers)"})})},"global"),Object.entries(e2.bb).map(([t,s])=>{let r=e2.JQ[t];return r&&e[r]?null:(0,a.jsx)(f.A.Option,{value:t,label:s,children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("img",{src:e2.rm[s],alt:`${t} logo`,className:"w-5 h-5",onError:e=>e6(e,s)}),(0,a.jsx)("span",{children:s})]})},t)})]})}),(0,a.jsx)(g.A.Item,{label:(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["Margin Type",(0,a.jsx)(em.A,{title:"Choose how to apply the margin: percentage-based or fixed amount",children:(0,a.jsx)(e9.A,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),rules:[{required:!0,message:"Please select a margin type"}],children:(0,a.jsxs)(_.Ay.Group,{value:s,onChange:e=>i(e.target.value),className:"w-full",children:[(0,a.jsx)(_.Ay,{value:"percentage",children:"Percentage-based"}),(0,a.jsx)(_.Ay,{value:"fixed",children:"Fixed Amount"})]})}),"percentage"===s&&(0,a.jsx)(g.A.Item,{label:(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["Margin Percentage",(0,a.jsx)(em.A,{title:"Enter a percentage value (e.g., 10 for 10% margin)",children:(0,a.jsx)(e9.A,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),rules:[{required:!0,message:"Please enter a margin percentage"},{validator:(e,t)=>{if(!t)return Promise.reject(Error("Please enter a margin percentage"));let s=parseFloat(t);return isNaN(s)||s<0||s>1e3?Promise.reject(Error("Percentage must be between 0 and 1000")):Promise.resolve()}}],children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(e8.k,{placeholder:"10",value:r,onValueChange:o,className:"rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500 flex-1"}),(0,a.jsx)("span",{className:"text-gray-600",children:"%"})]})}),"fixed"===s&&(0,a.jsx)(g.A.Item,{label:(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["Fixed Margin Amount",(0,a.jsx)(em.A,{title:"è¾“å…¥å›ºå®šé‡‘é¢ (e.g., 0.001 for $0.001 per request)",children:(0,a.jsx)(e9.A,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),rules:[{required:!0,message:"Please enter a fixed amount"},{validator:(e,t)=>{if(!t)return Promise.reject(Error("Please enter a fixed amount"));let s=parseFloat(t);return isNaN(s)||s<0?Promise.reject(Error("Fixed amount must be non-negative")):Promise.resolve()}}],children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"$"}),(0,a.jsx)(e8.k,{placeholder:"0.001",value:l,onValueChange:d,className:"rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500 flex-1"})]})}),(0,a.jsx)("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t border-gray-100",children:(0,a.jsx)(e8.$,{variant:"primary",onClick:c,disabled:!t||"percentage"===s&&!r||"fixed"===s&&!l,children:"Add Provider Margin"})})]});var ts=s(8208),ta=s(50139),tr=s(24611),tl=s(50410),tn=s(69779),ti=s(87027),to=s(85265),td=s(74703),tc=s(34568),tm=s(17432),tu=s(45960),tx=s(88534),tp=s(72197),th=s(85286),tg=s(42164);let ty=e=>null==e?"-":0===e?"\xa50.00":e<.01?`$${e.toFixed(6)}`:e<1?`$${e.toFixed(4)}`:`$${(0,tx.HY)(e,2)}`,tf=e=>null==e?"-":(0,tx.HY)(e,0),tj=({multiResult:e})=>{let[t,s]=(0,o.useState)(!1),r=(0,o.useRef)(null),l=e.entries.some(e=>null!==e.result);return((0,o.useEffect)(()=>{let e=e=>{r.current&&!r.current.contains(e.target)&&s(!1)};return t&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[t]),l)?(0,a.jsxs)("div",{className:"relative inline-block",ref:r,children:[(0,a.jsx)(x.$,{size:"xs",variant:"secondary",icon:tp.A,onClick:()=>s(!t),children:"Export"}),t&&(0,a.jsxs)("div",{className:"absolute right-0 mt-1 w-44 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:[(0,a.jsxs)("button",{className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>{(e=>{let t=window.open("","_blank");if(!t)return alert("Please allow popups to export PDF");let s=e.entries.filter(e=>null!==e.result),a=s.length,r=`
    <!DOCTYPE html>
    <html>
    <head>
      <title>Multi-Model Cost Estimate Report</title>
      <style>
        body {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
          padding: 40px;
          max-width: 900px;
          margin: 0 auto;
          color: #333;
        }
        h1 {
          color: #1a1a1a;
          border-bottom: 2px solid #1890ff;
          padding-bottom: 10px;
          margin-bottom: 30px;
        }
        h2 {
          color: #444;
          margin-top: 30px;
          margin-bottom: 15px;
        }
        h3 {
          color: #555;
          margin-top: 25px;
          margin-bottom: 10px;
          padding-bottom: 5px;
          border-bottom: 1px solid #eee;
        }
        .provider {
          font-weight: normal;
          color: #1890ff;
          font-size: 14px;
        }
        .meta {
          background: #f5f5f5;
          padding: 12px 15px;
          border-radius: 8px;
          margin-bottom: 15px;
          font-size: 13px;
        }
        .meta p {
          margin: 4px 0;
        }
        table {
          width: 100%;
          border-collapse: collapse;
          margin-bottom: 20px;
        }
        th, td {
          padding: 10px 12px;
          text-align: left;
          border-bottom: 1px solid #ddd;
        }
        th {
          background: #f8f9fa;
          font-weight: 600;
          font-size: 13px;
        }
        .cost-value {
          font-family: monospace;
          font-size: 13px;
        }
        .total-row {
          font-weight: bold;
          background: #e6f7ff;
        }
        .summary-box {
          background: linear-gradient(135deg, #e6f7ff 0%, #f9f0ff 100%);
          border: 1px solid #91d5ff;
          border-radius: 8px;
          padding: 20px;
          margin-bottom: 30px;
        }
        .summary-box h2 {
          margin-top: 0;
          color: #1890ff;
        }
        .summary-grid {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 20px;
          margin-top: 15px;
        }
        .summary-item {
          text-align: center;
        }
        .summary-item .label {
          font-size: 12px;
          color: #666;
          margin-bottom: 5px;
        }
        .summary-item .value {
          font-size: 20px;
          font-weight: bold;
          font-family: monospace;
        }
        .summary-item .value.blue { color: #1890ff; }
        .summary-item .value.green { color: #52c41a; }
        .summary-item .value.purple { color: #722ed1; }
        .model-section {
          margin-bottom: 30px;
          page-break-inside: avoid;
        }
        .footer {
          margin-top: 40px;
          padding-top: 20px;
          border-top: 1px solid #ddd;
          font-size: 12px;
          color: #666;
        }
        @media print {
          body { padding: 20px; }
          .model-section { page-break-inside: avoid; }
        }
      </style>
    </head>
    <body>
      <h1>LLM Cost Estimate Report</h1>
      <p style="color: #666; margin-top: -20px; margin-bottom: 30px;">${a} model${1!==a?"s":""} configured</p>
      
      <div class="summary-box">
        <h2>Combined Totals</h2>
        <div class="summary-grid">
          <div class="summary-item">
            <div class="label">Total Per Request</div>
            <div class="value blue">${ty(e.totals.cost_per_request)}</div>
          </div>
          <div class="summary-item">
            <div class="label">Total Daily</div>
            <div class="value green">${ty(e.totals.daily_cost)}</div>
          </div>
          <div class="summary-item">
            <div class="label">Total Monthly</div>
            <div class="value purple">${ty(e.totals.monthly_cost)}</div>
          </div>
        </div>
        ${e.totals.margin_per_request>0?`
        <div class="summary-grid" style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #ddd;">
          <div class="summary-item">
            <div class="label">Margin/Request</div>
            <div class="value" style="color: #faad14;">${ty(e.totals.margin_per_request)}</div>
          </div>
          <div class="summary-item">
            <div class="label">Daily Margin</div>
            <div class="value" style="color: #faad14;">${ty(e.totals.daily_margin)}</div>
          </div>
          <div class="summary-item">
            <div class="label">Monthly Margin</div>
            <div class="value" style="color: #faad14;">${ty(e.totals.monthly_margin)}</div>
          </div>
        </div>
        `:""}
      </div>

      <h2>Model Breakdown</h2>
      ${s.map(e=>{let t;return t=e.result,`
    <div class="model-section">
      <h3>${t.model} ${t.provider?`<span class="provider">(${t.provider})</span>`:""}</h3>
      
      <div class="meta">
        <p><strong>Input Tokens per Request:</strong> ${tf(t.input_tokens)}</p>
        <p><strong>Output Tokens per Request:</strong> ${tf(t.output_tokens)}</p>
        ${t.num_requests_per_day?`<p><strong>Requests per Day:</strong> ${tf(t.num_requests_per_day)}</p>`:""}
        ${t.num_requests_per_month?`<p><strong>Requests per Month:</strong> ${tf(t.num_requests_per_month)}</p>`:""}
      </div>

      <table>
        <tr>
          <th>Cost Type</th>
          <th>Per Request</th>
          ${null!==t.daily_cost?"<th>Daily</th>":""}
          ${null!==t.monthly_cost?"<th>Monthly</th>":""}
        </tr>
        <tr>
          <td>Input Cost</td>
          <td class="cost-value">${ty(t.input_cost_per_request)}</td>
          ${null!==t.daily_cost?`<td class="cost-value">${ty(t.daily_input_cost)}</td>`:""}
          ${null!==t.monthly_cost?`<td class="cost-value">${ty(t.monthly_input_cost)}</td>`:""}
        </tr>
        <tr>
          <td>Output Cost</td>
          <td class="cost-value">${ty(t.output_cost_per_request)}</td>
          ${null!==t.daily_cost?`<td class="cost-value">${ty(t.daily_output_cost)}</td>`:""}
          ${null!==t.monthly_cost?`<td class="cost-value">${ty(t.monthly_output_cost)}</td>`:""}
        </tr>
        <tr>
          <td>Margin/Fee</td>
          <td class="cost-value">${ty(t.margin_cost_per_request)}</td>
          ${null!==t.daily_cost?`<td class="cost-value">${ty(t.daily_margin_cost)}</td>`:""}
          ${null!==t.monthly_cost?`<td class="cost-value">${ty(t.monthly_margin_cost)}</td>`:""}
        </tr>
        <tr class="total-row">
          <td>Total</td>
          <td class="cost-value">${ty(t.cost_per_request)}</td>
          ${null!==t.daily_cost?`<td class="cost-value">${ty(t.daily_cost)}</td>`:""}
          ${null!==t.monthly_cost?`<td class="cost-value">${ty(t.monthly_cost)}</td>`:""}
        </tr>
      </table>
    </div>
  `}).join("")}

      <div class="footer">
        <p>Generated by Silinex Pricing Calculator on ${new Date().toLocaleString()}</p>
      </div>
    </body>
    </html>
  `;t.document.write(r),t.document.close(),t.onload=()=>{t.print()}})(e),s(!1)},children:[(0,a.jsx)(th.A,{className:"mr-3 text-red-500"}),"Export as PDF"]}),(0,a.jsxs)("button",{className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>{(e=>{let t=e.entries.filter(e=>null!==e.result),s=[["LLM Multi-Model Cost Estimate Report"],["Generated",new Date().toLocaleString()],[""]];for(let a of(s.push(["COMBINED TOTALS"],["Total Per Request",e.totals.cost_per_request.toString()],["Total Daily",e.totals.daily_cost?.toString()||"-"],["Total Monthly",e.totals.monthly_cost?.toString()||"-"],["Margin Per Request",e.totals.margin_per_request.toString()],["Daily Margin",e.totals.daily_margin?.toString()||"-"],["Monthly Margin",e.totals.monthly_margin?.toString()||"-"],[""]),s.push(["Model","Provider","Input Tokens","Output Tokens","Requests/Day","Requests/Month","Cost/Request","Daily Cost","Monthly Cost","Input Cost/Req","Output Cost/Req","Margin/Req"]),t)){let e=a.result;s.push([e.model,e.provider||"-",e.input_tokens.toString(),e.output_tokens.toString(),e.num_requests_per_day?.toString()||"-",e.num_requests_per_month?.toString()||"-",e.cost_per_request.toString(),e.daily_cost?.toString()||"-",e.monthly_cost?.toString()||"-",e.input_cost_per_request.toString(),e.output_cost_per_request.toString(),e.margin_cost_per_request.toString()])}let a=new Blob([s.map(e=>e.map(e=>`"${e}"`).join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),r=window.URL.createObjectURL(a),l=document.createElement("a");l.href=r,l.download=`cost_estimate_multi_model_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(r)})(e),s(!1)},children:[(0,a.jsx)(tg.A,{className:"mr-3 text-green-600"}),"Export as CSV"]})]})]}):null},tb=e=>null==e?"-":0===e?"\xa50":e<1e-4?`$${e.toExponential(2)}`:e<1?`$${e.toFixed(4)}`:`\xa5${(0,tx.HY)(e)}`,tv=({result:e,loading:t,timePeriod:s})=>{let r="day"===s?"Daily":"Monthly",l="day"===s?e.daily_cost:e.monthly_cost,n="day"===s?e.daily_input_cost:e.monthly_input_cost,i="day"===s?e.daily_output_cost:e.monthly_output_cost,o="day"===s?e.daily_margin_cost:e.monthly_margin_cost,d="day"===s?e.num_requests_per_day:e.num_requests_per_month;return(0,a.jsxs)("div",{className:"space-y-3 bg-gray-50 p-4 rounded-lg",children:[t&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 text-sm",children:[(0,a.jsx)(ew.A,{indicator:(0,a.jsx)(tc.A,{spin:!0}),size:"small"}),(0,a.jsx)("span",{children:"Updating..."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(tl.E,{className:"text-xs text-gray-500 block",children:"Total/Request"}),(0,a.jsx)(tl.E,{className:"text-base font-semibold text-blue-600",children:tb(e.cost_per_request)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(tl.E,{className:"text-xs text-gray-500 block",children:"Input Cost"}),(0,a.jsx)(tl.E,{className:"text-sm",children:tb(e.input_cost_per_request)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(tl.E,{className:"text-xs text-gray-500 block",children:"Output Cost"}),(0,a.jsx)(tl.E,{className:"text-sm",children:tb(e.output_cost_per_request)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(tl.E,{className:"text-xs text-gray-500 block",children:"Margin Fee"}),(0,a.jsx)(tl.E,{className:`text-sm ${e.margin_cost_per_request>0?"text-amber-600":""}`,children:tb(e.margin_cost_per_request)})]})]}),null!==l&&(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4 pt-2 border-t border-gray-200",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(tl.E,{className:"text-xs text-gray-500 block",children:[r," Total (",null==d?"-":(0,tx.HY)(d,0,!0)," req)"]}),(0,a.jsx)(tl.E,{className:`text-base font-semibold ${"day"===s?"text-green-600":"text-purple-600"}`,children:tb(l)})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(tl.E,{className:"text-xs text-gray-500 block",children:[r," Input"]}),(0,a.jsx)(tl.E,{className:"text-sm",children:tb(n)})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(tl.E,{className:"text-xs text-gray-500 block",children:[r," Output"]}),(0,a.jsx)(tl.E,{className:"text-sm",children:tb(i)})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(tl.E,{className:"text-xs text-gray-500 block",children:[r," Margin Fee"]}),(0,a.jsx)(tl.E,{className:`text-sm ${(o??0)>0?"text-amber-600":""}`,children:tb(o)})]})]}),(e.input_cost_per_token||e.output_cost_per_token)&&(0,a.jsxs)("div",{className:"text-xs text-gray-400 pt-2 border-t border-gray-200",children:["Token Pricing: "," ",e.input_cost_per_token&&(0,a.jsxs)("span",{children:["Input $",(0,tx.HY)(1e6*e.input_cost_per_token,2),"/1M"]}),e.input_cost_per_token&&e.output_cost_per_token&&" | ",e.output_cost_per_token&&(0,a.jsxs)("span",{children:["Output $",(0,tx.HY)(1e6*e.output_cost_per_token,2),"/1M"]})]})]})},t_=({multiResult:e,timePeriod:t})=>{let[s,r]=(0,o.useState)(new Set),l=e.entries.filter(e=>null!==e.result),n=e.entries.filter(e=>e.loading),i=e.entries.filter(e=>null!==e.error),d=l.length>0,c=n.length>0,m=i.length>0;if(!d&&!c&&!m)return(0,a.jsx)("div",{className:"py-6 text-center border border-dashed border-gray-300 rounded-lg bg-gray-50",children:(0,a.jsx)(tl.E,{className:"text-gray-500",children:"Select models above to see cost estimates"})});if(!d&&c&&!m)return(0,a.jsxs)("div",{className:"py-6 text-center",children:[(0,a.jsx)(ew.A,{indicator:(0,a.jsx)(tc.A,{spin:!0})}),(0,a.jsx)(tl.E,{className:"text-gray-500 block mt-2",children:"Calculating costs..."})]});if(!d&&m)return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(j.A,{className:"my-4"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(tl.E,{className:"text-base font-semibold text-gray-900",children:"Cost Estimates"}),c&&(0,a.jsx)(ew.A,{indicator:(0,a.jsx)(tc.A,{spin:!0}),size:"small"})]}),i.map(e=>(0,a.jsxs)("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded-lg border border-red-200",children:[(0,a.jsxs)("span",{className:"font-medium",children:[e.entry.model||"Unknown model",": "]}),e.error]},e.entry.id))]});let u=e.totals.margin_per_request>0,x="day"===t?"Daily":"Monthly",p=[{title:"Model",dataIndex:"model",key:"model",render:(e,t)=>(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium text-sm",children:e}),t.provider&&(0,a.jsx)(b.A,{color:"blue",className:"text-xs",children:t.provider}),t.loading&&(0,a.jsx)(ew.A,{indicator:(0,a.jsx)(tc.A,{spin:!0}),size:"small"})]}),t.error&&(0,a.jsxs)("div",{className:"text-xs text-red-600 bg-red-50 px-2 py-1 rounded",children:["âš ï¸ ",t.error]}),t.hasZeroCost&&!t.error&&(0,a.jsx)("div",{className:"text-xs text-amber-600 bg-amber-50 px-2 py-1 rounded",children:"âš ï¸ No pricing data found for this model. Set base_model in config."})]})},{title:"Per Request",dataIndex:"cost_per_request",key:"cost_per_request",align:"right",render:(e,t)=>t.error?(0,a.jsx)("span",{className:"text-gray-400",children:"-"}):(0,a.jsx)("span",{className:"font-mono text-sm",children:tb(e)})},{title:"Margin Fee",dataIndex:"margin_cost_per_request",key:"margin_cost_per_request",align:"right",render:(e,t)=>t.error?(0,a.jsx)("span",{className:"text-gray-400",children:"-"}):(0,a.jsx)("span",{className:`font-mono text-sm ${(e??0)>0?"text-amber-600":"text-gray-400"}`,children:tb(e)})},{title:x,dataIndex:"day"===t?"daily_cost":"monthly_cost",key:"period_cost",align:"right",render:(e,t)=>t.error?(0,a.jsx)("span",{className:"text-gray-400",children:"-"}):(0,a.jsx)("span",{className:"font-mono text-sm",children:tb(e)})},{title:"",key:"expand",width:40,render:(e,t)=>t.error?null:(0,a.jsx)(tl.$,{size:"xs",variant:"light",onClick:()=>{var e;return e=t.id,void r(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},className:"text-gray-400 hover:text-gray-600",children:s.has(t.id)?(0,a.jsx)(tm.A,{}):(0,a.jsx)(tu.A,{})})}],h=e.entries.filter(e=>e.entry.model).map(e=>({key:e.entry.id,id:e.entry.id,model:e.result?.model||e.entry.model,provider:e.result?.provider,cost_per_request:e.result?.cost_per_request??null,margin_cost_per_request:e.result?.margin_cost_per_request??null,daily_cost:e.result?.daily_cost??null,monthly_cost:e.result?.monthly_cost??null,error:e.error,loading:e.loading,hasZeroCost:e.result&&0===e.result.cost_per_request}));return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(j.A,{className:"my-4"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(tl.E,{className:"text-base font-semibold text-gray-900",children:"Cost Estimates"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[c&&(0,a.jsx)(ew.A,{indicator:(0,a.jsx)(tc.A,{spin:!0}),size:"small"}),(0,a.jsx)(tj,{multiResult:e})]})]}),(0,a.jsxs)(tn.A,{size:"small",className:"bg-gradient-to-r from-slate-50 to-blue-50 border-slate-200",children:[(0,a.jsxs)(ti.A,{gutter:[16,8],children:[(0,a.jsx)(to.A,{xs:24,sm:12,children:(0,a.jsx)(td.A,{title:(0,a.jsx)("span",{className:"text-xs",children:"Total Per Request"}),value:tb(e.totals.cost_per_request),valueStyle:{color:"#1890ff",fontSize:"18px",fontFamily:"monospace"}})}),(0,a.jsx)(to.A,{xs:24,sm:12,children:(0,a.jsx)(td.A,{title:(0,a.jsxs)("span",{className:"text-xs",children:["Total ",x]}),value:tb("day"===t?e.totals.daily_cost:e.totals.monthly_cost),valueStyle:{color:"day"===t?"#52c41a":"#722ed1",fontSize:"18px",fontFamily:"monospace"}})})]}),u&&(0,a.jsxs)(ti.A,{gutter:[16,8],className:"mt-3 pt-3 border-t border-slate-200",children:[(0,a.jsxs)(to.A,{xs:24,sm:12,children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Margin Fee/Request"}),(0,a.jsx)("div",{className:"text-sm font-mono text-amber-600",children:tb(e.totals.margin_per_request)})]}),(0,a.jsxs)(to.A,{xs:24,sm:12,children:[(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[x," Margin Fee"]}),(0,a.jsx)("div",{className:"text-sm font-mono text-amber-600",children:tb("day"===t?e.totals.daily_margin:e.totals.monthly_margin)})]})]})]}),h.length>0&&(0,a.jsx)(ta.A,{columns:p,dataSource:h,pagination:!1,size:"small",className:"border border-gray-200 rounded-lg",expandable:{expandedRowKeys:Array.from(s),expandedRowRender:e=>{let s=l.find(t=>t.entry.id===e.id);return s?.result?(0,a.jsx)("div",{className:"py-2",children:(0,a.jsx)(tv,{result:s.result,loading:s.loading,timePeriod:t})}):null},showExpandColumn:!1}})]})},tA=()=>({id:`entry-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,model:"",input_tokens:1e3,output_tokens:500,num_requests_per_day:void 0,num_requests_per_month:void 0}),tN=({accessToken:e,models:t})=>{let[s,r]=(0,o.useState)([tA()]),[l,i]=(0,o.useState)("month"),{debouncedFetchForEntry:d,removeEntry:c,getMultiModelResult:m}=function(e){let[t,s]=(0,o.useState)(new Map),a=(0,o.useRef)(new Map),r=(0,o.useCallback)(async t=>{if(!e||!t.model)return void s(e=>{let s=new Map(e);return s.set(t.id,{entry:t,result:null,loading:!1,error:null}),s});s(e=>{let s=new Map(e),a=s.get(t.id);return s.set(t.id,{entry:t,result:a?.result??null,loading:!0,error:null}),s});try{let a=(0,n.getProxyBaseUrl)(),r=a?`${a}/cost/estimate`:"/cost/estimate",l={model:t.model,input_tokens:t.input_tokens||0,output_tokens:t.output_tokens||0,num_requests_per_day:t.num_requests_per_day||null,num_requests_per_month:t.num_requests_per_month||null},i=await fetch(r,{method:"POST",headers:{[(0,n.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(l)});if(i.ok){let e=await i.json();s(s=>{let a=new Map(s);return a.set(t.id,{entry:t,result:e,loading:!1,error:null}),a})}else{let e=await i.json(),a=e.detail?.error||e.detail||"Failed to estimate cost";s(e=>{let s=new Map(e);return s.set(t.id,{entry:t,result:null,loading:!1,error:a}),s})}}catch(e){console.error("Error estimating cost:",e),s(e=>{let s=new Map(e);return s.set(t.id,{entry:t,result:null,loading:!1,error:"Network error"}),s})}},[e]),l=(0,o.useCallback)(e=>{let t=a.current.get(e.id);t&&clearTimeout(t);let s=setTimeout(()=>{r(e)},500);a.current.set(e.id,s)},[r]),i=(0,o.useCallback)(e=>{let t=a.current.get(e);t&&(clearTimeout(t),a.current.delete(e)),s(t=>{let s=new Map(t);return s.delete(e),s})},[]);return(0,o.useEffect)(()=>{let e=a.current;return()=>{e.forEach(e=>clearTimeout(e)),e.clear()}},[]),{debouncedFetchForEntry:l,removeEntry:i,getMultiModelResult:(0,o.useCallback)(e=>{let s=e.map(e=>{let s=t.get(e.id);return{entry:e,result:s?.result??null,loading:s?.loading??!1,error:s?.error??null}}),a=0,r=null,l=null,n=0,i=null,o=null;for(let e of s)e.result&&(a+=e.result.cost_per_request,n+=e.result.margin_cost_per_request,null!==e.result.daily_cost&&(r=(r??0)+e.result.daily_cost),null!==e.result.daily_margin_cost&&(i=(i??0)+e.result.daily_margin_cost),null!==e.result.monthly_cost&&(l=(l??0)+e.result.monthly_cost),null!==e.result.monthly_margin_cost&&(o=(o??0)+e.result.monthly_margin_cost));return{entries:s,totals:{cost_per_request:a,daily_cost:r,monthly_cost:l,margin_per_request:n,daily_margin:i,monthly_margin:o}}},[t])}}(e),u=(0,o.useCallback)((e,t,s)=>{r(a=>{let r=a.map(a=>a.id===e?{...a,[t]:s}:a),l=r.find(t=>t.id===e);return l&&l.model&&d(l),r})},[d]),x=(0,o.useCallback)(e=>{i(e),r(t=>t.map(t=>({...t,num_requests_per_day:"day"===e?t.num_requests_per_day:void 0,num_requests_per_month:"month"===e?t.num_requests_per_month:void 0})))},[]),p=(0,o.useCallback)(()=>{r(e=>[...e,tA()])},[]),h=(0,o.useCallback)(e=>{r(t=>t.filter(t=>t.id!==e)),c(e)},[c]),g=m(s),y=[{title:"Model",dataIndex:"model",key:"model",width:"35%",render:(e,s)=>(0,a.jsx)(f.A,{showSearch:!0,placeholder:"Select a model",value:s.model||void 0,onChange:e=>u(s.id,"model",e),optionFilterProp:"label",filterOption:(e,t)=>String(t?.label??"").toLowerCase().includes(e.toLowerCase()),options:t.map(e=>({value:e,label:e})),style:{width:"100%"},size:"small"})},{title:"Input Tokens",dataIndex:"input_tokens",key:"input_tokens",width:"18%",render:(e,t)=>(0,a.jsx)(ts.A,{min:0,value:t.input_tokens,onChange:e=>u(t.id,"input_tokens",e??0),style:{width:"100%"},size:"small",formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,",")})},{title:"Output Tokens",dataIndex:"output_tokens",key:"output_tokens",width:"18%",render:(e,t)=>(0,a.jsx)(ts.A,{min:0,value:t.output_tokens,onChange:e=>u(t.id,"output_tokens",e??0),style:{width:"100%"},size:"small",formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,",")})},{title:`Requests/${"day"===l?"Day":"Month"}`,dataIndex:"day"===l?"num_requests_per_day":"num_requests_per_month",key:"num_requests",width:"20%",render:(e,t)=>(0,a.jsx)(ts.A,{min:0,value:"day"===l?t.num_requests_per_day:t.num_requests_per_month,onChange:e=>u(t.id,"day"===l?"num_requests_per_day":"num_requests_per_month",e??void 0),style:{width:"100%"},size:"small",placeholder:"-",formatter:e=>e?`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","):""})},{title:"",key:"actions",width:50,render:(e,t)=>(0,a.jsx)(I.Ay,{type:"text",icon:(0,a.jsx)(tr.A,{}),onClick:()=>h(t.id),disabled:1===s.length,danger:!0,size:"small"})}];return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-end mb-2",children:(0,a.jsxs)(_.Ay.Group,{value:l,onChange:e=>x(e.target.value),size:"small",optionType:"button",buttonStyle:"solid",children:[(0,a.jsx)(_.Ay.Button,{value:"day",children:"Per Day"}),(0,a.jsx)(_.Ay.Button,{value:"month",children:"Per Month"})]})}),(0,a.jsx)(ta.A,{columns:y,dataSource:s,rowKey:"id",pagination:!1,size:"small",footer:()=>(0,a.jsx)(I.Ay,{type:"dashed",onClick:p,icon:(0,a.jsx)(D.A,{}),className:"w-full",children:"Add Another Model"})}),(0,a.jsx)(t_,{multiResult:g,timePeriod:l})]})};var tk=s(81283),tw=s(66088),tC=s(22164);let tS=({items:e,children:t="Docs",className:s=""})=>{let[r,l]=(0,o.useState)(!1),n=(0,o.useRef)(null);return(0,o.useEffect)(()=>{let e=e=>{n.current&&!n.current.contains(e.target)&&l(!1)};return r&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[r]),(0,a.jsxs)("div",{className:`relative inline-block ${s}`,ref:n,children:[(0,a.jsxs)("button",{type:"button",onClick:()=>l(!r),className:"inline-flex items-center gap-1 text-gray-500 hover:text-gray-700 text-xs transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 rounded px-2 py-1","aria-expanded":r,"aria-haspopup":"true",children:[(0,a.jsx)("span",{children:t}),(0,a.jsx)(tw.A,{className:`h-3 w-3 transition-transform ${r?"rotate-180":""}`,"aria-hidden":"true"})]}),r&&(0,a.jsx)("div",{className:"absolute right-0 mt-1 w-56 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:e.map((e,t)=>(0,a.jsxs)("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>l(!1),children:[(0,a.jsx)("span",{children:e.label}),(0,a.jsx)(tC.A,{className:"h-3.5 w-3.5 text-gray-400 flex-shrink-0 ml-2","aria-hidden":"true"})]},t))})]})};var tT=s(58337),tI=s(50995);let tM=()=>{let[e,t]=(0,o.useState)(""),[s,r]=(0,o.useState)(""),l=(0,o.useMemo)(()=>{let t=parseFloat(e),a=parseFloat(s);if(isNaN(t)||isNaN(a)||0===t||0===a)return null;let r=t+a,l=a/r*100;return{originalCost:r.toFixed(10),finalCost:t.toFixed(10),discountAmount:a.toFixed(10),discountPercentage:l.toFixed(2)}},[e,s]);return(0,a.jsxs)("div",{className:"space-y-4 pt-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(tT.E,{className:"font-medium text-gray-900 text-sm mb-1",children:"Cost Calculation"}),(0,a.jsxs)(tT.E,{className:"text-xs text-gray-600",children:["Discounts are applied to provider costs: ",(0,a.jsx)("code",{className:"bg-gray-100 px-1.5 py-0.5 rounded text-xs",children:"final_cost = base_cost \xd7 (1 - discount%/100)"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(tT.E,{className:"font-medium text-gray-900 text-sm mb-1",children:"Example"}),(0,a.jsx)(tT.E,{className:"text-xs text-gray-600",children:"A 5% discount on a $10.00 request results in: $10.00 \xd7 (1 - 0.05) = $9.50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(tT.E,{className:"font-medium text-gray-900 text-sm mb-1",children:"Valid Range"}),(0,a.jsx)(tT.E,{className:"text-xs text-gray-600",children:"Discount percentages must be between 0% and 100%"})]}),(0,a.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,a.jsx)(tT.E,{className:"font-medium text-gray-900 text-sm mb-2",children:"Validating Discounts"}),(0,a.jsx)(tT.E,{className:"text-xs text-gray-600 mb-3",children:"Make a test request and check the response headers to verify discounts are applied:"}),(0,a.jsx)(tI.A,{language:"bash",code:`curl -X POST -i http://your-proxy:4000/chat/completions \\
  -H "Content-Type: application/json" \\
  -H "Authorization: Bearer sk-1234" \\
  -d '{
    "model": "gemini/gemini-2.5-pro",
    "messages": [{"role": "user", "content": "Hello"}]
  }'`}),(0,a.jsx)(tT.E,{className:"text-xs text-gray-600 mt-3 mb-2",children:"Look for these headers in the response:"}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs font-mono text-gray-800 whitespace-nowrap",children:"x-silinex-response-cost"}),(0,a.jsx)(tT.E,{className:"text-xs text-gray-600",children:"Final cost after discount"})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs font-mono text-gray-800 whitespace-nowrap",children:"x-silinex-response-cost-original"}),(0,a.jsx)(tT.E,{className:"text-xs text-gray-600",children:"Original cost before discount"})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs font-mono text-gray-800 whitespace-nowrap",children:"x-silinex-response-cost-discount-amount"}),(0,a.jsx)(tT.E,{className:"text-xs text-gray-600",children:"Amount discounted"})]})]})]}),(0,a.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,a.jsx)(tT.E,{className:"font-medium text-gray-900 text-sm mb-3",children:"Discount Calculator"}),(0,a.jsx)(tT.E,{className:"text-xs text-gray-600 mb-3",children:"Enter values from your response headers to verify the discount:"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Response Cost (x-silinex-response-cost)"}),(0,a.jsx)(tT.k,{placeholder:"0.0171938125",value:e,onValueChange:t,className:"text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Discount Amount (x-silinex-response-cost-discount-amount)"}),(0,a.jsx)(tT.k,{placeholder:"0.0009049375",value:s,onValueChange:r,className:"text-sm"})]})]}),l&&(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)(tT.E,{className:"text-sm font-medium text-blue-900 mb-2",children:"Calculated Results"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(tT.E,{className:"text-xs text-blue-800",children:"Original Cost:"}),(0,a.jsxs)("code",{className:"text-xs font-mono text-blue-900",children:["$",l.originalCost]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(tT.E,{className:"text-xs text-blue-800",children:"Final Cost:"}),(0,a.jsxs)("code",{className:"text-xs font-mono text-blue-900",children:["$",l.finalCost]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(tT.E,{className:"text-xs text-blue-800",children:"Discount Amount:"}),(0,a.jsxs)("code",{className:"text-xs font-mono text-blue-900",children:["$",l.discountAmount]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-blue-300",children:[(0,a.jsx)(tT.E,{className:"text-xs font-semibold text-blue-900",children:"Discount Applied:"}),(0,a.jsxs)(tT.E,{className:"text-sm font-bold text-blue-900",children:[l.discountPercentage,"%"]})]})]})]})]})]})};var tD=s(22603);let tE=[{label:"Custom pricing for models",href:"https://docs.litellm.ai/docs/proxy/custom_pricing"},{label:"Spend tracking",href:"https://docs.litellm.ai/docs/proxy/cost_tracking"}],tP=({userID:e,userRole:t,accessToken:s})=>{let[r,l]=(0,o.useState)(void 0),[i,d]=(0,o.useState)(""),[c,m]=(0,o.useState)(!0),[u,x]=(0,o.useState)(!1),[h,y]=(0,o.useState)(!1),[f,j]=(0,o.useState)(void 0),[b,v]=(0,o.useState)("percentage"),[_,A]=(0,o.useState)(""),[N,k]=(0,o.useState)(""),[w,C]=(0,o.useState)([]),[S]=g.A.useForm(),[T]=g.A.useForm(),[I,M]=p.A.useModal(),D="proxy_admin"===t||"Admin"===t,{discountConfig:E,fetchDiscountConfig:P,handleAddProvider:q,handleRemoveProvider:L,handleDiscountChange:$}=function({accessToken:e}){let[t,s]=(0,o.useState)({}),a=(0,o.useCallback)(async()=>{try{let t=(0,n.getProxyBaseUrl)(),a=t?`${t}/config/cost_discount_config`:"/config/cost_discount_config",r=await fetch(a,{method:"GET",headers:{[(0,n.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"}});if(r.ok){let e=await r.json();s(e.values||{})}else console.error("Failed to fetch discount config")}catch(e){console.error("Error fetching discount config:",e),eP.Ay.fromBackend("Failed to fetch discount configuration")}},[e]),r=(0,o.useCallback)(async t=>{try{let s=(0,n.getProxyBaseUrl)(),r=s?`${s}/config/cost_discount_config`:"/config/cost_discount_config",l=await fetch(r,{method:"PATCH",headers:{[(0,n.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(l.ok)eP.Ay.success("Discount configuration updated successfully"),await a();else{let e=await l.json(),t=e.detail?.error||e.detail||"Failed to update settings";eP.Ay.fromBackend(t)}}catch(e){console.error("Error updating discount config:",e),eP.Ay.fromBackend("Failed to update discount configuration")}},[e,a]),l=(0,o.useCallback)(async(e,a)=>{if(!e||!a)return eP.Ay.fromBackend("Please select a provider and enter discount percentage"),!1;let l=parseFloat(a);if(isNaN(l)||l<0||l>100)return eP.Ay.fromBackend("Discount must be between 0% and 100%"),!1;let n=e4(e);if(!n)return eP.Ay.fromBackend("Invalid provider selected"),!1;if(t[n])return eP.Ay.fromBackend(`Discount for ${e2.bb[e]} already exists. Edit it in the table above.`),!1;let i={...t,[n]:l/100};return s(i),await r(i),!0},[t,r]),i=(0,o.useCallback)(async e=>{let a={...t};delete a[e],s(a),await r(a)},[t,r]),d=(0,o.useCallback)(async(e,a)=>{let l=parseFloat(a);if(!isNaN(l)&&l>=0&&l<=1){let a={...t,[e]:l};s(a),await r(a)}},[t,r]);return{discountConfig:t,setDiscountConfig:s,fetchDiscountConfig:a,saveDiscountConfig:r,handleAddProvider:l,handleRemoveProvider:i,handleDiscountChange:d}}({accessToken:s}),{marginConfig:F,fetchMarginConfig:R,handleAddMargin:z,handleRemoveMargin:O,handleMarginChange:B}=function({accessToken:e}){let[t,s]=(0,o.useState)({}),a=(0,o.useCallback)(async()=>{try{let t=(0,n.getProxyBaseUrl)(),a=t?`${t}/config/cost_margin_config`:"/config/cost_margin_config",r=await fetch(a,{method:"GET",headers:{[(0,n.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"}});if(r.ok){let e=await r.json();s(e.values||{})}else console.error("Failed to fetch margin config")}catch(e){console.error("Error fetching margin config:",e),eP.Ay.fromBackend("Failed to fetch margin configuration")}},[e]),r=(0,o.useCallback)(async t=>{try{let s=(0,n.getProxyBaseUrl)(),r=s?`${s}/config/cost_margin_config`:"/config/cost_margin_config",l=await fetch(r,{method:"PATCH",headers:{[(0,n.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(l.ok)eP.Ay.success("Margin configuration updated successfully"),await a();else{let e=await l.json(),t=e.detail?.error||e.detail||"Failed to update settings";eP.Ay.fromBackend(t)}}catch(e){console.error("Error updating margin config:",e),eP.Ay.fromBackend("Failed to update margin configuration")}},[e,a]),l=(0,o.useCallback)(async e=>{let a,l,{selectedProvider:n,marginType:i,percentageValue:o,fixedAmountValue:d}=e;if(!n)return eP.Ay.fromBackend("Please select a provider"),!1;if("global"===n)a="global";else{let e=e4(n);if(!e)return eP.Ay.fromBackend("Invalid provider selected"),!1;a=e}if(t[a]){let e="global"===a?"Global":e2.bb[n];return eP.Ay.fromBackend(`Margin for ${e} already exists. Edit it in the table above.`),!1}if("percentage"===i){let e=parseFloat(o);if(isNaN(e)||e<0||e>1e3)return eP.Ay.fromBackend("Percentage must be between 0% and 1000%"),!1;l=e/100}else{let e=parseFloat(d);if(isNaN(e)||e<0)return eP.Ay.fromBackend("Fixed amount must be non-negative"),!1;l={fixed_amount:e}}let c={...t,[a]:l};return s(c),await r(c),!0},[t,r]),i=(0,o.useCallback)(async e=>{let a={...t};delete a[e],s(a),await r(a)},[t,r]),d=(0,o.useCallback)(async(e,a)=>{let l={...t,[e]:a};s(l),await r(l)},[t,r]);return{marginConfig:t,setMarginConfig:s,fetchMarginConfig:a,saveMarginConfig:r,handleAddMargin:l,handleRemoveMargin:i,handleMarginChange:d}}({accessToken:s});(0,o.useEffect)(()=>{s&&(Promise.all([P(),R()]).finally(()=>{m(!1)}),(async()=>{try{let e=await (0,tD.Q)(s);C(e.map(e=>e.model_group))}catch(e){console.error("Error fetching models:",e)}})())},[s,P,R]);let Y=async()=>{await q(r,i)&&(l(void 0),d(""),x(!1))},U=async(e,t)=>{I.confirm({title:"Remove Provider Discount",icon:(0,a.jsx)(tk.A,{}),content:`Are you sure you want to remove the discount for ${t}?`,okText:"Remove",okType:"danger",cancelText:"Cancel",onOk:()=>L(e)})},H=async()=>{await z({selectedProvider:f,marginType:b,percentageValue:_,fixedAmountValue:N})&&(j(void 0),A(""),k(""),v("percentage"),y(!1))},V=async(e,t)=>{I.confirm({title:"Remove Provider Margin",icon:(0,a.jsx)(tk.A,{}),content:`Are you sure you want to remove the margin for ${t}?`,okText:"Remove",okType:"danger",cancelText:"Cancel",onOk:()=>O(e)})};return s?(0,a.jsxs)("div",{className:"w-full p-8",children:[M,(0,a.jsx)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between mb-6",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(ek.A,{children:"Cost Tracking Settings"}),(0,a.jsx)(tS,{items:tE})]}),(0,a.jsx)(eN.A,{className:"text-gray-500 mt-1",children:"Configure cost discounts and margins for different LLM providers. Changes are saved automatically."})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow w-full max-w-full space-y-4",children:[D&&(0,a.jsxs)(eO.h,{children:[(0,a.jsx)(eY.A,{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex flex-col items-start w-full",children:[(0,a.jsx)(eN.A,{className:"text-lg font-semibold text-gray-900",children:"Provider Discounts"}),(0,a.jsx)(eN.A,{className:"text-sm text-gray-500 mt-1",children:"Apply percentage-based discounts to reduce costs for specific providers"})]})}),(0,a.jsx)(eB.A,{className:"px-0",children:(0,a.jsxs)(eb.A,{children:[(0,a.jsxs)(ev.A,{className:"px-6 pt-4",children:[(0,a.jsx)(ej.A,{children:"Discounts"}),(0,a.jsx)(ej.A,{children:"Test It"})]}),(0,a.jsxs)(eA.A,{children:[(0,a.jsx)(e_.A,{children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("div",{className:"flex justify-end mb-4",children:(0,a.jsx)(ey.A,{onClick:()=>x(!0),children:"+ Add Provider Discount"})}),c?(0,a.jsx)("div",{className:"py-12 text-center",children:(0,a.jsx)(eN.A,{className:"text-gray-500",children:"Loading configuration..."})}):Object.keys(E).length>0?(0,a.jsx)(e3,{discountConfig:E,onDiscountChange:$,onRemoveProvider:U}):(0,a.jsxs)("div",{className:"py-16 px-6 text-center",children:[(0,a.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsx)(eN.A,{className:"text-gray-700 font-medium mb-2",children:"No provider discounts configured"}),(0,a.jsx)(eN.A,{className:"text-gray-500 text-sm",children:'Click "Add Provider Discount" to get started'})]})]})}),(0,a.jsx)(e_.A,{children:(0,a.jsx)("div",{className:"px-6 pb-4",children:(0,a.jsx)(tM,{})})})]})]})})]}),D&&(0,a.jsxs)(eO.h,{children:[(0,a.jsx)(eY.A,{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex flex-col items-start w-full",children:[(0,a.jsx)(eN.A,{className:"text-lg font-semibold text-gray-900",children:"Fee/Price Margin"}),(0,a.jsx)(eN.A,{className:"text-sm text-gray-500 mt-1",children:"Add fees or margins to LLM costs for internal billing and cost recovery"})]})}),(0,a.jsx)(eB.A,{className:"px-0",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("div",{className:"flex justify-end mb-4",children:(0,a.jsx)(ey.A,{onClick:()=>y(!0),children:"+ Add Provider Margin"})}),c?(0,a.jsx)("div",{className:"py-12 text-center",children:(0,a.jsx)(eN.A,{className:"text-gray-500",children:"Loading configuration..."})}):Object.keys(F).length>0?(0,a.jsx)(te,{marginConfig:F,onMarginChange:B,onRemoveProvider:V}):(0,a.jsxs)("div",{className:"py-16 px-6 text-center",children:[(0,a.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsx)(eN.A,{className:"text-gray-700 font-medium mb-2",children:"No provider margins configured"}),(0,a.jsx)(eN.A,{className:"text-gray-500 text-sm",children:'Click "Add Provider Margin" to get started'})]})]})})]}),(0,a.jsxs)(eO.h,{defaultOpen:!0,children:[(0,a.jsx)(eY.A,{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex flex-col items-start w-full",children:[(0,a.jsx)(eN.A,{className:"text-lg font-semibold text-gray-900",children:"Pricing Calculator"}),(0,a.jsx)(eN.A,{className:"text-sm text-gray-500 mt-1",children:"Estimate LLM costs based on expected token usage and request volume"})]})}),(0,a.jsx)(eB.A,{className:"px-0",children:(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)(tN,{accessToken:s,models:w})})})]})]}),(0,a.jsx)(p.A,{title:(0,a.jsx)("div",{className:"flex items-center space-x-3 pb-4 border-b border-gray-100",children:(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Add Provider Discount"})}),open:u,width:1e3,onCancel:()=>{x(!1),S.resetFields(),l(void 0),d("")},footer:null,className:"top-8",styles:{body:{padding:"24px"},header:{padding:"24px 24px 0 24px",border:"none"}},children:(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)(eN.A,{className:"text-sm text-gray-600 mb-6",children:"Select a provider and set its discount percentage. Enter a value between 0% and 100% (e.g., 5 for a 5% discount)."}),(0,a.jsx)(g.A,{form:S,onFinish:()=>{Y()},layout:"vertical",className:"space-y-6",children:(0,a.jsx)(e7,{discountConfig:E,selectedProvider:r,newDiscount:i,onProviderChange:l,onDiscountChange:d,onAddProvider:Y})})]})}),(0,a.jsx)(p.A,{title:(0,a.jsx)("div",{className:"flex items-center space-x-3 pb-4 border-b border-gray-100",children:(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Add Provider Margin"})}),open:h,width:1e3,onCancel:()=>{y(!1),T.resetFields(),j(void 0),A(""),k(""),v("percentage")},footer:null,className:"top-8",styles:{body:{padding:"24px"},header:{padding:"24px 24px 0 24px",border:"none"}},children:(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)(eN.A,{className:"text-sm text-gray-600 mb-6",children:'Select a provider (or "Global" for all providers) and configure the margin. You can use percentage-based or fixed amount.'}),(0,a.jsx)(g.A,{form:T,layout:"vertical",className:"space-y-6",children:(0,a.jsx)(tt,{marginConfig:F,selectedProvider:f,marginType:b,percentageValue:_,fixedAmountValue:N,onProviderChange:j,onMarginTypeChange:v,onPercentageChange:A,onFixedAmountChange:k,onAddProvider:H})})]})})]}):null};var tq=s(15997),tL=s(84425),t$=s(78940),tF=s(73590),tR=s.n(tF),tz=s(14290);let tO=[{key:"today",shortLabel:"today",getValue:()=>({from:tR()().startOf("day").toDate(),to:tR()().endOf("day").toDate()})},{key:"last7Days",shortLabel:"7d",getValue:()=>({from:tR()().subtract(7,"days").startOf("day").toDate(),to:tR()().endOf("day").toDate()})},{key:"last30Days",shortLabel:"30d",getValue:()=>({from:tR()().subtract(30,"days").startOf("day").toDate(),to:tR()().endOf("day").toDate()})},{key:"monthToDate",shortLabel:"MTD",getValue:()=>({from:tR()().startOf("month").toDate(),to:tR()().endOf("day").toDate()})},{key:"yearToDate",shortLabel:"YTD",getValue:()=>({from:tR()().startOf("year").toDate(),to:tR()().endOf("day").toDate()})}],tB=({value:e,onValueChange:t,label:s,showTimeRange:r=!0})=>{let{t:l,locale:n}=(0,tz.o)(),i=(e,t,s)=>{let a=l(e);return a!==e?a:"zh-CN"===n?t:s},[d,c]=(0,o.useState)(!1),[m,u]=(0,o.useState)(e),[x,p]=(0,o.useState)(null),[h,g]=(0,o.useState)(""),[y,f]=(0,o.useState)(""),j=s??i("datePicker.selectTimeRange","é€‰æ‹©æ—¶é—´èŒƒå›´","Select Time Range"),b=(0,o.useRef)(null),v=(0,o.useCallback)(e=>{if(!e.from||!e.to)return null;for(let t of tO){let s=t.getValue(),a=tR()(e.from).isSame(tR()(s.from),"day"),r=tR()(e.to).isSame(tR()(s.to),"day");if(a&&r)return t.shortLabel}return null},[]);(0,o.useEffect)(()=>{p(v(e))},[e,v]);let _=(0,o.useCallback)(()=>{if(!h||!y)return{isValid:!0,error:""};let e=tR()(h,"YYYY-MM-DD"),t=tR()(y,"YYYY-MM-DD");return e.isValid()&&t.isValid()?t.isBefore(e)?{isValid:!1,error:i("datePicker.errors.endBeforeStart","ç»“æŸæ—¥æœŸä¸èƒ½æ—©äºŽå¼€å§‹æ—¥æœŸ","End date cannot be before start date")}:{isValid:!0,error:""}:{isValid:!1,error:i("datePicker.errors.invalidDateFormat","æ—¥æœŸæ ¼å¼æ— æ•ˆ","Invalid date format")}},[h,y,l,n])();(0,o.useEffect)(()=>{e.from&&g(tR()(e.from).format("YYYY-MM-DD")),e.to&&f(tR()(e.to).format("YYYY-MM-DD")),u(e)},[e]),(0,o.useEffect)(()=>{let e=e=>{b.current&&!b.current.contains(e.target)&&c(!1)};return d&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[d]);let A=(0,o.useCallback)((e,t)=>{if(!e||!t)return i("datePicker.selectDateRange","é€‰æ‹©æ—¥æœŸèŒƒå›´","Select date range");let s=e=>"zh-CN"===n?tR()(e).format("YYYY/MM/DD HH:mm"):tR()(e).format("D MMM, HH:mm");return`${s(e)} - ${s(t)}`},[i,n]),N=(0,o.useCallback)(e=>{let t;if(!e.from)return e;let s={...e},a=new Date(e.from);return t=new Date(e.to?e.to:e.from),a.toDateString()===t.toDateString(),a.setHours(0,0,0,0),t.setHours(23,59,59,999),s.from=a,s.to=t,s},[]),k=(0,o.useCallback)(()=>{try{if(h&&y&&_.isValid){let e=tR()(h,"YYYY-MM-DD").startOf("day"),t=tR()(y,"YYYY-MM-DD").endOf("day");if(e.isValid()&&t.isValid()){let s={from:e.toDate(),to:t.toDate()};u(s);let a=v(s);p(a)}}}catch(e){console.warn("Invalid date format:",e)}},[h,y,_.isValid,v]);return(0,o.useEffect)(()=>{k()},[k]),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[j&&(0,a.jsx)(tl.E,{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:j}),(0,a.jsxs)("div",{className:"relative",ref:b,children:[(0,a.jsx)("div",{className:"w-[480px] max-w-[70vw] px-3 py-2 text-sm border border-gray-300 rounded-md bg-white cursor-pointer hover:border-gray-400 focus:border-blue-500 focus:ring-1 focus:ring-blue-500",onClick:()=>c(!d),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(tL.A,{className:"text-gray-600"}),(0,a.jsx)("span",{className:"text-gray-900 whitespace-nowrap",children:A(e.from,e.to)})]}),(0,a.jsx)("svg",{className:`w-4 h-4 text-gray-400 transition-transform ${d?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),d&&(0,a.jsx)("div",{className:"absolute top-full right-0 z-[9999] min-w-[600px] mt-1 bg-white border border-gray-200 rounded-lg shadow-xl",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("div",{className:"w-1/2 border-r border-gray-200",children:[(0,a.jsx)("div",{className:"p-3 border-b border-gray-200",children:(0,a.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:i("datePicker.relativeTime","ç›¸å¯¹æ—¶é—´","Relative time")})}),(0,a.jsx)("div",{className:"h-[350px] overflow-y-auto",children:tO.map(e=>{let t=x===e.shortLabel,s="today"===e.key?i("datePicker.relative.today","ä»Šå¤©","Today"):"last7Days"===e.key?i("datePicker.relative.last7Days","æœ€è¿‘ 7 å¤©","Last 7 days"):"last30Days"===e.key?i("datePicker.relative.last30Days","æœ€è¿‘ 30 å¤©","Last 30 days"):"monthToDate"===e.key?i("datePicker.relative.monthToDate","æœ¬æœˆè‡³ä»Š","Month to date"):i("datePicker.relative.yearToDate","ä»Šå¹´è‡³ä»Š","Year to date");return(0,a.jsxs)("div",{className:`flex items-center justify-between px-5 py-4 cursor-pointer border-b border-gray-100 transition-colors ${t?"bg-blue-50 hover:bg-blue-100 border-blue-200":"hover:bg-gray-50"}`,onClick:()=>(e=>{let{from:t,to:s}=e.getValue();u({from:t,to:s}),p(e.shortLabel),g(tR()(t).format("YYYY-MM-DD")),f(tR()(s).format("YYYY-MM-DD"))})(e),children:[(0,a.jsx)("span",{className:`text-sm ${t?"text-blue-700 font-medium":"text-gray-700"}`,children:s}),(0,a.jsx)("span",{className:`text-xs px-2 py-1 rounded capitalize ${t?"text-blue-700 bg-blue-100":"text-gray-500 bg-gray-100"}`,children:e.shortLabel})]},e.key)})})]}),(0,a.jsxs)("div",{className:"w-1/2 relative",children:[(0,a.jsx)("div",{className:"p-3.5 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(t$.A,{className:"text-gray-600"}),(0,a.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:i("datePicker.startAndEndDates","å¼€å§‹å’Œç»“æŸæ—¥æœŸ","Start and end dates")})]})}),(0,a.jsxs)("div",{className:"p-6 space-y-6 pb-20",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-700 mb-1 block",children:i("datePicker.startDate","å¼€å§‹æ—¥æœŸ","Start date")}),(0,a.jsx)("input",{type:"date",value:h,onChange:e=>g(e.target.value),className:`w-65 px-3 py-2 text-sm border rounded-md cursor-pointer hover:border-gray-400 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 ${!_.isValid?"border-red-300 focus:border-red-500 focus:ring-red-200":"border-gray-300"}`})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-700 mb-1 block",children:i("datePicker.endDate","ç»“æŸæ—¥æœŸ","End date")}),(0,a.jsx)("input",{type:"date",value:y,onChange:e=>f(e.target.value),className:`w-65 px-3 py-2 text-sm border rounded-md cursor-pointer hover:border-gray-400 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 ${!_.isValid?"border-red-300 focus:border-red-500 focus:ring-red-200":"border-gray-300"}`})]}),!_.isValid&&_.error&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,a.jsx)("span",{className:"text-sm text-red-700 font-medium",children:_.error})]})}),m.from&&m.to&&_.isValid&&(0,a.jsxs)("div",{className:"bg-blue-50 p-3 rounded-md space-y-1",children:[(0,a.jsxs)("div",{className:"text-xs text-blue-800",children:[(0,a.jsx)("span",{className:"font-medium",children:i("datePicker.from","å¼€å§‹ï¼š","From:")})," ","zh-CN"===n?tR()(m.from).format("YYYYå¹´MMæœˆDDæ—¥ HH:mm:ss"):tR()(m.from).format("MMM D, YYYY [at] HH:mm:ss")]}),(0,a.jsxs)("div",{className:"text-xs text-blue-800",children:[(0,a.jsx)("span",{className:"font-medium",children:i("datePicker.to","ç»“æŸï¼š","To:")})," ","zh-CN"===n?tR()(m.to).format("YYYYå¹´MMæœˆDDæ—¥ HH:mm:ss"):tR()(m.to).format("MMM D, YYYY [at] HH:mm:ss")]})]})]}),(0,a.jsx)("div",{className:"absolute bottom-4 right-4",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(tl.$,{variant:"secondary",onClick:()=>{u(e),e.from&&g(tR()(e.from).format("YYYY-MM-DD")),e.to&&f(tR()(e.to).format("YYYY-MM-DD")),p(v(e)),c(!1)},children:i("datePicker.cancel","å–æ¶ˆ","Cancel")}),(0,a.jsx)(tl.$,{onClick:()=>{m.from&&m.to&&_.isValid&&(t(m),requestIdleCallback(()=>{t(N(m))},{timeout:100}),c(!1))},disabled:!m.from||!m.to||!_.isValid,children:i("datePicker.apply","åº”ç”¨","Apply")})]})})]})]})})]})]})};var tY=s(89889),tU=s(68851),tH=s(13008),tV=s(87233),tG=s(26708),tK=s(81981),tW=s(99904),tJ=s(50218),tQ=s(86960);let tX=`Evaluate whether this guardrail's decision was correct.
Analyze the user input, the guardrail action taken, and determine if it was appropriate.

Consider:
â€” Was the user's intent genuinely harmful or policy-violating?
â€” Was the guardrail's action (block / flag / pass) appropriate?
â€” Could this be a false positive or false negative?

Return a structured verdict with confidence and justification.`,tZ=`{
  "verdict": "correct" | "false_positive" | "false_negative",
  "confidence": 0.0,
  "justification": "string",
  "risk_category": "string",
  "suggested_action": "keep" | "adjust threshold" | "add allowlist"
}
`;function t0({open:e,onClose:t,guardrailName:s,accessToken:r,onRunEvaluation:l}){let[n,i]=(0,o.useState)(tX),[d,c]=(0,o.useState)(tZ),[m,u]=(0,o.useState)(null),[x,h]=(0,o.useState)([]),[g,y]=(0,o.useState)(!1);(0,o.useEffect)(()=>{if(!e||!r)return void h([]);let t=!1;return y(!0),(0,tD.Q)(r).then(e=>{t||h(e)}).catch(()=>{t||h([])}).finally(()=>{t||y(!1)}),()=>{t=!0}},[e,r]);let j=x.map(e=>({value:e.model_group,label:e.model_group}));return(0,a.jsxs)(p.A,{title:"Evaluation Settings",open:e,onCancel:t,width:640,footer:null,closeIcon:(0,a.jsx)(tJ.A,{}),destroyOnClose:!0,children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:s?`Configure AI evaluation for ${s}`:"Configure AI evaluation for re-running on logs"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Evaluation Prompt"}),(0,a.jsx)("button",{type:"button",onClick:()=>i(tX),className:"text-xs text-indigo-600 hover:text-indigo-700",children:"Reset to default"})]}),(0,a.jsx)(v.A.TextArea,{value:n,onChange:e=>i(e.target.value),rows:6,className:"font-mono text-sm"}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"System prompt sent to the evaluation model. Output is structured via response_format."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Response Schema"}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mb-1",children:"response_format: json_schema"}),(0,a.jsx)(v.A.TextArea,{value:d,onChange:e=>c(e.target.value),rows:6,className:"font-mono text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Model"}),(0,a.jsx)(f.A,{placeholder:g?"Loading modelsâ€¦":"Select a model",value:m??void 0,onChange:u,options:j,style:{width:"100%"},showSearch:!0,optionFilterProp:"label",loading:g,notFoundContent:r?"No models available":"Sign in to see models"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2 mt-6 pt-4 border-t border-gray-100",children:[(0,a.jsx)(I.Ay,{onClick:t,children:"Cancel"}),(0,a.jsx)(I.Ay,{type:"primary",icon:(0,a.jsx)(tQ.A,{}),onClick:()=>{m&&(l?.({prompt:n,schema:d,model:m}),t())},disabled:!m,children:"Run Evaluation"})]})]})}var t1=s(91242),t2=s(58617);let t5={blocked:{icon:tJ.A,color:"text-red-600",bg:"bg-red-50",border:"border-red-200",label:"Blocked"},passed:{icon:t1.A,color:"text-green-600",bg:"bg-green-50",border:"border-green-200",label:"Passed"},flagged:{icon:tV.A,color:"text-amber-600",bg:"bg-amber-50",border:"border-amber-200",label:"Flagged"}};function t4({guardrailName:e,filterAction:t="all",logs:s=[],logsLoading:r=!1,totalLogs:l,accessToken:i=null,startDate:d="",endDate:c=""}){let[m,u]=(0,o.useState)(10),[x,p]=(0,o.useState)(t),[h,g]=(0,o.useState)(null),[y,f]=(0,o.useState)(!1),j=s.filter(e=>"all"===x||e.action===x).slice(0,m),b=l??s.length,v=d?tR()(d).utc().format("YYYY-MM-DD HH:mm:ss"):tR()().subtract(24,"hours").utc().format("YYYY-MM-DD HH:mm:ss"),_=c?tR()(c).utc().endOf("day").format("YYYY-MM-DD HH:mm:ss"):tR()().utc().format("YYYY-MM-DD HH:mm:ss"),{data:A}=(0,tG.I)({queryKey:["spend-log-by-request",h,v,_],queryFn:async()=>i&&h?await (0,n.uiSpendLogsCall)({accessToken:i,start_date:v,end_date:_,page:1,page_size:10,params:{request_id:h}}):null,enabled:!!(i&&h&&y)}),N=A?.data?.[0]??null;return(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-base font-semibold text-gray-900",children:e?`Logs â€” ${e}`:"Request Logs"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:r?"Loadingâ€¦":s.length>0?`Showing ${j.length} of ${b} entries`:"No logs for this period. Select a guardrail and date range."})]}),s.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"flex items-center gap-1",children:["all","blocked","flagged","passed"].map(e=>(0,a.jsx)(I.Ay,{type:x===e?"primary":"default",size:"small",onClick:()=>p(e),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),(0,a.jsx)("div",{className:"h-4 w-px bg-gray-200"}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500 mr-1",children:"Sample:"}),[10,50,100].map(e=>(0,a.jsx)(I.Ay,{type:m===e?"primary":"default",size:"small",onClick:()=>u(e),children:e},e))]})]})]})}),r&&(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(ew.A,{})}),!r&&0===j.length&&(0,a.jsx)("div",{className:"py-12 text-center text-sm text-gray-500",children:"No logs to display. Adjust filters or date range."}),!r&&j.length>0&&(0,a.jsx)("div",{className:"divide-y divide-gray-100",children:j.map(e=>{let t=t5[e.action],s=t.icon;return(0,a.jsxs)("button",{type:"button",onClick:()=>{g(e.id),f(!0)},className:"w-full text-left px-4 py-3 hover:bg-gray-50 transition-colors flex items-start gap-3",children:[(0,a.jsx)(s,{className:`w-4 h-4 mt-0.5 flex-shrink-0 ${t.color}`}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[(0,a.jsx)("span",{className:`inline-flex items-center px-2 py-0.5 text-xs font-medium rounded border ${t.bg} ${t.color} ${t.border}`,children:t.label}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:e.timestamp}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"\xb7"}),e.model&&(0,a.jsx)("span",{className:"text-xs text-gray-500",children:e.model})]}),(0,a.jsx)("p",{className:"text-sm text-gray-800 truncate",children:e.input_snippet??e.input??"â€”"})]}),(0,a.jsx)(tm.A,{className:"w-4 h-4 text-gray-400 flex-shrink-0 mt-1"})]},e.id)})}),(0,a.jsx)(t2.S,{open:y,onClose:()=>{f(!1),g(null)},logEntry:N,accessToken:i,allLogs:N?[N]:[],startTime:v})]})}function t6({label:e,value:t,valueColor:s="text-gray-900",icon:r,subtitle:l}){return(0,a.jsxs)("div",{className:"h-full bg-white border border-gray-200 rounded-lg p-5 flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:e}),r&&(0,a.jsx)("span",{className:"text-gray-400",children:r})]}),(0,a.jsx)("div",{className:`text-3xl font-semibold ${s} tracking-tight`,children:t}),l&&(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:l})]})}let t3={healthy:{bg:"bg-green-50",text:"text-green-700",dot:"bg-green-500"},warning:{bg:"bg-amber-50",text:"text-amber-700",dot:"bg-amber-500"},critical:{bg:"bg-red-50",text:"text-red-700",dot:"bg-red-500"}};function t8({guardrailId:e,onBack:t,accessToken:s=null,startDate:r,endDate:l}){let{t:i,locale:d}=(0,tz.o)(),c=(e,t,s)=>{let a=i(e);return a!==e?a:"zh-CN"===d?t:s},[m,u]=(0,o.useState)("overview"),[x,p]=(0,o.useState)(!1),[h,g]=(0,o.useState)(1),{data:y,isLoading:f,error:j}=(0,tG.I)({queryKey:["guardrails-usage-detail",e,r,l],queryFn:()=>(0,n.getGuardrailsUsageDetail)(s,e,r,l),enabled:!!s&&!!e}),{data:b,isLoading:v}=(0,tG.I)({queryKey:["guardrails-usage-logs",e,h,50],queryFn:()=>(0,n.getGuardrailsUsageLogs)(s,{guardrailId:e,page:h,pageSize:50,startDate:r,endDate:l}),enabled:!!s&&!!e}),_=(0,o.useMemo)(()=>(b?.logs??[]).map(e=>({id:e.id,timestamp:e.timestamp,action:e.action,score:e.score,model:e.model,input_snippet:e.input_snippet,output_snippet:e.output_snippet,reason:e.reason})),[b?.logs]),A=y?{name:y.guardrail_name,description:y.description??"",status:y.status,provider:y.provider,type:y.type,requestsEvaluated:y.requestsEvaluated,failRate:y.failRate,avgScore:y.avgScore,avgLatency:y.avgLatency}:{name:e,description:"",status:"healthy",provider:"â€”",type:"â€”",requestsEvaluated:0,failRate:0,avgScore:void 0,avgLatency:void 0},N=t3[A.status]??t3.healthy;return f&&!y?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(ew.A,{size:"large"})}):j&&!y?(0,a.jsxs)("div",{children:[(0,a.jsx)(I.Ay,{type:"link",icon:(0,a.jsx)(tY.A,{}),onClick:t,className:"pl-0 mb-4",children:c("guardrailsMonitor.detail.backToOverview","è¿”å›žæ€»è§ˆ","Back to Overview")}),(0,a.jsx)("p",{className:"text-red-600",children:c("guardrailsMonitor.detail.loadFailed","åŠ è½½æŠ¤æ è¯¦æƒ…å¤±è´¥ã€‚","Failed to load guardrail details.")})]}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)(I.Ay,{type:"link",icon:(0,a.jsx)(tY.A,{}),onClick:t,className:"pl-0 mb-4",children:c("guardrailsMonitor.detail.backToOverview","è¿”å›žæ€»è§ˆ","Back to Overview")}),(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-1",children:[(0,a.jsx)(tU.A,{className:"text-xl text-gray-400"}),(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:A.name}),(0,a.jsxs)("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-0.5 text-xs font-medium rounded-full ${N.bg} ${N.text}`,children:[(0,a.jsx)("span",{className:`w-1.5 h-1.5 rounded-full ${N.dot}`}),"healthy"===A.status?c("guardrailsMonitor.status.healthy","å¥åº·","Healthy"):"warning"===A.status?c("guardrailsMonitor.status.warning","è­¦å‘Š","Warning"):"critical"===A.status?c("guardrailsMonitor.status.critical","ä¸¥é‡","Critical"):A.status]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 ml-8",children:A.description})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-1 text-xs font-medium rounded-md bg-indigo-50 text-indigo-700 border border-indigo-200",children:A.provider}),(0,a.jsx)(I.Ay,{type:"default",icon:(0,a.jsx)(tH.A,{}),onClick:()=>p(!0),title:c("guardrailsMonitor.actions.evaluationSettings","è¯„ä¼°è®¾ç½®","Evaluation settings")})]})]})]}),(0,a.jsx)(tW.A,{activeKey:m,onChange:u,items:[{key:"overview",label:c("guardrailsMonitor.detail.tabs.overview","æ¦‚è§ˆ","Overview")},{key:"logs",label:c("guardrailsMonitor.detail.tabs.logs","æ—¥å¿—","Logs")}]}),"overview"===m&&(0,a.jsxs)("div",{className:"space-y-6 mt-4",children:[(0,a.jsxs)(tK.x,{numItems:2,numItemsMd:5,className:"gap-4",children:[(0,a.jsx)(tK.f,{children:(0,a.jsx)(t6,{label:c("guardrailsMonitor.detail.metrics.requestsEvaluated","è¯„ä¼°è¯·æ±‚æ•°","Requests Evaluated"),value:A.requestsEvaluated.toLocaleString()})}),(0,a.jsx)(tK.f,{children:(0,a.jsx)(t6,{label:c("guardrailsMonitor.detail.metrics.failRate","å¤±è´¥çŽ‡","Fail Rate"),value:`${A.failRate}%`,valueColor:A.failRate>15?"text-red-600":A.failRate>5?"text-amber-600":"text-green-600",subtitle:c("guardrailsMonitor.detail.metrics.blockedCount",`{count} å·²æ‹¦æˆª`,"{count} blocked").replace("{count}",Math.round(A.requestsEvaluated*A.failRate/100).toLocaleString()),icon:A.failRate>15?(0,a.jsx)(tV.A,{className:"text-red-400"}):void 0})}),(0,a.jsx)(tK.f,{children:(0,a.jsx)(t6,{label:c("guardrailsMonitor.detail.metrics.avgLatencyAdded","å¹³å‡æ–°å¢žå»¶è¿Ÿ","Avg. latency added"),value:null!=A.avgLatency?`${Math.round(A.avgLatency)}ms`:"â€”",valueColor:null!=A.avgLatency?A.avgLatency>150?"text-red-600":A.avgLatency>50?"text-amber-600":"text-green-600":"text-gray-500",subtitle:null!=A.avgLatency?c("guardrailsMonitor.detail.metrics.perRequestAvg","æ¯è¯·æ±‚ï¼ˆå¹³å‡ï¼‰","Per request (avg)"):c("guardrailsMonitor.detail.metrics.noData","æš‚æ— æ•°æ®","No data")})})]}),(0,a.jsx)(t4,{guardrailName:A.name,filterAction:"all",logs:_,logsLoading:v,totalLogs:b?.total??0,accessToken:s,startDate:r,endDate:l})]}),"logs"===m&&(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(t4,{guardrailName:A.name,logs:_,logsLoading:v,totalLogs:b?.total??0,accessToken:s,startDate:r,endDate:l})}),(0,a.jsx)(t0,{open:x,onClose:()=>p(!1),guardrailName:A.name,accessToken:s})]})}var t9=s(88962),t7=s(27309),se=s(13121),st=s(21088);function ss({data:e}){let{t,locale:s}=(0,tz.o)(),r=(e,a,r)=>{let l=t(e);return l!==e?l:"zh-CN"===s?a:r},l=e&&e.length>0?e:[];return(0,a.jsxs)(st.Zp,{className:"bg-white border border-gray-200",children:[(0,a.jsx)(st.hE,{className:"text-base font-semibold text-gray-900 mb-4",children:r("guardrailsMonitor.chart.requestOutcomes","è¯·æ±‚ç»“æžœè¶‹åŠ¿","Request Outcomes Over Time")}),(0,a.jsx)("div",{className:"h-80 min-h-[280px]",children:l.length>0?(0,a.jsx)(st.Es,{data:l,index:"date",categories:["passed","blocked"],colors:["green","red"],valueFormatter:e=>e.toLocaleString(),yAxisWidth:48,showLegend:!0,stack:!0}):(0,a.jsx)("div",{className:"flex items-center justify-center h-full text-sm text-gray-500",children:r("guardrailsMonitor.chart.noData","è¯¥æ—¶é—´æ®µæš‚æ— å›¾è¡¨æ•°æ®","No chart data for this period")})})]})}let sa={Bedrock:"bg-orange-100 text-orange-700 border-orange-200","Google Cloud":"bg-sky-100 text-sky-700 border-sky-200",Silinex:"bg-indigo-100 text-indigo-700 border-indigo-200",Custom:"bg-gray-100 text-gray-600 border-gray-200"};function sr({accessToken:e=null,startDate:t,endDate:s,onSelectGuardrail:r}){let{t:l,locale:i}=(0,tz.o)(),d=(e,t,s)=>{let a=l(e);return a!==e?a:"zh-CN"===i?t:s},[c,m]=(0,o.useState)("failRate"),[u,x]=(0,o.useState)("desc"),[p,h]=(0,o.useState)(!1),{data:g,isLoading:y,error:f}=(0,tG.I)({queryKey:["guardrails-usage-overview",t,s],queryFn:()=>(0,n.getGuardrailsUsageOverview)(e,t,s),enabled:!!e}),j=g?.rows??[],b=(0,o.useMemo)(()=>{let e,t,s,a;return g?{totalRequests:g.totalRequests??0,totalBlocked:g.totalBlocked??0,passRate:String(g.passRate??0),avgLatency:j.length?Math.round(j.reduce((e,t)=>e+(t.avgLatency??0),0)/j.length):0,count:j.length}:(e=j.reduce((e,t)=>e+t.requestsEvaluated,0),t=j.reduce((e,t)=>e+Math.round(t.requestsEvaluated*t.failRate/100),0),s=e>0?((1-t/e)*100).toFixed(1):"0",{totalRequests:e,totalBlocked:t,passRate:s,avgLatency:(a=j.filter(e=>null!=e.avgLatency)).length>0?Math.round(a.reduce((e,t)=>e+(t.avgLatency??0),0)/a.length):0,count:j.length})},[g,j]),v=g?.chart,_=(0,o.useMemo)(()=>[...j].sort((e,t)=>{let s="desc"===u?-1:1,a=e[c]??0,r=t[c]??0;return(Number(a)-Number(r))*s}),[j,c,u]),A=[{title:d("guardrailsMonitor.table.guardrail","æŠ¤æ ","Guardrail"),dataIndex:"name",key:"name",render:(e,t)=>(0,a.jsx)("button",{type:"button",className:"text-sm font-medium text-gray-900 hover:text-indigo-600 text-left",onClick:()=>r(t.id),children:e})},{title:d("guardrailsMonitor.table.provider","æä¾›å•†","Provider"),dataIndex:"provider",key:"provider",render:e=>(0,a.jsx)("span",{className:`inline-flex items-center px-2 py-0.5 text-xs font-medium rounded border ${sa[e]??sa.Custom}`,children:e})},{title:d("guardrailsMonitor.table.requests","è¯·æ±‚æ•°","Requests"),dataIndex:"requestsEvaluated",key:"requestsEvaluated",align:"right",sorter:!0,sortOrder:"requestsEvaluated"===c?"desc"===u?"descend":"ascend":null,render:e=>e.toLocaleString()},{title:d("guardrailsMonitor.table.failRate","å¤±è´¥çŽ‡","Fail Rate"),dataIndex:"failRate",key:"failRate",align:"right",sorter:!0,sortOrder:"failRate"===c?"desc"===u?"descend":"ascend":null,render:(e,t)=>(0,a.jsxs)("span",{className:e>15?"text-red-600":e>5?"text-amber-600":"text-green-600",children:[e,"%","up"===t.trend&&(0,a.jsx)("span",{className:"ml-1 text-xs text-red-400",children:"â†‘"}),"down"===t.trend&&(0,a.jsx)("span",{className:"ml-1 text-xs text-green-400",children:"â†“"})]})},{title:d("guardrailsMonitor.table.avgLatencyAdded","å¹³å‡æ–°å¢žå»¶è¿Ÿ","Avg. latency added"),dataIndex:"avgLatency",key:"avgLatency",align:"right",sorter:!0,sortOrder:"avgLatency"===c?"desc"===u?"descend":"ascend":null,render:e=>(0,a.jsx)("span",{className:null==e?"text-gray-400":e>150?"text-red-600":e>50?"text-amber-600":"text-green-600",children:null!=e?`${e}ms`:"â€”"})},{title:d("guardrailsMonitor.table.status","çŠ¶æ€","Status"),dataIndex:"status",key:"status",align:"center",render:e=>(0,a.jsxs)("span",{className:"inline-flex items-center gap-1.5",children:[(0,a.jsx)("span",{className:`w-2 h-2 rounded-full ${"healthy"===e?"bg-green-500":"warning"===e?"bg-amber-500":"bg-red-500"}`}),(0,a.jsx)("span",{className:"text-xs text-gray-600 capitalize",children:"healthy"===e?d("guardrailsMonitor.status.healthy","å¥åº·","Healthy"):"warning"===e?d("guardrailsMonitor.status.warning","è­¦å‘Š","Warning"):"critical"===e?d("guardrailsMonitor.status.critical","ä¸¥é‡","Critical"):e})]})}],N=["failRate","requestsEvaluated","avgLatency"];return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(tU.A,{className:"text-lg text-indigo-500"}),(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:d("guardrailsMonitor.title","æŠ¤æ ç›‘æŽ§","Guardrails Monitor")})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:d("guardrailsMonitor.subtitle","ç›‘æŽ§æ‰€æœ‰è¯·æ±‚ä¸­çš„æŠ¤æ è¡¨çŽ°","Monitor guardrail performance across all requests")})]}),(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsx)(I.Ay,{type:"default",icon:(0,a.jsx)(tp.A,{}),title:d("guardrailsMonitor.actions.comingSoon","å³å°†ä¸Šçº¿","Coming soon"),children:d("guardrailsMonitor.actions.exportData","å¯¼å‡ºæ•°æ®","Export Data")})})]}),(0,a.jsxs)(se.A,{numItems:2,numItemsLg:5,className:"gap-4 mb-6 items-stretch",children:[(0,a.jsx)(t7.A,{className:"flex flex-col",children:(0,a.jsx)(t6,{label:d("guardrailsMonitor.metrics.totalEvaluations","æ€»è¯„ä¼°æ¬¡æ•°","Total Evaluations"),value:b.totalRequests.toLocaleString()})}),(0,a.jsx)(t7.A,{className:"flex flex-col",children:(0,a.jsx)(t6,{label:d("guardrailsMonitor.metrics.blockedRequests","æ‹¦æˆªè¯·æ±‚","Blocked Requests"),value:b.totalBlocked.toLocaleString(),valueColor:"text-red-600",icon:(0,a.jsx)(tV.A,{className:"text-red-400"})})}),(0,a.jsx)(t7.A,{className:"flex flex-col",children:(0,a.jsx)(t6,{label:d("guardrailsMonitor.metrics.passRate","é€šè¿‡çŽ‡","Pass Rate"),value:`${b.passRate}%`,valueColor:"text-green-600",icon:(0,a.jsx)(t9.A,{className:"text-green-400"})})}),(0,a.jsx)(t7.A,{className:"flex flex-col",children:(0,a.jsx)(t6,{label:d("guardrailsMonitor.metrics.avgLatencyAdded","å¹³å‡æ–°å¢žå»¶è¿Ÿ","Avg. latency added"),value:`${b.avgLatency}ms`,valueColor:b.avgLatency>150?"text-red-600":b.avgLatency>50?"text-amber-600":"text-green-600"})}),(0,a.jsx)(t7.A,{className:"flex flex-col",children:(0,a.jsx)(t6,{label:d("guardrailsMonitor.metrics.activeGuardrails","ç”Ÿæ•ˆä¸­çš„æŠ¤æ ","Active Guardrails"),value:b.count})})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(ss,{data:v})}),(0,a.jsxs)(ef.A,{className:"bg-white border border-gray-200 rounded-lg",children:[(y||f)&&(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center gap-2",children:[y&&(0,a.jsx)(ew.A,{size:"small"}),f&&(0,a.jsx)("span",{className:"text-sm text-red-600",children:d("guardrailsMonitor.error.loadData","åŠ è½½æ•°æ®å¤±è´¥ï¼Œè¯·é‡è¯•ã€‚","Failed to load data. Try again.")})]}),(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(ek.A,{className:"text-base font-semibold text-gray-900",children:d("guardrailsMonitor.table.title","æŠ¤æ è¡¨çŽ°","Guardrail Performance")}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:d("guardrailsMonitor.table.description","ç‚¹å‡»æŠ¤æ å¯æŸ¥çœ‹è¯¦æƒ…ã€æ—¥å¿—ä¸Žé…ç½®","Click a guardrail to view details, logs, and configuration")})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(I.Ay,{type:"default",icon:(0,a.jsx)(tH.A,{}),onClick:()=>h(!0),title:d("guardrailsMonitor.actions.evaluationSettings","è¯„ä¼°è®¾ç½®","Evaluation settings")})})]}),(0,a.jsx)(ta.A,{columns:A,dataSource:_,rowKey:"id",pagination:!1,loading:y,onChange:(e,t,s)=>{s?.field&&N.includes(s.field)&&(m(s.field),x("ascend"===s.order?"asc":"desc"))},locale:0!==j.length||y?void 0:{emptyText:d("guardrailsMonitor.table.noData","è¯¥æ—¶é—´æ®µæš‚æ— æ•°æ®","No data for this period")},onRow:e=>({onClick:()=>r(e.id),style:{cursor:"pointer"}})})]}),(0,a.jsx)(t0,{open:p,onClose:()=>h(!1),accessToken:e})]})}let sl=new Date,sn=new Date;function si({accessToken:e=null}){let[t,s]=(0,o.useState)({type:"overview"}),r=(0,o.useMemo)(()=>new Date(sn),[]),l=(0,o.useMemo)(()=>new Date(sl),[]),[i,d]=(0,o.useState)({from:r,to:l}),c=i.from?(0,n.formatDate)(i.from):"",m=i.to?(0,n.formatDate)(i.to):"",u=(0,o.useCallback)(e=>{d(e)},[]);return(0,a.jsxs)("div",{className:"p-6 w-full min-w-0 flex-1",children:[(0,a.jsx)("div",{className:"flex items-center justify-end mb-4",children:(0,a.jsx)(tB,{value:i,onValueChange:u,label:"",showTimeRange:!1})}),"overview"===t.type?(0,a.jsx)(sr,{accessToken:e,startDate:c,endDate:m,onSelectGuardrail:e=>{s({type:"detail",guardrailId:e})}}):(0,a.jsx)(t8,{guardrailId:t.guardrailId,onBack:()=>{s({type:"overview"})},accessToken:e,startDate:c,endDate:m})]})}sn.setDate(sn.getDate()-7);var so=s(16592),sd=s(21998),sc=s(84490),sm=s(73694),su=s(72782),sx=s(80733),sp=s(54876),sh=s(98931),sg=s(32280),sy=s(65150),sf=s(43502),sj=s(78896),sb=s(66793),sv=s(41326),s_=s(5772),sA=s(39092),sN=s.n(sA);let{Text:sk}=sv.A,sw=({litellmParams:e,accessToken:t,onTestComplete:s})=>{let[r,l]=(0,o.useState)(!0),[i,d]=(0,o.useState)(null),[c,m]=(0,o.useState)(!1);(0,o.useEffect)(()=>{(async()=>{l(!0);try{let s=await (0,n.testSearchToolConnection)(t,e);d(s),"success"===s.status&&eP.Ay.success("Connection test successful!")}catch(e){d({status:"error",message:e instanceof Error?e.message:"Unknown error occurred",error_type:"NetworkError"})}finally{l(!1),s&&s()}})()},[t,e,s]);let u=i?.message?(e=>{if(!e)return"Unknown error";let t=e.split("stack trace:")[0].trim().replace(/^litellm\.(.*?)Error:\s*/,"").replace(/^AuthenticationError:\s*/,"");if(t.includes("<html>")||t.includes("<!DOCTYPE")){let e=t.match(/<title>(.*?)<\/title>/);return e?e[1]:t.includes("401")||t.includes("Authorization Required")?"Authentication failed: Invalid API key or credentials":"Authentication error - please check your API key"}return t.length>200?t.substring(0,200)+"...":t})(i.message):"Unknown error";return r?(0,a.jsx)("div",{style:{padding:"24px",borderRadius:"8px",backgroundColor:"#fff"},children:(0,a.jsxs)("div",{style:{textAlign:"center",padding:"32px 20px"},className:"jsx-dc9a0e2d897fe63b",children:[(0,a.jsx)("div",{style:{marginBottom:"16px"},className:"jsx-dc9a0e2d897fe63b loading-spinner",children:(0,a.jsx)("div",{style:{border:"3px solid #f3f3f3",borderTop:"3px solid #1890ff",borderRadius:"50%",width:"30px",height:"30px",animation:"spin 1s linear infinite",margin:"0 auto"},className:"jsx-dc9a0e2d897fe63b"})}),(0,a.jsxs)(sk,{style:{fontSize:"16px"},children:["Testing connection to ",e.search_provider||"search provider","..."]}),(0,a.jsx)(sN(),{id:"dc9a0e2d897fe63b",children:"@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}"})]})}):i?(0,a.jsxs)("div",{style:{padding:"24px",borderRadius:"8px",backgroundColor:"#fff"},children:["success"===i.status?(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"32px 20px"},children:[(0,a.jsx)("div",{style:{color:"#52c41a",fontSize:"24px",display:"flex",alignItems:"center"},children:(0,a.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"check-circle",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,a.jsx)("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"})})}),(0,a.jsxs)("div",{style:{marginLeft:"12px"},children:[(0,a.jsxs)(sk,{type:"success",style:{fontSize:"18px",fontWeight:500,display:"block"},children:["Connection to ",e.search_provider," successful!"]}),i.test_query&&(0,a.jsxs)(sk,{style:{fontSize:"14px",color:"#666",marginTop:"8px",display:"block"},children:["Test query: ",(0,a.jsx)("code",{style:{backgroundColor:"#f0f0f0",padding:"2px 6px",borderRadius:"4px"},children:i.test_query})]}),void 0!==i.results_count&&(0,a.jsxs)(sk,{style:{fontSize:"14px",color:"#666",display:"block"},children:["Results retrieved: ",i.results_count]})]})]}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"20px"},children:[(0,a.jsx)(tV.A,{style:{color:"#ff4d4f",fontSize:"24px",marginRight:"12px"}}),(0,a.jsxs)(sk,{type:"danger",style:{fontSize:"18px",fontWeight:500},children:["Connection to ",e.search_provider||"search provider"," failed"]})]}),(0,a.jsxs)("div",{style:{backgroundColor:"#fff2f0",border:"1px solid #ffccc7",borderRadius:"8px",padding:"16px",marginBottom:"20px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.03)"},children:[(0,a.jsxs)(sk,{strong:!0,style:{display:"block",marginBottom:"8px"},children:["Error:"," "]}),(0,a.jsx)(sk,{type:"danger",style:{fontSize:"14px",lineHeight:"1.5"},children:u}),i.error_type&&(0,a.jsx)("div",{style:{marginTop:"8px"},children:(0,a.jsxs)(sk,{style:{fontSize:"13px",color:"#666"},children:["Error type:"," ",(0,a.jsx)("code",{style:{backgroundColor:"#ffebee",padding:"2px 6px",borderRadius:"4px",color:"#d32f2f"},children:i.error_type})]})}),i.message&&(0,a.jsx)("div",{style:{marginTop:"12px"},children:(0,a.jsx)(I.Ay,{type:"link",onClick:()=>m(!c),style:{paddingLeft:0,height:"auto"},children:c?"Hide Details":"Show Details"})})]}),c&&(0,a.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,a.jsx)(sk,{strong:!0,style:{display:"block",marginBottom:"8px",fontSize:"15px"},children:"Full Error Details"}),(0,a.jsx)("pre",{style:{backgroundColor:"#f5f5f5",padding:"16px",borderRadius:"8px",fontSize:"13px",maxHeight:"200px",overflow:"auto",border:"1px solid #e8e8e8",lineHeight:"1.5",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:i.message})]}),(0,a.jsxs)("div",{style:{backgroundColor:"#fffbf0",border:"1px solid #ffe58f",borderLeft:"4px solid #faad14",borderRadius:"8px",padding:"16px"},children:[(0,a.jsx)(sk,{strong:!0,style:{display:"block",marginBottom:"8px",color:"#d48806"},children:"Troubleshooting tips:"}),(0,a.jsxs)("ul",{style:{margin:"8px 0",paddingLeft:"20px",color:"#ad6800"},children:[(0,a.jsx)("li",{style:{marginBottom:"6px"},children:"Verify your API key is correct and active"}),(0,a.jsx)("li",{style:{marginBottom:"6px"},children:"Check if the search provider service is operational"}),(0,a.jsx)("li",{style:{marginBottom:"6px"},children:"Ensure you have sufficient credits/quota with the provider"}),(0,a.jsx)("li",{style:{marginBottom:"6px"},children:"Review the provider's documentation for any additional requirements"})]})]})]})}),(0,a.jsx)(j.A,{style:{margin:"24px 0 16px"}}),(0,a.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,a.jsx)(I.Ay,{type:"link",href:"https://docs.litellm.ai/docs/search",target:"_blank",icon:(0,a.jsx)(e9.A,{}),children:"View Search Documentation"})})]}):null},{TextArea:sC}=v.A,sS=({providerName:e,displayName:t})=>(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,a.jsx)(s_.default,{src:`../ui/assets/logos/${e}.png`,alt:"",width:20,height:20,style:{marginRight:"8px",objectFit:"contain"},onError:e=>{e.currentTarget.style.display="none"}}),(0,a.jsx)("span",{children:t})]}),sT=({userRole:e,accessToken:t,onCreateSuccess:s,isModalVisible:r,setModalVisible:l})=>{let[i]=g.A.useForm(),[d,c]=(0,o.useState)(!1),[m,u]=(0,o.useState)({}),[x,h]=(0,o.useState)(!1),[y,j]=(0,o.useState)(!1),[b,v]=(0,o.useState)(""),{data:_,isLoading:A}=(0,tG.I)({queryKey:["searchProviders"],queryFn:()=>{if(!t)throw Error("Access Token required");return(0,n.fetchAvailableSearchProviders)(t)},enabled:!!t&&r}),N=_?.providers||[],k=async e=>{c(!0);try{let a={search_tool_name:e.search_tool_name,litellm_params:{search_provider:e.search_provider,api_key:e.api_key,api_base:e.api_base,timeout:e.timeout?parseFloat(e.timeout):void 0,max_retries:e.max_retries?parseInt(e.max_retries):void 0},search_tool_info:e.description?{description:e.description}:void 0};if(console.log("Creating search tool with payload:",a),null!=t){let e=await (0,n.createSearchTool)(t,a);eP.Ay.success("Search tool created successfully"),i.resetFields(),u({}),l(!1),s(e)}}catch(e){eP.Ay.error("Error creating search tool: "+e)}finally{c(!1)}},w=async()=>{try{await i.validateFields(["search_provider","api_key"]),j(!0),v(`test-${Date.now()}`),h(!0)}catch(e){eP.Ay.error("Please fill in Search Provider and API Key before testing")}};return(o.useEffect(()=>{r||u({})},[r]),(0,eg.OY)(e))?(0,a.jsxs)(p.A,{title:(0,a.jsxs)("div",{className:"flex items-center space-x-3 pb-4 border-b border-gray-100",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDD0D"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Add New Search Tool"})]}),open:r,width:800,onCancel:()=>{i.resetFields(),u({}),l(!1)},footer:null,className:"top-8",styles:{body:{padding:"24px"},header:{padding:"24px 24px 0 24px",border:"none"}},children:[(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsxs)(g.A,{form:i,onFinish:k,onValuesChange:(e,t)=>u(t),layout:"vertical",className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,a.jsx)(g.A.Item,{label:(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["Search Tool Name",(0,a.jsx)(em.A,{title:"A unique name to identify this search tool configuration (e.g., 'perplexity-search', 'tavily-news-search').",children:(0,a.jsx)(e9.A,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),name:"search_tool_name",rules:[{required:!0,message:"Please enter a search tool name"},{pattern:/^[a-zA-Z0-9_-]+$/,message:"Name can only contain letters, numbers, hyphens, and underscores"}],children:(0,a.jsx)(e8.k,{placeholder:"e.g., perplexity-search, my-tavily-tool",className:"rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500"})}),(0,a.jsx)(g.A.Item,{label:(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["Search Provider",(0,a.jsx)(em.A,{title:"Select the search provider you want to use. Each provider has different capabilities and pricing.",children:(0,a.jsx)(e9.A,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),name:"search_provider",rules:[{required:!0,message:"Please select a search provider"}],children:(0,a.jsx)(f.A,{placeholder:"Select a search provider",className:"rounded-lg",size:"large",loading:A,showSearch:!0,optionFilterProp:"children",optionLabelProp:"label",children:N.map(e=>(0,a.jsx)(f.A.Option,{value:e.provider_name,label:(0,a.jsx)(sS,{providerName:e.provider_name,displayName:e.ui_friendly_name}),children:(0,a.jsx)(sS,{providerName:e.provider_name,displayName:e.ui_friendly_name})},e.provider_name))})}),(0,a.jsx)(g.A.Item,{label:(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["API Key",(0,a.jsx)(em.A,{title:"The API key for authenticating with the search provider. This will be securely stored.",children:(0,a.jsx)(e9.A,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),name:"api_key",rules:[{required:!1,message:"Please enter an API key"}],children:(0,a.jsx)(e8.k,{type:"password",placeholder:"Enter your API key",className:"rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500"})}),(0,a.jsx)(g.A.Item,{label:(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Description (Optional)"}),name:"description",children:(0,a.jsx)(sC,{rows:3,placeholder:"Brief description of this search tool's purpose",className:"rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500"})})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center pt-6 border-t border-gray-100",children:[(0,a.jsx)(em.A,{title:"Get help on our github",children:(0,a.jsx)(sv.A.Link,{href:"https://github.com/BerriAI/litellm/issues",target:"_blank",children:"Need Help?"})}),(0,a.jsxs)("div",{className:"space-x-2",children:[(0,a.jsx)(e8.$,{onClick:w,loading:y,children:"Test Connection"}),(0,a.jsx)(e8.$,{loading:d,type:"submit",children:"Add Search Tool"})]})]})]})}),(0,a.jsx)(p.A,{title:"Connection Test Results",open:x,onCancel:()=>{h(!1),j(!1)},footer:[(0,a.jsx)(e8.$,{onClick:()=>{h(!1),j(!1)},children:"Close"},"close")],width:700,children:x&&t&&(0,a.jsx)(sw,{litellmParams:{search_provider:m.search_provider,api_key:m.api_key,api_base:m.api_base},accessToken:t,onTestComplete:()=>j(!1)},b)})]}):null};var sI=s(82426),sM=s(94514),sD=s(67635),sE=s(22347);let{Text:sP}=sv.A,sq=({searchToolName:e,accessToken:t,className:s=""})=>{let[r,l]=(0,o.useState)(""),[i,d]=(0,o.useState)(!1),[c,m]=(0,o.useState)([]),[u,x]=(0,o.useState)({}),[p,h]=(0,o.useState)(!1),g=async()=>{if(!r.trim())return void y.Ay.warning("Please enter a search query");d(!0);let s=performance.now();try{let a=await (0,n.searchToolQueryCall)(t,e,r),l=performance.now(),i=Math.round(l-s),o={query:r,response:a,timestamp:Date.now(),latency:i};m(e=>[o,...e])}catch(e){console.error("Error querying search tool:",e),eP.Ay.fromBackend("Failed to query search tool")}finally{d(!1)}},f=e=>new Date(e).toLocaleString(),j=(0,a.jsx)(tc.A,{style:{fontSize:24},spin:!0}),b=c.length>0?c[0]:null;return(0,a.jsxs)(ef.A,{className:"mt-6",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(ek.A,{children:"Test Search Tool"})}),(0,a.jsxs)("div",{className:"flex flex-col",style:{minHeight:"600px"},children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"flex items-stretch gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center flex-1 bg-white rounded-lg px-4 transition-all duration-200",style:{border:p?"2px solid #3b82f6":"2px solid #e5e7eb",boxShadow:p?"0 0 0 3px rgba(59, 130, 246, 0.1)":"0 1px 2px 0 rgba(0, 0, 0, 0.05)",height:"48px"},children:[(0,a.jsx)(sE.A,{className:"text-gray-400 mr-3",style:{fontSize:"18px"}}),(0,a.jsx)(v.A,{value:r,onChange:e=>l(e.target.value),onFocus:()=>h(!0),onBlur:()=>h(!1),onPressEnter:e=>{e.shiftKey||(e.preventDefault(),g())},placeholder:"Enter your search query...",disabled:i,bordered:!1,style:{fontSize:"15px",padding:0,height:"100%",boxShadow:"none"}})]}),(0,a.jsx)(I.Ay,{type:"primary",onClick:g,disabled:i||!r.trim(),icon:(0,a.jsx)(sE.A,{}),loading:i,style:{height:"48px",paddingLeft:"24px",paddingRight:"24px",borderRadius:"8px",fontWeight:500,fontSize:"15px",backgroundColor:i||!r.trim()?void 0:"#1890ff",borderColor:i||!r.trim()?void 0:"#1890ff",boxShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.05)"},children:"Search"})]})}),(0,a.jsx)("div",{className:"flex-1",children:b||i?(0,a.jsxs)("div",{children:[i&&(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center py-16",children:[(0,a.jsx)(ew.A,{indicator:j}),(0,a.jsx)(sP,{className:"mt-4 text-gray-600 font-medium",children:"Searching..."})]}),b&&!i&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",style:{boxShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.05)"},children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(sP,{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Search Query"}),(0,a.jsx)("div",{className:"text-base font-semibold text-gray-900 mt-1.5",children:b.query})]}),(0,a.jsxs)("div",{className:"text-right ml-4",children:[(0,a.jsx)(sP,{className:"text-xs text-gray-500",children:f(b.timestamp)}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,a.jsxs)("div",{className:"text-sm font-semibold text-blue-600",children:[b.response?.results?.length||0," ",b.response?.results?.length===1?"result":"results"]}),void 0!==b.latency&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-gray-400",children:"â€¢"}),(0,a.jsxs)("div",{className:"text-sm font-semibold text-green-600",children:[b.latency,"ms"]})]})]})]})]})}),b.response&&b.response.results&&b.response.results.length>0?(0,a.jsx)("div",{className:"space-y-3",children:b.response.results.map((e,t)=>{let s=u[`0-${t}`]||!1;return(0,a.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden transition-all duration-200",style:{boxShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.05)"},onMouseEnter:e=>{e.currentTarget.style.boxShadow="0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",e.currentTarget.style.borderColor="#e0e7ff"},onMouseLeave:e=>{e.currentTarget.style.boxShadow="0 1px 2px 0 rgba(0, 0, 0, 0.05)",e.currentTarget.style.borderColor="#e5e7eb"},children:(0,a.jsxs)("div",{className:"p-5",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3 mb-2",children:[(0,a.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-lg font-semibold text-blue-600 hover:text-blue-700 flex-1 leading-snug",style:{textDecoration:"none"},onMouseEnter:e=>e.currentTarget.style.textDecoration="underline",onMouseLeave:e=>e.currentTarget.style.textDecoration="none",children:e.title}),(0,a.jsx)(I.Ay,{type:"text",size:"small",className:"flex-shrink-0",icon:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),onClick:()=>window.open(e.url,"_blank"),style:{color:"#6b7280"}})]}),(0,a.jsx)("div",{className:"text-sm text-green-700 mb-3 truncate font-medium",children:e.url}),(0,a.jsx)("div",{className:"text-sm text-gray-700 leading-relaxed",children:s?e.snippet:`${e.snippet.substring(0,200)}${e.snippet.length>200?"...":""}`}),e.snippet.length>200&&(0,a.jsx)(I.Ay,{type:"link",size:"small",className:"mt-3 p-0 h-auto",onClick:()=>{let e;return e=`0-${t}`,void x(t=>({...t,[e]:!t[e]}))},style:{fontSize:"13px",fontWeight:500,color:"#3b82f6"},children:s?"Show less":"Show more"})]})},t)})}):(0,a.jsxs)("div",{className:"text-center py-12 bg-gray-50 border border-gray-200 rounded-lg",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 mx-auto mb-4",children:(0,a.jsx)(sE.A,{style:{fontSize:"24px",color:"#9ca3af"}})}),(0,a.jsx)(sP,{className:"text-gray-600 font-medium",children:"No results found"}),(0,a.jsx)(sP,{className:"text-sm text-gray-500 mt-1",children:"Try a different search query"})]})]}),c.length>1&&(0,a.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)(sP,{className:"text-sm font-semibold text-gray-700",children:"Previous Searches"}),(0,a.jsx)(I.Ay,{onClick:()=>{m([]),x({}),eP.Ay.success("Search history cleared")},size:"small",type:"link",style:{fontSize:"13px",fontWeight:500},children:"Clear All"})]}),(0,a.jsx)("div",{className:"space-y-2",children:c.slice(1,6).map((e,t)=>(0,a.jsxs)("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg cursor-pointer transition-all duration-200 hover:bg-gray-100 hover:border-gray-300",onClick:()=>{l(e.query)},children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-800 truncate",children:e.query}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1.5 flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"font-medium text-blue-600",children:[e.response?.results?.length||0," ",e.response?.results?.length===1?"result":"results"]}),void 0!==e.latency&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"â€¢"}),(0,a.jsxs)("span",{className:"font-medium text-green-600",children:[e.latency,"ms"]})]}),(0,a.jsx)("span",{children:"â€¢"}),(0,a.jsx)("span",{children:f(e.timestamp)})]})]},t+1))})]})]}):(0,a.jsxs)("div",{className:"h-full flex flex-col items-center justify-center p-8",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-24 h-24 rounded-full bg-gray-100 mb-6",children:(0,a.jsx)(sE.A,{style:{fontSize:"48px",color:"#9ca3af"}})}),(0,a.jsx)(sP,{className:"text-lg text-gray-600 font-medium",children:"Test your search tool"}),(0,a.jsx)(sP,{className:"text-sm text-gray-500 mt-2",children:"Enter a query above to see search results"})]})})]})]})},sL=({searchTool:e,onBack:t,isEditing:s,accessToken:r,availableProviders:l})=>{var n;let i,[d,c]=(0,o.useState)({}),m=async(e,t)=>{await (0,tx.lW)(e)&&(c(e=>({...e,[t]:!0})),setTimeout(()=>{c(e=>({...e,[t]:!1}))},2e3))};return(0,a.jsxs)("div",{className:"p-4 max-w-full",children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(ey.A,{icon:eS.A,variant:"light",className:"mb-4",onClick:t,children:"Back to All Search Tools"}),(0,a.jsxs)("div",{className:"flex items-center cursor-pointer",children:[(0,a.jsx)(ek.A,{children:e.search_tool_name}),(0,a.jsx)(I.Ay,{type:"text",size:"small",icon:d["search-tool-name"]?(0,a.jsx)(sM.A,{size:12}):(0,a.jsx)(sD.A,{size:12}),onClick:()=>m(e.search_tool_name,"search-tool-name"),className:`left-2 z-10 transition-all duration-200 ${d["search-tool-name"]?"text-green-600 bg-green-50 border-green-200":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`})]}),(0,a.jsxs)("div",{className:"flex items-center cursor-pointer",children:[(0,a.jsx)(eN.A,{className:"text-gray-500 font-mono",children:e.search_tool_id}),(0,a.jsx)(I.Ay,{type:"text",size:"small",icon:d["search-tool-id"]?(0,a.jsx)(sM.A,{size:12}):(0,a.jsx)(sD.A,{size:12}),onClick:()=>m(e.search_tool_id,"search-tool-id"),className:`left-2 z-10 transition-all duration-200 ${d["search-tool-id"]?"text-green-600 bg-green-50 border-green-200":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`})]})]})}),(0,a.jsxs)(se.A,{numItems:1,numItemsSm:2,numItemsLg:3,className:"gap-6",children:[(0,a.jsxs)(ef.A,{children:[(0,a.jsx)(eN.A,{children:"Provider"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(ek.A,{children:(n=e.litellm_params.search_provider,i=l.find(e=>e.provider_name===n),i?.ui_friendly_name||n)})})]}),(0,a.jsxs)(ef.A,{children:[(0,a.jsx)(eN.A,{children:"API Key"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(eN.A,{children:e.litellm_params.api_key?"****":"Not set"})})]}),(0,a.jsxs)(ef.A,{children:[(0,a.jsx)(eN.A,{children:"Created At"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(eN.A,{children:e.created_at?new Date(e.created_at).toLocaleString():"Unknown"})})]})]}),e.search_tool_info?.description&&(0,a.jsxs)(ef.A,{className:"mt-6",children:[(0,a.jsx)(eN.A,{children:"Description"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(eN.A,{children:e.search_tool_info.description})})]}),(0,a.jsx)("div",{className:"mt-6",children:r&&(0,a.jsx)(sq,{searchToolName:e.search_tool_name,accessToken:r})})]})},s$=({accessToken:e,userRole:t,userID:s})=>{let{data:r,isLoading:l,refetch:i}=(0,tG.I)({queryKey:["searchTools"],queryFn:()=>{if(!e)throw Error("Access Token required");return(0,n.fetchSearchTools)(e).then(e=>e.search_tools||[])},enabled:!!e}),{data:d,isLoading:c}=(0,tG.I)({queryKey:["searchProviders"],queryFn:()=>{if(!e)throw Error("Access Token required");return(0,n.fetchAvailableSearchProviders)(e)},enabled:!!e}),m=d?.providers||[],[u,x]=(0,o.useState)(null),[h,y]=(0,o.useState)(!1),[j,_]=(0,o.useState)(!1),[A,N]=(0,o.useState)(null),[k,w]=(0,o.useState)(!1),[C,S]=(0,o.useState)(!1),[T,I]=(0,o.useState)(!1),[M]=g.A.useForm(),D=o.useMemo(()=>{let e,t,s;return e=e=>{N(e),w(!1)},t=e=>{let t=r?.find(t=>t.search_tool_id===e);t&&(M.setFieldsValue({search_tool_name:t.search_tool_name,search_provider:t.litellm_params.search_provider,api_key:t.litellm_params.api_key,api_base:t.litellm_params.api_base,timeout:t.litellm_params.timeout,max_retries:t.litellm_params.max_retries,description:t.search_tool_info?.description}),N(e),I(!0))},s=E,[{title:"Search Tool ID",dataIndex:"search_tool_id",key:"search_tool_id",render:(t,s)=>s.is_from_config?(0,a.jsx)("span",{className:"text-xs",children:"-"}):(0,a.jsx)("button",{onClick:()=>e(s.search_tool_id),className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left cursor-pointer max-w-40",children:(0,a.jsx)("span",{className:"truncate block",children:s.search_tool_id})})},{title:"Name",dataIndex:"search_tool_name",key:"search_tool_name",render:e=>(0,a.jsx)("span",{className:"font-medium",children:e})},{title:"Provider",key:"provider",render:(e,t)=>{let s=t.litellm_params.search_provider,r=m.find(e=>e.provider_name===s),l=r?.ui_friendly_name||s;return(0,a.jsx)("span",{className:"text-sm",children:l})}},{title:"Created At",dataIndex:"created_at",key:"created_at",render:(e,t)=>(0,a.jsx)("span",{className:"text-xs",children:t.created_at?new Date(t.created_at).toLocaleDateString():"-"})},{title:"Updated At",dataIndex:"updated_at",key:"updated_at",render:(e,t)=>(0,a.jsx)("span",{className:"text-xs",children:t.updated_at?new Date(t.updated_at).toLocaleDateString():"-"})},{title:"Source",key:"source",render:(e,t)=>{let s=t.is_from_config??!1;return(0,a.jsx)(b.A,{color:s?"default":"blue",children:s?"Config":"DB"})}},{title:"Actions",key:"actions",render:(e,r)=>{let l=r.search_tool_id,n=r.is_from_config??!1;return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(sI.A,{variant:"Edit",tooltipText:"Edit search tool",disabled:n,disabledTooltipText:"Config search tool cannot be edited on the dashboard. Please edit it from the config file.",onClick:()=>{l&&!n&&t(l)}}),(0,a.jsx)(sI.A,{variant:"Delete",tooltipText:"Delete search tool",disabled:n,disabledTooltipText:"Config search tool cannot be deleted on the dashboard. Please delete it from the config file.",onClick:()=>{l&&!n&&s(l)}})]})}}]},[m,r,M]);function E(e){x(e),y(!0)}let P=async()=>{if(null!=u&&null!=e){_(!0);try{await (0,n.deleteSearchTool)(e,u),eP.Ay.success("Deleted search tool successfully"),y(!1),x(null),i()}catch(e){console.error("Error deleting the search tool:",e),eP.Ay.error("Failed to delete search tool")}finally{_(!1)}}},q=r?.find(e=>e.search_tool_id===u),L=q?m.find(e=>e.provider_name===q.litellm_params.search_provider):null,$=async()=>{if(e&&A)try{let t=await M.validateFields(),s={search_tool_name:t.search_tool_name,litellm_params:{search_provider:t.search_provider,api_key:t.api_key,api_base:t.api_base,timeout:t.timeout?parseFloat(t.timeout):void 0,max_retries:t.max_retries?parseInt(t.max_retries):void 0},search_tool_info:t.description?{description:t.description}:void 0};await (0,n.updateSearchTool)(e,A,s),eP.Ay.success("Search tool updated successfully"),I(!1),M.resetFields(),N(null),i()}catch(e){console.error("Failed to update search tool:",e),eP.Ay.error("Failed to update search tool")}};return e&&t&&s?(0,a.jsxs)("div",{className:"w-full h-full p-6",children:[(0,a.jsx)(sb.A,{isOpen:h,title:"Delete Search Tool",message:"Are you sure you want to delete this search tool? This action cannot be undone.",resourceInformationTitle:"Search Tool Information",resourceInformation:q?[{label:"Name",value:q.search_tool_name},{label:"ID",value:q.search_tool_id,code:!0},{label:"Provider",value:L?.ui_friendly_name||q.litellm_params.search_provider},{label:"Description",value:q.search_tool_info?.description||"-"}]:[],onCancel:()=>{y(!1),x(null)},onOk:P,confirmLoading:j}),(0,a.jsx)(sT,{userRole:t,accessToken:e,onCreateSuccess:e=>{S(!1),i()},isModalVisible:C,setModalVisible:S}),(0,a.jsx)(p.A,{title:"Edit Search Tool",open:T,onOk:$,onCancel:()=>{I(!1),M.resetFields(),N(null)},width:600,children:(0,a.jsxs)(g.A,{form:M,layout:"vertical",children:[(0,a.jsx)(g.A.Item,{name:"search_tool_name",label:"Search Tool Name",rules:[{required:!0,message:"Please enter a search tool name"}],children:(0,a.jsx)(v.A,{placeholder:"e.g., my-perplexity-search"})}),(0,a.jsx)(g.A.Item,{name:"search_provider",label:"Search Provider",rules:[{required:!0,message:"Please select a search provider"}],children:(0,a.jsx)(f.A,{placeholder:"Select a search provider",loading:c,children:m.map(e=>(0,a.jsx)(f.A.Option,{value:e.provider_name,children:e.ui_friendly_name},e.provider_name))})}),(0,a.jsx)(g.A.Item,{name:"api_key",label:"API Key",extra:"API key for the search provider",children:(0,a.jsx)(v.A.Password,{placeholder:"Enter API key"})}),(0,a.jsx)(g.A.Item,{name:"description",label:"Description",children:(0,a.jsx)(v.A.TextArea,{rows:3,placeholder:"Description of this search tool"})})]})}),(0,a.jsx)(ek.A,{children:"Search Tools"}),(0,a.jsx)(eN.A,{className:"text-tremor-content mt-2",children:"Configure and manage your search providers"}),(0,eg.OY)(t)&&(0,a.jsx)(ey.A,{className:"mt-4 mb-4",onClick:()=>S(!0),children:"+ Add New Search Tool"}),(0,a.jsx)(()=>A?(0,a.jsx)(sL,{searchTool:r?.find(e=>e.search_tool_id===A)||{search_tool_id:"",search_tool_name:"",litellm_params:{search_provider:""}},onBack:()=>{w(!1),N(null),i()},isEditing:k,accessToken:e,availableProviders:m}):(0,a.jsx)("div",{className:"w-full h-full",children:(0,a.jsx)(ew.A,{spinning:l,indicator:(0,a.jsx)(tc.A,{spin:!0}),size:"large",children:(0,a.jsx)(ta.A,{bordered:!0,dataSource:r||[],columns:D,rowKey:e=>e.search_tool_id||e.search_tool_name,pagination:!1,locale:{emptyText:"No search tools configured"},size:"small"})})}),{})]}):(console.log("Missing required authentication parameters",{accessToken:e,userRole:t,userID:s}),(0,a.jsx)("div",{className:"p-6 text-center text-gray-500",children:"Missing required authentication parameters."}))};var sF=s(53581),sR=s(33210),sz=s(19041),sO=s(5266);function sB({onOpen:e,onDismiss:t,isVisible:s,title:r,description:l,buttonText:n,icon:i,accentColor:d,buttonStyle:c}){let m=(0,sz.y)(),[u,x]=(0,o.useState)(100),[p,h]=(0,o.useState)(!1);return((0,o.useEffect)(()=>{if(!s){x(100),h(!1);return}let e=Date.now(),t=setInterval(()=>{let s=Math.max(0,100-(Date.now()-e)/15e3*100);x(s),s<=0&&clearInterval(t)},50);return()=>clearInterval(t)},[s]),(0,o.useEffect)(()=>{if(p){let e=setTimeout(()=>{h(!1),t()},5e3);return()=>clearTimeout(e)}},[p,t]),p)?(0,a.jsx)("div",{className:`fixed bottom-6 right-6 z-40 w-80 bg-white rounded-lg shadow-xl border border-gray-200 overflow-hidden transform transition-all duration-300 ease-out ${s?"translate-y-0 opacity-100 scale-100":"translate-y-4 opacity-0 scale-95"}`,children:(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-green-100 flex items-center justify-center",children:(0,a.jsx)(sM.A,{className:"h-5 w-5 text-green-600"})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("p",{className:"text-sm text-gray-700 font-medium",children:"Got it, we will not ask again. Reactivate this at any time in the User Menu."})})]})})}):!s||m?null:(0,a.jsxs)("div",{className:`fixed bottom-6 right-6 z-40 w-80 bg-white rounded-lg shadow-xl border border-gray-200 overflow-hidden transform transition-all duration-300 ease-out ${s?"translate-y-0 opacity-100 scale-100":"translate-y-4 opacity-0 scale-95"}`,children:[(0,a.jsx)("div",{className:"h-1 bg-gray-100 w-full",children:(0,a.jsx)("div",{className:"h-full transition-all duration-100 ease-linear",style:{width:`${u}%`,backgroundColor:d}})}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",style:{color:d},children:[(0,a.jsx)(i,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"font-semibold text-sm",children:r})]}),(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors p-0.5 rounded hover:bg-gray-100",children:(0,a.jsx)(sR.A,{className:"h-4 w-4"})})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:l}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(I.Ay,{type:"primary",block:!0,onClick:e,style:c,children:n}),(0,a.jsx)(I.Ay,{variant:"outlined",danger:!0,block:!0,onClick:()=>{(0,sO.AP)("disableShowPrompts","true"),(0,sO.mD)("disableShowPrompts"),h(!0)},className:"text-xs",children:"Don't ask me again"})]})]})]})}var sY=s(52475);function sU({onOpen:e,onDismiss:t,isVisible:s}){return(0,a.jsx)(sB,{onOpen:e,onDismiss:t,isVisible:s,title:"Claude Code Feedback",description:"Help us improve your Claude Code experience with Silinex! Share your feedback in 4 quick questions.",buttonText:"Share feedback",icon:sY.A,accentColor:"#7c3aed",buttonStyle:{backgroundColor:"#7c3aed",borderColor:"#7c3aed"}})}function sH({isOpen:e,onClose:t,onComplete:s}){return e?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm",onClick:t}),(0,a.jsxs)("div",{className:"relative w-full max-w-md bg-white rounded-xl shadow-2xl overflow-hidden transform transition-all duration-300 ease-out",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-100 flex items-center justify-between bg-gray-50/50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-purple-600",children:[(0,a.jsx)(sY.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"font-semibold text-sm tracking-wide uppercase",children:"Claude Code Feedback"})]}),(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors p-1 rounded-full hover:bg-gray-100",children:(0,a.jsx)(sR.A,{className:"h-5 w-5"})})]}),(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Help us improve your experience"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"We'd love to hear about your experience using Silinex with Claude Code. Your feedback helps us improve the product for everyone."}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-6",children:"This brief survey takes about 2-3 minutes to complete."}),(0,a.jsx)(I.Ay,{type:"primary",size:"large",block:!0,onClick:()=>{window.open("https://forms.gle/LZeJQ3XytBakckYa9","_blank","noopener,noreferrer"),s()},icon:(0,a.jsx)(tC.A,{className:"h-4 w-4"}),style:{backgroundColor:"#7c3aed",borderColor:"#7c3aed"},children:"Open Feedback Form"})]})]})]}):null}var sV=s(58239),sG=s(71104),sK=s(35222),sW=s(72552),sJ=s(38456),sQ=s(94982),sX=s(35625),sZ=s(48934);let s0=async(e,t)=>{let s=(0,n.getProxyBaseUrl)(),a=`${s}/v1/access_group/${encodeURIComponent(t)}`,r=await fetch(a,{method:"DELETE",headers:{[(0,n.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"}});if(!r.ok){let e=await r.json(),t=(0,n.deriveErrorMessage)(e);throw(0,n.handleError)(t),Error(t)}};var s1=s(84979),s2=s(99476),s5=s(96073),s4=s(54481),s6=s(94042),s3=s(33024),s8=s(15573),s9=s(49619),s7=s(61878),ae=s(10280);let at=async(e,t)=>{let s=(0,n.getProxyBaseUrl)(),a=`${s}/v1/access_group/${encodeURIComponent(t)}`,r=await fetch(a,{method:"GET",headers:{[(0,n.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"}});if(!r.ok){let e=await r.json(),t=(0,n.deriveErrorMessage)(e);throw(0,n.handleError)(t),Error(t)}return r.json()};var as=s(25339),aa=s(21034),ar=s(80723),al=s(89823),an=s(52905),ai=s(7810),ao=s(69125),ad=s(32826),ac=s(37138),am=s(14824),au=s(68822);let{TextArea:ax}=v.A;function ap({form:e,isNameDisabled:t=!1}){let{data:s}=(0,ad._)(),{data:r}=(0,ac.g)(),l=s?.agents??[],n=[{key:"1",label:(0,a.jsxs)(s4.A,{align:"center",size:4,children:[(0,a.jsx)(au.A,{size:16}),"General Info"]}),children:(0,a.jsxs)("div",{style:{paddingTop:16},children:[(0,a.jsx)(g.A.Item,{name:"name",label:"Group Name",rules:[{required:!0,message:"Please enter the access group name"}],children:(0,a.jsx)(v.A,{placeholder:"e.g. Engineering Team",disabled:t})}),(0,a.jsx)(g.A.Item,{name:"description",label:"Description",children:(0,a.jsx)(ax,{rows:4,placeholder:"Describe the purpose of this access group..."})})]})},{key:"2",label:(0,a.jsxs)(s4.A,{align:"center",size:4,children:[(0,a.jsx)(s3.A,{size:16}),"Models"]}),children:(0,a.jsx)("div",{style:{paddingTop:16},children:(0,a.jsx)(g.A.Item,{name:"modelIds",label:"Allowed Models",children:(0,a.jsx)(am.o,{context:"global",value:e.getFieldValue("modelIds")??[],onChange:t=>e.setFieldsValue({modelIds:t}),style:{width:"100%"}})})})},{key:"3",label:(0,a.jsxs)(s4.A,{align:"center",size:4,children:[(0,a.jsx)(s8.A,{size:16}),"MCP Servers"]}),children:(0,a.jsx)("div",{style:{paddingTop:16},children:(0,a.jsx)(g.A.Item,{name:"mcpServerIds",label:"Allowed MCP Servers",children:(0,a.jsx)(f.A,{mode:"multiple",placeholder:"Select MCP servers",style:{width:"100%"},optionFilterProp:"label",allowClear:!0,options:(r??[]).map(e=>({label:e.server_name??e.server_id,value:e.server_id}))})})})},{key:"4",label:(0,a.jsxs)(s4.A,{align:"center",size:4,children:[(0,a.jsx)(s9.A,{size:16}),"Agents"]}),children:(0,a.jsx)("div",{style:{paddingTop:16},children:(0,a.jsx)(g.A.Item,{name:"agentIds",label:"Allowed Agents",children:(0,a.jsx)(f.A,{mode:"multiple",placeholder:"Select agents",style:{width:"100%"},optionFilterProp:"label",allowClear:!0,options:l.map(e=>({label:e.agent_name,value:e.agent_id}))})})})}];return(0,a.jsx)(g.A,{form:e,layout:"vertical",name:"access_group_form",initialValues:{modelIds:[],mcpServerIds:[],agentIds:[]},children:(0,a.jsx)(tW.A,{defaultActiveKey:"1",items:n})})}let ah=async(e,t,s)=>{let a=(0,n.getProxyBaseUrl)(),r=`${a}/v1/access_group/${encodeURIComponent(t)}`,l=await fetch(r,{method:"PUT",headers:{[(0,n.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(s)});if(!l.ok){let e=await l.json(),t=(0,n.deriveErrorMessage)(e);throw(0,n.handleError)(t),Error(t)}return l.json()};function ag({visible:e,accessGroup:t,onCancel:s,onSuccess:r}){let[l]=g.A.useForm(),n=(()=>{let{accessToken:e}=(0,i.A)(),t=(0,sX.jE)();return(0,sZ.n)({mutationFn:async({accessGroupId:t,params:s})=>{if(!e)throw Error("Access token is required");return ah(e,t,s)},onSuccess:(e,{accessGroupId:s})=>{t.invalidateQueries({queryKey:sQ.M.all}),t.invalidateQueries({queryKey:sQ.M.detail(s)})}})})();return(0,o.useEffect)(()=>{e&&t&&l.setFieldsValue({name:t.access_group_name,description:t.description??"",modelIds:t.access_model_names??[],mcpServerIds:t.access_mcp_server_ids??[],agentIds:t.access_agent_ids??[]})},[e,t,l]),(0,a.jsx)(p.A,{title:"Edit Access Group",open:e,onOk:()=>{l.validateFields().then(e=>{let a={access_group_name:e.name,description:e.description,access_model_names:e.modelIds,access_mcp_server_ids:e.mcpServerIds,access_agent_ids:e.agentIds};n.mutate({accessGroupId:t.access_group_id,params:a},{onSuccess:()=>{y.Ay.success("Access group updated successfully"),r?.(),s()}})}).catch(e=>{console.log("Validate Failed:",e)})},onCancel:s,width:700,okText:"Save Changes",cancelText:"Cancel",confirmLoading:n.isPending,destroyOnHidden:!0,children:(0,a.jsx)(ap,{form:l})})}let{Title:ay,Text:af}=sv.A,{Content:aj}=s1.A;function ab({accessGroupId:e,onBack:t}){let{data:s,isLoading:r}=(e=>{let{accessToken:t,userRole:s}=(0,i.A)(),a=(0,sX.jE)();return(0,tG.I)({queryKey:sQ.M.detail(e),queryFn:async()=>at(t,e),enabled:!!(t&&e)&&eg.CX.includes(s||""),initialData:()=>{if(!e)return;let t=a.getQueryData(sQ.M.list({}));return t?.find(t=>t.access_group_id===e)}})})(e),{token:l}=s2.A.useToken(),{t:n}=(0,tz.o)(),[d,c]=(0,o.useState)(!1),[m,u]=(0,o.useState)(!1),[x,p]=(0,o.useState)(!1);if(r)return(0,a.jsx)(aj,{style:{padding:l.paddingLG,paddingInline:2*l.paddingLG},children:(0,a.jsx)(s5.A,{justify:"center",align:"center",style:{minHeight:300},children:(0,a.jsx)(ew.A,{size:"large"})})});if(!s)return(0,a.jsxs)(aj,{style:{padding:l.paddingLG,paddingInline:2*l.paddingLG},children:[(0,a.jsx)(I.Ay,{icon:(0,a.jsx)(ar.A,{size:16}),onClick:t,type:"text",style:{marginBottom:16}}),(0,a.jsx)(as.A,{description:n("accessGroupDetail.notFound")})]});let h=s.access_model_names??[],g=s.access_mcp_server_ids??[],y=s.access_agent_ids??[],f=s.assigned_key_ids??[],j=s.assigned_team_ids??[],v=m?f:f.slice(0,5),_=x?j:j.slice(0,5),A=[{key:"models",label:(0,a.jsxs)(s5.A,{align:"center",gap:8,children:[(0,a.jsx)(s3.A,{size:16}),n("accessGroupDetail.tabs.models"),(0,a.jsx)(b.A,{style:{marginInlineEnd:0},children:h?.length})]}),children:h?.length>0?(0,a.jsx)(aa.A,{grid:{gutter:16,xs:1,sm:2,md:3,lg:4},dataSource:h,renderItem:e=>(0,a.jsx)(aa.A.Item,{children:(0,a.jsx)(tn.A,{size:"small",children:(0,a.jsx)(af,{code:!0,children:e})})})}):(0,a.jsx)(as.A,{description:n("accessGroupDetail.noModels")})},{key:"mcp",label:(0,a.jsxs)(s5.A,{align:"center",gap:8,children:[(0,a.jsx)(s8.A,{size:16}),n("accessGroupDetail.tabs.mcpServers"),(0,a.jsx)(b.A,{children:g?.length})]}),children:g?.length>0?(0,a.jsx)(aa.A,{grid:{gutter:16,xs:1,sm:2,md:3,lg:4},dataSource:g,renderItem:e=>(0,a.jsx)(aa.A.Item,{children:(0,a.jsx)(tn.A,{size:"small",children:(0,a.jsx)(af,{code:!0,children:e})})})}):(0,a.jsx)(as.A,{description:n("accessGroupDetail.noMCPServers")})},{key:"agents",label:(0,a.jsxs)(s5.A,{align:"center",gap:8,children:[(0,a.jsx)(s9.A,{size:16}),n("accessGroupDetail.tabs.agents"),(0,a.jsx)(b.A,{children:y?.length})]}),children:y?.length>0?(0,a.jsx)(aa.A,{grid:{gutter:16,xs:1,sm:2,md:3,lg:4},dataSource:y,renderItem:e=>(0,a.jsx)(aa.A.Item,{children:(0,a.jsx)(tn.A,{size:"small",children:(0,a.jsx)(af,{code:!0,children:e})})})}):(0,a.jsx)(as.A,{description:n("accessGroupDetail.noAgents")})}];return(0,a.jsxs)(aj,{style:{padding:l.paddingLG,paddingInline:2*l.paddingLG},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:16},children:[(0,a.jsx)(I.Ay,{icon:(0,a.jsx)(ar.A,{size:16}),onClick:t,type:"text"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(ay,{level:2,style:{margin:0},children:s.access_group_name}),(0,a.jsxs)(af,{type:"secondary",children:["ID: ",(0,a.jsx)(af,{copyable:!0,children:s.access_group_id})]})]})]}),(0,a.jsx)(I.Ay,{type:"primary",icon:(0,a.jsx)(al.A,{size:16}),onClick:()=>{c(!0)},children:n("accessGroupDetail.editButton")})]}),(0,a.jsx)(ti.A,{style:{marginBottom:24},children:(0,a.jsx)(tn.A,{children:(0,a.jsxs)(eC.A,{title:n("accessGroupDetail.groupDetails"),column:1,children:[(0,a.jsx)(eC.A.Item,{label:n("accessGroupDetail.description"),children:s.description||"â€”"}),(0,a.jsxs)(eC.A.Item,{label:n("accessGroupDetail.created"),children:[new Date(s.created_at).toLocaleString(),s.created_by&&(0,a.jsxs)(af,{children:["\xa0",n("accessGroupDetail.by"),"\xa0",(0,a.jsx)(ao.A,{userId:s.created_by})]})]}),(0,a.jsxs)(eC.A.Item,{label:n("accessGroupDetail.lastUpdated"),children:[new Date(s.updated_at).toLocaleString(),s.updated_by&&(0,a.jsxs)(af,{children:["\xa0",n("accessGroupDetail.by"),"\xa0",(0,a.jsx)(ao.A,{userId:s.updated_by})]})]})]})})}),(0,a.jsxs)(ti.A,{gutter:[16,16],style:{marginBottom:24},children:[(0,a.jsx)(to.A,{xs:24,lg:12,children:(0,a.jsx)(tn.A,{title:(0,a.jsxs)(s5.A,{align:"center",gap:8,children:[(0,a.jsx)(an.A,{size:16}),n("accessGroupDetail.attachedKeys"),(0,a.jsx)(b.A,{children:f?.length})]}),extra:f?.length>5?(0,a.jsx)(I.Ay,{type:"link",onClick:()=>u(!m),children:m?n("accessGroupDetail.showLess"):`${n("accessGroupDetail.viewAll")} (${f?.length})`}):null,children:f?.length>0?(0,a.jsx)(s5.A,{wrap:"wrap",gap:8,children:v.map(e=>(0,a.jsx)(b.A,{children:(0,a.jsx)(af,{code:!0,style:{fontSize:12},children:e.length>20?`${e.slice(0,10)}...${e.slice(-6)}`:e})},e))}):(0,a.jsx)(as.A,{description:n("accessGroupDetail.noKeysAttached"),image:as.A.PRESENTED_IMAGE_SIMPLE})})}),(0,a.jsx)(to.A,{xs:24,lg:12,children:(0,a.jsx)(tn.A,{title:(0,a.jsxs)(s5.A,{align:"center",gap:8,children:[(0,a.jsx)(ai.A,{size:16}),n("accessGroupDetail.attachedTeams"),(0,a.jsx)(b.A,{children:j?.length})]}),extra:j?.length>5?(0,a.jsx)(I.Ay,{type:"link",onClick:()=>p(!x),children:x?n("accessGroupDetail.showLess"):`${n("accessGroupDetail.viewAll")} (${j?.length})`}):null,children:j?.length>0?(0,a.jsx)(s5.A,{wrap:"wrap",gap:8,children:_.map(e=>(0,a.jsx)(b.A,{children:(0,a.jsx)(af,{code:!0,style:{fontSize:12},children:e})},e))}):(0,a.jsx)(as.A,{description:n("accessGroupDetail.noTeamsAttached"),image:as.A.PRESENTED_IMAGE_SIMPLE})})})]}),(0,a.jsx)(tn.A,{children:(0,a.jsx)(tW.A,{defaultActiveKey:"models",items:A})}),(0,a.jsx)(ag,{visible:d,accessGroup:s,onCancel:()=>c(!1)})]})}let av=async(e,t)=>{let s=(0,n.getProxyBaseUrl)(),a=`${s}/v1/access_group`,r=await fetch(a,{method:"POST",headers:{[(0,n.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok){let e=await r.json(),t=(0,n.deriveErrorMessage)(e);throw(0,n.handleError)(t),Error(t)}return r.json()};function a_({visible:e,onCancel:t,onSuccess:s}){let[r]=g.A.useForm(),l=(()=>{let{accessToken:e}=(0,i.A)(),t=(0,sX.jE)();return(0,sZ.n)({mutationFn:async t=>{if(!e)throw Error("Access token is required");return av(e,t)},onSuccess:()=>{t.invalidateQueries({queryKey:sQ.M.all})}})})();return(0,a.jsx)(p.A,{title:"Create Access Group",open:e,onOk:()=>{r.validateFields().then(e=>{let a={access_group_name:e.name,description:e.description,access_model_names:e.modelIds,access_mcp_server_ids:e.mcpServerIds,access_agent_ids:e.agentIds};l.mutate(a,{onSuccess:()=>{y.Ay.success("Access group created successfully"),r.resetFields(),s?.(),t()}})}).catch(e=>{console.log("Validate Failed:",e)})},onCancel:t,width:700,okText:"Create Group",cancelText:"Cancel",confirmLoading:l.isPending,destroyOnClose:!0,children:(0,a.jsx)(ap,{form:r})})}let{Title:aA,Text:aN}=sv.A,{Content:ak}=s1.A;function aw(e){return{id:e.access_group_id,name:e.access_group_name,description:e.description??"",modelIds:e.access_model_names,mcpServerIds:e.access_mcp_server_ids,agentIds:e.access_agent_ids,keyIds:e.assigned_key_ids,teamIds:e.assigned_team_ids,createdAt:e.created_at,createdBy:e.created_by??"",updatedAt:e.updated_at,updatedBy:e.updated_by??""}}function aC(){let{token:e}=s2.A.useToken(),{data:t,isLoading:s}=(0,sQ.o)(),r=(0,o.useMemo)(()=>(t??[]).map(aw),[t]),[l,n]=(0,o.useState)(null),[d,c]=(0,o.useState)(!1),[m,u]=(0,o.useState)(""),[x,p]=(0,o.useState)(1),[h,g]=(0,o.useState)([]),[y,f]=(0,o.useState)(null),j=(()=>{let{accessToken:e}=(0,i.A)(),t=(0,sX.jE)();return(0,sZ.n)({mutationFn:async t=>{if(!e)throw Error("Access token is required");return s0(e,t)},onSuccess:()=>{t.invalidateQueries({queryKey:sQ.M.all})}})})();(0,o.useEffect)(()=>{p(1)},[m]);let _=(0,o.useMemo)(()=>r.filter(e=>e.name.toLowerCase().includes(m.toLowerCase())||e.id.toLowerCase().includes(m.toLowerCase())||e.description.toLowerCase().includes(m.toLowerCase())),[r,m]),A=(0,o.useMemo)(()=>[{id:"id",accessorKey:"id",header:()=>(0,a.jsx)("span",{children:"ID"}),enableSorting:!1,size:170,cell:({row:e})=>{let t=e.original;return(0,a.jsx)(em.A,{title:t.id,children:(0,a.jsx)(aN,{ellipsis:!0,className:"text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs cursor-pointer",style:{fontSize:14,padding:"1px 8px"},onClick:()=>n(t.id),children:t.id})})}},{id:"name",accessorKey:"name",header:()=>(0,a.jsx)("span",{children:"Name"}),enableSorting:!0,cell:({getValue:e})=>e()},{id:"resources",header:()=>(0,a.jsx)("span",{children:"Resources"}),enableSorting:!1,cell:({row:e})=>{let t=e.original,s=t.modelIds??[],r=t.mcpServerIds??[],l=t.agentIds??[];return(0,a.jsxs)(s5.A,{gap:12,align:"center",children:[(0,a.jsx)(em.A,{title:`${s?.length} Models`,children:(0,a.jsx)(b.A,{color:"blue",style:{fontSize:14,padding:"2px 8px",margin:0},children:(0,a.jsxs)(s5.A,{align:"center",gap:6,children:[(0,a.jsx)(s3.A,{size:14}),s?.length]})})}),(0,a.jsx)(em.A,{title:`${r?.length} MCP Servers`,children:(0,a.jsx)(b.A,{color:"cyan",style:{fontSize:14,padding:"2px 8px",margin:0},children:(0,a.jsxs)(s5.A,{align:"center",gap:6,children:[(0,a.jsx)(s8.A,{size:14}),r?.length]})})}),(0,a.jsx)(em.A,{title:`${l?.length} Agents`,children:(0,a.jsx)(b.A,{color:"purple",style:{fontSize:14,padding:"2px 8px",margin:0},children:(0,a.jsxs)(s5.A,{align:"center",gap:6,children:[(0,a.jsx)(s9.A,{size:14}),l?.length]})})})]})}},{id:"createdAt",accessorKey:"createdAt",header:()=>(0,a.jsx)("span",{children:"Created"}),enableSorting:!0,sortingFn:"datetime",cell:({getValue:e})=>new Date(e()).toLocaleDateString(),meta:{responsive:["lg"]}},{id:"updatedAt",accessorKey:"updatedAt",header:()=>(0,a.jsx)("span",{children:"Updated"}),enableSorting:!1,cell:({getValue:e})=>new Date(e()).toLocaleDateString(),meta:{responsive:["xl"]}},{id:"actions",header:()=>(0,a.jsx)("span",{children:"Actions"}),enableSorting:!1,cell:({row:e})=>(0,a.jsx)(s4.A,{children:(0,a.jsx)(sI.A,{variant:"Delete",tooltipText:"Delete access group",onClick:()=>f(e.original)})})}],[]),N=(0,ex.N4)({data:_,columns:A,state:{sorting:h},onSortingChange:g,getCoreRowModel:(0,ep.HT)(),getSortedRowModel:(0,ep.h5)(),getRowId:e=>e.id}),k=N.getRowModel().rows,w=k.slice((x-1)*10,10*x),C=(0,o.useMemo)(()=>new Map(w.map(e=>[e.original.id,e])),[w]),S=(N.getHeaderGroups()[0]?.headers??[]).map(e=>{let t=e.column.getCanSort(),s=e.column.getIsSorted(),r=e.column.columnDef.meta,l={title:(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.isPlaceholder?null:(0,ex.Kv)(e.column.columnDef.header,e.getContext()),t&&(0,a.jsx)(ae.h,{sortState:!1!==s&&s,onSortChange:t=>{g(!1===t?[]:[{id:e.column.id,desc:"desc"===t}])},columnId:e.column.id})]}),key:e.id,width:e.column.columnDef.size,render:(t,s)=>{let a=C.get(s.id);if(!a)return null;let r=a.getVisibleCells().find(t=>t.column.id===e.id);return r?(0,ex.Kv)(r.column.columnDef.cell,r.getContext()):null}};return r?.responsive&&(l.responsive=r.responsive),l}),T=w.map(e=>e.original);return l?(0,a.jsx)(ab,{accessGroupId:l,onBack:()=>n(null)}):(0,a.jsxs)(ak,{style:{padding:e.paddingLG,paddingInline:2*e.paddingLG},children:[(0,a.jsxs)(s5.A,{justify:"space-between",align:"center",style:{marginBottom:16},children:[(0,a.jsxs)(s4.A,{direction:"vertical",size:0,children:[(0,a.jsx)(aA,{level:2,style:{margin:0},children:"Access Groups"}),(0,a.jsx)(aN,{type:"secondary",children:"Manage resource permissions for your organization"})]}),(0,a.jsx)(I.Ay,{type:"primary",icon:(0,a.jsx)(D.A,{}),onClick:()=>c(!0),children:"Create Access Group"})]}),(0,a.jsxs)(tn.A,{styles:{body:{padding:0}},children:[(0,a.jsxs)(s5.A,{justify:"space-between",align:"center",style:{padding:"12px 16px"},children:[(0,a.jsx)(v.A,{prefix:(0,a.jsx)(s7.A,{size:16}),placeholder:"Search groups by name, ID, or description...",style:{maxWidth:400},value:m,onChange:e=>u(e.target.value),allowClear:!0}),(0,a.jsx)(s6.A,{current:x,total:k?.length,pageSize:10,onChange:e=>p(e),size:"small",showTotal:e=>`${e} groups`,showSizeChanger:!1})]}),(0,a.jsx)(ta.A,{columns:S,dataSource:T,rowKey:"id",loading:s,pagination:!1})]}),(0,a.jsx)(a_,{visible:d,onCancel:()=>c(!1)}),(0,a.jsx)(sb.A,{isOpen:!!y,title:"Delete Access Group",message:"Are you sure you want to delete this access group? This action cannot be undone.",resourceInformationTitle:"Access Group Information",resourceInformation:[{label:"ID",value:y?.id,code:!0},{label:"Name",value:y?.name},{label:"Description",value:y?.description||"â€”"}],onCancel:()=>f(null),onOk:()=>{y&&j.mutate(y.id,{onSuccess:()=>{f(null)}})},confirmLoading:j.isPending})]})}var aS=s(35630),aT=s(48658),aI=s(11622),aM=s(92574);let aD=[{value:"trusted",label:"trusted",color:"#065f46",bg:"#d1fae5",border:"#6ee7b7"},{value:"blocked",label:"blocked",color:"#991b1b",bg:"#fee2e2",border:"#fca5a5"}],aE=({value:e,toolName:t,saving:s,onChange:r})=>(0,a.jsx)(f.A,{size:"small",value:e,disabled:s,loading:s,onChange:e=>r(t,e),onClick:e=>e.stopPropagation(),style:{minWidth:110,fontWeight:500},popupMatchSelectWidth:!1,options:aD.map(e=>({value:e.value,label:(0,a.jsxs)("span",{style:{display:"inline-flex",alignItems:"center",gap:6,fontSize:12,fontWeight:500,color:e.color},children:[(0,a.jsx)("span",{style:{width:8,height:8,borderRadius:"50%",backgroundColor:e.color,display:"inline-block",flexShrink:0}}),e.label]})}))}),aP=({accessToken:e})=>{let[t,s]=(0,o.useState)([]),[r,l]=(0,o.useState)(!0),[i,d]=(0,o.useState)(!1),[c,m]=(0,o.useState)(null),[u,x]=(0,o.useState)(null),[p,h]=(0,o.useState)(""),[g,y]=(0,o.useState)("created_at"),[f,j]=(0,o.useState)("desc"),[b,v]=(0,o.useState)(1),[_,A]=(0,o.useState)(!0),[N,k]=(0,o.useState)({}),w=(0,o.useDeferredValue)(i),C=i||w,S=(0,o.useCallback)(async()=>{if(e){d(!0),m(null);try{let t=await (0,n.fetchToolsList)(e);s(t)}catch(e){m(e.message??"Failed to load tools")}finally{d(!1),l(!1)}}},[e]);(0,o.useEffect)(()=>{S()},[S]),(0,o.useEffect)(()=>{if(!_)return;let e=setInterval(S,15e3);return()=>clearInterval(e)},[_,S]);let I=async(t,a)=>{if(e){x(t);try{await (0,n.updateToolPolicy)(e,t,a),s(e=>e.map(e=>e.tool_name===t?{...e,call_policy:a}:e))}catch(e){alert(`Failed to update policy: ${e.message}`)}finally{x(null)}}},M=Array.from(new Set(t.map(e=>e.team_id).filter(Boolean))).map(e=>({label:e,value:e})),D=Array.from(new Set(t.map(e=>e.key_alias).filter(Boolean))).map(e=>({label:e,value:e})),E=[{name:"Policy",label:"Policy",options:aD.map(e=>({label:e.label,value:e.value}))},{name:"Team Name",label:"Team Name",options:M},{name:"Key Name",label:"Key Name",options:D}],P=({label:e,field:t})=>(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{children:e}),(0,a.jsx)(ae.h,{sortState:g===t&&f,onSortChange:e=>{!1===e?(y("created_at"),j("desc")):(y(t),j(e)),v(1)}})]}),q=t.filter(e=>{if(p){let t=p.toLowerCase();if(!(e.tool_name.toLowerCase().includes(t)||(e.team_id??"").toLowerCase().includes(t)||(e.key_alias??"").toLowerCase().includes(t)||(e.key_hash??"").toLowerCase().includes(t)||e.call_policy.toLowerCase().includes(t)))return!1}return(!N.Policy||e.call_policy===N.Policy)&&(!N["Team Name"]||e.team_id===N["Team Name"])&&(!N["Key Name"]||e.key_alias===N["Key Name"])}),L=[...q].sort((e,t)=>{let s=e[g]??"",a=t[g]??"";return s<a?"desc"===f?1:-1:s>a?"desc"===f?-1:1:0}),$=Math.max(1,Math.ceil(L.length/50)),F=L.slice((b-1)*50,50*b);return(0,a.jsxs)("div",{className:"p-6 w-full",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Tool Policies"}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow w-full max-w-full box-border",children:[(0,a.jsxs)("div",{className:"border-b px-6 py-4 w-full max-w-full box-border",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between space-y-4 md:space-y-0 w-full max-w-full box-border",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,a.jsxs)("div",{className:"relative w-64",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search by Tool Name",className:"w-full px-3 py-2 pl-8 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:p,onChange:e=>{h(e.target.value),v(1)}}),(0,a.jsx)("svg",{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Live Tail"}),(0,a.jsx)(T.A,{checked:_,onChange:A})]}),(0,a.jsxs)("button",{onClick:S,disabled:C,className:"flex items-center gap-1.5 px-3 py-2 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-60",children:[(0,a.jsx)("svg",{className:`w-4 h-4 ${C?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),C?"Fetching":"Fetch"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600 whitespace-nowrap",children:[(0,a.jsxs)("span",{children:["Showing ",0===q.length?0:(b-1)*50+1," - ",Math.min(50*b,q.length)," of ",q.length," results"]}),(0,a.jsxs)("span",{children:["Page ",b," of ",$]}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("button",{onClick:()=>v(e=>Math.max(1,e-1)),disabled:1===b,className:"px-3 py-1.5 border rounded-md text-sm hover:bg-gray-50 disabled:opacity-40",children:"Previous"}),(0,a.jsx)("button",{onClick:()=>v(e=>Math.min($,e+1)),disabled:b===$,className:"px-3 py-1.5 border rounded-md text-sm hover:bg-gray-50 disabled:opacity-40",children:"Next"})]})]})]}),(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)(aM.A,{options:E,onApplyFilters:e=>{k(e),v(1)},onResetFilters:()=>{k({}),v(1)},buttonLabel:"Filters"})})]}),_&&(0,a.jsxs)("div",{className:"bg-green-50 border-b border-green-100 px-6 py-2 flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-green-700",children:"Auto-refreshing every 15 seconds"}),(0,a.jsx)("button",{onClick:()=>A(!1),className:"text-xs text-green-600 underline",children:"Stop"})]}),c&&(0,a.jsx)("div",{className:"mx-6 mt-4 p-3 bg-red-50 border border-red-200 rounded text-sm text-red-700",children:c}),(0,a.jsxs)(aT.XI,{className:"[&_td]:py-0.5 [&_th]:py-1 w-full",children:[(0,a.jsx)(aT.nd,{children:(0,a.jsxs)(aT.Hj,{children:[(0,a.jsx)(aT.M_,{className:"py-1 h-8",children:(0,a.jsx)(P,{label:"Discovered",field:"created_at"})}),(0,a.jsx)(aT.M_,{className:"py-1 h-8",children:(0,a.jsx)(P,{label:"Tool Name",field:"tool_name"})}),(0,a.jsx)(aT.M_,{className:"py-1 h-8",children:(0,a.jsx)(P,{label:"Policy",field:"call_policy"})}),(0,a.jsx)(aT.M_,{className:"py-1 h-8",children:(0,a.jsx)(P,{label:"# Calls",field:"call_count"})}),(0,a.jsx)(aT.M_,{className:"py-1 h-8",children:(0,a.jsx)(P,{label:"Team Name",field:"team_id"})}),(0,a.jsx)(aT.M_,{className:"py-1 h-8",children:"Key Hash"}),(0,a.jsx)(aT.M_,{className:"py-1 h-8",children:(0,a.jsx)(P,{label:"Key Name",field:"key_alias"})}),(0,a.jsx)(aT.M_,{className:"py-1 h-8",children:"Origin"})]})}),(0,a.jsx)(aT.BF,{children:r?(0,a.jsx)(aT.Hj,{children:(0,a.jsx)(aT.nA,{colSpan:8,className:"h-8 text-center text-gray-500",children:"Loading toolsâ€¦"})}):0===F.length?(0,a.jsx)(aT.Hj,{children:(0,a.jsx)(aT.nA,{colSpan:8,className:"h-8 text-center text-gray-500",children:"No tools discovered yet. Make a chat completion that returns tool_calls to start auto-discovery."})}):F.map(e=>(0,a.jsxs)(aT.Hj,{className:"h-8 hover:bg-gray-50",children:[(0,a.jsx)(aT.nA,{className:"py-0.5 max-h-8 overflow-hidden whitespace-nowrap",children:(0,a.jsx)(aI.M,{utcTime:e.created_at??""})}),(0,a.jsx)(aT.nA,{className:"py-0.5 max-h-8 overflow-hidden",children:(0,a.jsx)(em.A,{title:e.tool_name,children:(0,a.jsx)("span",{className:"font-mono text-xs max-w-[20ch] truncate block font-medium",children:e.tool_name})})}),(0,a.jsx)(aT.nA,{className:"py-0.5 max-h-8",children:(0,a.jsx)(aE,{value:e.call_policy,toolName:e.tool_name,saving:u===e.tool_name,onChange:I})}),(0,a.jsx)(aT.nA,{className:"py-0.5 max-h-8 text-right tabular-nums text-sm font-mono text-gray-700",children:(e.call_count??0).toLocaleString()}),(0,a.jsx)(aT.nA,{className:"py-0.5 max-h-8 overflow-hidden whitespace-nowrap",children:(0,a.jsx)(em.A,{title:e.team_id??"-",children:(0,a.jsx)("span",{className:"max-w-[15ch] truncate block",children:e.team_id??"-"})})}),(0,a.jsx)(aT.nA,{className:"py-0.5 max-h-8 overflow-hidden whitespace-nowrap",children:(0,a.jsx)(em.A,{title:e.key_hash??"-",children:(0,a.jsx)("span",{className:"font-mono max-w-[15ch] truncate block text-blue-600",children:e.key_hash??"-"})})}),(0,a.jsx)(aT.nA,{className:"py-0.5 max-h-8 overflow-hidden whitespace-nowrap",children:(0,a.jsx)(em.A,{title:e.key_alias??"-",children:(0,a.jsx)("span",{className:"max-w-[15ch] truncate block",children:e.key_alias??"-"})})}),(0,a.jsx)(aT.nA,{className:"py-0.5 max-h-8 overflow-hidden whitespace-nowrap",children:(0,a.jsx)(em.A,{title:e.origin??"-",children:(0,a.jsx)("span",{className:"max-w-[15ch] truncate block",children:e.origin??"-"})})})]},e.tool_id))})]}),$>1&&(0,a.jsxs)("div",{className:"border-t px-6 py-3 flex items-center justify-between text-sm text-gray-600",children:[(0,a.jsxs)("span",{children:["Showing ",(b-1)*50+1," - ",Math.min(50*b,L.length)," of ",L.length]}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("button",{onClick:()=>v(e=>Math.max(1,e-1)),disabled:1===b,className:"px-3 py-1.5 border rounded-md hover:bg-gray-50 disabled:opacity-40",children:"Previous"}),(0,a.jsx)("button",{onClick:()=>v(e=>Math.min($,e+1)),disabled:b===$,className:"px-3 py-1.5 border rounded-md hover:bg-gray-50 disabled:opacity-40",children:"Next"})]})]})]})]})};var aq=s(14421),aL=s(36846),a$=s(89270),aF=s(97035),aR=s(26430),az=s(19253),aO=s(73321),aB=s(88653);function aY(e,t="/"){document.cookie=`${e}=; Max-Age=0; Path=${t}`}let aU=new aR.E;function aH(){let[e,t]=(0,o.useState)(""),[s,l]=(0,o.useState)(!1),[i,x]=(0,o.useState)(!1),[p,h]=(0,o.useState)(null),[g,y]=(0,o.useState)(null),[f,j]=(0,o.useState)([]),[b,v]=(0,o.useState)([]),[_,A]=(0,o.useState)([]),[N,k]=(0,o.useState)({PROXY_BASE_URL:"",PROXY_LOGOUT_URL:""}),[w,C]=(0,o.useState)(!0),S=(0,aO.useSearchParams)(),[T,I]=(0,o.useState)({data:[]}),[M,D]=(0,o.useState)(null),[E,P]=(0,o.useState)(!1),[q,L]=(0,o.useState)(!0),[$,F]=(0,o.useState)(null),[R,z]=(0,o.useState)(!0),[O,B]=(0,o.useState)(!1),[Y,U]=(0,o.useState)(!1),[H,V]=(0,o.useState)(!1),[G,K]=(0,o.useState)(!1),[W,J]=(0,o.useState)(!1),Q=S.get("invitation_id"),[X,Z]=(0,o.useState)(()=>S.get("page")||"api-keys"),[ee,et]=(0,o.useState)(null),[es,ea]=(0,o.useState)(!1),er=e=>{j(t=>t?[...t,e]:[e]),P(()=>!E)},el=!1===q&&null===M&&null===Q;return((0,o.useEffect)(()=>{let e=!1;return(async()=>{try{await (0,n.getUiConfig)()}catch{}if(e)return;let t=function(e){let t=document.cookie.split("; ").find(t=>t.startsWith(e+"="));if(!t)return null;let s=t.slice(e.length+1);try{return decodeURIComponent(s)}catch{return s}}("token"),s=t&&!(0,aF.xP)(t)?t:null;t&&!s&&aY("token","/"),e||(D(s),L(!1))})(),()=>{e=!0}},[]),(0,o.useEffect)(()=>{if(el){let e=(n.proxyBaseUrl||"")+"/ui/login";window.location.replace(e)}},[el]),(0,o.useEffect)(()=>{if(!M)return;if((0,aF.xP)(M)){aY("token","/"),D(null);return}let e=null;try{e=(0,az.s)(M)}catch{aY("token","/"),D(null);return}if(e){if(et(e.key),x(e.disabled_non_admin_personal_key_creation),e.user_role){let s=function(e){if(!e)return"Undefined Role";switch(e.toLowerCase()){case"app_owner":case"demo_app_owner":return"App Owner";case"app_admin":case"proxy_admin":return"Admin";case"proxy_admin_viewer":return"Admin Viewer";case"org_admin":return"Org Admin";case"internal_user":return"Internal User";case"internal_user_viewer":case"internal_viewer":return"Internal Viewer";case"app_user":return"App User";default:return"Unknown Role"}}(e.user_role);t(s),"Admin Viewer"==s&&Z("usage")}e.user_email&&h(e.user_email),e.login_method&&C("username_password"==e.login_method),e.premium_user&&l(e.premium_user),e.auth_header_name&&(0,n.setGlobalLitellmHeaderName)(e.auth_header_name),e.user_id&&F(e.user_id)}},[M]),(0,o.useEffect)(()=>{ee&&$&&e&&(0,sh.kE)($,e,ee,A),ee&&$&&e&&(0,eR.j)(ee,$,e,null,y),ee&&(0,sg.f)(ee,v)},[ee,$,e]),(0,o.useEffect)(()=>{ee&&M&&(async()=>{try{let e=await (0,n.getInProductNudgesCall)(ee),t=e?.is_claude_code_enabled||!1;U(t),t&&(V(!0),z(!1))}catch(e){console.error("Failed to fetch in-product nudges:",e)}})()},[ee,M]),(0,o.useEffect)(()=>{if(R&&!O){let e=setTimeout(()=>{z(!1)},15e3);return()=>clearTimeout(e)}},[R,O]),(0,o.useEffect)(()=>{if(H&&!G){let e=setTimeout(()=>{V(!1)},15e3);return()=>clearTimeout(e)}},[H,G]),q||el)?(0,a.jsx)(ez.A,{}):(0,a.jsx)(o.Suspense,{fallback:(0,a.jsx)(ez.A,{}),children:(0,a.jsx)(sX.Ht,{client:aU,children:(0,a.jsx)(aB.Ay,{theme:{algorithm:W?s2.A.darkAlgorithm:s2.A.defaultAlgorithm},children:(0,a.jsx)(a$.N,{accessToken:ee,children:Q?(0,a.jsx)(sJ.A,{userID:$,userRole:e,premiumUser:s,teams:g,keys:f,setUserRole:t,userEmail:p,setUserEmail:h,setTeams:y,setKeys:j,organizations:b,addKey:er,createClicked:E}):(0,a.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,a.jsx)(su.A,{userID:$,userRole:e,premiumUser:s,userEmail:p,setProxySettings:k,proxySettings:N,accessToken:ee,isPublicPage:!1,sidebarCollapsed:es,onToggleSidebar:()=>{ea(!es)},isDarkMode:W,toggleDarkMode:()=>{J(!W)}}),(0,a.jsxs)("div",{className:"flex flex-1",children:[(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(d,{setPage:e=>{let t=new URLSearchParams(S);t.set("page",e),window.history.pushState(null,"",`?${t.toString()}`),Z(e)},defaultSelectedKey:X,sidebarCollapsed:es})}),"api-keys"==X?(0,a.jsx)(sJ.A,{userID:$,userRole:e,premiumUser:s,teams:g,keys:f,setUserRole:t,userEmail:p,setUserEmail:h,setTeams:y,setKeys:j,organizations:b,addKey:er,createClicked:E}):"models"==X?(0,a.jsx)(c.A,{token:M,keys:f,modelData:T,setModelData:I,premiumUser:s,teams:g}):"llm-playground"==X?(0,a.jsx)(m.default,{}):"users"==X?(0,a.jsx)(aL.A,{userID:$,userRole:e,token:M,keys:f,teams:g,accessToken:ee,setKeys:j}):"teams"==X?(0,a.jsx)(sp.A,{teams:g,setTeams:y,accessToken:ee,userID:$,userRole:e,organizations:b,premiumUser:s}):"organizations"==X?(0,a.jsx)(sg.A,{organizations:b,setOrganizations:v,userModels:_,accessToken:ee,userRole:e,premiumUser:s}):"admin-panel"==X?(0,a.jsx)(u.A,{proxySettings:N}):"api_ref"==X?(0,a.jsx)(r.A,{proxySettings:N}):"logging-and-alerts"==X?(0,a.jsx)(sF.A,{userID:$,userRole:e,accessToken:ee,premiumUser:s}):"budgets"==X?(0,a.jsx)(eL.A,{accessToken:ee}):"guardrails"==X?(0,a.jsx)(so.A,{accessToken:ee,userRole:e}):"policies"==X?(0,a.jsx)(sd.A,{accessToken:ee,userRole:e}):"agents"==X?(0,a.jsx)(eq,{accessToken:ee,userRole:e}):"prompts"==X?(0,a.jsx)(sf.A,{accessToken:ee,userRole:e}):"transform-request"==X?(0,a.jsx)(sG.A,{accessToken:ee}):"router-settings"==X?(0,a.jsx)(tq.A,{userID:$,userRole:e,accessToken:ee,modelData:T}):"ui-theme"==X?(0,a.jsx)(sK.A,{userID:$,userRole:e,accessToken:ee}):"cost-tracking"==X?(0,a.jsx)(tP,{userID:$,userRole:e,accessToken:ee}):"model-hub-table"==X?(0,eg.OY)(e)?(0,a.jsx)(sm.A,{accessToken:ee,publicPage:!1,premiumUser:s,userRole:e}):(0,a.jsx)(sj.A,{accessToken:ee,isEmbedded:!0}):"caching"==X?(0,a.jsx)(e$.A,{userID:$,userRole:e,token:M,accessToken:ee,premiumUser:s}):"pass-through-settings"==X?(0,a.jsx)(sy.A,{userID:$,userRole:e,accessToken:ee,modelData:T,premiumUser:s}):"logs"==X?(0,a.jsx)(aq.A,{userID:$,userRole:e,token:M,accessToken:ee,allTeams:g??[],premiumUser:s}):"mcp-servers"==X?(0,a.jsx)(sc.p,{accessToken:ee,userRole:e,userID:$}):"search-tools"==X?(0,a.jsx)(s$,{accessToken:ee,userRole:e,userID:$}):"tag-management"==X?(0,a.jsx)(sV.A,{accessToken:ee,userRole:e,userID:$}):"claude-code-plugins"==X?(0,a.jsx)(eF.A,{accessToken:ee,userRole:e}):"access-groups"==X?(0,a.jsx)(aC,{}):"vector-stores"==X?(0,a.jsx)(aS.A,{accessToken:ee,userRole:e,userID:$}):"tool-policies"==X?(0,a.jsx)(aP,{accessToken:ee,userRole:e}):"guardrails-monitor"==X?(0,a.jsx)(si,{accessToken:ee}):"new_usage"==X?(0,a.jsx)(sx.A,{teams:g??[],organizations:b??[]}):(0,a.jsx)(sW.A,{userID:$,userRole:e,token:M,accessToken:ee,keys:f,premiumUser:s})]}),(0,a.jsx)(sU,{isVisible:H,onOpen:()=>{V(!1),K(!0)},onDismiss:()=>{V(!1)}}),(0,a.jsx)(sH,{isOpen:G,onClose:()=>{K(!1),V(!0)},onComplete:()=>{K(!1)}})]})})})})})}function aV(){return(0,a.jsx)(o.Suspense,{fallback:(0,a.jsx)(ez.A,{}),children:(0,a.jsx)(aH,{})})}},50995:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var a=s(95155),r=s(12115),l=s(94514),n=s(73300),i=s(27397),o=s(88522);let d=({code:e,language:t})=>{let[s,d]=(0,r.useState)(!1);return(0,a.jsxs)("div",{className:"relative rounded-lg border border-gray-200 overflow-hidden",children:[(0,a.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(e),d(!0),setTimeout(()=>d(!1),2e3)},className:"absolute top-3 right-3 p-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-600 z-10","aria-label":"Copy code",children:s?(0,a.jsx)(l.A,{size:16}):(0,a.jsx)(n.A,{size:16})}),(0,a.jsx)(i.A,{language:t,style:o.A,customStyle:{margin:0,padding:"1.5rem",borderRadius:"0.5rem",fontSize:"0.9rem",backgroundColor:"#fafafa"},showLineNumbers:!0,children:e})]})}},71104:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var a=s(95155),r=s(12115),l=s(87278),n=s(34537),i=s(2283),o=s(28436),d=s(12120);let c=({accessToken:e})=>{let[t,s]=(0,r.useState)(`{
  "model": "openai/gpt-4o",
  "messages": [
    {
      "role": "system",
      "content": "You are a helpful assistant."
    },
    {
      "role": "user",
      "content": "Explain quantum computing in simple terms"
    }
  ],
  "temperature": 0.7,
  "max_tokens": 500,
  "stream": true
}`),[c,m]=(0,r.useState)(""),[u,x]=(0,r.useState)(!1),p=async()=>{x(!0);try{let l;try{l=JSON.parse(t)}catch(e){d.Ay.fromBackend("Invalid JSON in request body"),x(!1);return}let n={call_type:"completion",request_body:l};if(!e){d.Ay.fromBackend("No access token found"),x(!1);return}let i=await (0,o.transformRequestCall)(e,n);if(i.raw_request_api_base&&i.raw_request_body){var s,a,r;let e,t,l=(s=i.raw_request_api_base,a=i.raw_request_body,r=i.raw_request_headers||{},e=JSON.stringify(a,null,2).split("\n").map(e=>`  ${e}`).join("\n"),t=Object.entries(r).map(([e,t])=>`-H '${e}: ${t}'`).join(" \\\n  "),`curl -X POST \\
  ${s} \\
  ${t?`${t} \\
  `:""}-H 'Content-Type: application/json' \\
  -d '{
${e}
  }'`);m(l),d.Ay.success("Request transformed successfully")}else{let e="string"==typeof i?i:JSON.stringify(i);m(e),d.Ay.info("Transformed request received in unexpected format")}}catch(e){console.error("Error transforming request:",e),d.Ay.fromBackend("Failed to transform request")}finally{x(!1)}};return(0,a.jsxs)("div",{className:"w-full m-2",style:{overflow:"hidden"},children:[(0,a.jsx)(i.h,{children:"Playground"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"See how Silinex transforms your request for the specified provider."}),(0,a.jsxs)("div",{style:{display:"flex",gap:"16px",width:"100%",minWidth:0,overflow:"hidden"},className:"mt-4",children:[(0,a.jsxs)("div",{style:{flex:"1 1 50%",display:"flex",flexDirection:"column",border:"1px solid #e8e8e8",borderRadius:"8px",padding:"24px",overflow:"hidden",maxHeight:"600px",minWidth:0},children:[(0,a.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,a.jsx)("h2",{style:{fontSize:"24px",fontWeight:"bold",margin:"0 0 4px 0"},children:"Original Request"}),(0,a.jsx)("p",{style:{color:"#666",margin:0},children:"The request you would send to Silinex /chat/completions endpoint."})]}),(0,a.jsx)("textarea",{style:{flex:"1 1 auto",width:"100%",minHeight:"240px",padding:"16px",border:"1px solid #e8e8e8",borderRadius:"6px",fontFamily:"monospace",fontSize:"14px",resize:"none",marginBottom:"24px",overflow:"auto"},value:t,onChange:e=>s(e.target.value),onKeyDown:e=>{(e.metaKey||e.ctrlKey)&&"Enter"===e.key&&(e.preventDefault(),p())},placeholder:"Press Cmd/Ctrl + Enter to transform"}),(0,a.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"auto"},children:(0,a.jsxs)(l.Ay,{type:"primary",style:{backgroundColor:"#000",display:"flex",alignItems:"center",gap:"8px"},onClick:p,loading:u,children:[(0,a.jsx)("span",{children:"Transform"}),(0,a.jsx)("span",{children:"â†’"})]})})]}),(0,a.jsxs)("div",{style:{flex:"1 1 50%",display:"flex",flexDirection:"column",border:"1px solid #e8e8e8",borderRadius:"8px",padding:"24px",overflow:"hidden",maxHeight:"800px",minWidth:0},children:[(0,a.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,a.jsx)("h2",{style:{fontSize:"24px",fontWeight:"bold",margin:"0 0 4px 0"},children:"Transformed Request"}),(0,a.jsx)("p",{style:{color:"#666",margin:0},children:"How Silinex transforms your request for the specified provider."}),(0,a.jsx)("br",{}),(0,a.jsx)("p",{style:{color:"#666",margin:0},className:"text-xs",children:"Note: Sensitive headers are not shown."})]}),(0,a.jsxs)("div",{style:{position:"relative",backgroundColor:"#f5f5f5",borderRadius:"6px",flex:"1 1 auto",display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,a.jsx)("pre",{style:{padding:"16px",fontFamily:"monospace",fontSize:"14px",margin:0,overflow:"auto",flex:"1 1 auto"},children:c||`curl -X POST \\
  https://api.openai.com/v1/chat/completions \\
  -H 'Authorization: Bearer sk-xxx' \\
  -H 'Content-Type: application/json' \\
  -d '{
  "model": "gpt-4",
  "messages": [
    {
      "role": "system",
      "content": "You are a helpful assistant."
    }
  ],
  "temperature": 0.7
  }'`}),(0,a.jsx)(l.Ay,{type:"text",icon:(0,a.jsx)(n.A,{}),style:{position:"absolute",right:"8px",top:"8px"},size:"small",onClick:()=>{navigator.clipboard.writeText(c||""),d.Ay.success("Copied to clipboard")}})]})]})]}),(0,a.jsx)("div",{className:"mt-4 text-right w-full",children:(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Found an error? File an issue"," ",(0,a.jsx)("a",{href:"https://github.com/BerriAI/litellm/issues",target:"_blank",rel:"noopener noreferrer",children:"here"}),"."]})})]})}},79923:(e,t,s)=>{Promise.resolve().then(s.bind(s,41482))},96637:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(95155),r=s(87287),l=s(95480);function n(){return(0,a.jsxs)("div",{className:(0,r.cx)("h-screen","flex items-center justify-center gap-4"),children:[(0,a.jsxs)("div",{className:"text-lg font-medium py-2 pr-4 border-r border-r-gray-200 flex items-center gap-2",children:[(0,a.jsx)("img",{src:"https://cloud.siliconflow.cn/favicon.ico",alt:"Silinex Favicon",className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Silinex"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)(l.S,{className:"size-4"}),(0,a.jsx)("span",{className:"text-gray-600 text-sm",children:"Loading..."})]})]})}}},e=>{e.O(0,[9861,1772,586,3725,5884,1145,1909,1326,8536,8267,3146,9904,1291,5049,9791,2360,1242,941,54,3138,6769,5895,139,2823,4725,4245,6200,7397,8347,4135,4557,4132,9285,3079,9750,4474,3416,4707,206,4405,8358,4962,4394,3847,4320,3303,8931,8086,8896,5725,7583,3694,7729,2280,8700,6675,1998,4421,6592,4490,733,3502,7382,6846,5630,4876,3581,4e3,4749,8456,2552,8239,7905,8441,3794,7358],()=>e(e.s=79923)),_N_E=e.O()}]);