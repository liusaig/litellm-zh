(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3457],{16243:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>m});var t=l(95155),r=l(12115),n=l(28436),s=l(26430),o=l(35625),c=l(42696),i=l(38456),u=l(27873);let m=()=>{let{accessToken:e,userRole:a,userId:l,premiumUser:m,userEmail:h}=(0,c.A)(),{teams:d,setTeams:g}=(0,u.A)(),[f,y]=(0,r.useState)(!1),[p,C]=(0,r.useState)([]),w=new s.E,{keys:S,isLoading:v,error:b,pagination:k,refresh:x,setKeys:E}=(({selectedTeam:e,currentOrg:a,selectedKeyAlias:l,accessToken:t,createClicked:s,expand:o=[]})=>{let[c,i]=(0,r.useState)({keys:[],total_count:0,current_page:1,total_pages:0}),[u,m]=(0,r.useState)(!0),[h,d]=(0,r.useState)(null),g=async(e={})=>{try{if(console.log("calling fetchKeys"),!t)return void console.log("accessToken",t);m(!0);let a="number"==typeof e.page?e.page:1,l="number"==typeof e.pageSize?e.pageSize:100,r=await (0,n.keyListCall)(t,null,null,null,null,null,a,l,null,null,o.join(","));console.log("data",r),i(r),d(null)}catch(e){d(e instanceof Error?e:Error("An error occurred"))}finally{m(!1)}};return(0,r.useEffect)(()=>{g(),console.log("selectedTeam",e,"currentOrg",a,"accessToken",t,"selectedKeyAlias",l)},[e,a,t,l,s]),{keys:c.keys,isLoading:u,error:h,pagination:{currentPage:c.current_page,totalPages:c.total_pages,totalCount:c.total_count},refresh:g,setKeys:e=>{i(a=>{let l="function"==typeof e?e(a.keys):e;return{...a,keys:l}})}}})({selectedKeyAlias:null,currentOrg:null,accessToken:e||"",createClicked:f});return(0,t.jsx)(o.Ht,{client:w,children:(0,t.jsx)(i.A,{userID:l,userRole:a,userEmail:h,teams:d,keys:S,setUserRole:()=>{},setUserEmail:()=>{},setTeams:g,setKeys:E,premiumUser:m,organizations:p,addKey:e=>{E(a=>a?[...a,e]:[e]),y(()=>!f)},createClicked:f})})}},26562:(e,a,l)=>{"use strict";l.d(a,{j:()=>r});var t=l(28436);let r=async(e,a,l,r,n)=>{let s;s="Admin"!=l&&"Admin Viewer"!=l?await (0,t.teamListCall)(e,r?.organization_id||null,a):await (0,t.teamListCall)(e,r?.organization_id||null),console.log(`givenTeams: ${s}`),n(s)}},58737:(e,a,l)=>{"use strict";l.d(a,{N:()=>r,e:()=>n});var t=l(12115);let r=()=>{let[e,a]=(0,t.useState)("http://localhost:4000");return(0,t.useEffect)(()=>{{let{protocol:e,host:l}=window.location;a(`${e}//${l}`)}},[]),e},n=25},63076:(e,a,l)=>{"use strict";l.d(a,{Mw:()=>s,TK:()=>r,kR:()=>n});var t=l(28436);let r=async e=>{if(!e)return[];try{let{aliases:a}=await (0,t.keyAliasesCall)(e);return Array.from(new Set((a||[]).filter(Boolean)))}catch(e){return console.error("Error fetching all key aliases:",e),[]}},n=async(e,a)=>{if(!e)return[];try{let l=[],r=1,n=!0;for(;n;){let s=await (0,t.teamListCall)(e,a||null,null);l=[...l,...s],r<s.total_pages?r++:n=!1}return l}catch(e){return console.error("Error fetching all teams:",e),[]}},s=async e=>{if(!e)return[];try{let a=[],l=1,r=!0;for(;r;){let n=await (0,t.organizationListCall)(e);a=[...a,...n],l<n.total_pages?l++:r=!1}return a}catch(e){return console.error("Error fetching all organizations:",e),[]}}},72868:(e,a,l)=>{Promise.resolve().then(l.bind(l,16243))},92574:(e,a,l)=>{"use strict";l.d(a,{A:()=>m});var t=l(95155),r=l(55266),n=l(87278),s=l(23060),o=l(91808),c=l(29822),i=l.n(c),u=l(12115);let m=({options:e,onApplyFilters:a,onResetFilters:l,initialValues:c={},buttonLabel:m="筛选"})=>{let[h,d]=(0,u.useState)(!1),[g,f]=(0,u.useState)(c),[y,p]=(0,u.useState)({}),[C,w]=(0,u.useState)({}),[S,v]=(0,u.useState)({}),[b,k]=(0,u.useState)({}),x=(0,u.useCallback)(i()(async(e,a)=>{if(a.isSearchable&&a.searchFn){w(e=>({...e,[a.name]:!0}));try{let l=await a.searchFn(e);p(e=>({...e,[a.name]:l}))}catch(e){console.error("Error searching:",e),p(e=>({...e,[a.name]:[]}))}finally{w(e=>({...e,[a.name]:!1}))}}},300),[]),E=(0,u.useCallback)(async e=>{if(e.isSearchable&&e.searchFn&&!b[e.name]){w(a=>({...a,[e.name]:!0})),k(a=>({...a,[e.name]:!0}));try{let a=await e.searchFn("");p(l=>({...l,[e.name]:a}))}catch(a){console.error("Error loading initial options:",a),p(a=>({...a,[e.name]:[]}))}finally{w(a=>({...a,[e.name]:!1}))}}},[b]);(0,u.useEffect)(()=>{h&&e.forEach(e=>{e.isSearchable&&!b[e.name]&&E(e)})},[h,e,E,b]);let A=(e,l)=>{let t={...g,[e]:l};f(t),a(t)};return(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,t.jsx)(n.Ay,{icon:(0,t.jsx)(r.A,{className:"h-4 w-4"}),onClick:()=>d(!h),className:"flex items-center gap-2",children:m}),(0,t.jsx)(n.Ay,{onClick:()=>{let a={};e.forEach(e=>{a[e.name]=""}),f(a),l()},children:"重置筛选"})]}),h&&(0,t.jsx)("div",{className:"grid grid-cols-3 gap-x-6 gap-y-4 mb-6",children:["Team ID","Status","Organization ID","Key Alias","User ID","End User","Error Code","Error Message","Key Hash","Model"].map(a=>{let l,r=e.find(e=>e.label===a||e.name===a);return r?(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("label",{className:"text-sm text-gray-600",children:r.label||r.name}),r.isSearchable?(0,t.jsx)(s.A,{showSearch:!0,className:"w-full",placeholder:`搜索 ${r.label||r.name}...`,value:g[r.name]||void 0,onChange:e=>A(r.name,e),onOpenChange:e=>{e&&r.isSearchable&&!b[r.name]&&E(r)},onSearch:e=>{v(a=>({...a,[r.name]:e})),r.searchFn&&x(e,r)},filterOption:!1,loading:C[r.name],options:y[r.name]||[],allowClear:!0,notFoundContent:C[r.name]?"加载中...":"未找到结果"}):r.options?(0,t.jsx)(s.A,{className:"w-full",placeholder:`选择 ${r.label||r.name}...`,value:g[r.name]||void 0,onChange:e=>A(r.name,e),allowClear:!0,children:r.options.map(e=>(0,t.jsx)(s.A.Option,{value:e.value,children:e.label},e.value))}):r.customComponent?(l=r.customComponent,(0,t.jsx)(l,{value:g[r.name]||void 0,onChange:e=>A(r.name,e??""),placeholder:`Select ${r.label||r.name}...`})):(0,t.jsx)(o.A,{className:"w-full",placeholder:`Enter ${r.label||r.name}...`,value:g[r.name]||"",onChange:e=>A(r.name,e.target.value),allowClear:!0})]},r.name):null})})]})}}},e=>{e.O(0,[1772,3725,5884,1145,1909,1326,8536,8267,3146,9904,1291,5049,9791,2360,1242,941,54,3138,6769,5895,139,2823,4245,6200,8347,4557,3412,4394,3847,4320,3303,8931,8086,8456,8441,3794,7358],()=>e(e.s=72868)),_N_E=e.O()}]);