"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6675],{6675:(e,l,s)=>{s.d(l,{A:()=>sd});var t=s(95155),a=s(28436),r=s(26708),o=s(90078),i=s(42696);let d=(0,o.D)("credentials"),n=()=>{let{accessToken:e}=(0,i.A)();return(0,r.I)({queryKey:d.list({}),queryFn:async()=>await (0,a.credentialListCall)(e),enabled:!!e})};var c=s(14290),m=s(75954),u=s(13046),h=s(71050),x=s(37621),p=s(3134),g=s(12115),f=s(48658),j=s(10280);function _({data:e=[],columns:l,isLoading:s=!1,sorting:a=[],onSortingChange:r,pagination:o,onPaginationChange:i,enablePagination:d=!1}){let[n]=g.useState("onChange"),[c,m]=g.useState({}),[u,h]=g.useState({}),_=(0,x.N4)({data:e,columns:l,state:{sorting:a,columnSizing:c,columnVisibility:u,...d&&o?{pagination:o}:{}},columnResizeMode:n,onSortingChange:r,onColumnSizingChange:m,onColumnVisibilityChange:h,...d&&i?{onPaginationChange:i}:{},getCoreRowModel:(0,p.HT)(),...d?{getPaginationRowModel:(0,p.kW)()}:{},enableSorting:!0,enableColumnResizing:!0,manualSorting:!0,defaultColumn:{minSize:40,maxSize:500}});return(0,t.jsx)("div",{className:"rounded-lg custom-border relative",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsx)("div",{className:"relative min-w-full",children:(0,t.jsxs)(f.XI,{className:"[&_td]:py-2 [&_th]:py-2",style:{width:_.getTotalSize(),minWidth:"100%",tableLayout:"fixed"},children:[(0,t.jsx)(f.nd,{children:_.getHeaderGroups().map(e=>(0,t.jsx)(f.Hj,{children:e.headers.map(e=>(0,t.jsxs)(f.M_,{className:`py-1 h-8 relative ${"actions"===e.id?"sticky right-0 bg-white shadow-[-4px_0_8px_-6px_rgba(0,0,0,0.1)] w-[120px] ml-8":""} ${e.column.columnDef.meta?.className||""}`,style:{width:"actions"===e.id?120:e.getSize(),position:"actions"===e.id?"sticky":"relative",right:"actions"===e.id?0:"auto"},children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("div",{className:"flex items-center",children:e.isPlaceholder?null:(0,x.Kv)(e.column.columnDef.header,e.getContext())}),"actions"!==e.id&&e.column.getCanSort()&&r&&(0,t.jsx)(j.h,{sortState:!1!==e.column.getIsSorted()&&e.column.getIsSorted(),onSortChange:l=>{!1===l?r([]):r([{id:e.column.id,desc:"desc"===l}])},columnId:e.column.id})]}),e.column.getCanResize()&&(0,t.jsx)("div",{onMouseDown:e.getResizeHandler(),onTouchStart:e.getResizeHandler(),className:`absolute right-0 top-0 h-full w-2 cursor-col-resize select-none touch-none ${e.column.getIsResizing()?"bg-blue-500":"hover:bg-blue-200"}`})]},e.id))},e.id))}),(0,t.jsx)(f.BF,{children:s?(0,t.jsx)(f.Hj,{children:(0,t.jsx)(f.nA,{colSpan:l.length,className:"h-8 text-center",children:(0,t.jsx)("div",{className:"text-center text-gray-500",children:(0,t.jsx)("p",{children:"\uD83D\uDE85 Loading models..."})})})}):_.getRowModel().rows.length>0?_.getRowModel().rows.map(e=>(0,t.jsx)(f.Hj,{children:e.getVisibleCells().map(e=>(0,t.jsx)(f.nA,{className:`py-0.5 overflow-hidden ${"actions"===e.column.id?"sticky right-0 bg-white shadow-[-4px_0_8px_-6px_rgba(0,0,0,0.1)] w-[120px] ml-8":""} ${e.column.columnDef.meta?.className||""}`,style:{width:"actions"===e.column.id?120:e.column.getSize(),position:"actions"===e.column.id?"sticky":"relative",right:"actions"===e.column.id?0:"auto"},children:(0,x.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,t.jsx)(f.Hj,{children:(0,t.jsx)(f.nA,{colSpan:l.length,className:"h-8 text-center",children:(0,t.jsx)("div",{className:"text-center text-gray-500",children:(0,t.jsx)("p",{children:"No models found"})})})})})]})})})})}var y=s(26626),b=s(18404),v=s(94300),A=s(45588),N=s(34254),C=s(38983),k=s(19602),w=s(41326),S=s(54481),M=s(96073),I=s(7339),T=s(22277),E=s(23022),F=s(86019);let{Text:R,Title:P}=w.A,z=e=>{if(!e)return"-";let l=new Date(e);return Number.isNaN(l.getTime())?"-":l.toLocaleDateString("zh-CN")},L=e=>{if(null==e)return"-";let l="number"==typeof e?e:Number(e);return Number.isFinite(l)?new Intl.NumberFormat("zh-CN",{style:"currency",currency:"CNY",minimumFractionDigits:2,maximumFractionDigits:2}).format(l):"-"},O=(0,t.jsxs)(S.A,{direction:"vertical",size:12,children:[(0,t.jsx)(R,{strong:!0,style:{fontSize:13},children:"Credential types"}),(0,t.jsxs)(S.A,{direction:"vertical",size:8,children:[(0,t.jsx)(M.A,{align:"center",gap:8,children:(0,t.jsxs)(S.A,{direction:"vertical",children:[(0,t.jsxs)(M.A,{align:"center",gap:8,children:[(0,t.jsx)(y.A,{style:{color:"#1890ff"}}),(0,t.jsx)(P,{level:5,style:{margin:0,color:"#1890ff"},children:"Reusable"})]}),(0,t.jsx)(R,{type:"secondary",children:"Credentials saved in Silinex that can be added to models repeatedly."})]})}),(0,t.jsx)(I.A,{size:"small"}),(0,t.jsx)(M.A,{align:"center",gap:8,children:(0,t.jsxs)(S.A,{direction:"vertical",size:8,children:[(0,t.jsxs)(M.A,{align:"center",gap:8,children:[(0,t.jsx)(b.A,{style:{color:"#8c8c8c",fontSize:14,flexShrink:0}}),(0,t.jsx)(P,{level:5,style:{margin:0},children:"Manual"})]}),(0,t.jsx)(R,{type:"secondary",children:"Credentials added directly during model creation or defined in the config file."})]})})]})]}),q=e=>e?.model_info?.team_public_model_name?e.model_info.team_public_model_name:e?.model_name||"-";var B=s(13008),D=s(13121),V=s(73806),$=s(87278),G=s(23060),H=s(8536),U=s(51190),J=s(48934);let K=async(e,l)=>{let s=(0,a.getProxyBaseUrl)(),t=s?`${s}/config/field/update`:"/config/field/update",r=await fetch(t,{method:"POST",headers:{[(0,a.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({field_name:"store_model_in_db",field_value:l.store_model_in_db,config_type:"general_settings"})});if(!r.ok){let e=await r.json().catch(()=>({}));throw Error(e?.error?.message||e?.message||e?.detail||"Failed to update model storage settings")}return await r.json()};var W=s(12120),X=s(34425),Y=s(25387),Q=s(3373),Z=s(16989);let ee=({isVisible:e,onCancel:l,onSuccess:s})=>{let[a]=Y.A.useForm(),{mutateAsync:r,isPending:o}=(()=>{let{accessToken:e}=(0,i.A)();return(0,J.n)({mutationFn:async l=>{if(!e)throw Error("Access token is required");return await K(e,l)}})})(),{data:d,isLoading:n,refetch:c}=(0,U.sM)(U.$S.GENERAL_SETTINGS);(0,g.useEffect)(()=>{e&&c()},[e,c]);let m=(0,g.useMemo)(()=>{if(!d)return{store_model_in_db:!1};let e=d.find(e=>"store_model_in_db"===e.field_name);return{store_model_in_db:e?.field_value??!1}},[d]),u=async e=>{try{await r(e,{onSuccess:()=>{W.Ay.success("Model storage settings updated successfully"),c(),s?.()},onError:e=>{W.Ay.fromBackend("Failed to save model storage settings: "+(0,X.x)(e))}})}catch(e){W.Ay.fromBackend("Failed to save model storage settings: "+(0,X.x)(e))}},h=()=>{a.resetFields(),l()};return(0,t.jsx)(Q.A,{title:(0,t.jsx)(w.A.Title,{level:5,children:"Model Settings"}),open:e,footer:(0,t.jsxs)(S.A,{children:[(0,t.jsx)($.Ay,{onClick:h,disabled:o||n,children:"Cancel"}),(0,t.jsx)($.Ay,{type:"primary",loading:o,disabled:n,onClick:()=>a.submit(),children:o?"Saving...":"Save Settings"})]}),onCancel:h,children:(0,t.jsx)(Y.A,{form:a,layout:"horizontal",onFinish:u,initialValues:m,children:(0,t.jsx)(Y.A.Item,{label:"Store Model in DB",name:"store_model_in_db",tooltip:d?.find(e=>"store_model_in_db"===e.field_name)?.field_description||"If enabled, models and config are stored in and loaded from the database.",valuePropName:"checked",children:n?(0,t.jsx)(H.A.Input,{active:!0,block:!0}):(0,t.jsx)(Z.A,{})})},d?JSON.stringify(m):"loading")})};var el=s(29822),es=s.n(el);let et=(e,l)=>{if(!e?.data)return{data:[]};let s=JSON.parse(JSON.stringify(e.data));for(let e=0;e<s.length;e++){let t=s[e],a=t?.litellm_params?.model,r=t?.litellm_params?.custom_llm_provider,o=t?.model_info,i="",d=null,n=null,c="Undefined",m="Undefined",u={};if(a){let e=a.split("/"),s=e[0];(i=r)||(i=1===e.length?l(a):s)}else i="-";o&&(d=o?.input_cost_per_token,n=o?.output_cost_per_token,c=o?.max_tokens,m=o?.max_input_tokens),t?.litellm_params&&(u=Object.fromEntries(Object.entries(t?.litellm_params).filter(([e])=>"model"!==e&&"api_base"!==e))),s[e].provider=i,s[e].input_cost=d,s[e].output_cost=n,s[e].litellm_model_name=a,null!=s[e].input_cost&&(s[e].input_cost=(1e6*Number(s[e].input_cost)).toFixed(2)),null!=s[e].output_cost&&(s[e].output_cost=(1e6*Number(s[e].output_cost)).toFixed(2)),s[e].max_tokens=c,s[e].max_input_tokens=m,s[e].api_base=t?.litellm_params?.api_base,s[e].cleanedLitellmParams=u}return{data:s}},ea=({selectedModelGroup:e,setSelectedModelGroup:l,availableModelGroups:s,availableModelAccessGroups:a,setSelectedModelId:r,setSelectedTeamId:o})=>{let{t:d}=(0,c.o)(),{data:n,isLoading:h}=(0,m.o)(),{userId:x,userRole:p,premiumUser:f}=(0,i.A)(),[j,w]=(0,g.useState)(""),[I,P]=(0,g.useState)(""),[U,J]=(0,g.useState)(!1),[K,W]=(0,g.useState)(null),[X,Y]=(0,g.useState)(new Set),[Q,Z]=(0,g.useState)(1),[el]=(0,g.useState)(50),[ea,er]=(0,g.useState)({pageIndex:0,pageSize:50}),[eo,ei]=(0,g.useState)([]),[ed,en]=(0,g.useState)(!1),ec=(0,g.useMemo)(()=>es()(e=>{P(e),Z(1),er(e=>({...e,pageIndex:0}))},200),[]);(0,g.useEffect)(()=>(ec(j),()=>{ec.cancel()}),[j,ec]);let em=(0,g.useMemo)(()=>{if(0===eo.length)return;let e=eo[0];return({input_cost:"costs",model_info_db_model:"status",model_info_created_by:"created_at",model_info_updated_at:"updated_at"})[e.id]||e.id},[eo]),eu=(0,g.useMemo)(()=>{if(0!==eo.length)return eo[0].desc?"desc":"asc"},[eo]),{data:eh,isLoading:ex}=(0,u.oE)(Q,el,I||void 0,void 0,void 0,em,eu),ep=ex||h,eg=e=>null!=n&&"object"==typeof n&&e in n?n[e].litellm_provider:"openai",ef=(0,g.useMemo)(()=>eh?et(eh,eg):{data:[]},[eh,n]),ej=(0,g.useMemo)(()=>eh?{total_count:eh.total_count??0,current_page:eh.current_page??1,total_pages:eh.total_pages??1,size:eh.size??el}:{total_count:0,current_page:1,total_pages:1,size:el},[eh,el]),e_=(0,g.useMemo)(()=>ef&&ef.data&&0!==ef.data.length?ef.data.filter(l=>{let s="all"===e||l.model_name===e||!e||"wildcard"===e&&l.model_name?.includes("*"),t="all"===K||l.model_info.access_groups?.includes(K)||!K;return s&&t}):[],[ef,e,K]);return(0,g.useEffect)(()=>{er(e=>({...e,pageIndex:0})),Z(1)},[e,K]),(0,g.useEffect)(()=>{Z(1),er(e=>({...e,pageIndex:0}))},[eo]),(0,t.jsxs)(V.A,{children:[(0,t.jsx)(D.A,{children:(0,t.jsx)("div",{className:"flex flex-col space-y-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,t.jsx)("div",{className:"border-b px-6 py-4",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,t.jsxs)("div",{className:"relative w-64",children:[(0,t.jsx)("input",{type:"text",placeholder:d("models.allModels.searchPlaceholder"),className:"w-full px-3 py-2 pl-8 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:j,onChange:e=>w(e.target.value)}),(0,t.jsx)("svg",{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,t.jsxs)("button",{className:`px-3 py-2 text-sm border rounded-md hover:bg-gray-50 flex items-center gap-2 ${U?"bg-gray-100":""}`,onClick:()=>J(!U),children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"筛选"]}),(0,t.jsxs)("button",{className:"px-3 py-2 text-sm border rounded-md hover:bg-gray-50 flex items-center gap-2",onClick:()=>{w(""),l("all"),W(null),Z(1),er({pageIndex:0,pageSize:50}),ei([])},children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"重置筛选"]})]}),(0,t.jsx)($.Ay,{icon:(0,t.jsx)(B.A,{}),onClick:()=>en(!0),title:"模型设置"})]}),U&&(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mt-3",children:[(0,t.jsx)("div",{className:"w-64",children:(0,t.jsx)(G.A,{className:"w-full",value:e??"all",onChange:e=>l("all"===e?"all":e),placeholder:d("models.allModels.filterByModelName"),showSearch:!0,options:[{value:"all",label:d("models.allModels.allModels")},{value:"wildcard",label:d("models.allModels.wildcardModels")},...s.map((e,l)=>({value:e,label:e}))]})}),(0,t.jsx)("div",{className:"w-64",children:(0,t.jsx)(G.A,{className:"w-full",value:K??"all",onChange:e=>W("all"===e?null:e),placeholder:d("models.allModels.filterByAccessGroup"),showSearch:!0,options:[{value:"all",label:d("models.allModels.allModelAccessGroups")},...a.map((e,l)=>({value:e,label:e}))]})})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[ep?(0,t.jsx)(H.A.Input,{active:!0,style:{width:184,height:20}}):(0,t.jsx)("span",{className:"text-sm text-gray-700",children:ej.total_count>0?d("models.allModels.showingResults").replace("{start}",String((Q-1)*el+1)).replace("{end}",String(Math.min(Q*el,ej.total_count))).replace("{total}",String(ej.total_count)):d("models.allModels.showingZeroResults")}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[ep?(0,t.jsx)(H.A.Button,{active:!0,style:{width:84,height:30}}):(0,t.jsx)("button",{onClick:()=>{Z(Q-1),er(e=>({...e,pageIndex:0}))},disabled:1===Q,className:`px-3 py-1 text-sm border rounded-md ${1===Q?"bg-gray-100 text-gray-400 cursor-not-allowed":"hover:bg-gray-50"}`,children:d("models.allModels.previousPage")}),ep?(0,t.jsx)(H.A.Button,{active:!0,style:{width:56,height:30}}):(0,t.jsx)("button",{onClick:()=>{Z(Q+1),er(e=>({...e,pageIndex:0}))},disabled:Q>=ej.total_pages,className:`px-3 py-1 text-sm border rounded-md ${Q>=ej.total_pages?"bg-gray-100 text-gray-400 cursor-not-allowed":"hover:bg-gray-50"}`,children:d("models.allModels.nextPage")})]})]})]})}),(0,t.jsx)(_,{columns:((e,l,s,a,r,o,i,d,n,c,m=e=>e)=>[{header:()=>(0,t.jsx)("span",{className:"text-sm font-semibold",children:m("models.columns.modelId")}),accessorKey:"model_info.id",enableSorting:!1,size:130,minSize:80,cell:({row:e})=>{let l=e.original.model_info.id;return(0,t.jsx)(T.A,{title:l,children:(0,t.jsx)("button",{type:"button",className:"text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs cursor-pointer w-full block text-left rounded",style:{fontSize:14,padding:"1px 8px"},onClick:()=>a(l),"aria-label":`${m("models.columns.modelId")}: ${l}`,children:(0,t.jsx)(R,{ellipsis:!0,children:l})})})}},{header:()=>(0,t.jsx)("span",{className:"text-sm font-semibold",children:m("models.columns.modelInformation")}),accessorKey:"model_name",size:250,minSize:120,cell:({row:e})=>{let l=e.original,s=o(e.original)||"-",a=(0,t.jsxs)(S.A,{direction:"vertical",size:12,style:{minWidth:220},children:[(0,t.jsxs)(M.A,{align:"center",gap:8,children:[(0,t.jsx)(F.v,{provider:l.provider}),(0,t.jsx)(R,{type:"secondary",style:{fontSize:12},ellipsis:!0,children:l.provider||"Unknown provider"})]}),(0,t.jsxs)(S.A,{direction:"vertical",size:6,children:[(0,t.jsxs)(S.A,{direction:"vertical",size:2,style:{width:"100%"},children:[(0,t.jsx)(R,{type:"secondary",style:{fontSize:11},children:"Public Model Name"}),(0,t.jsx)(R,{strong:!0,style:{fontSize:13,maxWidth:480},ellipsis:!0,title:s,children:s})]}),(0,t.jsxs)(S.A,{direction:"vertical",size:2,children:[(0,t.jsx)(R,{type:"secondary",style:{fontSize:11},children:"Silinex Model Name"}),(0,t.jsx)(R,{style:{fontSize:13},copyable:{text:l.litellm_model_name||"-"},ellipsis:!0,title:l.litellm_model_name||"-",children:l.litellm_model_name||"-"})]})]})]});return(0,t.jsx)(E.A,{content:a,placement:"right",arrow:{pointAtCenter:!0},styles:{root:{maxWidth:500}},children:(0,t.jsxs)("div",{className:"flex items-start space-x-2 min-w-0 w-full cursor-pointer",children:[(0,t.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:l.provider?(0,t.jsx)(F.v,{provider:l.provider}):(0,t.jsx)("div",{className:"w-4 h-4 rounded-full bg-gray-200 flex items-center justify-center text-xs",children:"-"})}),(0,t.jsxs)("div",{className:"flex flex-col min-w-0 flex-1",children:[(0,t.jsx)(R,{ellipsis:!0,className:"text-gray-900",style:{fontSize:12,fontWeight:500,lineHeight:"16px"},children:s}),(0,t.jsx)(R,{ellipsis:!0,type:"secondary",style:{fontSize:12,lineHeight:"16px",marginTop:2},children:l.litellm_model_name||"-"})]})]})})}},{header:()=>(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"text-sm font-semibold",children:m("models.columns.credentials")}),(0,t.jsx)(E.A,{content:O,placement:"bottom",arrow:{pointAtCenter:!0},children:(0,t.jsx)(v.A,{className:"cursor-pointer text-gray-400 hover:text-gray-600",style:{fontSize:12}})})]}),accessorKey:"litellm_credential_name",enableSorting:!1,size:180,minSize:100,cell:({row:e})=>{let l=e.original,s=l.litellm_params?.litellm_credential_name,a=!!s;return(0,t.jsx)("div",{className:"flex items-center space-x-2 min-w-0 w-full",children:a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.A,{className:"flex-shrink-0",style:{color:"#1890ff",fontSize:14}}),(0,t.jsx)("span",{className:"text-xs truncate text-blue-600",title:s,children:s})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b.A,{className:"flex-shrink-0",style:{color:"#8c8c8c",fontSize:14}}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"Manual"})]})})}},{header:()=>(0,t.jsx)("span",{className:"text-sm font-semibold",children:m("models.columns.createdBy")}),accessorKey:"model_info.created_by",sortingFn:"datetime",size:160,minSize:100,cell:({row:e})=>{let l=e.original,s=!l.model_info?.db_model,a=l.model_info.created_by?.trim(),r=z(l.model_info.created_at);return(0,t.jsxs)("div",{className:"flex flex-col min-w-0 w-full",children:[(0,t.jsx)("div",{className:"text-xs font-medium text-gray-900 truncate",title:s?"配置文件":a||"-",children:s?"配置文件":a||"-"}),(0,t.jsx)("div",{className:"text-xs text-gray-500 truncate mt-0.5",title:s?"-":r,children:s?"-":r})]})}},{header:()=>(0,t.jsx)("span",{className:"text-sm font-semibold",children:m("models.columns.updatedAt")}),accessorKey:"model_info.updated_at",sortingFn:"datetime",size:120,minSize:80,cell:({row:e})=>{let l=e.original,s=z(l.model_info.updated_at||l.model_info.created_at);return(0,t.jsx)("span",{className:"text-xs",children:s})}},{header:()=>(0,t.jsx)("span",{className:"text-sm font-semibold",children:m("models.columns.costs")}),accessorKey:"input_cost",size:120,minSize:80,cell:({row:e})=>{let l=e.original,s=l.input_cost,a=l.output_cost;return null==s&&null==a?(0,t.jsx)("div",{className:"w-full",children:(0,t.jsx)("span",{className:"text-xs text-gray-400",children:"-"})}):(0,t.jsx)(T.A,{title:"每 1M Tokens 费用",children:(0,t.jsxs)("div",{className:"flex flex-col min-w-0 w-full",children:[null!=s&&(0,t.jsxs)("div",{className:"text-xs font-medium text-gray-900 truncate",children:["输入: ",L(s)]}),null!=a&&(0,t.jsxs)("div",{className:"text-xs text-gray-500 truncate mt-0.5",children:["输出: ",L(a)]})]})})}},{header:()=>(0,t.jsx)("span",{className:"text-sm font-semibold",children:m("models.columns.teamId")}),accessorKey:"model_info.team_id",enableSorting:!1,size:130,minSize:80,cell:({row:e})=>{let l=e.original;return l.model_info.team_id?(0,t.jsx)("div",{className:"overflow-hidden w-full",children:(0,t.jsx)(T.A,{title:l.model_info.team_id,children:(0,t.jsxs)(C.A,{size:"xs",variant:"light",className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left overflow-hidden truncate w-full",onClick:()=>r(l.model_info.team_id),children:[l.model_info.team_id.slice(0,7),"..."]})})}):"-"}},{header:()=>(0,t.jsx)("span",{className:"text-sm font-semibold",children:m("models.columns.modelAccessGroup")}),accessorKey:"model_info.model_access_group",enableSorting:!1,size:180,minSize:100,cell:({row:e})=>{let l=e.original,s=l.model_info.access_groups;if(!s||0===s.length)return"-";let a=l.model_info.id,r=n.has(a),o=s.length>1;return(0,t.jsxs)("div",{className:"flex items-center gap-1 overflow-hidden w-full",children:[(0,t.jsx)(N.A,{size:"xs",color:"blue",className:"text-xs px-1.5 py-0.5 h-5 leading-tight flex-shrink-0",children:s[0]}),(r||!o&&2===s.length)&&s.slice(1).map((e,l)=>(0,t.jsx)(N.A,{size:"xs",color:"blue",className:"text-xs px-1.5 py-0.5 h-5 leading-tight flex-shrink-0",children:e},l+1)),o&&(0,t.jsx)("button",{onClick:e=>{let l;e.stopPropagation(),l=new Set(n),r?l.delete(a):l.add(a),c(l)},className:"text-xs text-blue-600 hover:text-blue-800 px-1 py-0.5 rounded hover:bg-blue-50 h-5 leading-tight flex-shrink-0 whitespace-nowrap",children:r?"−":`+${s.length-1}`})]})}},{id:"actions",header:()=>(0,t.jsx)("span",{className:"text-sm font-semibold",children:m("models.columns.actions")}),size:60,minSize:40,enableResizing:!1,cell:({row:s})=>{let r=s.original,o="Admin"===e||r.model_info?.created_by===l,i=!r.model_info?.db_model;return(0,t.jsx)("div",{className:"flex items-center justify-end gap-2 pr-4",children:i?(0,t.jsx)(T.A,{title:"Config model cannot be deleted on the dashboard. Please delete it from the config file.",children:(0,t.jsx)(k.A,{icon:A.A,size:"sm",className:"opacity-50 cursor-not-allowed"})}):(0,t.jsx)(T.A,{title:"Delete model",children:(0,t.jsx)(k.A,{icon:A.A,size:"sm",onClick:()=>{o&&a(r.model_info.id)},className:o?"cursor-pointer hover:text-red-600":"opacity-50 cursor-not-allowed"})})})}}])(p,x,0,r,o,q,0,0,X,Y,d),data:e_,isLoading:ex,sorting:eo,onSortingChange:ei,pagination:ea,onPaginationChange:er,enablePagination:!0})]})})}),(0,t.jsx)(ee,{isVisible:ed,onCancel:()=>en(!1),onSuccess:()=>en(!1)})]})};var er=s(39197),eo=s(22054),ei=s(75892),ed=s(64628),en=s(8208);let ec={"BadRequestError (400)":"BadRequestErrorRetries","AuthenticationError  (401)":"AuthenticationErrorRetries","TimeoutError (408)":"TimeoutErrorRetries","RateLimitError (429)":"RateLimitErrorRetries","ContentPolicyViolationError (400)":"ContentPolicyViolationErrorRetries","InternalServerError (500)":"InternalServerErrorRetries"},em=({selectedModelGroup:e,setSelectedModelGroup:l,availableModelGroups:s,globalRetryPolicy:a,setGlobalRetryPolicy:r,defaultRetry:o,modelGroupRetryPolicy:i,setModelGroupRetryPolicy:d,handleSaveRetrySettings:n})=>{let{t:m}=(0,c.o)();return(0,t.jsxs)(V.A,{children:[(0,t.jsx)("div",{className:"flex items-center gap-4 mb-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(ei.A,{children:m("models.retrySettings.scopeLabel")}),(0,t.jsxs)(er.A,{className:"ml-2 w-48",defaultValue:"global",value:"global"===e?"global":e||s[0],onValueChange:e=>l(e),children:[(0,t.jsx)(eo.A,{value:"global",children:m("models.retrySettings.globalTitle")}),s.map((e,s)=>(0,t.jsx)(eo.A,{value:e,onClick:()=>l(e),children:e},s))]})]})}),"global"===e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ed.A,{children:m("models.retrySettings.globalTitle")}),(0,t.jsx)(ei.A,{className:"mb-6",children:m("models.retrySettings.globalDescription")})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ed.A,{children:m("models.retrySettings.modelGroupTitle").replace("{modelGroup}",e||"")}),(0,t.jsx)(ei.A,{className:"mb-6",children:m("models.retrySettings.modelGroupDescription")})]}),ec&&(0,t.jsx)("table",{children:(0,t.jsx)("tbody",{children:Object.entries(ec).map(([l,s],n)=>{let c;if("global"===e)c=a?.[s]??o;else{let l=i?.[e]?.[s];c=null!=l?l:a?.[s]??o}return(0,t.jsxs)("tr",{className:"flex justify-between items-center mt-2",children:[(0,t.jsxs)("td",{children:[(0,t.jsx)(ei.A,{children:l}),"global"!==e&&(0,t.jsxs)(ei.A,{className:"text-xs text-gray-500 ml-2",children:["(全局：",a?.[s]??o,")"]})]}),(0,t.jsx)("td",{children:(0,t.jsx)(en.A,{className:"ml-5",value:c,min:0,step:1,onChange:l=>{"global"===e?r(e=>null==l?e:{...e??{},[s]:l}):d(t=>{let a=t?.[e]??{};return{...t??{},[e]:{...a,[s]:l}}})}})})]},n)})})}),(0,t.jsx)(C.A,{className:"mt-6 mr-8",onClick:n,children:m("models.common.save")})]})};var eu=s(80483),eh=s(69779),ex=s(48849),ep=s(50039),eg=s(84425),ef=s(6516),ej=s(57513),e_=s(68413),ey=s(87233);let{Text:eb}=w.A,ev=({accessToken:e,onReloadSuccess:l,buttonText:s="Reload Price Data",showIcon:r=!0,size:o="middle",type:i="primary",className:d=""})=>{let{t:n}=(0,c.o)(),[m,u]=(0,g.useState)(!1),[h,x]=(0,g.useState)(!1),[p,f]=(0,g.useState)(!1),[j,_]=(0,g.useState)(!1),[y,b]=(0,g.useState)(6),[A,N]=(0,g.useState)(null),[C,k]=(0,g.useState)(!1),[w,M]=(0,g.useState)(null),[E,F]=(0,g.useState)(!1);(0,g.useEffect)(()=>{R(),P();let e=setInterval(()=>{R(),P()},3e4);return()=>clearInterval(e)},[e]);let R=async()=>{if(e){k(!0);try{console.log("Fetching reload status...");let l=await (0,a.getModelCostMapReloadStatus)(e);console.log("Received status:",l),N(l)}catch(e){console.error("Failed to fetch reload status:",e),N({scheduled:!1,interval_hours:null,last_run:null,next_run:null})}finally{k(!1)}}},P=async()=>{if(e){F(!0);try{let l=await (0,a.getModelCostMapSource)(e);M(l)}catch(e){console.error("Failed to fetch cost map source info:",e)}finally{F(!1)}}},z=async()=>{if(!e)return void W.Ay.fromBackend(n("models.priceReload.noAccessToken"));u(!0);try{let s=await (0,a.reloadModelCostMap)(e);"success"===s.status?(W.Ay.success(n("models.priceReload.reloadSuccess").replace("{count}",String(s.models_count||0))),l?.(),await R(),await P()):W.Ay.fromBackend(n("models.priceReload.reloadFailed"))}catch(e){console.error("Error reloading price data:",e),W.Ay.fromBackend(n("models.priceReload.reloadFailedTryAgain"))}finally{u(!1)}},L=async()=>{if(!e)return void W.Ay.fromBackend(n("models.priceReload.noAccessToken"));if(y<=0)return void W.Ay.fromBackend(n("models.priceReload.hoursGreaterThanZero"));x(!0);try{let l=await (0,a.scheduleModelCostMapReload)(e,y);"success"===l.status?(W.Ay.success(n("models.priceReload.scheduleSuccess").replace("{hours}",String(y))),_(!1),await R()):W.Ay.fromBackend(n("models.priceReload.scheduleFailed"))}catch(e){console.error("Error scheduling reload:",e),W.Ay.fromBackend(n("models.priceReload.scheduleFailedTryAgain"))}finally{x(!1)}},O=async()=>{if(!e)return void W.Ay.fromBackend(n("models.priceReload.noAccessToken"));f(!0);try{let l=await (0,a.cancelModelCostMapReload)(e);"success"===l.status?(W.Ay.success(n("models.priceReload.cancelSuccess")),await R()):W.Ay.fromBackend(n("models.priceReload.cancelFailed"))}catch(e){console.error("Error cancelling reload:",e),W.Ay.fromBackend(n("models.priceReload.cancelFailedTryAgain"))}finally{f(!1)}},q=e=>{if(!e)return n("models.priceReload.never");try{return new Date(e).toLocaleString()}catch{return e}};return(0,t.jsxs)("div",{className:d,children:[(0,t.jsxs)(S.A,{direction:"horizontal",size:"middle",style:{marginBottom:16},children:[(0,t.jsx)(eu.A,{title:n("models.priceReload.hardRefreshTitle"),description:n("models.priceReload.hardRefreshDescription"),onConfirm:z,okText:n("models.priceReload.yes"),cancelText:n("models.priceReload.no"),okButtonProps:{style:{backgroundColor:"#6366f1",borderColor:"#6366f1",color:"white",fontWeight:"500",borderRadius:"0.375rem",padding:"0.375rem 0.75rem",height:"auto",fontSize:"0.875rem",lineHeight:"1.25rem",transition:"all 0.2s ease-in-out"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#4f46e5"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#6366f1"}},children:(0,t.jsx)($.Ay,{type:i,size:o,loading:m,icon:r?(0,t.jsx)(ep.A,{}):void 0,style:{backgroundColor:"#6366f1",borderColor:"#6366f1",color:"white",fontWeight:"500",borderRadius:"0.375rem",padding:"0.375rem 0.75rem",height:"auto",fontSize:"0.875rem",lineHeight:"1.25rem",transition:"all 0.2s ease-in-out"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#4f46e5"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#6366f1"},children:s})}),A?.scheduled?(0,t.jsx)($.Ay,{type:"default",size:o,danger:!0,icon:(0,t.jsx)(ef.A,{}),loading:p,onClick:O,style:{borderColor:"#ff4d4f",color:"#ff4d4f",fontWeight:"500",borderRadius:"0.375rem",padding:"0.375rem 0.75rem",height:"auto",fontSize:"0.875rem",lineHeight:"1.25rem"},children:n("models.priceReload.cancelPeriodicReload")}):(0,t.jsx)($.Ay,{type:"default",size:o,icon:(0,t.jsx)(eg.A,{}),onClick:()=>_(!0),style:{borderColor:"#d9d9d9",color:"#6366f1",fontWeight:"500",borderRadius:"0.375rem",padding:"0.375rem 0.75rem",height:"auto",fontSize:"0.875rem",lineHeight:"1.25rem"},children:n("models.priceReload.setPeriodicReload")})]}),w&&(0,t.jsx)(eh.A,{size:"small",style:{backgroundColor:"remote"===w.source?"#f0f7ff":"#fff8f0",border:`1px solid ${"remote"===w.source?"#bae0ff":"#ffd591"}`,borderRadius:8,marginBottom:12},children:(0,t.jsxs)(S.A,{direction:"vertical",size:"small",style:{width:"100%"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:["remote"===w.source?(0,t.jsx)(ej.A,{style:{color:"#1677ff",fontSize:16}}):(0,t.jsx)(e_.A,{style:{color:"#fa8c16",fontSize:16}}),(0,t.jsx)(eb,{strong:!0,style:{fontSize:"13px"},children:n("models.priceReload.pricingDataSource")}),(0,t.jsx)(ex.A,{color:"remote"===w.source?"blue":"orange",style:{marginLeft:"auto",fontWeight:600,textTransform:"uppercase",fontSize:"11px"},children:"remote"===w.source?n("models.priceReload.remote"):n("models.priceReload.local")})]}),(0,t.jsx)(I.A,{style:{margin:"6px 0"}}),(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsxs)(eb,{type:"secondary",style:{fontSize:"12px"},children:[n("models.priceReload.modelsLoaded"),":"]}),(0,t.jsx)(eb,{strong:!0,style:{fontSize:"12px"},children:w.model_count.toLocaleString()})]}),w.url&&(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:8},children:[(0,t.jsx)(eb,{type:"secondary",style:{fontSize:"12px",whiteSpace:"nowrap"},children:"remote"===w.source?n("models.priceReload.loadedFrom"):n("models.priceReload.attemptedUrl")}),(0,t.jsx)(T.A,{title:w.url,children:(0,t.jsx)(eb,{style:{fontSize:"11px",maxWidth:240,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block",color:"#1677ff",cursor:"default"},children:w.url})})]}),w.is_env_forced&&(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6,marginTop:2},children:[(0,t.jsx)(v.A,{style:{color:"#fa8c16",fontSize:12}}),(0,t.jsxs)(eb,{type:"secondary",style:{fontSize:"11px"},children:[n("models.priceReload.localModeForced")," ",(0,t.jsx)("code",{children:"LITELLM_LOCAL_MODEL_COST_MAP=True"})]})]}),w.fallback_reason&&(0,t.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:6,backgroundColor:"#fff7e6",border:"1px solid #ffd591",borderRadius:4,padding:"4px 8px",marginTop:2},children:[(0,t.jsx)(ey.A,{style:{color:"#fa8c16",fontSize:12,marginTop:2}}),(0,t.jsxs)(eb,{style:{fontSize:"11px",color:"#614700"},children:[n("models.priceReload.fellBackToLocal"),": ",w.fallback_reason]})]})]})}),A&&(0,t.jsx)(eh.A,{size:"small",style:{backgroundColor:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:8},children:(0,t.jsxs)(S.A,{direction:"vertical",size:"small",style:{width:"100%"},children:[A.scheduled?(0,t.jsx)("div",{children:(0,t.jsx)(ex.A,{color:"green",icon:(0,t.jsx)(eg.A,{}),children:n("models.priceReload.scheduledEvery").replace("{hours}",String(A.interval_hours))})}):(0,t.jsx)(eb,{type:"secondary",children:n("models.priceReload.noPeriodicReloadScheduled")}),(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsxs)(eb,{type:"secondary",style:{fontSize:"12px"},children:[n("models.priceReload.lastRun"),":"]}),(0,t.jsx)(eb,{style:{fontSize:"12px"},children:q(A.last_run)})]}),A.scheduled&&(0,t.jsxs)(t.Fragment,{children:[A.next_run&&(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsxs)(eb,{type:"secondary",style:{fontSize:"12px"},children:[n("models.priceReload.nextRun"),":"]}),(0,t.jsx)(eb,{style:{fontSize:"12px"},children:q(A.next_run)})]}),(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsxs)(eb,{type:"secondary",style:{fontSize:"12px"},children:[n("models.priceReload.status"),":"]}),(0,t.jsx)(ex.A,{color:A?.scheduled?A.last_run?"success":"processing":"default",children:A?.scheduled?A.last_run?n("models.priceReload.active"):n("models.priceReload.ready"):n("models.priceReload.notScheduled")})]})]})]})}),(0,t.jsxs)(Q.A,{title:n("models.priceReload.setPeriodicReload"),open:j,onOk:L,onCancel:()=>_(!1),confirmLoading:h,okText:n("models.priceReload.schedule"),cancelText:n("models.common.cancel"),okButtonProps:{style:{backgroundColor:"#6366f1",borderColor:"#6366f1",color:"white"}},children:[(0,t.jsx)("div",{style:{marginBottom:16},children:(0,t.jsxs)(eb,{children:[n("models.priceReload.setUpAutomaticReload"),":"]})}),(0,t.jsx)("div",{style:{marginBottom:16},children:(0,t.jsx)(en.A,{min:1,max:168,value:y,onChange:e=>b(e||6),addonAfter:n("models.priceReload.hours"),style:{width:"100%"}})}),(0,t.jsx)("div",{children:(0,t.jsx)(eb,{type:"secondary",children:n("models.priceReload.autoFetchDescription").replace("{hours}",String(y))})})]})]})},eA=()=>{let{t:e}=(0,c.o)(),{accessToken:l}=(0,i.A)(),{refetch:s}=(0,m.o)();return(0,t.jsx)(V.A,{children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)(ed.A,{children:e("models.priceReload.title")}),(0,t.jsx)(ei.A,{className:"text-tremor-content",children:e("models.priceReload.description")})]}),(0,t.jsx)(ev,{accessToken:l,onReloadSuccess:()=>{s()},buttonText:e("models.priceReload.reloadButton"),size:"middle",type:"primary",className:"w-full"})]})})};var eN=s(90314);let eC=async(e,l,s)=>{try{console.log("handling submit for formValues:",e);let l=e.model_mappings||[];if("model_mappings"in e&&delete e.model_mappings,e.model&&e.model.includes("all-wildcard")){let s=e.custom_llm_provider,t=(eN.JQ[s]??s.toLowerCase())+"/*";e.model_name=t,l.push({public_name:t,litellm_model:t}),e.model=t}let s=[];for(let t of l){let l={},a={},r=t.public_name;for(let[s,r]of(l.model=t.litellm_model,e.input_cost_per_token&&(e.input_cost_per_token=Number(e.input_cost_per_token)/1e6),e.output_cost_per_token&&(e.output_cost_per_token=Number(e.output_cost_per_token)/1e6),l.model=t.litellm_model,console.log("formValues add deployment:",e),Object.entries(e)))if(""!==r&&"custom_pricing"!==s&&"pricing_model"!==s&&"cache_control"!==s)if("model_name"==s)l.model=r;else if("custom_llm_provider"==s){console.log("custom_llm_provider:",r);let e=eN.JQ[r]??r.toLowerCase();l.custom_llm_provider=e,console.log("custom_llm_provider mappingResult:",e)}else if("model"==s)continue;else if("base_model"===s)a[s]=r;else if("team_id"===s)a.team_id=r;else if("model_access_group"===s)a.access_groups=r;else if("mode"==s)console.log("placing mode in modelInfo"),a.mode=r,delete l.mode;else if("custom_model_name"===s)l.model=r;else if("litellm_extra_params"==s){console.log("litellm_extra_params:",r);let e={};if(r&&void 0!=r){try{e=JSON.parse(r)}catch(e){throw W.Ay.fromBackend("Failed to parse Silinex Extra Params: "+e),Error("Failed to parse litellm_extra_params: "+e)}for(let[s,t]of Object.entries(e))l[s]=t}}else if("model_info_params"==s){console.log("model_info_params:",r);let e={};if(r&&void 0!=r){try{e=JSON.parse(r)}catch(e){throw W.Ay.fromBackend("Failed to parse Silinex Extra Params: "+e),Error("Failed to parse litellm_extra_params: "+e)}for(let[l,s]of Object.entries(e))a[l]=s}}else if("input_cost_per_token"===s||"output_cost_per_token"===s||"input_cost_per_second"===s){r&&(l[s]=Number(r));continue}else l[s]=r;s.push({litellmParamsObj:l,modelInfoObj:a,modelName:r})}return s}catch(e){W.Ay.fromBackend("Failed to create model: "+e)}},ek=async(e,l,s,t)=>{try{let r=await eC(e,l,s);if(!r||0===r.length)return;for(let e of r){let{litellmParamsObj:s,modelInfoObj:t,modelName:r}=e,o={model_name:r,litellm_params:s,model_info:t},i=await (0,a.modelCreateCall)(l,o);console.log(`response for model create call: ${i.data}`)}t&&t(),s.resetFields()}catch(e){W.Ay.fromBackend("Failed to add model: "+e)}};var ew=s(55726),eS=s(42837),eM=s(30489),eI=s(96961),eT=s(95517),eE=s(8179),eF=s(31556),eR=s(95171),eP=s(66793),ez=s(73648);let eL=(0,o.D)("providerFields"),eO=()=>(0,r.I)({queryKey:eL.list({}),queryFn:async()=>await (0,a.getProviderCreateMetadata)(),staleTime:864e5,gcTime:864e5});var eq=s(46732),eB=s(58337),eD=s(87027),eV=s(85265),e$=s(62823),eG=s(91808);let{Link:eH}=w.A,eU=e=>{let l="password"===e.field_type?"password":"select"===e.field_type?"select":"upload"===e.field_type?"upload":"textarea"===e.field_type?"textarea":"text";return{key:e.key,label:e.label,placeholder:e.placeholder??void 0,tooltip:e.tooltip??void 0,required:e.required??!1,type:l,options:e.options??void 0,defaultValue:e.default_value??void 0}},eJ={},eK=({selectedProvider:e,uploadProps:l})=>{let s=eN.bb[e],a=Y.A.useFormInstance(),{data:r,isLoading:o,error:i}=eO(),d=g.useMemo(()=>{if(!r)return null;let e={};return r.forEach(l=>{let s=l.provider_display_name,t=l.credential_fields.map(eU);e[s]=t,l.provider&&(e[l.provider]=t),l.litellm_provider&&(e[l.litellm_provider]=t)}),e},[r]);g.useEffect(()=>{d&&Object.assign(eJ,d)},[d]);let n=g.useMemo(()=>{let l=eJ[s]??eJ[e];if(l)return l;if(!r)return[];let t=r.find(l=>l.provider_display_name===s||l.provider===e||l.litellm_provider===e);if(!t)return[];let a=t.credential_fields.map(eU);return eJ[t.provider_display_name]=a,t.provider&&(eJ[t.provider]=a),t.litellm_provider&&(eJ[t.litellm_provider]=a),a},[s,e,r]),c={name:"file",accept:".json",beforeUpload:e=>{if("application/json"===e.type){let l=new FileReader;l.onload=e=>{if(e.target){let l=e.target.result;console.log(`Setting field value from JSON, length: ${l.length}`),a.setFieldsValue({vertex_credentials:l}),console.log("Form values after setting:",a.getFieldsValue())}},l.readAsText(e)}return!1},onChange(e){console.log("Upload onChange triggered in ProviderSpecificFields"),console.log("Current form values:",a.getFieldsValue()),"uploading"!==e.file.status&&console.log(e.file,e.fileList)}};return(0,t.jsxs)(t.Fragment,{children:[o&&0===n.length&&(0,t.jsx)(eD.A,{children:(0,t.jsx)(eV.A,{span:24,children:(0,t.jsx)(eB.E,{className:"mb-2",children:"Loading provider fields..."})})}),i&&0===n.length&&(0,t.jsx)(eD.A,{children:(0,t.jsx)(eV.A,{span:24,children:(0,t.jsx)(eB.E,{className:"mb-2 text-red-500",children:i instanceof Error?i.message:"Failed to load provider credential fields"})})}),n.map(e=>(0,t.jsxs)(g.Fragment,{children:[(0,t.jsx)(Y.A.Item,{label:e.label,name:e.key,rules:e.required?[{required:!0,message:"Required"}]:void 0,tooltip:e.tooltip,className:"vertex_credentials"===e.key?"mb-0":void 0,children:"select"===e.type?(0,t.jsx)(G.A,{placeholder:e.placeholder,defaultValue:e.defaultValue,children:e.options?.map(e=>(0,t.jsx)(G.A.Option,{value:e,children:e},e))}):"upload"===e.type?(0,t.jsx)(e$.A,{...c,onChange:s=>{l?.onChange&&l.onChange(s),setTimeout(()=>{let l=a.getFieldValue(e.key);console.log(`${e.key} value after upload:`,JSON.stringify(l))},500)},children:(0,t.jsx)($.Ay,{icon:(0,t.jsx)(eq.A,{}),children:"Click to Upload"})}):"textarea"===e.type?(0,t.jsx)(eG.A.TextArea,{placeholder:e.placeholder,defaultValue:e.defaultValue,rows:6,style:{fontFamily:"monospace",fontSize:"12px"}}):(0,t.jsx)(eB.k,{placeholder:e.placeholder,type:"password"===e.type?"password":"text",defaultValue:e.defaultValue})}),"vertex_credentials"===e.key&&(0,t.jsx)(eD.A,{children:(0,t.jsx)(eV.A,{children:(0,t.jsx)(eB.E,{className:"mb-3 mt-1",children:"Give a gcp service account(.json file)"})})}),"base_model"===e.key&&(0,t.jsxs)(eD.A,{children:[(0,t.jsx)(eV.A,{span:10}),(0,t.jsx)(eV.A,{span:10,children:(0,t.jsxs)(eB.E,{className:"mb-2",children:["The actual model your azure deployment uses. Used for accurate cost tracking. Select name from"," ",(0,t.jsx)(eH,{href:"https://github.com/BerriAI/litellm/blob/main/model_prices_and_context_window.json",target:"_blank",children:"here"})]})})]})]},e.key))]})},{Link:eW}=w.A,eX=({open:e,onCancel:l,onAddCredential:s,uploadProps:a})=>{let{t:r}=(0,c.o)(),[o]=Y.A.useForm(),[i,d]=(0,g.useState)(eN.bb.OpenAI);return(0,t.jsx)(Q.A,{title:r("models.credentials.addModalTitle"),open:e,onCancel:()=>{l(),o.resetFields()},footer:null,width:600,children:(0,t.jsxs)(Y.A,{form:o,onFinish:e=>{s(Object.entries(e).reduce((e,[l,s])=>(""!==s&&null!=s&&(e[l]=s),e),{})),o.resetFields()},layout:"vertical",children:[(0,t.jsx)(Y.A.Item,{label:r("models.credentials.credentialNameLabel"),name:"credential_name",rules:[{required:!0,message:r("models.credentials.credentialNameRequired")}],children:(0,t.jsx)(ez.k,{placeholder:r("models.credentials.credentialNamePlaceholder")})}),(0,t.jsx)(Y.A.Item,{rules:[{required:!0,message:"Required"}],label:r("models.credentials.providerLabel"),name:"custom_llm_provider",tooltip:r("models.credentials.providerTooltip"),children:(0,t.jsx)(G.A,{showSearch:!0,onChange:e=>{d(e),o.setFieldValue("custom_llm_provider",e)},children:Object.entries(eN.bb).map(([e,l])=>(0,t.jsx)(G.A.Option,{value:e,children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("img",{src:eN.rm[l],alt:`${e} logo`,className:"w-5 h-5",onError:e=>{let s=e.target,t=s.parentElement;if(t){let e=document.createElement("div");e.className="w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=l.charAt(0),t.replaceChild(e,s)}}}),(0,t.jsx)("span",{children:l})]})},e))})}),(0,t.jsx)(eK,{selectedProvider:i,uploadProps:a}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(T.A,{title:r("models.credentials.needHelp"),children:(0,t.jsx)(eW,{href:"https://github.com/BerriAI/litellm/issues",children:"Need Help?"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)($.Ay,{onClick:()=>{l(),o.resetFields()},style:{marginRight:10},children:r("models.credentials.cancel")}),(0,t.jsx)($.Ay,{htmlType:"submit",children:r("models.credentials.addCredential")})]})]})]})})},{Link:eY}=w.A;function eQ({open:e,onCancel:l,onUpdateCredential:s,uploadProps:a,existingCredential:r}){let[o]=Y.A.useForm(),[i,d]=(0,g.useState)(eN.bb.Anthropic);return(0,g.useEffect)(()=>{if(r){let e=Object.entries(r.credential_values||{}).reduce((e,[l,s])=>(e[l]=s??null,e),{});o.setFieldsValue({credential_name:r.credential_name,custom_llm_provider:r.credential_info.custom_llm_provider,...e}),d(r.credential_info.custom_llm_provider)}},[r]),(0,t.jsx)(Q.A,{title:"Edit Credential",open:e,onCancel:()=>{l(),o.resetFields()},footer:null,width:600,destroyOnHidden:!0,children:(0,t.jsxs)(Y.A,{form:o,onFinish:e=>{s(Object.entries(e).reduce((e,[l,s])=>(""!==s&&null!=s&&(e[l]=s),e),{})),o.resetFields()},layout:"vertical",children:[(0,t.jsx)(Y.A.Item,{label:"Credential Name:",name:"credential_name",rules:[{required:!0,message:"Credential name is required"}],initialValue:r?.credential_name,children:(0,t.jsx)(ez.k,{placeholder:"Enter a friendly name for these credentials",disabled:!!r?.credential_name})}),(0,t.jsx)(Y.A.Item,{rules:[{required:!0,message:"Required"}],label:"Provider:",name:"custom_llm_provider",tooltip:"Helper to auto-populate provider specific fields",children:(0,t.jsx)(G.A,{showSearch:!0,onChange:e=>{d(e),o.setFieldValue("custom_llm_provider",e)},children:Object.entries(eN.bb).map(([e,l])=>(0,t.jsx)(G.A.Option,{value:e,children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("img",{src:eN.rm[l],alt:`${e} logo`,className:"w-5 h-5",onError:e=>{let s=e.target,t=s.parentElement;if(t){let e=document.createElement("div");e.className="w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=l.charAt(0),t.replaceChild(e,s)}}}),(0,t.jsx)("span",{children:l})]})},e))})}),(0,t.jsx)(eK,{selectedProvider:i,uploadProps:a}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(T.A,{title:"Get help on our github",children:(0,t.jsx)(eY,{href:"https://github.com/BerriAI/litellm/issues",children:"Need Help?"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)($.Ay,{onClick:()=>{l(),o.resetFields()},style:{marginRight:10},children:"Cancel"}),(0,t.jsx)($.Ay,{htmlType:"submit",children:"Update Credential"})]})]})]})})}let eZ=({uploadProps:e})=>{let{t:l}=(0,c.o)(),{accessToken:s}=(0,i.A)(),{data:r,refetch:o}=n(),d=r?.credentials||[],[m,u]=(0,g.useState)(!1),[h,x]=(0,g.useState)(!1),[p,f]=(0,g.useState)(null),[j,_]=(0,g.useState)(null),[y,b]=(0,g.useState)(!1),[v,k]=(0,g.useState)(!1),[w]=Y.A.useForm(),S=["credential_name","custom_llm_provider"],M=async e=>{if(!s)return;let t=Object.entries(e).filter(([e])=>!S.includes(e)).reduce((e,[l,s])=>({...e,[l]:s}),{}),r={credential_name:e.credential_name,credential_values:t,credential_info:{custom_llm_provider:e.custom_llm_provider}};await (0,a.credentialUpdateCall)(s,e.credential_name,r),W.Ay.success(l("models.credentials.updated")),x(!1),await o()},I=async e=>{if(!s)return;let t=Object.entries(e).filter(([e])=>!S.includes(e)).reduce((e,[l,s])=>({...e,[l]:s}),{}),r={credential_name:e.credential_name,credential_values:t,credential_info:{custom_llm_provider:e.custom_llm_provider}};await (0,a.credentialCreateCall)(s,r),W.Ay.success(l("models.credentials.added")),u(!1),await o()},T=async()=>{if(s&&j){k(!0);try{await (0,a.credentialDeleteCall)(s,j.credential_name),W.Ay.success(l("models.credentials.deleted")),await o()}catch(e){W.Ay.error(l("models.credentials.deleteFailed"))}finally{_(null),b(!1),k(!1)}}};return(0,t.jsxs)("div",{className:"w-full mx-auto flex-auto overflow-y-auto p-2",children:[(0,t.jsx)(C.A,{onClick:()=>u(!0),children:l("models.credentials.addButton")}),(0,t.jsx)("div",{className:"flex justify-between items-center mt-4 mb-4",children:(0,t.jsx)(ei.A,{children:l("models.credentials.description")})}),(0,t.jsx)(eS.A,{children:(0,t.jsxs)(eM.A,{children:[(0,t.jsx)(eE.A,{children:(0,t.jsxs)(eR.A,{children:[(0,t.jsx)(eF.A,{children:l("models.credentials.credentialName")}),(0,t.jsx)(eF.A,{children:l("models.credentials.provider")}),(0,t.jsx)(eF.A,{children:l("models.credentials.actions")})]})}),(0,t.jsx)(eI.A,{children:d&&0!==d.length?d.map((e,l)=>{var s;let a,r;return(0,t.jsxs)(eR.A,{children:[(0,t.jsx)(eT.A,{children:e.credential_name}),(0,t.jsx)(eT.A,{children:(s=e.credential_info?.custom_llm_provider||"-",r=(a={openai:"blue",azure:"indigo",anthropic:"purple",default:"gray"})[s.toLowerCase()]||a.default,(0,t.jsx)(N.A,{color:r,size:"xs",children:s}))}),(0,t.jsxs)(eT.A,{children:[(0,t.jsx)(C.A,{icon:ew.A,variant:"light",size:"sm",onClick:()=>{f(e),x(!0)}}),(0,t.jsx)(C.A,{icon:A.A,variant:"light",size:"sm",onClick:()=>{_(e),b(!0)},className:"ml-2"})]})]},l)}):(0,t.jsx)(eR.A,{children:(0,t.jsx)(eT.A,{colSpan:4,className:"text-center py-4 text-gray-500",children:l("models.credentials.noCredentials")})})})]})}),m&&(0,t.jsx)(eX,{onAddCredential:I,open:m,onCancel:()=>u(!1),uploadProps:e}),h&&(0,t.jsx)(eQ,{open:h,existingCredential:p,onUpdateCredential:M,uploadProps:e,onCancel:()=>x(!1)}),(0,t.jsx)(eP.A,{isOpen:y,onCancel:()=>{_(null),b(!1)},onOk:T,title:l("models.credentials.deleteTitle"),message:l("models.credentials.deleteMessage"),resourceInformationTitle:l("models.credentials.deleteInfoTitle"),resourceInformation:[{label:l("models.credentials.credentialName"),value:j?.credential_name},{label:l("models.credentials.provider"),value:j?.credential_info?.custom_llm_provider||"-"}],confirmLoading:v,requiredConfirmation:j?.credential_name})]})};var e0=s(90550),e1=s(73317),e2=s(35625),e4=s(27309),e5=s(2212),e6=s(87927),e3=s(56680),e8=s(79363),e7=s(96130),e9=s(55895),le=s(26313),ll=s(39092),ls=s.n(ll),lt=s(34537);let{Text:la}=w.A,lr=({formValues:e,accessToken:l,testMode:s,modelName:r="this model",onClose:o,onTestComplete:i})=>{var d,n,c;let m,u,[h,x]=g.useState(null),[p,f]=g.useState(null),[j,_]=g.useState(null),[y,b]=g.useState(!0),[A,N]=g.useState(!1),[C,k]=g.useState(!1),w=async()=>{b(!0),k(!1),x(null),f(null),_(null),N(!1),await new Promise(e=>setTimeout(e,100));try{console.log("Testing connection with form values:",e);let s=await eC(e,l,null);if(!s){console.log("No result from prepareModelAddRequest"),x("Failed to prepare model data. Please check your form inputs."),N(!1),b(!1);return}console.log("Result from prepareModelAddRequest:",s);let{litellmParamsObj:t,modelInfoObj:r,modelName:o}=s[0],i=await (0,a.testConnectionRequest)(l,t,r,r?.mode);if("success"===i.status)W.Ay.success("Connection test successful!"),x(null),N(!0);else{let e=i.result?.error||i.message||"Unknown error";x(e),f(t),_(i.result?.raw_request_typed_dict),N(!1)}}catch(e){console.error("Test connection error:",e),x(e instanceof Error?e.message:String(e)),N(!1)}finally{b(!1),i&&i()}};g.useEffect(()=>{let e=setTimeout(()=>{w()},200);return()=>clearTimeout(e)},[]);let S=e=>e?e.split("stack trace:")[0].trim().replace(/^litellm\.(.*?)Error: /,""):"Unknown error",M="string"==typeof h?S(h):h?.message?S(h.message):"Unknown error",T=j?(d=j.raw_request_api_base,n=j.raw_request_body,c=j.raw_request_headers||{},m=JSON.stringify(n,null,2).split("\n").map(e=>`  ${e}`).join("\n"),u=Object.entries(c).map(([e,l])=>`-H '${e}: ${l}'`).join(" \\\n  "),`curl -X POST \\
  ${d} \\
  ${u?`${u} \\
  `:""}-H 'Content-Type: application/json' \\
  -d '{
${m}
  }'`):"";return(0,t.jsxs)("div",{style:{padding:"24px",borderRadius:"8px",backgroundColor:"#fff"},children:[y?(0,t.jsxs)("div",{style:{textAlign:"center",padding:"32px 20px"},className:"jsx-dc9a0e2d897fe63b",children:[(0,t.jsx)("div",{style:{marginBottom:"16px"},className:"jsx-dc9a0e2d897fe63b loading-spinner",children:(0,t.jsx)("div",{style:{border:"3px solid #f3f3f3",borderTop:"3px solid #1890ff",borderRadius:"50%",width:"30px",height:"30px",animation:"spin 1s linear infinite",margin:"0 auto"},className:"jsx-dc9a0e2d897fe63b"})}),(0,t.jsxs)(la,{style:{fontSize:"16px"},children:["Testing connection to ",r,"..."]}),(0,t.jsx)(ls(),{id:"dc9a0e2d897fe63b",children:"@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}"})]}):A?(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"32px 20px"},children:[(0,t.jsx)("div",{style:{color:"#52c41a",fontSize:"24px",display:"flex",alignItems:"center"},children:(0,t.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"check-circle",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,t.jsx)("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"})})}),(0,t.jsxs)(la,{type:"success",style:{fontSize:"18px",fontWeight:500,marginLeft:"10px"},children:["Connection to ",r," successful!"]})]}):(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"20px"},children:[(0,t.jsx)(ey.A,{style:{color:"#ff4d4f",fontSize:"24px",marginRight:"12px"}}),(0,t.jsxs)(la,{type:"danger",style:{fontSize:"18px",fontWeight:500},children:["Connection to ",r," failed"]})]}),(0,t.jsxs)("div",{style:{backgroundColor:"#fff2f0",border:"1px solid #ffccc7",borderRadius:"8px",padding:"16px",marginBottom:"20px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.03)"},children:[(0,t.jsxs)(la,{strong:!0,style:{display:"block",marginBottom:"8px"},children:["Error:"," "]}),(0,t.jsx)(la,{type:"danger",style:{fontSize:"14px",lineHeight:"1.5"},children:M}),h&&(0,t.jsx)("div",{style:{marginTop:"12px"},children:(0,t.jsx)($.Ay,{type:"link",onClick:()=>k(!C),style:{paddingLeft:0,height:"auto"},children:C?"Hide Details":"Show Details"})})]}),C&&(0,t.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,t.jsx)(la,{strong:!0,style:{display:"block",marginBottom:"8px",fontSize:"15px"},children:"Troubleshooting Details"}),(0,t.jsx)("pre",{style:{backgroundColor:"#f5f5f5",padding:"16px",borderRadius:"8px",fontSize:"13px",maxHeight:"200px",overflow:"auto",border:"1px solid #e8e8e8",lineHeight:"1.5"},children:"string"==typeof h?h:JSON.stringify(h,null,2)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(la,{strong:!0,style:{display:"block",marginBottom:"8px",fontSize:"15px"},children:"API Request"}),(0,t.jsx)("pre",{style:{backgroundColor:"#f5f5f5",padding:"16px",borderRadius:"8px",fontSize:"13px",maxHeight:"250px",overflow:"auto",border:"1px solid #e8e8e8",lineHeight:"1.5"},children:T||"No request data available"}),(0,t.jsx)($.Ay,{style:{marginTop:"8px"},icon:(0,t.jsx)(lt.A,{}),onClick:()=>{navigator.clipboard.writeText(T||""),W.Ay.success("Copied to clipboard")},children:"Copy to Clipboard"})]})]})}),(0,t.jsx)(I.A,{style:{margin:"24px 0 16px"}}),(0,t.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,t.jsx)($.Ay,{type:"link",href:"https://docs.litellm.ai/docs/providers",target:"_blank",icon:(0,t.jsx)(v.A,{}),children:"View Documentation"})})]})},lo=async(e,l,s,t)=>{try{let r;console.log("=== AUTO ROUTER SUBMIT HANDLER CALLED ==="),console.log("handling auto router submit for formValues:",e),console.log("Model type:",e.model_type),"complexity_router"===e.model_type?(console.log("Creating complexity router configuration"),r={model_name:e.auto_router_name,litellm_params:{model:"auto_router/complexity_router",complexity_router_config:e.complexity_router_config,complexity_router_default_model:e.auto_router_default_model},model_info:{}},console.log("Complexity router config:",e.complexity_router_config)):(console.log("Creating semantic router configuration"),r={model_name:e.auto_router_name,litellm_params:{model:`auto_router/${e.auto_router_name}`,auto_router_config:JSON.stringify(e.auto_router_config),auto_router_default_model:e.auto_router_default_model},model_info:{}},e.auto_router_embedding_model&&"custom"!==e.auto_router_embedding_model?r.litellm_params.auto_router_embedding_model=e.auto_router_embedding_model:e.custom_embedding_model&&(r.litellm_params.auto_router_embedding_model=e.custom_embedding_model),console.log("Semantic router config (stringified):",r.litellm_params.auto_router_config)),e.team_id&&(r.model_info.team_id=e.team_id),e.model_access_group&&e.model_access_group.length>0&&(r.model_info.access_groups=e.model_access_group),console.log("Auto router configuration to be created:",r),console.log("Calling modelCreateCall...");let o=await (0,a.modelCreateCall)(l,r);console.log("response for auto router create call:",o);let i="complexity_router"===e.model_type?"Complexity Router":"Semantic Router";W.Ay.success(`Successfully created ${i}: ${e.auto_router_name}`),s.resetFields(),t&&t()}catch(e){console.error("Failed to add auto router:",e),W.Ay.fromBackend("Failed to add auto router: "+e)}};var li=s(22603),ld=s(22864),ln=s(24611),lc=s(25339),lm=s(10639);let{Text:lu}=w.A,{TextArea:lh}=eG.A,lx=({modelInfo:e,value:l,onChange:s})=>{let{t:a}=(0,c.o)(),[r,o]=(0,g.useState)([]),[i,d]=(0,g.useState)(!1),[n,m]=(0,g.useState)([]);(0,g.useEffect)(()=>{let e=l?.routes;if(e){let l=[];o(s=>e.map((e,t)=>{let a=s[t],r=a?.id||e.id||`route-${t}-${Date.now()}`;return l.push(r),{id:r,model:e.name||e.model||"",utterances:e.utterances||[],description:e.description||"",score_threshold:e.score_threshold??.5}})),m(l)}else o([]),m([])},[l]);let u=(e,l,s)=>{let t=r.map(t=>t.id===e?{...t,[l]:s}:t);o(t),h(t)},h=e=>{let l={routes:e.map(e=>({name:e.model,utterances:e.utterances,description:e.description,score_threshold:e.score_threshold}))};s?.(l)},x=e.map(e=>({value:e.model_group,label:e.model_group}));return(0,t.jsxs)("div",{className:"w-full max-w-none",children:[(0,t.jsxs)(M.A,{justify:"space-between",align:"center",gap:"middle",style:{width:"100%",marginBottom:24},children:[(0,t.jsxs)(S.A,{align:"center",children:[(0,t.jsx)(w.A.Title,{level:4,style:{margin:0},children:a("models.addModel.routesConfiguration")}),(0,t.jsx)(T.A,{title:a("models.addModel.routesConfigurationTooltip"),children:(0,t.jsx)(v.A,{className:"text-gray-400"})})]}),(0,t.jsx)($.Ay,{type:"primary",icon:(0,t.jsx)(ld.A,{}),onClick:()=>{let e=`route-${Date.now()}`,l=[...r,{id:e,model:"",utterances:[],description:"",score_threshold:.5}];o(l),h(l),m(l=>[...l,e])},className:"bg-blue-600 hover:bg-blue-700",children:a("models.addModel.addRoute")})]}),0===r.length?(0,t.jsx)(eh.A,{children:(0,t.jsx)(lc.A,{description:a("models.addModel.noRoutesConfigured")})}):(0,t.jsx)(lm.A,{activeKey:n,onChange:e=>m(Array.isArray(e)?e:[e].filter(Boolean)),style:{width:"100%"},items:r.map((e,l)=>({key:e.id,label:(0,t.jsxs)(lu,{style:{fontSize:16},children:[a("models.addModel.route")," ",l+1,": ",e.model||a("models.addModel.unnamed")]}),extra:(0,t.jsx)($.Ay,{type:"text",danger:!0,size:"small",icon:(0,t.jsx)(ln.A,{}),onClick:l=>{var s;let t;l.stopPropagation(),s=e.id,o(t=r.filter(e=>e.id!==s)),h(t),m(e=>e.filter(e=>e!==s))}}),children:(0,t.jsxs)(eh.A,{children:[(0,t.jsxs)("div",{className:"mb-4 w-full",children:[(0,t.jsx)(lu,{className:"text-sm font-medium mb-2 block",children:a("models.addModel.model")}),(0,t.jsx)(G.A,{value:e.model,onChange:l=>u(e.id,"model",l),placeholder:a("models.addModel.selectModel"),showSearch:!0,style:{width:"100%"},options:x})]}),(0,t.jsxs)("div",{className:"mb-4 w-full",children:[(0,t.jsx)(lu,{className:"text-sm font-medium mb-2 block",children:a("models.addModel.description")}),(0,t.jsx)(lh,{value:e.description,onChange:l=>u(e.id,"description",l.target.value),placeholder:a("models.addModel.routeDescriptionPlaceholder"),rows:2,style:{width:"100%"}})]}),(0,t.jsxs)("div",{className:"mb-4 w-full",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(lu,{className:"text-sm font-medium",children:a("models.addModel.scoreThreshold")}),(0,t.jsx)(T.A,{title:a("models.addModel.scoreThresholdTooltip"),children:(0,t.jsx)(v.A,{className:"text-gray-400"})})]}),(0,t.jsx)(en.A,{value:e.score_threshold,onChange:l=>u(e.id,"score_threshold",l||0),min:0,max:1,step:.1,style:{width:"100%"},placeholder:"0.5"})]}),(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(lu,{className:"text-sm font-medium",children:a("models.addModel.exampleUtterances")}),(0,t.jsx)(T.A,{title:a("models.addModel.exampleUtterancesTooltip"),children:(0,t.jsx)(v.A,{className:"text-gray-400"})})]}),(0,t.jsx)(lu,{className:"text-xs text-gray-500 mb-2",children:a("models.addModel.exampleUtterancesHint")}),(0,t.jsx)(G.A,{mode:"tags",value:e.utterances,onChange:l=>u(e.id,"utterances",l),placeholder:a("models.addModel.exampleUtterancesPlaceholder"),style:{width:"100%"},tokenSeparators:["\n"],maxTagCount:"responsive",allowClear:!0})]})]},e.id)}))}),(0,t.jsx)(I.A,{}),(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4 w-full",children:[(0,t.jsx)(lu,{className:"text-lg font-semibold",children:a("models.addModel.jsonPreview")}),(0,t.jsx)($.Ay,{type:"link",onClick:()=>d(!i),className:"text-blue-600 p-0",children:i?a("models.addModel.hide"):a("models.addModel.show")})]}),i&&(0,t.jsx)(eh.A,{className:"bg-gray-50 w-full",children:(0,t.jsx)("pre",{className:"text-sm overflow-auto max-h-64 w-full",children:JSON.stringify({routes:r.map(e=>({name:e.model,utterances:e.utterances,description:e.description,score_threshold:e.score_threshold}))},null,2)})})]})},{Text:lp}=w.A,lg=({modelInfo:e,value:l,onChange:s})=>{let{t:a}=(0,c.o)(),r={SIMPLE:{label:a("models.addModel.simple"),description:a("models.addModel.tierDescriptionSimple"),examples:a("models.addModel.tierExamplesSimple")},MEDIUM:{label:a("models.addModel.medium"),description:a("models.addModel.tierDescriptionMedium"),examples:a("models.addModel.tierExamplesMedium")},COMPLEX:{label:a("models.addModel.complex"),description:a("models.addModel.tierDescriptionComplex"),examples:a("models.addModel.tierExamplesComplex")},REASONING:{label:a("models.addModel.reasoning"),description:a("models.addModel.tierDescriptionReasoning"),examples:a("models.addModel.tierExamplesReasoning")}},o=e.map(e=>({value:e.model_group,label:e.model_group}));return(0,t.jsxs)("div",{className:"w-full max-w-none",children:[(0,t.jsxs)(S.A,{align:"center",style:{marginBottom:16},children:[(0,t.jsx)(w.A.Title,{level:4,style:{margin:0},children:a("models.addModel.complexityTierConfiguration")}),(0,t.jsx)(T.A,{title:a("models.addModel.complexityTierConfigurationTooltip"),children:(0,t.jsx)(v.A,{className:"text-gray-400"})})]}),(0,t.jsx)(lp,{type:"secondary",style:{display:"block",marginBottom:24},children:a("models.addModel.complexityRouterLongDescription")}),(0,t.jsx)(eh.A,{children:Object.keys(r).map((e,i)=>{let d=r[e];return(0,t.jsxs)("div",{children:[i>0&&(0,t.jsx)(I.A,{style:{margin:"16px 0"}}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsxs)(lp,{strong:!0,style:{fontSize:16},children:[d.label," ",a("models.addModel.tier")]}),(0,t.jsx)(T.A,{title:d.description,children:(0,t.jsx)(v.A,{className:"text-gray-400"})})]}),(0,t.jsxs)(lp,{type:"secondary",style:{display:"block",marginBottom:8,fontSize:12},children:[a("models.addModel.examplesPrefix")," ",d.examples]}),(0,t.jsx)(G.A,{value:l[e],onChange:t=>{s({...l,[e]:t})},placeholder:a("models.addModel.selectModelForTierQueries").replace("{tier}",d.label.toLowerCase()),showSearch:!0,style:{width:"100%"},options:o})]})]},e)})}),(0,t.jsx)(I.A,{}),(0,t.jsxs)(eh.A,{className:"bg-gray-50",children:[(0,t.jsx)(lp,{strong:!0,style:{display:"block",marginBottom:8},children:a("models.addModel.howClassificationWorks")}),(0,t.jsx)(lp,{type:"secondary",style:{fontSize:13},children:a("models.addModel.classificationDimensionsDescription")}),(0,t.jsxs)("ul",{style:{marginTop:8,marginBottom:0,paddingLeft:20,fontSize:13,color:"rgba(0, 0, 0, 0.45)"},children:[(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"SIMPLE"}),": Score < 0.15"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"MEDIUM"}),": Score 0.15 - 0.35"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"COMPLEX"}),": Score 0.35 - 0.60"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"REASONING"}),": Score > 0.60 (or 2+ reasoning markers)"]})]})]})]})};var lf=s(58873),lj=s(6542);let{Title:l_,Link:ly}=w.A,lb=({form:e,handleOk:l,accessToken:s,userRole:r})=>{let{t:o}=(0,c.o)(),[i,d]=(0,g.useState)(!1),[n,m]=(0,g.useState)(!1),[u,h]=(0,g.useState)(""),[x,p]=(0,g.useState)([]),[f,j]=(0,g.useState)([]),[_,y]=(0,g.useState)(!1),[b,v]=(0,g.useState)(!1),[A,N]=(0,g.useState)("complexity"),[C,k]=(0,g.useState)(null),[M,I]=(0,g.useState)({SIMPLE:"",MEDIUM:"",COMPLEX:"",REASONING:""});(0,g.useEffect)(()=>{(async()=>{p((await (0,a.modelAvailableCall)(s,"","",!1,null,!0,!0)).data.map(e=>e.id))})()},[s]),(0,g.useEffect)(()=>{(async()=>{try{let e=await (0,li.Q)(s);console.log("Fetched models for auto router:",e),j(e)}catch(e){console.error("Error fetching model info for auto router:",e)}})()},[s]);let E=e0.CX.includes(r),F=async()=>{m(!0),h(`test-${Date.now()}`),d(!0)},R=()=>{console.log("Auto router submit triggered!"),console.log("Router type:",A);let t=e.getFieldsValue();if(console.log("Form values:",t),!t.auto_router_name)return void W.Ay.fromBackend(o("models.addModel.autoRouterNameRequired"));if("complexity"===A){if(0===Object.values(M).filter(Boolean).length)return void W.Ay.fromBackend(o("models.addModel.selectAtLeastOneComplexityTierModel"));let a=M.MEDIUM||M.SIMPLE||M.COMPLEX||M.REASONING;e.setFieldsValue({custom_llm_provider:"auto_router",model:t.auto_router_name,api_key:"not_required_for_auto_router",auto_router_default_model:a}),e.validateFields(["auto_router_name"]).then(r=>{console.log("Complexity router validation passed");let o={...r,auto_router_name:t.auto_router_name,auto_router_default_model:a,model_type:"complexity_router",complexity_router_config:{tiers:M},model_access_group:t.model_access_group};console.log("Final submit values:",o),lo(o,s,e,l)}).catch(e=>{console.error("Validation failed:",e),W.Ay.fromBackend(o("models.addModel.fillAllRequiredFields"))})}else{if(!t.auto_router_default_model)return void W.Ay.fromBackend(o("models.addModel.defaultModelRequired"));if(e.setFieldsValue({custom_llm_provider:"auto_router",model:t.auto_router_name,api_key:"not_required_for_auto_router"}),!C||!C.routes||0===C.routes.length)return void W.Ay.fromBackend(o("models.addModel.configureAtLeastOneRoute"));if(C.routes.filter(e=>!e.name||!e.description||0===e.utterances.length).length>0)return void W.Ay.fromBackend(o("models.addModel.routesMustHaveModelDescriptionUtterance"));e.validateFields().then(t=>{console.log("Form validation passed, submitting with values:",t);let a={...t,auto_router_config:C,model_type:"semantic_router"};console.log("Final submit values:",a),lo(a,s,e,l)}).catch(e=>{console.error("Validation failed:",e);let l=e.errorFields||[];if(l.length>0){let e=l.map(e=>{let l=e.name[0];return({auto_router_name:o("models.addModel.autoRouterName"),auto_router_default_model:o("models.addModel.defaultModel"),auto_router_embedding_model:o("models.addModel.embeddingModel")})[l]||l});W.Ay.fromBackend(`${o("models.addModel.fillFollowingRequiredFields")} ${e.join(", ")}`)}else W.Ay.fromBackend(o("models.addModel.fillAllRequiredFields"))})}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l_,{level:2,children:o("models.addModel.addAutoRouterTitle")}),(0,t.jsx)(eB.E,{className:"text-gray-600 mb-6",children:o("models.addModel.addAutoRouterDescription")}),(0,t.jsx)(eh.A,{className:"mb-4",children:(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)(eB.E,{className:"text-sm font-medium mb-2 block",children:o("models.addModel.routerType")}),(0,t.jsx)(e9.Ay.Group,{value:A,onChange:e=>N(e.target.value),className:"w-full",children:(0,t.jsxs)(S.A,{direction:"vertical",className:"w-full",children:[(0,t.jsxs)(e9.Ay,{value:"complexity",className:"w-full",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(lf.A,{className:"text-yellow-500"}),(0,t.jsx)("span",{className:"font-medium",children:o("models.addModel.complexityRouter")}),(0,t.jsx)(le.A,{count:o("models.addModel.recommended"),style:{backgroundColor:"#52c41a",fontSize:"10px",padding:"0 6px"}})]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 ml-6 mt-1",children:[o("models.addModel.complexityRouterDescription"),(0,t.jsx)("br",{}),(0,t.jsx)("span",{className:"text-green-600",children:o("models.addModel.zeroApiCalls")})," \xb7"," ",(0,t.jsx)("span",{className:"text-green-600",children:o("models.addModel.lowLatency")})," \xb7"," ",(0,t.jsx)("span",{className:"text-green-600",children:o("models.addModel.noCost")})]})]}),(0,t.jsxs)(e9.Ay,{value:"semantic",className:"w-full mt-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(lj.A,{className:"text-blue-500"}),(0,t.jsx)("span",{className:"font-medium",children:o("models.addModel.semanticRouter")})]}),(0,t.jsx)("div",{className:"text-xs text-gray-500 ml-6 mt-1",children:o("models.addModel.semanticRouterDescription")})]})]})})]})}),(0,t.jsx)(eh.A,{children:(0,t.jsxs)(Y.A,{form:e,onFinish:R,labelCol:{span:10},wrapperCol:{span:16},labelAlign:"left",children:[(0,t.jsx)(Y.A.Item,{rules:[{required:!0,message:o("models.addModel.autoRouterNameRequired")}],label:o("models.addModel.autoRouterName"),name:"auto_router_name",tooltip:o("models.addModel.autoRouterNameTooltip"),labelCol:{span:10},labelAlign:"left",children:(0,t.jsx)(eB.k,{placeholder:o("models.addModel.autoRouterNamePlaceholder")})}),"complexity"===A?(0,t.jsx)("div",{className:"w-full mb-4",children:(0,t.jsx)(lg,{modelInfo:f,value:M,onChange:e=>{I(e)}})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-full mb-4",children:(0,t.jsx)(lx,{modelInfo:f,value:C,onChange:l=>{k(l),e.setFieldValue("auto_router_config",l)}})}),(0,t.jsx)(Y.A.Item,{rules:[{required:"semantic"===A,message:o("models.addModel.defaultModelRequired")}],label:o("models.addModel.defaultModel"),name:"auto_router_default_model",tooltip:o("models.addModel.defaultModelTooltip"),labelCol:{span:10},labelAlign:"left",children:(0,t.jsx)(G.A,{placeholder:o("models.addModel.selectDefaultModel"),onChange:e=>{y("custom"===e)},options:[...Array.from(new Set(f.map(e=>e.model_group))).map(e=>({value:e,label:e})),{value:"custom",label:o("models.addModel.enterCustomModelName")}],style:{width:"100%"},showSearch:!0})}),(0,t.jsx)(Y.A.Item,{label:o("models.addModel.embeddingModel"),name:"auto_router_embedding_model",tooltip:o("models.addModel.embeddingModelTooltip"),labelCol:{span:10},labelAlign:"left",children:(0,t.jsx)(G.A,{value:e.getFieldValue("auto_router_embedding_model"),placeholder:o("models.addModel.selectEmbeddingModelOptional"),onChange:l=>{v("custom"===l),e.setFieldValue("auto_router_embedding_model",l)},options:[...Array.from(new Set(f.map(e=>e.model_group))).map(e=>({value:e,label:e})),{value:"custom",label:o("models.addModel.enterCustomModelName")}],style:{width:"100%"},showSearch:!0,allowClear:!0})})]}),(0,t.jsxs)("div",{className:"flex items-center my-4",children:[(0,t.jsx)("div",{className:"flex-grow border-t border-gray-200"}),(0,t.jsx)("span",{className:"px-4 text-gray-500 text-sm",children:o("models.addModel.additionalSettings")}),(0,t.jsx)("div",{className:"flex-grow border-t border-gray-200"})]}),E&&(0,t.jsx)(Y.A.Item,{label:o("models.addModel.modelAccessGroup"),name:"model_access_group",className:"mb-4",tooltip:o("models.addModel.autoRouterModelAccessGroupTooltip"),children:(0,t.jsx)(G.A,{mode:"tags",showSearch:!0,placeholder:o("models.addModel.modelAccessGroupPlaceholder"),optionFilterProp:"children",tokenSeparators:[","],options:x.map(e=>({value:e,label:e})),maxTagCount:"responsive",allowClear:!0})}),(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)(T.A,{title:o("models.addModel.helpTooltip"),children:(0,t.jsx)(w.A.Link,{href:"https://github.com/BerriAI/litellm/issues",children:o("models.addModel.needHelp")})}),(0,t.jsxs)("div",{className:"space-x-2",children:[(0,t.jsx)($.Ay,{onClick:F,loading:n,children:o("models.addModel.testConnection")}),(0,t.jsx)($.Ay,{type:"primary",onClick:()=>{console.log("Add Auto Router button clicked!"),R()},children:o("models.addModel.addAutoRouterButton")})]})]})]})}),(0,t.jsx)(Q.A,{title:o("models.addModel.connectionTestResults"),open:i,onCancel:()=>{d(!1),m(!1)},footer:[(0,t.jsx)($.Ay,{onClick:()=>{d(!1),m(!1)},children:o("models.addModel.close")},"close")],width:700,children:i&&(0,t.jsx)(lr,{formValues:e.getFieldsValue(),accessToken:s,testMode:"chat",modelName:e.getFieldValue("auto_router_name"),onClose:()=>{d(!1),m(!1)},onTestComplete:()=>m(!1)},u)})]})},lv=(0,o.D)("guardrails"),lA=(0,o.D)("tags");var lN=s(88636),lC=s(99876),lk=s(27707),lw=s(35464),lS=s(56649),lM=s(73896),lI=s(66904);let{Text:lT}=w.A,lE=({form:e,showCacheControl:l,onCacheControlChange:s})=>{let{t:a}=(0,c.o)(),r=l=>{let s=e.getFieldValue("litellm_extra_params");try{let t=s?JSON.parse(s):{};l.length>0?t.cache_control_injection_points=l:delete t.cache_control_injection_points,Object.keys(t).length>0?e.setFieldValue("litellm_extra_params",JSON.stringify(t,null,2)):e.setFieldValue("litellm_extra_params","")}catch(e){console.error("Error updating cache control points:",e)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Y.A.Item,{label:a("models.addModel.cacheControlInjectionPoints"),name:"cache_control",valuePropName:"checked",className:"mb-4",tooltip:a("models.addModel.cacheControlInjectionPointsTooltip"),children:(0,t.jsx)(Z.A,{onChange:s,className:"bg-gray-600"})}),l&&(0,t.jsxs)("div",{className:"ml-6 pl-4 border-l-2 border-gray-200",children:[(0,t.jsx)(lT,{className:"text-sm text-gray-500 block mb-4",children:a("models.addModel.cacheControlDescription")}),(0,t.jsx)(Y.A.List,{name:"cache_control_injection_points",initialValue:[{location:"message"}],children:(l,{add:s,remove:o})=>(0,t.jsxs)(t.Fragment,{children:[l.map((s,i)=>(0,t.jsxs)("div",{className:"flex items-center mb-4 gap-4",children:[(0,t.jsx)(Y.A.Item,{...s,label:a("models.addModel.typeLabel"),name:[s.name,"location"],initialValue:"message",className:"mb-0",style:{width:"180px"},children:(0,t.jsx)(G.A,{disabled:!0,options:[{value:"message",label:a("models.addModel.messageType")}]})}),(0,t.jsx)(Y.A.Item,{...s,label:a("models.addModel.roleLabel"),name:[s.name,"role"],className:"mb-0",style:{width:"180px"},tooltip:a("models.addModel.cacheControlRoleTooltip"),children:(0,t.jsx)(G.A,{placeholder:a("models.addModel.selectRolePlaceholder"),allowClear:!0,options:[{value:"user",label:a("models.addModel.roleUser")},{value:"system",label:a("models.addModel.roleSystem")},{value:"assistant",label:a("models.addModel.roleAssistant")}],onChange:()=>{r(e.getFieldValue("cache_control_points"))}})}),(0,t.jsx)(Y.A.Item,{...s,label:a("models.addModel.indexLabel"),name:[s.name,"index"],className:"mb-0",style:{width:"180px"},tooltip:a("models.addModel.cacheControlIndexTooltip"),children:(0,t.jsx)(lI.A,{type:"number",placeholder:a("models.addModel.optional"),step:1,onChange:()=>{r(e.getFieldValue("cache_control_points"))}})}),l.length>1&&(0,t.jsx)(lM.A,{className:"text-red-500 cursor-pointer text-lg ml-12",onClick:()=>{o(s.name),setTimeout(()=>{r(e.getFieldValue("cache_control_points"))},0)}})]},s.key)),(0,t.jsx)(Y.A.Item,{children:(0,t.jsxs)("button",{type:"button",className:"flex items-center justify-center w-full border border-dashed border-gray-300 py-2 px-4 text-gray-600 hover:text-blue-600 hover:border-blue-300 transition-all rounded",onClick:()=>s(),children:[(0,t.jsx)(ld.A,{className:"mr-2"}),a("models.addModel.addInjectionPoint")]})})]})})]})]})};var lF=s(18283);let{Link:lR}=w.A,lP=({showAdvancedSettings:e,setShowAdvancedSettings:l,teams:s,guardrailsList:a,tagsList:r})=>{let{t:o}=(0,c.o)(),[i]=Y.A.useForm(),[d,n]=g.useState(!1),[m,u]=g.useState("per_token"),[h,x]=g.useState(!1),p=(e,l)=>l&&(isNaN(Number(l))||0>Number(l))?Promise.reject(o("models.addModel.positiveNumberValidationError")):Promise.resolve();return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(lw.nD,{className:"mt-2 mb-4",children:[(0,t.jsx)(lw.u,{children:(0,t.jsx)("b",{children:o("models.addModel.advancedSettingsTitle")})}),(0,t.jsx)(lw.jR,{children:(0,t.jsxs)("div",{className:"bg-white rounded-lg",children:[(0,t.jsx)(Y.A.Item,{label:o("models.addModel.customPricing"),name:"custom_pricing",valuePropName:"checked",className:"mb-4",children:(0,t.jsx)(Z.A,{onChange:e=>{n(e),e||i.setFieldsValue({input_cost_per_token:void 0,output_cost_per_token:void 0,input_cost_per_second:void 0})},className:"bg-gray-600"})}),(0,t.jsx)(Y.A.Item,{label:(0,t.jsxs)("span",{children:[o("models.addModel.guardrailsLabel")," ",(0,t.jsx)(T.A,{title:o("models.addModel.guardrailsTooltip"),children:(0,t.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/guardrails/quick_start",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(v.A,{style:{marginLeft:"4px"}})})})]}),name:"guardrails",className:"mt-4",help:o("models.addModel.guardrailsHelp"),children:(0,t.jsx)(G.A,{mode:"tags",style:{width:"100%"},placeholder:o("models.addModel.guardrailsPlaceholder"),options:a.map(e=>({value:e,label:e}))})}),(0,t.jsx)(Y.A.Item,{label:o("models.addModel.tagsLabel"),name:"tags",className:"mb-4",children:(0,t.jsx)(G.A,{mode:"tags",style:{width:"100%"},placeholder:o("models.addModel.tagsPlaceholder"),options:Object.values(r).map(e=>({value:e.name,label:e.name,title:e.description||e.name}))})}),d&&(0,t.jsxs)("div",{className:"ml-6 pl-4 border-l-2 border-gray-200",children:[(0,t.jsx)(Y.A.Item,{label:o("models.addModel.pricingModel"),name:"pricing_model",className:"mb-4",children:(0,t.jsx)(G.A,{defaultValue:"per_token",onChange:e=>u(e),options:[{value:"per_token",label:o("models.addModel.pricingPerMillionTokens")},{value:"per_second",label:o("models.addModel.pricingPerSecond")}]})}),"per_token"===m?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Y.A.Item,{label:o("models.addModel.inputCostPer1M"),name:"input_cost_per_token",rules:[{validator:p}],className:"mb-4",children:(0,t.jsx)(lw.ks,{})}),(0,t.jsx)(Y.A.Item,{label:o("models.addModel.outputCostPer1M"),name:"output_cost_per_token",rules:[{validator:p}],className:"mb-4",children:(0,t.jsx)(lw.ks,{})})]}):(0,t.jsx)(Y.A.Item,{label:o("models.addModel.costPerSecond"),name:"input_cost_per_second",rules:[{validator:p}],className:"mb-4",children:(0,t.jsx)(lw.ks,{})})]}),(0,t.jsx)(Y.A.Item,{label:o("models.addModel.useInPassThroughRoutes"),name:"use_in_pass_through",valuePropName:"checked",className:"mb-4 mt-4",tooltip:(0,t.jsxs)("span",{children:[o("models.addModel.useInPassThroughRoutesTooltip")," ",(0,t.jsx)(lR,{href:"https://docs.litellm.ai/docs/pass_through/vertex_ai",target:"_blank",children:o("models.addModel.learnMore")})]}),children:(0,t.jsx)(Z.A,{onChange:e=>{let l=i.getFieldValue("litellm_extra_params");try{let s=l?JSON.parse(l):{};e?s.use_in_pass_through=!0:delete s.use_in_pass_through,Object.keys(s).length>0?i.setFieldValue("litellm_extra_params",JSON.stringify(s,null,2)):i.setFieldValue("litellm_extra_params","")}catch(l){e?i.setFieldValue("litellm_extra_params",JSON.stringify({use_in_pass_through:!0},null,2)):i.setFieldValue("litellm_extra_params","")}},className:"bg-gray-600"})}),(0,t.jsx)(lE,{form:i,showCacheControl:h,onCacheControlChange:e=>{if(x(e),!e){let e=i.getFieldValue("litellm_extra_params");try{let l=e?JSON.parse(e):{};delete l.cache_control_injection_points,Object.keys(l).length>0?i.setFieldValue("litellm_extra_params",JSON.stringify(l,null,2)):i.setFieldValue("litellm_extra_params","")}catch(e){i.setFieldValue("litellm_extra_params","")}}}}),(0,t.jsx)(Y.A.Item,{label:o("models.addModel.litellmParams"),name:"litellm_extra_params",tooltip:o("models.addModel.litellmParamsTooltip"),className:"mb-4 mt-4",rules:[{validator:lF.iu}],children:(0,t.jsx)(lS.A,{rows:4,placeholder:'{ "rpm": 100, "timeout": 0, "stream_timeout": 0 }'})}),(0,t.jsxs)(eD.A,{className:"mb-4",children:[(0,t.jsx)(eV.A,{span:10}),(0,t.jsx)(eV.A,{span:10,children:(0,t.jsxs)(lw.EY,{className:"text-gray-600 text-sm",children:[o("models.addModel.litellmParamsHelp")," ",(0,t.jsx)(lR,{href:"https://docs.litellm.ai/docs/completion/input",target:"_blank",children:"litellm.completion() call"})]})})]}),(0,t.jsx)(Y.A.Item,{label:o("models.addModel.modelInfo"),name:"model_info_params",tooltip:o("models.addModel.modelInfoTooltip"),className:"mb-0",rules:[{validator:lF.iu}],children:(0,t.jsx)(lS.A,{rows:4,placeholder:'{ "mode": "chat" }'})})]})})]})})};var lz=s(50139),lL=s(77814);let lO=({content:e,children:l,width:s="auto",className:a=""})=>{let[r,o]=(0,g.useState)(!1),[i,d]=(0,g.useState)("top"),n=(0,g.useRef)(null);return(0,t.jsxs)("div",{className:"relative inline-block",ref:n,children:[l||(0,t.jsx)(lL.A,{className:"ml-1 text-gray-500 cursor-help",onMouseEnter:()=>{if(n.current){let e=n.current.getBoundingClientRect(),l=e.top,s=window.innerHeight-e.bottom;l<300&&s>300?d("bottom"):d("top")}o(!0)},onMouseLeave:()=>o(!1)}),r&&(0,t.jsxs)("div",{className:`absolute left-1/2 -translate-x-1/2 z-50 bg-black/90 text-white p-2 rounded-md text-sm font-normal shadow-lg ${a}`,style:{["top"===i?"bottom":"top"]:"100%",width:s,marginBottom:"top"===i?"8px":"0",marginTop:"bottom"===i?"8px":"0"},children:[e,(0,t.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 w-0 h-0",style:{top:"top"===i?"100%":"auto",bottom:"bottom"===i?"100%":"auto",borderTop:"top"===i?"6px solid rgba(0, 0, 0, 0.9)":"6px solid transparent",borderBottom:"bottom"===i?"6px solid rgba(0, 0, 0, 0.9)":"6px solid transparent",borderLeft:"6px solid transparent",borderRight:"6px solid transparent"}})]})]})},lq=()=>{let{t:e}=(0,c.o)(),l=Y.A.useFormInstance(),[s,a]=(0,g.useState)(0),r=Y.A.useWatch("model",l)||[],o=Array.isArray(r)?r:[r],i=Y.A.useWatch("custom_model_name",l),d=!o.includes("all-wildcard"),n=Y.A.useWatch("custom_llm_provider",l);if((0,g.useEffect)(()=>{if(i&&o.includes("custom")){let e=(l.getFieldValue("model_mappings")||[]).map(e=>"custom"===e.public_name||"custom"===e.litellm_model?n===eN.bb.Azure?{public_name:i,litellm_model:`azure/${i}`}:{public_name:i,litellm_model:i}:e);l.setFieldValue("model_mappings",e),a(e=>e+1)}},[i,o,n,l]),(0,g.useEffect)(()=>{if(o.length>0&&!o.includes("all-wildcard")){let e=l.getFieldValue("model_mappings")||[];if(e.length!==o.length||!o.every(l=>e.some(e=>"custom"===l?"custom"===e.litellm_model||e.litellm_model===i:n===eN.bb.Azure?e.litellm_model===`azure/${l}`:e.litellm_model===l))){let e=o.map(e=>"custom"===e&&i?n===eN.bb.Azure?{public_name:i,litellm_model:`azure/${i}`}:{public_name:i,litellm_model:i}:n===eN.bb.Azure?{public_name:e,litellm_model:`azure/${e}`}:{public_name:e,litellm_model:e});l.setFieldValue("model_mappings",e),a(e=>e+1)}}},[o,i,n,l]),!d)return null;let m=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"mb-2 font-normal",children:"你在调用网关 API 时使用的模型名称。"}),(0,t.jsxs)("div",{className:"mb-2 font-normal",children:[(0,t.jsx)("strong",{children:"示例："}),"如果你将公开模型命名为"," ",(0,t.jsx)("code",{className:"bg-gray-700 px-1 py-0.5 rounded text-xs",children:"example-name"}),"，并选择"," ",(0,t.jsx)("code",{className:"bg-gray-700 px-1 py-0.5 rounded text-xs",children:"openai/qwen-plus-latest"})," 作为上游模型"]}),(0,t.jsxs)("div",{className:"mb-2 font-normal",children:[(0,t.jsx)("strong",{children:"调用方式："}),"你向网关发起请求时使用"," ",(0,t.jsx)("code",{className:"bg-gray-700 px-1 py-0.5 rounded text-xs",children:'model = "example-name"'})]}),(0,t.jsxs)("div",{className:"font-normal",children:[(0,t.jsx)("strong",{children:"结果："}),"网关会向上游提供商发送"," ",(0,t.jsx)("code",{className:"bg-gray-700 px-1 py-0.5 rounded text-xs",children:"qwen-plus-latest"})]})]}),u=(0,t.jsx)("div",{children:"网关实际发送给上游 LLM API 的模型名称。"}),h=[{title:(0,t.jsxs)("span",{className:"flex items-center",children:[e("models.addModel.publicModelName"),(0,t.jsx)(lO,{content:m,width:"500px"})]}),dataIndex:"public_name",key:"public_name",render:(e,s,a)=>(0,t.jsx)(ez.k,{value:e,onChange:e=>{let s=e.target.value,t=[...l.getFieldValue("model_mappings")],r=n===eN.bb.Anthropic,o=s.endsWith("-1m"),i=l.getFieldValue("litellm_extra_params"),d=!i||""===i.trim(),c=s;if(r&&o&&d){let e=JSON.stringify({extra_headers:{"anthropic-beta":"context-1m-2025-08-07"}},null,2);l.setFieldValue("litellm_extra_params",e),c=s.slice(0,-3)}t[a].public_name=c,l.setFieldValue("model_mappings",t)}})},{title:(0,t.jsxs)("span",{className:"flex items-center",children:["模型名称",(0,t.jsx)(lO,{content:u,width:"360px"})]}),dataIndex:"litellm_model",key:"litellm_model"}];return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(Y.A.Item,{label:e("models.addModel.modelMappings"),name:"model_mappings",tooltip:e("models.addModel.modelMappingsTooltip"),labelCol:{span:10},wrapperCol:{span:16},labelAlign:"left",rules:[{required:!0,validator:async(l,s)=>{if(!s||0===s.length)throw Error(e("models.addModel.atLeastOneMappingRequired"));if(s.filter(e=>!e.public_name||""===e.public_name.trim()).length>0)throw Error(e("models.addModel.allMappingsNeedNames"))}}],children:(0,t.jsx)(lz.A,{dataSource:l.getFieldValue("model_mappings"),columns:h,pagination:!1,size:"small"},s)})})},lB=({selectedProvider:e,providerModels:l,getPlaceholder:s})=>{let{t:a}=(0,c.o)(),r=Y.A.useFormInstance(),o=l=>{let s=l.target.value,t=(r.getFieldValue("model_mappings")||[]).map(l=>"custom"===l.public_name||"custom"===l.litellm_model?e===eN.bb.Azure?{public_name:s,litellm_model:`azure/${s}`}:{public_name:s,litellm_model:s}:l);r.setFieldsValue({model_mappings:t})};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(Y.A.Item,{label:"模型名称",tooltip:"网关发送到上游 LLM API 的模型名称。",className:"mb-0",children:[(0,t.jsx)(Y.A.Item,{name:"model",rules:[{required:!0,message:e===eN.bb.Azure?"请输入部署名称。":"请至少选择一个模型。"}],noStyle:!0,children:e===eN.bb.Azure||e===eN.bb.OpenAI_Compatible||e===eN.bb.Ollama?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(eB.k,{placeholder:s(e),onChange:e===eN.bb.Azure?e=>{let l=e.target.value,s=l?[{public_name:l,litellm_model:`azure/${l}`}]:[];r.setFieldsValue({model:l,model_mappings:s})}:void 0})}):l.length>0?(0,t.jsx)(G.A,{mode:"multiple",allowClear:!0,showSearch:!0,placeholder:a("models.addModel.selectModels"),onChange:l=>{let s=Array.isArray(l)?l:[l];if(s.includes("all-wildcard"))r.setFieldsValue({model_name:void 0,model_mappings:[]});else if(JSON.stringify(r.getFieldValue("model"))!==JSON.stringify(s)){let l=s.map(l=>e===eN.bb.Azure?{public_name:l,litellm_model:`azure/${l}`}:{public_name:l,litellm_model:l});r.setFieldsValue({model:s,model_mappings:l})}},optionFilterProp:"children",filterOption:(e,l)=>(l?.label??"").toLowerCase().includes(e.toLowerCase()),options:[{label:a("models.addModel.customModelName"),value:"custom"},{label:a("models.addModel.allModelsWildcard").replace("{provider}",e),value:"all-wildcard"},...l.map(e=>({label:e,value:e}))],style:{width:"100%"}}):(0,t.jsx)(eB.k,{placeholder:s(e)})}),(0,t.jsx)(Y.A.Item,{noStyle:!0,shouldUpdate:(e,l)=>e.model!==l.model,children:({getFieldValue:l})=>{let s=l("model")||[];return(Array.isArray(s)?s:[s]).includes("custom")&&(0,t.jsx)(Y.A.Item,{name:"custom_model_name",rules:[{required:!0,message:a("models.addModel.customModelNameRequired")}],className:"mt-2",children:(0,t.jsx)(eB.k,{placeholder:e===eN.bb.Azure?a("models.addModel.enterAzureDeploymentName"):a("models.addModel.enterCustomModelName"),onChange:o})})}})]}),(0,t.jsxs)(eD.A,{children:[(0,t.jsx)(eV.A,{span:10}),(0,t.jsx)(eV.A,{span:14,children:(0,t.jsx)(eB.E,{className:"mb-3 mt-1",children:e===eN.bb.Azure?"部署名称将保存为公开模型名，网关内部会使用 `azure/部署名称`。":"这里填写的是网关发送给 LLM API 的模型名。"})})]})]})},lD=[{value:"chat",label:"Chat - /chat/completions"},{value:"completion",label:"Completion - /completions"},{value:"embedding",label:"Embedding - /embeddings"},{value:"audio_speech",label:"Audio Speech - /audio/speech"},{value:"audio_transcription",label:"Audio Transcription - /audio/transcriptions"},{value:"image_generation",label:"Image Generation - /images/generations"},{value:"video_generation",label:"Video Generation - /videos"},{value:"rerank",label:"Rerank - /rerank"},{value:"realtime",label:"Realtime - /realtime"},{value:"batch",label:"Batch - /batch"},{value:"ocr",label:"OCR - /ocr"}],{Title:lV,Link:l$}=w.A,lG=({form:e,handleOk:l,selectedProvider:s,setSelectedProvider:o,providerModels:d,setProviderModelsFn:n,getPlaceholder:m,uploadProps:u,showAdvancedSettings:h,setShowAdvancedSettings:x,teams:p,credentials:f})=>{let[j,_]=(0,g.useState)("chat"),[y,b]=(0,g.useState)(!1),[v,A]=(0,g.useState)(!1),[N,C]=(0,g.useState)(""),{accessToken:k,userRole:S,premiumUser:M,userId:I}=(0,i.A)(),{t:E}=(0,c.o)(),{data:R,isLoading:P,error:z}=eO(),{data:L,isLoading:O,error:q}=(()=>{let{accessToken:e,userId:l,userRole:s}=(0,i.A)();return(0,r.I)({queryKey:lv.list({}),queryFn:async()=>(await (0,a.getGuardrailsList)(e)).guardrails.map(e=>e.guardrail_name),enabled:!!(e&&l&&s)})})(),{data:B,isLoading:D,error:V}=(()=>{let{accessToken:e,userId:l,userRole:s}=(0,i.A)();return(0,r.I)({queryKey:lA.list({}),queryFn:async()=>await (0,a.tagListCall)(e),enabled:!!(e&&l&&s)})})(),H=async()=>{A(!0),C(`test-${Date.now()}`),b(!0)},[U,J]=(0,g.useState)(!1),[K,W]=(0,g.useState)([]),[X,Z]=(0,g.useState)(null);(0,g.useEffect)(()=>{(async()=>{W((await (0,a.modelAvailableCall)(k,"","",!1,null,!0,!0)).data.map(e=>e.id))})()},[k]);let ee=(0,g.useMemo)(()=>R?[...R].sort((e,l)=>e.provider_display_name.localeCompare(l.provider_display_name)):[],[R]),el=z?z instanceof Error?z.message:"Failed to load providers":null,es=e0.CX.includes(S),et=(0,e0.a8)(p,I);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(lV,{level:2,children:E("models.addModel.title")}),(0,t.jsx)(eh.A,{children:(0,t.jsx)(Y.A,{form:e,onFinish:async e=>{console.log("\uD83D\uDD25 Form onFinish triggered with values:",e),await l().then(()=>{Z(null)})},onFinishFailed:e=>{console.log("\uD83D\uDCA5 Form onFinishFailed triggered:",e)},labelCol:{span:10},wrapperCol:{span:16},labelAlign:"left",children:(0,t.jsxs)(t.Fragment,{children:[et&&!es&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Y.A.Item,{label:E("models.addModel.selectTeam"),name:"team_id",rules:[{required:!0,message:E("models.addModel.selectTeamRequired")}],tooltip:E("models.addModel.selectTeamTooltip"),children:(0,t.jsx)(lk.A,{teams:p,onChange:e=>{Z(e)}})}),!X&&(0,t.jsx)(lC.A,{message:E("models.addModel.teamSelectionRequired"),description:E("models.addModel.teamSelectionDescription"),type:"info",showIcon:!0,className:"mb-4"})]}),(es||et&&X)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Y.A.Item,{rules:[{required:!0,message:E("models.addModel.providerRequired")}],label:E("models.addModel.provider"),name:"custom_llm_provider",tooltip:E("models.addModel.providerTooltip"),labelCol:{span:10},labelAlign:"left",children:(0,t.jsxs)(G.A,{virtual:!1,showSearch:!0,loading:P,placeholder:P?E("models.addModel.loadingProviders"):E("models.addModel.providerPlaceholder"),optionFilterProp:"data-label",onChange:l=>{o(l),n(l),e.setFieldsValue({custom_llm_provider:l}),e.setFieldsValue({model:[],model_name:void 0})},children:[el&&0===ee.length&&(0,t.jsx)(G.A.Option,{value:"",children:el},"__error"),ee.map(e=>{let l=e.provider_display_name,s=e.provider;return eN.rm[l],(0,t.jsx)(G.A.Option,{value:s,"data-label":l,children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(F.v,{provider:s,className:"w-5 h-5"}),(0,t.jsx)("span",{children:l})]})},s)})]})}),(0,t.jsx)(lB,{selectedProvider:s,providerModels:d,getPlaceholder:m}),(0,t.jsx)(lq,{}),(0,t.jsx)(Y.A.Item,{label:E("models.addModel.mode"),name:"mode",className:"mb-1",children:(0,t.jsx)(G.A,{style:{width:"100%"},value:j,onChange:e=>_(e),options:lD})}),(0,t.jsxs)(eD.A,{children:[(0,t.jsx)(eV.A,{span:10}),(0,t.jsx)(eV.A,{span:10,children:(0,t.jsxs)(ei.A,{className:"mb-5 mt-1",children:[(0,t.jsx)("strong",{children:E("models.addModel.modeOptional")})," - ",E("models.addModel.modeDescription")," ",(0,t.jsx)(l$,{href:"https://docs.litellm.ai/docs/proxy/health#health",target:"_blank",children:"Learn more"})]})})]}),(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)(w.A.Text,{className:"text-sm text-gray-500 mb-2",children:E("models.addModel.credentialsDescription")})}),(0,t.jsx)(Y.A.Item,{label:E("models.addModel.existingCredentials"),name:"litellm_credential_name",initialValue:null,children:(0,t.jsx)(G.A,{showSearch:!0,placeholder:E("models.addModel.existingCredentialsPlaceholder"),optionFilterProp:"children",filterOption:(e,l)=>(l?.label??"").toLowerCase().includes(e.toLowerCase()),options:[{value:null,label:E("models.addModel.none")},...f.map(e=>({value:e.credential_name,label:e.credential_name}))],allowClear:!0})}),(0,t.jsx)(Y.A.Item,{noStyle:!0,shouldUpdate:(e,l)=>e.litellm_credential_name!==l.litellm_credential_name||e.provider!==l.provider,children:({getFieldValue:e})=>{let l=e("litellm_credential_name");return(console.log("\uD83D\uDD11 Credential Name Changed:",l),l)?null:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center my-4",children:[(0,t.jsx)("div",{className:"flex-grow border-t border-gray-200"}),(0,t.jsx)("span",{className:"px-4 text-gray-500 text-sm",children:E("models.addModel.or")}),(0,t.jsx)("div",{className:"flex-grow border-t border-gray-200"})]}),(0,t.jsx)(eK,{selectedProvider:s,uploadProps:u})]})}}),(0,t.jsxs)("div",{className:"flex items-center my-4",children:[(0,t.jsx)("div",{className:"flex-grow border-t border-gray-200"}),(0,t.jsx)("span",{className:"px-4 text-gray-500 text-sm",children:E("models.addModel.additionalSettings")}),(0,t.jsx)("div",{className:"flex-grow border-t border-gray-200"})]}),(es||!et)&&(0,t.jsx)(Y.A.Item,{label:E("models.addModel.teamByokModel"),tooltip:E("models.addModel.teamByokTooltip"),className:"mb-4",children:(0,t.jsx)(T.A,{title:M?"":E("models.addModel.enterpriseFeature"),placement:"top",children:(0,t.jsx)(lN.A,{checked:U,onChange:l=>{J(l),l||e.setFieldValue("team_id",void 0)},disabled:!M})})}),U&&(es||!et)&&(0,t.jsx)(Y.A.Item,{label:E("models.addModel.selectTeam"),name:"team_id",className:"mb-4",tooltip:E("models.addModel.selectTeamByokTooltip"),rules:[{required:U&&!es,message:E("models.addModel.selectTeamRequired")}],children:(0,t.jsx)(lk.A,{teams:p,disabled:!M})}),es&&(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(Y.A.Item,{label:E("models.addModel.modelAccessGroup"),name:"model_access_group",className:"mb-4",tooltip:E("models.addModel.modelAccessGroupTooltip"),children:(0,t.jsx)(G.A,{mode:"tags",showSearch:!0,placeholder:E("models.addModel.modelAccessGroupPlaceholder"),optionFilterProp:"children",tokenSeparators:[","],options:K.map(e=>({value:e,label:e})),maxTagCount:"responsive",allowClear:!0})})}),(0,t.jsx)(lP,{showAdvancedSettings:h,setShowAdvancedSettings:x,teams:p,guardrailsList:L||[],tagsList:B||{}})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)(T.A,{title:E("models.addModel.helpTooltip"),children:(0,t.jsx)(w.A.Link,{href:"https://github.com/BerriAI/litellm/issues",children:E("models.addModel.needHelp")})}),(0,t.jsxs)("div",{className:"space-x-2",children:[(0,t.jsx)($.Ay,{onClick:H,loading:v,children:E("models.addModel.testConnect")}),(0,t.jsx)($.Ay,{htmlType:"submit",children:E("models.addModel.addModelButton")})]})]})]})})}),(0,t.jsx)(Q.A,{title:E("models.addModel.connectionTestResults"),open:y,onCancel:()=>{b(!1),A(!1)},footer:[(0,t.jsx)($.Ay,{onClick:()=>{b(!1),A(!1)},children:E("models.addModel.close")},"close")],width:700,children:y&&(0,t.jsx)(lr,{formValues:e.getFieldsValue(),accessToken:k,testMode:j,modelName:e.getFieldValue("model_name")||e.getFieldValue("model"),onClose:()=>{b(!1),A(!1)},onTestComplete:()=>A(!1)},N)})]})},lH=({form:e,handleOk:l,selectedProvider:s,setSelectedProvider:a,providerModels:r,setProviderModelsFn:o,getPlaceholder:i,uploadProps:d,showAdvancedSettings:n,setShowAdvancedSettings:m,teams:u,credentials:h,accessToken:x,userRole:p})=>{let{t:g}=(0,c.o)(),[f]=Y.A.useForm();return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(e7.fu,{className:"w-full",children:[(0,t.jsxs)(e7.wb,{className:"mb-4",children:[(0,t.jsx)(e7.oz,{children:g("models.addModel.tab")}),(0,t.jsx)(e7.oz,{children:g("models.addModel.autoRouterTab")})]}),(0,t.jsxs)(e7.T2,{children:[(0,t.jsx)(e7.Kp,{children:(0,t.jsx)(lG,{form:e,handleOk:l,selectedProvider:s,setSelectedProvider:a,providerModels:r,setProviderModelsFn:o,getPlaceholder:i,uploadProps:d,showAdvancedSettings:n,setShowAdvancedSettings:m,teams:u,credentials:h})}),(0,t.jsx)(e7.Kp,{children:(0,t.jsx)(lb,{form:f,handleOk:()=>{f.validateFields().then(e=>{lo(e,x,f,l)}).catch(e=>{console.error("Validation failed:",e)})},accessToken:x,userRole:p})})]})]})})};var lU=s(48617),lJ=s(61484),lK=s(21796),lW=s(55012),lX=s(14862);let lY=[{pattern:/Missing .* API Key/i,replacement:"Missing API Key"},{pattern:/Connection timeout/i,replacement:"Connection timeout"},{pattern:/Network.*not.*ok/i,replacement:"Network connection failed"},{pattern:/403.*Forbidden/i,replacement:"Access forbidden - check API key permissions"},{pattern:/401.*Unauthorized/i,replacement:"Unauthorized - invalid API key"},{pattern:/429.*rate limit/i,replacement:"Rate limit exceeded"},{pattern:/500.*Internal Server Error/i,replacement:"Provider internal server error"},{pattern:/silinex\.AuthenticationError/i,replacement:"Authentication failed"},{pattern:/silinex\.RateLimitError/i,replacement:"Rate limit exceeded"},{pattern:/silinex\.APIError/i,replacement:"API error"}],lQ=({accessToken:e,modelData:l,all_models_on_proxy:s,getDisplayModelName:r,setSelectedModelId:o,teams:i})=>{let d,n,m,u,{t:h}=(0,c.o)(),[x,p]=(0,g.useState)({}),[f,j]=(0,g.useState)([]),[_,y]=(0,g.useState)(!1),[b,v]=(0,g.useState)(!1),[A,k]=(0,g.useState)(null),[w,S]=(0,g.useState)(!1),[M,I]=(0,g.useState)(null);(0,g.useRef)(null),(0,g.useEffect)(()=>{e&&l?.data&&(async()=>{let s={};l.data.forEach(e=>{let l=e.model_info?.id;l&&(s[l]={status:"none",lastCheck:h("models.healthCheck.none"),lastSuccess:h("models.healthCheck.none"),loading:!1,error:void 0,fullError:void 0,successResponse:void 0})});try{let t=await (0,a.latestHealthChecksCall)(e);t&&t.latest_health_checks&&"object"==typeof t.latest_health_checks&&Object.entries(t.latest_health_checks).forEach(([e,t])=>{if(!t||!l.data.some(l=>l.model_info?.id===e))return;let a=t.error_message||void 0;s[e]={status:t.status||"unknown",lastCheck:t.checked_at?new Date(t.checked_at).toLocaleString():h("models.healthCheck.none"),lastSuccess:"healthy"===t.status&&t.checked_at?new Date(t.checked_at).toLocaleString():h("models.healthCheck.none"),loading:!1,error:a?E(a):void 0,fullError:a,successResponse:"healthy"===t.status?t:void 0}})}catch(e){console.warn("Failed to load health check history (using default states):",e)}p(s)})()},[e,l]);let E=e=>{if(!e)return h("models.healthCheck.healthCheckFailed");let l="string"==typeof e?e:JSON.stringify(e),s=l.match(/(\w+Error):\s*(\d{3})/i);if(s)return`${s[1]}: ${s[2]}`;let t=l.match(/(AuthenticationError|RateLimitError|BadRequestError|InternalServerError|TimeoutError|NotFoundError|ForbiddenError|ServiceUnavailableError|BadGatewayError|ContentPolicyViolationError|\w+Error)/i),a=l.match(/\b(400|401|403|404|408|429|500|502|503|504)\b/);if(t&&a)return`${t[1]}: ${a[1]}`;if(a){let e=a[1];return`${({400:"BadRequestError",401:"AuthenticationError",403:"ForbiddenError",404:"NotFoundError",408:"TimeoutError",429:"RateLimitError",500:"InternalServerError",502:"BadGatewayError",503:"ServiceUnavailableError",504:"GatewayTimeoutError"})[e]}: ${e}`}if(t){let e=t[1],l={AuthenticationError:"401",RateLimitError:"429",BadRequestError:"400",InternalServerError:"500",TimeoutError:"408",NotFoundError:"404",ForbiddenError:"403",ServiceUnavailableError:"503",BadGatewayError:"502",GatewayTimeoutError:"504",ContentPolicyViolationError:"400"}[e];return l?`${e}: ${l}`:e}for(let{pattern:e,replacement:s}of lY)if(e.test(l))return s;if(/missing.*api.*key|invalid.*key|unauthorized/i.test(l))return"AuthenticationError: 401";if(/rate.*limit|too.*many.*requests/i.test(l))return"RateLimitError: 429";if(/timeout|timed.*out/i.test(l))return"TimeoutError: 408";if(/not.*found/i.test(l))return"NotFoundError: 404";if(/forbidden|access.*denied/i.test(l))return"ForbiddenError: 403";if(/internal.*server.*error/i.test(l))return"InternalServerError: 500";let r=l.replace(/[\n\r]+/g," ").replace(/\s+/g," ").trim(),o=r.split(/[.!?]/),i=o[0]?.trim();return i&&i.length>0?i.length>100?i.substring(0,97)+"...":i:r.length>100?r.substring(0,97)+"...":r},F=async l=>{if(e){p(e=>({...e,[l]:{...e[l],loading:!0,status:"checking"}}));try{let s=await (0,a.individualModelHealthCheckCall)(e,l),t=new Date().toLocaleString();if(s.unhealthy_count>0&&s.unhealthy_endpoints&&s.unhealthy_endpoints.length>0){let e=s.unhealthy_endpoints[0]?.error||h("models.healthCheck.healthCheckFailed"),a=E(e);p(s=>({...s,[l]:{status:"unhealthy",lastCheck:t,lastSuccess:s[l]?.lastSuccess||h("models.healthCheck.none"),loading:!1,error:a,fullError:e}}))}else p(e=>({...e,[l]:{status:"healthy",lastCheck:t,lastSuccess:t,loading:!1,successResponse:s}}));try{let s=await (0,a.latestHealthChecksCall)(e),t=s.latest_health_checks?.[l];if(t){let e=t.error_message||void 0;p(s=>({...s,[l]:{status:t.status||s[l]?.status||"unknown",lastCheck:t.checked_at?new Date(t.checked_at).toLocaleString():s[l]?.lastCheck||h("models.healthCheck.none"),lastSuccess:"healthy"===t.status&&t.checked_at?new Date(t.checked_at).toLocaleString():s[l]?.lastSuccess||h("models.healthCheck.none"),loading:!1,error:e?E(e):s[l]?.error,fullError:e||s[l]?.fullError,successResponse:"healthy"===t.status?t:s[l]?.successResponse}}))}}catch(e){console.debug("Could not fetch updated status from database (non-critical):",e)}}catch(a){let e=new Date().toLocaleString(),s=a instanceof Error?a.message:String(a),t=E(s);p(a=>({...a,[l]:{status:"unhealthy",lastCheck:e,lastSuccess:a[l]?.lastSuccess||h("models.healthCheck.none"),loading:!1,error:t,fullError:s}}))}}},R=async()=>{let l=f.length>0?f:s,t=l.reduce((e,l)=>(e[l]={...x[l],loading:!0,status:"checking"},e),{});p(e=>({...e,...t}));let r={},o=l.map(async l=>{if(e)try{let s=await (0,a.individualModelHealthCheckCall)(e,l);r[l]=s;let t=new Date().toLocaleString();if(s.unhealthy_count>0&&s.unhealthy_endpoints&&s.unhealthy_endpoints.length>0){let e=s.unhealthy_endpoints[0]?.error||h("models.healthCheck.healthCheckFailed"),a=E(e);p(s=>({...s,[l]:{status:"unhealthy",lastCheck:t,lastSuccess:s[l]?.lastSuccess||h("models.healthCheck.none"),loading:!1,error:a,fullError:e}}))}else p(e=>({...e,[l]:{status:"healthy",lastCheck:t,lastSuccess:t,loading:!1,successResponse:s}}))}catch(a){console.error(`Health check failed for model id ${l}:`,a);let e=new Date().toLocaleString(),s=a instanceof Error?a.message:String(a),t=E(s);p(a=>({...a,[l]:{status:"unhealthy",lastCheck:e,lastSuccess:a[l]?.lastSuccess||h("models.healthCheck.none"),loading:!1,error:t,fullError:s}}))}});await Promise.allSettled(o);try{if(!e)return;let s=await (0,a.latestHealthChecksCall)(e);s.latest_health_checks&&Object.entries(s.latest_health_checks).forEach(([e,s])=>{if(l.includes(e)&&s){let l=s.error_message||void 0;p(t=>{let a=t[e];return{...t,[e]:{status:s.status||a?.status||"unknown",lastCheck:s.checked_at?new Date(s.checked_at).toLocaleString():a?.lastCheck||h("models.healthCheck.none"),lastSuccess:"healthy"===s.status&&s.checked_at?new Date(s.checked_at).toLocaleString():a?.lastSuccess||h("models.healthCheck.none"),loading:!1,error:l?E(l):a?.error,fullError:l||a?.fullError,successResponse:"healthy"===s.status?s:a?.successResponse}}})}})}catch(e){console.warn("Failed to fetch updated health statuses from database (non-critical):",e)}},P=e=>{y(e),e?j(s):j([])},z=()=>{v(!1),k(null)},L=()=>{S(!1),I(null)};return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(ed.A,{children:h("models.healthCheck.title")}),(0,t.jsx)(ei.A,{className:"text-gray-600 mt-1",children:h("models.healthCheck.description")})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[f.length>0&&(0,t.jsx)(C.A,{size:"sm",variant:"light",onClick:()=>P(!1),className:"px-3 py-1 text-sm",children:h("models.healthCheck.clearSelection")}),(0,t.jsx)(C.A,{size:"sm",variant:"secondary",onClick:R,disabled:Object.values(x).some(e=>e.loading),className:"px-3 py-1 text-sm",children:f.length>0&&f.length<s.length?h("models.healthCheck.runSelectedChecks"):h("models.healthCheck.runAllChecks")})]})]})}),(0,t.jsx)("div",{children:(0,t.jsx)(lU.k,{columns:(d=(e,l)=>{l?j(l=>[...l,e]):(j(l=>l.filter(l=>l!==e)),y(!1))},n=e=>{switch(e){case"healthy":return(0,t.jsx)(N.A,{color:"emerald",children:h("models.healthCheck.healthy")});case"unhealthy":return(0,t.jsx)(N.A,{color:"red",children:h("models.healthCheck.unhealthy")});case"checking":return(0,t.jsx)(N.A,{color:"blue",children:h("models.healthCheck.checking")});case"none":return(0,t.jsx)(N.A,{color:"gray",children:h("models.healthCheck.none")});default:return(0,t.jsx)(N.A,{color:"gray",children:h("models.healthCheck.unknown")})}},m=(e,l,s)=>{k({modelName:e,cleanedError:l,fullError:s}),v(!0)},u=(e,l)=>{I({modelName:e,response:l}),S(!0)},[{header:()=>(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(lJ.A,{checked:_,indeterminate:f.length>0&&!_,onChange:e=>P(e.target.checked),onClick:e=>e.stopPropagation()}),(0,t.jsx)("span",{children:h("models.healthCheck.modelId")})]}),accessorKey:"model_info.id",enableSorting:!0,sortingFn:"alphanumeric",cell:({row:e})=>{let l=e.original,s=l.model_info?.id??"",a=f.includes(s);return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(lJ.A,{checked:a,onChange:e=>d(s,e.target.checked),onClick:e=>e.stopPropagation()}),(0,t.jsx)(T.A,{title:l.model_info.id,children:(0,t.jsx)("div",{className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left w-full truncate whitespace-nowrap cursor-pointer max-w-[15ch]",onClick:()=>o&&o(l.model_info.id),children:l.model_info.id})})]})}},{header:h("models.healthCheck.modelName"),accessorKey:"model_name",enableSorting:!0,sortingFn:"alphanumeric",cell:({row:e})=>{let l=e.original,s=r(l)||l.model_name;return(0,t.jsx)("div",{className:"font-medium text-sm",children:(0,t.jsx)(T.A,{title:s,children:(0,t.jsx)("div",{className:"truncate max-w-[200px]",children:s})})})}},{header:h("models.healthCheck.teamAlias"),accessorKey:"model_info.team_id",enableSorting:!0,sortingFn:"alphanumeric",cell:({row:e})=>{let l=e.original,s=l.model_info?.team_id;if(!s)return(0,t.jsx)("span",{className:"text-gray-400 text-sm",children:h("models.healthCheck.na")});let a=i?.find(e=>e.team_id===s),r=a?.team_alias||s;return(0,t.jsx)("div",{className:"text-sm",children:(0,t.jsx)(T.A,{title:r,children:(0,t.jsx)("div",{className:"truncate max-w-[150px]",children:r})})})}},{header:h("models.healthCheck.healthStatus"),accessorKey:"health_status",enableSorting:!0,sortingFn:(e,l,s)=>{let t=e.getValue("health_status")||"unknown",a=l.getValue("health_status")||"unknown",r={healthy:0,checking:1,unknown:2,unhealthy:3};return(r[t]??4)-(r[a]??4)},cell:({row:e})=>{let l=e.original,s={status:l.health_status,loading:l.health_loading,error:l.health_error};if(s.loading)return(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("div",{className:"flex space-x-1",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse"}),(0,t.jsx)("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),(0,t.jsx)("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]}),(0,t.jsx)(lK.E,{className:"text-gray-600 text-sm",children:h("models.healthCheck.checking")})]});let a=l.model_info?.id??"",o=r(l)||l.model_name,i="healthy"===s.status&&x[a]?.successResponse;return(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[n(s.status),i&&u&&(0,t.jsx)(T.A,{title:h("models.healthCheck.viewResponseDetails"),placement:"top",children:(0,t.jsx)("button",{onClick:()=>u(o,x[a]?.successResponse),className:"p-1 text-green-600 hover:text-green-800 hover:bg-green-50 rounded cursor-pointer transition-colors",children:(0,t.jsx)(lW.A,{className:"h-4 w-4"})})})]})}},{header:h("models.healthCheck.errorDetails"),accessorKey:"health_error",enableSorting:!1,cell:({row:e})=>{let l=e.original,s=l.model_info?.id??"",a=r(l)||l.model_name,o=x[s];if(!o?.error)return(0,t.jsx)(lK.E,{className:"text-gray-400 text-sm",children:h("models.healthCheck.noErrors")});let i=o.error,d=o.fullError||o.error;return(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"max-w-[200px]",children:(0,t.jsx)(T.A,{title:i,placement:"top",children:(0,t.jsx)(lK.E,{className:"text-red-600 text-sm truncate",children:i})})}),m&&d!==i&&(0,t.jsx)(T.A,{title:h("models.healthCheck.viewFullErrorDetails"),placement:"top",children:(0,t.jsx)("button",{onClick:()=>m(a,i,d),className:"p-1 text-red-600 hover:text-red-800 hover:bg-red-50 rounded cursor-pointer transition-colors",children:(0,t.jsx)(lW.A,{className:"h-4 w-4"})})})]})}},{header:h("models.healthCheck.lastCheck"),accessorKey:"last_check",enableSorting:!0,sortingFn:(e,l,s)=>{let t=e.getValue("last_check")||h("models.healthCheck.neverChecked"),a=l.getValue("last_check")||h("models.healthCheck.neverChecked");if(t===h("models.healthCheck.neverChecked")&&a===h("models.healthCheck.neverChecked"))return 0;if(t===h("models.healthCheck.neverChecked"))return 1;if(a===h("models.healthCheck.neverChecked"))return -1;if(t===h("models.healthCheck.checkInProgress")&&a===h("models.healthCheck.checkInProgress"))return 0;if(t===h("models.healthCheck.checkInProgress"))return -1;if(a===h("models.healthCheck.checkInProgress"))return 1;let r=new Date(t),o=new Date(a);return isNaN(r.getTime())&&isNaN(o.getTime())?0:isNaN(r.getTime())?1:isNaN(o.getTime())?-1:o.getTime()-r.getTime()},cell:({row:e})=>{let l=e.original;return(0,t.jsx)(lK.E,{className:"text-gray-600 text-sm",children:l.health_loading?h("models.healthCheck.checkInProgress"):l.last_check})}},{header:h("models.healthCheck.lastSuccess"),accessorKey:"last_success",enableSorting:!0,sortingFn:(e,l,s)=>{let t=e.getValue("last_success")||h("models.healthCheck.neverSucceeded"),a=l.getValue("last_success")||h("models.healthCheck.neverSucceeded");if(t===h("models.healthCheck.neverSucceeded")&&a===h("models.healthCheck.neverSucceeded"))return 0;if(t===h("models.healthCheck.neverSucceeded"))return 1;if(a===h("models.healthCheck.neverSucceeded"))return -1;if(t===h("models.healthCheck.none")&&a===h("models.healthCheck.none"))return 0;if(t===h("models.healthCheck.none"))return 1;if(a===h("models.healthCheck.none"))return -1;let r=new Date(t),o=new Date(a);return isNaN(r.getTime())&&isNaN(o.getTime())?0:isNaN(r.getTime())?1:isNaN(o.getTime())?-1:o.getTime()-r.getTime()},cell:({row:e})=>{let l=e.original,s=x[l.model_info?.id??""],a=s?.lastSuccess||h("models.healthCheck.none");return(0,t.jsx)(lK.E,{className:"text-gray-600 text-sm",children:a})}},{header:h("models.healthCheck.actions"),id:"actions",cell:({row:e})=>{let l=e.original,s=l.model_info?.id??"",a=l.health_status&&"none"!==l.health_status,r=l.health_loading?h("models.healthCheck.checking"):a?h("models.healthCheck.rerunHealthCheck"):h("models.healthCheck.runHealthCheck");return(0,t.jsx)(T.A,{title:r,placement:"top",children:(0,t.jsx)("button",{"data-testid":"run-health-check-btn",className:`p-2 rounded-md transition-colors ${l.health_loading?"text-gray-400 cursor-not-allowed bg-gray-100":"text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50"}`,onClick:()=>{l.health_loading||F(s)},disabled:l.health_loading,children:l.health_loading?(0,t.jsxs)("div",{className:"flex space-x-1",children:[(0,t.jsx)("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-pulse"}),(0,t.jsx)("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),(0,t.jsx)("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]}):a?(0,t.jsx)(e1.A,{className:"h-4 w-4"}):(0,t.jsx)(lX.A,{className:"h-4 w-4"})})})},enableSorting:!1}]),data:l.data.map(e=>{let l=e.model_info?.id,s=(l?x[l]:null)||{status:"none",lastCheck:h("models.healthCheck.none"),loading:!1};return{model_name:e.model_name,model_info:e.model_info,provider:e.provider,litellm_model_name:e.litellm_model_name,health_status:s.status,last_check:s.lastCheck,last_success:s.lastSuccess||h("models.healthCheck.none"),health_loading:s.loading,health_error:s.error,health_full_error:s.fullError}}),isLoading:!1})}),(0,t.jsx)(Q.A,{title:A?`${h("models.healthCheck.healthCheckError")} - ${A.modelName}`:h("models.healthCheck.errorDetails"),open:b,onCancel:z,footer:[(0,t.jsx)($.Ay,{onClick:z,children:h("models.common.cancel")},"close")],width:800,children:A&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(ei.A,{className:"font-medium",children:[h("models.healthCheck.error"),":"]}),(0,t.jsx)("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,t.jsx)(ei.A,{className:"text-red-800",children:A.cleanedError})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(ei.A,{className:"font-medium",children:[h("models.healthCheck.fullErrorDetails"),":"]}),(0,t.jsx)("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded-md max-h-96 overflow-y-auto",children:(0,t.jsx)("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:A.fullError})})]})]})}),(0,t.jsx)(Q.A,{title:M?`${h("models.healthCheck.healthCheckResponse")} - ${M.modelName}`:h("models.healthCheck.responseDetails"),open:w,onCancel:L,footer:[(0,t.jsx)($.Ay,{onClick:L,children:h("models.common.cancel")},"close")],width:800,children:M&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(ei.A,{className:"font-medium",children:[h("models.healthCheck.status"),":"]}),(0,t.jsx)("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded-md",children:(0,t.jsx)(ei.A,{className:"text-green-800",children:h("models.healthCheck.healthCheckPassed")})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(ei.A,{className:"font-medium",children:[h("models.healthCheck.responseDetails"),":"]}),(0,t.jsx)("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded-md max-h-96 overflow-y-auto",children:(0,t.jsx)("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:JSON.stringify(M.response,null,2)})})]})]})})]})};var lZ=s(17293),l0=s(30947),l1=s(4068),l2=s(44993),l4=s(78211);let l5=({accessToken:e,initialModelGroupAlias:l={},onAliasUpdate:s})=>{let{t:r}=(0,c.o)(),[o,i]=(0,g.useState)([]),[d,n]=(0,g.useState)({aliasName:"",targetModelGroup:""}),[m,u]=(0,g.useState)(null),[h,x]=(0,g.useState)(!0);(0,g.useEffect)(()=>{i(Object.entries(l).map(([e,l],s)=>({id:`${s}-${e}`,aliasName:e,targetModelGroup:"string"==typeof l?l:l?.model??""})))},[l]);let p=async l=>{if(!e)return console.error("Access token is missing"),!1;try{let t={};return l.forEach(e=>{t[e.aliasName]=e.targetModelGroup}),console.log("Saving model group alias:",t),await (0,a.setCallbacksCall)(e,{router_settings:{model_group_alias:t}}),s&&s(t),!0}catch(e){return console.error("Failed to save model group alias settings:",e),W.Ay.fromBackend(r("models.modelAlias.saveFailed")),!1}},f=async()=>{if(!d.aliasName||!d.targetModelGroup)return void W.Ay.fromBackend(r("models.modelAlias.errorRequired"));if(o.some(e=>e.aliasName===d.aliasName))return void W.Ay.fromBackend(r("models.modelAlias.errorDuplicate"));let e=[...o,{id:`${Date.now()}-${d.aliasName}`,aliasName:d.aliasName,targetModelGroup:d.targetModelGroup}];await p(e)&&(i(e),n({aliasName:"",targetModelGroup:""}),W.Ay.success(r("models.modelAlias.successAdded")))},j=async()=>{if(!m)return;if(!m.aliasName||!m.targetModelGroup)return void W.Ay.fromBackend(r("models.modelAlias.errorRequired"));if(o.some(e=>e.id!==m.id&&e.aliasName===m.aliasName))return void W.Ay.fromBackend(r("models.modelAlias.errorDuplicate"));let e=o.map(e=>e.id===m.id?m:e);await p(e)&&(i(e),u(null),W.Ay.success(r("models.modelAlias.successUpdated")))},_=()=>{u(null)},y=async e=>{let l=o.filter(l=>l.id!==e);await p(l)&&(i(l),W.Ay.success(r("models.modelAlias.successDeleted")))},b=o.reduce((e,l)=>(e[l.aliasName]=l.targetModelGroup,e),{});return(0,t.jsxs)(l4.Zp,{className:"mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>x(!h),children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)(l4.hE,{className:"mb-0",children:r("models.modelAlias.title")}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:r("models.modelAlias.titleDescription")})]}),(0,t.jsx)("div",{className:"flex items-center",children:h?(0,t.jsx)(lZ.A,{className:"w-5 h-5 text-gray-500"}):(0,t.jsx)(l0.A,{className:"w-5 h-5 text-gray-500"})})]}),h&&(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)(l4.EY,{className:"text-sm font-medium text-gray-700 mb-2",children:r("models.modelAlias.addNewAlias")}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:r("models.modelAlias.aliasName")}),(0,t.jsx)("input",{type:"text",value:d.aliasName,onChange:e=>n({...d,aliasName:e.target.value}),placeholder:"e.g., gpt-4o",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:r("models.modelAlias.targetModelGroup")}),(0,t.jsx)("input",{type:"text",value:d.targetModelGroup,onChange:e=>n({...d,targetModelGroup:e.target.value}),placeholder:"e.g., gpt-4o-mini-openai",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"})]}),(0,t.jsx)("div",{className:"flex items-end",children:(0,t.jsxs)("button",{onClick:f,disabled:!d.aliasName||!d.targetModelGroup,className:`flex items-center px-4 py-2 rounded-md text-sm ${!d.aliasName||!d.targetModelGroup?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:[(0,t.jsx)(l1.A,{className:"w-4 h-4 mr-1"}),r("models.modelAlias.addAlias")]})})]})]}),(0,t.jsx)(l4.EY,{className:"text-sm font-medium text-gray-700 mb-2",children:r("models.modelAlias.manageExistingAliases")}),(0,t.jsx)("div",{className:"rounded-lg custom-border relative mb-6",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(l4.XI,{className:"[&_td]:py-0.5 [&_th]:py-1",children:[(0,t.jsx)(l4.nd,{children:(0,t.jsxs)(l4.Hj,{children:[(0,t.jsx)(l4.M_,{className:"py-1 h-8",children:r("models.modelAlias.aliasName")}),(0,t.jsx)(l4.M_,{className:"py-1 h-8",children:r("models.modelAlias.targetModelGroup")}),(0,t.jsx)(l4.M_,{className:"py-1 h-8",children:r("models.modelAlias.actions")})]})}),(0,t.jsxs)(l4.BF,{children:[o.map(e=>(0,t.jsx)(l4.Hj,{className:"h-8",children:m&&m.id===e.id?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l4.nA,{className:"py-0.5",children:(0,t.jsx)("input",{type:"text",value:m.aliasName,onChange:e=>u({...m,aliasName:e.target.value}),className:"w-full px-2 py-1 border border-gray-300 rounded-md text-sm"})}),(0,t.jsx)(l4.nA,{className:"py-0.5",children:(0,t.jsx)("input",{type:"text",value:m.targetModelGroup,onChange:e=>u({...m,targetModelGroup:e.target.value}),className:"w-full px-2 py-1 border border-gray-300 rounded-md text-sm"})}),(0,t.jsx)(l4.nA,{className:"py-0.5 whitespace-nowrap",children:(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("button",{onClick:j,className:"text-xs bg-blue-50 text-blue-600 px-2 py-1 rounded hover:bg-blue-100",children:r("models.common.save")}),(0,t.jsx)("button",{onClick:_,className:"text-xs bg-gray-50 text-gray-600 px-2 py-1 rounded hover:bg-gray-100",children:r("models.common.cancel")})]})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l4.nA,{className:"py-0.5 text-sm text-gray-900",children:e.aliasName}),(0,t.jsx)(l4.nA,{className:"py-0.5 text-sm text-gray-500",children:e.targetModelGroup}),(0,t.jsx)(l4.nA,{className:"py-0.5 whitespace-nowrap",children:(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("button",{onClick:()=>{u({...e})},className:"text-xs bg-blue-50 text-blue-600 px-2 py-1 rounded hover:bg-blue-100",children:(0,t.jsx)(l2.A,{className:"w-3 h-3"})}),(0,t.jsx)("button",{onClick:()=>y(e.id),className:"text-xs bg-red-50 text-red-600 px-2 py-1 rounded hover:bg-red-100",children:(0,t.jsx)(A.A,{className:"w-3 h-3"})})]})})]})},e.id)),0===o.length&&(0,t.jsx)(l4.Hj,{children:(0,t.jsx)(l4.nA,{colSpan:3,className:"py-0.5 text-sm text-gray-500 text-center",children:r("models.modelAlias.noAliasesConfiguredYet")})})]})]})})}),(0,t.jsxs)(l4.Zp,{children:[(0,t.jsx)(l4.hE,{className:"mb-4",children:r("models.modelAlias.configurationExample")}),(0,t.jsx)(l4.EY,{className:"text-gray-600 mb-4",children:r("models.modelAlias.configDescription")}),(0,t.jsx)("div",{className:"bg-gray-100 rounded-lg p-4 font-mono text-sm",children:(0,t.jsxs)("div",{className:"text-gray-700",children:["router_settings:",(0,t.jsx)("br",{}),"\xa0\xa0model_group_alias:",0===Object.keys(b).length?(0,t.jsxs)("span",{className:"text-gray-500",children:[(0,t.jsx)("br",{}),r("models.modelAlias.noAliasesConfiguredYet")]}):Object.entries(b).map(([e,l])=>(0,t.jsxs)("span",{children:[(0,t.jsx)("br",{}),'\xa0\xa0\xa0\xa0"',e,'": "',l,'"']},e))]})})]})]})]})};var l6=s(44926),l3=s(88305),l8=s(34487),l7=s(94514),l9=s(67635),se=s(88534);let sl=({isVisible:e,onCancel:l,onSuccess:s,modelData:r,accessToken:o,userRole:i})=>{let[d]=Y.A.useForm(),[n,c]=(0,g.useState)(!1),[m,u]=(0,g.useState)([]),[h,x]=(0,g.useState)([]),[p,f]=(0,g.useState)(!1),[j,_]=(0,g.useState)(!1),[y,b]=(0,g.useState)(null);(0,g.useEffect)(()=>{e&&r&&v()},[e,r]),(0,g.useEffect)(()=>{let l=async()=>{if(o)try{let e=await (0,a.modelAvailableCall)(o,"","",!1,null,!0,!0);u(e.data.map(e=>e.id))}catch(e){console.error("Error fetching model access groups:",e)}},s=async()=>{if(o)try{let e=await (0,li.Q)(o);x(e)}catch(e){console.error("Error fetching model info:",e)}};e&&(l(),s())},[e,o]);let v=()=>{try{let e=null;r.litellm_params?.auto_router_config&&(e="string"==typeof r.litellm_params.auto_router_config?JSON.parse(r.litellm_params.auto_router_config):r.litellm_params.auto_router_config),b(e),d.setFieldsValue({auto_router_name:r.model_name,auto_router_default_model:r.litellm_params?.auto_router_default_model||"",auto_router_embedding_model:r.litellm_params?.auto_router_embedding_model||"",model_access_group:r.model_info?.access_groups||[]});let l=new Set(h.map(e=>e.model_group));f(!l.has(r.litellm_params?.auto_router_default_model)),_(!l.has(r.litellm_params?.auto_router_embedding_model))}catch(e){console.error("Error parsing auto router config:",e),W.Ay.fromBackend("Error loading auto router configuration")}},A=async()=>{try{c(!0);let e=await d.validateFields(),t={...r.litellm_params,auto_router_config:JSON.stringify(y),auto_router_default_model:e.auto_router_default_model,auto_router_embedding_model:e.auto_router_embedding_model||void 0},i={...r.model_info,access_groups:e.model_access_group||[]},n={model_name:e.auto_router_name,litellm_params:t,model_info:i};await (0,a.modelPatchUpdateCall)(o,n,r.model_info.id);let m={...r,model_name:e.auto_router_name,litellm_params:t,model_info:i};W.Ay.success("Auto router configuration updated successfully"),s(m),l()}catch(e){console.error("Error updating auto router:",e),W.Ay.fromBackend("Failed to update auto router configuration")}finally{c(!1)}},N=h.map(e=>({value:e.model_group,label:e.model_group}));return(0,t.jsx)(Q.A,{title:"Edit Auto Router Configuration",open:e,onCancel:l,footer:[(0,t.jsx)($.Ay,{onClick:l,children:"Cancel"},"cancel"),(0,t.jsx)($.Ay,{loading:n,onClick:A,children:"Save Changes"},"submit")],width:1e3,destroyOnHidden:!0,children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(eB.E,{className:"text-gray-600",children:"Edit the auto router configuration including routing logic, default models, and access settings."}),(0,t.jsxs)(Y.A,{form:d,layout:"vertical",className:"space-y-4",children:[(0,t.jsx)(Y.A.Item,{label:"Auto Router Name",name:"auto_router_name",rules:[{required:!0,message:"Auto router name is required"}],children:(0,t.jsx)(eB.k,{placeholder:"e.g., auto_router_1, smart_routing"})}),(0,t.jsx)("div",{className:"w-full",children:(0,t.jsx)(lx,{modelInfo:h,value:y,onChange:e=>{b(e)}})}),(0,t.jsx)(Y.A.Item,{label:"Default Model",name:"auto_router_default_model",rules:[{required:!0,message:"Default model is required"}],children:(0,t.jsx)(G.A,{placeholder:"Select a default model",onChange:e=>{f("custom"===e)},options:[...N,{value:"custom",label:"Enter custom model name"}],showSearch:!0})}),(0,t.jsx)(Y.A.Item,{label:"Embedding Model",name:"auto_router_embedding_model",children:(0,t.jsx)(G.A,{placeholder:"Select an embedding model (optional)",onChange:e=>{_("custom"===e)},options:[...N,{value:"custom",label:"Enter custom model name"}],showSearch:!0,allowClear:!0})}),"Admin"===i&&(0,t.jsx)(Y.A.Item,{label:"Model Access Groups",name:"model_access_group",tooltip:"Control who can access this auto router",children:(0,t.jsx)(G.A,{mode:"tags",showSearch:!0,placeholder:"Select existing groups or type to create new ones",optionFilterProp:"children",tokenSeparators:[","],options:m.map(e=>({value:e,label:e})),maxTagCount:"responsive",allowClear:!0})})]})]})})},{Title:ss,Link:st}=w.A,sa=({isVisible:e,onCancel:l,onAddCredential:s,existingCredential:a,setIsCredentialModalOpen:r})=>{let[o]=Y.A.useForm();return console.log(`existingCredential in add credentials tab: ${JSON.stringify(a)}`),(0,t.jsx)(Q.A,{title:"Reuse Credentials",open:e,onCancel:()=>{l(),o.resetFields()},footer:null,width:600,children:(0,t.jsxs)(Y.A,{form:o,onFinish:e=>{s(e),o.resetFields(),r(!1)},layout:"vertical",children:[(0,t.jsx)(Y.A.Item,{label:"Credential Name:",name:"credential_name",rules:[{required:!0,message:"Credential name is required"}],initialValue:a?.credential_name,children:(0,t.jsx)(ez.k,{placeholder:"Enter a friendly name for these credentials"})}),Object.entries(a?.credential_values||{}).map(([e,l])=>(0,t.jsx)(Y.A.Item,{label:e,name:e,initialValue:l,children:(0,t.jsx)(ez.k,{placeholder:`Enter ${e}`,disabled:!0})},e)),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(T.A,{title:"Get help on our github",children:(0,t.jsx)(st,{href:"https://github.com/BerriAI/litellm/issues",children:"Need Help?"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)($.Ay,{onClick:()=>{l(),o.resetFields()},style:{marginRight:10},children:"Cancel"}),(0,t.jsx)($.Ay,{htmlType:"submit",children:"Reuse Credentials"})]})]})]})})};function sr({modelId:e,onClose:l,accessToken:s,userID:r,userRole:o,onModelUpdate:i,modelAccessGroups:d}){let n,{t:h}=(0,c.o)(),x=(e,l)=>{let s=h(e);return s===e?l:s},[p]=Y.A.useForm(),[f,j]=(0,g.useState)(null),[_,y]=(0,g.useState)(!1),[b,N]=(0,g.useState)(!1),[k,w]=(0,g.useState)(!1),[S,M]=(0,g.useState)(!1),[I,E]=(0,g.useState)(!1),[F,R]=(0,g.useState)(!1),[P,z]=(0,g.useState)(null),[L,O]=(0,g.useState)(!1),[B,H]=(0,g.useState)({}),[U,J]=(0,g.useState)(!1),[K,X]=(0,g.useState)([]),[Z,ee]=(0,g.useState)({}),{data:el,isLoading:es}=(0,u.oE)(1,50,void 0,e),{data:ea}=(0,m.o)(),{data:er}=(0,u.EV)(),eo=e=>null!=ea&&"object"==typeof ea&&e in ea?ea[e].litellm_provider:"openai",en=(0,g.useMemo)(()=>el?.data&&0!==el.data.length&&et(el,eo).data[0]||null,[el,ea]),ec=("Admin"===o||en?.model_info?.created_by===r)&&en?.model_info?.db_model,em="Admin"===o,eu=en?.litellm_params?.auto_router_config!=null,eh=en?.litellm_params?.litellm_credential_name!=null&&en?.litellm_params?.litellm_credential_name!=void 0;(0,g.useEffect)(()=>{if(en&&!f){let e=en;e.litellm_model_name||(e={...e,litellm_model_name:e?.litellm_params?.litellm_model_name??e?.litellm_params?.model??e?.model_info?.key??null}),j(e),e?.litellm_params?.cache_control_injection_points&&O(!0)}},[en,f]),(0,g.useEffect)(()=>{let l=async()=>{if(!s||en)return;let l=(await (0,a.modelInfoV1Call)(s,e)).data[0];l&&!l.litellm_model_name&&(l={...l,litellm_model_name:l?.litellm_params?.litellm_model_name??l?.litellm_params?.model??l?.model_info?.key??null}),j(l),l?.litellm_params?.cache_control_injection_points&&O(!0)},t=async()=>{if(s)try{let e=(await (0,a.getGuardrailsList)(s)).guardrails.map(e=>e.guardrail_name);X(e)}catch(e){console.error("Failed to fetch guardrails:",e)}},r=async()=>{if(s)try{let e=await (0,a.tagListCall)(s);ee(e)}catch(e){console.error("Failed to fetch tags:",e)}};(async()=>{if(!s||eh)return;let l=await (0,a.credentialGetCall)(s,null,e);z({credential_name:l.credential_name,credential_values:l.credential_values,credential_info:l.credential_info})})(),l(),t(),r()},[s,e]);let ex=async l=>{if(!s)return;let t={credential_name:l.credential_name,model_id:e,credential_info:{custom_llm_provider:f.litellm_params?.custom_llm_provider}};W.Ay.info(h("modelInfo.notifications.storingCredential")),await (0,a.credentialCreateCall)(s,t),W.Ay.success(h("modelInfo.notifications.credentialStored"))},ep=async l=>{try{let t;if(!s)return;E(!0);let r={};try{r=l.litellm_extra_params?JSON.parse(l.litellm_extra_params):{}}catch(e){W.Ay.fromBackend(h("modelInfo.notifications.invalidJsonLitellmParams")),E(!1);return}let o={...l.litellm_params,...r,model:l.litellm_model_name,api_base:l.api_base,custom_llm_provider:l.custom_llm_provider,organization:l.organization,tpm:l.tpm,rpm:l.rpm,max_retries:l.max_retries,timeout:l.timeout,stream_timeout:l.stream_timeout,input_cost_per_token:l.input_cost/1e6,output_cost_per_token:l.output_cost/1e6,tags:l.tags};l.guardrails&&(o.guardrails=l.guardrails),l.cache_control&&l.cache_control_injection_points?.length>0?o.cache_control_injection_points=l.cache_control_injection_points:delete o.cache_control_injection_points;try{t=l.model_info?JSON.parse(l.model_info):en.model_info,l.model_access_group&&(t={...t,access_groups:l.model_access_group}),void 0!==l.health_check_model&&(t={...t,health_check_model:l.health_check_model})}catch(e){W.Ay.fromBackend(h("modelInfo.notifications.invalidJsonModelInfo"));return}let d={model_name:l.model_name,litellm_params:o,model_info:t};await (0,a.modelPatchUpdateCall)(s,d,e);let n={...f,model_name:l.model_name,litellm_model_name:l.litellm_model_name,litellm_params:o,model_info:t};j(n),i&&i(n),W.Ay.success(h("modelInfo.notifications.modelSettingsUpdated")),M(!1),R(!1)}catch(e){console.error("Error updating model:",e),W.Ay.fromBackend(h("modelInfo.notifications.failedToUpdateModelSettings"))}finally{E(!1)}};if(es)return(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)(C.A,{icon:l6.A,variant:"light",onClick:l,className:"mb-4",children:x("models.modelInfo.backToModels","Back to Models")}),(0,t.jsx)(ei.A,{children:x("models.modelInfo.loading","Loading...")})]});if(!en)return(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)(C.A,{icon:l6.A,variant:"light",onClick:l,className:"mb-4",children:x("models.modelInfo.backToModels","Back to Models")}),(0,t.jsx)(ei.A,{children:x("models.modelInfo.notFound","Model not found")})]});let eg=async()=>{if(s)try{W.Ay.info(x("models.modelInfo.notifications.testingConnection","Testing connection..."));let e=await (0,a.testConnectionRequest)(s,{custom_llm_provider:f.litellm_params.custom_llm_provider,litellm_credential_name:f.litellm_params.litellm_credential_name,model:f.litellm_model_name},{mode:f.model_info?.mode},f.model_info?.mode);if("success"===e.status)W.Ay.success(h("modelInfo.notifications.connectionTestSuccessful"));else throw Error(e?.result?.error||e?.message||h("modelInfo.notifications.unknownError"))}catch(e){e instanceof Error?W.Ay.error(h("modelInfo.notifications.errorTestingConnection")+" "+(0,lF.W5)(e.message,100)):W.Ay.error(h("modelInfo.notifications.errorTestingConnection")+" "+String(e))}},ef=async()=>{try{if(N(!0),!s)return;await (0,a.modelDeleteCall)(s,e),W.Ay.success(h("modelInfo.notifications.modelDeletedSuccessfully")),i&&i({deleted:!0,model_info:{id:e}}),l()}catch(e){console.error("Error deleting the model:",e),W.Ay.fromBackend(h("modelInfo.notifications.failedToDeleteModel"))}finally{N(!1),y(!1)}},ej=async(e,l)=>{await (0,se.lW)(e)&&(H(e=>({...e,[l]:!0})),setTimeout(()=>{H(e=>({...e,[l]:!1}))},2e3))},e_=en.litellm_model_name.includes("*");return(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(C.A,{icon:l6.A,variant:"light",onClick:l,className:"mb-4",children:x("models.modelInfo.backToModels","Back to Models")}),(0,t.jsxs)(ed.A,{children:[x("models.modelInfo.publicModelName","Public Model Name"),": ",q(en)]}),(0,t.jsxs)("div",{className:"flex items-center cursor-pointer",children:[(0,t.jsx)(ei.A,{className:"text-gray-500 font-mono",children:en.model_info.id}),(0,t.jsx)($.Ay,{type:"text",size:"small",icon:B["model-id"]?(0,t.jsx)(l7.A,{size:12}):(0,t.jsx)(l9.A,{size:12}),onClick:()=>ej(en.model_info.id,"model-id"),className:`left-2 z-10 transition-all duration-200 ${B["model-id"]?"text-green-600 bg-green-50 border-green-200":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(C.A,{variant:"secondary",icon:e1.A,onClick:eg,className:"flex items-center gap-2","data-testid":"test-connection-button",children:x("models.modelInfo.testConnection","Test Connection")}),(0,t.jsx)(C.A,{icon:l3.A,variant:"secondary",onClick:()=>w(!0),className:"flex items-center",disabled:!em,"data-testid":"reuse-credentials-button",children:x("models.modelInfo.reuseCredentials","Re-use Credentials")}),(0,t.jsx)(C.A,{icon:A.A,variant:"secondary",onClick:()=>y(!0),className:"flex items-center text-red-500 border-red-500 hover:text-red-700",disabled:!ec,"data-testid":"delete-model-button",children:x("models.modelInfo.deleteModel","Delete Model")})]})]}),(0,t.jsxs)(e6.A,{children:[(0,t.jsxs)(e3.A,{className:"mb-6",children:[(0,t.jsx)(e5.A,{children:x("models.modelInfo.overview","Overview")}),(0,t.jsx)(e5.A,{children:x("models.modelInfo.rawJson","Raw JSON")})]}),(0,t.jsxs)(e8.A,{children:[(0,t.jsxs)(V.A,{children:[(0,t.jsxs)(D.A,{numItems:1,numItemsSm:2,numItemsLg:3,className:"gap-6 mb-6",children:[(0,t.jsxs)(eS.A,{children:[(0,t.jsx)(ei.A,{children:x("models.modelInfo.provider","Provider")}),(0,t.jsxs)("div",{className:"mt-2 flex items-center space-x-2",children:[en.provider&&(0,t.jsx)("img",{src:(0,eN.li)(en.provider).logo,alt:`${en.provider} logo`,className:"w-4 h-4",onError:e=>{let l=e.currentTarget,s=l.parentElement;if(s&&s.contains(l))try{let e=document.createElement("div");e.className="w-4 h-4 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=en.provider?.charAt(0)||"-",s.replaceChild(e,l)}catch(e){console.error("Failed to replace provider logo fallback:",e)}}}),(0,t.jsx)(ed.A,{children:en.provider||x("models.modelInfo.notSet","Not Set")})]})]}),(0,t.jsxs)(eS.A,{children:[(0,t.jsx)(ei.A,{children:x("models.modelInfo.silinexModel","Silinex Model")}),(0,t.jsx)("div",{className:"mt-2 overflow-hidden",children:(0,t.jsx)(T.A,{title:en.litellm_model_name||x("models.modelInfo.notSet","Not Set"),children:(0,t.jsx)("div",{className:"break-all text-sm font-medium leading-relaxed cursor-pointer",children:en.litellm_model_name||x("models.modelInfo.notSet","Not Set")})})})]}),(0,t.jsxs)(eS.A,{children:[(0,t.jsx)(ei.A,{children:x("models.modelInfo.pricing","Pricing")}),(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsxs)(ei.A,{children:[x("models.modelInfo.input","Input"),": \xa5",en.input_cost,"/1M tokens"]}),(0,t.jsxs)(ei.A,{children:[x("models.modelInfo.output","Output"),": \xa5",en.output_cost,"/1M tokens"]})]})]})]}),(0,t.jsxs)("div",{className:"mb-6 text-sm text-gray-500 flex items-center gap-x-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),x("models.modelInfo.createdAt","Created At")," ",en.model_info.created_at?new Date(en.model_info.created_at).toLocaleDateString():x("models.modelInfo.notSet","Not Set")]}),(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),x("models.modelInfo.createdBy","Created By")," ",en.model_info.created_by||x("models.modelInfo.notSet","Not Set")]})]}),(0,t.jsxs)(eS.A,{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)(ed.A,{children:x("models.modelInfo.modelSettings","Model Settings")}),(0,t.jsxs)("div",{className:"flex gap-2",children:[eu&&ec&&!F&&(0,t.jsx)(C.A,{onClick:()=>J(!0),className:"flex items-center",children:x("models.modelInfo.editAutoRouter","Edit Auto Router")}),ec?!F&&(0,t.jsx)(C.A,{onClick:()=>R(!0),className:"flex items-center",children:x("models.modelInfo.editSettings","Edit Settings")}):(0,t.jsx)(T.A,{title:x("models.modelInfo.editPermissionTooltip","Only DB models can be edited. You must be an admin or the creator of the model to edit it."),children:(0,t.jsx)(v.A,{})})]})]}),f?(0,t.jsx)(Y.A,{form:p,onFinish:ep,initialValues:{model_name:f.model_name,litellm_model_name:f.litellm_model_name,api_base:f.litellm_params.api_base,custom_llm_provider:f.litellm_params.custom_llm_provider,organization:f.litellm_params.organization,tpm:f.litellm_params.tpm,rpm:f.litellm_params.rpm,max_retries:f.litellm_params.max_retries,timeout:f.litellm_params.timeout,stream_timeout:f.litellm_params.stream_timeout,input_cost:f.litellm_params.input_cost_per_token?1e6*f.litellm_params.input_cost_per_token:f.model_info?.input_cost_per_token*1e6||null,output_cost:f.litellm_params?.output_cost_per_token?1e6*f.litellm_params.output_cost_per_token:f.model_info?.output_cost_per_token*1e6||null,cache_control:!!f.litellm_params?.cache_control_injection_points,cache_control_injection_points:f.litellm_params?.cache_control_injection_points||[],model_access_group:Array.isArray(f.model_info?.access_groups)?f.model_info.access_groups:[],guardrails:Array.isArray(f.litellm_params?.guardrails)?f.litellm_params.guardrails:[],tags:Array.isArray(f.litellm_params?.tags)?f.litellm_params.tags:[],health_check_model:e_?f.model_info?.health_check_model:null,litellm_extra_params:JSON.stringify(f.litellm_params||{},null,2)},layout:"vertical",onValuesChange:()=>M(!0),children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(ei.A,{className:"font-medium",children:x("models.modelInfo.fields.modelName","模型名称")}),F?(0,t.jsx)(Y.A.Item,{name:"model_name",className:"mb-0",children:(0,t.jsx)(l8.A,{placeholder:x("models.modelInfo.placeholders.modelName","请输入模型名称")})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:f.model_name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(ei.A,{className:"font-medium",children:x("models.modelInfo.fields.silinexModelName","Silinex 模型名称")}),F?(0,t.jsx)(Y.A.Item,{name:"litellm_model_name",className:"mb-0",children:(0,t.jsx)(l8.A,{placeholder:x("models.modelInfo.placeholders.silinexModelName","请输入 Silinex 模型名称")})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:f.litellm_model_name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(ei.A,{className:"font-medium",children:x("models.modelInfo.fields.inputCost","输入成本（每 1M tokens）")}),F?(0,t.jsx)(Y.A.Item,{name:"input_cost",className:"mb-0",children:(0,t.jsx)(lI.A,{placeholder:x("models.modelInfo.placeholders.inputCost","请输入输入成本")})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:f?.litellm_params?.input_cost_per_token?(f.litellm_params?.input_cost_per_token*1e6).toFixed(4):f?.model_info?.input_cost_per_token?(1e6*f.model_info.input_cost_per_token).toFixed(4):x("models.modelInfo.notSet","未设置")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(ei.A,{className:"font-medium",children:x("models.modelInfo.fields.outputCost","输出成本（每 1M tokens）")}),F?(0,t.jsx)(Y.A.Item,{name:"output_cost",className:"mb-0",children:(0,t.jsx)(lI.A,{placeholder:x("models.modelInfo.placeholders.outputCost","请输入输出成本")})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:f?.litellm_params?.output_cost_per_token?(1e6*f.litellm_params.output_cost_per_token).toFixed(4):f?.model_info?.output_cost_per_token?(1e6*f.model_info.output_cost_per_token).toFixed(4):x("models.modelInfo.notSet","未设置")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(ei.A,{className:"font-medium",children:x("models.modelInfo.fields.apiBase","API Base")}),F?(0,t.jsx)(Y.A.Item,{name:"api_base",className:"mb-0",children:(0,t.jsx)(l8.A,{placeholder:x("models.modelInfo.placeholders.apiBase","请输入 API Base")})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:f.litellm_params?.api_base||x("models.modelInfo.notSet","未设置")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(ei.A,{className:"font-medium",children:x("models.modelInfo.fields.customLLMProvider","自定义 LLM 提供商")}),F?(0,t.jsx)(Y.A.Item,{name:"custom_llm_provider",className:"mb-0",children:(0,t.jsx)(l8.A,{placeholder:x("models.modelInfo.placeholders.customLLMProvider","请输入自定义 LLM 提供商")})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:f.litellm_params?.custom_llm_provider||x("models.modelInfo.notSet","未设置")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(ei.A,{className:"font-medium",children:x("models.modelInfo.fields.organization","Organization")}),F?(0,t.jsx)(Y.A.Item,{name:"organization",className:"mb-0",children:(0,t.jsx)(l8.A,{placeholder:x("models.modelInfo.placeholders.organization","请输入 Organization")})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:f.litellm_params?.organization||x("models.modelInfo.notSet","未设置")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(ei.A,{className:"font-medium",children:x("models.modelInfo.fields.tpm","TPM（每分钟 Tokens）")}),F?(0,t.jsx)(Y.A.Item,{name:"tpm",className:"mb-0",children:(0,t.jsx)(lI.A,{placeholder:x("models.modelInfo.placeholders.tpm","请输入 TPM")})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:f.litellm_params?.tpm||x("models.modelInfo.notSet","未设置")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(ei.A,{className:"font-medium",children:x("models.modelInfo.fields.rpm","RPM（每分钟请求数）")}),F?(0,t.jsx)(Y.A.Item,{name:"rpm",className:"mb-0",children:(0,t.jsx)(lI.A,{placeholder:x("models.modelInfo.placeholders.rpm","请输入 RPM")})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:f.litellm_params?.rpm||x("models.modelInfo.notSet","未设置")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(ei.A,{className:"font-medium",children:x("models.modelInfo.fields.maxRetries","最大重试次数")}),F?(0,t.jsx)(Y.A.Item,{name:"max_retries",className:"mb-0",children:(0,t.jsx)(lI.A,{placeholder:x("models.modelInfo.placeholders.maxRetries","请输入最大重试次数")})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:f.litellm_params?.max_retries||x("models.modelInfo.notSet","未设置")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(ei.A,{className:"font-medium",children:x("models.modelInfo.fields.timeout","超时（秒）")}),F?(0,t.jsx)(Y.A.Item,{name:"timeout",className:"mb-0",children:(0,t.jsx)(lI.A,{placeholder:x("models.modelInfo.placeholders.timeout","请输入超时时间")})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:f.litellm_params?.timeout||x("models.modelInfo.notSet","未设置")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(ei.A,{className:"font-medium",children:x("models.modelInfo.fields.streamTimeout","流式超时（秒）")}),F?(0,t.jsx)(Y.A.Item,{name:"stream_timeout",className:"mb-0",children:(0,t.jsx)(lI.A,{placeholder:x("models.modelInfo.placeholders.streamTimeout","请输入流式超时时间")})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:f.litellm_params?.stream_timeout||x("models.modelInfo.notSet","未设置")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(ei.A,{className:"font-medium",children:x("models.modelInfo.fields.modelAccessGroups","模型访问组")}),F?(0,t.jsx)(Y.A.Item,{name:"model_access_group",className:"mb-0",children:(0,t.jsx)(G.A,{mode:"tags",showSearch:!0,placeholder:x("models.modelInfo.placeholders.modelAccessGroups","选择已有分组或输入创建新分组"),optionFilterProp:"children",tokenSeparators:[","],maxTagCount:"responsive",allowClear:!0,style:{width:"100%"},options:d?.map(e=>({value:e,label:e}))})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:f.model_info?.access_groups?Array.isArray(f.model_info.access_groups)?f.model_info.access_groups.length>0?(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:f.model_info.access_groups.map((e,l)=>(0,t.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e},l))}):x("models.modelInfo.messages.noGroupsAssigned","未分配分组"):f.model_info.access_groups:x("models.modelInfo.notSet","未设置")})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(ei.A,{className:"font-medium",children:[x("models.modelInfo.fields.guardrails","防护栏"),(0,t.jsx)(T.A,{title:x("models.modelInfo.tooltips.guardrails","为该模型应用安全防护栏，用于内容过滤或策略约束"),children:(0,t.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/guardrails/quick_start",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(v.A,{style:{marginLeft:"4px"}})})})]}),F?(0,t.jsx)(Y.A.Item,{name:"guardrails",className:"mb-0",children:(0,t.jsx)(G.A,{mode:"tags",showSearch:!0,placeholder:x("models.modelInfo.placeholders.guardrails","选择已有防护栏或输入创建新防护栏"),optionFilterProp:"children",tokenSeparators:[","],maxTagCount:"responsive",allowClear:!0,style:{width:"100%"},options:K.map(e=>({value:e,label:e}))})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:f.litellm_params?.guardrails?Array.isArray(f.litellm_params.guardrails)?f.litellm_params.guardrails.length>0?(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:f.litellm_params.guardrails.map((e,l)=>(0,t.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:e},l))}):x("models.modelInfo.messages.noGuardrailsAssigned","未分配防护栏"):f.litellm_params.guardrails:x("models.modelInfo.notSet","未设置")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(ei.A,{className:"font-medium",children:x("models.modelInfo.fields.tags","标签")}),F?(0,t.jsx)(Y.A.Item,{name:"tags",className:"mb-0",children:(0,t.jsx)(G.A,{mode:"tags",showSearch:!0,placeholder:x("models.modelInfo.placeholders.tags","选择已有标签或输入创建新标签"),optionFilterProp:"children",tokenSeparators:[","],maxTagCount:"responsive",allowClear:!0,style:{width:"100%"},options:Object.values(Z).map(e=>({value:e.name,label:e.name,title:e.description||e.name}))})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:f.litellm_params?.tags?Array.isArray(f.litellm_params.tags)?f.litellm_params.tags.length>0?(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:f.litellm_params.tags.map((e,l)=>(0,t.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:e},l))}):x("models.modelInfo.messages.noTagsAssigned","未分配标签"):f.litellm_params.tags:x("models.modelInfo.notSet","未设置")})]}),e_&&(0,t.jsxs)("div",{children:[(0,t.jsx)(ei.A,{className:"font-medium",children:x("models.modelInfo.fields.healthCheckModel","健康检查模型")}),F?(0,t.jsx)(Y.A.Item,{name:"health_check_model",className:"mb-0",children:(0,t.jsx)(G.A,{showSearch:!0,placeholder:x("models.modelInfo.placeholders.healthCheckModel","选择健康检查模型"),optionFilterProp:"children",allowClear:!0,options:(n=en.litellm_model_name.split("/")[0],er?.data?.filter(e=>e.providers?.includes(n)&&e.model_group!==en.litellm_model_name).map(e=>({value:e.model_group,label:e.model_group}))||[])})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:f.model_info?.health_check_model||x("models.modelInfo.notSet","未设置")})]}),F?(0,t.jsx)(lE,{form:p,showCacheControl:L,onCacheControlChange:e=>O(e)}):(0,t.jsxs)("div",{children:[(0,t.jsx)(ei.A,{className:"font-medium",children:x("models.modelInfo.fields.cacheControl","缓存控制")}),(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:f.litellm_params?.cache_control_injection_points?(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:x("models.modelInfo.messages.enabled","已启用")}),(0,t.jsx)("div",{className:"mt-2",children:f.litellm_params.cache_control_injection_points.map((e,l)=>(0,t.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:[x("models.modelInfo.messages.location","位置"),": ",e.location,",",e.role&&(0,t.jsxs)("span",{children:[" ",x("models.modelInfo.messages.role","角色"),": ",e.role]}),void 0!==e.index&&(0,t.jsxs)("span",{children:[" ",x("models.modelInfo.messages.index","索引"),": ",e.index]})]},l))})]}):x("models.modelInfo.messages.disabled","未启用")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(ei.A,{className:"font-medium",children:x("models.modelInfo.fields.modelInfo","模型信息")}),F?(0,t.jsx)(Y.A.Item,{name:"model_info",className:"mb-0",children:(0,t.jsx)(eG.A.TextArea,{rows:4,placeholder:'{"gpt-4": 100, "claude-v1": 200}',defaultValue:JSON.stringify(en.model_info,null,2)})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(0,t.jsx)("pre",{className:"bg-gray-100 p-2 rounded text-xs overflow-auto mt-1",children:JSON.stringify(f.model_info,null,2)})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(ei.A,{className:"font-medium",children:[x("models.modelInfo.fields.silinexParams","Silinex 参数"),(0,t.jsx)(T.A,{title:x("models.modelInfo.tooltips.silinexParams","用于 litellm.completion() 调用的可选参数。部分参数会被 Silinex 自动追加。"),children:(0,t.jsx)("a",{href:"https://docs.litellm.ai/docs/completion/input",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(v.A,{style:{marginLeft:"4px"}})})})]}),F?(0,t.jsx)(Y.A.Item,{name:"litellm_extra_params",rules:[{validator:lF.iu}],children:(0,t.jsx)(eG.A.TextArea,{rows:4,placeholder:'{ "rpm": 100, "timeout": 0, "stream_timeout": 0 }'})}):(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(0,t.jsx)("pre",{className:"bg-gray-100 p-2 rounded text-xs overflow-auto mt-1",children:JSON.stringify(f.litellm_params,null,2)})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(ei.A,{className:"font-medium",children:x("models.modelInfo.fields.teamId","团队 ID")}),(0,t.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:en.model_info.team_id||x("models.modelInfo.notSet","未设置")})]})]}),F&&(0,t.jsxs)("div",{className:"mt-6 flex justify-end gap-2",children:[(0,t.jsx)(C.A,{variant:"secondary",onClick:()=>{p.resetFields(),M(!1),R(!1)},disabled:I,children:x("models.common.cancel","Cancel")}),(0,t.jsx)(C.A,{variant:"primary",onClick:()=>p.submit(),loading:I,children:x("models.modelInfo.saveChanges","Save Changes")})]})]})}):(0,t.jsx)(ei.A,{children:x("models.modelInfo.loading","Loading...")})]})]}),(0,t.jsx)(V.A,{children:(0,t.jsx)(eS.A,{children:(0,t.jsx)("pre",{className:"bg-gray-100 p-4 rounded text-xs overflow-auto",children:JSON.stringify(en,null,2)})})})]})]}),(0,t.jsx)(eP.A,{isOpen:_,title:"Delete Model",alertMessage:"This action cannot be undone.",message:"Are you sure you want to delete this model?",resourceInformationTitle:"Model Information",resourceInformation:[{label:"Model Name",value:en?.model_name||"Not Set"},{label:"Silinex Model Name",value:en?.litellm_model_name||"Not Set"},{label:"Provider",value:en?.provider||"Not Set"},{label:"Created By",value:en?.model_info?.created_by||"Not Set"}],onCancel:()=>y(!1),onOk:ef,confirmLoading:b}),k&&!eh?(0,t.jsx)(sa,{isVisible:k,onCancel:()=>w(!1),onAddCredential:ex,existingCredential:P,setIsCredentialModalOpen:w}):(0,t.jsx)(Q.A,{open:k,onCancel:()=>w(!1),title:"Using Existing Credential",children:(0,t.jsx)(ei.A,{children:en.litellm_params.litellm_credential_name})}),(0,t.jsx)(sl,{isVisible:U,onCancel:()=>J(!1),onSuccess:e=>{j(e),i&&i(e)},modelData:f||en,accessToken:s||"",userRole:o||""})]})}var so=s(65150),si=s(47626);let sd=({premiumUser:e,teams:l})=>{let{t:s}=(0,c.o)(),{accessToken:r,token:o,userRole:d,userId:x}=(0,i.A)(),[p]=Y.A.useForm(),[f,j]=(0,g.useState)(""),[_,y]=(0,g.useState)([]),[b,v]=(0,g.useState)(eN.bb.Anthropic),[A,N]=(0,g.useState)(null),[C,S]=(0,g.useState)(null),[M,I]=(0,g.useState)(null),[T,E]=(0,g.useState)(0),[F,R]=(0,g.useState)({}),[P,z]=(0,g.useState)(!1),[L,O]=(0,g.useState)(null),[B,$]=(0,g.useState)(null),[G,H]=(0,g.useState)(0),U=(0,e2.jE)(),{data:J,isLoading:K,refetch:X}=(0,u.oE)(),{data:Q,isLoading:Z}=(0,m.o)(),{data:ee,isLoading:el}=n(),es=ee?.credentials||[],{data:er,isLoading:eo}=(0,h.f)(),ed=(0,g.useMemo)(()=>{if(!J?.data)return[];let e=new Set;for(let l of J.data)e.add(l.model_name);return Array.from(e).sort()},[J?.data]),en=(0,g.useMemo)(()=>{if(!J?.data)return[];let e=new Set;for(let l of J.data){let s=l.model_info;if(s?.access_groups)for(let l of s.access_groups)e.add(l)}return Array.from(e)},[J?.data]),ec=(0,g.useMemo)(()=>J?.data?J.data.map(e=>e.model_name):[],[J?.data]),eu=(0,g.useMemo)(()=>J?.data?J.data.map(e=>e.model_info?.id).filter(e=>!!e):[],[J?.data]),eh=e=>null!=Q&&"object"==typeof Q&&e in Q?Q[e].litellm_provider:"openai",ex=(0,g.useMemo)(()=>J?.data?et(J,eh):{data:[]},[J?.data,eh]),ep=d&&(0,e0.G9)(d),eg=d&&e0.UX.includes(d),ef=x&&(0,e0.a8)(l,x),ej=eg&&er?.values?.disable_model_add_for_internal_users===!0,e_=!ep&&(ej||!ef),ey={name:"file",accept:".json",pastable:!1,beforeUpload:e=>{if("application/json"===e.type){let l=new FileReader;l.onload=e=>{if(e.target){let l=e.target.result;p.setFieldsValue({vertex_credentials:l})}},l.readAsText(e)}return!1},onChange(e){"done"===e.file.status?W.Ay.success(s("models.notifications.fileUploaded").replace("{fileName}",e.file.name)):"error"===e.file.status&&W.Ay.fromBackend(s("models.notifications.fileUploadFailed").replace("{fileName}",e.file.name))}},eb=()=>{j(new Date().toLocaleString()),U.invalidateQueries({queryKey:["models","list"]}),X()},ev=async()=>{if(r)try{let e={router_settings:{}};"global"===A?(M&&(e.router_settings.retry_policy=M),W.Ay.success(s("models.notifications.globalRetrySaved"))):(C&&(e.router_settings.model_group_retry_policy=C),W.Ay.success(s("models.notifications.retrySaved").replace("{modelGroup}",A||""))),await (0,a.setCallbacksCall)(r,e)}catch(e){W.Ay.fromBackend(s("models.notifications.retryFailed"))}};if((0,g.useEffect)(()=>{if(!r||!o||!d||!x||!J)return;let e=async()=>{try{let e=(await (0,a.getCallbacksCall)(r,x,d)).router_settings,l=e.model_group_retry_policy,s=e.num_retries;S(l),I(e.retry_policy),E(s);let t=e.model_group_alias||{};R(t)}catch(e){console.error("Error fetching model data:",e)}};r&&o&&d&&x&&J&&e()},[r,o,d,x,J]),d&&"Admin Viewer"==d){let{Title:e,Paragraph:l}=w.A;return(0,t.jsxs)("div",{children:[(0,t.jsx)(e,{level:1,children:s("models.accessDenied.title")}),(0,t.jsx)(l,{children:s("models.accessDenied.message")})]})}let eC=async()=>{try{let e=await p.validateFields();await ek(e,r,p,eb)}catch(l){let e=l.errorFields?.map(e=>`${e.name.join(".")}: ${e.errors.join(", ")}`).join(" | ")||"Unknown validation error";W.Ay.fromBackend(s("models.validation.requiredFields").replace("{error}",e))}};return(Object.keys(eN.bb).find(e=>eN.bb[e]===b),B)?(0,t.jsx)("div",{className:"w-full h-full",children:(0,t.jsx)(si.A,{teamId:B,onClose:()=>$(null),accessToken:r,is_team_admin:"Admin"===d,is_proxy_admin:"Proxy Admin"===d,userModels:ec,editTeam:!1,onUpdate:eb,premiumUser:e})}):(0,t.jsx)("div",{className:"w-full mx-4 h-[75vh]",children:(0,t.jsx)(D.A,{numItems:1,className:"gap-2 p-8 w-full mt-2",children:(0,t.jsxs)(e4.A,{numColSpan:1,className:"flex flex-col gap-2",children:[(0,t.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:s("models.title")}),e0.CX.includes(d)?(0,t.jsx)("p",{className:"text-sm text-gray-600",children:s("models.description.admin")}):(0,t.jsx)("p",{className:"text-sm text-gray-600",children:s("models.description.teamAdmin")})]})}),L&&!(K||Z||el||eo)?(0,t.jsx)(sr,{modelId:L,onClose:()=>{O(null)},accessToken:r,userID:x,userRole:d,onModelUpdate:e=>{U.invalidateQueries({queryKey:["models","list"]}),eb()},modelAccessGroups:en}):(0,t.jsxs)(e6.A,{index:G,onIndexChange:H,className:"gap-2 h-[75vh] w-full ",children:[(0,t.jsxs)(e3.A,{className:"flex justify-between mt-2 w-full items-center",children:[(0,t.jsxs)("div",{className:"flex",children:[e0.CX.includes(d)?(0,t.jsx)(e5.A,{children:s("models.tabs.allModels")}):(0,t.jsx)(e5.A,{children:s("models.tabs.yourModels")}),!e_&&(0,t.jsx)(e5.A,{children:s("models.tabs.addModel")}),e0.CX.includes(d)&&(0,t.jsx)(e5.A,{children:s("models.tabs.credentials")}),e0.CX.includes(d)&&(0,t.jsx)(e5.A,{children:s("models.tabs.passThrough")}),e0.CX.includes(d)&&(0,t.jsx)(e5.A,{children:s("models.tabs.healthCheck")}),e0.CX.includes(d)&&(0,t.jsx)(e5.A,{children:s("models.tabs.retrySettings")}),e0.CX.includes(d)&&(0,t.jsx)(e5.A,{children:s("models.tabs.modelAlias")}),e0.CX.includes(d)&&(0,t.jsx)(e5.A,{children:s("models.tabs.priceReload")})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[f&&(0,t.jsxs)(ei.A,{children:[s("models.lastRefreshed"),f]}),(0,t.jsx)(k.A,{icon:e1.A,variant:"shadow",size:"xs",className:"self-center",onClick:eb})]})]}),(0,t.jsxs)(e8.A,{children:[(0,t.jsx)(ea,{selectedModelGroup:A,setSelectedModelGroup:N,availableModelGroups:ed,availableModelAccessGroups:en,setSelectedModelId:O,setSelectedTeamId:$}),!e_&&(0,t.jsx)(V.A,{className:"h-full",children:(0,t.jsx)(lH,{form:p,handleOk:eC,selectedProvider:b,setSelectedProvider:v,providerModels:_,setProviderModelsFn:e=>{y((0,eN.SM)(e,Q))},getPlaceholder:eN.G_,uploadProps:ey,showAdvancedSettings:P,setShowAdvancedSettings:z,teams:l,credentials:es,accessToken:r,userRole:d})}),(0,t.jsx)(V.A,{children:(0,t.jsx)(eZ,{uploadProps:ey})}),(0,t.jsx)(V.A,{children:(0,t.jsx)(so.A,{accessToken:r,userRole:d,userID:x,modelData:ex,premiumUser:e})}),(0,t.jsx)(V.A,{children:(0,t.jsx)(lQ,{accessToken:r,modelData:ex,all_models_on_proxy:eu,getDisplayModelName:q,setSelectedModelId:O,teams:l})}),(0,t.jsx)(em,{selectedModelGroup:A,setSelectedModelGroup:N,availableModelGroups:ed,globalRetryPolicy:M,setGlobalRetryPolicy:I,defaultRetry:T,modelGroupRetryPolicy:C,setModelGroupRetryPolicy:S,handleSaveRetrySettings:ev}),(0,t.jsx)(V.A,{children:(0,t.jsx)(l5,{accessToken:r,initialModelGroupAlias:F,onAliasUpdate:R})}),(0,t.jsx)(eA,{})]})]})]})})})}},10280:(e,l,s)=>{s.d(l,{h:()=>c});var t=s(95155);s(12115);var a=s(6808),r=s(87278),o=s(14992),i=s(17293),d=s(87830),n=s(73946);let c=({sortState:e,onSortChange:l})=>{let s=[{key:"asc",label:"Ascending",icon:(0,t.jsx)(o.A,{className:"h-4 w-4"})},{key:"desc",label:"Descending",icon:(0,t.jsx)(i.A,{className:"h-4 w-4"})},{key:"reset",label:"Reset",icon:(0,t.jsx)(d.A,{className:"h-4 w-4"})}];return(0,t.jsx)(a.A,{menu:{items:s,onClick:({key:e})=>{"asc"===e?l("asc"):"desc"===e?l("desc"):"reset"===e&&l(!1)},selectable:!0,selectedKeys:e?[e]:[]},trigger:["click"],autoAdjustOverflow:!0,children:(0,t.jsx)(r.Ay,{type:"text",onClick:e=>e.stopPropagation(),icon:"asc"===e?(0,t.jsx)(o.A,{className:"h-4 w-4"}):"desc"===e?(0,t.jsx)(i.A,{className:"h-4 w-4"}):(0,t.jsx)(n.A,{className:"h-4 w-4"}),className:e?"text-blue-500 hover:text-blue-600":"text-gray-400 hover:text-blue-500"})})}},51190:(e,l,s)=>{s.d(l,{$S:()=>c,By:()=>m,Fy:()=>g,sM:()=>p});var t,a,r=s(26708),o=s(48934),i=s(90078),d=s(42696),n=s(28436),c=((t={}).GENERAL_SETTINGS="general_settings",t),m=((a={}).MAXIMUM_SPEND_LOGS_RETENTION_PERIOD="maximum_spend_logs_retention_period",a);let u=async(e,l)=>{try{let s=n.proxyBaseUrl?`${n.proxyBaseUrl}/config/list?config_type=${l}`:`/config/list?config_type=${l}`,t=await fetch(s,{method:"GET",headers:{[(0,n.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok){let e=await t.json(),l=(0,n.deriveErrorMessage)(e);throw(0,n.handleError)(l),Error(l)}return await t.json()}catch(e){throw console.error(`Failed to get proxy config for ${l}:`,e),e}},h=(0,i.D)("proxyConfig"),x=async(e,l)=>{try{let s=n.proxyBaseUrl?`${n.proxyBaseUrl}/config/field/delete`:"/config/field/delete",t=await fetch(s,{method:"POST",headers:{[(0,n.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(l)});if(!t.ok){let e=await t.json(),l=(0,n.deriveErrorMessage)(e);throw(0,n.handleError)(l),Error(l)}return await t.json()}catch(e){throw console.error(`Failed to delete proxy config field ${l.field_name}:`,e),e}},p=e=>{let{accessToken:l}=(0,d.A)();return(0,r.I)({queryKey:h.list({filters:{configType:e}}),queryFn:async()=>await u(l,e),enabled:!!l})},g=()=>{let{accessToken:e}=(0,d.A)();return(0,o.n)({mutationFn:async l=>{if(!e)throw Error("Access token is required");return await x(e,l)}})}},53672:(e,l,s)=>{s.d(l,{b:()=>d});var t=s(95155),a=s(12115),r=s(37621),o=s(3134),i=s(48658);function d({data:e=[],columns:l,onRowClick:s,renderSubComponent:d,renderChildRows:n,getRowCanExpand:c,isLoading:m=!1,loadingMessage:u="\uD83D\uDE85 Loading logs...",noDataMessage:h="No logs found"}){let x=!!(d||n)&&!!c,p=(0,r.N4)({data:e,columns:l,...x&&{getRowCanExpand:c},getRowId:(e,l)=>e?.request_id??String(l),getCoreRowModel:(0,o.HT)(),...x&&{getExpandedRowModel:(0,o.D0)()}});return(0,t.jsx)("div",{className:"rounded-lg custom-border overflow-x-auto w-full max-w-full box-border",children:(0,t.jsxs)(i.XI,{className:"[&_td]:py-0.5 [&_th]:py-1 table-fixed w-full box-border",style:{minWidth:"400px"},children:[(0,t.jsx)(i.nd,{children:p.getHeaderGroups().map(e=>(0,t.jsx)(i.Hj,{children:e.headers.map(e=>(0,t.jsx)(i.M_,{className:"py-1 h-8",children:e.isPlaceholder?null:(0,r.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,t.jsx)(i.BF,{children:m?(0,t.jsx)(i.Hj,{children:(0,t.jsx)(i.nA,{colSpan:l.length,className:"h-8 text-center",children:(0,t.jsx)("div",{className:"text-center text-gray-500",children:(0,t.jsx)("p",{children:u})})})}):p.getRowModel().rows.length>0?p.getRowModel().rows.map(e=>(0,t.jsxs)(a.Fragment,{children:[(0,t.jsx)(i.Hj,{className:`h-8 ${s?"cursor-pointer hover:bg-gray-50":""}`,onClick:()=>s?.(e.original),children:e.getVisibleCells().map(e=>(0,t.jsx)(i.nA,{className:"py-0.5 max-h-8 overflow-hidden text-ellipsis whitespace-nowrap",children:(0,r.Kv)(e.column.columnDef.cell,e.getContext())},e.id))}),x&&e.getIsExpanded()&&n&&n({row:e}),x&&e.getIsExpanded()&&d&&!n&&(0,t.jsx)(i.Hj,{children:(0,t.jsx)(i.nA,{colSpan:e.getVisibleCells().length,className:"p-0",children:(0,t.jsx)("div",{className:"w-full max-w-full overflow-hidden box-border",children:d({row:e})})})})]},e.id)):(0,t.jsx)(i.Hj,{children:(0,t.jsx)(i.nA,{colSpan:l.length,className:"h-8 text-center",children:(0,t.jsx)("div",{className:"text-center text-gray-500",children:(0,t.jsx)("p",{children:h})})})})})]})})}},65150:(e,l,s)=>{s.d(l,{A:()=>ei});var t=s(95155),a=s(12115),r=s(38983),o=s(19602),i=s(75892),d=s(64628),n=s(28436),c=s(22277),m=s(26313),u=s(55012),h=s(55726),x=s(45588),p=s(14290),g=s(88636),f=s(34487),j=s(42837),_=s(39210),y=s(23060),b=s(25387),v=s(3373),A=s(99876),N=s(66904),C=s(93076),k=s(94300),w=s(54481),S=s(87278),M=s(73896),I=s(22864),T=s(73648);let E=({value:e={},onChange:l})=>{let[s,r]=(0,a.useState)(Object.entries(e)),o=(e,t,a)=>{let o=[...s];o[e]=[t,a],r(o),l?.(Object.fromEntries(o))};return(0,t.jsxs)("div",{children:[s.map(([e,a],i)=>(0,t.jsxs)(w.A,{style:{display:"flex",marginBottom:8},align:"center",children:[(0,t.jsx)(T.k,{placeholder:"Header Name",value:e,onChange:e=>o(i,e.target.value,a)}),(0,t.jsx)(T.k,{placeholder:"Header Value",value:a,onChange:l=>o(i,e,l.target.value)}),(0,t.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:(0,t.jsx)(M.A,{onClick:()=>{let e;r(e=s.filter((e,l)=>l!==i)),l?.(Object.fromEntries(e))},style:{cursor:"pointer"}})})]},i)),(0,t.jsx)(S.Ay,{type:"dashed",onClick:()=>{r([...s,["",""]])},icon:(0,t.jsx)(I.A,{}),children:"Add Header"})]})},F=({value:e={},onChange:l})=>{let[s,r]=(0,a.useState)(Object.entries(e)),o=(e,t,a)=>{let o=[...s];o[e]=[t,a],r(o),l?.(Object.fromEntries(o))};return(0,t.jsxs)("div",{children:[s.map(([e,a],i)=>(0,t.jsxs)(w.A,{style:{display:"flex",marginBottom:8},align:"center",children:[(0,t.jsx)(T.k,{placeholder:"Parameter Name (e.g., version)",value:e,onChange:e=>o(i,e.target.value,a)}),(0,t.jsx)(T.k,{placeholder:"Parameter Value (e.g., v1)",value:a,onChange:l=>o(i,e,l.target.value)}),(0,t.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:(0,t.jsx)(M.A,{onClick:()=>{let e;r(e=s.filter((e,l)=>l!==i)),l?.(Object.fromEntries(e))},style:{cursor:"pointer"}})})]},i)),(0,t.jsx)(S.Ay,{type:"dashed",onClick:()=>{r([...s,["",""]])},icon:(0,t.jsx)(I.A,{}),children:"Add Query Parameter"})]})};var R=s(45960);let P=({pathValue:e,targetValue:l,includeSubpath:s})=>{let a=(0,n.getProxyBaseUrl)();return e&&l?(0,t.jsxs)(j.A,{className:"p-5",children:[(0,t.jsx)(d.A,{className:"text-lg font-semibold text-gray-900 mb-2",children:"Route Preview"}),(0,t.jsx)(_.A,{className:"text-gray-600 mb-5",children:"How your requests will be routed"}),(0,t.jsxs)("div",{className:"space-y-5",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-base font-semibold text-gray-900 mb-3",children:"Basic routing:"}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 bg-gray-50 border border-gray-200 rounded-lg p-3",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Your endpoint"}),(0,t.jsx)("code",{className:"font-mono text-sm text-gray-900",children:e?`${a}${e}`:""})]}),(0,t.jsx)("div",{className:"text-gray-400",children:(0,t.jsx)(R.A,{className:"text-lg"})}),(0,t.jsxs)("div",{className:"flex-1 bg-gray-50 border border-gray-200 rounded-lg p-3",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Forwards to"}),(0,t.jsx)("code",{className:"font-mono text-sm text-gray-900",children:l})]})]})]}),s&&(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-base font-semibold text-gray-900 mb-3",children:"With subpaths:"}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 bg-gray-50 border border-gray-200 rounded-lg p-3",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Your endpoint + subpath"}),(0,t.jsxs)("code",{className:"font-mono text-sm text-gray-900",children:[e&&`${a}${e}`,(0,t.jsx)("span",{className:"text-blue-600",children:"/v1/text-to-image/base/model"})]})]}),(0,t.jsx)("div",{className:"text-gray-400",children:(0,t.jsx)(R.A,{className:"text-lg"})}),(0,t.jsxs)("div",{className:"flex-1 bg-gray-50 border border-gray-200 rounded-lg p-3",children:[(0,t.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Forwards to"}),(0,t.jsxs)("code",{className:"font-mono text-sm text-gray-900",children:[l,(0,t.jsx)("span",{className:"text-blue-600",children:"/v1/text-to-image/base/model"})]})]})]}),(0,t.jsxs)("div",{className:"mt-3 text-sm text-gray-600",children:["Any path after ",e," will be appended to the target URL"]})]})}),!s&&(0,t.jsx)("div",{className:"mt-4 p-3 bg-blue-50 rounded-md border border-blue-200",children:(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)(k.A,{className:"text-blue-500 mt-0.5 mr-2 flex-shrink-0"}),(0,t.jsxs)("div",{className:"text-sm text-blue-700",children:[(0,t.jsx)("span",{className:"font-medium",children:"Not seeing the routing you wanted?"})," Try enabling - Include Subpaths - above - this allows subroutes like"," ",(0,t.jsx)("code",{className:"bg-blue-100 px-1 py-0.5 rounded font-mono text-xs",children:"/api/v1/models"})," to be forwarded automatically."]})]})})]})]}):null};var z=s(12120),L=s(16989);let O=({premiumUser:e,authEnabled:l,onAuthChange:s})=>(0,t.jsxs)(j.A,{className:"p-6",children:[(0,t.jsx)(d.A,{className:"text-lg font-semibold text-gray-900 mb-2",children:"Security"}),(0,t.jsx)(_.A,{className:"text-gray-600 mb-4",children:"When enabled, requests to this endpoint will require a valid Silinex Virtual Key"}),e?(0,t.jsx)(b.A.Item,{name:"auth",valuePropName:"checked",className:"mb-0",children:(0,t.jsx)(L.A,{checked:l,onChange:e=>{s(e)}})}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center mb-3",children:[(0,t.jsx)(L.A,{disabled:!0,checked:!1,style:{outline:"2px solid #d1d5db",outlineOffset:"2px"}}),(0,t.jsx)("span",{className:"ml-2 text-sm text-gray-400",children:"Authentication (Premium)"})]}),(0,t.jsx)("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,t.jsxs)(i.A,{className:"text-sm text-yellow-800",children:["Setting authentication for pass-through endpoints is a Silinex Enterprise feature. Get a trial key"," ",(0,t.jsx)("a",{href:"https://www.litellm.ai/#pricing",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"here"}),"."]})})]})]});var q=s(87433);let B=({accessToken:e,value:l={},onChange:s,disabled:r=!1})=>{let[o,i]=(0,a.useState)(Object.keys(l)),[n,m]=(0,a.useState)(l);(0,a.useEffect)(()=>{m(l),i(Object.keys(l))},[l]);let u=(e,l,t)=>{let a=n[e]||{},r={...n,[e]:{...a,[l]:t.length>0?t:void 0}};r[e]?.request_fields||r[e]?.response_fields||(r[e]=null),m(r),s&&s(r)};return(0,t.jsxs)(j.A,{className:"p-6",children:[(0,t.jsx)(d.A,{className:"text-lg font-semibold text-gray-900 mb-2",children:"Guardrails"}),(0,t.jsx)(_.A,{className:"text-gray-600 mb-6",children:"Configure guardrails to enforce policies on requests and responses. Guardrails are opt-in for passthrough endpoints."}),(0,t.jsx)(A.A,{message:(0,t.jsxs)("span",{children:["Field-Level Targeting"," ",(0,t.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/pass_through_guardrails#field-level-targeting",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"(Learn More)"})]}),description:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{children:"Optionally specify which fields to check. If left empty, the entire request/response is sent to the guardrail."}),(0,t.jsxs)("div",{className:"text-xs space-y-1 mt-2",children:[(0,t.jsx)("div",{className:"font-medium",children:"Common Examples:"}),(0,t.jsxs)("div",{children:["• ",(0,t.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:"query"})," - Single field"]}),(0,t.jsxs)("div",{children:["• ",(0,t.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:"documents[*].text"})," - All text in documents array"]}),(0,t.jsxs)("div",{children:["• ",(0,t.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:"messages[*].content"})," - All message contents"]})]})]}),type:"info",showIcon:!0,className:"mb-4"}),(0,t.jsx)(b.A.Item,{label:(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["Select Guardrails",(0,t.jsx)(c.A,{title:"Choose which guardrails should run on this endpoint. Org/team/key level guardrails will also be included.",children:(0,t.jsx)(k.A,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),children:(0,t.jsx)(q.A,{accessToken:e,value:o,onChange:e=>{i(e);let l={};e.forEach(e=>{l[e]=n[e]||null}),m(l),s&&s(l)},disabled:r})}),o.length>0&&(0,t.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Field Targeting (Optional)"}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"\uD83D\uDCA1 Tip: Leave empty to check entire payload"})]}),o.map(e=>(0,t.jsxs)(j.A,{className:"p-4 bg-gray-50",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900 mb-3",children:e}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsxs)("label",{className:"text-xs text-gray-600 flex items-center",children:["Request Fields (pre_call)",(0,t.jsx)(c.A,{title:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium mb-1",children:"Specify which request fields to check"}),(0,t.jsxs)("div",{className:"text-xs space-y-1",children:[(0,t.jsx)("div",{children:"Examples:"}),(0,t.jsx)("div",{children:"• query"}),(0,t.jsx)("div",{children:"• documents[*].text"}),(0,t.jsx)("div",{children:"• messages[*].content"})]})]}),children:(0,t.jsx)(k.A,{className:"ml-1 text-gray-400"})})]}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{let l=n[e]?.request_fields||[];u(e,"request_fields",[...l,"query"])},className:"text-xs px-2 py-1 bg-white border border-gray-300 rounded hover:bg-gray-50",disabled:r,children:"+ query"}),(0,t.jsx)("button",{type:"button",onClick:()=>{let l=n[e]?.request_fields||[];u(e,"request_fields",[...l,"documents[*]"])},className:"text-xs px-2 py-1 bg-white border border-gray-300 rounded hover:bg-gray-50",disabled:r,children:"+ documents[*]"})]})]}),(0,t.jsx)(y.A,{mode:"tags",style:{width:"100%"},placeholder:"Type field name or use + buttons above (e.g., query, documents[*].text)",value:n[e]?.request_fields||[],onChange:l=>u(e,"request_fields",l),disabled:r,tokenSeparators:[","]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsxs)("label",{className:"text-xs text-gray-600 flex items-center",children:["Response Fields (post_call)",(0,t.jsx)(c.A,{title:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium mb-1",children:"Specify which response fields to check"}),(0,t.jsxs)("div",{className:"text-xs space-y-1",children:[(0,t.jsx)("div",{children:"Examples:"}),(0,t.jsx)("div",{children:"• results[*].text"}),(0,t.jsx)("div",{children:"• choices[*].message.content"})]})]}),children:(0,t.jsx)(k.A,{className:"ml-1 text-gray-400"})})]}),(0,t.jsx)("div",{className:"flex gap-1",children:(0,t.jsx)("button",{type:"button",onClick:()=>{let l=n[e]?.response_fields||[];u(e,"response_fields",[...l,"results[*]"])},className:"text-xs px-2 py-1 bg-white border border-gray-300 rounded hover:bg-gray-50",disabled:r,children:"+ results[*]"})})]}),(0,t.jsx)(y.A,{mode:"tags",style:{width:"100%"},placeholder:"Type field name or use + buttons above (e.g., results[*].text)",value:n[e]?.response_fields||[],onChange:l=>u(e,"response_fields",l),disabled:r,tokenSeparators:[","]})]})]})]},e))]})]})},{Option:D}=y.A,V=["GET","POST","PUT","DELETE","PATCH"],$=({accessToken:e,setPassThroughItems:l,passThroughItems:s,premiumUser:o=!1})=>{let{t:i}=(0,p.o)(),[m]=b.A.useForm(),[u,h]=(0,a.useState)(!1),[x,w]=(0,a.useState)(!1),[S,M]=(0,a.useState)(""),[I,T]=(0,a.useState)(""),[R,L]=(0,a.useState)(""),[q,$]=(0,a.useState)(!0),[G,H]=(0,a.useState)(!1),[U,J]=(0,a.useState)([]),[K,W]=(0,a.useState)({}),X=()=>{m.resetFields(),T(""),L(""),$(!0),J([]),W({}),h(!1)},Y=async t=>{console.log("addPassThrough called with:",t),w(!0);try{!o&&"auth"in t&&delete t.auth,K&&Object.keys(K).length>0&&(t.guardrails=K),U&&U.length>0&&(t.methods=U),console.log(`formValues: ${JSON.stringify(t)}`);let a=(await (0,n.createPassThroughEndpoint)(e,t)).endpoints[0],r=[...s,a];l(r),z.Ay.success(i("models.passThrough.createdSuccessfully")),m.resetFields(),T(""),L(""),$(!0),J([]),W({}),h(!1)}catch(e){z.Ay.fromBackend(i("models.passThrough.createError")+e)}finally{w(!1)}};return(0,t.jsxs)("div",{children:[(0,t.jsx)(r.A,{className:"mx-auto mb-4 mt-4",onClick:()=>h(!0),children:i("models.passThrough.addButton")}),(0,t.jsx)(v.A,{title:(0,t.jsxs)("div",{className:"flex items-center space-x-3 pb-4 border-b border-gray-100",children:[(0,t.jsx)(C.A,{className:"text-xl text-blue-500"}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:i("models.passThrough.addTitle")})]}),open:u,width:1e3,onCancel:X,footer:null,className:"top-8",styles:{body:{padding:"24px"},header:{padding:"24px 24px 0 24px",border:"none"}},children:(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsx)(A.A,{message:i("models.passThrough.whatIsTitle"),description:i("models.passThrough.whatIsDescription"),type:"info",showIcon:!0,className:"mb-6"}),(0,t.jsxs)(b.A,{form:m,onFinish:Y,layout:"vertical",className:"space-y-6",initialValues:{include_subpath:!0,path:I,target:R},children:[(0,t.jsxs)(j.A,{className:"p-5",children:[(0,t.jsx)(d.A,{className:"text-lg font-semibold text-gray-900 mb-2",children:"Route Configuration"}),(0,t.jsx)(_.A,{className:"text-gray-600 mb-5",children:"Configure how requests to your domain will be forwarded to the target API"}),(0,t.jsxs)("div",{className:"space-y-5",children:[(0,t.jsx)(b.A.Item,{label:(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Path Prefix"}),name:"path",rules:[{required:!0,message:"Path is required",pattern:/^\//}],extra:(0,t.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Example: /bria, /adobe-photoshop, /elasticsearch"}),className:"mb-4",children:(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)(f.A,{placeholder:"bria",value:I,onChange:e=>{var l;let s;return s=l=e.target.value,void(l&&!l.startsWith("/")&&(s="/"+l),T(s),m.setFieldsValue({path:s}))},className:"flex-1"})})}),(0,t.jsx)(b.A.Item,{label:(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Target URL"}),name:"target",rules:[{required:!0,message:"Target URL is required"},{type:"url",message:"Please enter a valid URL"}],extra:(0,t.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Example:https://engine.prod.bria-api.com"}),className:"mb-4",children:(0,t.jsx)(f.A,{placeholder:"https://engine.prod.bria-api.com",value:R,onChange:e=>{L(e.target.value),m.setFieldsValue({target:e.target.value})}})}),(0,t.jsx)(b.A.Item,{label:(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["HTTP Methods (Optional)",(0,t.jsx)(c.A,{title:"Select specific HTTP methods. Leave empty to support all methods (GET, POST, PUT, DELETE, PATCH). Useful when the same path needs different targets for different methods.",children:(0,t.jsx)(k.A,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),name:"methods",extra:(0,t.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:0===U.length?"All HTTP methods supported (default)":`Only ${U.join(", ")} requests will be routed to this endpoint`}),className:"mb-4",children:(0,t.jsx)(y.A,{mode:"multiple",placeholder:"Select methods (leave empty for all)",value:U,onChange:J,allowClear:!0,style:{width:"100%"},children:V.map(e=>(0,t.jsx)(D,{value:e,children:e},e))})}),(0,t.jsxs)("div",{className:"flex items-center justify-between py-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Include Subpaths"}),(0,t.jsx)("div",{className:"text-xs text-gray-500 mt-0.5",children:"Forward all subpaths to the target API (recommended for REST APIs)"})]}),(0,t.jsx)(b.A.Item,{name:"include_subpath",valuePropName:"checked",className:"mb-0",children:(0,t.jsx)(g.A,{checked:q,onChange:$})})]})]})]}),(0,t.jsx)(P,{pathValue:I,targetValue:R,includeSubpath:q}),(0,t.jsxs)(j.A,{className:"p-6",children:[(0,t.jsx)(d.A,{className:"text-lg font-semibold text-gray-900 mb-2",children:"Headers"}),(0,t.jsx)(_.A,{className:"text-gray-600 mb-6",children:"Add headers that will be sent with every request to the target API"}),(0,t.jsx)(b.A.Item,{label:(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["Authentication Headers",(0,t.jsx)(c.A,{title:"Authentication and other headers to forward with requests",children:(0,t.jsx)(k.A,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),name:"headers",rules:[{required:!0,message:"Please configure the headers"}],extra:(0,t.jsxs)("div",{className:"text-xs text-gray-500 mt-2",children:[(0,t.jsx)("div",{className:"font-medium mb-1",children:"Add authentication tokens and other required headers"}),(0,t.jsx)("div",{children:"Common examples: auth_token, Authorization, x-api-key"})]}),children:(0,t.jsx)(E,{})})]}),(0,t.jsxs)(j.A,{className:"p-6",children:[(0,t.jsx)(d.A,{className:"text-lg font-semibold text-gray-900 mb-2",children:"Default Query Parameters"}),(0,t.jsx)(_.A,{className:"text-gray-600 mb-6",children:"Add query parameters that will be automatically sent with every request to the target API"}),(0,t.jsx)(b.A.Item,{label:(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["Default Query Parameters (Optional)",(0,t.jsx)(c.A,{title:"Query parameters that will be added to all requests. Clients can override these by providing their own values.",children:(0,t.jsx)(k.A,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),name:"default_query_params",extra:(0,t.jsxs)("div",{className:"text-xs text-gray-500 mt-2",children:[(0,t.jsx)("div",{className:"font-medium mb-1",children:"Parameters are sent with all GET, POST, PUT, PATCH requests"}),(0,t.jsx)("div",{children:"Client parameters override defaults. Examples: version=v1, format=json, key=default"})]}),children:(0,t.jsx)(F,{})})]}),(0,t.jsx)(O,{premiumUser:o,authEnabled:G,onAuthChange:e=>{H(e),m.setFieldsValue({auth:e})}}),(0,t.jsx)(B,{accessToken:e,value:K,onChange:W}),(0,t.jsxs)(j.A,{className:"p-6",children:[(0,t.jsx)(d.A,{className:"text-lg font-semibold text-gray-900 mb-2",children:"Billing"}),(0,t.jsx)(_.A,{className:"text-gray-600 mb-6",children:"Optional cost tracking for this endpoint"}),(0,t.jsx)(b.A.Item,{label:(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["每次请求成本",(0,t.jsx)(c.A,{title:"Optional: Track costs for requests to this endpoint",children:(0,t.jsx)(k.A,{className:"ml-2 text-gray-400 hover:text-gray-600"})})]}),name:"cost_per_request",extra:(0,t.jsx)("div",{className:"text-xs text-gray-500 mt-2",children:"The cost charged for each request through this endpoint"}),children:(0,t.jsx)(N.A,{min:0,step:.001,precision:4,placeholder:"2.0000",size:"large"})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t border-gray-100",children:[(0,t.jsx)(r.A,{variant:"secondary",onClick:X,children:i("models.common.cancel")}),(0,t.jsx)(r.A,{variant:"primary",loading:x,onClick:()=>{console.log("Submit button clicked"),m.submit()},children:x?i("models.passThrough.creating"):i("models.passThrough.addTitle")})]})]})]})})]})};var G=s(34254),H=s(13121),U=s(2212),J=s(87927),K=s(56680),W=s(73806),X=s(79363),Y=s(91808),Q=s(8208),Z=s(15411),ee=s(7915);let el=["GET","POST","PUT","DELETE","PATCH"],{Option:es}=y.A,et=({value:e})=>{let[l,s]=(0,a.useState)(!1),r=JSON.stringify(e,null,2);return(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("pre",{className:"font-mono text-xs bg-gray-50 p-2 rounded max-w-md overflow-auto",children:l?r:"••••••••"}),(0,t.jsx)("button",{onClick:()=>s(!l),className:"p-1 hover:bg-gray-100 rounded",type:"button",children:l?(0,t.jsx)(Z.A,{className:"w-4 h-4 text-gray-500"}):(0,t.jsx)(ee.A,{className:"w-4 h-4 text-gray-500"})})]})},ea=({endpointData:e,onClose:l,accessToken:s,isAdmin:o,premiumUser:c=!1,onEndpointUpdated:m})=>{let[u,h]=(0,a.useState)(e),[x,p]=(0,a.useState)(!1),[g,_]=(0,a.useState)(!1),[v,A]=(0,a.useState)(e?.auth||!1),[N,C]=(0,a.useState)(e?.methods||[]),[k,w]=(0,a.useState)(e?.guardrails||{}),[M]=b.A.useForm(),I=async e=>{try{if(!s||!u?.id)return;let l={};if(e.headers)try{l="string"==typeof e.headers?JSON.parse(e.headers):e.headers}catch(e){z.Ay.fromBackend("Invalid JSON format for headers");return}let t={path:u.path,target:e.target,headers:l,include_subpath:e.include_subpath,cost_per_request:e.cost_per_request,auth:c?e.auth:void 0,methods:N&&N.length>0?N:void 0,guardrails:k&&Object.keys(k).length>0?k:void 0};await (0,n.updatePassThroughEndpoint)(s,u.id,t),h({...u,...t}),_(!1),m&&m()}catch(e){console.error("Error updating endpoint:",e),z.Ay.fromBackend("Failed to update pass through endpoint")}},T=async()=>{try{if(!s||!u?.id)return;await (0,n.deletePassThroughEndpointsCall)(s,u.id),z.Ay.success("Pass through endpoint deleted successfully"),l(),m&&m()}catch(e){console.error("Error deleting endpoint:",e),z.Ay.fromBackend("Failed to delete pass through endpoint")}};return x?(0,t.jsx)("div",{className:"p-4",children:"Loading..."}):u?(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,t.jsxs)("div",{children:[(0,t.jsx)(S.Ay,{onClick:l,className:"mb-4",children:"← Back"}),(0,t.jsxs)(d.A,{children:["Pass Through Endpoint: ",u.path]}),(0,t.jsx)(i.A,{className:"text-gray-500 font-mono",children:u.id})]})}),(0,t.jsxs)(J.A,{children:[(0,t.jsxs)(K.A,{className:"mb-4",children:[(0,t.jsx)(U.A,{children:"Overview"},"overview"),o?(0,t.jsx)(U.A,{children:"Settings"},"settings"):(0,t.jsx)(t.Fragment,{})]}),(0,t.jsxs)(X.A,{children:[(0,t.jsxs)(W.A,{children:[(0,t.jsxs)(H.A,{numItems:1,numItemsSm:2,numItemsLg:3,className:"gap-6",children:[(0,t.jsxs)(j.A,{children:[(0,t.jsx)(i.A,{children:"Path"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(d.A,{className:"font-mono",children:u.path})})]}),(0,t.jsxs)(j.A,{children:[(0,t.jsx)(i.A,{children:"Target"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(d.A,{children:u.target})})]}),(0,t.jsxs)(j.A,{children:[(0,t.jsx)(i.A,{children:"Configuration"}),(0,t.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,t.jsx)("div",{children:(0,t.jsx)(G.A,{color:u.include_subpath?"green":"gray",children:u.include_subpath?"Include Subpath":"Exact Path"})}),(0,t.jsx)("div",{children:(0,t.jsx)(G.A,{color:u.auth?"blue":"gray",children:u.auth?"Auth Required":"No Auth"})}),u.methods&&u.methods.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)(i.A,{className:"text-xs text-gray-500",children:"HTTP Methods:"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:u.methods.map(e=>(0,t.jsx)(G.A,{color:"indigo",size:"sm",children:e},e))})]}),(!u.methods||0===u.methods.length)&&(0,t.jsx)("div",{children:(0,t.jsx)(i.A,{className:"text-xs text-gray-500",children:"All HTTP methods supported"})}),void 0!==u.cost_per_request&&(0,t.jsx)("div",{children:(0,t.jsxs)(i.A,{children:["Cost per request: $",u.cost_per_request]})})]})]})]}),(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsx)(P,{pathValue:u.path,targetValue:u.target,includeSubpath:u.include_subpath||!1})}),u.headers&&Object.keys(u.headers).length>0&&(0,t.jsxs)(j.A,{className:"mt-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(i.A,{className:"font-medium",children:"Headers"}),(0,t.jsxs)(G.A,{color:"blue",children:[Object.keys(u.headers).length," headers configured"]})]}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(et,{value:u.headers})})]}),u.guardrails&&Object.keys(u.guardrails).length>0&&(0,t.jsxs)(j.A,{className:"mt-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(i.A,{className:"font-medium",children:"Guardrails"}),(0,t.jsxs)(G.A,{color:"purple",children:[Object.keys(u.guardrails).length," guardrails configured"]})]}),(0,t.jsx)("div",{className:"mt-4 space-y-2",children:Object.entries(u.guardrails).map(([e,l])=>(0,t.jsxs)("div",{className:"p-3 bg-gray-50 rounded",children:[(0,t.jsx)("div",{className:"font-medium text-sm",children:e}),l&&(l.request_fields||l.response_fields)&&(0,t.jsxs)("div",{className:"mt-2 text-xs text-gray-600 space-y-1",children:[l.request_fields&&(0,t.jsxs)("div",{children:["Request fields: ",l.request_fields.join(", ")]}),l.response_fields&&(0,t.jsxs)("div",{children:["Response fields: ",l.response_fields.join(", ")]})]}),!l&&(0,t.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:"Uses entire payload"})]},e))})]})]}),o&&(0,t.jsx)(W.A,{children:(0,t.jsxs)(j.A,{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)(d.A,{children:"Pass Through Endpoint Settings"}),(0,t.jsx)("div",{className:"space-x-2",children:!g&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.A,{onClick:()=>_(!0),children:"Edit Settings"}),(0,t.jsx)(r.A,{onClick:T,variant:"secondary",color:"red",children:"Delete Endpoint"})]})})]}),g?(0,t.jsxs)(b.A,{form:M,onFinish:I,initialValues:{target:u.target,headers:u.headers?JSON.stringify(u.headers,null,2):"",include_subpath:u.include_subpath||!1,cost_per_request:u.cost_per_request,auth:u.auth||!1,methods:u.methods||[]},layout:"vertical",children:[(0,t.jsx)(b.A.Item,{label:"Target URL",name:"target",rules:[{required:!0,message:"Please input a target URL"}],children:(0,t.jsx)(f.A,{placeholder:"https://api.example.com"})}),(0,t.jsx)(b.A.Item,{label:"Headers (JSON)",name:"headers",children:(0,t.jsx)(Y.A.TextArea,{rows:5,placeholder:'{"Authorization": "Bearer your-token", "Content-Type": "application/json"}'})}),(0,t.jsx)(b.A.Item,{label:"HTTP Methods (Optional)",name:"methods",extra:0===N.length?"All HTTP methods supported (default)":`Only ${N.join(", ")} requests will be routed to this endpoint`,children:(0,t.jsx)(y.A,{mode:"multiple",placeholder:"Select methods (leave empty for all)",value:N,onChange:C,allowClear:!0,style:{width:"100%"},children:el.map(e=>(0,t.jsx)(es,{value:e,children:e},e))})}),(0,t.jsx)(b.A.Item,{label:"Include Subpath",name:"include_subpath",valuePropName:"checked",children:(0,t.jsx)(L.A,{})}),(0,t.jsx)(b.A.Item,{label:"Cost per Request",name:"cost_per_request",children:(0,t.jsx)(Q.A,{min:0,step:.01,precision:2,placeholder:"0.00",addonBefore:"\xa5"})}),(0,t.jsx)(O,{premiumUser:c,authEnabled:v,onAuthChange:e=>{A(e),M.setFieldsValue({auth:e})}}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(B,{accessToken:s||"",value:k,onChange:w})}),(0,t.jsxs)("div",{className:"flex justify-end gap-2 mt-6",children:[(0,t.jsx)(S.Ay,{onClick:()=>_(!1),children:"Cancel"}),(0,t.jsx)(r.A,{children:"Save Changes"})]})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(i.A,{className:"font-medium",children:"Path"}),(0,t.jsx)("div",{className:"font-mono",children:u.path})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.A,{className:"font-medium",children:"Target URL"}),(0,t.jsx)("div",{children:u.target})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.A,{className:"font-medium",children:"Include Subpath"}),(0,t.jsx)(G.A,{color:u.include_subpath?"green":"gray",children:u.include_subpath?"Yes":"No"})]}),void 0!==u.cost_per_request&&(0,t.jsxs)("div",{children:[(0,t.jsx)(i.A,{className:"font-medium",children:"Cost per Request"}),(0,t.jsxs)("div",{children:["$",u.cost_per_request]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.A,{className:"font-medium",children:"Authentication Required"}),(0,t.jsx)(G.A,{color:u.auth?"green":"gray",children:u.auth?"Yes":"No"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.A,{className:"font-medium",children:"Headers"}),u.headers&&Object.keys(u.headers).length>0?(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(et,{value:u.headers})}):(0,t.jsx)("div",{className:"text-gray-500",children:"No headers configured"})]})]})]})})]})]})]}):(0,t.jsx)("div",{className:"p-4",children:"Pass through endpoint not found"})};var er=s(53672);let eo=({value:e})=>{let[l,s]=(0,a.useState)(!1),r=JSON.stringify(e);return(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"font-mono text-xs",children:l?r:"••••••••"}),(0,t.jsx)("button",{onClick:()=>s(!l),className:"p-1 hover:bg-gray-100 rounded",type:"button",children:l?(0,t.jsx)(Z.A,{className:"w-4 h-4 text-gray-500"}):(0,t.jsx)(ee.A,{className:"w-4 h-4 text-gray-500"})})]})},ei=({accessToken:e,userRole:l,userID:s,modelData:g,premiumUser:f})=>{let{t:j}=(0,p.o)(),[_,y]=(0,a.useState)([]),[b,v]=(0,a.useState)(null),[A,N]=(0,a.useState)(!1),[C,k]=(0,a.useState)(null);(0,a.useEffect)(()=>{e&&l&&s&&(0,n.getPassThroughEndpointsCall)(e).then(e=>{y(e.endpoints)})},[e,l,s]);let w=async e=>{k(e),N(!0)},S=async()=>{if(null!=C&&e){try{await (0,n.deletePassThroughEndpointsCall)(e,C);let l=_.filter(e=>e.id!==C);y(l),z.Ay.success(j("models.passThrough.deletedSuccessfully"))}catch(e){console.error("Error deleting the endpoint:",e),z.Ay.fromBackend(j("models.passThrough.deleteError")+String(e))}N(!1),k(null)}},M=[{header:j("models.passThrough.id"),accessorKey:"id",cell:e=>(0,t.jsx)(c.A,{title:e.row.original.id,children:(0,t.jsx)("div",{className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left w-full truncate whitespace-nowrap cursor-pointer max-w-[15ch]",onClick:()=>e.row.original.id&&v(e.row.original.id),children:e.row.original.id})})},{header:j("models.passThrough.path"),accessorKey:"path"},{header:j("models.passThrough.target"),accessorKey:"target",cell:e=>(0,t.jsx)(i.A,{children:e.getValue()})},{header:()=>(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{children:j("models.passThrough.methods")}),(0,t.jsx)(c.A,{title:j("models.passThrough.methodsTooltip"),children:(0,t.jsx)(u.A,{className:"w-4 h-4 text-gray-400 cursor-help"})})]}),accessorKey:"methods",cell:e=>{let l=e.getValue();return l&&0!==l.length?(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:l.map(e=>(0,t.jsx)(m.A,{color:"indigo",className:"text-xs",children:e},e))}):(0,t.jsx)(m.A,{color:"blue",children:j("models.passThrough.allMethods")})}},{header:()=>(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{children:j("models.passThrough.authentication")}),(0,t.jsx)(c.A,{title:j("models.passThrough.authenticationTooltip"),children:(0,t.jsx)(u.A,{className:"w-4 h-4 text-gray-400 cursor-help"})})]}),accessorKey:"auth",cell:e=>(0,t.jsx)(m.A,{color:e.getValue()?"green":"gray",children:e.getValue()?j("models.passThrough.yes"):j("models.passThrough.no")})},{header:j("models.passThrough.headers"),accessorKey:"headers",cell:e=>(0,t.jsx)(eo,{value:e.getValue()||{}})},{header:j("models.passThrough.actions"),id:"actions",cell:({row:e})=>(0,t.jsxs)("div",{className:"flex space-x-1",children:[(0,t.jsx)(o.A,{icon:h.A,size:"sm",onClick:()=>e.original.id&&v(e.original.id),title:j("models.passThrough.edit")}),(0,t.jsx)(o.A,{icon:x.A,size:"sm",onClick:()=>{var l;return l=e.original.id,e.index,void w(l)},title:j("models.passThrough.delete")})]})}];if(!e)return null;if(b){console.log("selectedEndpointId",b),console.log("generalSettings",_);let s=_.find(e=>e.id===b);return s?(0,t.jsx)(ea,{endpointData:s,onClose:()=>v(null),accessToken:e,isAdmin:"Admin"===l||"admin"===l,premiumUser:f,onEndpointUpdated:()=>{e&&(0,n.getPassThroughEndpointsCall)(e).then(e=>{y(e.endpoints)})}}):(0,t.jsx)("div",{children:j("models.passThrough.endpointNotFound")})}return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(d.A,{children:j("models.passThrough.title")}),(0,t.jsx)(i.A,{className:"text-tremor-content",children:j("models.passThrough.description")})]}),(0,t.jsx)($,{accessToken:e,setPassThroughItems:y,passThroughItems:_,premiumUser:f}),(0,t.jsx)(er.b,{data:_,columns:M,renderSubComponent:()=>(0,t.jsx)("div",{}),getRowCanExpand:()=>!1,isLoading:!1,noDataMessage:j("models.passThrough.noEndpointsConfigured")}),A&&(0,t.jsx)("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:(0,t.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,t.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:(0,t.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),(0,t.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),(0,t.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[(0,t.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,t.jsx)("div",{className:"sm:flex sm:items-start",children:(0,t.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[(0,t.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:j("models.passThrough.deleteTitle")}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("p",{className:"text-sm text-gray-500",children:j("models.passThrough.deleteMessage")})})]})})}),(0,t.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,t.jsx)(r.A,{onClick:S,color:"red",className:"ml-2",children:j("models.common.delete")}),(0,t.jsx)(r.A,{onClick:()=>{N(!1),k(null)},children:j("models.common.cancel")})]})]})]})})]})}},75954:(e,l,s)=>{s.d(l,{o:()=>o});var t=s(28436),a=s(26708);let r=(0,s(90078).D)("modelCostMap"),o=()=>(0,a.I)({queryKey:r.list({}),queryFn:async()=>await (0,t.modelCostMap)(),staleTime:6e4,gcTime:6e4})},86019:(e,l,s)=>{s.d(l,{v:()=>o});var t=s(95155),a=s(12115),r=s(90314);let o=({provider:e,className:l="w-4 h-4"})=>{let[s,o]=(0,a.useState)(!1),{logo:i}=(0,r.li)(e);return s||!i?(0,t.jsx)("div",{className:`${l} rounded-full bg-gray-200 flex items-center justify-center text-xs`,children:e?.charAt(0)||"-"}):(0,t.jsx)("img",{src:i,alt:`${e} logo`,className:l,onError:()=>o(!0)})}}}]);