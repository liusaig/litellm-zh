"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4421],{1207:(e,s,t)=>{t.d(s,{k:()=>r});var l=t(95155);t(12115);var a=t(14290);let r=({show:e,onOpenSettings:s})=>{let{t}=(0,a.o)();return e?(0,l.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start",children:[(0,l.jsx)("div",{className:"text-blue-500 mr-3 flex-shrink-0 mt-0.5",children:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,l.jsx)("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),(0,l.jsx)("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-sm font-medium text-blue-800",children:t("logs.details.requestNotFound")}),(0,l.jsxs)("p",{className:"text-sm text-blue-700 mt-1",children:[t("logs.details.requestNotFoundDescription")," ",(0,l.jsx)("code",{className:"bg-blue-100 px-1 py-0.5 rounded",children:"proxy_config.yaml"}),t("logs.details.requestNotFoundDescriptionSuffix"),s&&(0,l.jsxs)(l.Fragment,{children:[" ",t("logs.details.or")," ",(0,l.jsx)("button",{onClick:s,className:"text-blue-600 hover:text-blue-800 underline font-medium",children:t("logs.details.openSettings")})," ",t("logs.details.configureDirectly")]})]}),(0,l.jsx)("pre",{className:"mt-2 bg-white p-3 rounded border border-blue-200 text-xs font-mono overflow-auto",children:`general_settings:
  store_model_in_db: true
  store_prompts_in_spend_logs: true`}),(0,l.jsx)("p",{className:"text-xs text-blue-700 mt-2",children:t("logs.details.configNote")})]})]}):null}},11622:(e,s,t)=>{t.d(s,{M:()=>a});var l=t(95155);t(12115);let a=({utcTime:e})=>(0,l.jsx)("span",{style:{fontFamily:"monospace",width:"180px",display:"inline-block"},children:(e=>{try{return new Date(e).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}).replace(",","")}catch(e){return"Error converting time"}})(e)})},14421:(e,s,t)=>{t.d(s,{A:()=>eP});var l=t(95155),a=t(35625),r=t(26708),n=t(5858),i=t(73590),o=t.n(i),d=t(12115);t(62819);var c=t(88534),m=t(13008),x=t(26626),u=t(88636),h=t(2212),p=t(87927),g=t(56680),f=t(73806),j=t(79363),y=t(87278),b=t(14290),v=t(90550),N=t(11698),_=t(14992),w=t(17293),k=t(73946),S=t(37621),A=t(3134),C=t(48658),M=t(22277);function z({keys:e,totalCount:s,isLoading:t,isFetching:a,pageIndex:r,pageSize:n,onPageChange:i}){let{t:o}=(0,b.o)(),[m,x]=(0,d.useState)([{id:"deleted_at",desc:!0}]),[u,h]=(0,d.useState)({pageIndex:r,pageSize:n});d.useEffect(()=>{h({pageIndex:r,pageSize:n})},[r,n]);let p=[{id:"token",accessorKey:"token",header:o("logs.deletedKeys.columns.keyId"),size:150,maxSize:250,cell:e=>{let s=e.getValue();return(0,l.jsx)(M.A,{title:s,children:(0,l.jsx)("span",{className:"font-mono text-blue-500 text-xs truncate block max-w-[250px]",children:s||"-"})})}},{id:"key_alias",accessorKey:"key_alias",header:o("logs.deletedKeys.columns.keyAlias"),size:150,maxSize:200,cell:e=>{let s=e.getValue();return(0,l.jsx)(M.A,{title:s,children:(0,l.jsx)("span",{className:"font-mono text-xs truncate block max-w-[200px]",children:s??"-"})})}},{id:"team_alias",accessorKey:"team_alias",header:o("logs.deletedKeys.columns.teamAlias"),size:120,maxSize:180,cell:e=>{let s=e.getValue();return(0,l.jsx)("span",{className:"truncate block max-w-[180px]",children:s||"-"})}},{id:"spend",accessorKey:"spend",header:o("logs.deletedKeys.columns.spend"),size:100,maxSize:140,cell:e=>(0,l.jsx)("span",{className:"block max-w-[140px]",children:(0,c.HY)(e.getValue(),4)})},{id:"max_budget",accessorKey:"max_budget",header:o("logs.deletedKeys.columns.budget"),size:110,maxSize:150,cell:e=>{let s=e.getValue();return(0,l.jsx)("span",{className:"block max-w-[150px]",children:null===s?o("logs.deletedKeys.unlimited"):`\xa5${(0,c.HY)(s)}`})}},{id:"user_email",accessorKey:"user_email",header:o("logs.deletedKeys.columns.userEmail"),size:160,maxSize:250,cell:e=>{let s=e.getValue();return(0,l.jsx)(M.A,{title:s,children:(0,l.jsx)("span",{className:"font-mono text-xs truncate block max-w-[250px]",children:s??"-"})})}},{id:"user_id",accessorKey:"user_id",header:o("logs.deletedKeys.columns.userId"),size:120,maxSize:200,cell:e=>{let s=e.getValue();return(0,l.jsx)(M.A,{title:s||void 0,children:(0,l.jsx)("span",{className:"truncate block max-w-[200px]",children:s||"-"})})}},{id:"created_at",accessorKey:"created_at",header:o("logs.deletedKeys.columns.createdAt"),size:120,maxSize:140,cell:e=>{let s=e.getValue();return(0,l.jsx)("span",{className:"block max-w-[140px]",children:s?new Date(s).toLocaleDateString():"-"})}},{id:"created_by",accessorKey:"created_by",header:o("logs.deletedKeys.columns.createdBy"),size:120,maxSize:180,cell:e=>{let s=e.row.original.created_by;return(0,l.jsx)(M.A,{title:s||void 0,children:(0,l.jsx)("span",{className:"truncate block max-w-[180px]",children:s||"-"})})}},{id:"deleted_at",accessorKey:"deleted_at",header:o("logs.deletedKeys.columns.deletedAt"),size:120,maxSize:140,cell:e=>{let s=e.row.original.deleted_at;return(0,l.jsx)("span",{className:"block max-w-[140px]",children:s?new Date(s).toLocaleDateString():"-"})}},{id:"deleted_by",accessorKey:"deleted_by",header:o("logs.deletedKeys.columns.deletedBy"),size:120,maxSize:180,cell:e=>{let s=e.row.original.deleted_by;return(0,l.jsx)(M.A,{title:s||void 0,children:(0,l.jsx)("span",{className:"truncate block max-w-[180px]",children:s||"-"})})}}],g=(0,S.N4)({data:e,columns:p,columnResizeMode:"onChange",columnResizeDirection:"ltr",state:{sorting:m,pagination:u},onSortingChange:x,onPaginationChange:e=>{let s="function"==typeof e?e(u):e;h(s),i(s.pageIndex)},getCoreRowModel:(0,A.HT)(),getSortedRowModel:(0,A.h5)(),getPaginationRowModel:(0,A.kW)(),enableSorting:!0,manualSorting:!1,manualPagination:!0,pageCount:Math.ceil(s/n)}),{pageIndex:f}=g.getState().pagination,j=f*n+1,y=Math.min((f+1)*n,s);return(0,l.jsx)("div",{className:"w-full h-full overflow-hidden",children:(0,l.jsxs)("div",{className:"border-b py-4 flex-1 overflow-hidden",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between w-full mb-4",children:[t||a?(0,l.jsx)("span",{className:"inline-flex text-sm text-gray-700",children:o("logs.deletedKeys.loading")}):s>0&&(0,l.jsx)("span",{className:"inline-flex text-sm text-gray-700",children:o("logs.deletedKeys.showing").replace("{start}",String(j)).replace("{end}",String(y)).replace("{total}",String(s))}),(0,l.jsxs)("div",{className:"inline-flex items-center gap-2",children:[t||a?(0,l.jsx)("span",{className:"text-sm text-gray-700",children:o("logs.deletedKeys.loading")}):s>0&&(0,l.jsx)("span",{className:"text-sm text-gray-700",children:o("logs.deletedKeys.pageOf").replace("{current}",String(f+1)).replace("{total}",String(g.getPageCount()))}),(0,l.jsx)("button",{onClick:()=>g.previousPage(),disabled:t||a||!g.getCanPreviousPage(),className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:o("logs.deletedKeys.previous")}),(0,l.jsx)("button",{onClick:()=>g.nextPage(),disabled:t||a||!g.getCanNextPage(),className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:o("logs.deletedKeys.next")})]})]}),(0,l.jsx)("div",{className:"h-[75vh] overflow-auto",children:(0,l.jsx)("div",{className:"rounded-lg custom-border relative",children:(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)(C.XI,{className:"[&_td]:py-0.5 [&_th]:py-1",style:{width:g.getCenterTotalSize()},children:[(0,l.jsx)(C.nd,{children:g.getHeaderGroups().map(e=>(0,l.jsx)(C.Hj,{children:e.headers.map(e=>(0,l.jsx)(C.M_,{"data-header-id":e.id,className:"py-1 h-8 relative hover:bg-gray-50",style:{width:e.getSize(),maxWidth:e.column.columnDef.maxSize,position:"relative"},onMouseEnter:()=>{let s=document.querySelector(`[data-header-id="${e.id}"] .resizer`);s&&(s.style.opacity="0.5")},onMouseLeave:()=>{let s=document.querySelector(`[data-header-id="${e.id}"] .resizer`);s&&!e.column.getIsResizing()&&(s.style.opacity="0")},onClick:e.column.getToggleSortingHandler(),children:(0,l.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,l.jsx)("div",{className:"flex items-center",children:e.isPlaceholder?null:(0,S.Kv)(e.column.columnDef.header,e.getContext())}),(0,l.jsx)("div",{className:"w-4",children:e.column.getIsSorted()?({asc:(0,l.jsx)(_.A,{className:"h-4 w-4 text-blue-500"}),desc:(0,l.jsx)(w.A,{className:"h-4 w-4 text-blue-500"})})[e.column.getIsSorted()]:(0,l.jsx)(k.A,{className:"h-4 w-4 text-gray-400"})}),(0,l.jsx)("div",{onDoubleClick:()=>e.column.resetSize(),onMouseDown:e.getResizeHandler(),onTouchStart:e.getResizeHandler(),className:`resizer ${g.options.columnResizeDirection} ${e.column.getIsResizing()?"isResizing":""}`,style:{position:"absolute",right:0,top:0,height:"100%",width:"5px",background:e.column.getIsResizing()?"#3b82f6":"transparent",cursor:"col-resize",userSelect:"none",touchAction:"none",opacity:+!!e.column.getIsResizing()}})]})},e.id))},e.id))}),(0,l.jsx)(C.BF,{children:t||a?(0,l.jsx)(C.Hj,{children:(0,l.jsx)(C.nA,{colSpan:p.length,className:"h-8 text-center",children:(0,l.jsx)("div",{className:"text-center text-gray-500",children:(0,l.jsxs)("p",{children:["\uD83D\uDE85 ",o("logs.deletedKeys.loadingKeys")]})})})}):e.length>0?g.getRowModel().rows.map(e=>(0,l.jsx)(C.Hj,{className:"h-8",children:e.getVisibleCells().map(e=>(0,l.jsx)(C.nA,{style:{width:e.column.getSize(),maxWidth:e.column.columnDef.maxSize,whiteSpace:"pre-wrap",overflow:"hidden"},className:"py-0.5 max-h-8 overflow-hidden text-ellipsis whitespace-nowrap",children:(0,S.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,l.jsx)(C.Hj,{children:(0,l.jsx)(C.nA,{colSpan:p.length,className:"h-8 text-center",children:(0,l.jsx)("div",{className:"text-center text-gray-500",children:(0,l.jsx)("p",{children:o("logs.deletedKeys.noResults")})})})})})]})})})})]})})}function T(){let[e,s]=(0,d.useState)(0),[t]=(0,d.useState)(50),{data:a,isPending:r,isFetching:n}=(0,N.xc)(e+1,t);return(0,l.jsx)(z,{keys:a?.keys||[],totalCount:a?.total_count||0,isLoading:r,isFetching:n,pageIndex:e,pageSize:t,onPageChange:s})}var L=t(4862),D=t(34254),I=t(30489),E=t(96961),$=t(95517),R=t(8179),F=t(31556),q=t(95171),B=t(75892),P=t(64601);function K({teams:e,isLoading:s,isFetching:t}){let{t:a}=(0,b.o)(),[r,n]=(0,d.useState)([{id:"deleted_at",desc:!0}]),i=[{id:"team_alias",accessorKey:"team_alias",header:a("logs.deletedTeams.columns.teamName"),size:150,maxSize:200,cell:e=>{let s=e.getValue();return(0,l.jsx)(M.A,{title:s||void 0,children:(0,l.jsx)("span",{className:"truncate block max-w-[200px]",children:s||"-"})})}},{id:"team_id",accessorKey:"team_id",header:a("logs.deletedTeams.columns.teamId"),size:150,maxSize:250,cell:e=>{let s=e.getValue();return(0,l.jsx)(M.A,{title:s,children:(0,l.jsx)("span",{className:"font-mono text-blue-500 text-xs truncate block max-w-[250px]",children:s||"-"})})}},{id:"created_at",accessorKey:"created_at",header:a("logs.deletedTeams.columns.createdAt"),size:120,maxSize:140,cell:e=>{let s=e.getValue();return(0,l.jsx)("span",{className:"block max-w-[140px]",children:s?new Date(s).toLocaleDateString():"-"})}},{id:"spend",accessorKey:"spend",header:a("logs.deletedTeams.columns.spend"),size:100,maxSize:140,cell:e=>{let s=e.row.original.spend;return(0,l.jsx)("span",{className:"block max-w-[140px]",children:void 0!==s?(0,c.HY)(s,4):"-"})}},{id:"max_budget",accessorKey:"max_budget",header:a("logs.deletedTeams.columns.budget"),size:110,maxSize:150,cell:e=>{let s=e.getValue();return(0,l.jsx)("span",{className:"block max-w-[150px]",children:null==s?a("logs.deletedTeams.noLimit"):`\xa5${(0,c.HY)(s)}`})}},{id:"models",accessorKey:"models",header:a("logs.deletedTeams.columns.models"),size:200,maxSize:300,cell:e=>{let s=e.getValue();return Array.isArray(s)&&0!==s.length?(0,l.jsxs)("div",{className:"flex flex-wrap gap-1 max-w-[300px]",children:[s.slice(0,3).map((e,s)=>"all-proxy-models"===e?(0,l.jsx)(D.A,{size:"xs",color:"red",children:(0,l.jsx)(B.A,{children:a("logs.deletedTeams.allProxyModels")})},s):(0,l.jsx)(D.A,{size:"xs",color:"blue",children:(0,l.jsx)(B.A,{children:e.length>30?`${(0,P.$L)(e).slice(0,30)}...`:(0,P.$L)(e)})},s)),s.length>3&&(0,l.jsx)(D.A,{size:"xs",color:"gray",children:(0,l.jsx)(B.A,{children:a("logs.deletedTeams.moreModel").replace("{count}",String(s.length-3))})})]}):(0,l.jsx)(D.A,{size:"xs",color:"red",children:(0,l.jsx)(B.A,{children:a("logs.deletedTeams.allProxyModels")})})}},{id:"organization_id",accessorKey:"organization_id",header:a("logs.deletedTeams.columns.organization"),size:150,maxSize:200,cell:e=>{let s=e.getValue();return(0,l.jsx)(M.A,{title:s||void 0,children:(0,l.jsx)("span",{className:"truncate block max-w-[200px]",children:s||"-"})})}},{id:"deleted_at",accessorKey:"deleted_at",header:a("logs.deletedTeams.columns.deletedAt"),size:120,maxSize:140,cell:e=>{let s=e.row.original.deleted_at;return(0,l.jsx)("span",{className:"block max-w-[140px]",children:s?new Date(s).toLocaleDateString():"-"})}},{id:"deleted_by",accessorKey:"deleted_by",header:a("logs.deletedTeams.columns.deletedBy"),size:120,maxSize:180,cell:e=>{let s=e.row.original.deleted_by;return(0,l.jsx)(M.A,{title:s||void 0,children:(0,l.jsx)("span",{className:"truncate block max-w-[180px]",children:s||"-"})})}}],o=(0,S.N4)({data:e,columns:i,columnResizeMode:"onChange",columnResizeDirection:"ltr",state:{sorting:r},onSortingChange:n,getCoreRowModel:(0,A.HT)(),getSortedRowModel:(0,A.h5)(),enableSorting:!0,manualSorting:!1});return(0,l.jsx)("div",{className:"w-full h-full overflow-hidden",children:(0,l.jsxs)("div",{className:"border-b py-4 flex-1 overflow-hidden",children:[(0,l.jsx)("div",{className:"flex items-center justify-between w-full mb-4",children:s||t?(0,l.jsx)("span",{className:"inline-flex text-sm text-gray-700",children:a("logs.deletedTeams.loading")}):e.length>0&&(0,l.jsx)("span",{className:"inline-flex text-sm text-gray-700",children:a("logs.deletedTeams.showing").replace("{count}",String(e.length))})}),(0,l.jsx)("div",{className:"h-[75vh] overflow-auto",children:(0,l.jsx)("div",{className:"rounded-lg custom-border relative",children:(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)(I.A,{className:"[&_td]:py-0.5 [&_th]:py-1",style:{width:o.getCenterTotalSize()},children:[(0,l.jsx)(R.A,{children:o.getHeaderGroups().map(e=>(0,l.jsx)(q.A,{children:e.headers.map(e=>(0,l.jsx)(F.A,{"data-header-id":e.id,className:"py-1 h-8 relative hover:bg-gray-50",style:{width:e.getSize(),maxWidth:e.column.columnDef.maxSize,position:"relative"},onMouseEnter:()=>{let s=document.querySelector(`[data-header-id="${e.id}"] .resizer`);s&&(s.style.opacity="0.5")},onMouseLeave:()=>{let s=document.querySelector(`[data-header-id="${e.id}"] .resizer`);s&&!e.column.getIsResizing()&&(s.style.opacity="0")},onClick:e.column.getToggleSortingHandler(),children:(0,l.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,l.jsx)("div",{className:"flex items-center",children:e.isPlaceholder?null:(0,S.Kv)(e.column.columnDef.header,e.getContext())}),(0,l.jsx)("div",{className:"w-4",children:e.column.getIsSorted()?({asc:(0,l.jsx)(_.A,{className:"h-4 w-4 text-blue-500"}),desc:(0,l.jsx)(w.A,{className:"h-4 w-4 text-blue-500"})})[e.column.getIsSorted()]:(0,l.jsx)(k.A,{className:"h-4 w-4 text-gray-400"})}),(0,l.jsx)("div",{onDoubleClick:()=>e.column.resetSize(),onMouseDown:e.getResizeHandler(),onTouchStart:e.getResizeHandler(),className:`resizer ${o.options.columnResizeDirection} ${e.column.getIsResizing()?"isResizing":""}`,style:{position:"absolute",right:0,top:0,height:"100%",width:"5px",background:e.column.getIsResizing()?"#3b82f6":"transparent",cursor:"col-resize",userSelect:"none",touchAction:"none",opacity:+!!e.column.getIsResizing()}})]})},e.id))},e.id))}),(0,l.jsx)(E.A,{children:s||t?(0,l.jsx)(q.A,{children:(0,l.jsx)($.A,{colSpan:i.length,className:"h-8 text-center",children:(0,l.jsx)("div",{className:"text-center text-gray-500",children:(0,l.jsxs)("p",{children:["\uD83D\uDE85 ",a("logs.deletedTeams.loadingTeams")]})})})}):e.length>0?o.getRowModel().rows.map(e=>(0,l.jsx)(q.A,{className:"h-8",children:e.getVisibleCells().map(e=>(0,l.jsx)($.A,{style:{width:e.column.getSize(),maxWidth:e.column.columnDef.maxSize,whiteSpace:"pre-wrap",overflow:"hidden"},className:"py-0.5 max-h-8 overflow-hidden text-ellipsis whitespace-nowrap",children:(0,S.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,l.jsx)(q.A,{children:(0,l.jsx)($.A,{colSpan:i.length,className:"h-8 text-center",children:(0,l.jsx)("div",{className:"text-center text-gray-500",children:(0,l.jsx)("p",{children:a("logs.deletedTeams.noResults")})})})})})]})})})})]})})}function O(){let{data:e,isPending:s,isFetching:t}=(0,L.h_)(1,100);return(0,l.jsx)(K,{teams:e||[],isLoading:s,isFetching:t})}var H=t(63076),Y=t(13046),V=t(34568),W=t(5433),U=t(41326),J=t(54481),G=t(23060);let{Text:X}=U.A,Z=({value:e,onChange:s,placeholder:t="Select a model",style:a,pageSize:r=50,allowClear:n=!0,disabled:i=!1})=>{let[o,c]=(0,d.useState)(""),[m,x]=(0,W.M)("",{wait:300}),{data:u,fetchNextPage:h,hasNextPage:p,isFetchingNextPage:g,isLoading:f}=(0,Y.LT)(r,m||void 0),j=(0,d.useMemo)(()=>{if(!u?.pages)return[];let e=new Set,s=[];for(let t of u.pages)for(let l of t.data){let t=l.model_info?.id??"",a=l.model_name??"";!t||e.has(t)||(e.add(t),s.push({label:a?`${a} (${t})`:t,value:t,modelName:a,modelId:t}))}return s},[u]);return(0,l.jsx)(G.A,{value:e||void 0,onChange:e=>{let t="string"==typeof e?e:Array.isArray(e)?e[0]??"":"";s?.(t)},placeholder:t,style:{width:"100%",...a},allowClear:n,disabled:i,showSearch:!0,filterOption:!1,onSearch:e=>{c(e),x(e)},searchValue:o,onPopupScroll:e=>{let s=e.currentTarget;(s.scrollTop+s.clientHeight)/s.scrollHeight>=.8&&p&&!g&&h()},loading:f,notFoundContent:f?(0,l.jsx)(V.A,{spin:!0}):"No models found",options:j,optionRender:e=>{let{modelName:s,modelId:t}=e.data;return(0,l.jsx)(l.Fragment,{children:s?(0,l.jsxs)(J.A,{direction:"vertical",children:[(0,l.jsxs)(J.A,{direction:"horizontal",children:[(0,l.jsx)(X,{strong:!0,children:"Model name:"}),(0,l.jsx)(X,{ellipsis:!0,children:s})]}),(0,l.jsxs)(X,{ellipsis:!0,type:"secondary",children:["Model ID: ",t]})]}):(0,l.jsxs)(X,{ellipsis:!0,type:"secondary",children:["Model ID: ",t]})})},popupRender:e=>(0,l.jsxs)(l.Fragment,{children:[e,g&&(0,l.jsx)("div",{style:{textAlign:"center",padding:8},children:(0,l.jsx)(V.A,{spin:!0})})]})})};var Q=t(92574),ee=t(28436),es=t(98086),et=t(38983),el=t(90314),ea=t(10280),er=t(11622),en=t(83455);let ei=({size:e=12})=>(0,l.jsx)("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"flex-shrink-0 text-gray-400",children:(0,l.jsx)("path",{d:"M12 3l1.912 5.813a2 2 0 0 0 1.275 1.275L21 12l-5.813 1.912a2 2 0 0 0-1.275 1.275L12 21l-1.912-5.813a2 2 0 0 0-1.275-1.275L3 12l5.813-1.912a2 2 0 0 0 1.275-1.275L12 3z"})}),eo=({size:e=10})=>(0,l.jsx)("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"flex-shrink-0",children:(0,l.jsx)("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),ed=({count:e})=>(0,l.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-blue-50 text-blue-700 border border-blue-200 rounded-full text-[11px] font-medium whitespace-nowrap",children:[(0,l.jsx)(ei,{}),null!=e?e:"LLM"]}),ec=({count:e})=>(0,l.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-amber-50 text-amber-700 border border-amber-200 rounded-full text-[11px] font-medium whitespace-nowrap",children:[(0,l.jsx)(eo,{}),null!=e?e:"MCP"]}),em=({label:e,field:s,sortBy:t,sortOrder:a,onSortChange:r})=>(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("span",{children:e}),(0,l.jsx)(ea.h,{sortState:t===s&&a,onSortChange:e=>{!1===e?r("startTime","desc"):r(s,e)}})]}),ex=e=>{let{sortProps:s,t}=e||{},a=(e,s)=>t?.(e)||s||e;return[{header:s?()=>(0,l.jsx)(em,{label:a("logs.columns.time","Time"),field:"startTime",sortBy:s.sortBy,sortOrder:s.sortOrder,onSortChange:s.onSortChange}):a("logs.columns.time","Time"),accessorKey:"startTime",cell:e=>(0,l.jsx)(er.M,{utcTime:e.getValue()})},{header:a("logs.columns.type","Type"),id:"type",cell:e=>{let s=e.row.original,a=s.session_total_count||1,r=en.C1.includes(s.call_type),n=s.session_llm_count??(r?0:a),i=s.session_mcp_count??(r?a:0);if(r)return(0,l.jsx)(ec,{});if(a<=1)return(0,l.jsx)(ed,{});let o=(0,l.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-blue-50 text-blue-700 border border-blue-200 rounded-full text-[11px] font-medium whitespace-nowrap",children:[(0,l.jsx)(ei,{}),(0,l.jsx)("span",{children:a}),i>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"text-blue-300",children:"\xb7"}),(0,l.jsx)(eo,{})]})]});return(0,l.jsx)(M.A,{title:t?.("logs.columns.llmMcpCount",{llm:n,mcp:i})||`${n} LLM â€¢ ${i} MCP`,children:o})}},{header:a("logs.columns.status","Status"),accessorKey:"metadata.status",cell:e=>{let s="failure"!==(e.getValue()||a("logs.columns.success","Success")).toLowerCase();return(0,l.jsx)("span",{className:`px-2 py-1 rounded-md text-xs font-medium inline-block text-center w-16 ${s?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s?a("logs.columns.success","Success"):a("logs.columns.failure","Failure")})}},{header:a("logs.columns.sessionId","Session ID"),accessorKey:"session_id",cell:e=>{let s=String(e.getValue()||""),t=e.row.original.onSessionClick;return(0,l.jsx)(M.A,{title:String(e.getValue()||""),children:(0,l.jsx)(et.A,{size:"xs",variant:"light",className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal text-xs max-w-[15ch] truncate block",onClick:()=>t?.(s),children:String(e.getValue()||"")})})}},{header:a("logs.columns.requestId","Request ID"),accessorKey:"request_id",cell:e=>(0,l.jsx)(M.A,{title:String(e.getValue()||""),children:(0,l.jsx)("span",{className:"font-mono text-xs max-w-[15ch] truncate block",children:String(e.getValue()||"")})})},{header:s?()=>(0,l.jsx)(em,{label:a("logs.columns.cost","Cost"),field:"spend",sortBy:s.sortBy,sortOrder:s.sortOrder,onSortChange:s.onSortChange}):a("logs.columns.cost","Cost"),accessorKey:"spend",cell:e=>{let s=e.row.original,a=s.mcp_tool_call_count||0,r=s.mcp_tool_call_spend||0;return(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)(M.A,{title:`$${String(e.getValue()||0)}`,children:(0,l.jsx)("span",{children:(0,c.ee)(e.getValue()||0)})}),a>0&&r>0&&(0,l.jsx)("span",{className:"text-[10px] text-amber-600",children:t?.("logs.columns.inclFromMcp",{cost:(0,c.ee)(r),count:a})||`incl. ${(0,c.ee)(r)} from ${a} MCP`})]})}},{header:a("logs.columns.duration","Duration (s)"),accessorKey:"duration",cell:e=>(0,l.jsx)(M.A,{title:String(e.getValue()||"-"),children:(0,l.jsx)("span",{className:"max-w-[15ch] truncate block",children:String(e.getValue()||"-")})})},{header:a("logs.columns.teamName","Team Name"),accessorKey:"metadata.user_api_key_team_alias",cell:e=>(0,l.jsx)(M.A,{title:String(e.getValue()||"-"),children:(0,l.jsx)("span",{className:"max-w-[15ch] truncate block",children:String(e.getValue()||"-")})})},{header:a("logs.columns.keyHash","Key Hash"),accessorKey:"metadata.user_api_key",cell:e=>{let s=String(e.getValue()||"-"),t=e.row.original.onKeyHashClick;return(0,l.jsx)(M.A,{title:s,children:(0,l.jsx)("span",{className:"font-mono max-w-[15ch] truncate block cursor-pointer hover:text-blue-600",onClick:()=>t?.(s),children:s})})}},{header:a("logs.columns.keyName","Key Name"),accessorKey:"metadata.user_api_key_alias",cell:e=>(0,l.jsx)(M.A,{title:String(e.getValue()||"-"),children:(0,l.jsx)("span",{className:"max-w-[15ch] truncate block",children:String(e.getValue()||"-")})})},{header:a("logs.columns.model","Model"),accessorKey:"model",cell:e=>{let s=e.row.original,t=s.custom_llm_provider,a=String(e.getValue()||"");return(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[t&&(0,l.jsx)("img",{src:s.metadata?.mcp_tool_call_metadata?.mcp_server_logo_url?s.metadata.mcp_tool_call_metadata.mcp_server_logo_url:t?(0,el.li)(t).logo:"",alt:"",className:"w-4 h-4",onError:e=>{e.target.style.display="none"}}),(0,l.jsx)(M.A,{title:a,children:(0,l.jsx)("span",{className:"max-w-[15ch] truncate block",children:a})})]})}},{header:s?()=>(0,l.jsx)(em,{label:a("logs.columns.tokens","Tokens"),field:"total_tokens",sortBy:s.sortBy,sortOrder:s.sortOrder,onSortChange:s.onSortChange}):a("logs.columns.tokens","Tokens"),accessorKey:"total_tokens",cell:e=>{let s=e.row.original;return(0,l.jsxs)("span",{className:"text-sm",children:[String(s.total_tokens||"0"),(0,l.jsxs)("span",{className:"text-gray-400 text-xs ml-1",children:["(",String(s.prompt_tokens||"0"),"+",String(s.completion_tokens||"0"),")"]})]})}},{header:a("logs.columns.internalUser","Internal User"),accessorKey:"user",cell:e=>(0,l.jsx)(M.A,{title:String(e.getValue()||"-"),children:(0,l.jsx)("span",{className:"max-w-[15ch] truncate block",children:String(e.getValue()||"-")})})},{header:a("logs.columns.endUser","End User"),accessorKey:"end_user",cell:e=>(0,l.jsx)(M.A,{title:String(e.getValue()||"-"),children:(0,l.jsx)("span",{className:"max-w-[15ch] truncate block",children:String(e.getValue()||"-")})})},{header:a("logs.columns.tags","Tags"),accessorKey:"request_tags",cell:e=>{let s=e.getValue();if(!s||0===Object.keys(s).length)return"-";let t=Object.entries(s),a=t[0],r=t.slice(1);return(0,l.jsx)("div",{className:"flex flex-wrap gap-1",children:(0,l.jsx)(M.A,{title:(0,l.jsx)("div",{className:"flex flex-col gap-1",children:t.map(([e,s])=>(0,l.jsxs)("span",{children:[e,": ",String(s)]},e))}),children:(0,l.jsxs)("span",{className:"px-2 py-1 bg-gray-100 rounded-full text-xs",children:[a[0],": ",String(a[1]),r.length>0&&` +${r.length}`]})})})}}]};ex(),t(1207),t(55146);var eu=t(29822),eh=t.n(eu),ep=t(58737);let eg="Team ID",ef="Key Hash",ej="Request ID",ey="Model",eb="User ID",ev="End User",eN="Status",e_="Key Alias",ew="Error Code",ek="Error Message";var eS=t(58617),eA=t(12120);t(18323),t(58796);var eC=t(51190),eM=t(48934),ez=t(42696);let eT=async(e,s)=>{let t=(0,ee.getProxyBaseUrl)(),l=t?`${t}/config/update`:"/config/update",a=await fetch(l,{method:"POST",headers:{[(0,ee.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({general_settings:{store_prompts_in_spend_logs:s.store_prompts_in_spend_logs,...s.maximum_spend_logs_retention_period&&{maximum_spend_logs_retention_period:s.maximum_spend_logs_retention_period}}})});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e?.error?.message||e?.message||e?.detail||"Failed to update spend logs settings")}return await a.json()};var eL=t(34425),eD=t(84425),eI=t(25387),eE=t(3373),e$=t(8536),eR=t(16989),eF=t(91808);let eq=({isVisible:e,onCancel:s,onSuccess:t})=>{let{t:a}=(0,b.o)(),[r]=eI.A.useForm(),{mutateAsync:n,isPending:i}=(()=>{let{accessToken:e}=(0,ez.A)();return(0,eM.n)({mutationFn:async s=>{if(!e)throw Error("Access token is required");return await eT(e,s)}})})(),{mutateAsync:o,isPending:c}=(0,eC.Fy)(),{data:m,isLoading:x,refetch:u}=(0,eC.sM)(eC.$S.GENERAL_SETTINGS),h=eI.A.useWatch("store_prompts_in_spend_logs",r);(0,d.useEffect)(()=>{e&&u()},[e,u]);let p=(0,d.useMemo)(()=>{if(!m)return{store_prompts_in_spend_logs:!1,maximum_spend_logs_retention_period:void 0};let e=m.find(e=>"store_prompts_in_spend_logs"===e.field_name),s=m.find(e=>"maximum_spend_logs_retention_period"===e.field_name);return{store_prompts_in_spend_logs:e?.field_value??!1,maximum_spend_logs_retention_period:s?.field_value??void 0}},[m]),g=async e=>{try{let s=e.maximum_spend_logs_retention_period;if(!s||"string"==typeof s&&""===s.trim())try{await o({config_type:eC.$S.GENERAL_SETTINGS,field_name:eC.By.MAXIMUM_SPEND_LOGS_RETENTION_PERIOD})}catch(e){console.warn("Failed to delete retention period field (may not exist):",e)}let l={store_prompts_in_spend_logs:e.store_prompts_in_spend_logs,...s&&"string"==typeof s&&""!==s.trim()&&{maximum_spend_logs_retention_period:s}};await n(l,{onSuccess:()=>{eA.Ay.success(a("logs.settings.success")),u(),t?.()},onError:e=>{eA.Ay.fromBackend(a("logs.settings.failed").replace("{error}",(0,eL.x)(e)))}})}catch(e){eA.Ay.fromBackend(a("logs.settings.failed").replace("{error}",(0,eL.x)(e)))}},f=()=>{r.resetFields(),s()};return(0,l.jsx)(eE.A,{title:(0,l.jsx)(U.A.Title,{level:5,children:a("logs.settings.title")}),open:e,footer:(0,l.jsxs)(J.A,{children:[(0,l.jsx)(y.Ay,{onClick:f,disabled:i||c||x,children:a("logs.settings.cancel")}),(0,l.jsx)(y.Ay,{type:"primary",loading:i||c,disabled:x,onClick:()=>r.submit(),children:i||c?a("logs.settings.saving"):a("logs.settings.saveSettings")})]}),onCancel:f,children:(0,l.jsxs)(eI.A,{form:r,layout:"horizontal",onFinish:g,initialValues:p,children:[(0,l.jsx)(eI.A.Item,{label:a("logs.settings.storePrompts"),name:"store_prompts_in_spend_logs",tooltip:m?.find(e=>"store_prompts_in_spend_logs"===e.field_name)?.field_description||a("logs.settings.storePromptsTooltip"),valuePropName:"checked",children:(0,l.jsx)("div",{children:x?(0,l.jsx)(e$.A.Input,{active:!0,block:!0}):(0,l.jsx)(eR.A,{checked:h??!1,onChange:e=>r.setFieldValue("store_prompts_in_spend_logs",e)})})}),(0,l.jsx)(eI.A.Item,{label:a("logs.settings.retentionPeriod"),name:"maximum_spend_logs_retention_period",tooltip:m?.find(e=>"maximum_spend_logs_retention_period"===e.field_name)?.field_description||a("logs.settings.retentionPeriodTooltip"),children:x?(0,l.jsx)(e$.A.Input,{active:!0,block:!0}):(0,l.jsx)(eF.A,{placeholder:a("logs.settings.retentionPeriodPlaceholder"),prefix:(0,l.jsx)(eD.A,{})})})]},m?JSON.stringify(p):"loading")})};var eB=t(53672);function eP({accessToken:e,token:s,userRole:t,userID:i,allTeams:c,premiumUser:N}){let{t:_}=(0,b.o)(),[w,k]=(0,d.useState)(""),[S,A]=(0,d.useState)(!1),[C,M]=(0,d.useState)(!1),[z,L]=(0,d.useState)(1),[D]=(0,d.useState)(50),I=(0,d.useRef)(null),E=(0,d.useRef)(null),$=(0,d.useRef)(null),[R,F]=(0,d.useState)(o()().subtract(24,"hours").format("YYYY-MM-DDTHH:mm")),[q,B]=(0,d.useState)(o()().format("YYYY-MM-DDTHH:mm")),[P,K]=(0,d.useState)(!1),[Y,V]=(0,d.useState)(!1),[W,U]=(0,d.useState)(""),[J,G]=(0,d.useState)(""),[X,et]=(0,d.useState)(""),[el,ea]=(0,d.useState)(""),[er,ei]=(0,d.useState)(""),[eo,ed]=(0,d.useState)(null),[ec,em]=(0,d.useState)(null),[eu,eA]=(0,d.useState)(""),[eC,eM]=(0,d.useState)(""),[ez,eT]=(0,d.useState)(t&&v.UX.includes(t)),[eL,eD]=(0,d.useState)("request logs"),[eI,eE]=(0,d.useState)(null),[e$,eR]=(0,d.useState)(!1),[eF,eP]=(0,d.useState)(null),[eK,eO]=(0,d.useState)(!1),[eH,eY]=(0,d.useState)("startTime"),[eV,eW]=(0,d.useState)("desc"),[eU,eJ]=(0,d.useState)(!0);(0,a.jE)();let[eG,eX]=(0,d.useState)(()=>{let e=sessionStorage.getItem("isLiveTail");return null===e||JSON.parse(e)});(0,d.useEffect)(()=>{sessionStorage.setItem("isLiveTail",JSON.stringify(eG))},[eG]);let[eZ,eQ]=(0,d.useState)({value:24,unit:"hours"});(0,d.useEffect)(()=>{(async()=>{ec&&e&&ed({...(await (0,ee.keyInfoV1Call)(e,ec)).info,token:ec,api_key:ec})})()},[ec,e]),(0,d.useEffect)(()=>{function e(e){I.current&&!I.current.contains(e.target)&&M(!1),E.current&&!E.current.contains(e.target)&&A(!1),$.current&&!$.current.contains(e.target)&&V(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,d.useEffect)(()=>{t&&v.UX.includes(t)&&eT(!0)},[t]);let e0=(0,r.I)({queryKey:["logs","table",z,D,R,q,X,el,ez?i:null,eu,er,eH,eV],queryFn:async()=>{if(!e||!s||!t||!i)return{data:[],total:0,page:1,page_size:D,total_pages:0};let l=o()(R).utc().format("YYYY-MM-DD HH:mm:ss"),a=P?o()(q).utc().format("YYYY-MM-DD HH:mm:ss"):o()().utc().format("YYYY-MM-DD HH:mm:ss");return await (0,ee.uiSpendLogsCall)({accessToken:e,start_date:l,end_date:a,page:z,page_size:D,params:{api_key:el||void 0,team_id:X||void 0,user_id:ez?i??void 0:void 0,end_user:eC||void 0,status_filter:eu||void 0,model_id:er||void 0,sort_by:eH,sort_order:eV}})},enabled:!!e&&!!s&&!!t&&!!i&&"request logs"===eL&&eU,refetchInterval:!!eG&&1===z&&15e3,placeholderData:n.rX,refetchIntervalInBackground:!0}),e1=(0,d.useDeferredValue)(e0.isFetching),e2=e0.isFetching||e1,{filters:e5,filteredLogs:e4,hasBackendFilters:e3,allTeams:e6,allKeyAliases:e8,handleFilterChange:e7,handleFilterReset:e9}=function({logs:e,accessToken:s,startTime:t,endTime:l,pageSize:a=ep.e,isCustomDate:n,setCurrentPage:i,userID:c,userRole:m,sortBy:x="startTime",sortOrder:u="desc",currentPage:h=1}){let p=(0,d.useMemo)(()=>({[eg]:"",[ef]:"",[ej]:"",[ey]:"",[eb]:"",[ev]:"",[eN]:"",[e_]:"",[ew]:"",[ek]:""}),[]),[g,f]=(0,d.useState)(p),[j,y]=(0,d.useState)({data:[],total:0,page:1,page_size:50,total_pages:0}),b=(0,d.useRef)(0),v=(0,d.useCallback)(async(e,r=1)=>{if(!s)return;console.log("Filters being sent to API:",e);let i=Date.now();b.current=i;let d=o()(t).utc().format("YYYY-MM-DD HH:mm:ss"),c=n?o()(l).utc().format("YYYY-MM-DD HH:mm:ss"):o()().utc().format("YYYY-MM-DD HH:mm:ss");try{let t=await (0,ee.uiSpendLogsCall)({accessToken:s,start_date:d,end_date:c,page:r,page_size:a,params:{api_key:e[ef]||void 0,team_id:e[eg]||void 0,request_id:e[ej]||void 0,user_id:e[eb]||void 0,end_user:e[ev]||void 0,status_filter:e[eN]||void 0,model_id:e[ey]||void 0,key_alias:e[e_]||void 0,error_code:e[ew]||void 0,error_message:e[ek]||void 0,sort_by:x,sort_order:u}});i===b.current&&t.data&&y(t)}catch(e){console.error("Error searching users:",e)}},[s,t,l,n,a,x,u]),N=(0,d.useMemo)(()=>eh()((e,s)=>v(e,s),300),[v]);(0,d.useEffect)(()=>()=>N.cancel(),[N]);let _=(0,r.I)({queryKey:["allKeys"],queryFn:async()=>{if(!s)throw Error("Access token required");return await (0,H.TK)(s)},enabled:!!s}).data||[],w=(0,d.useMemo)(()=>!!(g[e_]||g[ef]||g[ej]||g[eb]||g[ev]||g[ew]||g[ek]||g[ey]),[g]);(0,d.useEffect)(()=>{w&&s&&(N.cancel(),v(g,h))},[x,u,h,t,l,n]);let k=(0,d.useMemo)(()=>{if(!e||!e.data)return{data:[],total:0,page:1,page_size:50,total_pages:0};if(w)return e;let s=[...e.data];return g[eg]&&(s=s.filter(e=>e.team_id===g[eg])),g[eN]&&(s=s.filter(e=>"success"===g[eN]?!e.status||"success"===e.status:e.status===g[eN])),g[ey]&&(s=s.filter(e=>e.model_id===g[ey])),g[ef]&&(s=s.filter(e=>e.api_key===g[ef])),g[ev]&&(s=s.filter(e=>e.end_user===g[ev])),g[ew]&&(s=s.filter(e=>{let s=(e.metadata||{}).error_information;return s&&s.error_code===g[ew]})),{data:s,total:e.total,page:e.page,page_size:e.page_size,total_pages:e.total_pages}},[e,g,w]),S=(0,d.useMemo)(()=>w?j&&j.data&&j.data.length>0?j:e||{data:[],total:0,page:1,page_size:50,total_pages:0}:k,[w,j,k,e]),{data:A}=(0,r.I)({queryKey:["allTeamsForLogFilters",s],queryFn:async()=>s&&await (0,H.kR)(s)||[],enabled:!!s});return{filters:g,filteredLogs:S,hasBackendFilters:w,allKeyAliases:_,allTeams:A,handleFilterChange:e=>{f(s=>{let t={...s,...e};for(let e of Object.keys(p))e in t||(t[e]=p[e]);return JSON.stringify(t)!==JSON.stringify(s)&&(i(1),N(t,1)),t})},handleFilterReset:()=>{f(p),y({data:[],total:0,page:1,page_size:50,total_pages:0}),N(p,1)}}}({logs:e0.data||{data:[],total:0,page:1,page_size:D||10,total_pages:1},accessToken:e,startTime:R,endTime:q,pageSize:D,isCustomDate:P,setCurrentPage:L,userID:i,userRole:t,sortBy:eH,sortOrder:eV,currentPage:z}),se=(0,d.useCallback)(()=>{e9(),F(o()().subtract(24,"hours").format("YYYY-MM-DDTHH:mm")),B(o()().format("YYYY-MM-DDTHH:mm")),K(!1),eQ({value:24,unit:"hours"}),L(1)},[e9]);if((0,d.useEffect)(()=>{eJ(!e3)},[e3]),(0,d.useEffect)(()=>{e&&(e5["Team ID"]?et(e5["Team ID"]):et(""),eA(e5.Status||""),ei(e5.Model||""),eM(e5["End User"]||""),ea(e5["Key Hash"]||""))},[e5,e]),!e||!s||!t||!i)return null;let ss=e4.data.filter(e=>!w||e.request_id.includes(w)||e.model.includes(w)||e.user&&e.user.includes(w)),st=ss.reduce((e,s)=>(s.session_id&&(e[s.session_id]||(e[s.session_id]={llm:0,mcp:0}),en.C1.includes(s.call_type)?e[s.session_id].mcp+=1:e[s.session_id].llm+=1),e),{}),sl=new Map;for(let e of ss){if(!e.session_id||1>=(e.session_total_count||1))continue;let s=en.C1.includes(e.call_type),t=sl.get(e.session_id);t&&(!t.isMcp||s)||sl.set(e.session_id,{requestId:e.request_id,isMcp:s})}let sa=ss.map(e=>{let s=e.session_id?st[e.session_id]:void 0;return{...e,duration:(Date.parse(e.endTime)-Date.parse(e.startTime))/1e3,session_llm_count:s?.llm??void 0,session_mcp_count:s?.mcp??void 0,onKeyHashClick:e=>em(e),onSessionClick:s=>{s&&(eP(s),eE(e),eR(!0))}}}).filter(e=>!e.session_id||1>=(e.session_total_count||1)||sl.get(e.session_id)?.requestId===e.request_id)||[],sr=[{name:"teamId",label:_("logs.filters.teamId"),isSearchable:!0,searchFn:async e=>c&&0!==c.length?c.filter(s=>s.team_id.toLowerCase().includes(e.toLowerCase())||s.team_alias&&s.team_alias.toLowerCase().includes(e.toLowerCase())).map(e=>({label:`${e.team_alias||e.team_id} (${e.team_id})`,value:e.team_id})):[]},{name:"status",label:_("logs.filters.status"),isSearchable:!1,options:[{label:_("logs.filters.success"),value:"success"},{label:_("logs.filters.failure"),value:"failure"}]},{name:"model",label:_("logs.filters.model"),customComponent:Z},{name:"keyAlias",label:_("logs.filters.keyAlias"),isSearchable:!0,searchFn:async s=>e?(await (0,H.TK)(e)).filter(e=>e.toLowerCase().includes(s.toLowerCase())).map(e=>({label:e,value:e})):[]},{name:"endUser",label:_("logs.filters.endUser"),isSearchable:!0,searchFn:async s=>{if(!e)return[];let t=await (0,ee.allEndUsersCall)(e);return(t?.map(e=>e.user_id)||[]).filter(e=>e.toLowerCase().includes(s.toLowerCase())).map(e=>({label:e,value:e}))}},{name:"errorCode",label:_("logs.filters.errorCode"),isSearchable:!0,searchFn:async e=>{if(!e)return en.gs;let s=e.toLowerCase(),t=en.gs.filter(e=>e.label.toLowerCase().includes(s));return!en.gs.some(s=>s.value===e.trim())&&e.trim()&&t.push({label:`Use custom code: ${e.trim()}`,value:e.trim()}),t}},{name:"keyHash",label:_("logs.filters.keyHash"),isSearchable:!1},{name:"Error Message",label:"Error Message",isSearchable:!1}],sn=en.iw.find(e=>e.value===eZ.value&&e.unit===eZ.unit),si=e=>15===e.value&&"minutes"===e.unit?_("logs.quickSelect.last15Minutes"):1===e.value&&"hours"===e.unit?_("logs.quickSelect.lastHour"):4===e.value&&"hours"===e.unit?_("logs.quickSelect.last4Hours"):24===e.value&&"hours"===e.unit?_("logs.quickSelect.last24Hours"):7===e.value&&"days"===e.unit?_("logs.quickSelect.last7Days"):e.label,so=en.iw.map(e=>({...e,label:si(e)})),sd=P?((e,s,t)=>{if(e)return`${o()(s).format("MMM D, h:mm A")} - ${o()(t).format("MMM D, h:mm A")}`;let l=o()(),a=o()(s),r=l.diff(a,"minutes");if(r>=0&&r<2)return"Last 1 Minute";if(r>=2&&r<16)return"Last 15 Minutes";if(r>=16&&r<61)return"Last Hour";let n=l.diff(a,"hours");return n>=1&&n<5?"Last 4 Hours":n>=5&&n<25?"Last 24 Hours":n>=25&&n<169?"Last 7 Days":`${a.format("MMM D")} - ${l.format("MMM D")}`})(P,R,q):sn?si(sn):"";return(0,l.jsxs)("div",{className:"w-full max-w-screen p-6 overflow-x-hidden box-border",children:[(0,l.jsxs)(p.A,{defaultIndex:0,onIndexChange:e=>eD(0===e?"request logs":1===e?"deleted keys":"deleted teams"),children:[(0,l.jsxs)(g.A,{children:[(0,l.jsx)(h.A,{children:_("logs.tabs.requestLogs")}),(0,l.jsx)(h.A,{children:_("logs.tabs.deletedKeys")}),(0,l.jsx)(h.A,{children:_("logs.tabs.deletedTeams")})]}),(0,l.jsxs)(j.A,{children:[(0,l.jsxs)(f.A,{children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h1",{className:"text-xl font-semibold",children:_("logs.title")}),(0,l.jsx)(y.Ay,{icon:(0,l.jsx)(m.A,{}),onClick:()=>eO(!0),title:_("logs.settingsButton")})]}),eo&&ec&&eo.api_key===ec?(0,l.jsx)(es.A,{keyId:ec,keyData:eo,teams:c,onClose:()=>em(null),backButtonText:_("logs.backToLogs")}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Q.A,{options:sr,onApplyFilters:e7,onResetFilters:se}),(0,l.jsx)(eq,{isVisible:eK,onCancel:()=>eO(!1),onSuccess:()=>eO(!1)}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow w-full max-w-full box-border",children:[(0,l.jsx)("div",{className:"border-b px-6 py-4 w-full max-w-full box-border",children:(0,l.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between space-y-4 md:space-y-0 w-full max-w-full box-border",children:[(0,l.jsxs)("div",{className:"flex flex-wrap items-center gap-3 w-full max-w-full box-border",children:[(0,l.jsxs)("div",{className:"relative w-64 min-w-0 flex-shrink-0",children:[(0,l.jsx)("input",{type:"text",placeholder:_("logs.searchByRequestId"),className:"w-full px-3 py-2 pl-8 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:w,onChange:e=>k(e.target.value)}),(0,l.jsx)("svg",{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-shrink",children:[(0,l.jsxs)("div",{className:"relative z-50",ref:$,children:[(0,l.jsxs)("button",{onClick:()=>V(!Y),className:"px-3 py-2 text-sm border rounded-md hover:bg-gray-50 flex items-center gap-2",children:[(0,l.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),sd]}),Y&&(0,l.jsx)("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border p-2 z-50",children:(0,l.jsxs)("div",{className:"space-y-1",children:[so.map(e=>(0,l.jsx)("button",{className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-50 rounded-md ${sd===e.label?"bg-blue-50 text-blue-600":""}`,onClick:()=>{L(1),B(o()().format("YYYY-MM-DDTHH:mm")),F(o()().subtract(e.value,e.unit).format("YYYY-MM-DDTHH:mm")),eQ({value:e.value,unit:e.unit}),K(!1),V(!1)},children:e.label},e.label)),(0,l.jsx)("div",{className:"border-t my-2"}),(0,l.jsx)("button",{className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-50 rounded-md ${P?"bg-blue-50 text-blue-600":""}`,onClick:()=>K(!P),children:_("logs.customRange")})]})})]}),(0,l.jsx)(()=>(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-900",children:_("logs.liveTail")}),(0,l.jsx)(u.A,{color:"green",checked:eG,defaultChecked:!0,onChange:eX})]}),{}),(0,l.jsx)(y.Ay,{type:"default",icon:(0,l.jsx)(x.A,{spin:e2}),onClick:()=>{e0.refetch()},disabled:e2,title:_("logs.fetch"),children:e2?_("logs.fetching"):_("logs.fetch")})]}),P&&(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{children:(0,l.jsx)("input",{type:"datetime-local",value:R,onChange:e=>{F(e.target.value),L(1)},className:"px-3 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),(0,l.jsx)("span",{className:"text-gray-500",children:_("logs.dateTo")}),(0,l.jsx)("div",{children:(0,l.jsx)("input",{type:"datetime-local",value:q,onChange:e=>{B(e.target.value),L(1)},className:"px-3 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[!e0.isLoading&&e4?.total>0&&(0,l.jsx)("span",{className:"text-sm text-gray-700 whitespace-nowrap",dangerouslySetInnerHTML:{__html:_("logs.showingResults").replace("{start}",String((z-1)*D+1)).replace("{end}",String(Math.min(z*D,e4.total))).replace("{total}",String(e4.total))}}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[!e0.isLoading&&e4?.total>0&&(0,l.jsx)("span",{className:"text-sm text-gray-700 min-w-[90px]",children:_("logs.pageOf").replace("{current}",String(z)).replace("{total}",String(e4.total_pages))}),(0,l.jsx)("button",{onClick:()=>L(e=>Math.max(1,e-1)),disabled:e0.isLoading||1===z,className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap shrink-0",children:_("logs.previous")}),(0,l.jsx)("button",{onClick:()=>L(e=>Math.min(e4.total_pages||1,e+1)),disabled:e0.isLoading||z===(e4.total_pages||1),className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap shrink-0",children:_("logs.next")})]})]})]})}),eG&&1===z&&eU&&(0,l.jsxs)("div",{className:"mb-4 px-4 py-2 bg-green-50 border border-greem-200 rounded-md flex items-center justify-between",children:[(0,l.jsx)("div",{className:"flex items-center gap-2",children:(0,l.jsx)("span",{className:"text-sm text-green-700",children:_("logs.autoRefreshEvery15Seconds")})}),(0,l.jsx)("button",{onClick:()=>eX(!1),className:"text-sm text-green-600 hover:text-green-800",children:_("logs.stop")})]}),(0,l.jsx)(eB.b,{columns:ex({sortProps:{sortBy:eH,sortOrder:eV,onSortChange:(e,s)=>{eY(e),eW(s),L(1)}},t:_}),data:sa,onRowClick:e=>{if(e.session_id&&(e.session_total_count||1)>1){eP(e.session_id),eE(e),eR(!0);return}eP(null),eE(e),eR(!0)},isLoading:e0.isLoading,loadingMessage:_("logs.loadingMessage"),noDataMessage:_("logs.noDataMessage")})]})]})]}),(0,l.jsx)(f.A,{children:(0,l.jsx)(T,{})}),(0,l.jsx)(f.A,{children:(0,l.jsx)(O,{})})]})]}),(0,l.jsx)(eS.S,{open:e$,onClose:()=>{eR(!1),eP(null)},logEntry:eI,sessionId:eF,accessToken:e,onOpenSettings:()=>eO(!0),allLogs:sa,onSelectLog:e=>{eE(e)},startTime:o()(R).utc().format("YYYY-MM-DD HH:mm:ss")})]})}t(95078)},55146:(e,s,t)=>{t.d(s,{X:()=>d});var l=t(95155);t(12115);var a=t(10639),r=t(88534),n=t(14290);let i=e=>null==e?"-":`\xa5${(0,r.HY)(e,8)}`,o=e=>null==e?"-":`${(100*e).toFixed(2)}%`,d=({costBreakdown:e,totalSpend:s,promptTokens:t,completionTokens:r,cacheHit:d})=>{let{t:c}=(0,n.o)(),m=d?.toLowerCase()==="true",x=void 0!==t||void 0!==r;if(!(e?.input_cost!==void 0||e?.output_cost!==void 0||x||e&&(void 0!==e.discount_percent&&0!==e.discount_percent||void 0!==e.discount_amount&&0!==e.discount_amount||void 0!==e.margin_percent&&0!==e.margin_percent||void 0!==e.margin_fixed_amount&&0!==e.margin_fixed_amount||void 0!==e.margin_total_amount&&0!==e.margin_total_amount)))return null;let u=e&&(void 0!==e.discount_percent&&0!==e.discount_percent||void 0!==e.discount_amount&&0!==e.discount_amount),h=e&&(void 0!==e.margin_percent&&0!==e.margin_percent||void 0!==e.margin_fixed_amount&&0!==e.margin_fixed_amount||void 0!==e.margin_total_amount&&0!==e.margin_total_amount),p=!m&&s>0&&e?.input_cost===void 0&&e?.output_cost===void 0&&((t??0)>0||(r??0)>0),g=(t??0)+(r??0),f=p&&g>0?(t??0)/g*s:void 0,j=p&&g>0?(r??0)/g*s:void 0,y=m?0:e?.input_cost??f,b=m?0:e?.output_cost??j,v=m?0:e?.original_cost??s,N=m?0:e?.total_cost??s;return(0,l.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,l.jsx)(a.A,{expandIconPosition:"start",items:[{key:"1",label:(0,l.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:c("logs.details.costBreakdown")}),(0,l.jsxs)("div",{className:"flex items-center space-x-2 mr-4",children:[(0,l.jsxs)("span",{className:"text-sm text-gray-500",children:[c("logs.details.total"),":"]}),(0,l.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:[i(s),m&&` (${c("logs.details.cached")})`]})]})]}),children:(0,l.jsxs)("div",{className:"p-6 space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-2 max-w-2xl",children:[(0,l.jsxs)("div",{className:"flex text-sm",children:[(0,l.jsxs)("span",{className:"text-gray-600 font-medium w-1/3",children:[c("logs.details.inputCost"),":"]}),(0,l.jsxs)("span",{className:"text-gray-900",children:[i(y),void 0!==t&&(0,l.jsx)("span",{className:"text-gray-500 font-normal ml-1",children:c("logs.details.promptTokens").replace("{count}",t.toLocaleString())})]})]}),(0,l.jsxs)("div",{className:"flex text-sm",children:[(0,l.jsxs)("span",{className:"text-gray-600 font-medium w-1/3",children:[c("logs.details.outputCost"),":"]}),(0,l.jsxs)("span",{className:"text-gray-900",children:[i(b),void 0!==r&&(0,l.jsx)("span",{className:"text-gray-500 font-normal ml-1",children:c("logs.details.completionTokens").replace("{count}",r.toLocaleString())})]})]}),e?.tool_usage_cost!==void 0&&e.tool_usage_cost>0&&(0,l.jsxs)("div",{className:"flex text-sm",children:[(0,l.jsxs)("span",{className:"text-gray-600 font-medium w-1/3",children:[c("logs.details.toolUsageCost"),":"]}),(0,l.jsx)("span",{className:"text-gray-900",children:i(e.tool_usage_cost)})]}),e?.additional_costs&&Object.keys(e.additional_costs).length>0&&(0,l.jsx)(l.Fragment,{children:Object.entries(e.additional_costs).map(([e,s])=>(0,l.jsxs)("div",{className:"flex text-sm",children:[(0,l.jsxs)("span",{className:"text-gray-600 font-medium w-1/3",children:[e,":"]}),(0,l.jsx)("span",{className:"text-gray-900",children:i(s)})]},e))})]}),!m&&(0,l.jsx)("div",{className:"pt-2 border-t border-gray-100 max-w-2xl",children:(0,l.jsxs)("div",{className:"flex text-sm font-semibold",children:[(0,l.jsxs)("span",{className:"text-gray-900 w-1/3",children:[c("logs.details.originalLlmCost"),":"]}),(0,l.jsx)("span",{className:"text-gray-900",children:i(v)})]})}),(u||h)&&(0,l.jsxs)("div",{className:"pt-2 space-y-2 max-w-2xl",children:[u&&(0,l.jsxs)("div",{className:"space-y-2",children:[void 0!==e.discount_percent&&0!==e.discount_percent&&(0,l.jsxs)("div",{className:"flex text-sm text-gray-600",children:[(0,l.jsxs)("span",{className:"font-medium w-1/3",children:[c("logs.details.discount")," (",o(e.discount_percent),"):"]}),(0,l.jsxs)("span",{className:"text-gray-900",children:["-",i(e.discount_amount)]})]}),void 0!==e.discount_amount&&void 0===e.discount_percent&&(0,l.jsxs)("div",{className:"flex text-sm text-gray-600",children:[(0,l.jsxs)("span",{className:"font-medium w-1/3",children:[c("logs.details.discountAmount"),":"]}),(0,l.jsxs)("span",{className:"text-gray-900",children:["-",i(e.discount_amount)]})]})]}),h&&(0,l.jsxs)("div",{className:"space-y-2",children:[void 0!==e.margin_percent&&0!==e.margin_percent&&(0,l.jsxs)("div",{className:"flex text-sm text-gray-600",children:[(0,l.jsxs)("span",{className:"font-medium w-1/3",children:[c("logs.details.margin")," (",o(e.margin_percent),"):"]}),(0,l.jsxs)("span",{className:"text-gray-900",children:["+",i((e.margin_total_amount||0)-(e.margin_fixed_amount||0))]})]}),void 0!==e.margin_fixed_amount&&0!==e.margin_fixed_amount&&(0,l.jsxs)("div",{className:"flex text-sm text-gray-600",children:[(0,l.jsxs)("span",{className:"font-medium w-1/3",children:[c("logs.details.margin"),":"]}),(0,l.jsxs)("span",{className:"text-gray-900",children:["+",i(e.margin_fixed_amount)]})]})]})]}),(0,l.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200 max-w-2xl",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsxs)("span",{className:"font-bold text-sm text-gray-900 w-1/3",children:[c("logs.details.finalCalculatedCost"),":"]}),(0,l.jsxs)("span",{className:"text-sm font-bold text-gray-900",children:[i(N),m&&` (${c("logs.details.cached")})`]})]})})]})}]})})}},58617:(e,s,t)=>{t.d(s,{S:()=>eY});var l=t(95155),a=t(12115),r=t(9194),n=t(87278),i=t(15248),o=t(45960),d=t(61383),c=t(34537),m=t(32967),x=t(86901),u=t(83455),h=t(41326),p=t(54481),g=t(22277),f=t(48849),j=t(48091),y=t(17432),b=t(50218),v=t(73590),N=t.n(v),_=t(90314);let w="24px",k="request",S="response",A="monospace",C="#f0f0f0";var M=t(14290);let{Text:z}=h.A;function T({log:e,onClose:s,onPrevious:t,onNext:a,statusLabel:r,statusColor:n,environment:i}){let{t:o}=(0,M.o)(),d=e.custom_llm_provider||"",c=d?(0,_.li)(d):null;return(0,l.jsxs)("div",{style:{padding:"16px 24px",borderBottom:`1px solid ${C}`,backgroundColor:"#fff",position:"sticky",top:0,zIndex:10},children:[(0,l.jsx)(L,{model:e.model,providerLogo:c?.logo,providerName:c?.displayName}),(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[(0,l.jsx)(D,{requestId:e.request_id}),(0,l.jsx)(I,{onPrevious:t,onNext:a,onClose:s})]}),(0,l.jsx)(E,{log:e,statusLabel:r,statusColor:n,environment:i})]})}function L({model:e,providerLogo:s,providerName:t}){return(0,l.jsxs)(p.A,{size:8,style:{marginBottom:8},children:[s&&(0,l.jsx)("img",{src:s,alt:t||"Provider",style:{width:24,height:24},onError:e=>{e.target.style.display="none"}}),(0,l.jsxs)(p.A,{size:8,direction:"horizontal",children:[(0,l.jsx)(z,{strong:!0,style:{fontSize:14},children:e}),t&&(0,l.jsx)(z,{type:"secondary",style:{fontSize:12},children:t})]})]})}function D({requestId:e}){let{t:s}=(0,M.o)();return(0,l.jsx)("div",{style:{flex:1,minWidth:0},children:(0,l.jsx)(g.A,{title:e,children:(0,l.jsx)(z,{strong:!0,copyable:{text:e,tooltips:[s("logs.details.copyRequestId"),s("logs.details.copied")]},style:{fontSize:16,fontFamily:A,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},children:e})})})}function I({onPrevious:e,onNext:s,onClose:t}){let{t:a}=(0,M.o)(),r={border:"1px solid #d9d9d9",borderRadius:4,padding:"0 4px",fontSize:12,fontFamily:"monospace",marginLeft:4,background:"#fafafa"};return(0,l.jsxs)(p.A,{size:4,split:(0,l.jsx)("div",{style:{width:1,height:20,background:C}}),children:[(0,l.jsxs)(n.Ay,{type:"text",size:"small",onClick:e,children:[(0,l.jsx)(j.A,{}),(0,l.jsx)("span",{style:r,children:"K"})]}),(0,l.jsxs)(n.Ay,{type:"text",size:"small",onClick:s,children:[(0,l.jsx)(y.A,{}),(0,l.jsx)("span",{style:r,children:"J"})]}),(0,l.jsx)(g.A,{title:a("logs.details.escToClose"),children:(0,l.jsx)(n.Ay,{type:"text",icon:(0,l.jsx)(b.A,{}),onClick:t})})]})}function E({log:e,statusLabel:s,statusColor:t,environment:a}){let{t:r}=(0,M.o)();return(0,l.jsxs)(p.A,{size:12,children:[(0,l.jsx)(f.A,{color:t,children:s}),(0,l.jsxs)(f.A,{children:[r("logs.details.env"),": ",a]}),(0,l.jsxs)(p.A,{size:8,children:[(0,l.jsx)(z,{type:"secondary",style:{fontSize:13},children:N()(e.startTime).format("MMM D, YYYY h:mm:ss A")}),(0,l.jsxs)(z,{type:"secondary",style:{fontSize:13},children:["(",N()(e.startTime).fromNow(),")"]})]})]})}var $=t(99876),R=t(69779),F=t(30648),q=t(95049),B=t(10639),P=t(55895),K=t(99904),O=t(88534),H=t(62819),Y=t(55146),V=t(1207),W=t(95078);let{Text:U}=h.A;function J({value:e,maxWidth:s=180}){let{t}=(0,M.o)();return e?(0,l.jsx)(g.A,{title:e,children:(0,l.jsx)(U,{copyable:{text:e,tooltips:[t("logs.details.copy"),t("logs.details.copied")]},style:{maxWidth:s,display:"inline-block",verticalAlign:"bottom",fontFamily:A,fontSize:12},ellipsis:!0,children:e})}):(0,l.jsx)(U,{type:"secondary",children:"-"})}let{Text:G}=h.A;function X({prompt:e=0,completion:s=0,total:t=0}){return(0,l.jsxs)(G,{children:[t.toLocaleString()," (",e.toLocaleString()," prompt tokens + ",s.toLocaleString()," completion tokens)"]})}var Z=t(18323);t(58796);let{Text:Q}=h.A;function ee({data:e}){return e?(0,l.jsx)("div",{style:{maxHeight:400,overflow:"auto",background:"#fafafa",padding:12,borderRadius:4},children:(0,l.jsx)("div",{className:"[&_[role='tree']]:bg-white [&_[role='tree']]:text-slate-900",children:(0,l.jsx)(Z.UU,{data:e,style:Z.k5,clickToExpandNode:!0})})}):(0,l.jsx)(Q,{type:"secondary",children:"No data"})}function es(e){if("string"==typeof e)try{return JSON.parse(e)}catch{}return e}function et(e){return Array.isArray(e)?e:e?[e]:[]}function el(e){if("string"==typeof e)try{return JSON.parse(e)}catch{}return e}var ea=t(70757),er=t(50139);let{Text:en}=h.A;function ei({tool:e}){let s=Object.entries(e.parameters?.properties||{}).map(([s,t])=>({key:s,name:s,type:t.type||"any",description:t.description||"-",required:e.parameters?.required?.includes(s)||!1})),t=[{title:"Parameter",dataIndex:"name",key:"name",render:(e,s)=>(0,l.jsxs)(en,{code:!0,children:[e,s.required&&(0,l.jsx)(en,{type:"danger",children:"*"})]})},{title:"Type",dataIndex:"type",key:"type",render:e=>(0,l.jsx)(en,{code:!0,style:{color:"#1890ff"},children:e})},{title:"Description",dataIndex:"description",key:"description",render:e=>(0,l.jsx)(en,{type:"secondary",children:e})}];return(0,l.jsxs)("div",{children:[e.description&&(0,l.jsx)("div",{style:{marginBottom:16},children:(0,l.jsx)(en,{style:{lineHeight:1.6},children:e.description})}),s.length>0&&(0,l.jsxs)("div",{children:[(0,l.jsx)(en,{type:"secondary",style:{fontSize:12,display:"block",marginBottom:8},children:"Parameters"}),(0,l.jsx)(er.A,{dataSource:s,columns:t,pagination:!1,size:"small",bordered:!0})]}),e.called&&e.callData&&(0,l.jsxs)("div",{style:{marginTop:16},children:[(0,l.jsx)(en,{type:"secondary",style:{fontSize:12,display:"block",marginBottom:8},children:"Called With"}),(0,l.jsx)("div",{style:{background:"#f6ffed",border:"1px solid #b7eb8f",borderRadius:4,padding:12},children:(0,l.jsx)("pre",{style:{margin:0,fontSize:12,whiteSpace:"pre-wrap",wordBreak:"break-word"},children:JSON.stringify(e.callData.arguments,null,2)})})]})]})}function eo({tool:e}){let s={type:"function",function:{name:e.name,description:e.description,parameters:e.parameters}};return(0,l.jsx)("pre",{style:{margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word",fontSize:12,background:"#fafafa",padding:12,borderRadius:4,maxHeight:300,overflow:"auto"},children:JSON.stringify(s,null,2)})}let{Text:ed}=h.A;function ec({tool:e}){let[s,t]=(0,a.useState)("formatted");return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:12},children:[(0,l.jsx)(ed,{type:"secondary",style:{fontSize:12},children:"Description"}),(0,l.jsxs)(P.Ay.Group,{size:"small",value:s,onChange:e=>t(e.target.value),children:[(0,l.jsx)(P.Ay.Button,{value:"formatted",children:"Formatted"}),(0,l.jsx)(P.Ay.Button,{value:"json",children:"JSON"})]})]}),"formatted"===s?(0,l.jsx)(ei,{tool:e}):(0,l.jsx)(eo,{tool:e})]})}let{Text:em}=h.A;function ex({tool:e}){let[s,t]=(0,a.useState)(!1);return(0,l.jsxs)("div",{style:{border:"1px solid #f0f0f0",borderRadius:8,overflow:"hidden"},children:[(0,l.jsxs)("div",{onClick:()=>t(!s),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",cursor:"pointer",background:s?"#fafafa":"#fff",transition:"background 0.2s"},children:[(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,l.jsx)(ea.A,{style:{color:"#8c8c8c",fontSize:14}}),(0,l.jsxs)(em,{style:{fontSize:14},children:[e.index,". ",e.name]})]}),(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,l.jsx)(f.A,{color:e.called?"blue":"default",children:e.called?"called":"not called"}),s?(0,l.jsx)(y.A,{style:{fontSize:12,color:"#8c8c8c"}}):(0,l.jsx)(o.A,{style:{fontSize:12,color:"#8c8c8c"}})]})]}),s&&(0,l.jsx)("div",{style:{padding:"16px",borderTop:"1px solid #f0f0f0",background:"#fff"},children:(0,l.jsx)(ec,{tool:e})})]})}let{Text:eu}=h.A;function eh({log:e}){let s=function(e){let s,t=!(s=el(e.proxy_server_request||e.messages))||Array.isArray(s)?[]:"object"==typeof s&&s.tools&&Array.isArray(s.tools)?s.tools:[];if(0===t.length)return[];let l=function(e){let s=el(e.response);if(!s||"object"!=typeof s)return[];let t=s.choices;if(Array.isArray(t)&&t.length>0){let e=t[0].message;if(e&&Array.isArray(e.tool_calls))return e.tool_calls}if(Array.isArray(s.content)){let e=s.content.filter(e=>"tool_use"===e.type);if(e.length>0)return e.map(e=>({id:e.id,type:"function",function:{name:e.name,arguments:JSON.stringify(e.input||{})}}))}return[]}(e),a=new Set(l.map(e=>e.function?.name).filter(Boolean)),r=new Map;return l.forEach(e=>{let s=e.function?.name;s&&r.set(s,{id:e.id,name:s,arguments:function(e){try{return JSON.parse(e)}catch{return{}}}(e.function?.arguments||"{}")})}),t.map((e,s)=>{let t=e.function?.name||e.name||`Tool ${s+1}`;return{index:s+1,name:t,description:e.function?.description||e.description||"",parameters:e.function?.parameters||e.input_schema||{},called:a.has(t),callData:r.get(t)}})}(e);if(0===s.length)return null;let t=s.length,a=s.filter(e=>e.called).length,r=s.slice(0,2).map(e=>e.name).join(", "),n=s.length>2;return(0,l.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,l.jsx)(B.A,{expandIconPosition:"start",items:[{key:"1",label:(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Tools"}),(0,l.jsxs)(eu,{type:"secondary",style:{fontSize:14},children:[t," provided, ",a," called"]}),(0,l.jsxs)(eu,{type:"secondary",style:{fontSize:14},children:["â€¢ ",r,n&&"..."]})]}),children:(0,l.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:s.map(e=>(0,l.jsx)(ex,{tool:e},e.name))})}]})})}let ep=e=>{if(!e)return{};if("string"==typeof e)try{return JSON.parse(e)}catch{return{raw:e}}return e};var eg=t(87056),ef=t(99722);let{Text:ej}=h.A;function ey({type:e,tokens:s,cost:t,onCopy:a,isCollapsed:r,onToggleCollapse:i}){let{t:o}=(0,M.o)();return(0,l.jsxs)("div",{onClick:i,style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 16px",borderBottom:r?"none":"1px solid #f0f0f0",background:"#fafafa",cursor:i?"pointer":"default",transition:"background 0.15s ease"},onMouseEnter:e=>{i&&(e.currentTarget.style.background="#f5f5f5")},onMouseLeave:e=>{e.currentTarget.style.background="#fafafa"},children:[(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:16},children:[i&&(0,l.jsx)("div",{style:{display:"flex",alignItems:"center"},children:r?(0,l.jsx)(y.A,{style:{fontSize:10,color:"#8c8c8c"}}):(0,l.jsx)(j.A,{style:{fontSize:10,color:"#8c8c8c"}})}),(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:["input"===e?(0,l.jsx)(ef.A,{style:{color:"#8c8c8c",fontSize:14}}):(0,l.jsx)("span",{style:{fontSize:14,filter:"grayscale(1)",opacity:.6},children:"âœ¨"}),(0,l.jsx)(ej,{style:{fontWeight:500,fontSize:14},children:o("input"===e?"logs.details.input":"logs.details.output")})]}),void 0!==s&&(0,l.jsxs)(ej,{type:"secondary",style:{fontSize:12},children:[o("logs.details.tokens"),": ",s.toLocaleString()]}),void 0!==t&&(0,l.jsxs)(ej,{type:"secondary",style:{fontSize:12},children:[o("logs.details.cost"),": $",t.toFixed(6)]})]}),(0,l.jsx)(g.A,{title:o("logs.details.copy"),children:(0,l.jsx)(n.Ay,{type:"text",size:"small",icon:(0,l.jsx)(c.A,{}),onClick:e=>{e.stopPropagation(),a()}})})]})}let{Text:eb}=h.A;function ev({label:e,content:s,defaultExpanded:t=!1}){let{t:r}=(0,M.o)(),[n,i]=(0,a.useState)(t),[d,c]=(0,a.useState)(!1),m=s?.length||0;return s&&0!==m?(0,l.jsxs)("div",{style:{marginBottom:8},children:[(0,l.jsxs)("div",{onClick:()=>i(!n),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),style:{display:"flex",alignItems:"center",gap:6,cursor:"pointer",padding:"4px 0",borderRadius:4,background:d?"#f5f5f5":"transparent",transition:"background 0.15s ease",marginBottom:4*!!n},children:[n?(0,l.jsx)(y.A,{style:{fontSize:10,color:"#8c8c8c"}}):(0,l.jsx)(o.A,{style:{fontSize:10,color:"#8c8c8c"}}),(0,l.jsx)(eb,{type:"secondary",style:{fontSize:10,letterSpacing:"0.5px",textTransform:"uppercase"},children:e}),(0,l.jsxs)(eb,{type:"secondary",style:{fontSize:10},children:["(",r("logs.details.charCount").replace("{count}",m.toLocaleString()),")"]})]}),(0,l.jsx)("div",{style:{maxHeight:n?"2000px":"0px",overflow:"hidden",transition:"max-height 0.2s ease-out, opacity 0.2s ease-out",opacity:+!!n},children:(0,l.jsx)("div",{style:{paddingLeft:16,fontSize:13,lineHeight:1.7,color:"#262626",borderLeft:"1px solid #f0f0f0",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:s})})]}):null}let{Text:eN}=h.A;function e_({tool:e,compact:s=!1}){return(0,l.jsxs)("div",{style:{background:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:6,padding:s?"6px 10px":"10px 14px",marginTop:8,fontFamily:"monospace",fontSize:12,position:"relative"},children:[(0,l.jsx)("div",{style:{position:"absolute",top:-8,left:12,background:"#fff",padding:"0 6px",fontSize:10,color:"#8c8c8c",border:"1px solid #e9ecef",borderRadius:3},children:"function"}),(0,l.jsx)(eN,{strong:!0,style:{fontSize:13,display:"block",marginBottom:6},children:e.name}),Object.keys(e.arguments).length>0&&(0,l.jsx)("div",{children:Object.entries(e.arguments).map(([e,s])=>(0,l.jsxs)("div",{style:{marginBottom:2},children:[(0,l.jsxs)(eN,{type:"secondary",style:{fontSize:12},children:[e,":"," "]}),(0,l.jsx)(eN,{style:{fontSize:12},children:JSON.stringify(s)})]},e))})]})}let{Text:ew}=h.A;function ek({label:e,content:s,toolCalls:t,isCompact:a=!1}){let r=s&&"null"!==s&&s.length>0?s:null,n=t&&t.length>0;return r||n?(0,l.jsxs)("div",{style:{marginBottom:8*!!a},children:[(0,l.jsx)(ew,{type:"secondary",style:{fontSize:10,letterSpacing:"0.5px",textTransform:"uppercase",display:"block",marginBottom:3},children:e}),r&&(0,l.jsx)("div",{style:{fontSize:13,lineHeight:1.7,color:"#262626",whiteSpace:"pre-wrap",wordBreak:"break-word",marginBottom:6*!!n},children:r}),n&&(0,l.jsx)("div",{children:t.map((e,s)=>(0,l.jsx)(e_,{tool:e,compact:a},e.id||s))})]}):null}let{Text:eS}=h.A;function eA({messages:e}){let{t:s}=(0,M.o)(),[t,r]=(0,a.useState)(!1),[n,i]=(0,a.useState)(!1);return 0===e.length?null:(0,l.jsxs)("div",{style:{marginBottom:8},children:[(0,l.jsxs)("div",{onClick:()=>r(!t),onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),style:{display:"flex",alignItems:"center",gap:6,cursor:"pointer",padding:"4px 0",borderRadius:4,background:n?"#f5f5f5":"transparent",transition:"background 0.15s ease",marginBottom:4*!!t},children:[t?(0,l.jsx)(y.A,{style:{fontSize:10,color:"#8c8c8c"}}):(0,l.jsx)(o.A,{style:{fontSize:10,color:"#8c8c8c"}}),(0,l.jsxs)(eS,{type:"secondary",style:{fontSize:10,letterSpacing:"0.5px",textTransform:"uppercase"},children:[s("logs.details.history")," (",s("logs.details.messageCount").replace("{count}",String(e.length)),")"]})]}),(0,l.jsx)("div",{style:{maxHeight:t?"2000px":"0px",overflow:"hidden",transition:"max-height 0.2s ease-out, opacity 0.2s ease-out",opacity:+!!t},children:(0,l.jsx)("div",{style:{paddingLeft:16,borderLeft:"1px solid #f0f0f0"},children:e.map((e,s)=>(0,l.jsx)(ek,{label:e.role.toUpperCase(),content:e.content,toolCalls:e.toolCalls,isCompact:!0},s))})})]})}function eC({messages:e,promptTokens:s,inputCost:t}){let{t:r}=(0,M.o)(),[n,i]=(0,a.useState)(!1);if(0===e.length)return null;let o=e.find(e=>"system"===e.role),d=e.filter(e=>"system"!==e.role),c=d.length>0?d[d.length-1]:null,m=d.slice(0,-1);return(0,l.jsxs)("div",{style:{border:"1px solid #f0f0f0",borderRadius:6,marginBottom:8,overflow:"hidden"},children:[(0,l.jsx)(ey,{type:"input",tokens:s,cost:t,onCopy:()=>{let e=c?.content||"";navigator.clipboard.writeText(e),eg.Ay.success(r("logs.details.inputCopied"))},isCollapsed:n,onToggleCollapse:()=>i(!n)}),(0,l.jsx)("div",{style:{maxHeight:n?"0px":"10000px",overflow:"hidden",transition:"max-height 0.3s ease-out, opacity 0.3s ease-out",opacity:+!n},children:(0,l.jsxs)("div",{style:{padding:"12px 16px"},children:[o&&(0,l.jsx)(ev,{label:"SYSTEM",content:o.content,defaultExpanded:!!(o.content&&o.content.length<200)}),m.length>0&&(0,l.jsx)(eA,{messages:m}),c&&(0,l.jsx)(ek,{label:c.role.toUpperCase(),content:c.content,toolCalls:c.toolCalls})]})})]})}let{Text:eM}=h.A;function ez({message:e,completionTokens:s,outputCost:t}){let{t:r}=(0,M.o)(),[n,i]=(0,a.useState)(!1),o=()=>{if(!e)return;let s=e.content||"";navigator.clipboard.writeText(s),eg.Ay.success(r("logs.details.outputCopied"))};return e?(0,l.jsxs)("div",{style:{border:"1px solid #f0f0f0",borderRadius:6,overflow:"hidden"},children:[(0,l.jsx)(ey,{type:"output",tokens:s,cost:t,onCopy:o,isCollapsed:n,onToggleCollapse:()=>i(!n)}),(0,l.jsx)("div",{style:{maxHeight:n?"0px":"10000px",overflow:"hidden",transition:"max-height 0.3s ease-out, opacity 0.3s ease-out",opacity:+!n},children:(0,l.jsx)("div",{style:{padding:"12px 16px"},children:(0,l.jsx)(ek,{label:r("logs.details.assistant").toUpperCase(),content:e.content,toolCalls:e.toolCalls})})})]}):(0,l.jsxs)("div",{style:{border:"1px solid #f0f0f0",borderRadius:6,overflow:"hidden"},children:[(0,l.jsx)(ey,{type:"output",tokens:s,cost:t,onCopy:o,isCollapsed:n,onToggleCollapse:()=>i(!n)}),(0,l.jsx)("div",{style:{maxHeight:n?"0px":"10000px",overflow:"hidden",transition:"max-height 0.3s ease-out, opacity 0.3s ease-out",opacity:+!n},children:(0,l.jsx)("div",{style:{padding:"12px 16px"},children:(0,l.jsx)(eM,{type:"secondary",style:{fontSize:13,fontStyle:"italic"},children:r("logs.details.responseDataNotAvailable")})})})]})}function eT({request:e,response:s,metrics:t}){let a,r,n,{requestMessages:i,responseMessage:o}=(a=[],e?.messages&&Array.isArray(e.messages)&&e.messages.forEach(e=>{let s;a.push({role:e.role||"user",content:"string"==typeof(s=e.content)?s:Array.isArray(s)?s.map(e=>"string"==typeof e?e:"text"===e.type?e.text:"image_url"===e.type?"[Image]":JSON.stringify(e)).join("\n"):JSON.stringify(s),toolCallId:e.tool_call_id})}),r=null,(n=s?.choices?.[0]?.message)&&(r={role:n.role||"assistant",content:n.content||"",toolCalls:(e=>{if(e&&Array.isArray(e))return e.map(e=>({id:e.id||"",name:e.function?.name||"unknown",arguments:ep(e.function?.arguments)}))})(n.tool_calls)}),{requestMessages:a,responseMessage:r});return(0,l.jsxs)("div",{children:[(0,l.jsx)(eC,{messages:i,promptTokens:t?.prompt_tokens,inputCost:t?.input_cost}),(0,l.jsx)(ez,{message:o,completionTokens:t?.completion_tokens,outputCost:t?.output_cost})]})}let{Text:eL}=h.A;function eD({logEntry:e,onOpenSettings:s,isLoadingDetails:t=!1,accessToken:a}){var r,n;let{t:i}=(0,M.o)(),o=e.metadata||{},d="failure"===o.status,c=d?o.error_information:null,m=!!(r=e.messages)&&(Array.isArray(r)?r.length>0:"object"==typeof r&&Object.keys(r).length>0),x=!!(n=e.response)&&Object.keys(es(n)).length>0,u=!m&&!x&&!d&&!t,h=o?.guardrail_information,p=et(h),g=p.length>0,f=p.reduce((e,s)=>{let t=s?.masked_entity_count;return t?e+Object.values(t).reduce((e,s)=>"number"==typeof s?e+s:e,0):e},0),j=0===p.length?"-":1===p.length?p[0]?.guardrail_name??"-":`${p.length} guardrails`,y=o.vector_store_request_metadata&&Array.isArray(o.vector_store_request_metadata)&&o.vector_store_request_metadata.length>0;return(0,l.jsxs)("div",{style:{padding:`${w} ${w} 0`},children:[d&&c&&(0,l.jsx)($.A,{type:"error",showIcon:!0,message:i("logs.details.requestFailed"),description:(0,l.jsx)(eI,{errorInfo:c}),className:"mb-6"}),e.request_tags&&Object.keys(e.request_tags).length>0&&(0,l.jsx)(eE,{tags:e.request_tags}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,l.jsx)(R.A,{title:i("logs.details.requestDetails"),size:"small",bordered:!1,style:{marginBottom:0},children:(0,l.jsxs)(F.A,{column:2,size:"small",children:[(0,l.jsx)(F.A.Item,{label:i("logs.details.model"),children:e.model}),(0,l.jsx)(F.A.Item,{label:i("logs.details.provider"),children:e.custom_llm_provider||"-"}),(0,l.jsx)(F.A.Item,{label:i("logs.details.callType"),children:e.call_type}),(0,l.jsx)(F.A.Item,{label:i("logs.details.modelId"),children:(0,l.jsx)(J,{value:e.model_id})}),(0,l.jsx)(F.A.Item,{label:i("logs.details.apiBase"),children:(0,l.jsx)(J,{value:e.api_base,maxWidth:200})}),e.requester_ip_address&&(0,l.jsx)(F.A.Item,{label:i("logs.details.ipAddress"),children:e.requester_ip_address}),g&&(0,l.jsx)(F.A.Item,{label:i("logs.details.guardrail"),children:(0,l.jsx)(e$,{label:j,maskedCount:f})})]})})}),(0,l.jsx)(eR,{logEntry:e,metadata:o}),(0,l.jsx)(Y.X,{costBreakdown:o?.cost_breakdown,totalSpend:e.spend??0,promptTokens:e.prompt_tokens,completionTokens:e.completion_tokens,cacheHit:e.cache_hit}),(0,l.jsx)(eh,{log:e}),u&&(0,l.jsx)("div",{className:"mb-6",children:(0,l.jsx)(V.k,{show:u,onOpenSettings:s})}),t?(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6 p-8 text-center",children:[(0,l.jsx)(q.A,{size:"default"}),(0,l.jsx)("div",{style:{marginTop:8,color:"#999"},children:i("logs.details.loadingRequestResponse")})]}):(0,l.jsx)(eF,{hasResponse:x,hasError:d,getRawRequest:()=>es(e.proxy_server_request||e.messages),getFormattedResponse:()=>d&&c?{error:{message:c.error_message||i("logs.details.errorOccurred"),type:c.error_class||"error",code:c.error_code||"unknown",param:null}}:es(e.response),logEntry:e}),g&&(0,l.jsx)("div",{id:"guardrail-section",children:(0,l.jsx)(H.A,{data:h,accessToken:a??null,logEntry:{request_id:e.request_id,user:e.user,model:e.model,startTime:e.startTime,metadata:e.metadata}})}),y&&(0,l.jsx)(W.z,{data:o.vector_store_request_metadata}),e.metadata&&Object.keys(e.metadata).length>0&&(0,l.jsx)(eB,{metadata:e.metadata}),(0,l.jsx)("div",{style:{height:w}})]})}function eI({errorInfo:e}){let{t:s}=(0,M.o)();return(0,l.jsxs)("div",{children:[e.error_code&&(0,l.jsxs)("div",{children:[(0,l.jsxs)(eL,{strong:!0,children:[s("logs.details.errorCode"),":"]})," ",e.error_code]}),e.error_message&&(0,l.jsxs)("div",{children:[(0,l.jsxs)(eL,{strong:!0,children:[s("logs.details.message"),":"]})," ",e.error_message]})]})}function eE({tags:e}){let{t:s}=(0,M.o)();return(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden p-4 mb-6",children:[(0,l.jsx)(eL,{strong:!0,style:{display:"block",marginBottom:8,fontSize:16},children:s("logs.details.tags")}),(0,l.jsx)(p.A,{size:8,wrap:!0,children:Object.entries(e).map(([e,s])=>(0,l.jsxs)(f.A,{children:[e,": ",String(s)]},e))})]})}function e$({label:e,maskedCount:s}){let{t}=(0,M.o)();return(0,l.jsxs)(p.A,{size:8,children:[(0,l.jsx)("a",{onClick:()=>{let e=document.getElementById("guardrail-section");e&&e.scrollIntoView({behavior:"smooth"})},style:{cursor:"pointer"},children:e}),s>0&&(0,l.jsx)(f.A,{color:"blue",children:t("logs.details.maskedCount").replace("{count}",String(s))})]})}function eR({logEntry:e,metadata:s}){let{t}=(0,M.o)(),a=e.cache_hit||s?.additional_usage_values?.cache_read_input_tokens&&s.additional_usage_values.cache_read_input_tokens>0,r=String(e.cache_hit??t("logs.details.none")),n="true"===r.toLowerCase()?"green":"false"===r.toLowerCase()?"red":"default";return(0,l.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,l.jsx)(R.A,{title:t("logs.details.metrics"),size:"small",style:{marginBottom:0},children:(0,l.jsxs)(F.A,{column:2,size:"small",children:[(0,l.jsx)(F.A.Item,{label:t("logs.details.tokens"),children:(0,l.jsx)(X,{prompt:e.prompt_tokens,completion:e.completion_tokens,total:e.total_tokens})}),(0,l.jsxs)(F.A.Item,{label:t("logs.details.cost"),children:["$",(0,O.HY)(e.spend||0,8)]}),(0,l.jsxs)(F.A.Item,{label:t("logs.details.duration"),children:[e.duration?.toFixed(3)," s"]}),a&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(F.A.Item,{label:t("logs.details.cacheHit"),children:(0,l.jsx)(f.A,{color:n,children:r})}),s?.additional_usage_values?.cache_read_input_tokens>0&&(0,l.jsx)(F.A.Item,{label:t("logs.details.cacheReadTokens"),children:(0,O.HY)(s.additional_usage_values.cache_read_input_tokens)}),s?.additional_usage_values?.cache_creation_input_tokens>0&&(0,l.jsx)(F.A.Item,{label:t("logs.details.cacheCreationTokens"),children:(0,O.HY)(s.additional_usage_values.cache_creation_input_tokens)})]}),s?.litellm_overhead_time_ms!==void 0&&null!==s.litellm_overhead_time_ms&&(0,l.jsxs)(F.A.Item,{label:t("logs.details.litellmOverhead"),children:[s.litellm_overhead_time_ms.toFixed(2)," ms"]}),(0,l.jsx)(F.A.Item,{label:t("logs.details.retries"),children:s?.attempted_retries!==void 0&&s?.attempted_retries!==null?s.attempted_retries>0?(0,l.jsxs)(l.Fragment,{children:[s.attempted_retries,void 0!==s.max_retries&&null!==s.max_retries?` / ${s.max_retries}`:""]}):(0,l.jsx)(f.A,{color:"green",children:t("logs.details.none")}):"-"}),(0,l.jsx)(F.A.Item,{label:t("logs.details.startTime"),children:N()(e.startTime).format("YYYY-MM-DDTHH:mm:ss.SSS[Z]")}),(0,l.jsx)(F.A.Item,{label:t("logs.details.endTime"),children:N()(e.endTime).format("YYYY-MM-DDTHH:mm:ss.SSS[Z]")})]})})})}function eF({hasResponse:e,hasError:s,getRawRequest:t,getFormattedResponse:r,logEntry:n}){let{t:i}=(0,M.o)(),[o,d]=(0,a.useState)(k),[c,m]=(0,a.useState)("pretty"),x=n.spend??0,u=n.prompt_tokens||0,h=n.completion_tokens||0,p=u+h,g=n.metadata?.cost_breakdown,f=g?.input_cost!==void 0&&g?.output_cost!==void 0,j=f?g.input_cost??0:p>0?x*u/p:0,y=f?g.output_cost??0:p>0?x*h/p:0;return(0,l.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,l.jsx)(B.A,{defaultActiveKey:["1"],expandIconPosition:"start",items:[{key:"1",label:(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},onClick:e=>{e.target.closest(".ant-radio-group")&&e.stopPropagation()},children:[(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-900",style:{margin:0},children:i("logs.details.requestAndResponse")}),(0,l.jsxs)(P.Ay.Group,{size:"small",value:c,onChange:e=>m(e.target.value),children:[(0,l.jsx)(P.Ay.Button,{value:"pretty",children:i("logs.details.pretty")}),(0,l.jsx)(P.Ay.Button,{value:"json",children:"JSON"})]})]}),children:(0,l.jsx)("div",{children:"pretty"===c?(0,l.jsx)(eT,{request:t(),response:r(),metrics:{prompt_tokens:u,completion_tokens:h,input_cost:j,output_cost:y}}):(0,l.jsx)(K.A,{activeKey:o,onChange:e=>d(e),tabBarExtraContent:(0,l.jsx)(eL,{copyable:{text:JSON.stringify(o===k?t():r(),null,2),tooltips:[i("logs.details.copyJson"),i("logs.details.copied")]},disabled:o===S&&!e&&!s}),items:[{key:k,label:i("logs.details.request"),children:(0,l.jsx)("div",{style:{paddingTop:16,paddingBottom:16},children:(0,l.jsx)(ee,{data:t(),mode:"formatted"})})},{key:S,label:i("logs.details.response"),children:(0,l.jsx)("div",{style:{paddingTop:16,paddingBottom:16},children:e||s?(0,l.jsx)(ee,{data:r(),mode:"formatted"}):(0,l.jsx)("div",{style:{textAlign:"center",padding:20,color:"#999",fontStyle:"italic"},children:i("logs.details.responseDataNotAvailable")})})}]})})}]})})}function eq({guardrailEntries:e}){let{t:s}=(0,M.o)(),t=e.every(e=>{let s=e?.guardrail_status||e?.status;return"pass"===s||"passed"===s||"success"===s});return(0,l.jsx)("div",{style:{textAlign:"left",marginBottom:12},children:(0,l.jsxs)("div",{onClick:()=>{let e=document.getElementById("guardrail-section");e&&e.scrollIntoView({behavior:"smooth"})},style:{display:"inline-flex",alignItems:"center",gap:6,padding:"4px 12px",borderRadius:16,cursor:"pointer",fontSize:13,fontWeight:500,backgroundColor:t?"#f0fdf4":"#fef2f2",color:t?"#15803d":"#b91c1c",border:`1px solid ${t?"#bbf7d0":"#fecaca"}`},children:[t?"âœ“":"âœ—"," ",s("logs.details.guardrailsEvaluated").replace("{count}",String(e.length)),(0,l.jsx)("span",{style:{fontSize:11,opacity:.7},children:"â†“"})]})})}function eB({metadata:e}){let{t:s}=(0,M.o)();return(0,l.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,l.jsx)(B.A,{defaultActiveKey:["1"],expandIconPosition:"start",items:[{key:"1",label:(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:s("logs.details.metadata")}),children:(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:8},children:(0,l.jsx)(eL,{copyable:{text:JSON.stringify(e,null,2),tooltips:[s("logs.details.copyMetadata"),s("logs.details.copied")]}})}),(0,l.jsx)("pre",{style:{maxHeight:300,overflowY:"auto",fontSize:12,fontFamily:A,whiteSpace:"pre-wrap",wordBreak:"break-all",margin:0},children:JSON.stringify(e,null,2)})]})}]})})}var eP=t(28436),eK=t(26708),eO=t(42696);function eH({row:e,isSelected:s,onClick:t}){let a=u.C1.includes(e.call_type),r=null!=e.duration?e.duration.toFixed(3):e.startTime&&e.endTime?((Date.parse(e.endTime)-Date.parse(e.startTime))/1e3).toFixed(3):"-";return(0,l.jsxs)("button",{type:"button",className:`w-full text-left pl-8 pr-2 py-1 transition-colors ${s?"bg-blue-50":"hover:bg-slate-100"}`,onClick:t,children:[(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[a?(0,l.jsx)(m.A,{size:12,className:"text-slate-500 flex-shrink-0"}):(0,l.jsx)(x.A,{size:12,className:"text-slate-500 flex-shrink-0"}),(0,l.jsx)("span",{className:"text-xs font-medium text-slate-900 truncate",children:function(e,s){let t=(s||"").trim();if(u.C1.includes(e))return t.replace(/^mcp:\s*/i,"").split("/").pop()||t||"mcp_tool";let l=(t.split("/").pop()||t).replace(/-20\d{6}.*$/i,"").replace(/:.*$/,""),a=l.match(/claude-[a-z0-9-]+/i);return a?a[0]:l||"llm_call"}(e.call_type,e.model)})]}),(0,l.jsxs)("div",{className:"text-[10px] text-slate-500 mt-0 flex items-center gap-1.5 font-mono",children:[(0,l.jsxs)("span",{children:[r,"s"]}),e.spend?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{children:"\xb7"}),(0,l.jsx)("span",{children:(0,O.ee)(e.spend)})]}):null,e.total_tokens?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{children:"\xb7"}),(0,l.jsxs)("span",{children:[e.total_tokens," tok"]})]}):null]})]})}function eY({open:e,onClose:s,logEntry:t,sessionId:m,accessToken:x,onOpenSettings:h,allLogs:p=[],onSelectLog:g,startTime:f}){let{t:j}=(0,M.o)(),y=!!m,[b,v]=(0,a.useState)(null),[N,_]=(0,a.useState)(!1),[w,k]=(0,a.useState)(!1),{data:S=[]}=(0,eK.I)({queryKey:["sessionLogs",m],queryFn:async()=>{if(!m||!x)return[];let e=await (0,eP.sessionSpendLogsCall)(x,m);return(e.data||e||[]).map(e=>({...e,duration:(Date.parse(e.endTime)-Date.parse(e.startTime))/1e3})).sort((e,s)=>{let t=+!!u.C1.includes(e.call_type),l=+!!u.C1.includes(s.call_type);return t!==l?t-l:new Date(e.startTime).getTime()-new Date(s.startTime).getTime()})},enabled:!!(e&&y&&m&&x)}),A=(0,a.useMemo)(()=>y?S.length?b?S.find(e=>e.request_id===b)||S[0]:t?.request_id&&S.find(e=>e.request_id===t.request_id)||S[0]:null:t,[y,t,b,S]);(0,a.useEffect)(()=>{y&&S.length&&(b&&S.some(e=>e.request_id===b)||v(t?.request_id&&S.some(e=>e.request_id===t.request_id)?t.request_id:S[0].request_id))},[y,t,b,S]),(0,a.useEffect)(()=>{e?_(!1):(y&&v(null),k(!1))},[e,y]);let{selectNextLog:C,selectPreviousLog:z}=function({isOpen:e,currentLog:s,allLogs:t,onClose:l,onSelectLog:r}){(0,a.useEffect)(()=>{let s=s=>{var t;if(!((t=s.target)instanceof HTMLInputElement||t instanceof HTMLTextAreaElement)&&e)switch(s.key){case"Escape":l();break;case"j":case"J":i();break;case"k":case"K":n()}};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[e,s,t]);let n=()=>{if(!s||!t.length||!r)return;let e=t.findIndex(e=>e.request_id===s.request_id);e<t.length-1&&r(t[e+1])},i=()=>{if(!s||!t.length||!r)return;let e=t.findIndex(e=>e.request_id===s.request_id);e>0&&r(t[e-1])};return{selectNextLog:n,selectPreviousLog:i}}({isOpen:e,currentLog:A,allLogs:y?S:p,onClose:s,onSelectLog:e=>{y&&v(e.request_id),g?.(e)}}),L=((e,s,t)=>{let{accessToken:l}=(0,eO.A)();return(0,eK.I)({queryKey:["logDetails",e,s,l],queryFn:async()=>l&&e&&s?await (0,eP.uiSpendLogDetailsCall)(l,e,s):null,enabled:t&&!!l&&!!e&&!!s,staleTime:6e5,gcTime:6e5})})(A?.request_id,f,e&&!!A?.request_id),D=L.data,I=L.isLoading,E=(0,a.useMemo)(()=>A?{...A,messages:D?.messages||A.messages,response:D?.response||A.response,proxy_server_request:D?.proxy_server_request||A.proxy_server_request}:null,[A,D]),$=A?.metadata||{},R=j("failure"===$.status?"logs.columns.failure":"logs.columns.success"),F="failure"===$.status?"error":"success",q=$?.user_api_key_team_alias||"default",B=S.reduce((e,s)=>e+(s.spend||0),0),P=S.length>0?new Date(Math.min(...S.map(e=>new Date(e.startTime).getTime()))):null,K=S.length>0?new Date(Math.max(...S.map(e=>new Date(e.endTime).getTime()))):null,H=P&&K?((K.getTime()-P.getTime())/1e3).toFixed(2):"0.00",Y=S.filter(e=>!u.C1.includes(e.call_type)).length,V=S.filter(e=>u.C1.includes(e.call_type)).length,W=y?S:A?[A]:[],U=y?m||"":A?.request_id||"",J=U.length>14?`${U.slice(0,11)}...`:U,G=async()=>{if(U)try{await navigator.clipboard.writeText(U),k(!0),setTimeout(()=>k(!1),1200)}catch{}};return A&&E?(0,l.jsx)(r.A,{title:null,placement:"right",onClose:s,open:e,width:"60%",closable:!1,mask:!0,maskClosable:!0,styles:{body:{padding:0,overflow:"hidden"},header:{display:"none"}},children:(0,l.jsxs)("div",{style:{height:"100%"},className:"flex relative",children:[N?(0,l.jsx)(n.Ay,{type:"text",size:"small",icon:(0,l.jsx)(o.A,{}),onClick:()=>_(!1),className:"absolute top-2 left-2 z-20 !bg-white !border !border-slate-200 !rounded-md","aria-label":j("logs.details.expandTraceSidebar")}):(0,l.jsx)(n.Ay,{type:"text",size:"small",icon:(0,l.jsx)(i.A,{}),onClick:()=>_(!0),className:"absolute top-2 left-2 z-20 !bg-white !border !border-slate-200 !rounded-md","aria-label":j("logs.details.collapseTraceSidebar")}),!N&&(0,l.jsxs)("div",{className:"border-r border-slate-200 bg-slate-50 flex flex-col",style:{width:224},children:[(0,l.jsxs)("div",{className:"pl-12 pr-3 py-2 border-b border-slate-200 bg-white",children:[(0,l.jsx)("div",{className:"flex items-start justify-between gap-2",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-[10px] uppercase tracking-wide text-slate-500",children:j(y?"logs.details.session":"logs.details.trace")}),(0,l.jsxs)("div",{className:"font-mono text-[12px] text-slate-900 leading-tight flex items-center gap-1",children:[(0,l.jsx)("span",{className:"truncate",children:J}),(0,l.jsx)("button",{type:"button",onClick:G,className:"text-slate-400 hover:text-slate-600","aria-label":j("logs.details.copyTraceId"),children:w?(0,l.jsx)(d.A,{className:"text-[11px]"}):(0,l.jsx)(c.A,{className:"text-[11px]"})})]})]})}),(0,l.jsxs)("div",{className:"mt-1 text-[11px] text-slate-500 font-mono",children:[j("logs.details.requestCount").replace("{count}",String(W.length)),(0,l.jsx)("span",{className:"mx-1.5",children:"\xb7"}),y?`${Y} LLM`:`${W.filter(e=>!u.C1.includes(e.call_type)).length} LLM`,(0,l.jsx)("span",{className:"mx-1.5",children:"\xb7"}),y?`${V} MCP`:`${W.filter(e=>u.C1.includes(e.call_type)).length} MCP`,(0,l.jsx)("span",{className:"mx-1.5",children:"\xb7"}),y?(0,O.ee)(B):(0,O.ee)(A.spend||0),y&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"mx-1.5",children:"\xb7"}),H,"s"]})]})]}),(0,l.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[et($?.guardrail_information).length>0&&(0,l.jsx)("div",{className:"px-3 pt-2",children:(0,l.jsx)(eq,{guardrailEntries:et($?.guardrail_information)})}),y?(0,l.jsx)("div",{className:"py-1",children:(0,l.jsxs)("div",{className:"relative pl-2",children:[(0,l.jsx)("div",{className:"absolute left-4 top-1 bottom-1 border-l border-slate-300"}),W.map((e,s)=>{let t=s===W.length-1;return(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("div",{className:"absolute left-4 top-3 w-3 border-t border-slate-300"}),t&&(0,l.jsx)("div",{className:"absolute left-4 top-3 bottom-0 w-px bg-slate-50"}),(0,l.jsx)(eH,{row:e,isSelected:e.request_id===A.request_id,onClick:()=>{v(e.request_id),g?.(e)}})]},e.request_id)})]})}):(0,l.jsx)("div",{className:"py-1",children:W.map(e=>(0,l.jsx)(eH,{row:e,isSelected:e.request_id===A.request_id,onClick:()=>g?.(e)},e.request_id))})]})]}),(0,l.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,l.jsx)(T,{log:A,onClose:s,onPrevious:z,onNext:C,statusLabel:R,statusColor:F,environment:q}),(0,l.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,l.jsx)(eD,{logEntry:E,onOpenSettings:h,isLoadingDetails:I,accessToken:x??null})})]})]})}):null}},58737:(e,s,t)=>{t.d(s,{N:()=>a,e:()=>r});var l=t(12115);let a=()=>{let[e,s]=(0,l.useState)("http://localhost:4000");return(0,l.useEffect)(()=>{{let{protocol:e,host:t}=window.location;s(`${e}//${t}`)}},[]),e},r=25},62819:(e,s,t)=>{t.d(s,{A:()=>q});var l=t(95155),a=t(12115),r=t(22277);let n=e=>e>=.8?"text-green-600":"text-yellow-600",i=({entities:e})=>{let[s,t]=(0,a.useState)(!0),[r,i]=(0,a.useState)({});return e&&0!==e.length?(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsxs)("div",{className:"flex items-center mb-2 cursor-pointer",onClick:()=>t(!s),children:[(0,l.jsx)("svg",{className:`w-5 h-5 mr-2 transition-transform ${s?"transform rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,l.jsxs)("h4",{className:"font-medium",children:["Detected Entities (",e.length,")"]})]}),s&&(0,l.jsx)("div",{className:"space-y-2",children:e.map((e,s)=>{let t=r[s]||!1;return(0,l.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 cursor-pointer hover:bg-gray-100",onClick:()=>{i(e=>({...e,[s]:!e[s]}))},children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("svg",{className:`w-5 h-5 mr-2 transition-transform ${t?"transform rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,l.jsx)("span",{className:"font-medium mr-2",children:e.entity_type}),(0,l.jsxs)("span",{className:`font-mono ${n(e.score)}`,children:["Score: ",e.score.toFixed(2)]})]}),(0,l.jsxs)("span",{className:"text-xs text-gray-500",children:["Position: ",e.start,"-",e.end]})]}),t&&(0,l.jsx)("div",{className:"p-3 border-t bg-white",children:(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-2",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("span",{className:"font-medium w-1/3",children:"Entity Type:"}),(0,l.jsx)("span",{children:e.entity_type})]}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("span",{className:"font-medium w-1/3",children:"Position:"}),(0,l.jsxs)("span",{children:["Characters ",e.start,"-",e.end]})]}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("span",{className:"font-medium w-1/3",children:"Confidence:"}),(0,l.jsx)("span",{className:n(e.score),children:e.score.toFixed(2)})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[e.recognition_metadata&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("span",{className:"font-medium w-1/3",children:"Recognizer:"}),(0,l.jsx)("span",{children:e.recognition_metadata.recognizer_name})]}),(0,l.jsxs)("div",{className:"flex overflow-hidden",children:[(0,l.jsx)("span",{className:"font-medium w-1/3",children:"Identifier:"}),(0,l.jsx)("span",{className:"truncate text-xs font-mono",children:e.recognition_metadata.recognizer_identifier})]})]}),e.analysis_explanation&&(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("span",{className:"font-medium w-1/3",children:"Explanation:"}),(0,l.jsx)("span",{children:e.analysis_explanation})]})]})]})})]},s)})})]}):null},o=(e,s="slate")=>(0,l.jsx)("span",{className:`px-2 py-1 rounded-md text-xs font-medium inline-block ${{green:"bg-green-100 text-green-800",red:"bg-red-100 text-red-800",blue:"bg-blue-50 text-blue-700",slate:"bg-slate-100 text-slate-800",amber:"bg-amber-100 text-amber-800"}[s]}`,children:e}),d=e=>e?o("detected","red"):o("not detected","slate"),c=({title:e,count:s,defaultOpen:t=!0,right:r,children:n})=>{let[i,o]=(0,a.useState)(t);return(0,l.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 cursor-pointer hover:bg-gray-100",onClick:()=>o(e=>!e),children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("svg",{className:`w-5 h-5 mr-2 transition-transform ${i?"transform rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,l.jsxs)("h5",{className:"font-medium",children:[e," ","number"==typeof s&&(0,l.jsxs)("span",{className:"text-gray-500 font-normal",children:["(",s,")"]})]})]}),(0,l.jsx)("div",{children:r})]}),i&&(0,l.jsx)("div",{className:"p-3 border-t bg-white",children:n})]})},m=({label:e,children:s,mono:t})=>(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("span",{className:"font-medium w-1/3",children:e}),(0,l.jsx)("span",{className:t?"font-mono text-sm break-all":"",children:s})]}),x=()=>(0,l.jsx)("div",{className:"my-3 border-t"}),u=({response:e})=>{if(!e)return null;let s=e.outputs??e.output??[],t="GUARDRAIL_INTERVENED"===e.action?"red":"green",a=(0,l.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.guardrailCoverage?.textCharacters&&o(`text guarded ${e.guardrailCoverage.textCharacters.guarded??0}/${e.guardrailCoverage.textCharacters.total??0}`,"blue"),e.guardrailCoverage?.images&&o(`images guarded ${e.guardrailCoverage.images.guarded??0}/${e.guardrailCoverage.images.total??0}`,"blue")]}),r=e.usage&&(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(e.usage).map(([e,s])=>"number"==typeof s?(0,l.jsxs)("span",{className:"px-2 py-1 bg-slate-100 text-slate-800 rounded-md text-xs font-medium",children:[e,": ",s]},e):null)});return(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(m,{label:"Action:",children:o(e.action??"N/A",t)}),e.actionReason&&(0,l.jsx)(m,{label:"Action Reason:",children:e.actionReason}),e.blockedResponse&&(0,l.jsx)(m,{label:"Blocked Response:",children:(0,l.jsx)("span",{className:"italic",children:e.blockedResponse})})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(m,{label:"Coverage:",children:a}),(0,l.jsx)(m,{label:"Usage:",children:r})]})]}),s.length>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(x,{}),(0,l.jsx)("h4",{className:"font-medium mb-2",children:"Outputs"}),(0,l.jsx)("div",{className:"space-y-2",children:s.map((e,s)=>(0,l.jsx)("div",{className:"p-3 bg-gray-50 rounded-md",children:(0,l.jsx)("div",{className:"text-sm whitespace-pre-wrap",children:e.text??(0,l.jsx)("em",{children:"(non-text output)"})})},s))})]})]}),e.assessments?.length?(0,l.jsx)("div",{className:"space-y-3",children:e.assessments.map((e,s)=>{let t=(0,l.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.wordPolicy&&o("word","slate"),e.contentPolicy&&o("content","slate"),e.topicPolicy&&o("topic","slate"),e.sensitiveInformationPolicy&&o("sensitive-info","slate"),e.contextualGroundingPolicy&&o("contextual-grounding","slate"),e.automatedReasoningPolicy&&o("automated-reasoning","slate")]});return(0,l.jsxs)(c,{title:`Assessment #${s+1}`,defaultOpen:!0,right:(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[e.invocationMetrics?.guardrailProcessingLatency!=null&&o(`${e.invocationMetrics.guardrailProcessingLatency} ms`,"amber"),t]}),children:[e.wordPolicy&&(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("h6",{className:"font-medium mb-2",children:"Word Policy"}),(e.wordPolicy.customWords?.length??0)>0&&(0,l.jsx)(c,{title:"Custom Words",defaultOpen:!0,children:(0,l.jsx)("div",{className:"space-y-2",children:e.wordPolicy.customWords.map((e,s)=>(0,l.jsxs)("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[o(e.action??"N/A",e.detected?"red":"slate"),(0,l.jsx)("span",{className:"font-mono text-sm break-all",children:e.match})]}),d(e.detected)]},s))})}),(e.wordPolicy.managedWordLists?.length??0)>0&&(0,l.jsx)(c,{title:"Managed Word Lists",defaultOpen:!1,children:(0,l.jsx)("div",{className:"space-y-2",children:e.wordPolicy.managedWordLists.map((e,s)=>(0,l.jsxs)("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[o(e.action??"N/A",e.detected?"red":"slate"),(0,l.jsx)("span",{className:"font-mono text-sm break-all",children:e.match}),e.type&&o(e.type,"slate")]}),d(e.detected)]},s))})})]}),e.contentPolicy?.filters?.length?(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("h6",{className:"font-medium mb-2",children:"Content Policy"}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full text-sm",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"text-left text-gray-600",children:[(0,l.jsx)("th",{className:"py-1 pr-4",children:"Type"}),(0,l.jsx)("th",{className:"py-1 pr-4",children:"Action"}),(0,l.jsx)("th",{className:"py-1 pr-4",children:"Detected"}),(0,l.jsx)("th",{className:"py-1 pr-4",children:"Strength"}),(0,l.jsx)("th",{className:"py-1 pr-4",children:"Confidence"})]})}),(0,l.jsx)("tbody",{children:e.contentPolicy.filters.map((e,s)=>(0,l.jsxs)("tr",{className:"border-t",children:[(0,l.jsx)("td",{className:"py-1 pr-4",children:e.type??"â€”"}),(0,l.jsx)("td",{className:"py-1 pr-4",children:o(e.action??"â€”",e.detected?"red":"slate")}),(0,l.jsx)("td",{className:"py-1 pr-4",children:d(e.detected)}),(0,l.jsx)("td",{className:"py-1 pr-4",children:e.filterStrength??"â€”"}),(0,l.jsx)("td",{className:"py-1 pr-4",children:e.confidence??"â€”"})]},s))})]})})]}):null,e.contextualGroundingPolicy?.filters?.length?(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("h6",{className:"font-medium mb-2",children:"Contextual Grounding"}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full text-sm",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"text-left text-gray-600",children:[(0,l.jsx)("th",{className:"py-1 pr-4",children:"Type"}),(0,l.jsx)("th",{className:"py-1 pr-4",children:"Action"}),(0,l.jsx)("th",{className:"py-1 pr-4",children:"Detected"}),(0,l.jsx)("th",{className:"py-1 pr-4",children:"Score"}),(0,l.jsx)("th",{className:"py-1 pr-4",children:"Threshold"})]})}),(0,l.jsx)("tbody",{children:e.contextualGroundingPolicy.filters.map((e,s)=>(0,l.jsxs)("tr",{className:"border-t",children:[(0,l.jsx)("td",{className:"py-1 pr-4",children:e.type??"â€”"}),(0,l.jsx)("td",{className:"py-1 pr-4",children:o(e.action??"â€”",e.detected?"red":"slate")}),(0,l.jsx)("td",{className:"py-1 pr-4",children:d(e.detected)}),(0,l.jsx)("td",{className:"py-1 pr-4",children:e.score??"â€”"}),(0,l.jsx)("td",{className:"py-1 pr-4",children:e.threshold??"â€”"})]},s))})]})})]}):null,e.sensitiveInformationPolicy&&(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("h6",{className:"font-medium mb-2",children:"Sensitive Information"}),(e.sensitiveInformationPolicy.piiEntities?.length??0)>0&&(0,l.jsx)(c,{title:"PII Entities",defaultOpen:!0,children:(0,l.jsx)("div",{className:"space-y-2",children:e.sensitiveInformationPolicy.piiEntities.map((e,s)=>(0,l.jsxs)("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[o(e.action??"N/A",e.detected?"red":"slate"),e.type&&o(e.type,"slate"),(0,l.jsx)("span",{className:"font-mono text-xs break-all",children:e.match})]}),d(e.detected)]},s))})}),(e.sensitiveInformationPolicy.regexes?.length??0)>0&&(0,l.jsx)(c,{title:"Custom Regexes",defaultOpen:!1,children:(0,l.jsx)("div",{className:"space-y-2",children:e.sensitiveInformationPolicy.regexes.map((e,s)=>(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-2 bg-gray-50 rounded gap-1",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[o(e.action??"N/A",e.detected?"red":"slate"),(0,l.jsx)("span",{className:"font-medium",children:e.name??"regex"}),(0,l.jsx)("span",{className:"font-mono text-xs break-all",children:e.regex})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[d(e.detected),e.match&&(0,l.jsx)("span",{className:"font-mono text-xs break-all",children:e.match})]})]},s))})})]}),e.topicPolicy?.topics?.length?(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("h6",{className:"font-medium mb-2",children:"Topic Policy"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:e.topicPolicy.topics.map((e,s)=>(0,l.jsx)("div",{className:"px-3 py-1.5 bg-gray-50 rounded-md text-xs",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[o(e.action??"N/A",e.detected?"red":"slate"),(0,l.jsx)("span",{className:"font-medium",children:e.name??"topic"}),e.type&&o(e.type,"slate"),d(e.detected)]})},s))})]}):null,e.invocationMetrics&&(0,l.jsx)(c,{title:"Invocation Metrics",defaultOpen:!1,children:(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(m,{label:"Latency (ms)",children:e.invocationMetrics.guardrailProcessingLatency??"â€”"}),(0,l.jsx)(m,{label:"Coverage:",children:(0,l.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.invocationMetrics.guardrailCoverage?.textCharacters&&o(`text ${e.invocationMetrics.guardrailCoverage.textCharacters.guarded??0}/${e.invocationMetrics.guardrailCoverage.textCharacters.total??0}`,"blue"),e.invocationMetrics.guardrailCoverage?.images&&o(`images ${e.invocationMetrics.guardrailCoverage.images.guarded??0}/${e.invocationMetrics.guardrailCoverage.images.total??0}`,"blue")]})})]}),(0,l.jsx)("div",{className:"space-y-2",children:(0,l.jsx)(m,{label:"Usage:",children:(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:e.invocationMetrics.usage&&Object.entries(e.invocationMetrics.usage).map(([e,s])=>"number"==typeof s?(0,l.jsxs)("span",{className:"px-2 py-1 bg-slate-100 text-slate-800 rounded-md text-xs font-medium",children:[e,": ",s]},e):null)})})})]})}),e.automatedReasoningPolicy?.findings?.length?(0,l.jsx)(c,{title:"Automated Reasoning Findings",defaultOpen:!1,children:(0,l.jsx)("div",{className:"space-y-2",children:e.automatedReasoningPolicy.findings.map((e,s)=>(0,l.jsx)("pre",{className:"bg-gray-50 rounded p-2 text-xs overflow-x-auto",children:JSON.stringify(e,null,2)},s))})}):null]},s)})}):null,(0,l.jsx)(c,{title:"Raw Bedrock Guardrail Response",defaultOpen:!1,children:(0,l.jsx)("pre",{className:"bg-gray-50 rounded p-3 text-xs overflow-x-auto",children:JSON.stringify(e,null,2)})})]})},h=(e,s="slate")=>(0,l.jsx)("span",{className:`px-2 py-1 rounded-md text-xs font-medium inline-block ${{green:"bg-green-100 text-green-800",red:"bg-red-100 text-red-800",blue:"bg-blue-50 text-blue-700",slate:"bg-slate-100 text-slate-800",amber:"bg-amber-100 text-amber-800"}[s]}`,children:e}),p=({title:e,count:s,defaultOpen:t=!0,children:r})=>{let[n,i]=(0,a.useState)(t);return(0,l.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,l.jsx)("div",{className:"flex items-center justify-between p-3 bg-gray-50 cursor-pointer hover:bg-gray-100",onClick:()=>i(e=>!e),children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("svg",{className:`w-5 h-5 mr-2 transition-transform ${n?"transform rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,l.jsxs)("h5",{className:"font-medium",children:[e," ","number"==typeof s&&(0,l.jsxs)("span",{className:"text-gray-500 font-normal",children:["(",s,")"]})]})]})}),n&&(0,l.jsx)("div",{className:"p-3 border-t bg-white",children:r})]})},g=({label:e,children:s,mono:t})=>(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("span",{className:"font-medium w-1/3",children:e}),(0,l.jsx)("span",{className:t?"font-mono text-sm break-all":"",children:s})]}),f=({response:e})=>{if(!e||"string"==typeof e)return"string"==typeof e&&e?(0,l.jsx)("div",{className:"bg-white rounded-lg border border-red-200 p-4",children:(0,l.jsxs)("div",{className:"text-red-800",children:[(0,l.jsx)("h5",{className:"font-medium mb-2",children:"Error"}),(0,l.jsx)("p",{className:"text-sm",children:e})]})}):null;let s=Array.isArray(e)?e:[];if(0===s.length)return(0,l.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,l.jsx)("div",{className:"text-gray-600 text-sm",children:"No detections found"})});let t=s.filter(e=>"pattern"===e.type),a=s.filter(e=>"blocked_word"===e.type),r=s.filter(e=>"category_keyword"===e.type),n=s.filter(e=>"BLOCK"===e.action).length,i=s.filter(e=>"MASK"===e.action).length,o=s.length;return(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(g,{label:"Total Detections:",children:(0,l.jsx)("span",{className:"font-semibold",children:o})}),(0,l.jsx)(g,{label:"Actions:",children:(0,l.jsxs)("div",{className:"flex flex-wrap gap-2",children:[n>0&&h(`${n} blocked`,"red"),i>0&&h(`${i} masked`,"blue"),0===n&&0===i&&h("passed","green")]})})]}),(0,l.jsx)("div",{className:"space-y-2",children:(0,l.jsx)(g,{label:"By Type:",children:(0,l.jsxs)("div",{className:"flex flex-wrap gap-2",children:[t.length>0&&h(`${t.length} patterns`,"slate"),a.length>0&&h(`${a.length} keywords`,"slate"),r.length>0&&h(`${r.length} categories`,"slate")]})})})]})}),t.length>0&&(0,l.jsx)(p,{title:"Patterns Matched",count:t.length,defaultOpen:!0,children:(0,l.jsx)("div",{className:"space-y-2",children:t.map((e,s)=>(0,l.jsx)("div",{className:"p-3 bg-gray-50 rounded-md",children:(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsx)("div",{className:"space-y-1",children:(0,l.jsx)(g,{label:"Pattern:",children:e.pattern_name||"unknown"})}),(0,l.jsx)("div",{className:"space-y-1",children:(0,l.jsx)(g,{label:"Action:",children:h(e.action,"BLOCK"===e.action?"red":"blue")})})]})},s))})}),a.length>0&&(0,l.jsx)(p,{title:"Blocked Words Detected",count:a.length,defaultOpen:!0,children:(0,l.jsx)("div",{className:"space-y-2",children:a.map((e,s)=>(0,l.jsx)("div",{className:"p-3 bg-gray-50 rounded-md",children:(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)(g,{label:"Keyword:",mono:!0,children:e.keyword||"unknown"}),e.description&&(0,l.jsx)(g,{label:"Description:",children:e.description})]}),(0,l.jsx)("div",{className:"space-y-1",children:(0,l.jsx)(g,{label:"Action:",children:h(e.action,"BLOCK"===e.action?"red":"blue")})})]})},s))})}),r.length>0&&(0,l.jsx)(p,{title:"Category Keywords Detected",count:r.length,defaultOpen:!0,children:(0,l.jsx)("div",{className:"space-y-2",children:r.map((e,s)=>(0,l.jsx)("div",{className:"p-3 bg-gray-50 rounded-md",children:(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)(g,{label:"Category:",children:e.category||"unknown"}),(0,l.jsx)(g,{label:"Keyword:",mono:!0,children:e.keyword||"unknown"}),e.severity&&(0,l.jsx)(g,{label:"Severity:",children:h(e.severity,"high"===e.severity?"red":"medium"===e.severity?"amber":"slate")})]}),(0,l.jsx)("div",{className:"space-y-1",children:(0,l.jsx)(g,{label:"Action:",children:h(e.action,"BLOCK"===e.action?"red":"blue")})})]})},s))})}),(0,l.jsx)(p,{title:"Raw Detection Data",defaultOpen:!1,children:(0,l.jsx)("pre",{className:"bg-gray-50 rounded p-3 text-xs overflow-x-auto",children:JSON.stringify(s,null,2)})})]})};var j=t(28436);let y=()=>(0,l.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,l.jsx)("circle",{cx:"8",cy:"8",r:"7",stroke:"#16A34A",strokeWidth:"1.5",fill:"#F0FDF4"}),(0,l.jsx)("path",{d:"M5 8l2 2 4-4",stroke:"#16A34A",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),b=()=>(0,l.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,l.jsx)("circle",{cx:"8",cy:"8",r:"7",stroke:"#DC2626",strokeWidth:"1.5",fill:"#FEF2F2"}),(0,l.jsx)("path",{d:"M6 6l4 4M10 6l-4 4",stroke:"#DC2626",strokeWidth:"1.5",strokeLinecap:"round"})]}),v=()=>(0,l.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",className:"animate-spin",children:[(0,l.jsx)("circle",{cx:"8",cy:"8",r:"6",stroke:"#D1D5DB",strokeWidth:"2"}),(0,l.jsx)("path",{d:"M8 2a6 6 0 0 1 6 6",stroke:"#6366F1",strokeWidth:"2",strokeLinecap:"round"})]}),N=({title:e,data:s,loading:t,error:n})=>{let[i,o]=(0,a.useState)(!1);return(0,l.jsxs)("div",{className:"border border-gray-200 rounded-lg bg-white",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>o(!i),children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[t?(0,l.jsx)(v,{}):n?(0,l.jsx)(r.A,{title:n,children:(0,l.jsx)("span",{className:"text-gray-400 text-sm",children:"--"})}):s?.compliant?(0,l.jsx)(y,{}):(0,l.jsx)(b,{}),(0,l.jsx)("span",{className:"font-medium text-sm text-gray-900",children:e})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[!t&&!n&&s&&(0,l.jsx)("span",{className:`px-2 py-0.5 rounded text-[11px] font-semibold uppercase ${s.compliant?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"}`,children:s.compliant?"COMPLIANT":"NON-COMPLIANT"}),n&&(0,l.jsx)("span",{className:"px-2 py-0.5 rounded text-[11px] font-medium bg-gray-100 text-gray-500 border border-gray-200",children:"UNAVAILABLE"}),(0,l.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",className:`transition-transform ${i?"rotate-180":""}`,children:(0,l.jsx)("path",{d:"M6 8l4 4 4-4",stroke:"#6B7280",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),i&&(0,l.jsxs)("div",{className:"border-t border-gray-100 px-4 py-3",children:[t&&(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Checking compliance..."}),n&&(0,l.jsx)("p",{className:"text-sm text-red-600",children:n}),s&&(0,l.jsx)("div",{className:"space-y-2",children:s.checks.map((e,s)=>(0,l.jsxs)("div",{className:"flex items-start gap-2",children:[(0,l.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:e.passed?(0,l.jsx)(y,{}):(0,l.jsx)(b,{})}),(0,l.jsxs)("div",{className:"min-w-0",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.check_name}),(0,l.jsx)("span",{className:"text-[10px] font-mono text-gray-400",children:e.article})]}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:e.detail})]})]},s))})]})]})},_=({accessToken:e,logEntry:s})=>{let[t,r]=(0,a.useState)(null),[n,i]=(0,a.useState)(null),[o,d]=(0,a.useState)(!1),[c,m]=(0,a.useState)(!1),[x,u]=(0,a.useState)(null),[h,p]=(0,a.useState)(null);return(0,a.useEffect)(()=>{if(!e||!s.request_id)return;let t={request_id:s.request_id,user_id:s.user,model:s.model,timestamp:s.startTime,guardrail_information:s.metadata?.guardrail_information};d(!0),u(null),(0,j.checkEuAiActCompliance)(e,t).then(r).catch(e=>u(e.message||"Failed to check EU AI Act compliance")).finally(()=>d(!1)),m(!0),p(null),(0,j.checkGdprCompliance)(e,t).then(i).catch(e=>p(e.message||"Failed to check GDPR compliance")).finally(()=>m(!1))},[e,s]),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-4",children:"Regulatory Compliance"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)(N,{title:"EU AI Act",data:t,loading:o,error:x}),(0,l.jsx)(N,{title:"GDPR",data:n,loading:c,error:h})]})]})},w=new Set(["presidio","bedrock","litellm_content_filter"]),k=e=>Object.values(e.masked_entity_count||{}).reduce((e,s)=>e+("number"==typeof s?s:0),0),S=e=>"success"===(e.guardrail_status??"").toLowerCase(),A=e=>e.policy_template||e.guardrail_name,C=()=>(0,l.jsxs)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",children:[(0,l.jsx)("circle",{cx:"20",cy:"20",r:"20",fill:"#EEF2FF"}),(0,l.jsx)("path",{d:"M20 10l8 4v6c0 5.25-3.4 10.15-8 11.5C15.4 30.15 12 25.25 12 20v-6l8-4z",stroke:"#6366F1",strokeWidth:"1.5",fill:"none"}),(0,l.jsx)("path",{d:"M16 20l3 3 5-6",stroke:"#6366F1",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]}),M=({className:e})=>(0,l.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",className:e,children:[(0,l.jsx)("circle",{cx:"11",cy:"11",r:"10",stroke:"#16A34A",strokeWidth:"1.5",fill:"#F0FDF4"}),(0,l.jsx)("path",{d:"M7 11l3 3 5-6",stroke:"#16A34A",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),z=({className:e})=>(0,l.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",className:e,children:[(0,l.jsx)("circle",{cx:"11",cy:"11",r:"10",stroke:"#DC2626",strokeWidth:"1.5",fill:"#FEF2F2"}),(0,l.jsx)("path",{d:"M8 8l6 6M14 8l-6 6",stroke:"#DC2626",strokeWidth:"1.5",strokeLinecap:"round"})]}),T=()=>(0,l.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",children:[(0,l.jsx)("circle",{cx:"11",cy:"11",r:"10",stroke:"#3B82F6",strokeWidth:"1.5",fill:"#EFF6FF"}),(0,l.jsx)("path",{d:"M9 7.5l6 3.5-6 3.5V7.5z",fill:"#3B82F6"})]}),L=()=>(0,l.jsx)("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",children:(0,l.jsx)("circle",{cx:"11",cy:"11",r:"5",fill:"#9CA3AF"})}),D=({expanded:e})=>(0,l.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",className:`transition-transform ${e?"rotate-180":""}`,children:(0,l.jsx)("path",{d:"M6 8l4 4 4-4",stroke:"#6B7280",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),I=()=>(0,l.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,l.jsx)("path",{d:"M8 2v8m0 0l-3-3m3 3l3-3M3 12h10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),E=({matchDetails:e})=>e&&0!==e.length?(0,l.jsxs)("div",{className:"mt-3",children:[(0,l.jsxs)("h5",{className:"text-sm font-medium mb-2 text-gray-700",children:["Match Details (",e.length,")"]}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full text-sm",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"border-b text-left text-gray-500",children:[(0,l.jsx)("th",{className:"pb-2 pr-4 font-medium",children:"Type"}),(0,l.jsx)("th",{className:"pb-2 pr-4 font-medium",children:"Method"}),(0,l.jsx)("th",{className:"pb-2 pr-4 font-medium",children:"Action"}),(0,l.jsx)("th",{className:"pb-2 font-medium",children:"Detail"})]})}),(0,l.jsx)("tbody",{children:e.map((e,s)=>(0,l.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,l.jsx)("td",{className:"py-2 pr-4",children:e.type}),(0,l.jsx)("td",{className:"py-2 pr-4",children:(0,l.jsx)("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-700 rounded text-xs",children:e.detection_method??"-"})}),(0,l.jsx)("td",{className:"py-2 pr-4",children:(0,l.jsx)("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${"BLOCK"===e.action_taken?"bg-red-100 text-red-800":"bg-blue-50 text-blue-700"}`,children:e.action_taken??"-"})}),(0,l.jsxs)("td",{className:"py-2 font-mono text-xs text-gray-600 break-all",children:[e.category?`[${e.category}] `:"",e.snippet??"-"]})]},s))})]})})]}):null,$=({response:e})=>{let[s,t]=(0,a.useState)(!1);return(0,l.jsx)("div",{className:"mt-3",children:(0,l.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,l.jsx)("div",{className:"flex items-center justify-between p-3 bg-gray-50 cursor-pointer hover:bg-gray-100",onClick:()=>t(!s),children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(D,{expanded:s}),(0,l.jsx)("h5",{className:"font-medium text-sm ml-1",children:"Raw Guardrail Response"})]})}),s&&(0,l.jsx)("div",{className:"p-3 border-t bg-white",children:(0,l.jsx)("pre",{className:"bg-gray-50 rounded p-3 text-xs overflow-x-auto",children:JSON.stringify(e,null,2)})})]})})},R=({entries:e})=>{let s=(0,a.useMemo)(()=>[...e].sort((e,s)=>(e.start_time??0)-(s.start_time??0)),[e]),t=(0,a.useMemo)(()=>{if(0===s.length)return[];let e=s[0].start_time,t=[];t.push({type:"request",label:"Request received",offsetMs:0});let l=s.filter(e=>"pre_call"===e.guardrail_mode),a=s.filter(e=>"post_call"===e.guardrail_mode||"logging_only"===e.guardrail_mode),r=s.filter(e=>"during_call"===e.guardrail_mode);for(let s of l){let l=Math.round((s.end_time-e)*1e3);t.push({type:"guardrail",label:`Pre-call guardrail: ${A(s)}`,offsetMs:l,status:S(s)?"PASSED":"FAILED",isSuccess:S(s)})}let n=l.length>0?Math.max(...l.map(e=>e.end_time)):e,i=Math.round((((a.length>0?Math.min(...a.map(e=>e.start_time)):void 0)??n+1)-e)*1e3);for(let s of(t.push({type:"llm",label:"LLM call",offsetMs:i}),r)){let l=Math.round((s.end_time-e)*1e3);t.push({type:"guardrail",label:`During-call guardrail: ${A(s)}`,offsetMs:l,status:S(s)?"PASSED":"FAILED",isSuccess:S(s)})}for(let s of a){let l=Math.round((s.end_time-e)*1e3);t.push({type:"guardrail",label:`Post-call guardrail: ${A(s)}`,offsetMs:l,status:S(s)?"PASSED":"FAILED",isSuccess:S(s)})}let o=Math.round((Math.max(...s.map(e=>e.end_time))-e)*1e3)+1;return t.push({type:"response",label:"Response returned",offsetMs:o}),t},[s]);return(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-4",children:"Request Lifecycle"}),(0,l.jsx)("div",{className:"relative",children:t.map((e,s)=>(0,l.jsxs)("div",{className:"flex items-start gap-3 relative",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:"request"===e.type||"response"===e.type?(0,l.jsx)(L,{}):"llm"===e.type?(0,l.jsx)(T,{}):e.isSuccess?(0,l.jsx)(M,{}):(0,l.jsx)(z,{})}),s<t.length-1&&(0,l.jsx)("div",{className:"w-0.5 bg-gray-200 flex-grow",style:{minHeight:"24px"}})]}),(0,l.jsx)("div",{className:"pb-4 flex-1 min-w-0",children:(0,l.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,l.jsx)("span",{className:`text-sm ${"llm"===e.type?"text-blue-600 font-medium":"text-gray-900"}`,children:e.label}),e.status&&(0,l.jsx)("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-bold uppercase ${e.isSuccess?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.status}),(0,l.jsxs)("span",{className:"text-xs text-gray-400 font-mono ml-auto flex-shrink-0",children:["T+",e.offsetMs,"ms"]})]})})]},s))})]})},F=({entry:e})=>{var s;let t,[n,o]=(0,a.useState)(!1),d=S(e),c=k(e),m=A(e),x=(t=Math.round(1e3*e.duration),`${t}ms`),h=null==(s=e.guardrail_mode)||""===s?"â€”":("string"==typeof s?s:String(s)).replace(/_/g,"-").toUpperCase(),p=(e=>{if(!S(e))return null;if(null!=e.risk_score)return e.risk_score;let s=k(e),t=e.patterns_checked??0,l=e.confidence_score??0;if(0===t&&0===l)return 0;let a=7*(t>0?s/t:0)+3*l;return s>0&&a<2&&(a=2),Math.min(10,Math.round(10*a)/10)})(e),g=e.guardrail_provider??"presidio",j=e.guardrail_response,y=Array.isArray(j)?j:[],b="bedrock"!==g||null===j||"object"!=typeof j||Array.isArray(j)?void 0:j,v=null!=e.patterns_checked?`${c}/${e.patterns_checked} matched`:c>0?`${c} matched`:null;return(0,l.jsxs)("div",{className:"border border-gray-200 rounded-lg bg-white",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 px-4 py-3 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>o(!n),children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:d?(0,l.jsx)(M,{}):(0,l.jsx)(z,{})}),(0,l.jsxs)("div",{className:"flex items-center gap-2 flex-wrap flex-1 min-w-0",children:[(0,l.jsx)("span",{className:"font-semibold text-gray-900 text-sm truncate",children:m}),(0,l.jsx)("span",{className:"px-2 py-0.5 border border-blue-200 bg-blue-50 text-blue-700 rounded text-[11px] font-semibold uppercase flex-shrink-0",children:h}),(0,l.jsx)("span",{className:`px-2 py-0.5 rounded text-[11px] font-semibold uppercase flex-shrink-0 ${d?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"}`,children:d?"PASSED":"FAILED"}),v&&(0,l.jsx)("span",{className:`px-2 py-0.5 rounded text-[11px] font-medium flex-shrink-0 ${0===c?"bg-green-50 text-green-700 border border-green-200":"bg-amber-50 text-amber-700 border border-amber-200"}`,children:v}),null!=e.confidence_score&&(0,l.jsxs)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 border border-gray-200 rounded text-[11px] font-medium flex-shrink-0",children:[(100*e.confidence_score).toFixed(0),"% conf"]}),null!=p&&d&&(0,l.jsx)(r.A,{title:`Risk score: ${p}/10`,children:(0,l.jsxs)("span",{className:`px-2 py-0.5 border rounded text-[11px] font-semibold flex-shrink-0 ${p<=3?"text-green-600 bg-green-50 border-green-200":p<=6?"text-amber-600 bg-amber-50 border-amber-200":"text-red-600 bg-red-50 border-red-200"}`,children:["Risk ",p,"/10"]})})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3 flex-shrink-0",children:[(0,l.jsx)("span",{className:"text-sm text-gray-500 font-mono",children:x}),e.detection_method&&(0,l.jsx)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 border border-gray-200 rounded text-[11px] font-medium",children:e.detection_method.split(",")[0].trim()}),(0,l.jsx)(D,{expanded:n})]})]}),n&&(0,l.jsxs)("div",{className:"border-t border-gray-100 px-4 py-3",children:[e.classification&&(0,l.jsxs)("div",{className:"mb-3 bg-gray-50 rounded-lg p-3 space-y-1",children:[(0,l.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Classification"}),e.classification.category&&(0,l.jsxs)("div",{className:"flex text-sm",children:[(0,l.jsx)("span",{className:"font-medium w-1/3 text-gray-500",children:"Category:"}),(0,l.jsx)("span",{children:e.classification.category})]}),e.classification.article_reference&&(0,l.jsxs)("div",{className:"flex text-sm",children:[(0,l.jsx)("span",{className:"font-medium w-1/3 text-gray-500",children:"Reference:"}),(0,l.jsx)("span",{className:"font-mono",children:e.classification.article_reference})]}),null!=e.classification.confidence&&(0,l.jsxs)("div",{className:"flex text-sm",children:[(0,l.jsx)("span",{className:"font-medium w-1/3 text-gray-500",children:"Confidence:"}),(0,l.jsxs)("span",{children:[(100*e.classification.confidence).toFixed(0),"%"]})]}),e.classification.reason&&(0,l.jsxs)("div",{className:"flex text-sm",children:[(0,l.jsx)("span",{className:"font-medium w-1/3 text-gray-500",children:"Reason:"}),(0,l.jsx)("span",{children:e.classification.reason})]})]}),e.match_details&&e.match_details.length>0&&(0,l.jsx)(E,{matchDetails:e.match_details}),c>0&&(0,l.jsxs)("div",{className:"mt-3",children:[(0,l.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Masked Entities"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(e.masked_entity_count||{}).map(([e,s])=>(0,l.jsxs)("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs font-medium",children:[e,": ",s]},e))})]}),"presidio"===g&&y.length>0&&(0,l.jsx)("div",{className:"mt-3",children:(0,l.jsx)(i,{entities:y})}),"bedrock"===g&&b&&(0,l.jsx)("div",{className:"mt-3",children:(0,l.jsx)(u,{response:b})}),"litellm_content_filter"===g&&j&&(0,l.jsx)("div",{className:"mt-3",children:(0,l.jsx)(f,{response:j})}),g&&!w.has(g)&&j&&(0,l.jsx)($,{response:j})]})]})},q=({data:e,accessToken:s,logEntry:t})=>{let r=(0,a.useMemo)(()=>Array.isArray(e)?e.filter(e=>!!e):e?[e]:[],[e]),n=r.filter(S).length,i=n===r.length,o=(0,a.useMemo)(()=>Math.round(1e3*r.reduce((e,s)=>e+(s.duration??0),0)),[r]);return((0,a.useMemo)(()=>Array.from(new Set(r.map(e=>e.policy_template).filter(Boolean))),[r]),0===r.length)?null:(0,l.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm w-full max-w-full overflow-hidden mb-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-100",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)(C,{}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Guardrails & Policy Compliance"}),(0,l.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,l.jsxs)("span",{className:"text-sm text-gray-500",children:[r.length," guardrail",1!==r.length?"s":""," evaluated"]}),(0,l.jsx)("span",{className:"text-gray-300",children:"|"}),(0,l.jsxs)("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-semibold ${i?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:[i?(0,l.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:(0,l.jsx)("path",{d:"M3 6l2.5 2.5L9 4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}):null,n," Passed"]})]})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-6",children:[(0,l.jsx)("div",{className:"text-right",children:(0,l.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["Total: ",o,"ms overhead"]})}),(0,l.jsxs)("button",{onClick:()=>{let e=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),s=URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download=`guardrail-compliance-log-${new Date().toISOString().slice(0,10)}.json`,t.click(),URL.revokeObjectURL(s)},className:"inline-flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[(0,l.jsx)(I,{}),"Export Compliance Log"]})]})]}),s&&t&&(0,l.jsx)("div",{className:"px-6 py-4 border-b border-gray-100",children:(0,l.jsx)(_,{accessToken:s,logEntry:t})}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("div",{className:"w-[340px] flex-shrink-0 border-r border-gray-100 px-6 py-5",children:(0,l.jsx)(R,{entries:r})}),(0,l.jsxs)("div",{className:"flex-1 px-6 py-5 min-w-0",children:[(0,l.jsx)("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-4",children:"Evaluation Details"}),(0,l.jsx)("div",{className:"space-y-3",children:r.map((e,s)=>(0,l.jsx)(F,{entry:e},`${e.guardrail_name??"guardrail"}-${s}`))})]})]})]})}},63076:(e,s,t)=>{t.d(s,{Mw:()=>n,TK:()=>a,kR:()=>r});var l=t(28436);let a=async e=>{if(!e)return[];try{let{aliases:s}=await (0,l.keyAliasesCall)(e);return Array.from(new Set((s||[]).filter(Boolean)))}catch(e){return console.error("Error fetching all key aliases:",e),[]}},r=async(e,s)=>{if(!e)return[];try{let t=[],a=1,r=!0;for(;r;){let n=await (0,l.teamListCall)(e,s||null,null);t=[...t,...n],a<n.total_pages?a++:r=!1}return t}catch(e){return console.error("Error fetching all teams:",e),[]}},n=async e=>{if(!e)return[];try{let s=[],t=1,a=!0;for(;a;){let r=await (0,l.organizationListCall)(e);s=[...s,...r],t<r.total_pages?t++:a=!1}return s}catch(e){return console.error("Error fetching all organizations:",e),[]}}},83455:(e,s,t)=>{t.d(s,{C1:()=>a,gs:()=>l,iw:()=>r});let l=[{label:"400 - Bad Request",value:"400"},{label:"401 - Invalid Authentication",value:"401"},{label:"403 - Permission Denied",value:"403"},{label:"404 - Not Found",value:"404"},{label:"408 - Request Timeout",value:"408"},{label:"422 - Unprocessable Entity",value:"422"},{label:"429 - Rate Limited",value:"429"},{label:"500 - Internal Server Error",value:"500"},{label:"502 - Bad Gateway",value:"502"},{label:"503 - Service Unavailable",value:"503"},{label:"529 - Overloaded",value:"529"}],a=["call_mcp_tool","list_mcp_tools"],r=[{label:"Last 15 Minutes",value:15,unit:"minutes"},{label:"Last Hour",value:1,unit:"hours"},{label:"Last 4 Hours",value:4,unit:"hours"},{label:"Last 24 Hours",value:24,unit:"hours"},{label:"Last 7 Days",value:7,unit:"days"}]},92574:(e,s,t)=>{t.d(s,{A:()=>m});var l=t(95155),a=t(55266),r=t(87278),n=t(23060),i=t(91808),o=t(29822),d=t.n(o),c=t(12115);let m=({options:e,onApplyFilters:s,onResetFilters:t,initialValues:o={},buttonLabel:m="ç­›é€‰"})=>{let[x,u]=(0,c.useState)(!1),[h,p]=(0,c.useState)(o),[g,f]=(0,c.useState)({}),[j,y]=(0,c.useState)({}),[b,v]=(0,c.useState)({}),[N,_]=(0,c.useState)({}),w=(0,c.useCallback)(d()(async(e,s)=>{if(s.isSearchable&&s.searchFn){y(e=>({...e,[s.name]:!0}));try{let t=await s.searchFn(e);f(e=>({...e,[s.name]:t}))}catch(e){console.error("Error searching:",e),f(e=>({...e,[s.name]:[]}))}finally{y(e=>({...e,[s.name]:!1}))}}},300),[]),k=(0,c.useCallback)(async e=>{if(e.isSearchable&&e.searchFn&&!N[e.name]){y(s=>({...s,[e.name]:!0})),_(s=>({...s,[e.name]:!0}));try{let s=await e.searchFn("");f(t=>({...t,[e.name]:s}))}catch(s){console.error("Error loading initial options:",s),f(s=>({...s,[e.name]:[]}))}finally{y(s=>({...s,[e.name]:!1}))}}},[N]);(0,c.useEffect)(()=>{x&&e.forEach(e=>{e.isSearchable&&!N[e.name]&&k(e)})},[x,e,k,N]);let S=(e,t)=>{let l={...h,[e]:t};p(l),s(l)};return(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,l.jsx)(r.Ay,{icon:(0,l.jsx)(a.A,{className:"h-4 w-4"}),onClick:()=>u(!x),className:"flex items-center gap-2",children:m}),(0,l.jsx)(r.Ay,{onClick:()=>{let s={};e.forEach(e=>{s[e.name]=""}),p(s),t()},children:"é‡ç½®ç­›é€‰"})]}),x&&(0,l.jsx)("div",{className:"grid grid-cols-3 gap-x-6 gap-y-4 mb-6",children:["Team ID","Status","Organization ID","Key Alias","User ID","End User","Error Code","Error Message","Key Hash","Model"].map(s=>{let t,a=e.find(e=>e.label===s||e.name===s);return a?(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("label",{className:"text-sm text-gray-600",children:a.label||a.name}),a.isSearchable?(0,l.jsx)(n.A,{showSearch:!0,className:"w-full",placeholder:`æœç´¢ ${a.label||a.name}...`,value:h[a.name]||void 0,onChange:e=>S(a.name,e),onOpenChange:e=>{e&&a.isSearchable&&!N[a.name]&&k(a)},onSearch:e=>{v(s=>({...s,[a.name]:e})),a.searchFn&&w(e,a)},filterOption:!1,loading:j[a.name],options:g[a.name]||[],allowClear:!0,notFoundContent:j[a.name]?"åŠ è½½ä¸­...":"æœªæ‰¾åˆ°ç»“æžœ"}):a.options?(0,l.jsx)(n.A,{className:"w-full",placeholder:`é€‰æ‹© ${a.label||a.name}...`,value:h[a.name]||void 0,onChange:e=>S(a.name,e),allowClear:!0,children:a.options.map(e=>(0,l.jsx)(n.A.Option,{value:e.value,children:e.label},e.value))}):a.customComponent?(t=a.customComponent,(0,l.jsx)(t,{value:h[a.name]||void 0,onChange:e=>S(a.name,e??""),placeholder:`Select ${a.label||a.name}...`})):(0,l.jsx)(i.A,{className:"w-full",placeholder:`Enter ${a.label||a.name}...`,value:h[a.name]||"",onChange:e=>S(a.name,e.target.value),allowClear:!0})]},a.name):null})})]})}},95078:(e,s,t)=>{t.d(s,{z:()=>i});var l=t(95155),a=t(12115),r=t(10639),n=t(90314);function i({data:e}){let[s,t]=(0,a.useState)({});if(!e||0===e.length)return null;let i=e=>new Date(1e3*e).toLocaleString();return(0,l.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,l.jsx)(r.A,{defaultActiveKey:["1"],expandIconPosition:"start",items:[{key:"1",label:(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Vector Store Requests"}),children:(0,l.jsx)("div",{className:"p-4",children:e.map((e,a)=>{var r,o;return(0,l.jsxs)("div",{className:"mb-6 last:mb-0",children:[(0,l.jsx)("div",{className:"bg-white rounded-lg border p-4 mb-4",children:(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("span",{className:"font-medium w-1/3",children:"Query:"}),(0,l.jsx)("span",{className:"font-mono",children:e.query})]}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("span",{className:"font-medium w-1/3",children:"Vector Store ID:"}),(0,l.jsx)("span",{className:"font-mono",children:e.vector_store_id})]}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("span",{className:"font-medium w-1/3",children:"Provider:"}),(0,l.jsx)("span",{className:"flex items-center",children:(()=>{let{logo:s,displayName:t}=(0,n.li)(e.custom_llm_provider);return(0,l.jsxs)(l.Fragment,{children:[s&&(0,l.jsx)("img",{src:s,alt:`${t} logo`,className:"h-5 w-5 mr-2"}),t]})})()})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("span",{className:"font-medium w-1/3",children:"Start Time:"}),(0,l.jsx)("span",{children:i(e.start_time)})]}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("span",{className:"font-medium w-1/3",children:"End Time:"}),(0,l.jsx)("span",{children:i(e.end_time)})]}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("span",{className:"font-medium w-1/3",children:"Duration:"}),(0,l.jsx)("span",{children:(r=e.start_time,o=e.end_time,`${((o-r)*1e3).toFixed(2)}ms`)})]})]})]})}),(0,l.jsx)("h4",{className:"font-medium mb-2",children:"Search Results"}),(0,l.jsx)("div",{className:"space-y-2",children:e.vector_store_search_response.data.map((e,r)=>{let n=s[`${a}-${r}`]||!1;return(0,l.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,l.jsxs)("div",{className:"flex items-center p-3 bg-gray-50 cursor-pointer",onClick:()=>{let e;return e=`${a}-${r}`,void t(s=>({...s,[e]:!s[e]}))},children:[(0,l.jsx)("svg",{className:`w-5 h-5 mr-2 transition-transform ${n?"transform rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsxs)("span",{className:"font-medium mr-2",children:["Result ",r+1]}),(0,l.jsxs)("span",{className:"text-gray-500 text-sm",children:["Score: ",(0,l.jsx)("span",{className:"font-mono",children:e.score.toFixed(4)})]})]})]}),n&&(0,l.jsx)("div",{className:"p-3 border-t bg-white",children:e.content.map((e,s)=>(0,l.jsxs)("div",{className:"mb-2 last:mb-0",children:[(0,l.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:e.type}),(0,l.jsx)("pre",{className:"text-xs font-mono whitespace-pre-wrap break-all bg-gray-50 p-2 rounded",children:e.text})]},s))})]},r)})})]},a)})})}]})})}}}]);