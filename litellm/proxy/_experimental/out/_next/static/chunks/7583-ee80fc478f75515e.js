"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7583],{4761:(e,t,s)=>{s.d(t,{u:()=>l});var a=s(69285),r=s(28436);async function l(e,t,s,l,o,n,i,c,d,m,p,u,g,x,h,f,y,b,j,v,A,N,S,w){console.log=function(){},console.log("isLocal:",!1);let _=v||(0,r.getProxyBaseUrl)(),C={};o&&o.length>0&&(C["x-silinex-tags"]=o.join(","));let k=new a.Ay.OpenAI({apiKey:l,baseURL:_,dangerouslyAllowBrowser:!0,defaultHeaders:C});try{let a,r=Date.now(),l=!1,o={},v=!1,_=[];for await(let j of(x&&x.length>0&&(x.includes("__all__")?_.push({type:"mcp",server_label:"litellm",server_url:"litellm_proxy/mcp",require_approval:"never"}):x.forEach(e=>{let t=A?.find(t=>t.server_id===e),s=t?.alias||t?.server_name||e,a=N?.[e]||[];_.push({type:"mcp",server_label:"litellm",server_url:`litellm_proxy/mcp/${s}`,require_approval:"never",...a.length>0?{allowed_tools:a}:{}})})),await k.chat.completions.create({model:s,stream:!0,stream_options:{include_usage:!0},litellm_trace_id:m,messages:e,...p?{vector_store_ids:p}:{},...u?{guardrails:u}:{},...g?{policies:g}:{},..._.length>0?{tools:_,tool_choice:"auto"}:{},...void 0!==y?{temperature:y}:{},...void 0!==b?{max_tokens:b}:{},...w?{mock_testing_fallbacks:!0}:{}},{signal:n}))){console.log("Stream chunk:",j);let e=j.choices[0]?.delta;if(console.log("Delta content:",j.choices[0]?.delta?.content),console.log("Delta reasoning content:",e?.reasoning_content),!l&&(j.choices[0]?.delta?.content||e&&e.reasoning_content)&&(l=!0,a=Date.now()-r,console.log("First token received! Time:",a,"ms"),c?(console.log("Calling onTimingData with:",a),c(a)):console.log("onTimingData callback is not defined!")),j.choices[0]?.delta?.content){let e=j.choices[0].delta.content;t(e,j.model)}if(e&&e.image&&h&&(console.log("Image generated:",e.image),h(e.image.url,j.model)),e&&e.reasoning_content){let t=e.reasoning_content;i&&i(t)}if(e&&e.provider_specific_fields?.search_results&&f&&(console.log("Search results found:",e.provider_specific_fields.search_results),f(e.provider_specific_fields.search_results)),e&&e.provider_specific_fields){let t=e.provider_specific_fields;if(t.mcp_list_tools&&!o.mcp_list_tools&&(o.mcp_list_tools=t.mcp_list_tools,S&&!v)){v=!0;let e={type:"response.output_item.done",item_id:"mcp_list_tools",item:{type:"mcp_list_tools",tools:t.mcp_list_tools.map(e=>({name:e.function?.name||e.name||"",description:e.function?.description||e.description||"",input_schema:e.function?.parameters||e.input_schema||{}}))},timestamp:Date.now()};S(e),console.log("MCP list_tools event sent:",e)}t.mcp_tool_calls&&(o.mcp_tool_calls=t.mcp_tool_calls),t.mcp_call_results&&(o.mcp_call_results=t.mcp_call_results),(t.mcp_list_tools||t.mcp_tool_calls||t.mcp_call_results)&&console.log("MCP metadata found in chunk:",{mcp_list_tools:t.mcp_list_tools?"present":"absent",mcp_tool_calls:t.mcp_tool_calls?"present":"absent",mcp_call_results:t.mcp_call_results?"present":"absent"})}if(j.usage&&d){console.log("Usage data found:",j.usage);let e={completionTokens:j.usage.completion_tokens,promptTokens:j.usage.prompt_tokens,totalTokens:j.usage.total_tokens};j.usage.completion_tokens_details?.reasoning_tokens&&(e.reasoningTokens=j.usage.completion_tokens_details.reasoning_tokens),void 0!==j.usage.cost&&null!==j.usage.cost&&(e.cost=parseFloat(j.usage.cost)),d(e)}}S&&(o.mcp_tool_calls||o.mcp_call_results)&&o.mcp_tool_calls&&o.mcp_tool_calls.length>0&&o.mcp_tool_calls.forEach((e,t)=>{let s=e.function?.name||e.name||"",a=e.function?.arguments||e.arguments||"{}",r=o.mcp_call_results?.find(t=>t.tool_call_id===e.id||t.tool_call_id===e.call_id)||o.mcp_call_results?.[t],l={type:"response.output_item.done",item:{type:"mcp_call",name:s,arguments:"string"==typeof a?a:JSON.stringify(a),output:r?.result?"string"==typeof r.result?r.result:JSON.stringify(r.result):void 0},item_id:e.id||e.call_id,timestamp:Date.now()};S(l),console.log("MCP call event sent:",l)});let C=Date.now();j&&j(C-r)}catch(e){throw n?.aborted&&console.log("Chat completion request was cancelled"),e}}},6702:(e,t,s)=>{s.d(t,{A:()=>n});var a=s(95155),r=s(12115),l=s(23060),o=s(28436);let n=({onChange:e,value:t,className:s,accessToken:n})=>{let[i,c]=(0,r.useState)([]),[d,m]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{(async()=>{if(n)try{let e=await (0,o.tagListCall)(n);console.log("List tags response:",e),c(Object.values(e))}catch(e){console.error("Error fetching tags:",e)}finally{m(!1)}})()},[n]),(0,a.jsx)(l.A,{mode:"tags",showSearch:!0,placeholder:"Select or create tags",onChange:e,value:t,loading:d,className:s,options:i.map(e=>({label:e.name,value:e.name,title:e.description||e.name})),optionFilterProp:"label",tokenSeparators:[","],maxTagCount:"responsive",allowClear:!0,style:{width:"100%"}})}},10134:(e,t,s)=>{s.d(t,{CR:()=>r,Uv:()=>a,mz:()=>l});let a=async(e,t)=>({role:"user",content:[{type:"text",text:e},{type:"image_url",image_url:{url:await new Promise((e,s)=>{let a=new FileReader;a.onload=()=>{e(a.result)},a.onerror=s,a.readAsDataURL(t)})}}]}),r=(e,t,s,a)=>{let r="";t&&a&&(r=a.toLowerCase().endsWith(".pdf")?"[PDF attached]":"[Image attached]");let l={role:"user",content:t?`${e} ${r}`:e};return t&&s&&(l.imagePreviewUrl=s),l},l=e=>"user"===e.role&&"string"==typeof e.content&&(e.content.includes("[Image attached]")||e.content.includes("[PDF attached]"))&&!!e.imagePreviewUrl},23745:(e,t,s)=>{s.d(t,{$n:()=>a.A,EY:()=>l.A,Zp:()=>r.A,hE:()=>n.A,ks:()=>o.A});var a=s(38983),r=s(42837),l=s(75892),o=s(34487),n=s(64628)},24777:(e,t,s)=>{s.d(t,{A:()=>p});var a=s(95155),r=s(12115),l=s(87278),o=s(76444),n=s(27397),i=s(8470),c=s(63021),d=s(17432),m=s(45960);let p=({reasoningContent:e})=>{let[t,s]=(0,r.useState)(!0);return e?(0,a.jsxs)("div",{className:"reasoning-content mt-1 mb-2",children:[(0,a.jsxs)(l.Ay,{type:"text",className:"flex items-center text-xs text-gray-500 hover:text-gray-700",onClick:()=>s(!t),icon:(0,a.jsx)(c.A,{}),children:[t?"Hide reasoning":"Show reasoning",t?(0,a.jsx)(d.A,{className:"ml-1"}):(0,a.jsx)(m.A,{className:"ml-1"})]}),t&&(0,a.jsx)("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded-md text-sm text-gray-700",children:(0,a.jsx)(o.oz,{components:{code({node:e,inline:t,className:s,children:r,...l}){let o=/language-(\w+)/.exec(s||"");return!t&&o?(0,a.jsx)(n.A,{style:i.A,language:o[1],PreTag:"div",className:"rounded-md my-2",...l,children:String(r).replace(/\n$/,"")}):(0,a.jsx)("code",{className:`${s} px-1.5 py-0.5 rounded bg-gray-100 text-sm font-mono`,...l,children:r})}},children:e})})]}):null}},27081:(e,t,s)=>{s.d(t,{B:()=>n,h:()=>o});var a=s(98825),r=s(28436);let l=e=>{if(!e)return;let t={};if(e.id&&(t.taskId=e.id),e.contextId&&(t.contextId=e.contextId),e.status&&(t.status={state:e.status.state,timestamp:e.status.timestamp},e.status.message?.parts)){let s=e.status.message.parts.filter(e=>"text"===e.kind&&e.text).map(e=>e.text).join(" ");s&&(t.status.message=s)}return e.metadata&&"object"==typeof e.metadata&&(t.metadata=e.metadata),Object.keys(t).length>0?t:void 0},o=async(e,t,s,o,n,i,c,d,m,p)=>{let u=m||(0,r.getProxyBaseUrl)(),g=u?`${u}/a2a/${e}/message/send`:`/a2a/${e}/message/send`,x={jsonrpc:"2.0",id:(0,a.A)(),method:"message/send",params:{message:{kind:"message",messageId:(0,a.A)().replace(/-/g,""),role:"user",parts:[{kind:"text",text:t}]}}};p&&p.length>0&&(x.params.metadata={guardrails:p});let h=performance.now();try{let t=await fetch(g,{method:"POST",headers:{[(0,r.getGlobalLitellmHeaderName)()]:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify(x),signal:n}),a=performance.now()-h;if(i&&i(a),!t.ok){let e=await t.json();throw Error(e.error?.message||e.detail||`HTTP ${t.status}`)}let m=await t.json(),p=performance.now()-h;if(c&&c(p),m.error)throw Error(m.error.message);let u=m.result;if(u){let t="",a=l(u);if(a&&d&&d(a),u.artifacts&&Array.isArray(u.artifacts)){for(let e of u.artifacts)if(e.parts&&Array.isArray(e.parts))for(let s of e.parts)"text"===s.kind&&s.text&&(t+=s.text)}else if(u.parts&&Array.isArray(u.parts))for(let e of u.parts)"text"===e.kind&&e.text&&(t+=e.text);else if(u.status?.message?.parts)for(let e of u.status.message.parts)"text"===e.kind&&e.text&&(t+=e.text);t?s(t,`a2a_agent/${e}`):(console.warn("Could not extract text from A2A response, showing raw JSON:",u),s(JSON.stringify(u,null,2),`a2a_agent/${e}`))}}catch(e){if(n?.aborted)return void console.log("A2A request was cancelled");throw console.error("A2A send message error:",e),e}},n=async(e,t,s,o,n,i,c,d,m)=>{let p,u=m||(0,r.getProxyBaseUrl)(),g=u?`${u}/a2a/${e}`:`/a2a/${e}`,x=(0,a.A)(),h=(0,a.A)().replace(/-/g,""),f=performance.now(),y=!1,b="";try{let a=await fetch(g,{method:"POST",headers:{[(0,r.getGlobalLitellmHeaderName)()]:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:x,method:"message/stream",params:{message:{kind:"message",messageId:h,role:"user",parts:[{kind:"text",text:t}]}}}),signal:n});if(!a.ok){let e=await a.json();throw Error(e.error?.message||e.detail||`HTTP ${a.status}`)}let m=a.body?.getReader();if(!m)throw Error("No response body");let u=new TextDecoder,j="",v=!1;for(;!v;){let t=await m.read();v=t.done;let a=t.value;if(v)break;let r=(j+=u.decode(a,{stream:!0})).split("\n");for(let t of(j=r.pop()||"",r))if(t.trim())try{let a=JSON.parse(t);if(!y){y=!0;let e=performance.now()-f;i&&i(e)}let r=a.result;if(r){let t=l(r);t&&(p={...p,...t});let a=r.kind;if("artifact-update"===a&&r.artifact){let t=r.artifact;if(t.parts&&Array.isArray(t.parts))for(let a of t.parts)"text"===a.kind&&a.text&&(b+=a.text,s(b,`a2a_agent/${e}`))}else if(r.artifacts&&Array.isArray(r.artifacts)){for(let t of r.artifacts)if(t.parts&&Array.isArray(t.parts))for(let a of t.parts)"text"===a.kind&&a.text&&(b+=a.text,s(b,`a2a_agent/${e}`))}else if("status-update"===a);else if(r.parts&&Array.isArray(r.parts))for(let t of r.parts)"text"===t.kind&&t.text&&(b+=t.text,s(b,`a2a_agent/${e}`))}if(a.error){let e=a.error.message||"Unknown A2A error";throw Error(e)}}catch(e){if(e instanceof Error&&e.message&&!e.message.includes("JSON"))throw e;t.trim().length>0&&console.warn("Failed to parse A2A streaming chunk:",t,e)}}let A=performance.now()-f;c&&c(A),p&&d&&d(p)}catch(e){if(n?.aborted)return void console.log("A2A streaming request was cancelled");throw console.error("A2A stream message error:",e),e}}},28743:(e,t,s)=>{s.d(t,{C:()=>r});var a=s(28436);let r=async(e,t)=>{try{let s=t||(0,a.getProxyBaseUrl)(),r=s?`${s}/v1/agents`:"/v1/agents",l=await fetch(r,{method:"GET",headers:{[(0,a.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"}});if(!l.ok){let e=await l.json();throw Error(e.detail||"Failed to fetch agents")}let o=await l.json();return console.log("Fetched agents:",o),o.sort((e,t)=>{let s=e.agent_name||e.agent_id,a=t.agent_name||t.agent_id;return s.localeCompare(a)}),o}catch(e){throw console.error("Error fetching agents:",e),e}}},47583:(e,t,s)=>{s.d(t,{A:()=>e6});var a=s(95155),r=s(34568),l=s(63003),o=s(13008),n=s(10756),i=s(5723),c=s(93076),d=s(50200),m=s(19910),p=s(54550),u=s(70757),g=s(94300),x=s(68413),h=s(68851),f=s(99749),y=s(24805),b=s(746),j=s(24611),v=s(85286),A=s(58872),N=s(23745),S=s(91808),w=s(62823),_=s(41326),C=s(23060),k=s(87278),E=s(23022),P=s(22277),I=s(95049),T=s(3373),M=s(12115),R=s(76444),O=s(27397),L=s(8470),U=s(98825),$=s(18283),D=s(87433),B=s(68462),F=s(25387),H=s(8208);function z(e){if(!e)return[];if(Array.isArray(e))return e.map(e=>q(e)).filter(e=>void 0!==e);let t=q(e);return void 0!==t?[t]:[]}function q(e,t){if(!e)return;let s=void 0!==t?t:e.default;if("object"===e.type){let t="object"!=typeof s||null===s||Array.isArray(s)?{}:{...s};return e.properties&&Object.entries(e.properties).forEach(([e,s])=>{t[e]=q(s,t[e])}),t}if("array"===e.type){if(Array.isArray(s)){let t=e.items;if(!t)return s;if(0===s.length){let e=z(t);return e.length?e:s}return Array.isArray(t)?s.map((e,s)=>q(t[s]??t[t.length-1],e)):s.map(e=>q(t,e))}return void 0!==s?s:z(e.items)}if(void 0!==s)return s;switch(e.type){case"integer":case"number":return 0;case"boolean":return!1;default:return""}}let G=e=>{let t=q(e);if("object"===e.type||"array"===e.type){let s="array"===e.type?[]:{};return JSON.stringify(t??s,null,2)}return t},J=(0,M.forwardRef)(({tool:e,className:t},s)=>{let[r]=F.A.useForm(),l=(0,M.useMemo)(()=>"string"==typeof e.inputSchema?{type:"object",properties:{input:{type:"string",description:"Input for this tool"}},required:["input"]}:e.inputSchema,[e.inputSchema]),o=(0,M.useMemo)(()=>l.properties?.params?.type==="object"&&l.properties.params.properties?{type:"object",properties:l.properties.params.properties,required:l.properties.params.required||[]}:l,[l]);return((0,M.useImperativeHandle)(s,()=>({getSubmitValues:async()=>{var e;let t;return e=await r.validateFields(),t={},Object.entries(e).forEach(([e,s])=>{let a=o.properties?.[e];if(a&&null!=s&&""!==s)switch(a.type){case"boolean":t[e]="true"===s||!0===s;break;case"number":case"integer":{let r=Number(s);t[e]=Number.isNaN(r)?s:"integer"===a.type?Math.trunc(r):r;break}case"object":case"array":try{let r="string"==typeof s?JSON.parse(s):s,l="object"===a.type&&null!==r&&"object"==typeof r&&!Array.isArray(r),o="array"===a.type&&Array.isArray(r);"object"===a.type&&l||"array"===a.type&&o?t[e]=r:t[e]=s}catch{t[e]=s}break;case"string":t[e]=String(s);break;default:t[e]=s}else null!=s&&""!==s&&(t[e]=s)}),l.properties?.params?.type==="object"&&l.properties.params.properties?{params:t}:t}})),M.useEffect(()=>{if(r.resetFields(),!o.properties)return;let e={};Object.entries(o.properties).forEach(([t,s])=>{e[t]=G(s)}),r.setFieldsValue(e)},[r,o,e]),"string"==typeof e.inputSchema)?(0,a.jsx)(F.A,{form:r,layout:"vertical",className:t,children:(0,a.jsx)(F.A.Item,{label:(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Input ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),name:"input",rules:[{required:!0,message:"Please enter input for this tool"}],children:(0,a.jsx)(S.A,{placeholder:"Enter input for this tool"})})}):o.properties?(0,a.jsx)(F.A,{form:r,layout:"vertical",className:t,children:Object.entries(o.properties).map(([t,s])=>{let r=G(s),l=`${e.name}-${t}`;return(0,a.jsx)(F.A.Item,{label:(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:[t," ",o.required?.includes(t)&&(0,a.jsx)("span",{className:"text-red-500",children:"*"}),s.description&&(0,a.jsx)(P.A,{title:s.description,children:(0,a.jsx)(g.A,{className:"ml-2 text-gray-400 hover:text-gray-600"})})]}),name:t,initialValue:r,rules:[{required:o.required?.includes(t),message:`Please enter ${t}`},..."object"===s.type||"array"===s.type?[{validator:(e,a)=>{if((null==a||""===a)&&!o.required?.includes(t))return Promise.resolve();try{let e="string"==typeof a?JSON.parse(a):a,t="object"===s.type&&null!==e&&"object"==typeof e&&!Array.isArray(e),r="array"===s.type&&Array.isArray(e);if("object"===s.type&&t||"array"===s.type&&r)return Promise.resolve();return Promise.reject(Error("object"===s.type?"Please enter a JSON object":"Please enter a JSON array"))}catch{return Promise.reject(Error("Invalid JSON"))}}}]:[]],children:"string"===s.type&&s.enum?(0,a.jsx)(C.A,{placeholder:`Select ${t}`,allowClear:!o.required?.includes(t),options:s.enum.map(e=>({value:e,label:e}))}):"string"!==s.type||s.enum?"number"===s.type||"integer"===s.type?(0,a.jsx)(H.A,{step:"integer"===s.type?1:void 0,placeholder:s.description||`Enter ${t}`,className:"w-full",style:{width:"100%"}}):"boolean"===s.type?(0,a.jsx)(C.A,{placeholder:`Select ${t}`,allowClear:!o.required?.includes(t),options:[{value:!0,label:"True"},{value:!1,label:"False"}]}):"object"===s.type||"array"===s.type?(0,a.jsx)(S.A.TextArea,{rows:"object"===s.type?4:3,placeholder:s.description||("object"===s.type?`Enter JSON object for ${t}`:`Enter JSON array for ${t}`),spellCheck:!1,className:"font-mono"}):(0,a.jsx)(S.A,{placeholder:s.description||`Enter ${t}`,allowClear:!0}):(0,a.jsx)(S.A,{placeholder:s.description||`Enter ${t}`,allowClear:!0})},l)})}):(0,a.jsx)(F.A,{form:r,layout:"vertical",className:t,children:(0,a.jsx)("div",{className:"py-4 text-center text-sm text-gray-500",children:"No parameters required for this tool."})})});J.displayName="MCPToolArgumentsForm";var W=s(12120),K=s(28436),V=s(6702),Y=s(66927),X=s(27081),Q=s(41687);async function Z(e,t,s,a,r=[],l,o,n,i,c,d,m,p,u,g){if(!a)throw Error("Virtual Key is required");console.log=function(){};let x=g||(0,K.getProxyBaseUrl)(),h={};r&&r.length>0&&(h["x-silinex-tags"]=r.join(","));let f=new Q.Ay({apiKey:a,baseURL:x,dangerouslyAllowBrowser:!0,defaultHeaders:h});try{let a=Date.now(),r=!1,u={model:s,messages:e.map(e=>({role:e.role,content:e.content})),stream:!0,max_tokens:1024,litellm_trace_id:c};for await(let e of(d&&(u.vector_store_ids=d),m&&(u.guardrails=m),p&&(u.policies=p),f.messages.stream(u,{signal:l}))){if(console.log("Stream event:",e),"content_block_delta"===e.type){let l=e.delta;if(!r){r=!0;let e=Date.now()-a;console.log("First token received! Time:",e,"ms"),n&&n(e)}"text_delta"===l.type?t("assistant",l.text,s):"reasoning_delta"===l.type&&o&&o(l.text)}if("message_delta"===e.type&&e.usage&&i){let t=e.usage;console.log("Usage data found:",t);let s={completionTokens:t.output_tokens,promptTokens:t.input_tokens,totalTokens:t.input_tokens+t.output_tokens};i(s)}}}catch(e){throw l?.aborted?console.log("Anthropic messages request was cancelled"):W.Ay.fromBackend(`Error occurred while generating model response. Please try again. Error: ${e}`),e}}var ee=s(69285);async function et(e,t,s,a,r,l,o,n,i,c){console.log=function(){},console.log("isLocal:",!1);let d=c||(0,K.getProxyBaseUrl)(),m=new ee.Ay.OpenAI({apiKey:r,baseURL:d,dangerouslyAllowBrowser:!0,defaultHeaders:l&&l.length>0?{"x-silinex-tags":l.join(",")}:void 0});try{let r=await m.audio.speech.create({model:a,input:e,voice:t,...n?{response_format:n}:{},...i?{speed:i}:{}},{signal:o}),l=await r.blob(),c=URL.createObjectURL(l);s(c,a)}catch(e){throw o?.aborted?console.log("Audio speech request was cancelled"):W.Ay.fromBackend(`Error occurred while generating speech. Please try again. Error: ${e}`),e}}async function es(e,t,s,a,r,l,o,n,i,c,d){console.log=function(){},console.log("isLocal:",!1);let m=d||(0,K.getProxyBaseUrl)(),p=new ee.Ay.OpenAI({apiKey:a,baseURL:m,dangerouslyAllowBrowser:!0,defaultHeaders:r&&r.length>0?{"x-silinex-tags":r.join(",")}:void 0});try{console.log("Processing audio file for transcription:",e.name);let a=await p.audio.transcriptions.create({model:s,file:e,...o?{language:o}:{},...n?{prompt:n}:{},...i?{response_format:i}:{},...void 0!==c?{temperature:c}:{}},{signal:l});if(console.log("Transcription response:",a),a&&a.text)t(a.text,s),W.Ay.success("Audio transcribed successfully");else throw Error("No transcription text in response")}catch(e){if(console.error("Error making audio transcription request:",e),l?.aborted)console.log("Audio transcription request was cancelled");else{let t="Failed to transcribe audio";e?.error?.message?t=e.error.message:e?.message&&(t=e.message),W.Ay.fromBackend(`Audio transcription failed: ${t}`)}throw e}}var ea=s(4761);async function er(e,t,s,a,r,l){if(!a)throw Error("Virtual Key is required");console.log=function(){};let o=l||(0,K.getProxyBaseUrl)(),n={};r&&r.length>0&&(n["x-silinex-tags"]=r.join(","));try{let r=o.endsWith("/")?o.slice(0,-1):o,l=`${r}/embeddings`,i=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json",[(0,K.getGlobalLitellmHeaderName)()]:`Bearer ${a}`,...n},body:JSON.stringify({model:s,input:e})});if(!i.ok){let e=await i.text();throw Error(e||`Request failed with status ${i.status}`)}let c=await i.json(),d=c?.data?.[0]?.embedding;if(!d)throw Error("No embedding returned from server");t(JSON.stringify(d),c?.model??s)}catch(e){throw W.Ay.fromBackend(`Error occurred while making embeddings request. Please try again. Error: ${e}`),e}}var el=s(28743),eo=s(22603);async function en(e,t,s,a,r,l,o,n){console.log=function(){},console.log("isLocal:",!1);let i=n||(0,K.getProxyBaseUrl)(),c=new ee.Ay.OpenAI({apiKey:r,baseURL:i,dangerouslyAllowBrowser:!0,defaultHeaders:l&&l.length>0?{"x-silinex-tags":l.join(",")}:void 0});try{let r=Array.isArray(e)?e:[e],l=[];for(let e=0;e<r.length;e++){let n=r[e];console.log(`Processing image ${e+1} of ${r.length}`);let i=await c.images.edit({model:a,image:n,prompt:t},{signal:o});if(console.log(`Response for image ${e+1}:`,i.data),i.data&&i.data[0]){if(i.data[0].url)s(i.data[0].url,a),l.push(i.data[0].url);else if(i.data[0].b64_json){let e=i.data[0].b64_json,t=`data:image/png;base64,${e}`;s(t,a),l.push(t)}}}l.length>1&&W.Ay.success(`Successfully processed ${l.length} images`)}catch(e){if(console.error("Error making image edit request:",e),o?.aborted)console.log("Image edits request was cancelled");else{let t="Failed to edit image(s)";e?.error?.message?t=e.error.message:e?.message&&(t=e.message),W.Ay.fromBackend(`Image edit failed: ${t}`)}throw e}}async function ei(e,t,s,a,r,l,o){console.log=function(){},console.log("isLocal:",!1);let n=o||(0,K.getProxyBaseUrl)(),i=new ee.Ay.OpenAI({apiKey:a,baseURL:n,dangerouslyAllowBrowser:!0,defaultHeaders:r&&r.length>0?{"x-silinex-tags":r.join(",")}:void 0});try{let a=await i.images.generate({model:s,prompt:e},{signal:l});if(console.log(a.data),a.data&&a.data[0])if(a.data[0].url)t(a.data[0].url,s);else if(a.data[0].b64_json){let e=a.data[0].b64_json;t(`data:image/png;base64,${e}`,s)}else throw Error("No image data found in response");else throw Error("Invalid response format")}catch(e){throw l?.aborted?console.log("Image generation request was cancelled"):W.Ay.fromBackend(`Error occurred while generating image. Please try again. Error: ${e}`),e}}async function ec(e,t,s,a,r=[],l,o,n,i,c,d,m,p,u,g,x,h,f,y,b,j,v){if(!a)throw Error("Virtual Key is required");if(!s||""===s.trim())throw Error("Model is required. Please select a model before sending a request.");console.log=function(){};let A=b||(0,K.getProxyBaseUrl)(),N={};r&&r.length>0&&(N["x-silinex-tags"]=r.join(","));let S=new ee.Ay.OpenAI({apiKey:a,baseURL:A,dangerouslyAllowBrowser:!0,defaultHeaders:N});try{let a=Date.now(),r=!1,b=e.map(e=>(Array.isArray(e.content),{role:e.role,content:e.content,type:"message"})),A=[];u&&u.length>0&&(u.includes("__all__")?A.push({type:"mcp",server_label:"litellm",server_url:"litellm_proxy/mcp",require_approval:"never"}):u.forEach(e=>{let t=j?.find(t=>t.server_id===e),s=t?.alias||t?.server_name||e,a=v?.[e]||[];A.push({type:"mcp",server_label:"litellm",server_url:`litellm_proxy/mcp/${s}`,require_approval:"never",...a.length>0?{allowed_tools:a}:{}})})),f&&A.push({type:"code_interpreter",container:{type:"auto"}});let N=await S.responses.create({model:s,input:b,stream:!0,litellm_trace_id:c,...g?{previous_response_id:g}:{},...d?{vector_store_ids:d}:{},...m?{guardrails:m}:{},...p?{policies:p}:{},...A.length>0?{tools:A,tool_choice:"auto"}:{}},{signal:l}),C="",k={code:"",containerId:""};for await(let e of N)if(console.log("Response event:",e),"object"==typeof e&&null!==e){if((e.type?.startsWith("response.mcp_")||"response.output_item.done"===e.type&&(e.item?.type==="mcp_list_tools"||e.item?.type==="mcp_call"))&&(console.log("MCP event received:",e),h)){let t={type:e.type,sequence_number:e.sequence_number,output_index:e.output_index,item_id:e.item_id||e.item?.id,item:e.item,delta:e.delta,arguments:e.arguments,timestamp:Date.now()};h(t)}"response.output_item.done"===e.type&&e.item?.type==="mcp_call"&&e.item?.name&&(C=e.item.name,console.log("MCP tool used:",C)),w=k;var w,_=k="response.output_item.done"===e.type&&e.item?.type==="code_interpreter_call"?(console.log("Code interpreter call completed:",e.item),{code:e.item.code||"",containerId:e.item.container_id||""}):w;if("response.output_item.done"===e.type&&e.item?.type==="message"&&e.item?.content&&y){for(let t of e.item.content)if("output_text"===t.type&&t.annotations){let e=t.annotations.filter(e=>"container_file_citation"===e.type);(e.length>0||_.code)&&y({code:_.code,containerId:_.containerId,annotations:e})}}if("response.role.delta"===e.type)continue;if("response.output_text.delta"===e.type&&"string"==typeof e.delta){let l=e.delta;if(console.log("Text delta",l),l.trim().length>0&&(t("assistant",l,s),!r)){r=!0;let e=Date.now()-a;console.log("First token received! Time:",e,"ms"),n&&n(e)}}if("response.reasoning.delta"===e.type&&"delta"in e){let t=e.delta;"string"==typeof t&&o&&o(t)}if("response.completed"===e.type&&"response"in e){let t=e.response,s=t.usage;if(console.log("Usage data:",s),console.log("Response completed event:",t),t.id&&x&&(console.log("Response ID for session management:",t.id),x(t.id)),s&&i){console.log("Usage data:",s);let e={completionTokens:s.output_tokens,promptTokens:s.input_tokens,totalTokens:s.total_tokens};s.completion_tokens_details?.reasoning_tokens&&(e.reasoningTokens=s.completion_tokens_details.reasoning_tokens),i(e,C)}}}return N}catch(e){throw l?.aborted?console.log("Responses API request was cancelled"):W.Ay.fromBackend(`Error occurred while generating model response. Please try again. Error: ${e}`),e}}var ed=s(91242),em=s(81283),ep=s(84425),eu=s(58847),eg=s(34537),ex=s(17432),eh=s(45960);let ef=(e,t=8)=>e?e.length>t?`${e.substring(0,t)}…`:e:null,ey=e=>{navigator.clipboard.writeText(e)},eb=({a2aMetadata:e,timeToFirstToken:t,totalLatency:s})=>{let[l,o]=(0,M.useState)(!1);if(!e&&!t&&!s)return null;let{taskId:i,contextId:c,status:d,metadata:p}=e||{},u=(e=>{if(!e)return null;try{return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return e}})(d?.timestamp);return(0,a.jsxs)("div",{className:"a2a-metrics mt-3 pt-2 border-t border-gray-200 text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2 text-gray-600",children:[(0,a.jsx)(m.A,{className:"mr-1.5 text-blue-500"}),(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"A2A Metadata"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-gray-500 ml-4",children:[d?.state&&(0,a.jsxs)("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${(e=>{switch(e){case"completed":return"bg-green-100 text-green-700";case"working":case"submitted":return"bg-blue-100 text-blue-700";case"failed":case"canceled":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}})(d.state)}`,children:[(e=>{switch(e){case"completed":return(0,a.jsx)(ed.A,{className:"text-green-500"});case"working":case"submitted":return(0,a.jsx)(r.A,{className:"text-blue-500"});case"failed":case"canceled":return(0,a.jsx)(em.A,{className:"text-red-500"});default:return(0,a.jsx)(ep.A,{className:"text-gray-500"})}})(d.state),(0,a.jsx)("span",{className:"ml-1 capitalize",children:d.state})]}),u&&(0,a.jsx)(P.A,{title:d?.timestamp,children:(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(ep.A,{className:"mr-1"}),u]})}),void 0!==s&&(0,a.jsx)(P.A,{title:"Total latency",children:(0,a.jsxs)("span",{className:"flex items-center text-blue-600",children:[(0,a.jsx)(ep.A,{className:"mr-1"}),(s/1e3).toFixed(2),"s"]})}),void 0!==t&&(0,a.jsx)(P.A,{title:"Time to first token",children:(0,a.jsxs)("span",{className:"flex items-center text-green-600",children:["TTFT: ",(t/1e3).toFixed(2),"s"]})})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-gray-500 ml-4 mt-1.5",children:[i&&(0,a.jsx)(P.A,{title:`Click to copy: ${i}`,children:(0,a.jsxs)("span",{className:"flex items-center cursor-pointer hover:text-gray-700",onClick:()=>ey(i),children:[(0,a.jsx)(eu.A,{className:"mr-1"}),"Task: ",ef(i),(0,a.jsx)(eg.A,{className:"ml-1 text-gray-400 hover:text-gray-600"})]})}),c&&(0,a.jsx)(P.A,{title:`Click to copy: ${c}`,children:(0,a.jsxs)("span",{className:"flex items-center cursor-pointer hover:text-gray-700",onClick:()=>ey(c),children:[(0,a.jsx)(n.A,{className:"mr-1"}),"Session: ",ef(c),(0,a.jsx)(eg.A,{className:"ml-1 text-gray-400 hover:text-gray-600"})]})}),(p||d?.message)&&(0,a.jsxs)(k.Ay,{type:"text",size:"small",className:"text-xs text-blue-500 hover:text-blue-700 p-0 h-auto",onClick:()=>o(!l),children:[l?(0,a.jsx)(ex.A,{}):(0,a.jsx)(eh.A,{}),(0,a.jsx)("span",{className:"ml-1",children:"Details"})]})]}),l&&(0,a.jsxs)("div",{className:"mt-2 ml-4 p-3 bg-gray-50 rounded-md text-gray-600 border border-gray-200",children:[d?.message&&(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Status Message:"}),(0,a.jsx)("span",{className:"ml-2",children:d.message})]}),i&&(0,a.jsxs)("div",{className:"mb-1.5 flex items-center",children:[(0,a.jsx)("span",{className:"font-medium text-gray-700 w-24",children:"Task ID:"}),(0,a.jsx)("code",{className:"ml-2 px-2 py-1 bg-white border border-gray-200 rounded text-xs font-mono",children:i}),(0,a.jsx)(eg.A,{className:"ml-2 cursor-pointer text-gray-400 hover:text-blue-500",onClick:()=>ey(i)})]}),c&&(0,a.jsxs)("div",{className:"mb-1.5 flex items-center",children:[(0,a.jsx)("span",{className:"font-medium text-gray-700 w-24",children:"Session ID:"}),(0,a.jsx)("code",{className:"ml-2 px-2 py-1 bg-white border border-gray-200 rounded text-xs font-mono",children:c}),(0,a.jsx)(eg.A,{className:"ml-2 cursor-pointer text-gray-400 hover:text-blue-500",onClick:()=>ey(c)})]}),p&&Object.keys(p).length>0&&(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Custom Metadata:"}),(0,a.jsx)("pre",{className:"mt-1.5 p-2 bg-white border border-gray-200 rounded text-xs font-mono overflow-x-auto whitespace-pre-wrap",children:JSON.stringify(p,null,2)})]})]})]})};var ej=s(21796),ev=s(61484),eA=s(80609);let eN=({temperature:e=1,maxTokens:t=2048,useAdvancedParams:s,onTemperatureChange:r,onMaxTokensChange:l,onUseAdvancedParamsChange:o,mockTestFallbacks:n,onMockTestFallbacksChange:i})=>{let[c,d]=(0,M.useState)(!1),m=void 0!==s?s:c,[p,u]=(0,M.useState)(e),[x,h]=(0,M.useState)(t);(0,M.useEffect)(()=>{u(e)},[e]),(0,M.useEffect)(()=>{h(t)},[t]);let f=e=>{let t=e??1;u(t),r?.(t)},y=e=>{let t=e??1e3;h(t),l?.(t)},b=m?"text-gray-700":"text-gray-400";return(0,a.jsxs)("div",{className:"space-y-4 p-4 w-80",children:[(0,a.jsx)(ev.A,{checked:m,onChange:e=>{var t;return t=e.target.checked,void(o?o(t):d(t))},children:(0,a.jsx)("span",{className:"font-medium",children:"Use Advanced Parameters"})}),i&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(ev.A,{checked:n??!1,onChange:e=>i(e.target.checked),children:(0,a.jsx)("span",{className:"font-medium",children:"Simulate failure to test fallbacks"})}),(0,a.jsx)(E.A,{trigger:"hover",placement:"right",content:(0,a.jsxs)("div",{style:{maxWidth:340},children:[(0,a.jsx)(_.A.Paragraph,{className:"text-sm",style:{marginBottom:8},children:"Causes the first request to fail so the router tries fallbacks (if configured). Use this to verify your fallback setup."}),(0,a.jsxs)(_.A.Paragraph,{className:"text-sm",style:{marginBottom:0},children:["Behavior can differ when keys, teams, or router settings are configured."," ",(0,a.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/keys_teams_router_settings",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800",children:"Learn more"})]})]}),children:(0,a.jsx)(g.A,{className:"text-xs text-gray-400 cursor-pointer shrink-0 hover:text-gray-600","aria-label":"Help: Simulate failure to test fallbacks"})})]}),(0,a.jsxs)("div",{className:"space-y-4 transition-opacity duration-200",style:{opacity:m?1:.4},children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(ej.E,{className:`text-sm ${b}`,children:"Temperature"}),(0,a.jsx)(P.A,{title:"Controls randomness. Lower values make output more deterministic, higher values more creative.",children:(0,a.jsx)(g.A,{className:`text-xs ${b} cursor-help`})})]}),(0,a.jsx)(H.A,{min:0,max:2,step:.1,value:p,onChange:f,disabled:!m,precision:1,className:"w-20"})]}),(0,a.jsx)(eA.A,{min:0,max:2,step:.1,value:p,onChange:f,disabled:!m,marks:{0:"0",1:"1.0",2:"2.0"}})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(ej.E,{className:`text-sm ${b}`,children:"Max Tokens"}),(0,a.jsx)(P.A,{title:"Maximum number of tokens to generate in the response.",children:(0,a.jsx)(g.A,{className:`text-xs ${b} cursor-help`})})]}),(0,a.jsx)(H.A,{min:1,max:32768,step:1,value:x,onChange:y,disabled:!m})]}),(0,a.jsx)(eA.A,{min:1,max:32768,step:1,value:x,onChange:y,disabled:!m,marks:{1:"1",32768:"32768"}})]})]})]})},eS=({message:e})=>e.isAudio&&"string"==typeof e.content?(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsx)("audio",{controls:!0,src:e.content,className:"max-w-full",style:{maxWidth:"500px"},children:"Your browser does not support the audio element."})}):null;var ew=s(36690);let e_={ALLOY:"Alloy - Professional and confident",ASH:"Ash - Casual and relaxed",BALAD:"Ballad - Smooth and melodic",CORAL:"Coral - Warm and engaging",ECHO:"Echo - Friendly and conversational",FABLE:"Fable - Wise and measured",NOVA:"Nova - Friendly and conversational",ONYX:"Onyx - Deep and authoritative",SAGE:"Sage - Wise and measured",SHIMMER:"Shimmer - Bright and cheerful"},eC=Object.entries({ALLOY:"alloy",ASH:"ash",BALAD:"ballad",CORAL:"coral",ECHO:"echo",FABLE:"fable",NOVA:"nova",ONYX:"onyx",SAGE:"sage",SHIMMER:"shimmer"}).map(([e,t])=>({value:t,label:e_[e]})),ek=[{value:ew.sx.CHAT,label:"/v1/chat/completions"},{value:ew.sx.RESPONSES,label:"/v1/responses"},{value:ew.sx.ANTHROPIC_MESSAGES,label:"/v1/messages"},{value:ew.sx.IMAGE,label:"/v1/images/generations"},{value:ew.sx.IMAGE_EDITS,label:"/v1/images/edits"},{value:ew.sx.EMBEDDINGS,label:"/v1/embeddings"},{value:ew.sx.SPEECH,label:"/v1/audio/speech"},{value:ew.sx.TRANSCRIPTION,label:"/v1/audio/transcriptions"},{value:ew.sx.A2A_AGENTS,label:"/v1/a2a/message/send"},{value:ew.sx.MCP,label:"/mcp-rest/tools/call"}];var eE=s(52158),eP=s(74220),eI=s(10134),eT=s(10639),eM=s(50957),eR=s(72197);let eO=({code:e,containerId:t,annotations:s=[],accessToken:l})=>{let[o,n]=(0,M.useState)({}),[i,c]=(0,M.useState)({}),d=(0,K.getProxyBaseUrl)();(0,M.useEffect)(()=>{let e=async()=>{for(let e of s)if((e.filename?.toLowerCase().endsWith(".png")||e.filename?.toLowerCase().endsWith(".jpg")||e.filename?.toLowerCase().endsWith(".jpeg")||e.filename?.toLowerCase().endsWith(".gif"))&&e.container_id&&e.file_id){c(t=>({...t,[e.file_id]:!0}));try{let t=await fetch(`${d}/v1/containers/${e.container_id}/files/${e.file_id}/content`,{headers:{[(0,K.getGlobalLitellmHeaderName)()]:`Bearer ${l}`}});if(t.ok){let s=await t.blob(),a=URL.createObjectURL(s);n(t=>({...t,[e.file_id]:a}))}}catch(e){console.error("Error fetching image:",e)}finally{c(t=>({...t,[e.file_id]:!1}))}}};return s.length>0&&l&&e(),()=>{Object.values(o).forEach(e=>URL.revokeObjectURL(e))}},[s,l,d]);let m=async e=>{try{let t=await fetch(`${d}/v1/containers/${e.container_id}/files/${e.file_id}/content`,{headers:{[(0,K.getGlobalLitellmHeaderName)()]:`Bearer ${l}`}});if(t.ok){let s=await t.blob(),a=URL.createObjectURL(s),r=document.createElement("a");r.href=a,r.download=e.filename||`file_${e.file_id}`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a)}}catch(e){console.error("Error downloading file:",e)}},p=s.filter(e=>e.filename?.toLowerCase().endsWith(".png")||e.filename?.toLowerCase().endsWith(".jpg")||e.filename?.toLowerCase().endsWith(".jpeg")||e.filename?.toLowerCase().endsWith(".gif")),u=s.filter(e=>!e.filename?.toLowerCase().endsWith(".png")&&!e.filename?.toLowerCase().endsWith(".jpg")&&!e.filename?.toLowerCase().endsWith(".jpeg")&&!e.filename?.toLowerCase().endsWith(".gif"));return e||0!==s.length?(0,a.jsxs)("div",{className:"mt-3 space-y-3",children:[e&&(0,a.jsx)(eT.A,{size:"small",items:[{key:"code",label:(0,a.jsxs)("span",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,a.jsx)(f.A,{})," Python Code Executed"]}),children:(0,a.jsx)(O.A,{language:"python",style:L.A,customStyle:{margin:0,borderRadius:"6px",fontSize:"12px",maxHeight:"300px",overflow:"auto"},children:e})}]}),p.map(e=>(0,a.jsx)("div",{className:"rounded-lg border border-gray-200 overflow-hidden",children:i[e.file_id]?(0,a.jsxs)("div",{className:"flex items-center justify-center p-8 bg-gray-50",children:[(0,a.jsx)(I.A,{indicator:(0,a.jsx)(r.A,{spin:!0})}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-500",children:"Loading image..."})]}):o[e.file_id]?(0,a.jsxs)("div",{children:[(0,a.jsx)("img",{src:o[e.file_id],alt:e.filename||"Generated chart",className:"max-w-full",style:{maxHeight:"400px"}}),(0,a.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 bg-gray-50 border-t border-gray-200",children:[(0,a.jsxs)("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[(0,a.jsx)(eM.A,{})," ",e.filename]}),(0,a.jsxs)("button",{onClick:()=>m(e),className:"text-xs text-blue-500 hover:text-blue-700 flex items-center gap-1",children:[(0,a.jsx)(eR.A,{})," Download"]})]})]}):(0,a.jsx)("div",{className:"flex items-center justify-center p-4 bg-gray-50",children:(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Image not available"})})},e.file_id)),u.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:u.map(e=>(0,a.jsxs)("button",{onClick:()=>m(e),className:"flex items-center gap-2 px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,a.jsx)(eu.A,{className:"text-blue-500"}),(0,a.jsx)("span",{className:"text-sm",children:e.filename}),(0,a.jsx)(eR.A,{className:"text-gray-400"})]},e.file_id))})]}):null};var eL=s(87056),eU=s(16989);let e$=({enabled:e,onEnabledChange:t,selectedModel:s,disabled:r=!1})=>{let l=(e=>{if(!e)return!1;let t=e.toLowerCase();return t.startsWith("openai/")||t.startsWith("gpt-")||t.startsWith("o1")||t.startsWith("o3")||t.includes("openai")})(s);return(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-3 bg-gradient-to-r from-blue-50 to-purple-50",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(f.A,{className:"text-blue-500"}),(0,a.jsx)(ej.E,{className:"font-medium text-gray-700",children:"Code Interpreter"}),(0,a.jsx)(P.A,{title:"Run Python code to generate files, charts, and analyze data. Container is created automatically.",children:(0,a.jsx)(g.A,{className:"text-gray-400 text-xs"})})]}),(0,a.jsx)(eU.A,{checked:e&&l,onChange:e=>{e&&!l?eL.Ay.warning("Code Interpreter is only available for OpenAI models"):t(e)},disabled:r||!l,size:"small",className:e&&l?"bg-blue-500":""})]}),!l&&(0,a.jsx)("div",{className:"mt-2 pt-2 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(em.A,{className:"text-amber-500 mt-0.5"}),(0,a.jsxs)("div",{className:"text-xs text-gray-600",children:[(0,a.jsx)("span",{children:"Code Interpreter is currently only supported for OpenAI models. "}),(0,a.jsx)("a",{href:"https://github.com/BerriAI/litellm/issues/new?template=feature_request.yml",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"Request support for other providers"})]})]})})]})};var eD=s(39771);let eB=({endpointType:e,onEndpointChange:t,className:s})=>(0,a.jsx)("div",{className:s,children:(0,a.jsx)(C.A,{showSearch:!0,value:e,style:{width:"100%"},onChange:t,options:ek,className:"rounded-md",filterOption:(e,t)=>(t?.label??"").toLowerCase().includes(e.toLowerCase())||(t?.value??"").toLowerCase().includes(e.toLowerCase())})});var eF=s(39092),eH=s.n(eF);let{Text:ez}=_.A,{Panel:eq}=eT.A,eG=({events:e,className:t})=>{if(console.log("MCPEventsDisplay: Received events:",e),!e||0===e.length)return console.log("MCPEventsDisplay: No events, returning null"),null;let s=e.find(e=>"response.output_item.done"===e.type&&e.item?.type==="mcp_list_tools"&&e.item.tools&&e.item.tools.length>0),r=e.filter(e=>"response.output_item.done"===e.type&&e.item?.type==="mcp_call");return(console.log("MCPEventsDisplay: toolsEvent:",s),console.log("MCPEventsDisplay: mcpCallEvents:",r),s||0!==r.length)?(0,a.jsxs)("div",{className:`jsx-32b14b04f420f3ac mcp-events-display ${t||""}`,children:[(0,a.jsx)(eH(),{id:"32b14b04f420f3ac",children:'.openai-mcp-tools.jsx-32b14b04f420f3ac{position:relative;margin:0;padding:0}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse.jsx-32b14b04f420f3ac{background:transparent!important;border:none!important}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-item.jsx-32b14b04f420f3ac{border:none!important;background:transparent!important}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-header.jsx-32b14b04f420f3ac{padding:0 0 0 20px!important;background:transparent!important;border:none!important;font-size:14px!important;color:#9ca3af!important;font-weight:400!important;line-height:20px!important;min-height:20px!important}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-header.jsx-32b14b04f420f3ac:hover{background:transparent!important;color:#6b7280!important}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-content.jsx-32b14b04f420f3ac{border:none!important;background:transparent!important}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-content-box.jsx-32b14b04f420f3ac{padding:4px 0 0 20px!important}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-expand-icon.jsx-32b14b04f420f3ac{position:absolute!important;left:2px!important;top:2px!important;color:#9ca3af!important;font-size:10px!important;width:16px!important;height:16px!important;display:flex!important;align-items:center!important;justify-content:center!important}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-expand-icon.jsx-32b14b04f420f3ac:hover{color:#6b7280!important}.openai-vertical-line.jsx-32b14b04f420f3ac{position:absolute;left:9px;top:18px;bottom:0;width:.5px;background-color:#f3f4f6;opacity:.8}.tool-item.jsx-32b14b04f420f3ac{font-family:ui-monospace,SFMono-Regular,"SF Mono",Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:13px;color:#4b5563;line-height:18px;padding:0;margin:0;background:white;position:relative;z-index:1}.mcp-section.jsx-32b14b04f420f3ac{margin-bottom:12px;background:white;position:relative;z-index:1}.mcp-section.jsx-32b14b04f420f3ac:last-child{margin-bottom:0}.mcp-section-header.jsx-32b14b04f420f3ac{font-size:13px;color:#6b7280;font-weight:500;margin-bottom:4px}.mcp-code-block.jsx-32b14b04f420f3ac{background:#f9fafb;border:1px solid#f3f4f6;border-radius:6px;padding:8px;font-size:12px}.mcp-json.jsx-32b14b04f420f3ac{font-family:ui-monospace,SFMono-Regular,"SF Mono",Monaco,Consolas,"Liberation Mono","Courier New",monospace;color:#374151;margin:0;white-space:pre-wrap;word-wrap:break-word}.mcp-approved.jsx-32b14b04f420f3ac{display:flex;align-items:center;font-size:13px;color:#6b7280}.mcp-checkmark.jsx-32b14b04f420f3ac{color:#10b981;margin-right:6px;font-weight:bold}.mcp-response-content.jsx-32b14b04f420f3ac{font-size:13px;color:#374151;line-height:1.5;white-space:pre-wrap;font-family:ui-monospace,SFMono-Regular,"SF Mono",Monaco,Consolas,"Liberation Mono","Courier New",monospace}'}),(0,a.jsxs)("div",{className:"jsx-32b14b04f420f3ac openai-mcp-tools",children:[(0,a.jsx)("div",{className:"jsx-32b14b04f420f3ac openai-vertical-line"}),(0,a.jsxs)(eT.A,{ghost:!0,size:"small",expandIconPosition:"start",defaultActiveKey:s?["list-tools"]:r.map((e,t)=>`mcp-call-${t}`),children:[s&&(0,a.jsx)(eq,{header:"List tools",children:(0,a.jsx)("div",{className:"jsx-32b14b04f420f3ac",children:s.item?.tools?.map((e,t)=>(0,a.jsx)("div",{className:"jsx-32b14b04f420f3ac tool-item",children:e.name},t))})},"list-tools"),r.map((e,t)=>(0,a.jsx)(eq,{header:e.item?.name||"Tool call",children:(0,a.jsxs)("div",{className:"jsx-32b14b04f420f3ac",children:[(0,a.jsxs)("div",{className:"jsx-32b14b04f420f3ac mcp-section",children:[(0,a.jsx)("div",{className:"jsx-32b14b04f420f3ac mcp-section-header",children:"Request"}),(0,a.jsx)("div",{className:"jsx-32b14b04f420f3ac mcp-code-block",children:e.item?.arguments&&(0,a.jsx)("pre",{className:"jsx-32b14b04f420f3ac mcp-json",children:(()=>{try{return JSON.stringify(JSON.parse(e.item.arguments),null,2)}catch(t){return e.item.arguments}})()})})]}),(0,a.jsx)("div",{className:"jsx-32b14b04f420f3ac mcp-section",children:(0,a.jsxs)("div",{className:"jsx-32b14b04f420f3ac mcp-approved",children:[(0,a.jsx)("span",{className:"jsx-32b14b04f420f3ac mcp-checkmark",children:"✓"})," Approved"]})}),e.item?.output&&(0,a.jsxs)("div",{className:"jsx-32b14b04f420f3ac mcp-section",children:[(0,a.jsx)("div",{className:"jsx-32b14b04f420f3ac mcp-section-header",children:"Response"}),(0,a.jsx)("div",{className:"jsx-32b14b04f420f3ac mcp-response-content",children:e.item.output})]})]})},`mcp-call-${t}`))]})]})]}):(console.log("MCPEventsDisplay: No valid events found, returning null"),null)};var eJ=s(24777),eW=s(79586);let eK=async(e,t)=>{let s=await new Promise((e,s)=>{let a=new FileReader;a.onload=()=>{e(a.result.split(",")[1])},a.onerror=s,a.readAsDataURL(t)}),a=t.type||(t.name.toLowerCase().endsWith(".pdf")?"application/pdf":"image/jpeg");return{role:"user",content:[{type:"input_text",text:e},{type:"input_image",image_url:`data:${a};base64,${s}`}]}},eV=(e,t,s,a)=>{let r="";t&&a&&(r=a.toLowerCase().endsWith(".pdf")?"[PDF attached]":"[Image attached]");let l={role:"user",content:t?`${e} ${r}`:e};return t&&s&&(l.imagePreviewUrl=s),l},eY=({message:e})=>{if(!("user"===e.role&&"string"==typeof e.content&&(e.content.includes("[Image attached]")||e.content.includes("[PDF attached]"))&&e.imagePreviewUrl))return null;let t="string"==typeof e.content&&e.content.includes("[PDF attached]");return(0,a.jsx)("div",{className:"mb-2",children:t?(0,a.jsx)("div",{className:"w-64 h-32 rounded-md border border-gray-200 bg-red-50 flex items-center justify-center",children:(0,a.jsx)(v.A,{style:{fontSize:"48px",color:"#dc2626"}})}):(0,a.jsx)("img",{src:e.imagePreviewUrl,alt:"User uploaded image",className:"max-w-64 rounded-md border border-gray-200 shadow-sm",style:{maxHeight:"200px"}})})};var eX=s(20791);let{Dragger:eQ}=w.A,eZ=({responsesUploadedImage:e,responsesImagePreviewUrl:t,onImageUpload:s,onRemoveImage:r})=>(0,a.jsx)(a.Fragment,{children:!e&&(0,a.jsx)(eQ,{beforeUpload:s,accept:"image/*,.pdf",showUploadList:!1,className:"inline-block",style:{padding:0,border:"none",background:"none"},children:(0,a.jsx)(P.A,{title:"Attach image or PDF",children:(0,a.jsx)("button",{type:"button",className:"flex items-center justify-center w-8 h-8 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-colors",children:(0,a.jsx)(eX.A,{style:{fontSize:"16px"}})})})})});var e0=s(73362);let e2=({endpointType:e,responsesSessionId:t,useApiSessionManagement:s,onToggleSessionManagement:r})=>e!==ew.sx.RESPONSES?null:(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Session Management"}),(0,a.jsx)(P.A,{title:"Choose between Silinex API session management (using previous_response_id) or UI-based session management (using chat history)",children:(0,a.jsx)(g.A,{className:"text-gray-400",style:{fontSize:"12px"}})})]}),(0,a.jsx)(eU.A,{checked:s,onChange:r,checkedChildren:"API",unCheckedChildren:"UI",size:"small"})]}),(0,a.jsxs)("div",{className:`text-xs p-2 rounded-md ${t?"bg-green-50 text-green-700 border border-green-200":"bg-blue-50 text-blue-700 border border-blue-200"}`,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(g.A,{style:{fontSize:"12px"}}),(()=>{if(!t)return s?"API Session: Ready":"UI Session: Ready";let e=s?"Response ID":"UI Session",a=t.slice(0,10);return`${e}: ${a}...`})()]}),t&&(0,a.jsx)(P.A,{title:(0,a.jsxs)("div",{className:"text-xs",children:[(0,a.jsx)("div",{className:"mb-1",children:"Copy response ID to continue session:"}),(0,a.jsx)("div",{className:"bg-gray-800 text-gray-100 p-2 rounded font-mono text-xs whitespace-pre-wrap",children:`curl -X POST "your-proxy-url/v1/responses" \\
  -H "Authorization: Bearer your-api-key" \\
  -H "Content-Type: application/json" \\
  -d '{
    "model": "your-model",
    "input": [{"role": "user", "content": "your message", "type": "message"}],
    "previous_response_id": "${t}",
    "stream": true
  }'`})]}),overlayStyle:{maxWidth:"500px"},children:(0,a.jsx)("button",{onClick:()=>{t&&(navigator.clipboard.writeText(t),W.Ay.success("Response ID copied to clipboard!"))},className:"ml-2 p-1 hover:bg-green-100 rounded transition-colors",children:(0,a.jsx)(eg.A,{style:{fontSize:"12px"}})})})]}),(0,a.jsx)("div",{className:"text-xs opacity-75 mt-1",children:t?s?"Silinex API session active - context maintained server-side":"UI session active - context maintained client-side":s?"Silinex will manage session using previous_response_id":"UI will manage session using chat history"})]})]});var e1=s(63847);let{TextArea:e4}=S.A,{Dragger:e3}=w.A,e5=new Set([ew.sx.CHAT,ew.sx.RESPONSES,ew.sx.MCP]),e6=({accessToken:e,token:t,userRole:s,userID:S,disabledPersonalKeyCreation:w,proxySettings:F,simplified:H=!1,fixedModel:z})=>{let q,G=(0,e1.W)("zh-CN"),Q=(0,e1.W)("en-US"),ee=(e,t)=>{let s=t.split("."),a=e;for(let e of s)if(!a||"object"!=typeof a||!(e in a))return null;else a=a[e];return"string"==typeof a?a:null},ed=(e,t)=>ee(G,e)||ee(Q,e)||t,[em,ep]=(0,M.useState)([]),[eu,eg]=(0,M.useState)(()=>{let e=sessionStorage.getItem("selectedMCPServers");try{return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing selectedMCPServers from sessionStorage",e),[]}}),[ex,eh]=(0,M.useState)(!1),[ef,ey]=(0,M.useState)({}),[ej,ev]=(0,M.useState)(void 0),eA=(0,M.useRef)(null),[e_,ek]=(0,M.useState)(()=>{let e=sessionStorage.getItem("mcpServerToolRestrictions");try{return e?JSON.parse(e):{}}catch(e){return console.error("Error parsing mcpServerToolRestrictions from sessionStorage",e),{}}}),[eT,eM]=(0,M.useState)(()=>{let e=sessionStorage.getItem("apiKeySource");if(e)try{return JSON.parse(e)}catch(e){console.error("Error parsing apiKeySource from sessionStorage",e)}return w?"custom":"session"}),[eR,eL]=(0,M.useState)(()=>sessionStorage.getItem("apiKey")||""),[eU,eF]=(0,M.useState)(()=>sessionStorage.getItem("customProxyBaseUrl")||""),[eH,ez]=(0,M.useState)(""),[eq,eX]=(0,M.useState)(()=>{if(H)return[];try{let e=sessionStorage.getItem("chatHistory");return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing chatHistory from sessionStorage",e),[]}}),[eQ,e6]=(0,M.useState)(H?z:void 0),[e7,e8]=(0,M.useState)(!1),[e9,te]=(0,M.useState)([]),[tt,ts]=(0,M.useState)([]),[ta,tr]=(0,M.useState)(void 0),tl=(0,M.useRef)(null),[to,tn]=(0,M.useState)(()=>sessionStorage.getItem("endpointType")||ew.sx.CHAT),[ti,tc]=(0,M.useState)(!1),td=(0,M.useRef)(null),[tm,tp]=(0,M.useState)(()=>{let e=sessionStorage.getItem("selectedTags");try{return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing selectedTags from sessionStorage",e),[]}}),[tu,tg]=(0,M.useState)(()=>{let e=sessionStorage.getItem("selectedVoice");if(!e)return"alloy";try{return JSON.parse(e)}catch{return e}}),[tx,th]=(0,M.useState)(()=>{let e=sessionStorage.getItem("selectedVectorStores");try{return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing selectedVectorStores from sessionStorage",e),[]}}),[tf,ty]=(0,M.useState)(()=>{let e=sessionStorage.getItem("selectedGuardrails");try{return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing selectedGuardrails from sessionStorage",e),[]}}),[tb,tj]=(0,M.useState)(()=>{let e=sessionStorage.getItem("selectedPolicies");try{return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing selectedPolicies from sessionStorage",e),[]}}),[tv,tA]=(0,M.useState)(()=>sessionStorage.getItem("messageTraceId")||null),[tN,tS]=(0,M.useState)(()=>sessionStorage.getItem("responsesSessionId")||null),[tw,t_]=(0,M.useState)(()=>{let e=sessionStorage.getItem("useApiSessionManagement");return!e||JSON.parse(e)}),[tC,tk]=(0,M.useState)([]),[tE,tP]=(0,M.useState)([]),[tI,tT]=(0,M.useState)(null),[tM,tR]=(0,M.useState)(null),[tO,tL]=(0,M.useState)(null),[tU,t$]=(0,M.useState)(null),[tD,tB]=(0,M.useState)(null),[tF,tH]=(0,M.useState)(!1),[tz,tq]=(0,M.useState)(""),[tG,tJ]=(0,M.useState)("openai"),[tW,tK]=(0,M.useState)([]),[tV,tY]=(0,M.useState)(1),[tX,tQ]=(0,M.useState)(2048),[tZ,t0]=(0,M.useState)(!1),[t2,t1]=(0,M.useState)(!1),t4=function(){let[e,t]=(0,M.useState)(()=>{let e=sessionStorage.getItem("codeInterpreterEnabled");return!!e&&JSON.parse(e)}),[s,a]=(0,M.useState)(null),r=(0,M.useCallback)(e=>{t(e),sessionStorage.setItem("codeInterpreterEnabled",JSON.stringify(e))},[]),l=(0,M.useCallback)(()=>{a(null)},[]),o=(0,M.useCallback)(()=>{r(!e)},[e,r]);return{enabled:e,result:s,setEnabled:r,setResult:a,clearResult:l,toggle:o}}(),t3=(0,M.useRef)(null),t5=async()=>{let t="session"===eT?e:eR;if(t){eh(!0);try{let e=await (0,K.fetchMCPServers)(t);ep(Array.isArray(e)?e:e.data||[])}catch(e){console.error("Error fetching MCP servers:",e)}finally{eh(!1)}}};(0,M.useEffect)(()=>{H&&z&&(e6(z),tn(ew.sx.CHAT))},[H,z]);let t6=async t=>{let s="session"===eT?e:eR;if(s&&!ef[t])try{let e=await (0,K.listMCPTools)(s,t);ey(s=>({...s,[t]:e.tools||[]}))}catch(e){console.error(`Error fetching tools for server ${t}:`,e)}};(0,M.useEffect)(()=>{if(tF){let t=(0,eD.O)({apiKeySource:eT,accessToken:e,apiKey:eR,inputMessage:eH,chatHistory:eq,selectedTags:tm,selectedVectorStores:tx,selectedGuardrails:tf,selectedPolicies:tb,selectedMCPServers:eu,mcpServers:em,mcpServerToolRestrictions:e_,endpointType:to,selectedModel:eQ,selectedSdk:tG,selectedVoice:tu,proxySettings:F});tq(t)}},[tF,tG,eT,e,eR,eH,eq,tm,tx,tf,tb,eu,em,e_,to,eQ,F]),(0,M.useEffect)(()=>{if(H)return;let e=setTimeout(()=>{sessionStorage.setItem("chatHistory",JSON.stringify(eq))},500);return()=>{clearTimeout(e)}},[eq,H]),(0,M.useEffect)(()=>{sessionStorage.setItem("apiKeySource",JSON.stringify(eT)),sessionStorage.setItem("apiKey",eR),sessionStorage.setItem("endpointType",to),sessionStorage.setItem("selectedTags",JSON.stringify(tm)),sessionStorage.setItem("selectedVectorStores",JSON.stringify(tx)),sessionStorage.setItem("selectedGuardrails",JSON.stringify(tf)),sessionStorage.setItem("selectedPolicies",JSON.stringify(tb)),sessionStorage.setItem("selectedMCPServers",JSON.stringify(eu)),sessionStorage.setItem("mcpServerToolRestrictions",JSON.stringify(e_)),sessionStorage.setItem("selectedVoice",tu),sessionStorage.removeItem("selectedMCPTools"),H||(eQ?sessionStorage.setItem("selectedModel",eQ):sessionStorage.removeItem("selectedModel")),tv?sessionStorage.setItem("messageTraceId",tv):sessionStorage.removeItem("messageTraceId"),tN?sessionStorage.setItem("responsesSessionId",tN):sessionStorage.removeItem("responsesSessionId"),sessionStorage.setItem("useApiSessionManagement",JSON.stringify(tw))},[H,eT,eR,eQ,to,tm,tx,tf,tb,tv,tN,tw,eu,e_,tu]),(0,M.useEffect)(()=>{let a="session"===eT?e:eR;if(!a||!t||!s||!S)return void console.log("userApiKey or token or userRole or userID is missing = ",a,t,s,S);let r=async()=>{try{if(!a)return void console.log("userApiKey is missing");let e=await (0,eo.Q)(a);console.log("Fetched models:",e),te(e);let t=e.some(e=>e.model_group===eQ);e.length&&t||e6(void 0)}catch(e){console.error("Error fetching model info:",e)}};H||r(),t5()},[e,S,s,eT,eR,t,H]),(0,M.useEffect)(()=>{to!==ew.sx.MCP||1!==eu.length||"__all__"===eu[0]||ef[eu[0]]||t6(eu[0])},[to,eu,ef]),(0,M.useEffect)(()=>{let t="session"===eT?e:eR;t&&to===ew.sx.A2A_AGENTS&&(async()=>{try{let e=await (0,el.C)(t,eU||void 0);ts(e),ta&&!e.some(e=>e.agent_name===ta)&&tr(void 0)}catch(e){console.error("Error fetching agents:",e)}})()},[e,eT,eR,to,eU,ta]),(0,M.useEffect)(()=>{t3.current&&setTimeout(()=>{t3.current?.scrollIntoView({behavior:"smooth",block:"end"})},100)},[eq]);let t7=(e,t,s)=>{console.log("updateTextUI called with:",e,t,s),eX(a=>{let r=a[a.length-1];if(!r||r.role!==e||r.isImage||r.isAudio)return[...a,{role:e,content:t,model:s}];{let e={...r,content:r.content+t,model:r.model??s};return[...a.slice(0,-1),e]}})},t8=e=>{eX(t=>{let s=t[t.length-1];return!s||"assistant"!==s.role||s.isImage||s.isAudio?t.length>0&&"user"===t[t.length-1].role?[...t,{role:"assistant",content:"",reasoningContent:e}]:t:[...t.slice(0,t.length-1),{...s,reasoningContent:(s.reasoningContent||"")+e}]})},t9=e=>{console.log("updateTimingData called with:",e),eX(t=>{let s=t[t.length-1];if(console.log("Current last message:",s),s&&"assistant"===s.role){console.log("Updating assistant message with timeToFirstToken:",e);let a=[...t.slice(0,t.length-1),{...s,timeToFirstToken:e}];return console.log("Updated chat history:",a),a}return s&&"user"===s.role?(console.log("Creating new assistant message with timeToFirstToken:",e),[...t,{role:"assistant",content:"",timeToFirstToken:e}]):(console.log("No appropriate message found to update timing"),t)})},se=(e,t)=>{console.log("Received usage data:",e),eX(s=>{let a=s[s.length-1];if(a&&"assistant"===a.role){console.log("Updating message with usage data:",e);let r={...a,usage:e,toolName:t};return console.log("Updated message:",r),[...s.slice(0,s.length-1),r]}return s})},st=e=>{console.log("Received A2A metadata:",e),eX(t=>{let s=t[t.length-1];if(s&&"assistant"===s.role){let a={...s,a2aMetadata:e};return[...t.slice(0,t.length-1),a]}return t})},ss=e=>{eX(t=>{let s=t[t.length-1];return s&&"assistant"===s.role?[...t.slice(0,t.length-1),{...s,totalLatency:e}]:t})},sa=e=>{console.log("Received search results:",e),eX(t=>{let s=t[t.length-1];if(s&&"assistant"===s.role){console.log("Updating message with search results");let a={...s,searchResults:e};return[...t.slice(0,t.length-1),a]}return t})},sr=e=>{console.log("Received response ID for session management:",e),tw&&tS(e)},sl=e=>{console.log("ChatUI: Received MCP event:",e),tK(t=>{if(e.item_id&&t.some(t=>t.item_id===e.item_id&&t.type===e.type&&(t.sequence_number===e.sequence_number||void 0===t.sequence_number&&void 0===e.sequence_number)))return console.log("ChatUI: Duplicate MCP event, skipping"),t;let s=[...t,e];return console.log("ChatUI: Updated MCP events:",s),s})},so=(e,t)=>{eX(s=>[...s,{role:"assistant",content:e,model:t,isImage:!0}])},sn=(e,t)=>{eX(s=>{let a=s[s.length-1];if(!a||"assistant"!==a.role||a.isImage||a.isAudio)return[...s,{role:"assistant",content:"",model:t,image:{url:e,detail:"auto"}}];{let r={...a,image:{url:e,detail:"auto"},model:a.model??t};return[...s.slice(0,-1),r]}})},si=e=>{tk(t=>[...t,e]);let t=URL.createObjectURL(e);return tP(e=>[...e,t]),!1},sc=()=>{tE.forEach(e=>{URL.revokeObjectURL(e)}),tk([]),tP([])},sd=()=>{tM&&URL.revokeObjectURL(tM),tT(null),tR(null)},sm=()=>{tU&&URL.revokeObjectURL(tU),tL(null),t$(null)},sp=()=>{tB(null)},su=async()=>{let a;if(""===eH.trim()&&to!==ew.sx.TRANSCRIPTION&&to!==ew.sx.MCP)return;if(to===ew.sx.IMAGE_EDITS&&0===tC.length)return void W.Ay.fromBackend(ed("playground.chat.notifications.uploadImageRequired","Please upload at least one image for editing"));if(to===ew.sx.TRANSCRIPTION&&!tD)return void W.Ay.fromBackend(ed("playground.chat.notifications.uploadAudioRequired","Please upload an audio file for transcription"));if(to===ew.sx.A2A_AGENTS&&!ta)return void W.Ay.fromBackend(ed("playground.chat.notifications.selectAgentRequired","Please select an agent to send a message"));let r={};if(to===ew.sx.MCP){if(!(1===eu.length&&"__all__"!==eu[0]?eu[0]:null))return void W.Ay.fromBackend(ed("playground.chat.notifications.selectMcpServerRequired","Please select an MCP server to test"));if(!ej)return void W.Ay.fromBackend(ed("playground.chat.notifications.selectMcpToolRequired","Please select an MCP tool to call"));if(!(ef[eu[0]]||[]).find(e=>e.name===ej))return void W.Ay.fromBackend(ed("playground.chat.notifications.waitToolSchema","Please wait for tool schema to load"));try{r=await eA.current?.getSubmitValues()??{}}catch(e){W.Ay.fromBackend(e instanceof Error?e.message:ed("playground.chat.notifications.fillRequiredParameters","Please fill in all required parameters"));return}}if([ew.sx.CHAT,ew.sx.IMAGE,ew.sx.SPEECH,ew.sx.IMAGE_EDITS,ew.sx.RESPONSES,ew.sx.ANTHROPIC_MESSAGES,ew.sx.EMBEDDINGS,ew.sx.TRANSCRIPTION].includes(to)&&!eQ)return void W.Ay.fromBackend(ed("playground.chat.notifications.selectModelRequired","Please select a model before sending a request"));if(!t||!s||!S)return;let l=H||"session"===eT?e:eR;if(!l)return void W.Ay.fromBackend(ed("playground.chat.notifications.missingVirtualKey","Please provide a Virtual Key or select Current UI Session"));td.current=new AbortController;let o=td.current.signal;if(to===ew.sx.RESPONSES&&tI)try{a=await eK(eH,tI)}catch(e){W.Ay.fromBackend(ed("playground.chat.notifications.processImageFailed","Failed to process image. Please try again."));return}else if(to===ew.sx.CHAT&&tO)try{a=await (0,eI.Uv)(eH,tO)}catch(e){W.Ay.fromBackend(ed("playground.chat.notifications.processImageFailed","Failed to process image. Please try again."));return}else a={role:"user",content:eH};let n=tv||(0,U.A)();tv||tA(n),eX([...eq,to===ew.sx.RESPONSES&&tI?eV(eH,!0,tM||void 0,tI.name):to===ew.sx.CHAT&&tO?(0,eI.CR)(eH,!0,tU||void 0,tO.name):to===ew.sx.TRANSCRIPTION&&tD?eV(eH?`🎵 Audio file: ${tD.name}
Prompt: ${eH}`:`🎵 Audio file: ${tD.name}`,!1):to===ew.sx.MCP&&ej?eV(`🔧 MCP Tool: ${ej}
Arguments: ${JSON.stringify(r,null,2)}`,!1):eV(eH,!1)]),tK([]),t4.clearResult(),tc(!0);try{if(eQ)if(to===ew.sx.CHAT){let e=[...eq.filter(e=>!e.isImage&&!e.isAudio).map(({role:e,content:t})=>({role:e,content:"string"==typeof t?t:""})),a],t=H&&F?F.LITELLM_UI_API_DOC_BASE_URL??F.PROXY_BASE_URL??void 0:eU||void 0;await (0,ea.u)(e,(e,t)=>t7("assistant",e,t),eQ,l,tm,o,t8,t9,se,n,tx.length>0?tx:void 0,tf.length>0?tf:void 0,tb.length>0?tb:void 0,eu,sn,sa,tZ?tV:void 0,tZ?tX:void 0,ss,t,em,e_,sl,t2)}else if(to===ew.sx.IMAGE)await ei(eH,(e,t)=>so(e,t),eQ,l,tm,o,eU||void 0);else if(to===ew.sx.SPEECH)await et(eH,tu,(e,t)=>{eX(s=>[...s,{role:"assistant",content:e,model:t,isAudio:!0}])},eQ||"",l,tm,o,void 0,void 0,eU||void 0);else if(to===ew.sx.IMAGE_EDITS)tC.length>0&&await en(1===tC.length?tC[0]:tC,eH,(e,t)=>so(e,t),eQ,l,tm,o,eU||void 0);else if(to===ew.sx.RESPONSES){let e;e=tw&&tN?[a]:[...eq.filter(e=>!e.isImage&&!e.isAudio).map(({role:e,content:t})=>({role:e,content:t})),a],await ec(e,(e,t,s)=>t7(e,t,s),eQ,l,tm,o,t8,t9,se,n,tx.length>0?tx:void 0,tf.length>0?tf:void 0,tb.length>0?tb:void 0,eu,tw?tN:null,sr,sl,t4.enabled,t4.setResult,eU||void 0,em,e_)}else if(to===ew.sx.ANTHROPIC_MESSAGES){let e=[...eq.filter(e=>!e.isImage&&!e.isAudio).map(({role:e,content:t})=>({role:e,content:t})),a];await Z(e,(e,t,s)=>t7(e,t,s),eQ,l,tm,o,t8,t9,se,n,tx.length>0?tx:void 0,tf.length>0?tf:void 0,tb.length>0?tb:void 0,eu,eU||void 0)}else to===ew.sx.EMBEDDINGS?await er(eH,(e,t)=>{eX(s=>[...s,{role:"assistant",content:(0,$.W5)(e,100),model:t,isEmbeddings:!0}])},eQ,l,tm,eU||void 0):to===ew.sx.TRANSCRIPTION&&tD&&await es(tD,(e,t)=>t7("assistant",e,t),eQ,l,tm,o,void 0,void 0,void 0,void 0,eU||void 0);if(to===ew.sx.MCP){let e=1===eu.length&&"__all__"!==eu[0]?eu[0]:null;if(e&&ej){let t=await (0,K.callMCPTool)(l,e,ej,r,tf.length>0?{guardrails:tf}:void 0),s=t?.content?.length>0?JSON.stringify(t.content.map(e=>"text"===e.type?e.text:e).filter(Boolean),null,2):JSON.stringify(t,null,2);t7("assistant",s||ed("playground.chat.notifications.toolExecuted","Tool executed successfully."))}}to===ew.sx.A2A_AGENTS&&ta&&await (0,X.h)(ta,eH,(e,t)=>t7("assistant",e,t),l,o,t9,ss,st,eU||void 0,tf.length>0?tf:void 0)}catch(e){o.aborted?console.log("Request was cancelled"):(console.error("Error fetching response",e),t7("assistant",`${ed("playground.chat.notifications.fetchResponseError","Error fetching response:")}${e}`))}finally{tc(!1),td.current=null,to===ew.sx.IMAGE_EDITS&&sc(),to===ew.sx.RESPONSES&&tI&&sd(),to===ew.sx.CHAT&&tO&&sm(),to===ew.sx.TRANSCRIPTION&&tD&&sp()}ez("")};if(s&&"Admin Viewer"===s){let{Title:e,Paragraph:t}=_.A;return(0,a.jsxs)("div",{children:[(0,a.jsx)(e,{level:1,children:ed("playground.chat.accessDeniedTitle","Access Denied")}),(0,a.jsx)(t,{children:ed("playground.chat.accessDeniedDescription","Ask your proxy admin for access to test models")})]})}let sg=(0,a.jsx)(r.A,{style:{fontSize:24},spin:!0});return(0,a.jsxs)("div",{className:`w-full bg-white ${H?"h-full flex flex-col":"p-4 pb-0"}`,children:[(0,a.jsx)(N.Zp,{className:`w-full rounded-xl shadow-md overflow-hidden ${H?"h-full flex flex-col":""}`,children:(0,a.jsxs)("div",{className:`flex w-full gap-4 ${H?"h-full":"h-[80vh]"}`,children:[!H&&(0,a.jsxs)("div",{className:"w-1/4 p-4 bg-gray-50 overflow-y-auto",children:[(0,a.jsx)(N.hE,{className:"text-xl font-semibold mb-6 mt-2",children:ed("playground.chat.configurations","Configurations")}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(N.EY,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,a.jsx)(l.A,{className:"mr-2"})," ",ed("playground.chat.virtualKeySource","Virtual Key Source")]}),(0,a.jsx)(C.A,{disabled:w,value:eT,style:{width:"100%"},onChange:e=>{eM(e)},options:[{value:"session",label:ed("playground.chat.currentUiSession","Current UI Session")},{value:"custom",label:ed("playground.chat.virtualKey","Virtual Key")}],className:"rounded-md"}),"custom"===eT&&(0,a.jsx)(N.ks,{className:"mt-2",placeholder:ed("playground.chat.enterCustomVirtualKey","Enter custom Virtual Key"),type:"password",onValueChange:eL,value:eR,icon:l.A})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)(N.EY,{className:"font-medium block text-gray-700 flex items-center",children:[(0,a.jsx)(o.A,{className:"mr-2"})," ",ed("playground.chat.customProxyBaseUrl","Custom Proxy Base URL")]}),F?.LITELLM_UI_API_DOC_BASE_URL&&!eU&&(0,a.jsx)(k.Ay,{type:"link",size:"small",icon:(0,a.jsx)(n.A,{}),onClick:()=>{eF(F.LITELLM_UI_API_DOC_BASE_URL||""),sessionStorage.setItem("customProxyBaseUrl",F.LITELLM_UI_API_DOC_BASE_URL||"")},className:"text-gray-500 hover:text-gray-700",children:ed("playground.chat.fill","Fill")}),eU&&(0,a.jsx)(k.Ay,{type:"link",size:"small",icon:(0,a.jsx)(i.A,{}),onClick:()=>{eF(""),sessionStorage.removeItem("customProxyBaseUrl")},className:"text-gray-500 hover:text-gray-700",children:ed("playground.chat.clear","Clear")})]}),(0,a.jsx)(N.ks,{placeholder:ed("playground.chat.customProxyPlaceholder","Optional: Enter custom proxy URL (e.g., http://localhost:5000)"),onValueChange:e=>{eF(e),sessionStorage.setItem("customProxyBaseUrl",e)},value:eU,icon:c.A}),eU&&(0,a.jsxs)(N.EY,{className:"text-xs text-gray-500 mt-1",children:[ed("playground.chat.apiCallsSentTo","API calls will be sent to:")," ",eU]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(N.EY,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,a.jsx)(c.A,{className:"mr-2"})," ",ed("playground.chat.endpointType","Endpoint Type")]}),(0,a.jsx)(eB,{endpointType:to,onEndpointChange:e=>{tn(e),e6(void 0),tr(void 0),e8(!1),ev(void 0),e===ew.sx.MCP&&eg(e=>1===e.length&&"__all__"!==e[0]?e:[]);try{sessionStorage.removeItem("selectedModel"),sessionStorage.removeItem("selectedAgent")}catch{}},className:"mb-4"}),to===ew.sx.SPEECH&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)(N.EY,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,a.jsx)(d.A,{className:"mr-2"}),ed("playground.chat.voice","Voice")]}),(0,a.jsx)(C.A,{value:tu,onChange:e=>{tg(e),sessionStorage.setItem("selectedVoice",e)},style:{width:"100%"},className:"rounded-md",options:eC})]}),(0,a.jsx)(e2,{endpointType:to,responsesSessionId:tN,useApiSessionManagement:tw,onToggleSessionManagement:e=>{t_(e),e||tS(null)}})]}),to!==ew.sx.A2A_AGENTS&&to!==ew.sx.MCP&&(0,a.jsxs)("div",{children:[(0,a.jsxs)(N.EY,{className:"font-medium block mb-2 text-gray-700 flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(m.A,{className:"mr-2"})," ",ed("playground.chat.selectModel","Select Model")]}),(()=>{if(!eQ||"custom"===eQ)return!1;let e=e9.find(e=>e.model_group===eQ);return!!e&&(!e.mode||"chat"===e.mode)})()?(0,a.jsx)(E.A,{content:(0,a.jsx)(eN,{temperature:tV,maxTokens:tX,useAdvancedParams:tZ,onTemperatureChange:tY,onMaxTokensChange:tQ,onUseAdvancedParamsChange:t0,mockTestFallbacks:t2,onMockTestFallbacksChange:t1}),title:ed("playground.chat.modelSettings","Model Settings"),trigger:"click",placement:"right",children:(0,a.jsx)(k.Ay,{type:"text",size:"small",icon:(0,a.jsx)(o.A,{}),className:"text-gray-500 hover:text-gray-700","aria-label":ed("playground.chat.modelSettings","Model Settings"),"data-testid":"model-settings-button"})}):(0,a.jsx)(P.A,{title:ed("playground.chat.advancedOnlyForChatModels","Advanced parameters are only supported for chat models currently"),children:(0,a.jsx)(k.Ay,{type:"text",size:"small",icon:(0,a.jsx)(o.A,{}),className:"text-gray-300 cursor-not-allowed",disabled:!0})})]}),(0,a.jsx)(C.A,{value:eQ,placeholder:ed("playground.chat.selectAModel","Select a Model"),onChange:e=>{console.log(`selected ${e}`),e6(e),e8("custom"===e)},options:[{value:"custom",label:ed("playground.chat.enterCustomModel","Enter custom model"),key:"custom"},...Array.from(new Set(e9.filter(e=>{if(!e.mode)return!0;let t=(0,ew.yz)(e.mode);return to===ew.sx.RESPONSES||to===ew.sx.ANTHROPIC_MESSAGES?t===to||t===ew.sx.CHAT:to===ew.sx.IMAGE_EDITS?t===to||t===ew.sx.IMAGE:t===to}).map(e=>e.model_group))).map((e,t)=>({value:e,label:e,key:t}))],style:{width:"100%"},showSearch:!0,className:"rounded-md"}),e7&&(0,a.jsx)(N.ks,{className:"mt-2",placeholder:ed("playground.chat.enterCustomModelName","Enter custom model name"),onValueChange:e=>{tl.current&&clearTimeout(tl.current),tl.current=setTimeout(()=>{e6(e)},500)}})]}),to===ew.sx.A2A_AGENTS&&(0,a.jsxs)("div",{children:[(0,a.jsxs)(N.EY,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,a.jsx)(m.A,{className:"mr-2"})," ",ed("playground.chat.selectAgent","Select Agent")]}),(0,a.jsx)(C.A,{value:ta,placeholder:ed("playground.chat.selectAnAgent","Select an Agent"),onChange:e=>tr(e),options:tt.map(e=>({value:e.agent_name,label:e.agent_name||e.agent_id,key:e.agent_id})),style:{width:"100%"},showSearch:!0,className:"rounded-md",optionLabelProp:"label",children:tt.map(e=>(0,a.jsx)(C.A.Option,{value:e.agent_name,label:e.agent_name||e.agent_id,children:(0,a.jsxs)("div",{className:"flex flex-col py-1",children:[(0,a.jsx)("span",{className:"font-medium",children:e.agent_name||e.agent_id}),e.agent_card_params?.description&&(0,a.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:e.agent_card_params.description})]})},e.agent_id))}),0===tt.length&&(0,a.jsx)(N.EY,{className:"text-xs text-gray-500 mt-2 block",children:ed("playground.chat.noAgentsFound","No agents found. Create agents via /v1/agents endpoint.")})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(N.EY,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,a.jsx)(p.A,{className:"mr-2"})," ",ed("playground.chat.tags","Tags")]}),(0,a.jsx)(V.A,{value:tm,onChange:tp,className:"mb-4",accessToken:e||""})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(N.EY,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,a.jsx)(u.A,{className:"mr-2"}),to===ew.sx.MCP?ed("playground.chat.mcpServer","MCP Server"):ed("playground.chat.mcpServers","MCP Servers"),(0,a.jsx)(P.A,{className:"ml-1",title:to===ew.sx.MCP?ed("playground.chat.mcpServerTooltipSingle","Select an MCP server to test tools directly."):ed("playground.chat.mcpServerTooltipMulti","Select MCP servers to use in your conversation."),children:(0,a.jsx)(g.A,{})})]}),(0,a.jsxs)(C.A,{mode:to===ew.sx.MCP?void 0:"multiple",style:{width:"100%"},placeholder:to===ew.sx.MCP?ed("playground.chat.selectMcpServer","Select MCP server"):ed("playground.chat.selectMcpServers","Select MCP servers"),value:to===ew.sx.MCP?"__all__"!==eu[0]&&1===eu.length?eu[0]:void 0:eu,onChange:e=>{to===ew.sx.MCP?(eg(e?[e]:[]),ev(void 0),e&&!ef[e]&&t6(e)):e.includes("__all__")?(eg(["__all__"]),ek({})):(eg(e),ek(t=>{let s={...t};return Object.keys(s).forEach(t=>{e.includes(t)||delete s[t]}),s}),e.forEach(e=>{ef[e]||t6(e)}))},loading:ex,className:"mb-2",allowClear:!0,optionLabelProp:"label",disabled:!e5.has(to),maxTagCount:to===ew.sx.MCP?1:"responsive",children:[to!==ew.sx.MCP&&(0,a.jsx)(C.A.Option,{value:"__all__",label:ed("playground.chat.allMcpServers","All MCP Servers"),children:(0,a.jsxs)("div",{className:"flex flex-col py-1",children:[(0,a.jsx)("span",{className:"font-medium",children:ed("playground.chat.allMcpServers","All MCP Servers")}),(0,a.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:ed("playground.chat.useAllMcpServers","Use all available MCP servers")})]})},"__all__"),em.map(e=>(0,a.jsx)(C.A.Option,{value:e.server_id,label:e.alias||e.server_name||e.server_id,disabled:to!==ew.sx.MCP&&eu.includes("__all__"),children:(0,a.jsxs)("div",{className:"flex flex-col py-1",children:[(0,a.jsx)("span",{className:"font-medium",children:e.alias||e.server_name||e.server_id}),e.description&&(0,a.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:e.description})]})},e.server_id))]}),to===ew.sx.MCP&&1===eu.length&&"__all__"!==eu[0]&&(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)(N.EY,{className:"text-xs text-gray-600 mb-1 block",children:ed("playground.chat.selectTool","Select Tool")}),(0,a.jsx)(C.A,{style:{width:"100%"},placeholder:ed("playground.chat.selectToolToCall","Select a tool to call"),value:ej,onChange:e=>ev(e),options:(ef[eu[0]]||[]).map(e=>({value:e.name,label:e.name})),allowClear:!0,className:"rounded-md"})]}),eu.length>0&&!eu.includes("__all__")&&to!==ew.sx.MCP&&e5.has(to)&&(0,a.jsx)("div",{className:"mt-3 space-y-2",children:eu.map(e=>{let t=em.find(t=>t.server_id===e),s=ef[e]||[];return 0===s.length?null:(0,a.jsxs)("div",{className:"border rounded p-2",children:[(0,a.jsxs)(N.EY,{className:"text-xs text-gray-600 mb-1",children:[ed("playground.chat.limitToolsFor","Limit tools for")," ",t?.alias||t?.server_name||e,":"]}),(0,a.jsx)(C.A,{mode:"multiple",size:"small",style:{width:"100%"},placeholder:ed("playground.chat.allToolsDefault","All tools (default)"),value:e_[e]||[],onChange:t=>{ek(s=>({...s,[e]:t}))},options:s.map(e=>({value:e.name,label:e.name})),maxTagCount:2})]},e)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(N.EY,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,a.jsx)(x.A,{className:"mr-2"})," ",ed("playground.chat.vectorStore","Vector Store"),(0,a.jsx)(P.A,{className:"ml-1",title:(0,a.jsxs)("span",{children:[ed("playground.chat.vectorStoreTooltip","Select vector store(s) to use for this LLM API call. You can set up your vector store")," ",(0,a.jsx)("a",{href:"?page=vector-stores",style:{color:"#1890ff"},children:"here"}),"."]}),children:(0,a.jsx)(g.A,{})})]}),(0,a.jsx)(Y.A,{value:tx,onChange:th,className:"mb-4",accessToken:e||""})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(N.EY,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,a.jsx)(h.A,{className:"mr-2"})," ",ed("playground.chat.guardrails","Guardrails"),(0,a.jsx)(P.A,{className:"ml-1",title:(0,a.jsxs)("span",{children:[ed("playground.chat.guardrailsTooltip","Select guardrail(s) to use for this LLM API call. You can set up your guardrails")," ",(0,a.jsx)("a",{href:"?page=guardrails",style:{color:"#1890ff"},children:"here"}),"."]}),children:(0,a.jsx)(g.A,{})})]}),(0,a.jsx)(D.A,{value:tf,onChange:ty,className:"mb-4",accessToken:e||""})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(N.EY,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,a.jsx)(h.A,{className:"mr-2"})," ",ed("playground.chat.policies","Policies"),(0,a.jsx)(P.A,{className:"ml-1",title:(0,a.jsxs)("span",{children:[ed("playground.chat.policiesTooltip","Select policy/policies to apply to this LLM API call. Policies define which guardrails are applied based on conditions. You can set up your policies")," ",(0,a.jsx)("a",{href:"?page=policies",style:{color:"#1890ff"},children:"here"}),"."]}),children:(0,a.jsx)(g.A,{})})]}),(0,a.jsx)(B.Ay,{value:tb,onChange:tj,className:"mb-4",accessToken:e||""})]}),to===ew.sx.RESPONSES&&(0,a.jsx)("div",{children:(0,a.jsx)(e$,{accessToken:"session"===eT?e||"":eR,enabled:t4.enabled,onEnabledChange:t4.setEnabled,selectedContainerId:null,onContainerChange:()=>{},selectedModel:eQ||""})})]})]}),(0,a.jsxs)("div",{className:`flex flex-col bg-white ${H?"flex-1 w-full":"w-3/4"}`,children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[(0,a.jsx)(N.hE,{className:"text-xl font-semibold mb-0",children:H?ed("playground.chat.title.chat","Chat"):ed("playground.chat.title.testKey","Test Key")}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(N.$n,{onClick:()=>{eq.forEach(e=>{e.isAudio&&"string"==typeof e.content&&URL.revokeObjectURL(e.content)}),eX([]),tA(null),tS(null),tK([]),sc(),sd(),sm(),sp(),H||(sessionStorage.removeItem("chatHistory"),sessionStorage.removeItem("messageTraceId"),sessionStorage.removeItem("responsesSessionId")),W.Ay.success(ed("playground.chat.notifications.chatCleared","Chat history cleared."))},className:"bg-gray-100 hover:bg-gray-200 text-gray-700 border-gray-300",icon:i.A,children:ed("playground.chat.clearChat","Clear Chat")}),!H&&(0,a.jsx)(N.$n,{onClick:()=>tH(!0),className:"bg-gray-100 hover:bg-gray-200 text-gray-700 border-gray-300",icon:f.A,children:ed("playground.chat.getCode","Get Code")})]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-auto p-4 pb-0",children:[0===eq.length&&(0,a.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-gray-400",children:[(0,a.jsx)(m.A,{style:{fontSize:"48px",marginBottom:"16px"}}),(0,a.jsx)(N.EY,{children:ed("playground.chat.emptyState","Start a conversation, generate an image, or handle audio")})]}),eq.map((t,s)=>(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:`mb-4 ${"user"===t.role?"text-right":"text-left"}`,children:(0,a.jsxs)("div",{className:"inline-block max-w-[80%] rounded-lg shadow-sm p-3.5 px-4",style:{backgroundColor:"user"===t.role?"#f0f8ff":"#ffffff",border:"user"===t.role?"1px solid #e6f0fa":"1px solid #f0f0f0",textAlign:"left"},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1.5",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-6 h-6 rounded-full mr-1",style:{backgroundColor:"user"===t.role?"#e6f0fa":"#f5f5f5"},children:"user"===t.role?(0,a.jsx)(y.A,{style:{fontSize:"12px",color:"#2563eb"}}):(0,a.jsx)(m.A,{style:{fontSize:"12px",color:"#4b5563"}})}),(0,a.jsx)("strong",{className:"text-sm capitalize",children:"user"===t.role?ed("playground.chat.user","User"):"assistant"===t.role?ed("playground.chat.assistant","Assistant"):t.role}),"assistant"===t.role&&t.model&&(0,a.jsx)("span",{className:"text-xs px-2 py-0.5 rounded bg-gray-100 text-gray-600 font-normal",children:t.model})]}),t.reasoningContent&&(0,a.jsx)(eJ.A,{reasoningContent:t.reasoningContent}),"assistant"===t.role&&s===eq.length-1&&tW.length>0&&(to===ew.sx.RESPONSES||to===ew.sx.CHAT)&&(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsx)(eG,{events:tW})}),"assistant"===t.role&&t.searchResults&&(0,a.jsx)(e0.X,{searchResults:t.searchResults}),"assistant"===t.role&&s===eq.length-1&&t4.result&&to===ew.sx.RESPONSES&&(0,a.jsx)(eO,{code:t4.result.code,containerId:t4.result.containerId,annotations:t4.result.annotations,accessToken:"session"===eT?e||"":eR}),(0,a.jsxs)("div",{className:"whitespace-pre-wrap break-words max-w-full message-content",style:{wordWrap:"break-word",overflowWrap:"break-word",wordBreak:"break-word",hyphens:"auto"},children:[t.isImage?(0,a.jsx)("img",{src:"string"==typeof t.content?t.content:"",alt:"Generated image",className:"max-w-full rounded-md border border-gray-200 shadow-sm",style:{maxHeight:"500px"}}):t.isAudio?(0,a.jsx)(eS,{message:t}):(0,a.jsxs)(a.Fragment,{children:[to===ew.sx.RESPONSES&&(0,a.jsx)(eY,{message:t}),to===ew.sx.CHAT&&(0,a.jsx)(eE.A,{message:t}),(0,a.jsx)(R.oz,{components:{code({node:e,inline:t,className:s,children:r,...l}){let o=/language-(\w+)/.exec(s||"");return!t&&o?(0,a.jsx)(O.A,{style:L.A,language:o[1],PreTag:"div",className:"rounded-md my-2",wrapLines:!0,wrapLongLines:!0,...l,children:String(r).replace(/\n$/,"")}):(0,a.jsx)("code",{className:`${s} px-1.5 py-0.5 rounded bg-gray-100 text-sm font-mono`,style:{wordBreak:"break-word"},...l,children:r})},pre:({node:e,...t})=>(0,a.jsx)("pre",{style:{overflowX:"auto",maxWidth:"100%"},...t})},children:"string"==typeof t.content?t.content:""}),t.image&&(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)("img",{src:t.image.url,alt:"Generated image",className:"max-w-full rounded-md border border-gray-200 shadow-sm",style:{maxHeight:"500px"}})})]}),"assistant"===t.role&&(t.timeToFirstToken||t.totalLatency||t.usage)&&!t.a2aMetadata&&(0,a.jsx)(eW.A,{timeToFirstToken:t.timeToFirstToken,totalLatency:t.totalLatency,usage:t.usage,toolName:t.toolName}),"assistant"===t.role&&t.a2aMetadata&&(0,a.jsx)(eb,{a2aMetadata:t.a2aMetadata,timeToFirstToken:t.timeToFirstToken,totalLatency:t.totalLatency})]})]})})},s)),ti&&tW.length>0&&(to===ew.sx.RESPONSES||to===ew.sx.CHAT)&&eq.length>0&&"user"===eq[eq.length-1].role&&(0,a.jsx)("div",{className:"text-left mb-4",children:(0,a.jsxs)("div",{className:"inline-block max-w-[80%] rounded-lg shadow-sm p-3.5 px-4",style:{backgroundColor:"#ffffff",border:"1px solid #f0f0f0",textAlign:"left"},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1.5",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-6 h-6 rounded-full mr-1",style:{backgroundColor:"#f5f5f5"},children:(0,a.jsx)(m.A,{style:{fontSize:"12px",color:"#4b5563"}})}),(0,a.jsx)("strong",{className:"text-sm capitalize",children:ed("playground.chat.assistant","Assistant")})]}),(0,a.jsx)(eG,{events:tW})]})}),ti&&(0,a.jsx)("div",{className:"flex justify-center items-center my-4",children:(0,a.jsx)(I.A,{indicator:sg})}),(0,a.jsx)("div",{ref:t3,style:{height:"1px"}})]}),(0,a.jsxs)("div",{className:"p-4 border-t border-gray-200 bg-white",children:[to===ew.sx.IMAGE_EDITS&&(0,a.jsx)("div",{className:"mb-4",children:0===tC.length?(0,a.jsxs)(e3,{beforeUpload:si,accept:"image/*",showUploadList:!1,children:[(0,a.jsx)("p",{className:"ant-upload-drag-icon",children:(0,a.jsx)(b.A,{style:{fontSize:"24px",color:"#666"}})}),(0,a.jsx)("p",{className:"ant-upload-text text-sm",children:ed("playground.chat.uploadImages","Click or drag images to upload")}),(0,a.jsx)("p",{className:"ant-upload-hint text-xs text-gray-500",children:ed("playground.chat.uploadImagesHint","Support for PNG, JPG, JPEG formats. Multiple images supported.")})]}):(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[tC.map((e,t)=>(0,a.jsxs)("div",{className:"relative inline-block",children:[(0,a.jsx)("img",{src:tE[t]||"",alt:`Upload preview ${t+1}`,className:"max-w-32 max-h-32 rounded-md border border-gray-200 object-cover"}),(0,a.jsx)("button",{className:"absolute top-1 right-1 bg-white shadow-sm border border-gray-200 rounded px-1 py-1 text-red-500 hover:bg-red-50 text-xs",onClick:()=>{tE[t]&&URL.revokeObjectURL(tE[t]),tk(e=>e.filter((e,s)=>s!==t)),tP(e=>e.filter((e,s)=>s!==t))},children:(0,a.jsx)(j.A,{})})]},t)),(0,a.jsxs)("div",{className:"flex items-center justify-center w-32 h-32 border-2 border-dashed border-gray-300 rounded-md hover:border-gray-400 cursor-pointer",onClick:()=>document.getElementById("additional-image-upload")?.click(),children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(b.A,{style:{fontSize:"24px",color:"#666"}}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:ed("playground.chat.addMore","Add more")})]}),(0,a.jsx)("input",{id:"additional-image-upload",type:"file",accept:"image/*",multiple:!0,style:{display:"none"},onChange:e=>{Array.from(e.target.files||[]).forEach(e=>si(e))}})]})]})}),to===ew.sx.TRANSCRIPTION&&(0,a.jsx)("div",{className:"mb-4",children:tD?(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,a.jsx)(d.A,{style:{fontSize:"20px",color:"#666"}}),(0,a.jsx)("span",{className:"text-sm font-medium",children:tD.name}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["(",(tD.size/1024/1024).toFixed(2)," MB)"]})]}),(0,a.jsxs)("button",{className:"bg-white shadow-sm border border-gray-200 rounded px-2 py-1 text-red-500 hover:bg-red-50 text-xs",onClick:sp,children:[(0,a.jsx)(j.A,{})," ",ed("playground.chat.remove","Remove")]})]}):(0,a.jsxs)(e3,{beforeUpload:e=>(tB(e),!1),accept:"audio/*,.mp3,.mp4,.mpeg,.mpga,.m4a,.wav,.webm",showUploadList:!1,children:[(0,a.jsx)("p",{className:"ant-upload-drag-icon",children:(0,a.jsx)(d.A,{style:{fontSize:"24px",color:"#666"}})}),(0,a.jsx)("p",{className:"ant-upload-text text-sm",children:ed("playground.chat.uploadAudio","Click or drag audio file to upload")}),(0,a.jsx)("p",{className:"ant-upload-hint text-xs text-gray-500",children:ed("playground.chat.uploadAudioHint","Support for MP3, MP4, MPEG, MPGA, M4A, WAV, WEBM formats. Max file size: 25 MB.")})]})}),to===ew.sx.RESPONSES&&tI&&(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,a.jsx)("div",{className:"relative inline-block",children:tI.name.toLowerCase().endsWith(".pdf")?(0,a.jsx)("div",{className:"w-10 h-10 rounded-md bg-red-500 flex items-center justify-center",children:(0,a.jsx)(v.A,{style:{fontSize:"16px",color:"white"}})}):(0,a.jsx)("img",{src:tM||"",alt:"Upload preview",className:"w-10 h-10 rounded-md border border-gray-200 object-cover"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:tI.name}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:tI.name.toLowerCase().endsWith(".pdf")?"PDF":"Image"})]}),(0,a.jsx)("button",{className:"flex items-center justify-center w-6 h-6 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded-full transition-colors",onClick:sd,children:(0,a.jsx)(j.A,{style:{fontSize:"12px"}})})]})}),to===ew.sx.CHAT&&tO&&(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,a.jsx)("div",{className:"relative inline-block",children:tO.name.toLowerCase().endsWith(".pdf")?(0,a.jsx)("div",{className:"w-10 h-10 rounded-md bg-red-500 flex items-center justify-center",children:(0,a.jsx)(v.A,{style:{fontSize:"16px",color:"white"}})}):(0,a.jsx)("img",{src:tU||"",alt:"Upload preview",className:"w-10 h-10 rounded-md border border-gray-200 object-cover"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:tO.name}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:tO.name.toLowerCase().endsWith(".pdf")?"PDF":"Image"})]}),(0,a.jsx)("button",{className:"flex items-center justify-center w-6 h-6 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded-full transition-colors",onClick:sm,children:(0,a.jsx)(j.A,{style:{fontSize:"12px"}})})]})}),to===ew.sx.RESPONSES&&t4.enabled&&(0,a.jsxs)("div",{className:"mb-2 space-y-2",children:[(0,a.jsxs)("div",{className:"px-3 py-2 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-200 flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:ti?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.A,{className:"text-blue-500",spin:!0}),(0,a.jsx)("span",{className:"text-sm text-blue-700 font-medium",children:ed("playground.chat.runningPython","Running Python code...")})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.A,{className:"text-blue-500"}),(0,a.jsx)("span",{className:"text-sm text-blue-700 font-medium",children:ed("playground.chat.codeInterpreterActive","Code Interpreter Active")})]})}),(0,a.jsx)("button",{className:"text-xs text-blue-500 hover:text-blue-700",onClick:()=>t4.setEnabled(!1),children:ed("playground.chat.disable","Disable")})]}),!ti&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:[ed("playground.chat.samplePrompt.salesCsv","Generate sample sales data CSV and create a chart"),ed("playground.chat.samplePrompt.providersPng","Create a PNG bar chart comparing AI gateway providers including LiteLLM"),ed("playground.chat.samplePrompt.pricingCsv","Generate a CSV of LLM pricing data and visualize it as a line chart")].map((e,t)=>(0,a.jsx)("button",{className:"text-xs px-3 py-1.5 bg-white border border-gray-200 rounded-full hover:bg-blue-50 hover:border-blue-300 hover:text-blue-600 transition-colors",onClick:()=>ez(e),children:e},t))})]}),0===eq.length&&!ti&&to!==ew.sx.MCP&&(0,a.jsx)("div",{className:"flex items-center gap-2 mb-3 overflow-x-auto",children:(to===ew.sx.A2A_AGENTS?[ed("playground.chat.a2aPrompt.help","What can you help me with?"),ed("playground.chat.a2aPrompt.about","Tell me about yourself"),ed("playground.chat.a2aPrompt.tasks","What tasks can you perform?")]:[ed("playground.chat.suggestedPrompt.poem","Write me a poem"),ed("playground.chat.suggestedPrompt.quantum","Explain quantum computing"),ed("playground.chat.suggestedPrompt.email","Draft a polite email requesting a meeting")]).map(e=>(0,a.jsx)("button",{type:"button",className:"shrink-0 rounded-full border border-gray-200 px-3 py-1 text-xs font-medium text-gray-600 transition-colors hover:bg-blue-50 hover:border-blue-300 hover:text-blue-600 cursor-pointer",onClick:()=>ez(e),children:e},e))}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center flex-1 bg-white border border-gray-300 rounded-xl px-3 py-1 min-h-[44px]",children:[(0,a.jsxs)("div",{className:"flex-shrink-0 mr-2 flex items-center gap-1",children:[to===ew.sx.RESPONSES&&!tI&&(0,a.jsx)(eZ,{responsesUploadedImage:tI,responsesImagePreviewUrl:tM,onImageUpload:e=>(tT(e),tR(URL.createObjectURL(e)),!1),onRemoveImage:sd}),to===ew.sx.CHAT&&!tO&&(0,a.jsx)(eP.A,{chatUploadedImage:tO,chatImagePreviewUrl:tU,onImageUpload:e=>(tL(e),t$(URL.createObjectURL(e)),!1),onRemoveImage:sm}),to===ew.sx.RESPONSES&&(0,a.jsx)(P.A,{title:t4.enabled?ed("playground.chat.codeInterpreterEnabledTooltip","Code Interpreter enabled (click to disable)"):ed("playground.chat.enableCodeInterpreter","Enable Code Interpreter"),children:(0,a.jsx)("button",{className:`p-1.5 rounded-md transition-colors ${t4.enabled?"bg-blue-100 text-blue-600":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"}`,onClick:()=>{t4.toggle(),t4.enabled||W.Ay.success(ed("playground.chat.notifications.codeInterpreterEnabled","Code Interpreter enabled!"))},children:(0,a.jsx)(f.A,{style:{fontSize:"16px"}})})})]}),to===ew.sx.MCP&&1===eu.length&&"__all__"!==eu[0]&&ej?(0,a.jsx)("div",{className:"flex-1 overflow-y-auto max-h-48 min-h-[44px] p-2 border border-gray-200 rounded-lg bg-gray-50/50",children:(q=(ef[eu[0]]||[]).find(e=>e.name===ej))?(0,a.jsx)(J,{ref:eA,tool:q,className:"space-y-2"}):(0,a.jsx)("div",{className:"flex items-center justify-center h-10 text-sm text-gray-500",children:ed("playground.chat.loadingToolSchema","Loading tool schema...")})}):(0,a.jsx)(e4,{value:eH,onChange:e=>ez(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),su())},placeholder:to===ew.sx.CHAT||to===ew.sx.EMBEDDINGS||to===ew.sx.RESPONSES||to===ew.sx.ANTHROPIC_MESSAGES?ed("playground.chat.inputPlaceholder.default","Type your message... (Shift+Enter for new line)"):to===ew.sx.A2A_AGENTS?ed("playground.chat.inputPlaceholder.a2a","Send a message to the A2A agent..."):to===ew.sx.IMAGE_EDITS?ed("playground.chat.inputPlaceholder.imageEdits","Describe how you want to edit the image..."):to===ew.sx.SPEECH?ed("playground.chat.inputPlaceholder.speech","Enter text to convert to speech..."):to===ew.sx.TRANSCRIPTION?ed("playground.chat.inputPlaceholder.transcription","Optional: Add context or prompt for transcription..."):ed("playground.chat.inputPlaceholder.imageGeneration","Describe the image you want to generate..."),disabled:ti,className:"flex-1",autoSize:{minRows:1,maxRows:4},style:{resize:"none",border:"none",boxShadow:"none",background:"transparent",padding:"4px 0",fontSize:"14px",lineHeight:"20px"}}),(0,a.jsx)(N.$n,{onClick:su,disabled:ti||(to===ew.sx.MCP?!(1===eu.length&&"__all__"!==eu[0]&&ej):to===ew.sx.TRANSCRIPTION?!tD:!eH.trim()),className:"flex-shrink-0 ml-2 !w-8 !h-8 !min-w-8 !p-0 !rounded-full !bg-blue-600 hover:!bg-blue-700 disabled:!bg-gray-300 !border-none !text-white disabled:!text-gray-500 !flex !items-center !justify-center",children:(0,a.jsx)(A.A,{style:{fontSize:"14px"}})})]}),ti&&(0,a.jsx)(N.$n,{onClick:()=>{td.current&&(td.current.abort(),td.current=null,tc(!1),W.Ay.info(ed("playground.chat.notifications.requestCancelled","Request cancelled")))},className:"bg-red-50 hover:bg-red-100 text-red-600 border-red-200",icon:j.A,children:ed("playground.chat.cancel","Cancel")})]})]})]})]})}),(0,a.jsxs)(T.A,{title:ed("playground.chat.generatedCode","Generated Code"),open:tF,onCancel:()=>tH(!1),footer:null,width:800,children:[(0,a.jsxs)("div",{className:"flex justify-between items-end my-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(N.EY,{className:"font-medium block mb-1 text-gray-700",children:ed("playground.chat.sdkType","SDK Type")}),(0,a.jsx)(C.A,{value:tG,onChange:e=>tJ(e),style:{width:150},options:[{value:"openai",label:ed("playground.chat.sdkOpenAI","OpenAI SDK")},{value:"azure",label:ed("playground.chat.sdkAzure","Azure SDK")}]})]}),(0,a.jsx)(k.Ay,{onClick:()=>{navigator.clipboard.writeText(tz),W.Ay.success(ed("playground.chat.notifications.copied","Copied to clipboard!"))},children:ed("playground.chat.copyToClipboard","Copy to Clipboard")})]}),(0,a.jsx)(O.A,{language:"python",style:L.A,wrapLines:!0,wrapLongLines:!0,className:"rounded-md",customStyle:{maxHeight:"60vh",overflowY:"auto"},children:tz})]})]})}},52158:(e,t,s)=>{s.d(t,{A:()=>n});var a=s(95155);s(12115);var r=s(5772),l=s(10134),o=s(85286);let n=({message:e})=>{if(!(0,l.mz)(e))return null;let t="string"==typeof e.content&&e.content.includes("[PDF attached]");return(0,a.jsx)("div",{className:"mb-2",children:t?(0,a.jsx)("div",{className:"w-64 h-32 rounded-md border border-gray-200 bg-red-50 flex items-center justify-center",children:(0,a.jsx)(o.A,{style:{fontSize:"48px",color:"#dc2626"}})}):(0,a.jsx)(r.default,{src:e.imagePreviewUrl||"",alt:"User uploaded image",width:256,height:200,className:"max-w-64 rounded-md border border-gray-200 shadow-sm",style:{maxHeight:"200px",width:"auto",height:"auto"}})})}},73362:(e,t,s)=>{s.d(t,{X:()=>d});var a=s(95155),r=s(12115),l=s(87278),o=s(68413),n=s(17432),i=s(45960),c=s(58847);function d({searchResults:e}){let[t,s]=(0,r.useState)(!0),[d,m]=(0,r.useState)({});if(!e||0===e.length)return null;let p=e.reduce((e,t)=>e+t.data.length,0);return(0,a.jsxs)("div",{className:"search-results-content mt-1 mb-2",children:[(0,a.jsxs)(l.Ay,{type:"text",className:"flex items-center text-xs text-gray-500 hover:text-gray-700",onClick:()=>s(!t),icon:(0,a.jsx)(o.A,{}),children:[t?"Hide sources":`Show sources (${p})`,t?(0,a.jsx)(n.A,{className:"ml-1"}):(0,a.jsx)(i.A,{className:"ml-1"})]}),t&&(0,a.jsx)("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded-md text-sm",children:(0,a.jsx)("div",{className:"space-y-3",children:e.map((e,t)=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-xs text-gray-600 mb-2 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium",children:"Query:"}),(0,a.jsxs)("span",{className:"italic",children:['"',e.search_query,'"']}),(0,a.jsx)("span",{className:"text-gray-400",children:"•"}),(0,a.jsxs)("span",{className:"text-gray-500",children:[e.data.length," result",1!==e.data.length?"s":""]})]}),(0,a.jsx)("div",{className:"space-y-2",children:e.data.map((e,s)=>{let r=d[`${t}-${s}`]||!1;return(0,a.jsxs)("div",{className:"border border-gray-200 rounded-md overflow-hidden bg-white",children:[(0,a.jsx)("div",{className:"flex items-center justify-between p-2 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>{let e;return e=`${t}-${s}`,void m(t=>({...t,[e]:!t[e]}))},children:(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[(0,a.jsx)("svg",{className:`w-4 h-4 text-gray-400 transition-transform flex-shrink-0 ${r?"transform rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,a.jsx)(c.A,{className:"text-gray-400 flex-shrink-0",style:{fontSize:"12px"}}),(0,a.jsx)("span",{className:"text-xs font-medium text-gray-700 truncate",children:e.filename||e.file_id||`Result ${s+1}`}),(0,a.jsx)("span",{className:"text-xs px-2 py-0.5 rounded bg-blue-100 text-blue-700 font-mono flex-shrink-0",children:e.score.toFixed(3)})]})}),r&&(0,a.jsx)("div",{className:"border-t border-gray-200 bg-white",children:(0,a.jsxs)("div",{className:"p-3 space-y-2",children:[e.content.map((e,t)=>(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"text-xs font-mono bg-gray-50 p-2 rounded text-gray-800 whitespace-pre-wrap break-words",children:e.text})},t)),e.attributes&&Object.keys(e.attributes).length>0&&(0,a.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-100",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500 mb-1 font-medium",children:"Metadata:"}),(0,a.jsx)("div",{className:"space-y-1",children:Object.entries(e.attributes).map(([e,t])=>(0,a.jsxs)("div",{className:"text-xs flex gap-2",children:[(0,a.jsxs)("span",{className:"text-gray-500 font-medium",children:[e,":"]}),(0,a.jsx)("span",{className:"text-gray-700 font-mono break-all",children:String(t)})]},e))})]})]})})]},s)})})]},t))})})]})}},74220:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(95155);s(12115);var r=s(62823),l=s(22277),o=s(20791);let{Dragger:n}=r.A,i=({chatUploadedImage:e,chatImagePreviewUrl:t,onImageUpload:s,onRemoveImage:r})=>(0,a.jsx)(a.Fragment,{children:!e&&(0,a.jsx)(n,{beforeUpload:s,accept:"image/*,.pdf",showUploadList:!1,className:"inline-block",style:{padding:0,border:"none",background:"none"},children:(0,a.jsx)(l.A,{title:"Attach image or PDF",children:(0,a.jsx)("button",{type:"button",className:"flex items-center justify-center w-8 h-8 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-colors",children:(0,a.jsx)(o.A,{style:{fontSize:"16px"}})})})})})},79586:(e,t,s)=>{s.d(t,{A:()=>p});var a=s(95155);s(12115);var r=s(22277),l=s(84425),o=s(67840),n=s(30866),i=s(63021),c=s(30732),d=s(51862),m=s(70757);let p=({timeToFirstToken:e,totalLatency:t,usage:s,toolName:p})=>e||t||s?(0,a.jsxs)("div",{className:"response-metrics mt-2 pt-2 border-t border-gray-100 text-xs text-gray-500 flex flex-wrap gap-3",children:[void 0!==e&&(0,a.jsx)(r.A,{title:"Time to first token",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(l.A,{className:"mr-1"}),(0,a.jsxs)("span",{children:["TTFT: ",(e/1e3).toFixed(2),"s"]})]})}),void 0!==t&&(0,a.jsx)(r.A,{title:"Total latency",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(l.A,{className:"mr-1"}),(0,a.jsxs)("span",{children:["Total Latency: ",(t/1e3).toFixed(2),"s"]})]})}),s?.promptTokens!==void 0&&(0,a.jsx)(r.A,{title:"Prompt tokens",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(o.A,{className:"mr-1"}),(0,a.jsxs)("span",{children:["In: ",s.promptTokens]})]})}),s?.completionTokens!==void 0&&(0,a.jsx)(r.A,{title:"Completion tokens",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(n.A,{className:"mr-1"}),(0,a.jsxs)("span",{children:["Out: ",s.completionTokens]})]})}),s?.reasoningTokens!==void 0&&(0,a.jsx)(r.A,{title:"Reasoning tokens",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(i.A,{className:"mr-1"}),(0,a.jsxs)("span",{children:["Reasoning: ",s.reasoningTokens]})]})}),s?.totalTokens!==void 0&&(0,a.jsx)(r.A,{title:"Total tokens",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(c.A,{className:"mr-1"}),(0,a.jsxs)("span",{children:["Total: ",s.totalTokens]})]})}),s?.cost!==void 0&&(0,a.jsx)(r.A,{title:"Cost",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d.A,{className:"mr-1"}),(0,a.jsxs)("span",{children:["$",s.cost.toFixed(6)]})]})}),p&&(0,a.jsx)(r.A,{title:"Tool used",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(m.A,{className:"mr-1"}),(0,a.jsxs)("span",{children:["Tool: ",p]})]})})]}):null}}]);