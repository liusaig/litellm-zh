(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,621482,e=>{"use strict";var l=e.i(869230),a=e.i(992571),t=class extends l.QueryObserver{constructor(e,l){super(e,l)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:(0,a.infiniteQueryBehavior)()})}getOptimisticResult(e){return e.behavior=(0,a.infiniteQueryBehavior)(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,l){let{state:t}=e,s=super.createResult(e,l),{isFetching:i,isRefetching:r,isError:n,isRefetchError:o}=s,d=t.fetchMeta?.fetchMore?.direction,c=n&&"forward"===d,m=i&&"forward"===d,u=n&&"backward"===d,h=i&&"backward"===d;return{...s,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,a.hasNextPage)(l,t.data),hasPreviousPage:(0,a.hasPreviousPage)(l,t.data),isFetchNextPageError:c,isFetchingNextPage:m,isFetchPreviousPageError:u,isFetchingPreviousPage:h,isRefetchError:o&&!c&&!u,isRefetching:r&&!m&&!h}}},s=e.i(469637);function i(e,l){return(0,s.useBaseQuery)(e,t,l)}e.s(["useInfiniteQuery",()=>i],621482)},785242,e=>{"use strict";var l=e.i(619273),a=e.i(266027),t=e.i(912598),s=e.i(135214),i=e.i(270345),r=e.i(243652),n=e.i(764205);let o=(0,r.createQueryKeys)("teams"),d=async(e,l,a,t={})=>{try{let s=(0,n.getProxyBaseUrl)(),i=new URLSearchParams(Object.entries({team_id:t.teamID,organization_id:t.organizationID,team_alias:t.team_alias,user_id:t.userID,page:l,page_size:a,sort_by:t.sortBy,sort_order:t.sortOrder,status:"deleted"}).filter(([,e])=>null!=e).map(([e,l])=>[e,String(l)])),r=`${s?`${s}/v2/team/list`:"/v2/team/list"}?${i}`,o=await fetch(r,{method:"GET",headers:{[(0,n.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"}});if(!o.ok){let e=await o.json(),l=(0,n.deriveErrorMessage)(e);throw(0,n.handleError)(l),Error(l)}let d=await o.json();if(console.log("/team/list?status=deleted API Response:",d),d&&"object"==typeof d&&"teams"in d)return d.teams;return d}catch(e){throw console.error("Failed to list deleted teams:",e),e}},c=(0,r.createQueryKeys)("deletedTeams");e.s(["useDeletedTeams",0,(e,t,i={})=>{let{accessToken:r}=(0,s.default)();return(0,a.useQuery)({queryKey:c.list({page:e,limit:t,...i}),queryFn:async()=>await d(r,e,t,i),enabled:!!r,staleTime:3e4,placeholderData:l.keepPreviousData})},"useTeam",0,e=>{let{accessToken:l}=(0,s.default)(),i=(0,t.useQueryClient)();return(0,a.useQuery)({queryKey:o.detail(e),enabled:!!(l&&e),queryFn:async()=>{if(!l||!e)throw Error("Missing auth or teamId");return(0,n.teamInfoCall)(l,e)},initialData:()=>{if(!e)return;let l=i.getQueryData(o.list({}));return l?.find(l=>l.team_id===e)}})},"useTeams",0,()=>{let{accessToken:e,userId:l,userRole:t}=(0,s.default)();return(0,a.useQuery)({queryKey:o.list({}),queryFn:async()=>await (0,i.fetchTeams)(e,l,t,null),enabled:!!e})}])},738014,e=>{"use strict";var l=e.i(135214),a=e.i(764205),t=e.i(266027);let s=(0,e.i(243652).createQueryKeys)("users");e.s(["useCurrentUser",0,()=>{let{accessToken:e,userId:i,userRole:r}=(0,l.default)();return(0,t.useQuery)({queryKey:s.detail(i),queryFn:async()=>{let l=await (0,a.userInfoCall)(e,i,r,!1,null,null);return console.log(`userInfo: ${JSON.stringify(l)}`),l.user_info},enabled:!!(e&&i&&r)})}])},980187,e=>{"use strict";e.s(["createTeamAliasMap",0,e=>e?e.reduce((e,l)=>(e[l.team_id]=l.team_alias,e),{}):{},"resolveTeamAliasFromTeamID",0,(e,l)=>{let a=l.find(l=>l.team_id===e);return a?a.team_alias:null}])},109799,e=>{"use strict";var l=e.i(135214),a=e.i(764205),t=e.i(266027),s=e.i(912598);let i=(0,e.i(243652).createQueryKeys)("organizations");e.s(["useOrganization",0,e=>{let r=(0,s.useQueryClient)(),{accessToken:n}=(0,l.default)();return(0,t.useQuery)({queryKey:i.detail(e),enabled:!!(n&&e),queryFn:async()=>{if(!n||!e)throw Error("Missing auth or teamId");return(0,a.organizationInfoCall)(n,e)},initialData:()=>{if(!e)return;let l=r.getQueryData(i.list({}));return l?.find(l=>l.organization_id===e)}})},"useOrganizations",0,()=>{let{accessToken:e,userId:s,userRole:r}=(0,l.default)();return(0,t.useQuery)({queryKey:i.list({}),queryFn:async()=>await (0,a.organizationListCall)(e),enabled:!!(e&&s&&r)})}])},625901,e=>{"use strict";var l=e.i(266027),a=e.i(621482),t=e.i(243652),s=e.i(764205),i=e.i(135214);let r=(0,t.createQueryKeys)("models"),n=(0,t.createQueryKeys)("modelHub"),o=(0,t.createQueryKeys)("allProxyModels");(0,t.createQueryKeys)("selectedTeamModels");let d=(0,t.createQueryKeys)("infiniteModels");e.s(["useAllProxyModels",0,()=>{let{accessToken:e,userId:a,userRole:t}=(0,i.default)();return(0,l.useQuery)({queryKey:o.list({}),queryFn:async()=>await (0,s.modelAvailableCall)(e,a,t,!0,null,!0,!1,"expand"),enabled:!!(e&&a&&t)})},"useInfiniteModelInfo",0,(e=50,l)=>{let{accessToken:t,userId:r,userRole:n}=(0,i.default)();return(0,a.useInfiniteQuery)({queryKey:d.list({filters:{...r&&{userId:r},...n&&{userRole:n},size:e,...l&&{search:l}}}),queryFn:async({pageParam:a})=>await (0,s.modelInfoCall)(t,r,n,a,e,l),initialPageParam:1,getNextPageParam:e=>{if(e.current_page<e.total_pages)return e.current_page+1},enabled:!!(t&&r&&n)})},"useModelHub",0,()=>{let{accessToken:e}=(0,i.default)();return(0,l.useQuery)({queryKey:n.list({}),queryFn:async()=>await (0,s.modelHubCall)(e),enabled:!!e})},"useModelsInfo",0,(e=1,a=50,t,n,o,d,c)=>{let{accessToken:m,userId:u,userRole:h}=(0,i.default)();return(0,l.useQuery)({queryKey:r.list({filters:{...u&&{userId:u},...h&&{userRole:h},page:e,size:a,...t&&{search:t},...n&&{modelId:n},...o&&{teamId:o},...d&&{sortBy:d},...c&&{sortOrder:c}}}),queryFn:async()=>await (0,s.modelInfoCall)(m,u,h,e,a,t,n,o,d,c),enabled:!!(m&&u&&h)})}])},907308,e=>{"use strict";var l=e.i(843476),a=e.i(271645),t=e.i(212931),s=e.i(808613),i=e.i(464571),r=e.i(199133),n=e.i(592968),o=e.i(374009),d=e.i(764205);e.s(["default",0,({isVisible:e,onCancel:c,onSubmit:m,accessToken:u,title:h="Add Team Member",roles:x=[{label:"admin",value:"admin",description:"Admin role. Can create team keys, add members, and manage settings."},{label:"user",value:"user",description:"User role. Can view team info, but not manage it."}],defaultRole:g="user"})=>{let[p]=s.Form.useForm(),[_,b]=(0,a.useState)([]),[j,f]=(0,a.useState)(!1),[v,y]=(0,a.useState)("user_email"),w=async(e,l)=>{if(!e)return void b([]);f(!0);try{let a=new URLSearchParams;if(a.append(l,e),null==u)return;let t=(await (0,d.userFilterUICall)(u,a)).map(e=>({label:"user_email"===l?`${e.user_email}`:`${e.user_id}`,value:"user_email"===l?e.user_email:e.user_id,user:e}));b(t)}catch(e){console.error("Error fetching users:",e)}finally{f(!1)}},T=(0,a.useCallback)((0,o.default)((e,l)=>w(e,l),300),[]),C=(e,l)=>{y(l),T(e,l)},N=(e,l)=>{let a=l.user;p.setFieldsValue({user_email:a.user_email,user_id:a.user_id,role:p.getFieldValue("role")})};return(0,l.jsx)(t.Modal,{title:h,open:e,onCancel:()=>{p.resetFields(),b([]),c()},footer:null,width:800,children:(0,l.jsxs)(s.Form,{form:p,onFinish:m,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",initialValues:{role:g},children:[(0,l.jsx)(s.Form.Item,{label:"Email",name:"user_email",className:"mb-4",children:(0,l.jsx)(r.Select,{showSearch:!0,className:"w-full",placeholder:"Search by email",filterOption:!1,onSearch:e=>C(e,"user_email"),onSelect:(e,l)=>N(e,l),options:"user_email"===v?_:[],loading:j,allowClear:!0})}),(0,l.jsx)("div",{className:"text-center mb-4",children:"OR"}),(0,l.jsx)(s.Form.Item,{label:"User ID",name:"user_id",className:"mb-4",children:(0,l.jsx)(r.Select,{showSearch:!0,className:"w-full",placeholder:"Search by user ID",filterOption:!1,onSearch:e=>C(e,"user_id"),onSelect:(e,l)=>N(e,l),options:"user_id"===v?_:[],loading:j,allowClear:!0})}),(0,l.jsx)(s.Form.Item,{label:"Member Role",name:"role",className:"mb-4",children:(0,l.jsx)(r.Select,{defaultValue:g,children:x.map(e=>(0,l.jsx)(r.Select.Option,{value:e.value,children:(0,l.jsxs)(n.Tooltip,{title:e.description,children:[(0,l.jsx)("span",{className:"font-medium",children:e.label}),(0,l.jsxs)("span",{className:"ml-2 text-gray-500 text-sm",children:["- ",e.description]})]})},e.value))})}),(0,l.jsx)("div",{className:"text-right mt-4",children:(0,l.jsx)(i.Button,{type:"default",htmlType:"submit",children:"Add Member"})})]})})}])},162386,e=>{"use strict";var l=e.i(843476),a=e.i(625901),t=e.i(109799),s=e.i(785242),i=e.i(738014),r=e.i(199133),n=e.i(981339),o=e.i(592968);let d={label:"全部模型",value:"all-proxy-models"},c={label:"无默认模型",value:"no-default-models"},m=[d,c],u={user:({allProxyModels:e,userModels:l,options:a})=>l&&a?.includeUserModels?l:[],team:({allProxyModels:e,selectedOrganization:l,userModels:a})=>l?l.models.includes(d.value)||0===l.models.length?e:e.filter(e=>l.models.includes(e)):e??[],organization:({allProxyModels:e})=>e,global:({allProxyModels:e})=>e};e.s(["ModelSelect",0,e=>{let{teamID:h,organizationID:x,options:g,context:p,dataTestId:_,value:b=[],onChange:j,style:f,placeholder:v}=e,{includeUserModels:y,showAllTeamModelsOption:w,showAllProxyModelsOverride:T,includeSpecialOptions:C}=g||{},{data:N,isLoading:z}=(0,a.useAllProxyModels)(),{data:S,isLoading:F}=(0,s.useTeam)(h),{data:I,isLoading:M}=(0,t.useOrganization)(x),{data:O,isLoading:P}=(0,i.useCurrentUser)(),k=e=>m.some(l=>l.value===e),D=b.some(k),B=I?.models.includes(d.value)||I?.models.length===0;if(z||F||M||P)return(0,l.jsx)(n.Skeleton.Input,{active:!0,block:!0});let{wildcard:A,regular:E}=(e=>{let l=[],a=[];for(let t of e)t.endsWith("/*")?l.push(t):a.push(t);return{wildcard:l,regular:a}})(((e,l,a)=>{let t=Array.from(new Map(e.map(e=>[e.id,e])).values()).map(e=>e.id);if(l.options?.showAllProxyModelsOverride)return t;let s=u[l.context];return s?s({allProxyModels:t,...a,options:l.options}):[]})(N?.data??[],e,{selectedTeam:S,selectedOrganization:I,userModels:O?.models}));return(0,l.jsx)(r.Select,{"data-testid":_,value:b,onChange:e=>{let l=e.filter(k);j(l.length>0?[l[l.length-1]]:e)},style:f,options:[C?{label:(0,l.jsx)("span",{children:"Special Options"}),title:"Special Options",options:[...T||B&&C||"global"===p?[{label:(0,l.jsx)("span",{children:"全部模型"}),value:d.value,disabled:b.length>0&&b.some(e=>k(e)&&e!==d.value),key:d.value}]:[],{label:(0,l.jsx)("span",{children:"无默认模型"}),value:c.value,disabled:b.length>0&&b.some(e=>k(e)&&e!==c.value),key:c.value}]}:[],...A.length>0?[{label:(0,l.jsx)("span",{children:"Wildcard Options"}),title:"Wildcard Options",options:A.map(e=>{let a=e.replace("/*",""),t=a.charAt(0).toUpperCase()+a.slice(1);return{label:(0,l.jsx)("span",{children:`All ${t} models`}),value:e,disabled:D}})}]:[],{label:(0,l.jsx)("span",{children:"Models"}),title:"Models",options:E.map(e=>({label:(0,l.jsx)("span",{children:e}),value:e,disabled:D}))}],mode:"multiple",placeholder:v??"Select Models",allowClear:!0,maxTagCount:"responsive",maxTagPlaceholder:e=>(0,l.jsx)(o.Tooltip,{styles:{root:{pointerEvents:"none"}},title:e.map(({value:e})=>e).join(", "),children:(0,l.jsxs)("span",{children:["+",e.length," more"]})})})}],162386)},276173,e=>{"use strict";var l=e.i(843476),a=e.i(599724),t=e.i(779241),s=e.i(464571),i=e.i(808613),r=e.i(212931),n=e.i(199133),o=e.i(271645),d=e.i(435451);e.s(["default",0,({visible:e,onCancel:c,onSubmit:m,initialData:u,mode:h,config:x})=>{let g,[p]=i.Form.useForm(),[_,b]=(0,o.useState)(!1);console.log("Initial Data:",u),(0,o.useEffect)(()=>{if(e)if("edit"===h&&u){let e={...u,role:u.role||x.defaultRole,max_budget_in_team:u.max_budget_in_team||null,tpm_limit:u.tpm_limit||null,rpm_limit:u.rpm_limit||null};console.log("Setting form values:",e),p.setFieldsValue(e)}else p.resetFields(),p.setFieldsValue({role:x.defaultRole||x.roleOptions[0]?.value})},[e,u,h,p,x.defaultRole,x.roleOptions]);let j=async e=>{try{b(!0);let l=Object.entries(e).reduce((e,[l,a])=>{if("string"==typeof a){let t=a.trim();return""===t&&("max_budget_in_team"===l||"tpm_limit"===l||"rpm_limit"===l)?{...e,[l]:null}:{...e,[l]:t}}return{...e,[l]:a}},{});console.log("Submitting form data:",l),await Promise.resolve(m(l)),p.resetFields()}catch(e){console.error("Form submission error:",e)}finally{b(!1)}};return(0,l.jsx)(r.Modal,{title:x.title||("add"===h?"Add Member":"Edit Member"),open:e,width:1e3,footer:null,onCancel:c,children:(0,l.jsxs)(i.Form,{form:p,onFinish:j,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[x.showEmail&&(0,l.jsx)(i.Form.Item,{label:"Email",name:"user_email",className:"mb-4",rules:[{type:"email",message:"Please enter a valid email!"}],children:(0,l.jsx)(t.TextInput,{placeholder:"user@example.com"})}),x.showEmail&&x.showUserId&&(0,l.jsx)("div",{className:"text-center mb-4",children:(0,l.jsx)(a.Text,{children:"OR"})}),x.showUserId&&(0,l.jsx)(i.Form.Item,{label:"User ID",name:"user_id",className:"mb-4",children:(0,l.jsx)(t.TextInput,{placeholder:"user_123"})}),(0,l.jsx)(i.Form.Item,{label:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{children:"Role"}),"edit"===h&&u&&(0,l.jsxs)("span",{className:"text-gray-500 text-sm",children:["(Current: ",(g=u.role,x.roleOptions.find(e=>e.value===g)?.label||g),")"]})]}),name:"role",className:"mb-4",rules:[{required:!0,message:"Please select a role!"}],children:(0,l.jsx)(n.Select,{children:"edit"===h&&u?[...x.roleOptions.filter(e=>e.value===u.role),...x.roleOptions.filter(e=>e.value!==u.role)].map(e=>(0,l.jsx)(n.Select.Option,{value:e.value,children:e.label},e.value)):x.roleOptions.map(e=>(0,l.jsx)(n.Select.Option,{value:e.value,children:e.label},e.value))})}),x.additionalFields?.map(e=>(0,l.jsx)(i.Form.Item,{label:e.label,name:e.name,className:"mb-4",rules:e.rules,children:(e=>{switch(e.type){case"input":return(0,l.jsx)(t.TextInput,{placeholder:e.placeholder});case"numerical":return(0,l.jsx)(d.default,{step:e.step||1,min:e.min||0,style:{width:"100%"},placeholder:e.placeholder||"Enter a numerical value"});case"select":return(0,l.jsx)(n.Select,{children:e.options?.map(e=>(0,l.jsx)(n.Select.Option,{value:e.value,children:e.label},e.value))});default:return null}})(e)},e.name)),(0,l.jsxs)("div",{className:"text-right mt-6",children:[(0,l.jsx)(s.Button,{onClick:c,className:"mr-2",disabled:_,children:"Cancel"}),(0,l.jsx)(s.Button,{type:"default",htmlType:"submit",loading:_,children:"add"===h?_?"Adding...":"Add Member":_?"Saving...":"Save Changes"})]})]})})}])},294612,e=>{"use strict";var l=e.i(843476);e.i(247167);var a=e.i(931067),t=e.i(271645);let s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M899.6 276.5L705 396.4 518.4 147.5a8.06 8.06 0 00-12.9 0L319 396.4 124.3 276.5c-5.7-3.5-13.1 1.2-12.2 7.9L188.5 865c1.1 7.9 7.9 14 16 14h615.1c8 0 14.9-6 15.9-14l76.4-580.6c.8-6.7-6.5-11.4-12.3-7.9zm-126 534.1H250.3l-53.8-409.4 139.8 86.1L512 252.9l175.7 234.4 139.8-86.1-53.9 409.4zM512 509c-62.1 0-112.6 50.5-112.6 112.6S449.9 734.2 512 734.2s112.6-50.5 112.6-112.6S574.1 509 512 509zm0 160.9c-26.6 0-48.2-21.6-48.2-48.3 0-26.6 21.6-48.3 48.2-48.3s48.2 21.6 48.2 48.3c0 26.6-21.6 48.3-48.2 48.3z"}}]},name:"crown",theme:"outlined"};var i=e.i(9583),r=t.forwardRef(function(e,l){return t.createElement(i.default,(0,a.default)({},e,{ref:l,icon:s}))}),n=e.i(827252),o=e.i(213205),d=e.i(771674),c=e.i(464571),m=e.i(770914),u=e.i(291542),h=e.i(262218),x=e.i(592968),g=e.i(898586),p=e.i(902555);let{Text:_}=g.Typography;function b({members:e,canEdit:a,onEdit:t,onDelete:s,onAddMember:i,roleColumnTitle:g="Role",roleTooltip:b,extraColumns:j=[],showDeleteForMember:f,emptyText:v}){let y=[{title:"User Email",dataIndex:"user_email",key:"user_email",render:e=>(0,l.jsx)(_,{children:e||"-"})},{title:"User ID",dataIndex:"user_id",key:"user_id",render:e=>"default_user_id"===e?(0,l.jsx)(h.Tag,{color:"blue",children:"Default Proxy Admin"}):(0,l.jsx)(_,{children:e||"-"})},{title:b?(0,l.jsxs)(m.Space,{direction:"horizontal",children:[g,(0,l.jsx)(x.Tooltip,{title:b,children:(0,l.jsx)(n.InfoCircleOutlined,{})})]}):g,dataIndex:"role",key:"role",render:e=>(0,l.jsxs)(m.Space,{children:[e?.toLowerCase()==="admin"||e?.toLowerCase()==="org_admin"?(0,l.jsx)(r,{}):(0,l.jsx)(d.UserOutlined,{}),(0,l.jsx)(_,{style:{textTransform:"capitalize"},children:e||"-"})]})},...j,{title:"Actions",key:"actions",fixed:"right",width:120,render:(e,i)=>a?(0,l.jsxs)(m.Space,{children:[(0,l.jsx)(p.default,{variant:"Edit",tooltipText:"Edit member",dataTestId:"edit-member",onClick:()=>t(i)}),(!f||f(i))&&(0,l.jsx)(p.default,{variant:"Delete",tooltipText:"Delete member",dataTestId:"delete-member",onClick:()=>s(i)})]}):null}];return(0,l.jsxs)(m.Space,{direction:"vertical",style:{width:"100%"},children:[(0,l.jsx)(u.Table,{columns:y,dataSource:e,rowKey:e=>e.user_id??e.user_email??JSON.stringify(e),pagination:!1,size:"small",scroll:{x:"max-content"},locale:v?{emptyText:v}:void 0}),i&&a&&(0,l.jsx)(c.Button,{icon:(0,l.jsx)(o.UserAddOutlined,{}),type:"primary",onClick:i,children:"Add Member"})]})}e.s(["default",()=>b],294612)},846835,e=>{"use strict";var l=e.i(843476),a=e.i(655913),t=e.i(38419),s=e.i(78334),i=e.i(555436),r=e.i(284614);let n=({filters:e,showFilters:n,onToggleFilters:o,onChange:d,onReset:c})=>{let m=!!(e.org_id||e.org_alias);return(0,l.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,l.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,l.jsx)(a.FilterInput,{placeholder:"按组织名称搜索",value:e.org_alias,onChange:e=>d("org_alias",e),icon:i.Search,className:"w-64"}),(0,l.jsx)(t.FiltersButton,{onClick:()=>o(!n),active:n,hasActiveFilters:m,label:"筛选"}),(0,l.jsx)(s.ResetFiltersButton,{onClick:c,label:"重置筛选"})]}),n&&(0,l.jsx)("div",{className:"flex flex-wrap items-center gap-3 mt-3",children:(0,l.jsx)(a.FilterInput,{placeholder:"按组织 ID 搜索",value:e.org_id,onChange:e=>d("org_id",e),icon:r.User,className:"w-64"})})]})};var o=e.i(827252),d=e.i(871943),c=e.i(502547),m=e.i(278587),u=e.i(389083),h=e.i(994388),x=e.i(304967),g=e.i(309426),p=e.i(350967),_=e.i(752978),b=e.i(197647),j=e.i(653824),f=e.i(269200),v=e.i(942232),y=e.i(977572),w=e.i(427612),T=e.i(64848),C=e.i(496020),N=e.i(881073),z=e.i(404206),S=e.i(723731),F=e.i(599724),I=e.i(779241),M=e.i(808613),O=e.i(311451),P=e.i(212931),k=e.i(199133),D=e.i(592968),B=e.i(271645),A=e.i(500330),E=e.i(127952),R=e.i(902555),L=e.i(355619),U=e.i(75921),Q=e.i(162386),q=e.i(727749),K=e.i(764205),V=e.i(785242),$=e.i(980187),H=e.i(530212),G=e.i(629569),W=e.i(464571),J=e.i(653496),X=e.i(898586),Y=e.i(678784),Z=e.i(118366),ee=e.i(294612),el=e.i(907308),ea=e.i(384767),et=e.i(435451),es=e.i(276173),ei=e.i(916940);let er=({organizationId:e,onClose:a,accessToken:t,is_org_admin:s,is_proxy_admin:i,userModels:r,editOrg:n})=>{let[o,d]=(0,B.useState)(null),[c,m]=(0,B.useState)(!0),[g]=M.Form.useForm(),[_,b]=(0,B.useState)(!1),[j,f]=(0,B.useState)(!1),[v,y]=(0,B.useState)(!1),[w,T]=(0,B.useState)(null),[C,N]=(0,B.useState)({}),[z,S]=(0,B.useState)(!1),P=s||i,{data:D}=(0,V.useTeams)(),E=(0,B.useMemo)(()=>(0,$.createTeamAliasMap)(D),[D]),R=async()=>{try{if(m(!0),!t)return;let l=await (0,K.organizationInfoCall)(t,e);d(l)}catch(e){q.default.fromBackend("Failed to load organization information"),console.error("Error fetching organization info:",e)}finally{m(!1)}};(0,B.useEffect)(()=>{R()},[e,t]);let L=async l=>{try{if(null==t)return;let a={user_email:l.user_email,user_id:l.user_id,role:l.role};await (0,K.organizationMemberAddCall)(t,e,a),q.default.success("Organization member added successfully"),f(!1),g.resetFields(),R()}catch(e){q.default.fromBackend("Failed to add organization member"),console.error("Error adding organization member:",e)}},er=async l=>{try{if(!t)return;let a={user_email:l.user_email,user_id:l.user_id,role:l.role};await (0,K.organizationMemberUpdateCall)(t,e,a),q.default.success("Organization member updated successfully"),y(!1),g.resetFields(),R()}catch(e){q.default.fromBackend("Failed to update organization member"),console.error("Error updating organization member:",e)}},en=async l=>{try{if(!t)return;await (0,K.organizationMemberDeleteCall)(t,e,l.user_id),q.default.success("Organization member deleted successfully"),y(!1),g.resetFields(),R()}catch(e){q.default.fromBackend("Failed to delete organization member"),console.error("Error deleting organization member:",e)}},eo=async l=>{try{if(!t)return;S(!0);let a={organization_id:e,organization_alias:l.organization_alias,models:l.models,litellm_budget_table:{tpm_limit:l.tpm_limit,rpm_limit:l.rpm_limit,max_budget:l.max_budget,budget_duration:l.budget_duration},metadata:l.metadata?JSON.parse(l.metadata):null};if((void 0!==l.vector_stores||void 0!==l.mcp_servers_and_groups)&&(a.object_permission={...o?.object_permission,vector_stores:l.vector_stores||[]},void 0!==l.mcp_servers_and_groups)){let{servers:e,accessGroups:t}=l.mcp_servers_and_groups||{servers:[],accessGroups:[]};e&&e.length>0&&(a.object_permission.mcp_servers=e),t&&t.length>0&&(a.object_permission.mcp_access_groups=t)}await (0,K.organizationUpdateCall)(t,a),q.default.success("Organization settings updated successfully"),b(!1),R()}catch(e){q.default.fromBackend("Failed to update organization settings"),console.error("Error updating organization:",e)}finally{S(!1)}};if(c)return(0,l.jsx)("div",{className:"p-4",children:"Loading..."});if(!o)return(0,l.jsx)("div",{className:"p-4",children:"Organization not found"});let ed=async(e,l)=>{await (0,A.copyToClipboard)(e)&&(N(e=>({...e,[l]:!0})),setTimeout(()=>{N(e=>({...e,[l]:!1}))},2e3))},ec=[{title:"Spend (USD)",key:"spend",render:(e,a)=>{let t=null!=a.user_id?(o.members||[]).find(e=>e.user_id===a.user_id):void 0;return(0,l.jsxs)(X.Typography.Text,{children:["$",(0,A.formatNumberWithCommas)(t?.spend??0,4)]})}},{title:"Created At",key:"created_at",render:(e,a)=>{let t=null!=a.user_id?(o.members||[]).find(e=>e.user_id===a.user_id):void 0;return(0,l.jsx)(X.Typography.Text,{children:t?.created_at?new Date(t.created_at).toLocaleString():"-"})}}];return(0,l.jsxs)("div",{className:"w-full h-screen p-4 bg-white",children:[(0,l.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,l.jsxs)("div",{children:[(0,l.jsx)(h.Button,{icon:H.ArrowLeftIcon,onClick:a,variant:"light",className:"mb-4",children:"Back to Organizations"}),(0,l.jsx)(G.Title,{children:o.organization_alias}),(0,l.jsxs)("div",{className:"flex items-center cursor-pointer",children:[(0,l.jsx)(F.Text,{className:"text-gray-500 font-mono",children:o.organization_id}),(0,l.jsx)(W.Button,{type:"text",size:"small",icon:C["org-id"]?(0,l.jsx)(Y.CheckIcon,{size:12}):(0,l.jsx)(Z.CopyIcon,{size:12}),onClick:()=>ed(o.organization_id,"org-id"),className:`left-2 z-10 transition-all duration-200 ${C["org-id"]?"text-green-600 bg-green-50 border-green-200":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`})]})]})}),(0,l.jsx)(J.Tabs,{defaultActiveKey:n?"settings":"overview",className:"mb-4",items:[{key:"overview",label:"Overview",children:(0,l.jsxs)(p.Grid,{numItems:1,numItemsSm:2,numItemsLg:3,className:"gap-6",children:[(0,l.jsxs)(x.Card,{children:[(0,l.jsx)(F.Text,{children:"Organization Details"}),(0,l.jsxs)("div",{className:"mt-2",children:[(0,l.jsxs)(F.Text,{children:["Created: ",new Date(o.created_at).toLocaleDateString()]}),(0,l.jsxs)(F.Text,{children:["Updated: ",new Date(o.updated_at).toLocaleDateString()]}),(0,l.jsxs)(F.Text,{children:["Created By: ",o.created_by]})]})]}),(0,l.jsxs)(x.Card,{children:[(0,l.jsx)(F.Text,{children:"Budget Status"}),(0,l.jsxs)("div",{className:"mt-2",children:[(0,l.jsxs)(G.Title,{children:["$",(0,A.formatNumberWithCommas)(o.spend,4)]}),(0,l.jsxs)(F.Text,{children:["of"," ",null===o.litellm_budget_table.max_budget?"Unlimited":`$${(0,A.formatNumberWithCommas)(o.litellm_budget_table.max_budget,4)}`]}),o.litellm_budget_table.budget_duration&&(0,l.jsxs)(F.Text,{className:"text-gray-500",children:["Reset: ",o.litellm_budget_table.budget_duration]})]})]}),(0,l.jsxs)(x.Card,{children:[(0,l.jsx)(F.Text,{children:"Rate Limits"}),(0,l.jsxs)("div",{className:"mt-2",children:[(0,l.jsxs)(F.Text,{children:["TPM: ",o.litellm_budget_table.tpm_limit||"Unlimited"]}),(0,l.jsxs)(F.Text,{children:["RPM: ",o.litellm_budget_table.rpm_limit||"Unlimited"]}),o.litellm_budget_table.max_parallel_requests&&(0,l.jsxs)(F.Text,{children:["Max Parallel Requests: ",o.litellm_budget_table.max_parallel_requests]})]})]}),(0,l.jsxs)(x.Card,{children:[(0,l.jsx)(F.Text,{children:"Models"}),(0,l.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:0===o.models.length?(0,l.jsx)(u.Badge,{color:"red",children:"All proxy models"}):o.models.map((e,a)=>(0,l.jsx)(u.Badge,{color:"red",children:e},a))})]}),(0,l.jsxs)(x.Card,{children:[(0,l.jsx)(F.Text,{children:"Teams"}),(0,l.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:o.teams?.map((e,a)=>(0,l.jsx)(u.Badge,{color:"red",children:E[e.team_id]||e.team_id},a))})]}),(0,l.jsx)(ea.default,{objectPermission:o.object_permission,variant:"card",accessToken:t})]})},{key:"members",label:"Members",children:(0,l.jsx)("div",{className:"space-y-4",children:(0,l.jsx)(ee.default,{members:(o.members||[]).map(e=>({role:e.user_role||"",user_id:e.user_id,user_email:e.user_email})),canEdit:P,onEdit:e=>{T(e),y(!0)},onDelete:e=>en(e),onAddMember:()=>f(!0),roleColumnTitle:"Organization Role",extraColumns:ec,emptyText:"No members found"})})},{key:"settings",label:"Settings",children:(0,l.jsxs)(x.Card,{className:"overflow-y-auto max-h-[65vh]",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsx)(G.Title,{children:"Organization Settings"}),P&&!_&&(0,l.jsx)(h.Button,{onClick:()=>b(!0),children:"Edit Settings"})]}),_?(0,l.jsxs)(M.Form,{form:g,onFinish:eo,initialValues:{organization_alias:o.organization_alias,models:o.models,tpm_limit:o.litellm_budget_table.tpm_limit,rpm_limit:o.litellm_budget_table.rpm_limit,max_budget:o.litellm_budget_table.max_budget,budget_duration:o.litellm_budget_table.budget_duration,metadata:o.metadata?JSON.stringify(o.metadata,null,2):"",vector_stores:o.object_permission?.vector_stores||[],mcp_servers_and_groups:{servers:o.object_permission?.mcp_servers||[],accessGroups:o.object_permission?.mcp_access_groups||[]}},layout:"vertical",children:[(0,l.jsx)(M.Form.Item,{label:"Organization Name",name:"organization_alias",rules:[{required:!0,message:"Please input an organization name"}],children:(0,l.jsx)(I.TextInput,{})}),(0,l.jsx)(M.Form.Item,{label:"Models",name:"models",children:(0,l.jsx)(Q.ModelSelect,{value:g.getFieldValue("models"),onChange:e=>g.setFieldValue("models",e),context:"organization",options:{includeSpecialOptions:!0,showAllProxyModelsOverride:!0}})}),(0,l.jsx)(M.Form.Item,{label:"Max Budget (USD)",name:"max_budget",children:(0,l.jsx)(et.default,{step:.01,precision:2,style:{width:"100%"}})}),(0,l.jsx)(M.Form.Item,{label:"Reset Budget",name:"budget_duration",children:(0,l.jsxs)(k.Select,{placeholder:"n/a",children:[(0,l.jsx)(k.Select.Option,{value:"24h",children:"daily"}),(0,l.jsx)(k.Select.Option,{value:"7d",children:"weekly"}),(0,l.jsx)(k.Select.Option,{value:"30d",children:"monthly"})]})}),(0,l.jsx)(M.Form.Item,{label:"Tokens per minute Limit (TPM)",name:"tpm_limit",children:(0,l.jsx)(et.default,{step:1,style:{width:"100%"}})}),(0,l.jsx)(M.Form.Item,{label:"Requests per minute Limit (RPM)",name:"rpm_limit",children:(0,l.jsx)(et.default,{step:1,style:{width:"100%"}})}),(0,l.jsx)(M.Form.Item,{label:"Vector Stores",name:"vector_stores",children:(0,l.jsx)(ei.default,{onChange:e=>g.setFieldValue("vector_stores",e),value:g.getFieldValue("vector_stores"),accessToken:t||"",placeholder:"Select vector stores"})}),(0,l.jsx)(M.Form.Item,{label:"MCP Servers & Access Groups",name:"mcp_servers_and_groups",children:(0,l.jsx)(U.default,{onChange:e=>g.setFieldValue("mcp_servers_and_groups",e),value:g.getFieldValue("mcp_servers_and_groups"),accessToken:t||"",placeholder:"Select MCP servers and access groups"})}),(0,l.jsx)(M.Form.Item,{label:"Metadata",name:"metadata",children:(0,l.jsx)(O.Input.TextArea,{rows:4})}),(0,l.jsx)("div",{className:"sticky z-10 bg-white p-4 border-t border-gray-200 bottom-[-1.5rem] inset-x-[-1.5rem]",children:(0,l.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,l.jsx)(h.Button,{variant:"secondary",onClick:()=>b(!1),disabled:z,children:"Cancel"}),(0,l.jsx)(h.Button,{type:"submit",loading:z,children:"Save Changes"})]})})]}):(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(F.Text,{className:"font-medium",children:"Organization Name"}),(0,l.jsx)("div",{children:o.organization_alias})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(F.Text,{className:"font-medium",children:"Organization ID"}),(0,l.jsx)("div",{className:"font-mono",children:o.organization_id})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(F.Text,{className:"font-medium",children:"Created At"}),(0,l.jsx)("div",{children:new Date(o.created_at).toLocaleString()})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(F.Text,{className:"font-medium",children:"Models"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:o.models.map((e,a)=>(0,l.jsx)(u.Badge,{color:"red",children:e},a))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(F.Text,{className:"font-medium",children:"Rate Limits"}),(0,l.jsxs)("div",{children:["TPM: ",o.litellm_budget_table.tpm_limit||"Unlimited"]}),(0,l.jsxs)("div",{children:["RPM: ",o.litellm_budget_table.rpm_limit||"Unlimited"]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(F.Text,{className:"font-medium",children:"Budget"}),(0,l.jsxs)("div",{children:["Max:"," ",null!==o.litellm_budget_table.max_budget?`$${(0,A.formatNumberWithCommas)(o.litellm_budget_table.max_budget,4)}`:"No Limit"]}),(0,l.jsxs)("div",{children:["Reset: ",o.litellm_budget_table.budget_duration||"Never"]})]}),(0,l.jsx)(ea.default,{objectPermission:o.object_permission,variant:"inline",className:"pt-4 border-t border-gray-200",accessToken:t})]})]})}]}),(0,l.jsx)(el.default,{isVisible:j,onCancel:()=>f(!1),onSubmit:L,accessToken:t,title:"Add Organization Member",roles:[{label:"org_admin",value:"org_admin",description:"Can add and remove members, and change their roles."},{label:"internal_user",value:"internal_user",description:"Can view/create keys for themselves within organization."},{label:"internal_user_viewer",value:"internal_user_viewer",description:"Can only view their keys within organization."}],defaultRole:"internal_user"}),(0,l.jsx)(es.default,{visible:v,onCancel:()=>y(!1),onSubmit:er,initialData:w,mode:"edit",config:{title:"Edit Member",showEmail:!0,showUserId:!0,roleOptions:[{label:"Org Admin",value:"org_admin"},{label:"Internal User",value:"internal_user"},{label:"Internal User Viewer",value:"internal_user_viewer"}]}})]})},en=async(e,l,a=null,t=null)=>{l(await (0,K.organizationListCall)(e,a,t))};e.s(["default",0,({organizations:e,userRole:a,userModels:t,accessToken:s,lastRefreshed:i,handleRefreshClick:r,currentOrg:V,guardrailsList:$=[],setOrganizations:H,premiumUser:G})=>{let[W,J]=(0,B.useState)(null),[X,Y]=(0,B.useState)(!1),[Z,ee]=(0,B.useState)(!1),[el,ea]=(0,B.useState)(null),[es,eo]=(0,B.useState)(!1),[ed,ec]=(0,B.useState)(!1),[em]=M.Form.useForm(),[eu,eh]=(0,B.useState)({}),[ex,eg]=(0,B.useState)(!1),[ep,e_]=(0,B.useState)({org_id:"",org_alias:"",sort_by:"created_at",sort_order:"desc"}),eb=async()=>{if(el&&s)try{eo(!0),await (0,K.organizationDeleteCall)(s,el),q.default.success("组织删除成功"),ee(!1),ea(null),await en(s,H,ep.org_id||null,ep.org_alias||null)}catch(e){console.error("Error deleting organization:",e)}finally{eo(!1)}},ej=async e=>{try{if(!s)return;console.log(`values in organizations new create call: ${JSON.stringify(e)}`),(e.allowed_vector_store_ids&&e.allowed_vector_store_ids.length>0||e.allowed_mcp_servers_and_groups&&(e.allowed_mcp_servers_and_groups.servers?.length>0||e.allowed_mcp_servers_and_groups.accessGroups?.length>0))&&(e.object_permission={},e.allowed_vector_store_ids&&e.allowed_vector_store_ids.length>0&&(e.object_permission.vector_stores=e.allowed_vector_store_ids,delete e.allowed_vector_store_ids),e.allowed_mcp_servers_and_groups&&(e.allowed_mcp_servers_and_groups.servers?.length>0&&(e.object_permission.mcp_servers=e.allowed_mcp_servers_and_groups.servers),e.allowed_mcp_servers_and_groups.accessGroups?.length>0&&(e.object_permission.mcp_access_groups=e.allowed_mcp_servers_and_groups.accessGroups),delete e.allowed_mcp_servers_and_groups)),await (0,K.organizationCreateCall)(s,e),q.default.success("组织创建成功"),ec(!1),em.resetFields(),en(s,H,ep.org_id||null,ep.org_alias||null)}catch(e){console.error("Error creating organization:",e)}};return(0,l.jsxs)("div",{className:"w-full mx-4 h-[75vh]",children:[(0,l.jsx)(p.Grid,{numItems:1,className:"gap-2 p-8 w-full mt-2",children:(0,l.jsxs)(g.Col,{numColSpan:1,className:"flex flex-col gap-2",children:[(0,l.jsx)(h.Button,{className:"w-fit",onClick:()=>ec(!0),children:"+ 创建新组织"}),W?(0,l.jsx)(er,{organizationId:W,onClose:()=>{J(null),Y(!1)},accessToken:s,is_org_admin:!0,is_proxy_admin:"Admin"===a,userModels:t,editOrg:X}):(0,l.jsxs)(j.TabGroup,{className:"gap-2 h-[75vh] w-full",children:[(0,l.jsxs)(N.TabList,{className:"flex justify-between mt-2 w-full items-center",children:[(0,l.jsx)("div",{className:"flex",children:(0,l.jsx)(b.Tab,{children:"我的组织"})}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[i&&(0,l.jsxs)(F.Text,{children:["最近刷新：",i]}),(0,l.jsx)(_.Icon,{icon:m.RefreshIcon,variant:"shadow",size:"xs",className:"self-center",onClick:r})]})]}),(0,l.jsx)(S.TabPanels,{children:(0,l.jsxs)(z.TabPanel,{children:[(0,l.jsx)(F.Text,{children:"点击 “组织 ID” 查看组织详情。"}),(0,l.jsx)(p.Grid,{numItems:1,className:"gap-2 pt-2 pb-2 h-[75vh] w-full mt-2",children:(0,l.jsx)(g.Col,{numColSpan:1,children:(0,l.jsxs)(x.Card,{className:"w-full mx-auto flex-auto overflow-hidden overflow-y-auto max-h-[50vh]",children:[(0,l.jsx)("div",{className:"border-b px-6 py-4",children:(0,l.jsx)("div",{className:"flex flex-col space-y-4",children:(0,l.jsx)(n,{filters:ep,showFilters:ex,onToggleFilters:eg,onChange:(e,l)=>{let a={...ep,[e]:l};e_(a),s&&(0,K.organizationListCall)(s,a.org_id||null,a.org_alias||null).then(e=>{e&&H(e)}).catch(e=>{console.error("Error fetching organizations:",e)})},onReset:()=>{e_({org_id:"",org_alias:"",sort_by:"created_at",sort_order:"desc"}),s&&(0,K.organizationListCall)(s,null,null).then(e=>{e&&H(e)}).catch(e=>{console.error("Error fetching organizations:",e)})}})})}),(0,l.jsxs)(f.Table,{children:[(0,l.jsx)(w.TableHead,{children:(0,l.jsxs)(C.TableRow,{children:[(0,l.jsx)(T.TableHeaderCell,{children:"组织 ID"}),(0,l.jsx)(T.TableHeaderCell,{children:"组织名称"}),(0,l.jsx)(T.TableHeaderCell,{children:"创建时间"}),(0,l.jsx)(T.TableHeaderCell,{children:"花费"}),(0,l.jsx)(T.TableHeaderCell,{children:"预算"}),(0,l.jsx)(T.TableHeaderCell,{children:"模型"}),(0,l.jsx)(T.TableHeaderCell,{children:"TPM / RPM 限制"}),(0,l.jsx)(T.TableHeaderCell,{children:"信息"}),(0,l.jsx)(T.TableHeaderCell,{children:"操作"})]})}),(0,l.jsx)(v.TableBody,{children:e&&e.length>0?e.sort((e,l)=>new Date(l.created_at).getTime()-new Date(e.created_at).getTime()).map(e=>(0,l.jsxs)(C.TableRow,{children:[(0,l.jsx)(y.TableCell,{children:(0,l.jsx)("div",{className:"overflow-hidden",children:(0,l.jsx)(D.Tooltip,{title:e.organization_id,children:(0,l.jsxs)(h.Button,{size:"xs",variant:"light",className:"font-mono text-[#6E29F6] bg-[#F1EAFE] hover:bg-[#E6D9FE] text-xs font-normal px-2 py-0.5 text-left overflow-hidden truncate max-w-[200px]",onClick:()=>J(e.organization_id),children:[e.organization_id?.slice(0,7),"..."]})})})}),(0,l.jsx)(y.TableCell,{children:e.organization_alias}),(0,l.jsx)(y.TableCell,{children:e.created_at?new Date(e.created_at).toLocaleDateString():"无"}),(0,l.jsx)(y.TableCell,{children:(0,A.formatNumberWithCommas)(e.spend,4)}),(0,l.jsx)(y.TableCell,{children:e.litellm_budget_table?.max_budget!==null&&e.litellm_budget_table?.max_budget!==void 0?e.litellm_budget_table?.max_budget:"不限制"}),(0,l.jsx)(y.TableCell,{style:{maxWidth:"8-x",whiteSpace:"pre-wrap",overflow:"hidden"},className:e.models.length>3?"px-0":"",children:(0,l.jsx)("div",{className:"flex flex-col",children:Array.isArray(e.models)?(0,l.jsx)("div",{className:"flex flex-col",children:0===e.models.length?(0,l.jsx)(u.Badge,{size:"xs",className:"mb-1",color:"red",children:(0,l.jsx)(F.Text,{children:"全部模型"})}):(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"flex items-start",children:[e.models.length>3&&(0,l.jsx)("div",{children:(0,l.jsx)(_.Icon,{icon:eu[e.organization_id||""]?d.ChevronDownIcon:c.ChevronRightIcon,className:"cursor-pointer",size:"xs",onClick:()=>{eh(l=>({...l,[e.organization_id||""]:!l[e.organization_id||""]}))}})}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.models.slice(0,3).map((e,a)=>"all-proxy-models"===e?(0,l.jsx)(u.Badge,{size:"xs",color:"red",children:(0,l.jsx)(F.Text,{children:"全部模型"})},a):(0,l.jsx)(u.Badge,{size:"xs",color:"blue",children:(0,l.jsx)(F.Text,{children:e.length>30?`${(0,L.getModelDisplayName)(e).slice(0,30)}...`:(0,L.getModelDisplayName)(e)})},a)),e.models.length>3&&!eu[e.organization_id||""]&&(0,l.jsx)(u.Badge,{size:"xs",color:"gray",className:"cursor-pointer",children:(0,l.jsxs)(F.Text,{children:["+",e.models.length-3," ",(e.models.length,"个更多模型")]})}),eu[e.organization_id||""]&&(0,l.jsx)("div",{className:"flex flex-wrap gap-1",children:e.models.slice(3).map((e,a)=>"all-proxy-models"===e?(0,l.jsx)(u.Badge,{size:"xs",color:"red",children:(0,l.jsx)(F.Text,{children:"全部模型"})},a+3):(0,l.jsx)(u.Badge,{size:"xs",color:"blue",children:(0,l.jsx)(F.Text,{children:e.length>30?`${(0,L.getModelDisplayName)(e).slice(0,30)}...`:(0,L.getModelDisplayName)(e)})},a+3))})]})]})})}):null})}),(0,l.jsx)(y.TableCell,{children:(0,l.jsxs)(F.Text,{children:["TPM:"," ",e.litellm_budget_table?.tpm_limit?e.litellm_budget_table?.tpm_limit:"不限制",(0,l.jsx)("br",{}),"RPM:"," ",e.litellm_budget_table?.rpm_limit?e.litellm_budget_table?.rpm_limit:"不限制"]})}),(0,l.jsx)(y.TableCell,{children:(0,l.jsxs)(F.Text,{children:[e.members?.length||0," 位成员"]})}),(0,l.jsx)(y.TableCell,{children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(R.default,{variant:"Edit",tooltipText:"编辑组织",onClick:()=>{J(e.organization_id),Y(!0)}}),(0,l.jsx)(R.default,{variant:"Delete",tooltipText:"删除组织",onClick:()=>{var l;(l=e.organization_id)&&(ea(l),ee(!0))}})]})})]},e.organization_id)):null})]})]})})})]})})]})]})}),(0,l.jsx)(P.Modal,{title:"创建组织",visible:ed,width:800,footer:null,onCancel:()=>{ec(!1),em.resetFields()},children:(0,l.jsxs)(M.Form,{form:em,onFinish:ej,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,l.jsx)(M.Form.Item,{label:"组织名称",name:"organization_alias",rules:[{required:!0,message:"请输入组织名称"}],children:(0,l.jsx)(I.TextInput,{placeholder:"请输入名称"})}),(0,l.jsx)(M.Form.Item,{label:"模型",name:"models",style:{marginTop:16},children:(0,l.jsx)(Q.ModelSelect,{options:{showAllProxyModelsOverride:!0,includeSpecialOptions:!0},value:em.getFieldValue("models"),onChange:e=>em.setFieldValue("models",e),context:"organization",placeholder:"选择模型"})}),(0,l.jsx)(M.Form.Item,{label:"最大预算",name:"max_budget",style:{marginTop:16},children:(0,l.jsx)(et.default,{step:.01,precision:2,width:200,placeholder:"请输入数值"})}),(0,l.jsx)(M.Form.Item,{label:"预算重置周期",name:"budget_duration",style:{marginTop:16},children:(0,l.jsxs)(k.Select,{defaultValue:null,placeholder:"不适用",children:[(0,l.jsx)(k.Select.Option,{value:"24h",children:"每天"}),(0,l.jsx)(k.Select.Option,{value:"7d",children:"每周"}),(0,l.jsx)(k.Select.Option,{value:"30d",children:"每月"})]})}),(0,l.jsx)(M.Form.Item,{label:"每分钟 Token 限制 (TPM)",name:"tpm_limit",style:{marginTop:16},children:(0,l.jsx)(et.default,{step:1,width:400,placeholder:"请输入数值"})}),(0,l.jsx)(M.Form.Item,{label:"每分钟请求限制 (RPM)",name:"rpm_limit",style:{marginTop:16},children:(0,l.jsx)(et.default,{step:1,width:400,placeholder:"请输入数值"})}),(0,l.jsx)(M.Form.Item,{label:(0,l.jsxs)("span",{children:["可用向量库"," ",(0,l.jsx)(D.Tooltip,{title:"选择该组织默认可访问的向量库。留空表示可访问所有向量库",children:(0,l.jsx)(o.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"allowed_vector_store_ids",style:{marginTop:16,marginBottom:32},help:"选择该组织可访问的向量库，留空表示可访问所有向量库",children:(0,l.jsx)(ei.default,{onChange:e=>em.setFieldValue("allowed_vector_store_ids",e),value:em.getFieldValue("allowed_vector_store_ids"),accessToken:s||"",placeholder:"选择向量库（可选）"})}),(0,l.jsx)(M.Form.Item,{label:(0,l.jsxs)("span",{children:["可用 MCP 服务"," ",(0,l.jsx)(D.Tooltip,{title:"选择该组织默认可访问的 MCP 服务和访问组。",children:(0,l.jsx)(o.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"allowed_mcp_servers_and_groups",style:{marginTop:20,marginBottom:32},help:"选择该组织可访问的 MCP 服务和访问组。",children:(0,l.jsx)(U.default,{onChange:e=>em.setFieldValue("allowed_mcp_servers_and_groups",e),value:em.getFieldValue("allowed_mcp_servers_and_groups"),accessToken:s||"",placeholder:"选择 MCP 服务和访问组（可选）"})}),(0,l.jsx)(M.Form.Item,{label:"元数据",name:"metadata",style:{marginTop:16},children:(0,l.jsx)(O.Input.TextArea,{rows:4})}),(0,l.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,l.jsx)(h.Button,{type:"submit",children:"创建组织"})})]})}),(0,l.jsx)(E.default,{isOpen:Z,title:"删除组织？",message:"确认删除该组织吗？此操作不可撤销。",resourceInformationTitle:"组织信息",resourceInformation:[{label:"组织 ID",value:el,code:!0}],onCancel:()=>{ee(!1),ea(null)},onOk:eb,confirmLoading:es})]})},"fetchOrganizations",0,en],846835)}]);