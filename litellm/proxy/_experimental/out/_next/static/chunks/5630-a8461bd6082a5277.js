"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5630],{35630:(e,t,r)=>{r.d(t,{A:()=>ew});var s,l=r(95155),a=r(12115),o=r(38983),i=r(27309),n=r(13121),c=r(19602),d=r(2212),m=r(87927),x=r(56680),h=r(73806),u=r(79363),p=r(75892),v=r(73317),g=r(28436),j=r(14992),y=r(17293),f=r(73946),_=r(37621),b=r(3134),A=r(48658),N=r(22277),w=r(82426),S=r(90314);let k=({data:e,onView:t,onEdit:r,onDelete:s})=>{let[o,i]=a.useState([{id:"created_at",desc:!0}]),n=[{header:"Vector Store ID",accessorKey:"vector_store_id",cell:({row:e})=>{let r=e.original;return(0,l.jsx)("button",{onClick:()=>t(r.vector_store_id),className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left w-full truncate whitespace-nowrap cursor-pointer max-w-[15ch]",children:r.vector_store_id.length>15?`${r.vector_store_id.slice(0,15)}...`:r.vector_store_id})}},{header:"Name",accessorKey:"vector_store_name",cell:({row:e})=>{let t=e.original;return(0,l.jsx)(N.A,{title:t.vector_store_name,children:(0,l.jsx)("span",{className:"text-xs",children:t.vector_store_name||"-"})})}},{header:"Description",accessorKey:"vector_store_description",cell:({row:e})=>{let t=e.original;return(0,l.jsx)(N.A,{title:t.vector_store_description,children:(0,l.jsx)("span",{className:"text-xs",children:t.vector_store_description||"-"})})}},{header:"Files",accessorKey:"vector_store_metadata",cell:({row:e})=>{let t=e.original,r=t.vector_store_metadata?.ingested_files||[];if(0===r.length)return(0,l.jsx)("span",{className:"text-xs text-gray-400",children:"-"});let s=r.map(e=>e.filename||e.file_url||"Unknown").join(", "),a=1===r.length?r[0].filename||r[0].file_url||"1 file":`${r.length} files`;return(0,l.jsx)(N.A,{title:s,children:(0,l.jsx)("span",{className:"text-xs text-blue-600",children:a})})}},{header:"Provider",accessorKey:"custom_llm_provider",cell:({row:e})=>{let t=e.original,{displayName:r,logo:s}=(0,S.li)(t.custom_llm_provider);return(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[s&&(0,l.jsx)("img",{src:s,alt:r,className:"h-4 w-4"}),(0,l.jsx)("span",{className:"text-xs",children:r})]})}},{header:"Created At",accessorKey:"created_at",sortingFn:"datetime",cell:({row:e})=>{let t=e.original;return(0,l.jsx)("span",{className:"text-xs",children:new Date(t.created_at).toLocaleDateString()})}},{header:"Updated At",accessorKey:"updated_at",sortingFn:"datetime",cell:({row:e})=>{let t=e.original;return(0,l.jsx)("span",{className:"text-xs",children:new Date(t.updated_at).toLocaleDateString()})}},{id:"actions",header:"",cell:({row:e})=>{let t=e.original;return(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)(w.A,{variant:"Edit",tooltipText:"Edit vector store",onClick:()=>r(t.vector_store_id)}),(0,l.jsx)(w.A,{variant:"Delete",tooltipText:"Delete vector store",onClick:()=>s(t.vector_store_id)})]})}}],c=(0,_.N4)({data:e,columns:n,state:{sorting:o},onSortingChange:i,getCoreRowModel:(0,b.HT)(),getSortedRowModel:(0,b.h5)(),enableSorting:!0});return(0,l.jsx)("div",{className:"rounded-lg custom-border relative",children:(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)(A.XI,{className:"[&_td]:py-0.5 [&_th]:py-1",children:[(0,l.jsx)(A.nd,{children:c.getHeaderGroups().map(e=>(0,l.jsx)(A.Hj,{children:e.headers.map(e=>(0,l.jsx)(A.M_,{className:`py-1 h-8 ${"actions"===e.id?"sticky right-0 bg-white shadow-[-4px_0_8px_-6px_rgba(0,0,0,0.1)]":""}`,onClick:e.column.getToggleSortingHandler(),children:(0,l.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,l.jsx)("div",{className:"flex items-center",children:e.isPlaceholder?null:(0,_.Kv)(e.column.columnDef.header,e.getContext())}),"actions"!==e.id&&(0,l.jsx)("div",{className:"w-4",children:e.column.getIsSorted()?({asc:(0,l.jsx)(j.A,{className:"h-4 w-4 text-blue-500"}),desc:(0,l.jsx)(y.A,{className:"h-4 w-4 text-blue-500"})})[e.column.getIsSorted()]:(0,l.jsx)(f.A,{className:"h-4 w-4 text-gray-400"})})]})},e.id))},e.id))}),(0,l.jsx)(A.BF,{children:c.getRowModel().rows.length>0?c.getRowModel().rows.map(e=>(0,l.jsx)(A.Hj,{className:"h-8",children:e.getVisibleCells().map(e=>(0,l.jsx)(A.nA,{className:`py-0.5 max-h-8 overflow-hidden text-ellipsis whitespace-nowrap ${"actions"===e.column.id?"sticky right-0 bg-white shadow-[-4px_0_8px_-6px_rgba(0,0,0,0.1)]":""}`,children:(0,_.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,l.jsx)(A.Hj,{children:(0,l.jsx)(A.nA,{colSpan:n.length,className:"h-8 text-center",children:(0,l.jsx)("div",{className:"text-center text-gray-500",children:(0,l.jsx)("p",{children:"No vector stores found"})})})})})]})})})};var C=r(21590),I=r(25387),E=r(3373),V=r(23060),D=r(99876),L=r(91808),O=r(94300),z=((s={}).Bedrock="Amazon Bedrock",s.S3Vectors="Amazon S3 Vectors",s.PgVector="PostgreSQL pgvector (Silinex Connector)",s.VertexRagEngine="Vertex AI RAG Engine",s.OpenAI="OpenAI",s.Azure="Azure OpenAI",s.Milvus="Milvus",s);let P={Bedrock:"bedrock",PgVector:"pg_vector",VertexRagEngine:"vertex_ai",OpenAI:"openai",Azure:"azure",Milvus:"milvus",S3Vectors:"s3_vectors"},T="../ui/assets/logos/",q={"Amazon Bedrock":`${T}bedrock.svg`,"PostgreSQL pgvector (Silinex Connector)":`${T}postgresql.svg`,"Vertex AI RAG Engine":`${T}google.svg`,OpenAI:`${T}openai_small.svg`,"Azure OpenAI":`${T}microsoft_azure.svg`,Milvus:`${T}milvus.svg`,"Amazon S3 Vectors":`${T}s3_vector.png`},B={bedrock:[],pg_vector:[{name:"api_base",label:"API Base",tooltip:"Enter the base URL of your deployed litellm-pgvector server (e.g., http://your-server:8000)",placeholder:"http://your-deployed-server:8000",required:!0,type:"text"},{name:"api_key",label:"API Key",tooltip:"Enter the API key from your deployed litellm-pgvector server",placeholder:"your-deployed-api-key",required:!0,type:"password"}],vertex_rag_engine:[],openai:[{name:"api_key",label:"API Key",tooltip:"Enter your OpenAI API key",placeholder:"sk-...",required:!0,type:"password"}],azure:[{name:"api_key",label:"API Key",tooltip:"Enter your Azure OpenAI API key",placeholder:"your-azure-api-key",required:!0,type:"password"},{name:"api_base",label:"API Base",tooltip:"Enter your Azure OpenAI endpoint (e.g., https://your-resource.openai.azure.com/)",placeholder:"https://your-resource.openai.azure.com/",required:!0,type:"text"}],milvus:[{name:"api_key",label:"API Key",tooltip:"To obtain a token, you should use a colon (:) to concatenate the username and password that you use to access your Milvus instance (e.g., username:password)",placeholder:"username:password or api key",required:!0,type:"password"},{name:"api_base",label:"API Base",tooltip:"Enter your Milvus endpoint (e.g., https://your-milvus-endpoint.com/)",placeholder:"https://your-milvus-endpoint.com/",required:!0,type:"text"},{name:"embedding_model",label:"Embedding Model",tooltip:"Select the embedding model to use",placeholder:"text-embedding-3-small",required:!0,type:"select"}],s3_vectors:[{name:"vector_bucket_name",label:"Vector Bucket Name",tooltip:"S3 bucket name for vector storage (will be auto-created if it doesn't exist)",placeholder:"my-vector-bucket",required:!0,type:"text"},{name:"index_name",label:"Index Name",tooltip:"Name for the vector index (optional, will be auto-generated if not provided)",placeholder:"my-vector-index",required:!1,type:"text"},{name:"aws_region_name",label:"AWS Region",tooltip:"AWS region where the S3 bucket is located (e.g., us-west-2)",placeholder:"us-west-2",required:!0,type:"text"},{name:"embedding_model",label:"Embedding Model",tooltip:"Select the embedding model to use for vector generation",placeholder:"text-embedding-3-small",required:!0,type:"select"}]},$=e=>B[e]||[];var R=r(22603),F=r(12120);let M=({isVisible:e,onCancel:t,onSuccess:r,accessToken:s,credentials:o})=>{let[i]=I.A.useForm(),[n,c]=(0,a.useState)("{}"),[d,m]=(0,a.useState)("bedrock"),[x,h]=(0,a.useState)([]);(0,a.useEffect)(()=>{s&&(async()=>{try{let e=await (0,R.Q)(s);e.length>0&&h(e)}catch(e){console.error("Error fetching model info:",e)}})()},[s]);let u=async e=>{if(s)try{let t={};try{t=n.trim()?JSON.parse(n):{}}catch(e){F.Ay.fromBackend("Invalid JSON in metadata field");return}let l={vector_store_id:e.vector_store_id,custom_llm_provider:e.custom_llm_provider,vector_store_name:e.vector_store_name,vector_store_description:e.vector_store_description,vector_store_metadata:t,litellm_credential_name:e.litellm_credential_name};l.litellm_params=$(e.custom_llm_provider).reduce((t,r)=>("milvus"===e.custom_llm_provider&&"embedding_model"===r.name?t.litellm_embedding_model=e[r.name]:t[r.name]=e[r.name],t),{}),await (0,g.vectorStoreCreateCall)(s,l),F.Ay.success("Vector store created successfully"),i.resetFields(),c("{}"),r()}catch(e){console.error("Error creating vector store:",e),F.Ay.fromBackend("Error creating vector store: "+e)}},p=()=>{i.resetFields(),c("{}"),m("bedrock"),t()};return(0,l.jsx)(E.A,{title:"Add New Vector Store",open:e,width:1e3,footer:null,onCancel:p,children:(0,l.jsxs)(I.A,{form:i,onFinish:u,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,l.jsx)(I.A.Item,{label:(0,l.jsxs)("span",{children:["Provider"," ",(0,l.jsx)(N.A,{title:"Select the provider for this vector store",children:(0,l.jsx)(O.A,{style:{marginLeft:"4px"}})})]}),name:"custom_llm_provider",rules:[{required:!0,message:"Please select a provider"}],initialValue:"bedrock",children:(0,l.jsx)(V.A,{onChange:e=>m(e),children:Object.entries(z).map(([e,t])=>(0,l.jsx)(V.A.Option,{value:P[e],children:(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("img",{src:q[t],alt:`${e} logo`,className:"w-5 h-5",onError:e=>{let r=e.target,s=r.parentElement;if(s){let e=document.createElement("div");e.className="w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=t.charAt(0),s.replaceChild(e,r)}}}),(0,l.jsx)("span",{children:t})]})},e))})}),"pg_vector"===d&&(0,l.jsx)(D.A,{message:"PG Vector Setup Required",description:(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{children:"Silinex provides a server to connect to PG Vector. To use this provider:"}),(0,l.jsxs)("ol",{style:{marginLeft:"16px",marginTop:"8px"},children:[(0,l.jsxs)("li",{children:["Deploy the litellm-pgvector server from:"," ",(0,l.jsx)("a",{href:"https://github.com/BerriAI/litellm-pgvector",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/BerriAI/litellm-pgvector"})]}),(0,l.jsx)("li",{children:"Configure your PostgreSQL database with pgvector extension"}),(0,l.jsx)("li",{children:"Start the server and note the API base URL and API key"}),(0,l.jsx)("li",{children:"Enter those details in the fields below"})]})]}),type:"info",showIcon:!0,style:{marginBottom:"16px"}}),"vertex_rag_engine"===d&&(0,l.jsx)(D.A,{message:"Vertex AI RAG Engine Setup",description:(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{children:"To use Vertex AI RAG Engine:"}),(0,l.jsxs)("ol",{style:{marginLeft:"16px",marginTop:"8px"},children:[(0,l.jsxs)("li",{children:["Set up your Vertex AI RAG Engine corpus following the guide:"," ",(0,l.jsx)("a",{href:"https://cloud.google.com/vertex-ai/generative-ai/docs/rag-engine/rag-overview",target:"_blank",rel:"noopener noreferrer",children:"Vertex AI RAG Engine Overview"})]}),(0,l.jsx)("li",{children:"Create a corpus in your Google Cloud project"}),(0,l.jsx)("li",{children:"Note the corpus ID from the Vertex AI console"}),(0,l.jsx)("li",{children:"Enter the corpus ID in the Vector Store ID field below"})]})]}),type:"info",showIcon:!0,style:{marginBottom:"16px"}}),(0,l.jsx)(I.A.Item,{label:(0,l.jsxs)("span",{children:["Vector Store ID"," ",(0,l.jsx)(N.A,{title:"Enter the vector store ID from your api provider",children:(0,l.jsx)(O.A,{style:{marginLeft:"4px"}})})]}),name:"vector_store_id",rules:[{required:!0,message:"Please input the vector store ID from your api provider"}],children:(0,l.jsx)(C.k,{placeholder:"vertex_rag_engine"===d?"6917529027641081856 (Get corpus ID from Vertex AI console)":"Enter vector store ID from your provider"})}),$(d).map(e=>{if("select"===e.type){let t=x.filter(e=>"embedding"===e.mode||null===e.mode).map(e=>({value:e.model_group,label:e.model_group}));return(0,l.jsx)(I.A.Item,{label:(0,l.jsxs)("span",{children:[e.label," ",(0,l.jsx)(N.A,{title:e.tooltip,children:(0,l.jsx)(O.A,{style:{marginLeft:"4px"}})})]}),name:e.name,rules:e.required?[{required:!0,message:`Please select the ${e.label.toLowerCase()}`}]:[],children:(0,l.jsx)(V.A,{placeholder:e.placeholder,showSearch:!0,filterOption:(e,t)=>(t?.label??"").toLowerCase().includes(e.toLowerCase()),options:t,style:{width:"100%"}})},e.name)}return(0,l.jsx)(I.A.Item,{label:(0,l.jsxs)("span",{children:[e.label," ",(0,l.jsx)(N.A,{title:e.tooltip,children:(0,l.jsx)(O.A,{style:{marginLeft:"4px"}})})]}),name:e.name,rules:e.required?[{required:!0,message:`Please input the ${e.label.toLowerCase()}`}]:[],children:(0,l.jsx)(C.k,{type:e.type||"text",placeholder:e.placeholder})},e.name)}),(0,l.jsx)(I.A.Item,{label:(0,l.jsxs)("span",{children:["Vector Store Name"," ",(0,l.jsx)(N.A,{title:"Custom name you want to give to the vector store, this name will be rendered on the Silinex UI",children:(0,l.jsx)(O.A,{style:{marginLeft:"4px"}})})]}),name:"vector_store_name",children:(0,l.jsx)(C.k,{})}),(0,l.jsx)(I.A.Item,{label:"Description",name:"vector_store_description",children:(0,l.jsx)(L.A.TextArea,{rows:4})}),(0,l.jsx)(I.A.Item,{label:(0,l.jsxs)("span",{children:["Existing Credentials"," ",(0,l.jsx)(N.A,{title:"Optionally select API provider credentials for this vector store eg. Bedrock API KEY",children:(0,l.jsx)(O.A,{style:{marginLeft:"4px"}})})]}),name:"litellm_credential_name",children:(0,l.jsx)(V.A,{showSearch:!0,placeholder:"Select or search for existing credentials",optionFilterProp:"children",filterOption:(e,t)=>(t?.label??"").toLowerCase().includes(e.toLowerCase()),options:[{value:null,label:"None"},...o.map(e=>({value:e.credential_name,label:e.credential_name}))],allowClear:!0})}),(0,l.jsx)(I.A.Item,{label:(0,l.jsxs)("span",{children:["Metadata"," ",(0,l.jsx)(N.A,{title:"JSON metadata for the vector store (optional)",children:(0,l.jsx)(O.A,{style:{marginLeft:"4px"}})})]}),children:(0,l.jsx)(L.A.TextArea,{rows:4,value:n,onChange:e=>c(e.target.value),placeholder:'{"key": "value"}'})}),(0,l.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,l.jsx)(C.$,{onClick:p,variant:"secondary",children:"Cancel"}),(0,l.jsx)(C.$,{variant:"primary",type:"submit",children:"Create"})]})]})})};var Y=r(66793),K=r(15784),U=r(87278),G=r(44926),J=r(41326),Q=r(87056),W=r(69779),H=r(7339),X=r(95049),Z=r(68413),ee=r(17432),et=r(45960),er=r(34568),es=r(29610);let{TextArea:el}=L.A,{Text:ea,Title:eo}=J.A,ei=({vectorStoreId:e,accessToken:t,className:r=""})=>{let[s,o]=(0,a.useState)(""),[i,n]=(0,a.useState)(!1),[c,d]=(0,a.useState)([]),[m,x]=(0,a.useState)({}),h=async()=>{if(!s.trim())return void Q.Ay.warning("Please enter a search query");n(!0);try{let r=await (0,g.vectorStoreSearchCall)(t,e,s),l={query:s,response:r,timestamp:Date.now()};d(e=>[l,...e]),o("")}catch(e){console.error("Error searching vector store:",e),F.Ay.fromBackend("Failed to search vector store")}finally{n(!1)}};return(0,l.jsx)(W.A,{className:"w-full rounded-xl shadow-md",children:(0,l.jsxs)("div",{className:"flex flex-col h-[600px]",children:[(0,l.jsxs)("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(Z.A,{className:"mr-2 text-blue-500"}),(0,l.jsx)(eo,{level:4,className:"mb-0",children:"Test Vector Store"})]}),c.length>0&&(0,l.jsx)(U.Ay,{onClick:()=>{d([]),x({}),F.Ay.success("Search history cleared")},size:"small",children:"Clear History"})]}),(0,l.jsxs)("div",{className:"flex-1 overflow-auto p-4 pb-0",children:[0===c.length?(0,l.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-gray-400",children:[(0,l.jsx)(Z.A,{style:{fontSize:"48px",marginBottom:"16px"}}),(0,l.jsx)(ea,{children:"Test your vector store by entering a search query below"})]}):(0,l.jsx)("div",{className:"space-y-4",children:c.map((e,t)=>(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("div",{className:"text-right",children:(0,l.jsxs)("div",{className:"inline-block max-w-[80%] rounded-lg shadow-sm p-3 bg-blue-50 border border-blue-200",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,l.jsx)("strong",{className:"text-sm",children:"Query"}),(0,l.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleString()})]}),(0,l.jsx)("div",{className:"text-left",children:e.query})]})}),(0,l.jsx)("div",{className:"text-left",children:(0,l.jsxs)("div",{className:"inline-block max-w-[80%] rounded-lg shadow-sm p-3 bg-white border border-gray-200",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,l.jsx)(Z.A,{className:"text-green-500"}),(0,l.jsx)("strong",{className:"text-sm",children:"Vector Store Results"}),e.response&&(0,l.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded bg-gray-100 text-gray-600",children:[e.response.data?.length||0," results"]})]}),e.response&&e.response.data&&e.response.data.length>0?(0,l.jsx)("div",{className:"space-y-3",children:e.response.data.map((e,r)=>{let s=m[`${t}-${r}`]||!1;return(0,l.jsxs)("div",{className:"border rounded-lg overflow-hidden bg-gray-50",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center p-3 cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>{let e;return e=`${t}-${r}`,void x(t=>({...t,[e]:!t[e]}))},children:[(0,l.jsxs)("div",{className:"flex items-center",children:[s?(0,l.jsx)(ee.A,{className:"text-gray-500 mr-2"}):(0,l.jsx)(et.A,{className:"text-gray-500 mr-2"}),(0,l.jsxs)("span",{className:"font-medium text-sm",children:["Result ",r+1]}),!s&&e.content&&e.content[0]&&(0,l.jsxs)("span",{className:"ml-2 text-xs text-gray-500 truncate max-w-md",children:["- ",e.content[0].text.substring(0,100),"..."]})]}),(0,l.jsxs)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:["Score: ",e.score.toFixed(4)]})]}),s&&(0,l.jsxs)("div",{className:"border-t bg-white p-3",children:[e.content&&e.content.map((e,t)=>(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsxs)("div",{className:"text-xs text-gray-500 mb-1",children:["Content (",e.type,")"]}),(0,l.jsx)("div",{className:"text-sm bg-gray-50 p-3 rounded border text-gray-800 max-h-40 overflow-y-auto",children:e.text})]},t)),(e.file_id||e.filename||e.attributes)&&(0,l.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,l.jsx)("div",{className:"text-xs text-gray-500 mb-2 font-medium",children:"Metadata"}),(0,l.jsxs)("div",{className:"space-y-2 text-xs",children:[e.file_id&&(0,l.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,l.jsx)("span",{className:"font-medium",children:"File ID:"})," ",e.file_id]}),e.filename&&(0,l.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,l.jsx)("span",{className:"font-medium",children:"Filename:"})," ",e.filename]}),e.attributes&&Object.keys(e.attributes).length>0&&(0,l.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,l.jsx)("span",{className:"font-medium block mb-1",children:"Attributes:"}),(0,l.jsx)("pre",{className:"text-xs bg-white p-2 rounded border overflow-x-auto",children:JSON.stringify(e.attributes,null,2)})]})]})]})]})]},r)})}):(0,l.jsx)("div",{className:"text-gray-500 text-sm",children:"No results found"})]})}),t<c.length-1&&(0,l.jsx)(H.A,{})]},t))}),i&&(0,l.jsx)("div",{className:"flex justify-center items-center my-4",children:(0,l.jsx)(X.A,{indicator:(0,l.jsx)(er.A,{style:{fontSize:24},spin:!0})})})]}),(0,l.jsx)("div",{className:"p-4 border-t border-gray-200 bg-white",children:(0,l.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsx)(el,{value:s,onChange:e=>o(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),h())},placeholder:"Enter your search query... (Shift+Enter for new line)",disabled:i,autoSize:{minRows:1,maxRows:4},style:{resize:"none"}})}),(0,l.jsx)(U.Ay,{type:"primary",onClick:h,disabled:i||!s.trim(),icon:(0,l.jsx)(es.A,{}),loading:i,children:"Search"})]})})]})})},en=({vectorStoreId:e,onClose:t,accessToken:r,is_admin:s,editVectorStore:o})=>{let[i]=I.A.useForm(),[n,c]=(0,a.useState)(null),[d,m]=(0,a.useState)(o),[x,h]=(0,a.useState)("{}"),[u,p]=(0,a.useState)([]),[v,j]=(0,a.useState)("details"),y=async()=>{if(r)try{let t=await (0,g.vectorStoreInfoCall)(r,e);if(t&&t.vector_store){if(c(t.vector_store),t.vector_store.vector_store_metadata){let e="string"==typeof t.vector_store.vector_store_metadata?JSON.parse(t.vector_store.vector_store_metadata):t.vector_store.vector_store_metadata;h(JSON.stringify(e,null,2))}o&&i.setFieldsValue({vector_store_id:t.vector_store.vector_store_id,custom_llm_provider:t.vector_store.custom_llm_provider,vector_store_name:t.vector_store.vector_store_name,vector_store_description:t.vector_store.vector_store_description})}}catch(e){console.error("Error fetching vector store details:",e),F.Ay.fromBackend("Error fetching vector store details: "+e)}},f=async()=>{if(r)try{let e=await (0,g.credentialListCall)(r);console.log("List credentials response:",e),p(e.credentials||[])}catch(e){console.error("Error fetching credentials:",e)}};(0,a.useEffect)(()=>{y(),f()},[e,r]);let _=async e=>{if(r)try{let t={};try{t=x?JSON.parse(x):{}}catch(e){F.Ay.fromBackend("Invalid JSON in metadata field");return}let s={vector_store_id:e.vector_store_id,custom_llm_provider:e.custom_llm_provider,vector_store_name:e.vector_store_name,vector_store_description:e.vector_store_description,vector_store_metadata:t};await (0,g.vectorStoreUpdateCall)(r,s),F.Ay.success("Vector store updated successfully"),m(!1),y()}catch(e){console.error("Error updating vector store:",e),F.Ay.fromBackend("Error updating vector store: "+e)}};return n?(0,l.jsxs)("div",{className:"p-4 max-w-full",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(K.$n,{icon:G.A,variant:"light",className:"mb-4",onClick:t,children:"Back to Vector Stores"}),(0,l.jsxs)(K.hE,{children:["Vector Store ID: ",n.vector_store_id]}),(0,l.jsx)(K.EY,{className:"text-gray-500",children:n.vector_store_description||"No description"})]}),s&&!d&&(0,l.jsx)(K.$n,{onClick:()=>m(!0),children:"Edit Vector Store"})]}),(0,l.jsxs)(K.fu,{children:[(0,l.jsxs)(K.wb,{className:"mb-6",children:[(0,l.jsx)(K.oz,{children:"Details"}),(0,l.jsx)(K.oz,{children:"Test Vector Store"})]}),(0,l.jsxs)(K.T2,{children:[(0,l.jsx)(K.Kp,{children:d?(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,l.jsx)(K.hE,{children:"Edit Vector Store"})}),(0,l.jsx)(K.Zp,{children:(0,l.jsxs)(I.A,{form:i,onFinish:_,layout:"vertical",initialValues:n,children:[(0,l.jsx)(I.A.Item,{label:"Vector Store ID",name:"vector_store_id",rules:[{required:!0,message:"Please input a vector store ID"}],children:(0,l.jsx)(L.A,{disabled:!0})}),(0,l.jsx)(I.A.Item,{label:"Vector Store Name",name:"vector_store_name",children:(0,l.jsx)(L.A,{})}),(0,l.jsx)(I.A.Item,{label:"Description",name:"vector_store_description",children:(0,l.jsx)(L.A.TextArea,{rows:4})}),(0,l.jsx)(I.A.Item,{label:(0,l.jsxs)("span",{children:["Provider"," ",(0,l.jsx)(N.A,{title:"Select the provider for this vector store",children:(0,l.jsx)(O.A,{style:{marginLeft:"4px"}})})]}),name:"custom_llm_provider",rules:[{required:!0,message:"Please select a provider"}],children:(0,l.jsx)(V.A,{children:Object.entries(S.bb).map(([e,t])=>"Bedrock"===e?(0,l.jsx)(V.A.Option,{value:S.JQ[e],children:(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("img",{src:S.rm[t],alt:`${e} logo`,className:"w-5 h-5",onError:e=>{let r=e.target,s=r.parentElement;if(s){let e=document.createElement("div");e.className="w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=t.charAt(0),s.replaceChild(e,r)}}}),(0,l.jsx)("span",{children:t})]})},e):null)})}),(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsx)(K.EY,{className:"text-sm text-gray-500 mb-2",children:"Either select existing credentials OR enter provider credentials below"})}),(0,l.jsx)(I.A.Item,{label:"Existing Credentials",name:"litellm_credential_name",children:(0,l.jsx)(V.A,{showSearch:!0,placeholder:"Select or search for existing credentials",optionFilterProp:"children",filterOption:(e,t)=>(t?.label??"").toLowerCase().includes(e.toLowerCase()),options:[{value:null,label:"None"},...u.map(e=>({value:e.credential_name,label:e.credential_name}))],allowClear:!0})}),(0,l.jsxs)("div",{className:"flex items-center my-4",children:[(0,l.jsx)("div",{className:"flex-grow border-t border-gray-200"}),(0,l.jsx)("span",{className:"px-4 text-gray-500 text-sm",children:"OR"}),(0,l.jsx)("div",{className:"flex-grow border-t border-gray-200"})]}),(0,l.jsx)(I.A.Item,{label:(0,l.jsxs)("span",{children:["Metadata"," ",(0,l.jsx)(N.A,{title:"JSON metadata for the vector store",children:(0,l.jsx)(O.A,{style:{marginLeft:"4px"}})})]}),children:(0,l.jsx)(L.A.TextArea,{rows:4,value:x,onChange:e=>h(e.target.value),placeholder:'{"key": "value"}'})}),(0,l.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,l.jsx)(U.Ay,{onClick:()=>m(!1),children:"Cancel"}),(0,l.jsx)(U.Ay,{type:"primary",htmlType:"submit",children:"Save Changes"})]})]})})]}):(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsx)(K.hE,{children:"Vector Store Details"}),s&&(0,l.jsx)(K.$n,{onClick:()=>m(!0),children:"Edit Vector Store"})]}),(0,l.jsx)(K.Zp,{children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(K.EY,{className:"font-medium",children:"ID"}),(0,l.jsx)(K.EY,{children:n.vector_store_id})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(K.EY,{className:"font-medium",children:"Name"}),(0,l.jsx)(K.EY,{children:n.vector_store_name||"-"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(K.EY,{className:"font-medium",children:"Description"}),(0,l.jsx)(K.EY,{children:n.vector_store_description||"-"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(K.EY,{className:"font-medium",children:"Provider"}),(0,l.jsx)("div",{className:"flex items-center space-x-2 mt-1",children:(()=>{let e=n.custom_llm_provider||"bedrock",{displayName:t,logo:r}=(()=>{let t=Object.keys(S.JQ).find(t=>S.JQ[t].toLowerCase()===e.toLowerCase());if(!t)return{displayName:e,logo:""};let r=S.bb[t],s=S.rm[r];return{displayName:r,logo:s}})();return(0,l.jsxs)(l.Fragment,{children:[r&&(0,l.jsx)("img",{src:r,alt:`${t} logo`,className:"w-5 h-5",onError:e=>{let r=e.target,s=r.parentElement;if(s){let e=document.createElement("div");e.className="w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=t.charAt(0),s.replaceChild(e,r)}}}),(0,l.jsx)(K.Ex,{color:"blue",children:t})]})})()})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(K.EY,{className:"font-medium",children:"Metadata"}),(0,l.jsx)("div",{className:"bg-gray-50 p-3 rounded mt-2 font-mono text-xs overflow-auto max-h-48",children:(0,l.jsx)("pre",{children:x})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(K.EY,{className:"font-medium",children:"Created"}),(0,l.jsx)(K.EY,{children:n.created_at?new Date(n.created_at).toLocaleString():"-"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(K.EY,{className:"font-medium",children:"Last Updated"}),(0,l.jsx)(K.EY,{children:n.updated_at?new Date(n.updated_at).toLocaleString():"-"})]})]})})]})}),(0,l.jsx)(K.Kp,{children:(0,l.jsx)(ei,{vectorStoreId:n.vector_store_id,accessToken:r||""})})]})]})]}):(0,l.jsx)("div",{children:"Loading..."})};var ec=r(83258),ed=r(62823),em=r(16885),ex=r(26313),eh=r(50139),eu=r(31921),ep=r(34537),ev=r(24611);let eg=({documents:e,onRemove:t})=>{let r=[{title:"Name",dataIndex:"name",key:"name",render:(e,t)=>(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("span",{className:"text-sm",children:e}),t.size&&(0,l.jsxs)("span",{className:"text-xs text-gray-400",children:["(",(e=>{if(!e)return"-";let t=e/1024;return t<1024?`${t.toFixed(2)} KB`:`${(t/1024).toFixed(2)} MB`})(t.size),")"]})]})},{title:"Status",dataIndex:"status",key:"status",width:150,render:e=>{let t;return t=({uploading:{color:"blue",text:"Uploading"},done:{color:"green",text:"Ready"},error:{color:"red",text:"Error"},removed:{color:"default",text:"Removed"}})[e],(0,l.jsx)(ex.A,{color:t.color,text:t.text})}},{title:"Actions",key:"actions",width:120,render:(e,r)=>(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(N.A,{title:"View details",children:(0,l.jsx)(eu.A,{className:"cursor-pointer text-gray-600 hover:text-blue-500",onClick:()=>console.log("View",r)})}),(0,l.jsx)(N.A,{title:"Copy ID",children:(0,l.jsx)(ep.A,{className:"cursor-pointer text-gray-600 hover:text-blue-500",onClick:()=>{var e;return e=r.uid,void(navigator.clipboard.writeText(e),Q.Ay.success("Document ID copied to clipboard"))}})}),(0,l.jsx)(N.A,{title:"Remove",children:(0,l.jsx)(ev.A,{className:"cursor-pointer text-gray-600 hover:text-red-500",onClick:()=>t(r.uid)})})]})}];return(0,l.jsx)(eh.A,{dataSource:e,columns:r,rowKey:"uid",pagination:!1,locale:{emptyText:"No documents uploaded yet. Upload documents above to get started."},size:"small"})},ej=({accessToken:e,providerParams:t,onParamsChange:r})=>{let[s,o]=(0,a.useState)([]),[i,n]=(0,a.useState)(!1);(0,a.useEffect)(()=>{e&&(async()=>{n(!0);try{let t=(await (0,R.Q)(e)).filter(e=>"embedding"===e.mode);o(t)}catch(e){console.error("Error fetching embedding models:",e)}finally{n(!1)}})()},[e]);let c=(e,s)=>{r({...t,[e]:s})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(D.A,{message:"AWS S3 Vectors Setup",description:(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{children:"AWS S3 Vectors allows you to store and query vector embeddings directly in S3:"}),(0,l.jsxs)("ul",{style:{marginLeft:"16px",marginTop:"8px"},children:[(0,l.jsx)("li",{children:"Vector buckets and indexes will be automatically created if they don't exist"}),(0,l.jsx)("li",{children:"Vector dimensions are auto-detected from your selected embedding model"}),(0,l.jsx)("li",{children:"Ensure your AWS credentials have permissions for S3 Vectors operations"}),(0,l.jsxs)("li",{children:["Learn more:"," ",(0,l.jsx)("a",{href:"https://docs.aws.amazon.com/AmazonS3/latest/userguide/s3-vector-buckets.html",target:"_blank",rel:"noopener noreferrer",children:"AWS S3 Vectors Documentation"})]})]})]}),type:"info",showIcon:!0,style:{marginBottom:"16px"}}),(0,l.jsx)(I.A.Item,{label:(0,l.jsxs)("span",{children:["Vector Bucket Name"," ",(0,l.jsx)(N.A,{title:"S3 bucket name for vector storage (must be at least 3 characters, lowercase letters, numbers, hyphens, and periods only)",children:(0,l.jsx)(O.A,{style:{marginLeft:"4px"}})})]}),required:!0,validateStatus:t.vector_bucket_name&&t.vector_bucket_name.length<3?"error":void 0,help:t.vector_bucket_name&&t.vector_bucket_name.length<3?"Bucket name must be at least 3 characters":void 0,children:(0,l.jsx)(L.A,{value:t.vector_bucket_name||"",onChange:e=>c("vector_bucket_name",e.target.value),placeholder:"my-vector-bucket (min 3 chars)",size:"large",className:"rounded-md"})}),(0,l.jsx)(I.A.Item,{label:(0,l.jsxs)("span",{children:["Index Name"," ",(0,l.jsx)(N.A,{title:"Name for the vector index (optional, will be auto-generated if not provided). If provided, must be at least 3 characters.",children:(0,l.jsx)(O.A,{style:{marginLeft:"4px"}})})]}),validateStatus:t.index_name&&t.index_name.length>0&&t.index_name.length<3?"error":void 0,help:t.index_name&&t.index_name.length>0&&t.index_name.length<3?"Index name must be at least 3 characters if provided":void 0,children:(0,l.jsx)(L.A,{value:t.index_name||"",onChange:e=>c("index_name",e.target.value),placeholder:"my-vector-index (optional, min 3 chars)",size:"large",className:"rounded-md"})}),(0,l.jsx)(I.A.Item,{label:(0,l.jsxs)("span",{children:["AWS Region"," ",(0,l.jsx)(N.A,{title:"AWS region where the S3 bucket is located (e.g., us-west-2)",children:(0,l.jsx)(O.A,{style:{marginLeft:"4px"}})})]}),required:!0,children:(0,l.jsx)(L.A,{value:t.aws_region_name||"",onChange:e=>c("aws_region_name",e.target.value),placeholder:"us-west-2",size:"large",className:"rounded-md"})}),(0,l.jsx)(I.A.Item,{label:(0,l.jsxs)("span",{children:["Embedding Model"," ",(0,l.jsx)(N.A,{title:"Select the embedding model to use for vector generation",children:(0,l.jsx)(O.A,{style:{marginLeft:"4px"}})})]}),required:!0,children:(0,l.jsx)(V.A,{value:t.embedding_model||void 0,onChange:e=>c("embedding_model",e),placeholder:"Select an embedding model",size:"large",showSearch:!0,loading:i,filterOption:(e,t)=>(t?.label??"").toLowerCase().includes(e.toLowerCase()),options:s.map(e=>({value:e.model_group,label:e.model_group})),style:{width:"100%"}})})]})},{Dragger:ey}=ed.A,ef=({accessToken:e,onSuccess:t})=>{let[r]=I.A.useForm(),[s,o]=(0,a.useState)([]),[i,n]=(0,a.useState)(!1),[c,d]=(0,a.useState)("bedrock"),[m,x]=(0,a.useState)(""),[h,u]=(0,a.useState)(""),[p,v]=(0,a.useState)([]),[j,y]=(0,a.useState)({}),f={name:"file",multiple:!0,accept:".pdf,.txt,.docx,.md,.doc",beforeUpload:e=>{if(!["application/pdf","text/plain","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword","text/markdown"].includes(e.type))return Q.Ay.error(`${e.name} is not a supported file type. Please upload PDF, TXT, DOCX, or MD files.`),ed.A.LIST_IGNORE;if(!(e.size/1024/1024<50))return Q.Ay.error(`${e.name} must be smaller than 50MB!`),ed.A.LIST_IGNORE;let t={uid:e.uid,name:e.name,status:"done",size:e.size,type:e.type,originFileObj:e};return o(e=>[...e,t]),!1},onRemove:e=>{o(t=>t.filter(t=>t.uid!==e.uid))},fileList:s.map(e=>({uid:e.uid,name:e.name,status:e.status,size:e.size})),showUploadList:!1},_=async()=>{let r;if(0===s.length)return void Q.Ay.warning("Please upload at least one document");if(!c)return void Q.Ay.warning("Please select a provider");for(let e of $(c).filter(e=>e.required))if(!j[e.name])return void Q.Ay.warning(`Please provide ${e.label}`);if("s3_vectors"===c){if(j.vector_bucket_name&&j.vector_bucket_name.length<3)return void Q.Ay.warning("Vector bucket name must be at least 3 characters");if(j.index_name&&j.index_name.length>0&&j.index_name.length<3)return void Q.Ay.warning("Index name must be at least 3 characters if provided")}if(!e)return void Q.Ay.error("No access token available");n(!0);let l=[];try{for(let t of s)if(t.originFileObj){o(e=>e.map(e=>e.uid===t.uid?{...e,status:"uploading"}:e));try{let s=await (0,g.ragIngestCall)(e,t.originFileObj,c,r,m||void 0,h||void 0,j);!r&&s.vector_store_id&&(r=s.vector_store_id),l.push(s),o(e=>e.map(e=>e.uid===t.uid?{...e,status:"done"}:e))}catch(e){throw console.error(`Error ingesting ${t.name}:`,e),o(e=>e.map(e=>e.uid===t.uid?{...e,status:"error"}:e)),e}}v(l),F.Ay.success(`Successfully created vector store with ${l.length} document(s). Vector Store ID: ${r}`),t&&r&&t(r),setTimeout(()=>{o([]),v([])},3e3)}catch(e){console.error("Error creating vector store:",e),F.Ay.fromBackend(`Failed to create vector store: ${e}`)}finally{n(!1)}};return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(ec.hE,{children:"Create Vector Store"}),(0,l.jsx)(ec.EY,{className:"text-gray-500",children:"Upload documents and select a provider to create a new vector store with embedded content."})]}),(0,l.jsxs)(ec.Zp,{children:[(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)(ec.EY,{className:"font-medium",children:"Step 1: Upload Documents"}),(0,l.jsx)(ec.EY,{className:"text-sm text-gray-500 block mt-1",children:"Upload one or more documents (PDF, TXT, DOCX, MD). Maximum file size: 50MB per file."})]}),(0,l.jsxs)(ey,{...f,children:[(0,l.jsx)("p",{className:"ant-upload-drag-icon",children:(0,l.jsx)(em.A,{style:{fontSize:"48px",color:"#1890ff"}})}),(0,l.jsx)("p",{className:"ant-upload-text",children:"Click or drag files to this area to upload"}),(0,l.jsx)("p",{className:"ant-upload-hint",children:"Support for single or bulk upload. Supported formats: PDF, TXT, DOCX, MD"})]})]}),s.length>0&&(0,l.jsxs)(ec.Zp,{children:[(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsxs)(ec.EY,{className:"font-medium",children:["Uploaded Documents (",s.length,")"]})}),(0,l.jsx)(eg,{documents:s,onRemove:e=>{o(t=>t.filter(t=>t.uid!==e))}})]}),(0,l.jsx)(ec.Zp,{children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(ec.EY,{className:"font-medium",children:"Step 2: Configure Vector Store"}),(0,l.jsx)(ec.EY,{className:"text-sm text-gray-500 block mt-1",children:"Choose the provider and optionally provide a name and description for your vector store."})]}),(0,l.jsxs)(I.A,{form:r,layout:"vertical",children:[(0,l.jsx)(I.A.Item,{label:(0,l.jsxs)("span",{children:["Vector Store Name"," ",(0,l.jsx)(N.A,{title:"Optional: Give your vector store a meaningful name",children:(0,l.jsx)(O.A,{style:{marginLeft:"4px"}})})]}),children:(0,l.jsx)(L.A,{value:m,onChange:e=>x(e.target.value),placeholder:"e.g., Product Documentation, Customer Support KB",size:"large",className:"rounded-md"})}),(0,l.jsx)(I.A.Item,{label:(0,l.jsxs)("span",{children:["Description"," ",(0,l.jsx)(N.A,{title:"Optional: Describe what this vector store contains",children:(0,l.jsx)(O.A,{style:{marginLeft:"4px"}})})]}),children:(0,l.jsx)(L.A.TextArea,{value:h,onChange:e=>u(e.target.value),placeholder:"e.g., Contains all product documentation and user guides",rows:2,size:"large",className:"rounded-md"})}),(0,l.jsx)(I.A.Item,{label:(0,l.jsxs)("span",{children:["Provider"," ",(0,l.jsx)(N.A,{title:"Select the provider for embedding and vector store operations",children:(0,l.jsx)(O.A,{style:{marginLeft:"4px"}})})]}),required:!0,children:(0,l.jsx)(V.A,{value:c,onChange:d,placeholder:"Select a provider",size:"large",style:{width:"100%"},children:Object.entries(z).map(([e,t])=>(0,l.jsx)(V.A.Option,{value:P[e],children:(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("img",{src:q[t],alt:`${e} logo`,className:"w-5 h-5",onError:e=>{let r=e.target,s=r.parentElement;if(s){let e=document.createElement("div");e.className="w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=t.charAt(0),s.replaceChild(e,r)}}}),(0,l.jsx)("span",{children:t})]})},e))})}),"s3_vectors"===c&&(0,l.jsx)(ej,{accessToken:e,providerParams:j,onParamsChange:y}),"s3_vectors"!==c&&$(c).map(e=>"select"===e.type?(0,l.jsx)(I.A.Item,{label:(0,l.jsxs)("span",{children:[e.label," ",(0,l.jsx)(N.A,{title:e.tooltip,children:(0,l.jsx)(O.A,{style:{marginLeft:"4px"}})})]}),required:e.required,children:(0,l.jsx)(L.A,{value:j[e.name]||"",onChange:t=>y(r=>({...r,[e.name]:t.target.value})),placeholder:e.placeholder,size:"large",className:"rounded-md"})},e.name):(0,l.jsx)(I.A.Item,{label:(0,l.jsxs)("span",{children:[e.label," ",(0,l.jsx)(N.A,{title:e.tooltip,children:(0,l.jsx)(O.A,{style:{marginLeft:"4px"}})})]}),required:e.required,children:(0,l.jsx)(L.A,{type:"password"===e.type?"password":"text",value:j[e.name]||"",onChange:t=>y(r=>({...r,[e.name]:t.target.value})),placeholder:e.placeholder,size:"large",className:"rounded-md"})},e.name))]}),(0,l.jsx)("div",{className:"flex justify-end",children:(0,l.jsx)(U.Ay,{type:"primary",size:"large",onClick:_,loading:i,disabled:0===s.length||!c,children:i?"Creating Vector Store...":"Create Vector Store"})})]})}),p.length>0&&(0,l.jsx)(D.A,{message:"Vector Store Created Successfully",description:(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Vector Store ID:"})," ",p[0]?.vector_store_id]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Documents Ingested:"})," ",p.length]})]}),type:"success",showIcon:!0,closable:!0})]})},{Text:e_,Title:eb}=J.A,eA=({accessToken:e,vectorStores:t})=>{let[r,s]=(0,a.useState)(t.length>0?t[0].vector_store_id:void 0);return e?0===t.length?(0,l.jsx)(W.A,{children:(0,l.jsx)("div",{className:"text-center py-8",children:(0,l.jsx)(e_,{type:"secondary",children:"No vector stores available. Create one first to test it."})})}):(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)(W.A,{children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(eb,{level:5,children:"Select Vector Store"}),(0,l.jsx)(e_,{type:"secondary",children:"Choose a vector store to test search queries against"})]}),(0,l.jsx)(V.A,{value:r,onChange:s,placeholder:"Select a vector store",size:"large",style:{width:"100%"},showSearch:!0,optionFilterProp:"children",children:t.map(e=>(0,l.jsx)(V.A.Option,{value:e.vector_store_id,children:(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("span",{className:"font-medium",children:e.vector_store_name||e.vector_store_id}),e.vector_store_name&&(0,l.jsx)("span",{className:"text-xs text-gray-500 font-mono",children:e.vector_store_id})]})},e.vector_store_id))})]})}),r&&(0,l.jsx)(ei,{vectorStoreId:r,accessToken:e})]}):(0,l.jsx)(W.A,{children:(0,l.jsx)(e_,{type:"secondary",children:"Access token is required to test vector stores."})})};var eN=r(90550);let ew=({accessToken:e,userID:t,userRole:r})=>{let[s,j]=(0,a.useState)([]),[y,f]=(0,a.useState)(!1),[_,b]=(0,a.useState)(!1),[A,N]=(0,a.useState)(null),[w,S]=(0,a.useState)(""),[C,I]=(0,a.useState)([]),[E,V]=(0,a.useState)(null),[D,L]=(0,a.useState)(!1),[O,z]=(0,a.useState)(!1),P=async()=>{if(e)try{let t=await (0,g.vectorStoreListCall)(e);console.log("List vector stores response:",t),j(t.data||[])}catch(e){console.error("Error fetching vector stores:",e),F.Ay.fromBackend("Error fetching vector stores: "+e)}},T=async()=>{if(e)try{let t=await (0,g.credentialListCall)(e);console.log("List credentials response:",t),I(t.credentials||[])}catch(e){console.error("Error fetching credentials:",e),F.Ay.fromBackend("Error fetching credentials: "+e)}},q=async e=>{N(e),b(!0)},B=async()=>{if(e&&A){z(!0);try{await (0,g.vectorStoreDeleteCall)(e,A),F.Ay.success("Vector store deleted successfully"),P()}catch(e){console.error("Error deleting vector store:",e),F.Ay.fromBackend("Error deleting vector store: "+e)}finally{z(!1),b(!1),N(null)}}};return(0,a.useEffect)(()=>{P(),T()},[e]),E?(0,l.jsx)("div",{className:"w-full h-full",children:(0,l.jsx)(en,{vectorStoreId:E,onClose:()=>{V(null),L(!1),P()},accessToken:e,is_admin:(0,eN.OY)(r||""),editVectorStore:D})}):(0,l.jsx)("div",{className:"w-full mx-4 h-[75vh]",children:(0,l.jsxs)("div",{className:"gap-2 p-8 h-[75vh] w-full mt-2",children:[(0,l.jsxs)("div",{className:"flex justify-between mt-2 w-full items-center mb-4",children:[(0,l.jsx)("h1",{children:"Vector Store Management"}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[w&&(0,l.jsxs)(p.A,{children:["Last Refreshed: ",w]}),(0,l.jsx)(c.A,{icon:v.A,variant:"shadow",size:"xs",className:"self-center cursor-pointer",onClick:()=>{P(),T(),S(new Date().toLocaleString())}})]})]}),(0,l.jsx)(p.A,{className:"mb-4",children:(0,l.jsx)("p",{children:"You can use vector stores to store and retrieve LLM embeddings."})}),(0,l.jsxs)(m.A,{children:[(0,l.jsxs)(x.A,{className:"mb-6",children:[(0,l.jsx)(d.A,{children:"Create Vector Store"}),(0,l.jsx)(d.A,{children:"Manage Vector Stores"}),(0,l.jsx)(d.A,{children:"Test Vector Store"})]}),(0,l.jsxs)(u.A,{children:[(0,l.jsx)(h.A,{children:(0,l.jsx)(ef,{accessToken:e,onSuccess:e=>{console.log("Vector store created:",e),P()}})}),(0,l.jsxs)(h.A,{children:[(0,l.jsx)(o.A,{className:"mb-4",onClick:()=>f(!0),children:"+ Add Vector Store"}),(0,l.jsx)(n.A,{numItems:1,className:"gap-2 pt-2 pb-2 w-full mt-2",children:(0,l.jsx)(i.A,{numColSpan:1,children:(0,l.jsx)(k,{data:s,onView:e=>{V(e),L(!1)},onEdit:e=>{V(e),L(!0)},onDelete:q})})})]}),(0,l.jsx)(h.A,{children:(0,l.jsx)(eA,{accessToken:e,vectorStores:s})})]})]}),(0,l.jsx)(M,{isVisible:y,onCancel:()=>f(!1),onSuccess:()=>{f(!1),P()},accessToken:e,credentials:C}),(0,l.jsx)(Y.A,{isOpen:_,title:"Delete Vector Store",message:"Are you sure you want to delete this vector store? This action cannot be undone.",resourceInformationTitle:"Vector Store Information",resourceInformation:[{label:"Vector Store ID",value:A,code:!0}],onCancel:()=>b(!1),onOk:B,confirmLoading:O})]})})}}}]);