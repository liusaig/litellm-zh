(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,233525,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"warnOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},349356,e=>{e.v({AElig:"Æ",AMP:"&",Aacute:"Á",Acirc:"Â",Agrave:"À",Aring:"Å",Atilde:"Ã",Auml:"Ä",COPY:"©",Ccedil:"Ç",ETH:"Ð",Eacute:"É",Ecirc:"Ê",Egrave:"È",Euml:"Ë",GT:">",Iacute:"Í",Icirc:"Î",Igrave:"Ì",Iuml:"Ï",LT:"<",Ntilde:"Ñ",Oacute:"Ó",Ocirc:"Ô",Ograve:"Ò",Oslash:"Ø",Otilde:"Õ",Ouml:"Ö",QUOT:'"',REG:"®",THORN:"Þ",Uacute:"Ú",Ucirc:"Û",Ugrave:"Ù",Uuml:"Ü",Yacute:"Ý",aacute:"á",acirc:"â",acute:"´",aelig:"æ",agrave:"à",amp:"&",aring:"å",atilde:"ã",auml:"ä",brvbar:"¦",ccedil:"ç",cedil:"¸",cent:"¢",copy:"©",curren:"¤",deg:"°",divide:"÷",eacute:"é",ecirc:"ê",egrave:"è",eth:"ð",euml:"ë",frac12:"½",frac14:"¼",frac34:"¾",gt:">",iacute:"í",icirc:"î",iexcl:"¡",igrave:"ì",iquest:"¿",iuml:"ï",laquo:"«",lt:"<",macr:"¯",micro:"µ",middot:"·",nbsp:" ",not:"¬",ntilde:"ñ",oacute:"ó",ocirc:"ô",ograve:"ò",ordf:"ª",ordm:"º",oslash:"ø",otilde:"õ",ouml:"ö",para:"¶",plusmn:"±",pound:"£",quot:'"',raquo:"»",reg:"®",sect:"§",shy:"­",sup1:"¹",sup2:"²",sup3:"³",szlig:"ß",thorn:"þ",times:"×",uacute:"ú",ucirc:"û",ugrave:"ù",uml:"¨",uuml:"ü",yacute:"ý",yen:"¥",yuml:"ÿ"})},137429,e=>{e.v({0:"�",128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"})},954616,e=>{"use strict";var t=e.i(271645),a=e.i(114272),s=e.i(540143),l=e.i(915823),r=e.i(619273),i=class extends l.Subscribable{#e;#t=void 0;#a;#s;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#l()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,r.shallowEqualObjects)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#a,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,r.hashKey)(t.mutationKey)!==(0,r.hashKey)(this.options.mutationKey)?this.reset():this.#a?.state.status==="pending"&&this.#a.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#a?.removeObserver(this)}onMutationUpdate(e){this.#l(),this.#r(e)}getCurrentResult(){return this.#t}reset(){this.#a?.removeObserver(this),this.#a=void 0,this.#l(),this.#r()}mutate(e,t){return this.#s=t,this.#a?.removeObserver(this),this.#a=this.#e.getMutationCache().build(this.#e,this.options),this.#a.addObserver(this),this.#a.execute(e)}#l(){let e=this.#a?.state??(0,a.getDefaultState)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#r(e){s.notifyManager.batch(()=>{if(this.#s&&this.hasListeners()){let t=this.#t.variables,a=this.#t.context,s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(e?.type==="success"){try{this.#s.onSuccess?.(e.data,t,a,s)}catch(e){Promise.reject(e)}try{this.#s.onSettled?.(e.data,null,t,a,s)}catch(e){Promise.reject(e)}}else if(e?.type==="error"){try{this.#s.onError?.(e.error,t,a,s)}catch(e){Promise.reject(e)}try{this.#s.onSettled?.(void 0,e.error,t,a,s)}catch(e){Promise.reject(e)}}}this.listeners.forEach(e=>{e(this.#t)})})}},n=e.i(912598);function o(e,a){let l=(0,n.useQueryClient)(a),[o]=t.useState(()=>new i(l,e));t.useEffect(()=>{o.setOptions(e)},[o,e]);let c=t.useSyncExternalStore(t.useCallback(e=>o.subscribe(s.notifyManager.batchCalls(e)),[o]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),d=t.useCallback((e,t)=>{o.mutate(e,t).catch(r.noop)},[o]);if(c.error&&(0,r.shouldThrowError)(o.options.throwOnError,[c.error]))throw c.error;return{...c,mutate:d,mutateAsync:c.mutate}}e.s(["useMutation",()=>o],954616)},992571,e=>{"use strict";var t=e.i(619273);function a(e){return{onFetch:(a,r)=>{let i=a.options,n=a.fetchOptions?.meta?.fetchMore?.direction,o=a.state.data?.pages||[],c=a.state.data?.pageParams||[],d={pages:[],pageParams:[]},u=0,m=async()=>{let r=!1,m=(0,t.ensureQueryFn)(a.options,a.fetchOptions),h=async(e,s,l)=>{let i;if(r)return Promise.reject();if(null==s&&e.pages.length)return Promise.resolve(e);let n=(i={client:a.client,queryKey:a.queryKey,pageParam:s,direction:l?"backward":"forward",meta:a.options.meta},(0,t.addConsumeAwareSignal)(i,()=>a.signal,()=>r=!0),i),o=await m(n),{maxPages:c}=a.options,d=l?t.addToStart:t.addToEnd;return{pages:d(e.pages,o,c),pageParams:d(e.pageParams,s,c)}};if(n&&o.length){let e="backward"===n,t={pages:o,pageParams:c},a=(e?l:s)(i,t);d=await h(t,a,e)}else{let t=e??o.length;do{let e=0===u?c[0]??i.initialPageParam:s(i,d);if(u>0&&null==e)break;d=await h(d,e),u++}while(u<t)}return d};a.options.persister?a.fetchFn=()=>a.options.persister?.(m,{client:a.client,queryKey:a.queryKey,meta:a.options.meta,signal:a.signal},r):a.fetchFn=m}}}function s(e,{pages:t,pageParams:a}){let s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,a[s],a):void 0}function l(e,{pages:t,pageParams:a}){return t.length>0?e.getPreviousPageParam?.(t[0],t,a[0],a):void 0}function r(e,t){return!!t&&null!=s(e,t)}function i(e,t){return!!t&&!!e.getPreviousPageParam&&null!=l(e,t)}e.s(["hasNextPage",()=>r,"hasPreviousPage",()=>i,"infiniteQueryBehavior",()=>a])},114272,e=>{"use strict";var t=e.i(540143),a=e.i(88587),s=e.i(936553),l=class extends a.Removable{#e;#i;#n;#o;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#i=[],this.state=e.state||r(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#i.includes(e)||(this.#i.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#i=this.#i.filter(t=>t!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#i.length||("pending"===this.state.status?this.scheduleGc():this.#n.remove(this))}continue(){return this.#o?.continue()??this.execute(this.state.variables)}async execute(e){let t=()=>{this.#c({type:"continue"})},a={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#o=(0,s.createRetryer)({fn:()=>this.options.mutationFn?this.options.mutationFn(e,a):Promise.reject(Error("No mutationFn found")),onFail:(e,t)=>{this.#c({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#c({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});let l="pending"===this.state.status,r=!this.#o.canStart();try{if(l)t();else{this.#c({type:"pending",variables:e,isPaused:r}),this.#n.config.onMutate&&await this.#n.config.onMutate(e,this,a);let t=await this.options.onMutate?.(e,a);t!==this.state.context&&this.#c({type:"pending",context:t,variables:e,isPaused:r})}let s=await this.#o.start();return await this.#n.config.onSuccess?.(s,e,this.state.context,this,a),await this.options.onSuccess?.(s,e,this.state.context,a),await this.#n.config.onSettled?.(s,null,this.state.variables,this.state.context,this,a),await this.options.onSettled?.(s,null,e,this.state.context,a),this.#c({type:"success",data:s}),s}catch(t){try{await this.#n.config.onError?.(t,e,this.state.context,this,a)}catch(e){Promise.reject(e)}try{await this.options.onError?.(t,e,this.state.context,a)}catch(e){Promise.reject(e)}try{await this.#n.config.onSettled?.(void 0,t,this.state.variables,this.state.context,this,a)}catch(e){Promise.reject(e)}try{await this.options.onSettled?.(void 0,t,e,this.state.context,a)}catch(e){Promise.reject(e)}throw this.#c({type:"error",error:t}),t}finally{this.#n.runNext(this)}}#c(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),t.notifyManager.batch(()=>{this.#i.forEach(t=>{t.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function r(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}e.s(["Mutation",()=>l,"getDefaultState",()=>r])},317751,e=>{"use strict";var t=e.i(619273),a=e.i(286491),s=e.i(540143),l=e.i(915823),r=class extends l.Subscribable{constructor(e={}){super(),this.config=e,this.#d=new Map}#d;build(e,s,l){let r=s.queryKey,i=s.queryHash??(0,t.hashQueryKeyByOptions)(r,s),n=this.get(i);return n||(n=new a.Query({client:e,queryKey:r,queryHash:i,options:e.defaultQueryOptions(s),state:l,defaultOptions:e.getQueryDefaults(r)}),this.add(n)),n}add(e){this.#d.has(e.queryHash)||(this.#d.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){let t=this.#d.get(e.queryHash);t&&(e.destroy(),t===e&&this.#d.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){s.notifyManager.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#d.get(e)}getAll(){return[...this.#d.values()]}find(e){let a={exact:!0,...e};return this.getAll().find(e=>(0,t.matchQuery)(a,e))}findAll(e={}){let a=this.getAll();return Object.keys(e).length>0?a.filter(a=>(0,t.matchQuery)(e,a)):a}notify(e){s.notifyManager.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){s.notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){s.notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},i=e.i(114272),n=l,o=class extends n.Subscribable{constructor(e={}){super(),this.config=e,this.#u=new Set,this.#m=new Map,this.#h=0}#u;#m;#h;build(e,t,a){let s=new i.Mutation({client:e,mutationCache:this,mutationId:++this.#h,options:e.defaultMutationOptions(t),state:a});return this.add(s),s}add(e){this.#u.add(e);let t=c(e);if("string"==typeof t){let a=this.#m.get(t);a?a.push(e):this.#m.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#u.delete(e)){let t=c(e);if("string"==typeof t){let a=this.#m.get(t);if(a)if(a.length>1){let t=a.indexOf(e);-1!==t&&a.splice(t,1)}else a[0]===e&&this.#m.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){let t=c(e);if("string"!=typeof t)return!0;{let a=this.#m.get(t),s=a?.find(e=>"pending"===e.state.status);return!s||s===e}}runNext(e){let t=c(e);if("string"!=typeof t)return Promise.resolve();{let a=this.#m.get(t)?.find(t=>t!==e&&t.state.isPaused);return a?.continue()??Promise.resolve()}}clear(){s.notifyManager.batch(()=>{this.#u.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#u.clear(),this.#m.clear()})}getAll(){return Array.from(this.#u)}find(e){let a={exact:!0,...e};return this.getAll().find(e=>(0,t.matchMutation)(a,e))}findAll(e={}){return this.getAll().filter(a=>(0,t.matchMutation)(e,a))}notify(e){s.notifyManager.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){let e=this.getAll().filter(e=>e.state.isPaused);return s.notifyManager.batch(()=>Promise.all(e.map(e=>e.continue().catch(t.noop))))}};function c(e){return e.options.scope?.id}var d=e.i(175555),u=e.i(814448),m=e.i(992571),h=class{#g;#n;#x;#p;#f;#y;#b;#j;constructor(e={}){this.#g=e.queryCache||new r,this.#n=e.mutationCache||new o,this.#x=e.defaultOptions||{},this.#p=new Map,this.#f=new Map,this.#y=0}mount(){this.#y++,1===this.#y&&(this.#b=d.focusManager.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#g.onFocus())}),this.#j=u.onlineManager.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#g.onOnline())}))}unmount(){this.#y--,0===this.#y&&(this.#b?.(),this.#b=void 0,this.#j?.(),this.#j=void 0)}isFetching(e){return this.#g.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#n.findAll({...e,status:"pending"}).length}getQueryData(e){let t=this.defaultQueryOptions({queryKey:e});return this.#g.get(t.queryHash)?.state.data}ensureQueryData(e){let a=this.defaultQueryOptions(e),s=this.#g.build(this,a),l=s.state.data;return void 0===l?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime((0,t.resolveStaleTime)(a.staleTime,s))&&this.prefetchQuery(a),Promise.resolve(l))}getQueriesData(e){return this.#g.findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,a,s){let l=this.defaultQueryOptions({queryKey:e}),r=this.#g.get(l.queryHash),i=r?.state.data,n=(0,t.functionalUpdate)(a,i);if(void 0!==n)return this.#g.build(this,l).setData(n,{...s,manual:!0})}setQueriesData(e,t,a){return s.notifyManager.batch(()=>this.#g.findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,a)]))}getQueryState(e){let t=this.defaultQueryOptions({queryKey:e});return this.#g.get(t.queryHash)?.state}removeQueries(e){let t=this.#g;s.notifyManager.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){let a=this.#g;return s.notifyManager.batch(()=>(a.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,a={}){let l={revert:!0,...a};return Promise.all(s.notifyManager.batch(()=>this.#g.findAll(e).map(e=>e.cancel(l)))).then(t.noop).catch(t.noop)}invalidateQueries(e,t={}){return s.notifyManager.batch(()=>(this.#g.findAll(e).forEach(e=>{e.invalidate()}),e?.refetchType==="none")?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t))}refetchQueries(e,a={}){let l={...a,cancelRefetch:a.cancelRefetch??!0};return Promise.all(s.notifyManager.batch(()=>this.#g.findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let a=e.fetch(void 0,l);return l.throwOnError||(a=a.catch(t.noop)),"paused"===e.state.fetchStatus?Promise.resolve():a}))).then(t.noop)}fetchQuery(e){let a=this.defaultQueryOptions(e);void 0===a.retry&&(a.retry=!1);let s=this.#g.build(this,a);return s.isStaleByTime((0,t.resolveStaleTime)(a.staleTime,s))?s.fetch(a):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(t.noop).catch(t.noop)}fetchInfiniteQuery(e){return e.behavior=(0,m.infiniteQueryBehavior)(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(t.noop).catch(t.noop)}ensureInfiniteQueryData(e){return e.behavior=(0,m.infiniteQueryBehavior)(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return u.onlineManager.isOnline()?this.#n.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#g}getMutationCache(){return this.#n}getDefaultOptions(){return this.#x}setDefaultOptions(e){this.#x=e}setQueryDefaults(e,a){this.#p.set((0,t.hashKey)(e),{queryKey:e,defaultOptions:a})}getQueryDefaults(e){let a=[...this.#p.values()],s={};return a.forEach(a=>{(0,t.partialMatchKey)(e,a.queryKey)&&Object.assign(s,a.defaultOptions)}),s}setMutationDefaults(e,a){this.#f.set((0,t.hashKey)(e),{mutationKey:e,defaultOptions:a})}getMutationDefaults(e){let a=[...this.#f.values()],s={};return a.forEach(a=>{(0,t.partialMatchKey)(e,a.mutationKey)&&Object.assign(s,a.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;let a={...this.#x.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return a.queryHash||(a.queryHash=(0,t.hashQueryKeyByOptions)(a.queryKey,a)),void 0===a.refetchOnReconnect&&(a.refetchOnReconnect="always"!==a.networkMode),void 0===a.throwOnError&&(a.throwOnError=!!a.suspense),!a.networkMode&&a.persister&&(a.networkMode="offlineFirst"),a.queryFn===t.skipToken&&(a.enabled=!1),a}defaultMutationOptions(e){return e?._defaulted?e:{...this.#x.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#g.clear(),this.#n.clear()}};e.s(["QueryClient",()=>h],317751)},571303,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(115504);function l({className:e="",...l}){var r,i;let n=(0,a.useId)();return r=()=>{let e=document.getAnimations().filter(e=>e instanceof CSSAnimation&&"spin"===e.animationName),t=e.find(e=>e.effect.target?.getAttribute("data-spinner-id")===n),a=e.find(e=>e.effect instanceof KeyframeEffect&&e.effect.target?.getAttribute("data-spinner-id")!==n);t&&a&&(t.currentTime=a.currentTime)},i=[n],(0,a.useLayoutEffect)(r,i),(0,t.jsxs)("svg",{"data-spinner-id":n,className:(0,s.cx)("pointer-events-none size-12 animate-spin text-current",e),fill:"none",viewBox:"0 0 24 24",...l,children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}e.s(["UiLoadingSpinner",()=>l],571303)},936578,e=>{"use strict";var t=e.i(843476),a=e.i(115504),s=e.i(571303);function l(){return(0,t.jsxs)("div",{className:(0,a.cx)("h-screen","flex items-center justify-center gap-4"),children:[(0,t.jsxs)("div",{className:"text-lg font-medium py-2 pr-4 border-r border-r-gray-200 flex items-center gap-2",children:[(0,t.jsx)("img",{src:"https://cloud.siliconflow.cn/favicon.ico",alt:"Silinex Favicon",className:"w-5 h-5"}),(0,t.jsx)("span",{children:"Silinex"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,t.jsx)(s.UiLoadingSpinner,{className:"size-4"}),(0,t.jsx)("span",{className:"text-gray-600 text-sm",children:"Loading..."})]})]})}e.s(["default",()=>l])},546467,e=>{"use strict";let t=(0,e.i(475254).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["default",()=>t])},848725,e=>{"use strict";var t=e.i(271645);let a=t.forwardRef(function(e,a){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:a},e),t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"}))});e.s(["EyeIcon",0,a],848725)},149192,e=>{"use strict";var t=e.i(864517);e.s(["CloseOutlined",()=>t.default])},518617,e=>{"use strict";e.i(247167);var t=e.i(931067),a=e.i(271645);let s={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"};var l=e.i(9583),r=a.forwardRef(function(e,r){return a.createElement(l.default,(0,t.default)({},e,{ref:r,icon:s}))});e.s(["CloseCircleOutlined",0,r],518617)},208075,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(304967),l=e.i(629569),r=e.i(599724),i=e.i(779241),n=e.i(994388),o=e.i(275144),c=e.i(442733),d=e.i(764205),u=e.i(727749);e.s(["default",0,({userID:e,userRole:m,accessToken:h})=>{let{logoUrl:g,setLogoUrl:x,faviconUrl:p,setFaviconUrl:f}=(0,o.useTheme)(),[y,b]=(0,a.useState)(""),[j,v]=(0,a.useState)(""),[w,k]=(0,a.useState)(!1);(0,a.useEffect)(()=>{h&&_()},[h]);let _=async()=>{try{let e=(0,d.getProxyBaseUrl)(),t=e?`${e}/get/ui_theme_settings`:"/get/ui_theme_settings",a=await fetch(t,{method:"GET",headers:{[(0,d.getGlobalLitellmHeaderName)()]:`Bearer ${h}`,"Content-Type":"application/json"}});if(a.ok){let e=await a.json();b(e.values?.logo_url||""),v(e.values?.favicon_url||""),x(e.values?.logo_url||null),f(e.values?.favicon_url||null)}}catch(e){console.error("Error fetching theme settings:",e)}},N=async()=>{k(!0);try{let e=(0,d.getProxyBaseUrl)(),t=e?`${e}/update/ui_theme_settings`:"/update/ui_theme_settings";if((await fetch(t,{method:"PATCH",headers:{[(0,d.getGlobalLitellmHeaderName)()]:`Bearer ${h}`,"Content-Type":"application/json"},body:JSON.stringify({logo_url:y||null,favicon_url:j||null})})).ok)u.default.success("Theme settings updated successfully!"),x(y||null),f(j||null);else throw Error("Failed to update settings")}catch(e){console.error("Error updating theme settings:",e),u.default.fromBackend("Failed to update theme settings")}finally{k(!1)}},C=async()=>{b(""),v(""),x(null),f(null),k(!0);try{let e=(0,d.getProxyBaseUrl)(),t=e?`${e}/update/ui_theme_settings`:"/update/ui_theme_settings";if((await fetch(t,{method:"PATCH",headers:{[(0,d.getGlobalLitellmHeaderName)()]:`Bearer ${h}`,"Content-Type":"application/json"},body:JSON.stringify({logo_url:null,favicon_url:null})})).ok)u.default.success("Theme settings reset to default!");else throw Error("Failed to reset")}catch(e){console.error("Error resetting theme settings:",e),u.default.fromBackend("Failed to reset theme settings")}finally{k(!1)}};return h?(0,t.jsxs)("div",{className:"w-full mx-auto max-w-4xl px-6 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)(l.Title,{className:"text-2xl font-bold mb-2",children:"UI Theme Customization"}),(0,t.jsx)(r.Text,{className:"text-gray-600",children:"Customize your Silinex admin dashboard with a custom logo and favicon."})]}),(0,t.jsx)(s.Card,{className:"shadow-sm p-6",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(r.Text,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Custom Logo URL"}),(0,t.jsx)(i.TextInput,{placeholder:`https://example.com/logo.svg (default: ${c.DEFAULT_BRAND_LOGO_URL})`,value:y,onValueChange:e=>{b(e),x(e||null)},className:"w-full"}),(0,t.jsx)(r.Text,{className:"text-xs text-gray-500 mt-1",children:"Enter a URL for your custom logo or leave empty for default"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(r.Text,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Custom Favicon URL"}),(0,t.jsx)(i.TextInput,{placeholder:"https://example.com/favicon.ico",value:j,onValueChange:e=>{v(e),f(e||null)},className:"w-full"}),(0,t.jsx)(r.Text,{className:"text-xs text-gray-500 mt-1",children:"Enter a URL for your custom favicon (.ico, .png, or .svg) or leave empty for default"})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)(n.Button,{onClick:N,loading:w,disabled:w,color:"indigo",children:"Save Changes"}),(0,t.jsx)(n.Button,{onClick:C,loading:w,disabled:w,variant:"secondary",color:"gray",children:"Reset to Default"})]})]})})]}):null}])},662316,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(464571),l=e.i(166406),r=e.i(629569),i=e.i(764205),n=e.i(727749);e.s(["default",0,({accessToken:e})=>{let[o,c]=(0,a.useState)(`{
  "model": "openai/gpt-4o",
  "messages": [
    {
      "role": "system",
      "content": "You are a helpful assistant."
    },
    {
      "role": "user",
      "content": "Explain quantum computing in simple terms"
    }
  ],
  "temperature": 0.7,
  "max_tokens": 500,
  "stream": true
}`),[d,u]=(0,a.useState)(""),[m,h]=(0,a.useState)(!1),g=async()=>{h(!0);try{let l;try{l=JSON.parse(o)}catch(e){n.default.fromBackend("Invalid JSON in request body"),h(!1);return}let r={call_type:"completion",request_body:l};if(!e){n.default.fromBackend("No access token found"),h(!1);return}let c=await (0,i.transformRequestCall)(e,r);if(c.raw_request_api_base&&c.raw_request_body){var t,a,s;let e,l,r=(t=c.raw_request_api_base,a=c.raw_request_body,s=c.raw_request_headers||{},e=JSON.stringify(a,null,2).split("\n").map(e=>`  ${e}`).join("\n"),l=Object.entries(s).map(([e,t])=>`-H '${e}: ${t}'`).join(" \\\n  "),`curl -X POST \\
  ${t} \\
  ${l?`${l} \\
  `:""}-H 'Content-Type: application/json' \\
  -d '{
${e}
  }'`);u(r),n.default.success("Request transformed successfully")}else{let e="string"==typeof c?c:JSON.stringify(c);u(e),n.default.info("Transformed request received in unexpected format")}}catch(e){console.error("Error transforming request:",e),n.default.fromBackend("Failed to transform request")}finally{h(!1)}};return(0,t.jsxs)("div",{className:"w-full m-2",style:{overflow:"hidden"},children:[(0,t.jsx)(r.Title,{children:"Playground"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"See how Silinex transforms your request for the specified provider."}),(0,t.jsxs)("div",{style:{display:"flex",gap:"16px",width:"100%",minWidth:0,overflow:"hidden"},className:"mt-4",children:[(0,t.jsxs)("div",{style:{flex:"1 1 50%",display:"flex",flexDirection:"column",border:"1px solid #e8e8e8",borderRadius:"8px",padding:"24px",overflow:"hidden",maxHeight:"600px",minWidth:0},children:[(0,t.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,t.jsx)("h2",{style:{fontSize:"24px",fontWeight:"bold",margin:"0 0 4px 0"},children:"Original Request"}),(0,t.jsx)("p",{style:{color:"#666",margin:0},children:"The request you would send to Silinex /chat/completions endpoint."})]}),(0,t.jsx)("textarea",{style:{flex:"1 1 auto",width:"100%",minHeight:"240px",padding:"16px",border:"1px solid #e8e8e8",borderRadius:"6px",fontFamily:"monospace",fontSize:"14px",resize:"none",marginBottom:"24px",overflow:"auto"},value:o,onChange:e=>c(e.target.value),onKeyDown:e=>{(e.metaKey||e.ctrlKey)&&"Enter"===e.key&&(e.preventDefault(),g())},placeholder:"Press Cmd/Ctrl + Enter to transform"}),(0,t.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"auto"},children:(0,t.jsxs)(s.Button,{type:"primary",style:{backgroundColor:"#000",display:"flex",alignItems:"center",gap:"8px"},onClick:g,loading:m,children:[(0,t.jsx)("span",{children:"Transform"}),(0,t.jsx)("span",{children:"→"})]})})]}),(0,t.jsxs)("div",{style:{flex:"1 1 50%",display:"flex",flexDirection:"column",border:"1px solid #e8e8e8",borderRadius:"8px",padding:"24px",overflow:"hidden",maxHeight:"800px",minWidth:0},children:[(0,t.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,t.jsx)("h2",{style:{fontSize:"24px",fontWeight:"bold",margin:"0 0 4px 0"},children:"Transformed Request"}),(0,t.jsx)("p",{style:{color:"#666",margin:0},children:"How Silinex transforms your request for the specified provider."}),(0,t.jsx)("br",{}),(0,t.jsx)("p",{style:{color:"#666",margin:0},className:"text-xs",children:"Note: Sensitive headers are not shown."})]}),(0,t.jsxs)("div",{style:{position:"relative",backgroundColor:"#f5f5f5",borderRadius:"6px",flex:"1 1 auto",display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,t.jsx)("pre",{style:{padding:"16px",fontFamily:"monospace",fontSize:"14px",margin:0,overflow:"auto",flex:"1 1 auto"},children:d||`curl -X POST \\
  https://api.openai.com/v1/chat/completions \\
  -H 'Authorization: Bearer sk-xxx' \\
  -H 'Content-Type: application/json' \\
  -d '{
  "model": "gpt-4",
  "messages": [
    {
      "role": "system",
      "content": "You are a helpful assistant."
    }
  ],
  "temperature": 0.7
  }'`}),(0,t.jsx)(s.Button,{type:"text",icon:(0,t.jsx)(l.CopyOutlined,{}),style:{position:"absolute",right:"8px",top:"8px"},size:"small",onClick:()=>{navigator.clipboard.writeText(d||""),n.default.success("Copied to clipboard")}})]})]})]}),(0,t.jsx)("div",{className:"mt-4 text-right w-full",children:(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Found an error? File an issue"," ",(0,t.jsx)("a",{href:"https://github.com/BerriAI/litellm/issues",target:"_blank",rel:"noopener noreferrer",children:"here"}),"."]})})]})}])},794357,673709,778917,e=>{"use strict";var t=e.i(843476),a=e.i(599724),s=e.i(197647),l=e.i(653824),r=e.i(881073),i=e.i(404206),n=e.i(723731),o=e.i(350967),c=e.i(271645),d=e.i(678784);let u=(0,e.i(475254).default)("clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);var m=e.i(650056);let h={'code[class*="language-"]':{background:"hsl(230, 1%, 98%)",color:"hsl(230, 8%, 24%)",fontFamily:'"Fira Code", "Fira Mono", Menlo, Consolas, "DejaVu Sans Mono", monospace',direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",lineHeight:"1.5",MozTabSize:"2",OTabSize:"2",tabSize:"2",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none"},'pre[class*="language-"]':{background:"hsl(230, 1%, 98%)",color:"hsl(230, 8%, 24%)",fontFamily:'"Fira Code", "Fira Mono", Menlo, Consolas, "DejaVu Sans Mono", monospace',direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",lineHeight:"1.5",MozTabSize:"2",OTabSize:"2",tabSize:"2",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",padding:"1em",margin:"0.5em 0",overflow:"auto",borderRadius:"0.3em"},'code[class*="language-"]::-moz-selection':{background:"hsl(230, 1%, 90%)",color:"inherit"},'code[class*="language-"] *::-moz-selection':{background:"hsl(230, 1%, 90%)",color:"inherit"},'pre[class*="language-"] *::-moz-selection':{background:"hsl(230, 1%, 90%)",color:"inherit"},'code[class*="language-"]::selection':{background:"hsl(230, 1%, 90%)",color:"inherit"},'code[class*="language-"] *::selection':{background:"hsl(230, 1%, 90%)",color:"inherit"},'pre[class*="language-"] *::selection':{background:"hsl(230, 1%, 90%)",color:"inherit"},':not(pre) > code[class*="language-"]':{padding:"0.2em 0.3em",borderRadius:"0.3em",whiteSpace:"normal"},comment:{color:"hsl(230, 4%, 64%)",fontStyle:"italic"},prolog:{color:"hsl(230, 4%, 64%)"},cdata:{color:"hsl(230, 4%, 64%)"},doctype:{color:"hsl(230, 8%, 24%)"},punctuation:{color:"hsl(230, 8%, 24%)"},entity:{color:"hsl(230, 8%, 24%)",cursor:"help"},"attr-name":{color:"hsl(35, 99%, 36%)"},"class-name":{color:"hsl(35, 99%, 36%)"},boolean:{color:"hsl(35, 99%, 36%)"},constant:{color:"hsl(35, 99%, 36%)"},number:{color:"hsl(35, 99%, 36%)"},atrule:{color:"hsl(35, 99%, 36%)"},keyword:{color:"hsl(301, 63%, 40%)"},property:{color:"hsl(5, 74%, 59%)"},tag:{color:"hsl(5, 74%, 59%)"},symbol:{color:"hsl(5, 74%, 59%)"},deleted:{color:"hsl(5, 74%, 59%)"},important:{color:"hsl(5, 74%, 59%)"},selector:{color:"hsl(119, 34%, 47%)"},string:{color:"hsl(119, 34%, 47%)"},char:{color:"hsl(119, 34%, 47%)"},builtin:{color:"hsl(119, 34%, 47%)"},inserted:{color:"hsl(119, 34%, 47%)"},regex:{color:"hsl(119, 34%, 47%)"},"attr-value":{color:"hsl(119, 34%, 47%)"},"attr-value > .token.punctuation":{color:"hsl(119, 34%, 47%)"},variable:{color:"hsl(221, 87%, 60%)"},operator:{color:"hsl(221, 87%, 60%)"},function:{color:"hsl(221, 87%, 60%)"},url:{color:"hsl(198, 99%, 37%)"},"attr-value > .token.punctuation.attr-equals":{color:"hsl(230, 8%, 24%)"},"special-attr > .token.attr-value > .token.value.css":{color:"hsl(230, 8%, 24%)"},".language-css .token.selector":{color:"hsl(5, 74%, 59%)"},".language-css .token.property":{color:"hsl(230, 8%, 24%)"},".language-css .token.function":{color:"hsl(198, 99%, 37%)"},".language-css .token.url > .token.function":{color:"hsl(198, 99%, 37%)"},".language-css .token.url > .token.string.url":{color:"hsl(119, 34%, 47%)"},".language-css .token.important":{color:"hsl(301, 63%, 40%)"},".language-css .token.atrule .token.rule":{color:"hsl(301, 63%, 40%)"},".language-javascript .token.operator":{color:"hsl(301, 63%, 40%)"},".language-javascript .token.template-string > .token.interpolation > .token.interpolation-punctuation.punctuation":{color:"hsl(344, 84%, 43%)"},".language-json .token.operator":{color:"hsl(230, 8%, 24%)"},".language-json .token.null.keyword":{color:"hsl(35, 99%, 36%)"},".language-markdown .token.url":{color:"hsl(230, 8%, 24%)"},".language-markdown .token.url > .token.operator":{color:"hsl(230, 8%, 24%)"},".language-markdown .token.url-reference.url > .token.string":{color:"hsl(230, 8%, 24%)"},".language-markdown .token.url > .token.content":{color:"hsl(221, 87%, 60%)"},".language-markdown .token.url > .token.url":{color:"hsl(198, 99%, 37%)"},".language-markdown .token.url-reference.url":{color:"hsl(198, 99%, 37%)"},".language-markdown .token.blockquote.punctuation":{color:"hsl(230, 4%, 64%)",fontStyle:"italic"},".language-markdown .token.hr.punctuation":{color:"hsl(230, 4%, 64%)",fontStyle:"italic"},".language-markdown .token.code-snippet":{color:"hsl(119, 34%, 47%)"},".language-markdown .token.bold .token.content":{color:"hsl(35, 99%, 36%)"},".language-markdown .token.italic .token.content":{color:"hsl(301, 63%, 40%)"},".language-markdown .token.strike .token.content":{color:"hsl(5, 74%, 59%)"},".language-markdown .token.strike .token.punctuation":{color:"hsl(5, 74%, 59%)"},".language-markdown .token.list.punctuation":{color:"hsl(5, 74%, 59%)"},".language-markdown .token.title.important > .token.punctuation":{color:"hsl(5, 74%, 59%)"},bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},namespace:{Opacity:"0.8"},"token.tab:not(:empty):before":{color:"hsla(230, 8%, 24%, 0.2)"},"token.cr:before":{color:"hsla(230, 8%, 24%, 0.2)"},"token.lf:before":{color:"hsla(230, 8%, 24%, 0.2)"},"token.space:before":{color:"hsla(230, 8%, 24%, 0.2)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item":{marginRight:"0.4em"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > button":{background:"hsl(230, 1%, 90%)",color:"hsl(230, 6%, 44%)",padding:"0.1em 0.4em",borderRadius:"0.3em"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > a":{background:"hsl(230, 1%, 90%)",color:"hsl(230, 6%, 44%)",padding:"0.1em 0.4em",borderRadius:"0.3em"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > span":{background:"hsl(230, 1%, 90%)",color:"hsl(230, 6%, 44%)",padding:"0.1em 0.4em",borderRadius:"0.3em"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > button:hover":{background:"hsl(230, 1%, 78%)",color:"hsl(230, 8%, 24%)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > button:focus":{background:"hsl(230, 1%, 78%)",color:"hsl(230, 8%, 24%)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > a:hover":{background:"hsl(230, 1%, 78%)",color:"hsl(230, 8%, 24%)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > a:focus":{background:"hsl(230, 1%, 78%)",color:"hsl(230, 8%, 24%)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > span:hover":{background:"hsl(230, 1%, 78%)",color:"hsl(230, 8%, 24%)"},"div.code-toolbar > .toolbar.toolbar > .toolbar-item > span:focus":{background:"hsl(230, 1%, 78%)",color:"hsl(230, 8%, 24%)"},".line-highlight.line-highlight":{background:"hsla(230, 8%, 24%, 0.05)"},".line-highlight.line-highlight:before":{background:"hsl(230, 1%, 90%)",color:"hsl(230, 8%, 24%)",padding:"0.1em 0.6em",borderRadius:"0.3em",boxShadow:"0 2px 0 0 rgba(0, 0, 0, 0.2)"},".line-highlight.line-highlight[data-end]:after":{background:"hsl(230, 1%, 90%)",color:"hsl(230, 8%, 24%)",padding:"0.1em 0.6em",borderRadius:"0.3em",boxShadow:"0 2px 0 0 rgba(0, 0, 0, 0.2)"},"pre[id].linkable-line-numbers.linkable-line-numbers span.line-numbers-rows > span:hover:before":{backgroundColor:"hsla(230, 8%, 24%, 0.05)"},".line-numbers.line-numbers .line-numbers-rows":{borderRightColor:"hsla(230, 8%, 24%, 0.2)"},".command-line .command-line-prompt":{borderRightColor:"hsla(230, 8%, 24%, 0.2)"},".line-numbers .line-numbers-rows > span:before":{color:"hsl(230, 1%, 62%)"},".command-line .command-line-prompt > span:before":{color:"hsl(230, 1%, 62%)"},".rainbow-braces .token.token.punctuation.brace-level-1":{color:"hsl(5, 74%, 59%)"},".rainbow-braces .token.token.punctuation.brace-level-5":{color:"hsl(5, 74%, 59%)"},".rainbow-braces .token.token.punctuation.brace-level-9":{color:"hsl(5, 74%, 59%)"},".rainbow-braces .token.token.punctuation.brace-level-2":{color:"hsl(119, 34%, 47%)"},".rainbow-braces .token.token.punctuation.brace-level-6":{color:"hsl(119, 34%, 47%)"},".rainbow-braces .token.token.punctuation.brace-level-10":{color:"hsl(119, 34%, 47%)"},".rainbow-braces .token.token.punctuation.brace-level-3":{color:"hsl(221, 87%, 60%)"},".rainbow-braces .token.token.punctuation.brace-level-7":{color:"hsl(221, 87%, 60%)"},".rainbow-braces .token.token.punctuation.brace-level-11":{color:"hsl(221, 87%, 60%)"},".rainbow-braces .token.token.punctuation.brace-level-4":{color:"hsl(301, 63%, 40%)"},".rainbow-braces .token.token.punctuation.brace-level-8":{color:"hsl(301, 63%, 40%)"},".rainbow-braces .token.token.punctuation.brace-level-12":{color:"hsl(301, 63%, 40%)"},"pre.diff-highlight > code .token.token.deleted:not(.prefix)":{backgroundColor:"hsla(353, 100%, 66%, 0.15)"},"pre > code.diff-highlight .token.token.deleted:not(.prefix)":{backgroundColor:"hsla(353, 100%, 66%, 0.15)"},"pre.diff-highlight > code .token.token.deleted:not(.prefix)::-moz-selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre.diff-highlight > code .token.token.deleted:not(.prefix) *::-moz-selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre > code.diff-highlight .token.token.deleted:not(.prefix)::-moz-selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre > code.diff-highlight .token.token.deleted:not(.prefix) *::-moz-selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre.diff-highlight > code .token.token.deleted:not(.prefix)::selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre.diff-highlight > code .token.token.deleted:not(.prefix) *::selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre > code.diff-highlight .token.token.deleted:not(.prefix)::selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre > code.diff-highlight .token.token.deleted:not(.prefix) *::selection":{backgroundColor:"hsla(353, 95%, 66%, 0.25)"},"pre.diff-highlight > code .token.token.inserted:not(.prefix)":{backgroundColor:"hsla(137, 100%, 55%, 0.15)"},"pre > code.diff-highlight .token.token.inserted:not(.prefix)":{backgroundColor:"hsla(137, 100%, 55%, 0.15)"},"pre.diff-highlight > code .token.token.inserted:not(.prefix)::-moz-selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre.diff-highlight > code .token.token.inserted:not(.prefix) *::-moz-selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre > code.diff-highlight .token.token.inserted:not(.prefix)::-moz-selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre > code.diff-highlight .token.token.inserted:not(.prefix) *::-moz-selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre.diff-highlight > code .token.token.inserted:not(.prefix)::selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre.diff-highlight > code .token.token.inserted:not(.prefix) *::selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre > code.diff-highlight .token.token.inserted:not(.prefix)::selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},"pre > code.diff-highlight .token.token.inserted:not(.prefix) *::selection":{backgroundColor:"hsla(135, 73%, 55%, 0.25)"},".prism-previewer.prism-previewer:before":{borderColor:"hsl(0, 0, 95%)"},".prism-previewer-gradient.prism-previewer-gradient div":{borderColor:"hsl(0, 0, 95%)",borderRadius:"0.3em"},".prism-previewer-color.prism-previewer-color:before":{borderRadius:"0.3em"},".prism-previewer-easing.prism-previewer-easing:before":{borderRadius:"0.3em"},".prism-previewer.prism-previewer:after":{borderTopColor:"hsl(0, 0, 95%)"},".prism-previewer-flipped.prism-previewer-flipped.after":{borderBottomColor:"hsl(0, 0, 95%)"},".prism-previewer-angle.prism-previewer-angle:before":{background:"hsl(0, 0%, 100%)"},".prism-previewer-time.prism-previewer-time:before":{background:"hsl(0, 0%, 100%)"},".prism-previewer-easing.prism-previewer-easing":{background:"hsl(0, 0%, 100%)"},".prism-previewer-angle.prism-previewer-angle circle":{stroke:"hsl(230, 8%, 24%)",strokeOpacity:"1"},".prism-previewer-time.prism-previewer-time circle":{stroke:"hsl(230, 8%, 24%)",strokeOpacity:"1"},".prism-previewer-easing.prism-previewer-easing circle":{stroke:"hsl(230, 8%, 24%)",fill:"transparent"},".prism-previewer-easing.prism-previewer-easing path":{stroke:"hsl(230, 8%, 24%)"},".prism-previewer-easing.prism-previewer-easing line":{stroke:"hsl(230, 8%, 24%)"}},g=({code:e,language:a})=>{let[s,l]=(0,c.useState)(!1);return(0,t.jsxs)("div",{className:"relative rounded-lg border border-gray-200 overflow-hidden",children:[(0,t.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(e),l(!0),setTimeout(()=>l(!1),2e3)},className:"absolute top-3 right-3 p-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-600 z-10","aria-label":"Copy code",children:s?(0,t.jsx)(d.CheckIcon,{size:16}):(0,t.jsx)(u,{size:16})}),(0,t.jsx)(m.Prism,{language:a,style:h,customStyle:{margin:0,padding:"1.5rem",borderRadius:"0.5rem",fontSize:"0.9rem",backgroundColor:"#fafafa"},showLineNumbers:!0,children:e})]})};e.s(["default",0,g],673709);var x=e.i(546467);e.s(["ExternalLink",()=>x.default],778917);var x=x;let p=({href:e,className:a})=>(0,t.jsxs)("a",{href:e,target:"_blank",rel:"noopener noreferrer",title:"Open documentation in a new tab",className:function(...e){return e.filter(Boolean).join(" ")}("inline-flex items-center gap-2 rounded-xl border border-zinc-200 bg-white/80 px-3.5 py-2 text-sm font-medium text-zinc-700 shadow-sm","hover:bg-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 active:translate-y-[0.5px]",a),children:[(0,t.jsx)("span",{children:"API Reference Docs"}),(0,t.jsx)(x.default,{"aria-hidden":!0,className:"h-4 w-4 opacity-80"}),(0,t.jsx)("span",{className:"sr-only",children:"(opens in a new tab)"})]});e.s(["default",0,({proxySettings:e})=>{let c="<your_proxy_base_url>",d=e?.LITELLM_UI_API_DOC_BASE_URL;return d&&d.trim()?c=d:e?.PROXY_BASE_URL&&(c=e.PROXY_BASE_URL),(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(o.Grid,{className:"gap-2 p-8 h-[80vh] w-full mt-2",children:(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("p",{className:"text-2xl text-tremor-content-strong dark:text-dark-tremor-content-strong font-semibold",children:"OpenAI Compatible Proxy: API Reference"}),(0,t.jsx)(p,{className:"ml-3 shrink-0",href:"https://docs.litellm.ai/docs/proxy/user_keys"})]}),(0,t.jsxs)(a.Text,{className:"mt-2 mb-2",children:["Silinex is OpenAI Compatible. This means your API Key works with the OpenAI SDK. Just replace the base_url to point to your silinex proxy. Example Below"," "]}),(0,t.jsxs)(l.TabGroup,{children:[(0,t.jsxs)(r.TabList,{children:[(0,t.jsx)(s.Tab,{children:"OpenAI Python SDK"}),(0,t.jsx)(s.Tab,{children:"LlamaIndex"}),(0,t.jsx)(s.Tab,{children:"Langchain Py"})]}),(0,t.jsxs)(n.TabPanels,{children:[(0,t.jsx)(i.TabPanel,{children:(0,t.jsx)(g,{language:"python",code:`import openai
client = openai.OpenAI(
    api_key="your_api_key",
    base_url="${c}" # Silinex Proxy is OpenAI compatible, Read More: https://docs.litellm.ai/docs/proxy/user_keys
)

response = client.chat.completions.create(
    model="gpt-3.5-turbo", # model to send to the proxy
    messages = [
        {
            "role": "user",
            "content": "this is a test request, write a short poem"
        }
    ]
)

print(response)`})}),(0,t.jsx)(i.TabPanel,{children:(0,t.jsx)(g,{language:"python",code:`import os, dotenv

from llama_index.llms import AzureOpenAI
from llama_index.embeddings import AzureOpenAIEmbedding
from llama_index import VectorStoreIndex, SimpleDirectoryReader, ServiceContext

llm = AzureOpenAI(
    engine="azure-gpt-3.5",               # model_name on silinex proxy
    temperature=0.0,
    azure_endpoint="${c}", # silinex proxy endpoint
    api_key="sk-1234",                    # silinex proxy API Key
    api_version="2023-07-01-preview",
)

embed_model = AzureOpenAIEmbedding(
    deployment_name="azure-embedding-model",
    azure_endpoint="${c}",
    api_key="sk-1234",
    api_version="2023-07-01-preview",
)

documents = SimpleDirectoryReader("llama_index_data").load_data()
service_context = ServiceContext.from_defaults(llm=llm, embed_model=embed_model)
index = VectorStoreIndex.from_documents(documents, service_context=service_context)

query_engine = index.as_query_engine()
response = query_engine.query("What did the author do growing up?")
print(response)`})}),(0,t.jsx)(i.TabPanel,{children:(0,t.jsx)(g,{language:"python",code:`from langchain.chat_models import ChatOpenAI
from langchain.prompts.chat import (
    ChatPromptTemplate,
    HumanMessagePromptTemplate,
    SystemMessagePromptTemplate,
)
from langchain.schema import HumanMessage, SystemMessage

chat = ChatOpenAI(
    openai_api_base="${c}",
    model = "gpt-3.5-turbo",
    temperature=0.1
)

messages = [
    SystemMessage(
        content="You are a helpful assistant that im using to make a test request to."
    ),
    HumanMessage(
        content="test from silinex. tell me why it's amazing in 1 sentence"
    ),
]
response = chat(messages)

print(response)`})})]})]})]})})})}],794357)},646050,e=>{"use strict";var t=e.i(843476),a=e.i(994388),s=e.i(304967),l=e.i(197647),r=e.i(653824),i=e.i(269200),n=e.i(942232),o=e.i(977572),c=e.i(427612),d=e.i(64848),u=e.i(496020),m=e.i(881073),h=e.i(404206),g=e.i(723731),x=e.i(599724),p=e.i(271645),f=e.i(650056),y=e.i(127952),b=e.i(902555),j=e.i(727749),v=e.i(764205),w=e.i(779241),k=e.i(677667),_=e.i(898667),N=e.i(130643),C=e.i(464571),S=e.i(212931),T=e.i(808613),I=e.i(28651),A=e.i(199133);let M=({isModalVisible:e,accessToken:a,setIsModalVisible:s,setBudgetList:l})=>{let[r]=T.Form.useForm(),i=async e=>{if(null!=a&&void 0!=a)try{j.default.info("Making API Call");let t=await (0,v.budgetCreateCall)(a,e);console.log("key create Response:",t),l(e=>e?[...e,t]:[t]),j.default.success("Budget Created"),r.resetFields()}catch(e){console.error("Error creating the key:",e),j.default.fromBackend(`Error creating the key: ${e}`)}};return(0,t.jsx)(S.Modal,{title:"Create Budget",open:e,width:800,footer:null,onOk:()=>{s(!1),r.resetFields()},onCancel:()=>{s(!1),r.resetFields()},children:(0,t.jsxs)(T.Form,{form:r,onFinish:i,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(T.Form.Item,{label:"Budget ID",name:"budget_id",rules:[{required:!0,message:"Please input a human-friendly name for the budget"}],help:"A human-friendly name for the budget",children:(0,t.jsx)(w.TextInput,{placeholder:""})}),(0,t.jsx)(T.Form.Item,{label:"Max Tokens per minute",name:"tpm_limit",help:"Default is model limit.",children:(0,t.jsx)(I.InputNumber,{step:1,precision:2,width:200})}),(0,t.jsx)(T.Form.Item,{label:"Max Requests per minute",name:"rpm_limit",help:"Default is model limit.",children:(0,t.jsx)(I.InputNumber,{step:1,precision:2,width:200})}),(0,t.jsxs)(k.Accordion,{className:"mt-20 mb-8",children:[(0,t.jsx)(_.AccordionHeader,{children:(0,t.jsx)("b",{children:"Optional Settings"})}),(0,t.jsxs)(N.AccordionBody,{children:[(0,t.jsx)(T.Form.Item,{label:"最大预算",name:"max_budget",children:(0,t.jsx)(I.InputNumber,{step:.01,precision:2,width:200})}),(0,t.jsx)(T.Form.Item,{className:"mt-8",label:"Reset Budget",name:"budget_duration",children:(0,t.jsxs)(A.Select,{defaultValue:null,placeholder:"n/a",children:[(0,t.jsx)(A.Select.Option,{value:"24h",children:"daily"}),(0,t.jsx)(A.Select.Option,{value:"7d",children:"weekly"}),(0,t.jsx)(A.Select.Option,{value:"30d",children:"monthly"})]})})]})]})]}),(0,t.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,t.jsx)(C.Button,{htmlType:"submit",children:"Create Budget"})})]})})},P=({isModalVisible:e,accessToken:a,setIsModalVisible:s,setBudgetList:l,existingBudget:r,handleUpdateCall:i})=>{console.log("existingBudget",r);let[n]=T.Form.useForm();(0,p.useEffect)(()=>{n.setFieldsValue(r)},[r,n]);let o=async e=>{if(null!=a&&void 0!=a)try{j.default.info("Making API Call"),s(!0);let t=await (0,v.budgetUpdateCall)(a,e);l(e=>e?[...e,t]:[t]),j.default.success("Budget Updated"),n.resetFields(),i()}catch(e){console.error("Error creating the key:",e),j.default.fromBackend(`Error creating the key: ${e}`)}};return(0,t.jsx)(S.Modal,{title:"Edit Budget",open:e,width:800,footer:null,onOk:()=>{s(!1),n.resetFields()},onCancel:()=>{s(!1),n.resetFields()},children:(0,t.jsxs)(T.Form,{form:n,onFinish:o,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",initialValues:r,children:[(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(T.Form.Item,{label:"Budget ID",name:"budget_id",rules:[{required:!0,message:"Please input a human-friendly name for the budget"}],help:"A human-friendly name for the budget",children:(0,t.jsx)(w.TextInput,{placeholder:""})}),(0,t.jsx)(T.Form.Item,{label:"Max Tokens per minute",name:"tpm_limit",help:"Default is model limit.",children:(0,t.jsx)(I.InputNumber,{step:1,precision:2,width:200})}),(0,t.jsx)(T.Form.Item,{label:"Max Requests per minute",name:"rpm_limit",help:"Default is model limit.",children:(0,t.jsx)(I.InputNumber,{step:1,precision:2,width:200})}),(0,t.jsxs)(k.Accordion,{className:"mt-20 mb-8",children:[(0,t.jsx)(_.AccordionHeader,{children:(0,t.jsx)("b",{children:"Optional Settings"})}),(0,t.jsxs)(N.AccordionBody,{children:[(0,t.jsx)(T.Form.Item,{label:"最大预算",name:"max_budget",children:(0,t.jsx)(I.InputNumber,{step:.01,precision:2,width:200})}),(0,t.jsx)(T.Form.Item,{className:"mt-8",label:"Reset Budget",name:"budget_duration",children:(0,t.jsxs)(A.Select,{defaultValue:null,placeholder:"n/a",children:[(0,t.jsx)(A.Select.Option,{value:"24h",children:"daily"}),(0,t.jsx)(A.Select.Option,{value:"7d",children:"weekly"}),(0,t.jsx)(A.Select.Option,{value:"30d",children:"monthly"})]})})]})]})]}),(0,t.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,t.jsx)(C.Button,{htmlType:"submit",children:"Save"})})]})})},O=`
curl -X POST --location '<your_proxy_base_url>/end_user/new' \\

-H 'Authorization: Bearer <your-master-key>' \\

-H 'Content-Type: application/json' \\

-d '{"user_id": "my-customer-id', "budget_id": "<BUDGET_ID>"}' # 👈 KEY CHANGE

`,E=`
curl -X POST --location '<your_proxy_base_url>/chat/completions' \\

-H 'Authorization: Bearer <your-master-key>' \\

-H 'Content-Type: application/json' \\

-d '{
  "model": "gpt-3.5-turbo',
  "messages":[{"role": "user", "content": "Hey, how's it going?"}],
  "user": "my-customer-id"
}' # 👈 KEY CHANGE

`,D=`from openai import OpenAI
client = OpenAI(
  base_url="<your_proxy_base_url>",
  api_key="<your_proxy_key>"
)

completion = client.chat.completions.create(
  model="gpt-3.5-turbo",
  messages=[
    {"role": "system", "content": "You are a helpful assistant."},
    {"role": "user", "content": "Hello!"}
  ],
  user="my-customer-id"
)

print(completion.choices[0].message)`;e.s(["default",0,({accessToken:e})=>{let[w,k]=(0,p.useState)(!1),[_,N]=(0,p.useState)(!1),[C,S]=(0,p.useState)(null),[T,I]=(0,p.useState)([]),[A,R]=(0,p.useState)(!1),[B,F]=(0,p.useState)(!1);(0,p.useEffect)(()=>{e&&(0,v.getBudgetList)(e).then(e=>{I(e)})},[e]);let L=async t=>{null!=e&&(S(t),N(!0))},z=async()=>{if(C&&null!=e){R(!0);try{await (0,v.budgetDeleteCall)(e,C.budget_id),j.default.success("Budget deleted."),await q()}catch(e){console.error("Error deleting budget:",e),"function"==typeof j.default.fromBackend?j.default.fromBackend("Failed to delete budget"):j.default.info("Failed to delete budget")}finally{R(!1),F(!1),S(null)}}},q=async()=>{null!=e&&(0,v.getBudgetList)(e).then(e=>{I(e)})};return(0,t.jsxs)("div",{className:"w-full mx-auto flex-auto overflow-y-auto m-8 p-2",children:[(0,t.jsx)(a.Button,{size:"sm",variant:"primary",className:"mb-2",onClick:()=>k(!0),children:"+ Create Budget"}),(0,t.jsxs)(r.TabGroup,{children:[(0,t.jsxs)(m.TabList,{children:[(0,t.jsx)(l.Tab,{children:"Budgets"}),(0,t.jsx)(l.Tab,{children:"Examples"})]}),(0,t.jsxs)(g.TabPanels,{children:[(0,t.jsx)(h.TabPanel,{children:(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsx)(M,{accessToken:e,isModalVisible:w,setIsModalVisible:k,setBudgetList:I}),C&&(0,t.jsx)(P,{accessToken:e,isModalVisible:_,setIsModalVisible:N,setBudgetList:I,existingBudget:C,handleUpdateCall:q}),(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(x.Text,{children:"Create a budget to assign to customers."}),(0,t.jsxs)(i.Table,{children:[(0,t.jsx)(c.TableHead,{children:(0,t.jsxs)(u.TableRow,{children:[(0,t.jsx)(d.TableHeaderCell,{children:"Budget ID"}),(0,t.jsx)(d.TableHeaderCell,{children:"Max Budget"}),(0,t.jsx)(d.TableHeaderCell,{children:"TPM"}),(0,t.jsx)(d.TableHeaderCell,{children:"RPM"})]})}),(0,t.jsx)(n.TableBody,{children:T.slice().sort((e,t)=>new Date(t.updated_at).getTime()-new Date(e.updated_at).getTime()).map((e,a)=>(0,t.jsxs)(u.TableRow,{children:[(0,t.jsx)(o.TableCell,{children:e.budget_id}),(0,t.jsx)(o.TableCell,{children:e.max_budget?e.max_budget:"n/a"}),(0,t.jsx)(o.TableCell,{children:e.tpm_limit?e.tpm_limit:"n/a"}),(0,t.jsx)(o.TableCell,{children:e.rpm_limit?e.rpm_limit:"n/a"}),(0,t.jsx)(b.default,{variant:"Edit",tooltipText:"Edit budget",onClick:()=>L(e),dataTestId:"edit-budget-button"}),(0,t.jsx)(b.default,{variant:"Delete",tooltipText:"Delete budget",onClick:()=>{S(e),F(!0)},dataTestId:"delete-budget-button"})]},a))})]})]}),(0,t.jsx)(y.default,{isOpen:B,title:"Delete Budget?",message:"Are you sure you want to delete this budget? This action cannot be undone.",resourceInformationTitle:"Budget Information",resourceInformation:[{label:"Budget ID",value:C?.budget_id,code:!0},{label:"Max Budget",value:C?.max_budget},{label:"TPM",value:C?.tpm_limit},{label:"RPM",value:C?.rpm_limit}],onCancel:()=>{F(!1)},onOk:z,confirmLoading:A})]})}),(0,t.jsx)(h.TabPanel,{children:(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsx)(x.Text,{className:"text-base",children:"How to use budget id"}),(0,t.jsxs)(r.TabGroup,{children:[(0,t.jsxs)(m.TabList,{children:[(0,t.jsx)(l.Tab,{children:"Assign Budget to Customer"}),(0,t.jsx)(l.Tab,{children:"Test it (Curl)"}),(0,t.jsx)(l.Tab,{children:"Test it (OpenAI SDK)"})]}),(0,t.jsxs)(g.TabPanels,{children:[(0,t.jsx)(h.TabPanel,{children:(0,t.jsx)(f.Prism,{language:"bash",children:O})}),(0,t.jsx)(h.TabPanel,{children:(0,t.jsx)(f.Prism,{language:"bash",children:E})}),(0,t.jsx)(h.TabPanel,{children:(0,t.jsx)(f.Prism,{language:"python",children:D})})]})]})]})})]})]})]})}],646050)},735042,e=>{"use strict";e.i(247167);var t=e.i(843476),a=e.i(584935),s=e.i(290571),l=e.i(271645),r=e.i(95779),i=e.i(444755),n=e.i(673706);let o=(0,n.makeClassName)("BarList");function c(e,t){let{data:a=[],color:c,valueFormatter:d=n.defaultValueFormatter,showAnimation:u=!1,onValueChange:m,sortOrder:h="descending",className:g}=e,x=(0,s.__rest)(e,["data","color","valueFormatter","showAnimation","onValueChange","sortOrder","className"]),p=m?"button":"div",f=l.default.useMemo(()=>"none"===h?a:[...a].sort((e,t)=>"ascending"===h?e.value-t.value:t.value-e.value),[a,h]),y=l.default.useMemo(()=>{let e=Math.max(...f.map(e=>e.value),0);return f.map(t=>0===t.value?0:Math.max(t.value/e*100,2))},[f]);return l.default.createElement("div",Object.assign({ref:t,className:(0,i.tremorTwMerge)(o("root"),"flex justify-between space-x-6",g),"aria-sort":h},x),l.default.createElement("div",{className:(0,i.tremorTwMerge)(o("bars"),"relative w-full space-y-1.5")},f.map((e,t)=>{var a,s,d;let h=e.icon;return l.default.createElement(p,{key:null!=(a=e.key)?a:t,onClick:()=>{null==m||m(e)},className:(0,i.tremorTwMerge)(o("bar"),"group w-full flex items-center rounded-tremor-small",m?["cursor-pointer","hover:bg-tremor-background-muted dark:hover:bg-dark-tremor-background-subtle/40"]:"")},l.default.createElement("div",{className:(0,i.tremorTwMerge)("flex items-center rounded transition-all bg-opacity-40","h-8",e.color||c?[(0,n.getColorClassNames)(null!=(s=e.color)?s:c,r.colorPalette.background).bgColor,m?"group-hover:bg-opacity-30":""]:"bg-tremor-brand-subtle dark:bg-dark-tremor-brand-subtle/60",!m||e.color||c?"":"group-hover:bg-tremor-brand-subtle/30 group-hover:dark:bg-dark-tremor-brand-subtle/70",t===f.length-1?"mb-0":"",u?"duration-500":""),style:{width:`${y[t]}%`,transition:u?"all 1s":""}},l.default.createElement("div",{className:(0,i.tremorTwMerge)("absolute left-2 pr-4 flex max-w-full")},h?l.default.createElement(h,{className:(0,i.tremorTwMerge)(o("barIcon"),"flex-none h-5 w-5 mr-2","text-tremor-content","dark:text-dark-tremor-content")}):null,e.href?l.default.createElement("a",{href:e.href,target:null!=(d=e.target)?d:"_blank",rel:"noreferrer",className:(0,i.tremorTwMerge)(o("barLink"),"whitespace-nowrap hover:underline truncate text-tremor-default",m?"cursor-pointer":"","text-tremor-content-emphasis","dark:text-dark-tremor-content-emphasis"),onClick:e=>e.stopPropagation()},e.name):l.default.createElement("p",{className:(0,i.tremorTwMerge)(o("barText"),"whitespace-nowrap truncate text-tremor-default","text-tremor-content-emphasis","dark:text-dark-tremor-content-emphasis")},e.name))))})),l.default.createElement("div",{className:o("labels")},f.map((e,t)=>{var a;return l.default.createElement("div",{key:null!=(a=e.key)?a:t,className:(0,i.tremorTwMerge)(o("labelWrapper"),"flex justify-end items-center","h-8",t===f.length-1?"mb-0":"mb-1.5")},l.default.createElement("p",{className:(0,i.tremorTwMerge)(o("labelText"),"whitespace-nowrap leading-none truncate text-tremor-default","text-tremor-content-emphasis","dark:text-dark-tremor-content-emphasis")},d(e.value)))})))}c.displayName="BarList";let d=l.default.forwardRef(c);var u=e.i(304967),m=e.i(629569),h=e.i(269200),g=e.i(427612),x=e.i(64848),p=e.i(496020),f=e.i(977572),y=e.i(942232),b=e.i(37091),j=e.i(617802),v=e.i(144267),w=e.i(350967),k=e.i(309426),_=e.i(599724),N=e.i(404206),C=e.i(723731),S=e.i(653824),T=e.i(881073),I=e.i(197647),A=e.i(206929),M=e.i(35983),P=e.i(413990),O=e.i(476961),E=e.i(994388),D=e.i(621642),R=e.i(25080),B=e.i(764205),F=e.i(1023),L=e.i(500330);console.log("process.env.NODE_ENV","production");let z=e=>null!==e&&("Admin"===e||"Admin Viewer"===e);e.s(["default",0,({accessToken:e,token:s,userRole:r,userID:i,keys:n,premiumUser:o})=>{let c=new Date,[q,U]=(0,l.useState)([]),[H,$]=(0,l.useState)([]),[K,V]=(0,l.useState)([]),[G,Q]=(0,l.useState)([]),[W,J]=(0,l.useState)([]),[Y,X]=(0,l.useState)([]),[Z,ee]=(0,l.useState)([]),[et,ea]=(0,l.useState)([]),[es,el]=(0,l.useState)([]),[er,ei]=(0,l.useState)([]),[en,eo]=(0,l.useState)({}),[ec,ed]=(0,l.useState)([]),[eu,em]=(0,l.useState)(""),[eh,eg]=(0,l.useState)(["all-tags"]),[ex,ep]=(0,l.useState)({from:new Date(Date.now()-6048e5),to:new Date}),[ef,ey]=(0,l.useState)(null),[eb,ej]=(0,l.useState)(0),ev=new Date(c.getFullYear(),c.getMonth(),1),ew=new Date(c.getFullYear(),c.getMonth()+1,0),ek=eI(ev),e_=eI(ew);function eN(e){return new Intl.NumberFormat("en-US",{maximumFractionDigits:0,notation:"compact",compactDisplay:"short"}).format(e)}console.log("keys in usage",n),console.log("premium user in usage",o);let eC=async()=>{if(e)try{let t=await (0,B.getProxyUISettings)(e);return console.log("usage tab: proxy_settings",t),t}catch(e){console.error("Error fetching proxy settings:",e)}};(0,l.useEffect)(()=>{eT(ex.from,ex.to)},[ex,eh]);let eS=async(t,a,s)=>{if(!t||!a||!e)return;console.log("uiSelectedKey",s);let l=await (0,B.adminTopEndUsersCall)(e,s,t.toISOString(),a.toISOString());console.log("End user data updated successfully",l),Q(l)},eT=async(t,a)=>{if(!t||!a||!e)return;let s=await eC();s?.DISABLE_EXPENSIVE_DB_QUERIES||(X((await (0,B.tagsSpendLogsCall)(e,t.toISOString(),a.toISOString(),0===eh.length?void 0:eh)).spend_per_tag),console.log("Tag spend data updated successfully"))};function eI(e){let t=e.getFullYear(),a=e.getMonth()+1,s=e.getDate();return`${t}-${a<10?"0"+a:a}-${s<10?"0"+s:s}`}console.log(`Start date is ${ek}`),console.log(`End date is ${e_}`);let eA=async(e,t,a)=>{try{let a=await e();t(a)}catch(e){console.error(a,e)}},eM=(e,t,a,s)=>{let l=[],r=new Date(t),i=new Map(e.map(e=>{let t=(e=>{if(e.includes("-"))return e;{let[t,a]=e.split(" ");return new Date(new Date().getFullYear(),new Date(`${t} 01 2024`).getMonth(),parseInt(a)).toISOString().split("T")[0]}})(e.date);return[t,{...e,date:t}]}));for(;r<=a;){let e=r.toISOString().split("T")[0];if(i.has(e))l.push(i.get(e));else{let t={date:e,api_requests:0,total_tokens:0};s.forEach(e=>{t[e]||(t[e]=0)}),l.push(t)}r.setDate(r.getDate()+1)}return l},eP=async()=>{if(e)try{let t=await (0,B.adminSpendLogsCall)(e),a=new Date,s=new Date(a.getFullYear(),a.getMonth(),1),l=new Date(a.getFullYear(),a.getMonth()+1,0),r=eM(t,s,l,[]),i=Number(r.reduce((e,t)=>e+(t.spend||0),0).toFixed(2));ej(i),U(r)}catch(e){console.error("Error fetching overall spend:",e)}},eO=async()=>{e&&await eA(async()=>(await (0,B.adminTopKeysCall)(e)).map(e=>({key:e.api_key.substring(0,10),api_key:e.api_key,key_alias:e.key_alias,spend:Number(e.total_spend.toFixed(2))})),$,"Error fetching top keys")},eE=async()=>{e&&await eA(async()=>(await (0,B.adminTopModelsCall)(e)).map(e=>({key:e.model,spend:(0,L.formatNumberWithCommas)(e.total_spend,2)})),V,"Error fetching top models")},eD=async()=>{e&&await eA(async()=>{let t=await (0,B.teamSpendLogsCall)(e),a=new Date,s=new Date(a.getFullYear(),a.getMonth(),1),l=new Date(a.getFullYear(),a.getMonth()+1,0);return J(eM(t.daily_spend,s,l,t.teams)),ea(t.teams),t.total_spend_per_team.map(e=>({name:e.team_id||"",value:(0,L.formatNumberWithCommas)(e.total_spend||0,2)}))},el,"Error fetching team spend")},eR=async()=>{if(e)try{let t=await (0,B.adminGlobalActivity)(e,ek,e_),a=new Date,s=new Date(a.getFullYear(),a.getMonth(),1),l=new Date(a.getFullYear(),a.getMonth()+1,0),r=eM(t.daily_data||[],s,l,["api_requests","total_tokens"]);eo({...t,daily_data:r})}catch(e){console.error("Error fetching global activity:",e)}},eB=async()=>{if(e)try{let t=await (0,B.adminGlobalActivityPerModel)(e,ek,e_),a=new Date,s=new Date(a.getFullYear(),a.getMonth(),1),l=new Date(a.getFullYear(),a.getMonth()+1,0),r=t.map(e=>({...e,daily_data:eM(e.daily_data||[],s,l,["api_requests","total_tokens"])}));ed(r)}catch(e){console.error("Error fetching global activity per model:",e)}};return((0,l.useEffect)(()=>{(async()=>{if(e&&s&&r&&i){let t=await eC();!(t&&(ey(t),t?.DISABLE_EXPENSIVE_DB_QUERIES))&&(console.log("fetching data - valiue of proxySettings",ef),eP(),eA(()=>e&&s?(0,B.adminspendByProvider)(e,s,ek,e_):Promise.reject("No access token or token"),ei,"Error fetching provider spend"),eO(),eE(),eR(),eB(),z(r)&&(eD(),e&&eA(async()=>(await (0,B.allTagNamesCall)(e)).tag_names,ee,"Error fetching tag names"),e&&eA(()=>(0,B.tagsSpendLogsCall)(e,ex.from?.toISOString(),ex.to?.toISOString(),void 0),e=>X(e.spend_per_tag),"Error fetching top tags"),e&&eA(()=>(0,B.adminTopEndUsersCall)(e,null,void 0,void 0),Q,"Error fetching top end users")))}})()},[e,s,r,i,ek,e_]),ef?.DISABLE_EXPENSIVE_DB_QUERIES)?(0,t.jsx)("div",{style:{width:"100%"},className:"p-8",children:(0,t.jsxs)(u.Card,{children:[(0,t.jsx)(m.Title,{children:"Database Query Limit Reached"}),(0,t.jsxs)(_.Text,{className:"mt-4",children:["SpendLogs in DB has ",ef.NUM_SPEND_LOGS_ROWS," rows.",(0,t.jsx)("br",{}),"Please follow our guide to view usage when SpendLogs has more than 1M rows."]}),(0,t.jsx)(E.Button,{className:"mt-4",children:(0,t.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/spending_monitoring",target:"_blank",children:"View Usage Guide"})})]})}):(0,t.jsx)("div",{style:{width:"100%"},className:"p-8",children:(0,t.jsxs)(S.TabGroup,{children:[(0,t.jsxs)(T.TabList,{className:"mt-2",children:[(0,t.jsx)(I.Tab,{children:"All Up"}),z(r)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(I.Tab,{children:"Team Based Usage"}),(0,t.jsx)(I.Tab,{children:"Customer Usage"}),(0,t.jsx)(I.Tab,{children:"Tag Based Usage"})]}):(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{})})]}),(0,t.jsxs)(C.TabPanels,{children:[(0,t.jsx)(N.TabPanel,{children:(0,t.jsxs)(S.TabGroup,{children:[(0,t.jsxs)(T.TabList,{variant:"solid",className:"mt-1",children:[(0,t.jsx)(I.Tab,{children:"Cost"}),(0,t.jsx)(I.Tab,{children:"Activity"})]}),(0,t.jsxs)(C.TabPanels,{children:[(0,t.jsx)(N.TabPanel,{children:(0,t.jsxs)(w.Grid,{numItems:2,className:"gap-2 h-[100vh] w-full",children:[(0,t.jsxs)(k.Col,{numColSpan:2,children:[(0,t.jsxs)(_.Text,{className:"text-tremor-default text-tremor-content dark:text-dark-tremor-content mb-2 mt-2 text-lg",children:["Project Spend ",new Date().toLocaleString("default",{month:"long"})," 1 -"," ",new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate()]}),(0,t.jsx)(j.default,{userSpend:eb,selectedTeam:null,userMaxBudget:null})]}),(0,t.jsx)(k.Col,{numColSpan:2,children:(0,t.jsxs)(u.Card,{children:[(0,t.jsx)(m.Title,{children:"Monthly Spend"}),(0,t.jsx)(a.BarChart,{data:q,index:"date",categories:["spend"],colors:["cyan"],valueFormatter:e=>`$ ${(0,L.formatNumberWithCommas)(e,2)}`,yAxisWidth:100,tickGap:5})]})}),(0,t.jsx)(k.Col,{numColSpan:1,children:(0,t.jsxs)(u.Card,{className:"h-full",children:[(0,t.jsx)(m.Title,{children:"Top Virtual Keys"}),(0,t.jsx)(F.default,{topKeys:H,teams:null,topKeysLimit:5,setTopKeysLimit:()=>{}})]})}),(0,t.jsx)(k.Col,{numColSpan:1,children:(0,t.jsxs)(u.Card,{className:"h-full",children:[(0,t.jsx)(m.Title,{children:"Top Models"}),(0,t.jsx)(a.BarChart,{className:"mt-4 h-40",data:K,index:"key",categories:["spend"],colors:["cyan"],yAxisWidth:200,layout:"vertical",showXAxis:!1,showLegend:!1,valueFormatter:e=>`\xa5${(0,L.formatNumberWithCommas)(e)}`})]})}),(0,t.jsx)(k.Col,{numColSpan:1}),(0,t.jsx)(k.Col,{numColSpan:2,children:(0,t.jsxs)(u.Card,{className:"mb-2",children:[(0,t.jsx)(m.Title,{children:"Spend by Provider"}),(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(w.Grid,{numItems:2,children:[(0,t.jsx)(k.Col,{numColSpan:1,children:(0,t.jsx)(P.DonutChart,{className:"mt-4 h-40",variant:"pie",data:er,index:"provider",category:"spend",colors:["cyan"],valueFormatter:e=>`\xa5${(0,L.formatNumberWithCommas)(e)}`})}),(0,t.jsx)(k.Col,{numColSpan:1,children:(0,t.jsxs)(h.Table,{children:[(0,t.jsx)(g.TableHead,{children:(0,t.jsxs)(p.TableRow,{children:[(0,t.jsx)(x.TableHeaderCell,{children:"Provider"}),(0,t.jsx)(x.TableHeaderCell,{children:"Spend"})]})}),(0,t.jsx)(y.TableBody,{children:er.map(e=>(0,t.jsxs)(p.TableRow,{children:[(0,t.jsx)(f.TableCell,{children:e.provider}),(0,t.jsx)(f.TableCell,{children:1e-5>parseFloat(e.spend.toFixed(2))?"less than 0.00":(0,L.formatNumberWithCommas)(e.spend,2)})]},e.provider))})]})})]})})]})})]})}),(0,t.jsx)(N.TabPanel,{children:(0,t.jsxs)(w.Grid,{numItems:1,className:"gap-2 h-[75vh] w-full",children:[(0,t.jsxs)(u.Card,{children:[(0,t.jsx)(m.Title,{children:"All Up"}),(0,t.jsxs)(w.Grid,{numItems:2,children:[(0,t.jsxs)(k.Col,{children:[(0,t.jsxs)(b.Subtitle,{style:{fontSize:"15px",fontWeight:"normal",color:"#535452"},children:["API Requests ",eN(en.sum_api_requests)]}),(0,t.jsx)(O.AreaChart,{className:"h-40",data:en.daily_data,valueFormatter:eN,index:"date",colors:["cyan"],categories:["api_requests"],onValueChange:e=>console.log(e)})]}),(0,t.jsxs)(k.Col,{children:[(0,t.jsxs)(b.Subtitle,{style:{fontSize:"15px",fontWeight:"normal",color:"#535452"},children:["Tokens ",eN(en.sum_total_tokens)]}),(0,t.jsx)(a.BarChart,{className:"h-40",data:en.daily_data,valueFormatter:eN,index:"date",colors:["cyan"],categories:["total_tokens"],onValueChange:e=>console.log(e)})]})]})]}),(0,t.jsx)(t.Fragment,{children:ec.map((e,s)=>(0,t.jsxs)(u.Card,{children:[(0,t.jsx)(m.Title,{children:e.model}),(0,t.jsxs)(w.Grid,{numItems:2,children:[(0,t.jsxs)(k.Col,{children:[(0,t.jsxs)(b.Subtitle,{style:{fontSize:"15px",fontWeight:"normal",color:"#535452"},children:["API Requests ",eN(e.sum_api_requests)]}),(0,t.jsx)(O.AreaChart,{className:"h-40",data:e.daily_data,index:"date",colors:["cyan"],categories:["api_requests"],valueFormatter:eN,onValueChange:e=>console.log(e)})]}),(0,t.jsxs)(k.Col,{children:[(0,t.jsxs)(b.Subtitle,{style:{fontSize:"15px",fontWeight:"normal",color:"#535452"},children:["Tokens ",eN(e.sum_total_tokens)]}),(0,t.jsx)(a.BarChart,{className:"h-40",data:e.daily_data,index:"date",colors:["cyan"],categories:["total_tokens"],valueFormatter:eN,onValueChange:e=>console.log(e)})]})]})]},s))})]})})]})]})}),(0,t.jsx)(N.TabPanel,{children:(0,t.jsxs)(w.Grid,{numItems:2,className:"gap-2 h-[75vh] w-full",children:[(0,t.jsxs)(k.Col,{numColSpan:2,children:[(0,t.jsxs)(u.Card,{className:"mb-2",children:[(0,t.jsx)(m.Title,{children:"Total Spend Per Team"}),(0,t.jsx)(d,{data:es})]}),(0,t.jsxs)(u.Card,{children:[(0,t.jsx)(m.Title,{children:"Daily Spend Per Team"}),(0,t.jsx)(a.BarChart,{className:"h-72",data:W,showLegend:!0,index:"date",categories:et,yAxisWidth:80,stack:!0})]})]}),(0,t.jsx)(k.Col,{numColSpan:2})]})}),(0,t.jsxs)(N.TabPanel,{children:[(0,t.jsxs)("p",{className:"mb-2 text-gray-500 italic text-[12px]",children:["Customers of your LLM API calls. Tracked when a `user` param is passed in your LLM calls"," ",(0,t.jsx)("a",{className:"text-blue-500",href:"https://docs.litellm.ai/docs/proxy/users",target:"_blank",children:"docs here"})]}),(0,t.jsxs)(w.Grid,{numItems:2,children:[(0,t.jsx)(k.Col,{children:(0,t.jsx)(v.default,{value:ex,onValueChange:e=>{ep(e),eS(e.from,e.to,null)}})}),(0,t.jsxs)(k.Col,{children:[(0,t.jsx)(_.Text,{children:"Select Key"}),(0,t.jsxs)(A.Select,{defaultValue:"all-keys",children:[(0,t.jsx)(M.SelectItem,{value:"all-keys",onClick:()=>{eS(ex.from,ex.to,null)},children:"All Keys"},"all-keys"),n?.map((e,a)=>e&&null!==e.key_alias&&e.key_alias.length>0?(0,t.jsx)(M.SelectItem,{value:String(a),onClick:()=>{eS(ex.from,ex.to,e.token)},children:e.key_alias},a):null)]})]})]}),(0,t.jsx)(u.Card,{className:"mt-4",children:(0,t.jsxs)(h.Table,{className:"max-h-[70vh] min-h-[500px]",children:[(0,t.jsx)(g.TableHead,{children:(0,t.jsxs)(p.TableRow,{children:[(0,t.jsx)(x.TableHeaderCell,{children:"Customer"}),(0,t.jsx)(x.TableHeaderCell,{children:"Spend"}),(0,t.jsx)(x.TableHeaderCell,{children:"Total Events"})]})}),(0,t.jsx)(y.TableBody,{children:G?.map((e,a)=>(0,t.jsxs)(p.TableRow,{children:[(0,t.jsx)(f.TableCell,{children:e.end_user}),(0,t.jsx)(f.TableCell,{children:(0,L.formatNumberWithCommas)(e.total_spend,2)}),(0,t.jsx)(f.TableCell,{children:e.total_count})]},a))})]})})]}),(0,t.jsxs)(N.TabPanel,{children:[(0,t.jsxs)(w.Grid,{numItems:2,children:[(0,t.jsx)(k.Col,{numColSpan:1,children:(0,t.jsx)(v.default,{className:"mb-4",value:ex,onValueChange:e=>{ep(e),eT(e.from,e.to)}})}),(0,t.jsx)(k.Col,{children:o?(0,t.jsx)("div",{children:(0,t.jsxs)(D.MultiSelect,{value:eh,onValueChange:e=>eg(e),children:[(0,t.jsx)(R.MultiSelectItem,{value:"all-tags",onClick:()=>eg(["all-tags"]),children:"All Tags"},"all-tags"),Z&&Z.filter(e=>"all-tags"!==e).map((e,a)=>(0,t.jsx)(R.MultiSelectItem,{value:String(e),children:e},e))]})}):(0,t.jsx)("div",{children:(0,t.jsxs)(D.MultiSelect,{value:eh,onValueChange:e=>eg(e),children:[(0,t.jsx)(R.MultiSelectItem,{value:"all-tags",onClick:()=>eg(["all-tags"]),children:"All Tags"},"all-tags"),Z&&Z.filter(e=>"all-tags"!==e).map((e,a)=>(0,t.jsxs)(M.SelectItem,{value:String(e),disabled:!0,children:["✨ ",e," (Enterprise only Feature)"]},e))]})})})]}),(0,t.jsxs)(w.Grid,{numItems:2,className:"gap-2 h-[75vh] w-full mb-4",children:[(0,t.jsx)(k.Col,{numColSpan:2,children:(0,t.jsxs)(u.Card,{children:[(0,t.jsx)(m.Title,{children:"Spend Per Tag"}),(0,t.jsxs)(_.Text,{children:["Get Started by Tracking cost per tag"," ",(0,t.jsx)("a",{className:"text-blue-500",href:"https://docs.litellm.ai/docs/proxy/cost_tracking",target:"_blank",children:"here"})]}),(0,t.jsx)(a.BarChart,{className:"h-72",data:Y,index:"name",categories:["spend"],colors:["cyan"]})]})}),(0,t.jsx)(k.Col,{numColSpan:2})]})]})]})]})})}],735042)},226898,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(304967),l=e.i(269200),r=e.i(427612),i=e.i(496020),n=e.i(389083),o=e.i(64848),c=e.i(977572),d=e.i(942232),u=e.i(599724),m=e.i(994388),h=e.i(752978),g=e.i(793130),x=e.i(404206),p=e.i(723731),f=e.i(653824),y=e.i(881073),b=e.i(197647),j=e.i(764205),v=e.i(28651),w=e.i(68155),k=e.i(220508),_=e.i(727749),N=e.i(158392);let C=({accessToken:e,userRole:s,userID:l,modelData:r})=>{let[i,n]=(0,a.useState)({routerSettings:{},selectedStrategy:null,enableTagFiltering:!1}),[o,c]=(0,a.useState)([]),[d,u]=(0,a.useState)({}),[h,g]=(0,a.useState)({});return((0,a.useEffect)(()=>{e&&s&&l&&((0,j.getCallbacksCall)(e,l,s).then(e=>{console.log("callbacks",e);let t=e.router_settings;"model_group_retry_policy"in t&&delete t.model_group_retry_policy;let a=t.routing_strategy||null;n(e=>({...e,routerSettings:t,selectedStrategy:a}))}),(0,j.getRouterSettingsCall)(e).then(e=>{if(console.log("router settings from API",e),e.fields){let t={};e.fields.forEach(e=>{t[e.field_name]={ui_field_name:e.ui_field_name,field_description:e.field_description,options:e.options,link:e.link}}),u(t);let a=e.fields.find(e=>"routing_strategy"===e.field_name);a?.options&&c(a.options),e.routing_strategy_descriptions&&g(e.routing_strategy_descriptions);let s=e.fields.find(e=>"enable_tag_filtering"===e.field_name);s?.field_value!==null&&s?.field_value!==void 0&&n(e=>({...e,enableTagFiltering:s.field_value}))}}))},[e,s,l]),e)?(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsx)(N.default,{value:i,onChange:n,routerFieldsMetadata:d,availableRoutingStrategies:o,routingStrategyDescriptions:h}),(0,t.jsxs)("div",{className:"border-t border-gray-200 pt-6 flex justify-end gap-3",children:[(0,t.jsx)(m.Button,{variant:"secondary",size:"sm",onClick:()=>window.location.reload(),className:"text-sm",children:"Reset"}),(0,t.jsx)(m.Button,{size:"sm",onClick:()=>{if(!e)return;let t=i.routerSettings;console.log("router_settings",t);let a=new Set(["allowed_fails","cooldown_time","num_retries","timeout","retry_after"]),s=new Set(["model_group_alias","retry_policy"]),l=Object.fromEntries(Object.entries({...t,enable_tag_filtering:i.enableTagFiltering}).map(([e,t])=>{if("routing_strategy_args"!==e&&"routing_strategy"!==e&&"enable_tag_filtering"!==e){let l=document.querySelector(`input[name="${e}"]`),r=((e,t,l)=>{if(void 0===t)return l;let r=t.trim();if("null"===r.toLowerCase())return null;if(a.has(e)){let e=Number(r);return Number.isNaN(e)?l:e}if(s.has(e)){if(""===r)return null;try{return JSON.parse(r)}catch{return l}}return"true"===r.toLowerCase()||"false"!==r.toLowerCase()&&r})(e,l?.value,t);return[e,r]}if("routing_strategy"===e)return[e,i.selectedStrategy];if("enable_tag_filtering"===e)return[e,i.enableTagFiltering];if("routing_strategy_args"===e&&"latency-based-routing"===i.selectedStrategy){let e={},t=document.querySelector('input[name="lowest_latency_buffer"]'),a=document.querySelector('input[name="ttl"]');return t?.value&&(e.lowest_latency_buffer=Number(t.value)),a?.value&&(e.ttl=Number(a.value)),console.log(`setRoutingStrategyArgs: ${e}`),["routing_strategy_args",e]}return null}).filter(e=>null!=e));console.log("updatedVariables",l);try{(0,j.setCallbacksCall)(e,{router_settings:l})}catch(e){_.default.fromBackend("Failed to update router settings: "+e)}_.default.success("router settings updated successfully")},className:"text-sm font-medium",children:"Save Changes"})]})]}):null};e.i(247167);var S=e.i(368670);let T=a.forwardRef(function(e,t){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14 5l7 7m0 0l-7 7m7-7H3"}))});var I=e.i(122577),A=e.i(592968),M=e.i(898586),P=e.i(356449),O=e.i(127952),E=e.i(418371),D=e.i(464571),R=e.i(998573),B=e.i(689020),F=e.i(212931);let L=(0,e.i(475254).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);function z({open:e,onCancel:a,children:s}){return(0,t.jsx)(F.Modal,{title:(0,t.jsx)("div",{className:"pb-4 border-b border-gray-100",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-800",children:[(0,t.jsx)("div",{className:"p-2 bg-indigo-50 rounded-lg",children:(0,t.jsx)(L,{className:"w-5 h-5 text-indigo-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-bold m-0",children:"Configure Model Fallbacks"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 font-normal m-0",children:"Manage multiple fallback chains for different models (up to 5 groups at a time)"})]})]})}),open:e,width:900,footer:null,onCancel:a,maskClosable:!1,className:"top-8",styles:{body:{padding:"24px"},header:{padding:"24px 24px 0 24px",border:"none"}},children:(0,t.jsx)("div",{className:"mt-6",children:s})})}var q=e.i(419470);function U({models:e,accessToken:s,value:l=[],onChange:r}){let[i,n]=(0,a.useState)(!1),[o,c]=(0,a.useState)([]),[d,u]=(0,a.useState)(0),[h,g]=(0,a.useState)(!1),[x,p]=(0,a.useState)([{id:"1",primaryModel:null,fallbackModels:[]}]);(0,a.useEffect)(()=>{i&&(p([{id:"1",primaryModel:null,fallbackModels:[]}]),u(e=>e+1))},[i]),(0,a.useEffect)(()=>{let e=async()=>{try{let e=await (0,B.fetchAvailableModels)(s);console.log("Fetched models for fallbacks:",e),c(e)}catch(e){console.error("Error fetching model info for fallbacks:",e)}};i&&e()},[s,i]);let f=Array.from(new Set(o.map(e=>e.model_group))).sort(),y=()=>{n(!1),p([{id:"1",primaryModel:null,fallbackModels:[]}])},b=async()=>{let e=x.filter(e=>!e.primaryModel||0===e.fallbackModels.length);if(e.length>0)return void R.message.error(`Please complete configuration for all groups. ${e.length} group(s) incomplete.`);let t=[...l||[],...x.map(e=>({[e.primaryModel]:e.fallbackModels}))];if(r){g(!0);try{await r(t),_.default.success(`${x.length} fallback configuration(s) added successfully!`),y()}catch(e){console.error("Error saving fallbacks:",e)}finally{g(!1)}}else _.default.fromBackend("onChange callback not provided")};return(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Button,{className:"mx-auto",onClick:()=>n(!0),icon:()=>(0,t.jsx)("span",{className:"mr-1",children:"+"}),children:"Add Fallbacks"}),(0,t.jsxs)(z,{open:i,onCancel:y,children:[(0,t.jsx)(q.FallbackSelectionForm,{groups:x,onGroupsChange:p,availableModels:f,maxFallbacks:10,maxGroups:5},d),x.length>0&&(0,t.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-6 mt-6 border-t border-gray-100",children:[(0,t.jsx)(D.Button,{type:"default",onClick:y,disabled:h,children:"Cancel"}),(0,t.jsx)(D.Button,{type:"default",onClick:b,disabled:0===x.length||h,loading:h,children:h?"Saving Configuration...":"Save All Configurations"})]})]})]})}let H="inline-flex items-center gap-2 px-2.5 py-1 rounded-md border border-gray-200 bg-gray-50 text-sm font-medium text-gray-800 shrink-0";async function $(e,a){console.log=function(){};let s=window.location.origin,l=new P.default.OpenAI({apiKey:a,baseURL:s,dangerouslyAllowBrowser:!0});try{_.default.info("Testing fallback model response...");let a=await l.chat.completions.create({model:e,messages:[{role:"user",content:"Hi, this is a test message"}],mock_testing_fallbacks:!0});_.default.success((0,t.jsxs)("span",{children:["Test model=",(0,t.jsx)("strong",{children:e}),", received model=",(0,t.jsx)("strong",{children:a.model}),". See"," ",(0,t.jsx)("a",{href:"#",onClick:()=>window.open("https://docs.litellm.ai/docs/proxy/reliability","_blank"),style:{textDecoration:"underline",color:"blue"},children:"curl"})]}))}catch(e){_.default.fromBackend(`Error occurred while generating model response. Please try again. Error: ${e}`)}}let K=({accessToken:e,userRole:s,userID:n,modelData:u})=>{let[m,g]=(0,a.useState)({}),[x,p]=(0,a.useState)(!1),[f,y]=(0,a.useState)(null),[b,v]=(0,a.useState)(!1),{data:k}=(0,S.useModelCostMap)(),N=e=>null!=k&&"object"==typeof k&&e in k?k[e].litellm_provider??"":"";(0,a.useEffect)(()=>{e&&s&&n&&(0,j.getCallbacksCall)(e,n,s).then(e=>{console.log("callbacks",e);let t=e.router_settings;"model_group_retry_policy"in t&&delete t.model_group_retry_policy,g(t)})},[e,s,n]);let C=e=>{y(e),v(!0)},P=async()=>{if(!f||!e)return;let t=Object.keys(f)[0];if(!t)return;p(!0);let a=m.fallbacks.map(e=>{let a={...e};return t in a&&Array.isArray(a[t])&&delete a[t],a}).filter(e=>Object.keys(e).length>0),s={...m,fallbacks:a};try{await (0,j.setCallbacksCall)(e,{router_settings:s}),g(s),_.default.success("Router settings updated successfully")}catch(e){_.default.fromBackend("Failed to update router settings: "+e)}finally{p(!1),v(!1),y(null)}};if(!e)return null;let D=async t=>{if(!e)return;let a={...m,fallbacks:t};try{await (0,j.setCallbacksCall)(e,{router_settings:a}),g(a)}catch(t){throw _.default.fromBackend("Failed to update router settings: "+t),e&&s&&n&&(0,j.getCallbacksCall)(e,n,s).then(e=>{let t=e.router_settings;"model_group_retry_policy"in t&&delete t.model_group_retry_policy,g(t)}),t}},R=Array.isArray(m.fallbacks)&&m.fallbacks.length>0;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(U,{models:u?.data?u.data.map(e=>e.model_name):[],accessToken:e||"",value:m.fallbacks||[],onChange:D}),R?(0,t.jsxs)(l.Table,{children:[(0,t.jsx)(r.TableHead,{children:(0,t.jsxs)(i.TableRow,{children:[(0,t.jsx)(o.TableHeaderCell,{children:"Model Name"}),(0,t.jsx)(o.TableHeaderCell,{children:"Fallbacks"}),(0,t.jsx)(o.TableHeaderCell,{children:"Actions"})]})}),(0,t.jsx)(d.TableBody,{children:m.fallbacks.map((s,l)=>Object.entries(s).map(([r,n])=>{let o;return(0,t.jsxs)(i.TableRow,{children:[(0,t.jsx)(c.TableCell,{className:"align-top",children:(o=N?.(r)??r,(0,t.jsxs)("span",{className:H,children:[(0,t.jsx)(E.ProviderLogo,{provider:o,className:"w-4 h-4 shrink-0"}),(0,t.jsx)("span",{children:r})]}))}),(0,t.jsx)(c.TableCell,{className:"align-top",children:function(e,s,l){let r=Array.isArray(s)?s:[];if(0===r.length)return null;let i=({modelName:e})=>{let a=l?.(e)??e;return(0,t.jsxs)("span",{className:H,children:[(0,t.jsx)(E.ProviderLogo,{provider:a,className:"w-4 h-4 shrink-0"}),(0,t.jsx)("span",{children:e})]})};return(0,t.jsxs)("span",{className:"grid grid-cols-[auto_1fr] items-start gap-x-2 w-full min-w-0",children:[(0,t.jsx)("span",{className:"inline-flex items-center justify-center w-8 h-8 shrink-0 self-start text-blue-600","aria-hidden":!0,children:(0,t.jsx)(T,{className:"w-5 h-5 stroke-[2.5]"})}),(0,t.jsx)("span",{className:"flex flex-wrap items-start gap-1 min-w-0",children:r.map((e,s)=>(0,t.jsxs)(a.default.Fragment,{children:[s>0&&(0,t.jsx)(h.Icon,{icon:T,size:"xs",className:"shrink-0 text-gray-400"}),(0,t.jsx)(i,{modelName:e})]},e))})]})}(0,Array.isArray(n)?n:[],N)}),(0,t.jsxs)(c.TableCell,{className:"align-top",children:[(0,t.jsx)(A.Tooltip,{title:"Test fallback",children:(0,t.jsx)(h.Icon,{icon:I.PlayIcon,size:"sm",onClick:()=>$(Object.keys(s)[0],e||""),className:"cursor-pointer hover:text-blue-600"})}),(0,t.jsx)(A.Tooltip,{title:"Delete fallback",children:(0,t.jsx)("span",{"data-testid":"delete-fallback-button",role:"button",tabIndex:0,onClick:()=>C(s),onKeyDown:e=>"Enter"===e.key&&C(s),className:"cursor-pointer inline-flex",children:(0,t.jsx)(h.Icon,{icon:w.TrashIcon,size:"sm",className:"hover:text-red-600"})})})]})]},l.toString()+r)}))})]}):(0,t.jsx)("div",{className:"rounded-lg border border-gray-200 bg-gray-50 px-4 py-6 text-center",children:(0,t.jsx)(M.Typography.Text,{type:"secondary",children:"No fallbacks configured. Add fallbacks to automatically try another model when the primary fails."})}),(0,t.jsx)(O.default,{isOpen:b,title:"Delete Fallback?",message:"Are you sure you want to delete this fallback? This action cannot be undone.",resourceInformationTitle:"Fallback Information",resourceInformation:[{label:"Model Name",value:f?Object.keys(f)[0]:"",code:!0}],onCancel:()=>{v(!1),y(null)},onOk:P,confirmLoading:x})]})};e.s(["default",0,({accessToken:e,userRole:_,userID:N,modelData:S})=>{let[T,I]=(0,a.useState)([]);(0,a.useEffect)(()=>{e&&(0,j.getGeneralSettingsCall)(e).then(e=>{I(e)})},[e]);let A=(e,t)=>{I(T.map(a=>a.field_name===e?{...a,field_value:t}:a))};return e?(0,t.jsx)("div",{className:"w-full",children:(0,t.jsxs)(f.TabGroup,{className:"h-[75vh] w-full",children:[(0,t.jsxs)(y.TabList,{variant:"line",defaultValue:"1",className:"px-8 pt-4",children:[(0,t.jsx)(b.Tab,{value:"1",children:"Loadbalancing"}),(0,t.jsx)(b.Tab,{value:"2",children:"Fallbacks"}),(0,t.jsx)(b.Tab,{value:"3",children:"General"})]}),(0,t.jsxs)(p.TabPanels,{className:"px-8 py-6",children:[(0,t.jsx)(x.TabPanel,{children:(0,t.jsx)(C,{accessToken:e,userRole:_,userID:N,modelData:S})}),(0,t.jsx)(x.TabPanel,{children:(0,t.jsx)(K,{accessToken:e,userRole:_,userID:N,modelData:S})}),(0,t.jsx)(x.TabPanel,{children:(0,t.jsx)(s.Card,{children:(0,t.jsxs)(l.Table,{children:[(0,t.jsx)(r.TableHead,{children:(0,t.jsxs)(i.TableRow,{children:[(0,t.jsx)(o.TableHeaderCell,{children:"Setting"}),(0,t.jsx)(o.TableHeaderCell,{children:"Value"}),(0,t.jsx)(o.TableHeaderCell,{children:"Status"}),(0,t.jsx)(o.TableHeaderCell,{children:"Action"})]})}),(0,t.jsx)(d.TableBody,{children:T.filter(e=>"TypedDictionary"!==e.field_type).map((a,s)=>(0,t.jsxs)(i.TableRow,{children:[(0,t.jsxs)(c.TableCell,{children:[(0,t.jsx)(u.Text,{children:a.field_name}),(0,t.jsx)("p",{style:{fontSize:"0.65rem",color:"#808080",fontStyle:"italic"},className:"mt-1",children:a.field_description})]}),(0,t.jsx)(c.TableCell,{children:"Integer"==a.field_type?(0,t.jsx)(v.InputNumber,{step:1,value:a.field_value,onChange:e=>A(a.field_name,e)}):"Boolean"==a.field_type?(0,t.jsx)(g.Switch,{checked:!0===a.field_value||"true"===a.field_value,onChange:e=>A(a.field_name,e)}):null}),(0,t.jsx)(c.TableCell,{children:!0==a.stored_in_db?(0,t.jsx)(n.Badge,{icon:k.CheckCircleIcon,className:"text-white",children:"In DB"}):!1==a.stored_in_db?(0,t.jsx)(n.Badge,{className:"text-gray bg-white outline",children:"In Config"}):(0,t.jsx)(n.Badge,{className:"text-gray bg-white outline",children:"Not Set"})}),(0,t.jsxs)(c.TableCell,{children:[(0,t.jsx)(m.Button,{onClick:()=>((t,a)=>{if(!e)return;let s=T[a].field_value;if(null!=s&&void 0!=s)try{(0,j.updateConfigFieldSetting)(e,t,s);let a=T.map(e=>e.field_name===t?{...e,stored_in_db:!0}:e);I(a)}catch(e){}})(a.field_name,s),children:"Update"}),(0,t.jsx)(h.Icon,{icon:w.TrashIcon,color:"red",onClick:()=>((t,a)=>{if(e)try{(0,j.deleteConfigFieldSetting)(e,t);let a=T.map(e=>e.field_name===t?{...e,stored_in_db:null,field_value:null}:e);I(a)}catch(e){}})(a.field_name,0),children:"Reset"})]})]},s))})]})})})]})]})}):null}],226898)},704308,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(994388),l=e.i(212931),r=e.i(764205),i=e.i(808613),n=e.i(311451),o=e.i(199133),c=e.i(998573),d=e.i(209261);let{TextArea:u}=n.Input,{Option:m}=o.Select,h=["Development","Productivity","Learning","Security","Data & Analytics","Integration","Testing","Documentation"],g=({visible:e,onClose:g,accessToken:x,onSuccess:p})=>{let[f]=i.Form.useForm(),[y,b]=(0,a.useState)(!1),[j,v]=(0,a.useState)("github"),w=async e=>{if(!x)return void c.message.error("No access token available");if(!(0,d.validatePluginName)(e.name))return void c.message.error("Plugin name must be kebab-case (lowercase letters, numbers, and hyphens only)");if(e.version&&!(0,d.isValidSemanticVersion)(e.version))return void c.message.error("Version must be in semantic versioning format (e.g., 1.0.0)");if(e.authorEmail&&!(0,d.isValidEmail)(e.authorEmail))return void c.message.error("Invalid email format");if(e.homepage&&!(0,d.isValidUrl)(e.homepage))return void c.message.error("Invalid homepage URL format");b(!0);try{let t={name:e.name.trim(),source:"github"===j?{source:"github",repo:e.repo.trim()}:{source:"url",url:e.url.trim()}};e.version&&(t.version=e.version.trim()),e.description&&(t.description=e.description.trim()),(e.authorName||e.authorEmail)&&(t.author={},e.authorName&&(t.author.name=e.authorName.trim()),e.authorEmail&&(t.author.email=e.authorEmail.trim())),e.homepage&&(t.homepage=e.homepage.trim()),e.category&&(t.category=e.category),e.keywords&&(t.keywords=(0,d.parseKeywords)(e.keywords)),await (0,r.registerClaudeCodePlugin)(x,t),c.message.success("Plugin registered successfully"),f.resetFields(),v("github"),p(),g()}catch(e){console.error("Error registering plugin:",e),c.message.error("Failed to register plugin")}finally{b(!1)}},k=()=>{f.resetFields(),v("github"),g()};return(0,t.jsx)(l.Modal,{title:"Add New Claude Code Plugin",open:e,onCancel:k,footer:null,width:700,className:"top-8",children:(0,t.jsxs)(i.Form,{form:f,layout:"vertical",onFinish:w,className:"mt-4",children:[(0,t.jsx)(i.Form.Item,{label:"Plugin Name",name:"name",rules:[{required:!0,message:"Please enter plugin name"},{pattern:/^[a-z0-9-]+$/,message:"Name must be kebab-case (lowercase, numbers, hyphens only)"}],tooltip:"Unique identifier in kebab-case format (e.g., my-awesome-plugin)",children:(0,t.jsx)(n.Input,{placeholder:"my-awesome-plugin",className:"rounded-lg"})}),(0,t.jsx)(i.Form.Item,{label:"Source Type",name:"sourceType",initialValue:"github",rules:[{required:!0,message:"Please select source type"}],children:(0,t.jsxs)(o.Select,{onChange:e=>{v(e),f.setFieldsValue({repo:void 0,url:void 0})},className:"rounded-lg",children:[(0,t.jsx)(m,{value:"github",children:"GitHub"}),(0,t.jsx)(m,{value:"url",children:"URL"})]})}),"github"===j&&(0,t.jsx)(i.Form.Item,{label:"GitHub Repository",name:"repo",rules:[{required:!0,message:"Please enter repository"},{pattern:/^[a-zA-Z0-9_-]+\/[a-zA-Z0-9_-]+$/,message:"Repository must be in format: org/repo"}],tooltip:"Format: organization/repository (e.g., anthropics/claude-code)",children:(0,t.jsx)(n.Input,{placeholder:"anthropics/claude-code",className:"rounded-lg"})}),"url"===j&&(0,t.jsx)(i.Form.Item,{label:"Git URL",name:"url",rules:[{required:!0,message:"Please enter git URL"}],tooltip:"Full git URL to the repository",children:(0,t.jsx)(n.Input,{type:"url",placeholder:"https://github.com/org/repo.git",className:"rounded-lg"})}),(0,t.jsx)(i.Form.Item,{label:"Version (Optional)",name:"version",tooltip:"Semantic version (e.g., 1.0.0)",children:(0,t.jsx)(n.Input,{placeholder:"1.0.0",className:"rounded-lg"})}),(0,t.jsx)(i.Form.Item,{label:"Description (Optional)",name:"description",tooltip:"Brief description of what the plugin does",children:(0,t.jsx)(u,{rows:3,placeholder:"A plugin that helps with...",maxLength:500,className:"rounded-lg"})}),(0,t.jsx)(i.Form.Item,{label:"Category (Optional)",name:"category",tooltip:"Select a category or enter a custom one",children:(0,t.jsx)(o.Select,{placeholder:"Select or type a category",allowClear:!0,showSearch:!0,optionFilterProp:"children",className:"rounded-lg",children:h.map(e=>(0,t.jsx)(m,{value:e,children:e},e))})}),(0,t.jsx)(i.Form.Item,{label:"Keywords (Optional)",name:"keywords",tooltip:"Comma-separated list of keywords for search",children:(0,t.jsx)(n.Input,{placeholder:"search, web, api",className:"rounded-lg"})}),(0,t.jsx)(i.Form.Item,{label:"Author Name (Optional)",name:"authorName",tooltip:"Name of the plugin author or organization",children:(0,t.jsx)(n.Input,{placeholder:"Your Name or Organization",className:"rounded-lg"})}),(0,t.jsx)(i.Form.Item,{label:"Author Email (Optional)",name:"authorEmail",rules:[{type:"email",message:"Please enter a valid email"}],tooltip:"Contact email for the plugin author",children:(0,t.jsx)(n.Input,{type:"email",placeholder:"author@example.com",className:"rounded-lg"})}),(0,t.jsx)(i.Form.Item,{label:"Homepage (Optional)",name:"homepage",rules:[{type:"url",message:"Please enter a valid URL"}],tooltip:"URL to the plugin's homepage or documentation",children:(0,t.jsx)(n.Input,{type:"url",placeholder:"https://example.com",className:"rounded-lg"})}),(0,t.jsx)(i.Form.Item,{className:"mb-0 mt-6",children:(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(s.Button,{variant:"secondary",onClick:k,disabled:y,children:"Cancel"}),(0,t.jsx)(s.Button,{type:"submit",loading:y,children:y?"Registering...":"Register Plugin"})]})})]})})};var x=e.i(166406),p=e.i(871943),f=e.i(360820),y=e.i(94629),b=e.i(68155),j=e.i(152990),v=e.i(682830),w=e.i(389083),k=e.i(269200),_=e.i(942232),N=e.i(977572),C=e.i(427612),S=e.i(64848),T=e.i(496020),I=e.i(790848),A=e.i(592968),M=e.i(727749);let P=({pluginsList:e,isLoading:l,onDeleteClick:i,accessToken:n,onPluginUpdated:o,isAdmin:c,onPluginClick:u})=>{let[m,h]=(0,a.useState)([{id:"created_at",desc:!0}]),[g,P]=(0,a.useState)(null),O=async e=>{if(n){P(e.id);try{e.enabled?(await (0,r.disableClaudeCodePlugin)(n,e.name),M.default.success(`Plugin "${e.name}" disabled`)):(await (0,r.enableClaudeCodePlugin)(n,e.name),M.default.success(`Plugin "${e.name}" enabled`)),o()}catch(e){M.default.error("Failed to toggle plugin status")}finally{P(null)}}},E=[{header:"Plugin Name",accessorKey:"name",cell:({row:e})=>{let a=e.original,l=a.name||"";return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(A.Tooltip,{title:l,children:(0,t.jsx)(s.Button,{size:"xs",variant:"light",className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left overflow-hidden truncate min-w-[150px] justify-start",onClick:()=>u(a.id),children:l})}),(0,t.jsx)(A.Tooltip,{title:"Copy Plugin ID",children:(0,t.jsx)(x.CopyOutlined,{onClick:e=>{var t;e.stopPropagation(),t=a.id,navigator.clipboard.writeText(t),M.default.success("Copied to clipboard!")},className:"cursor-pointer text-gray-500 hover:text-blue-500 text-xs"})})]})}},{header:"Version",accessorKey:"version",cell:({row:e})=>{let a=e.original.version||"N/A";return(0,t.jsx)("span",{className:"text-xs text-gray-600",children:a})}},{header:"Description",accessorKey:"description",cell:({row:e})=>{let a=e.original.description||"No description";return(0,t.jsx)(A.Tooltip,{title:a,children:(0,t.jsx)("span",{className:"text-xs text-gray-600 block max-w-[300px] truncate",children:a})})}},{header:"Category",accessorKey:"category",cell:({row:e})=>{let a=e.original.category;if(!a)return(0,t.jsx)(w.Badge,{color:"gray",className:"text-xs font-normal",size:"xs",children:"Uncategorized"});let s=(0,d.getCategoryBadgeColor)(a);return(0,t.jsx)(w.Badge,{color:s,className:"text-xs font-normal",size:"xs",children:a})}},{header:"Enabled",accessorKey:"enabled",cell:({row:e})=>{let a=e.original;return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(w.Badge,{color:a.enabled?"green":"gray",className:"text-xs font-normal",size:"xs",children:a.enabled?"Yes":"No"}),c&&(0,t.jsx)(A.Tooltip,{title:a.enabled?"Disable plugin":"Enable plugin",children:(0,t.jsx)(I.Switch,{size:"small",checked:a.enabled,loading:g===a.id,onChange:()=>O(a)})})]})}},{header:"Created At",accessorKey:"created_at",cell:({row:e})=>{var a;let s=e.original;return(0,t.jsx)(A.Tooltip,{title:s.created_at,children:(0,t.jsx)("span",{className:"text-xs",children:(a=s.created_at)?new Date(a).toLocaleString():"-"})})}},...c?[{header:"Actions",id:"actions",enableSorting:!1,cell:({row:e})=>{let a=e.original;return(0,t.jsx)("div",{className:"flex items-center gap-1",children:(0,t.jsx)(A.Tooltip,{title:"Delete plugin",children:(0,t.jsx)(s.Button,{size:"xs",variant:"light",color:"red",onClick:e=>{e.stopPropagation(),i(a.name,a.name)},icon:b.TrashIcon,className:"text-red-500 hover:text-red-700 hover:bg-red-50"})})})}}]:[]],D=(0,j.useReactTable)({data:e,columns:E,state:{sorting:m},onSortingChange:h,getCoreRowModel:(0,v.getCoreRowModel)(),getSortedRowModel:(0,v.getSortedRowModel)(),enableSorting:!0});return(0,t.jsx)("div",{className:"rounded-lg custom-border relative",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(k.Table,{className:"[&_td]:py-0.5 [&_th]:py-1",children:[(0,t.jsx)(C.TableHead,{children:D.getHeaderGroups().map(e=>(0,t.jsx)(T.TableRow,{children:e.headers.map(e=>(0,t.jsx)(S.TableHeaderCell,{className:`py-1 h-8 ${"actions"===e.id?"sticky right-0 bg-white shadow-[-4px_0_8px_-6px_rgba(0,0,0,0.1)]":""}`,onClick:e.column.getCanSort()?e.column.getToggleSortingHandler():void 0,children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("div",{className:"flex items-center",children:e.isPlaceholder?null:(0,j.flexRender)(e.column.columnDef.header,e.getContext())}),e.column.getCanSort()&&(0,t.jsx)("div",{className:"w-4",children:e.column.getIsSorted()?({asc:(0,t.jsx)(f.ChevronUpIcon,{className:"h-4 w-4 text-blue-500"}),desc:(0,t.jsx)(p.ChevronDownIcon,{className:"h-4 w-4 text-blue-500"})})[e.column.getIsSorted()]:(0,t.jsx)(y.SwitchVerticalIcon,{className:"h-4 w-4 text-gray-400"})})]})},e.id))},e.id))}),(0,t.jsx)(_.TableBody,{children:l?(0,t.jsx)(T.TableRow,{children:(0,t.jsx)(N.TableCell,{colSpan:E.length,className:"h-8 text-center",children:(0,t.jsx)("div",{className:"text-center text-gray-500",children:(0,t.jsx)("p",{children:"Loading..."})})})}):e&&e.length>0?D.getRowModel().rows.map(e=>(0,t.jsx)(T.TableRow,{className:"h-8",children:e.getVisibleCells().map(e=>(0,t.jsx)(N.TableCell,{className:`py-0.5 max-h-8 overflow-hidden text-ellipsis whitespace-nowrap ${"actions"===e.column.id?"sticky right-0 bg-white shadow-[-4px_0_8px_-6px_rgba(0,0,0,0.1)]":""}`,children:(0,j.flexRender)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,t.jsx)(T.TableRow,{children:(0,t.jsx)(N.TableCell,{colSpan:E.length,className:"h-8 text-center",children:(0,t.jsx)("div",{className:"text-center text-gray-500",children:(0,t.jsx)("p",{children:"No plugins found. Add one to get started."})})})})})]})})})};var O=e.i(708347),E=e.i(530212),D=e.i(434626),R=e.i(304967),B=e.i(350967),F=e.i(599724),L=e.i(629569),z=e.i(482725);let q=({pluginId:e,onClose:l,accessToken:i,isAdmin:n,onPluginUpdated:o})=>{let[c,u]=(0,a.useState)(null),[m,h]=(0,a.useState)(!0),[g,p]=(0,a.useState)(!1);(0,a.useEffect)(()=>{f()},[e,i]);let f=async()=>{if(i){h(!0);try{let t=await (0,r.getClaudeCodePluginDetails)(i,e);u(t.plugin)}catch(e){console.error("Error fetching plugin info:",e),M.default.error("Failed to load plugin information")}finally{h(!1)}}},y=async()=>{if(i&&c){p(!0);try{c.enabled?(await (0,r.disableClaudeCodePlugin)(i,c.name),M.default.success(`Plugin "${c.name}" disabled`)):(await (0,r.enableClaudeCodePlugin)(i,c.name),M.default.success(`Plugin "${c.name}" enabled`)),o(),f()}catch(e){M.default.error("Failed to toggle plugin status")}finally{p(!1)}}},b=e=>{navigator.clipboard.writeText(e),M.default.success("Copied to clipboard!")};if(m)return(0,t.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,t.jsx)(z.Spin,{size:"large"})});if(!c)return(0,t.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,t.jsx)("p",{children:"Plugin not found"}),(0,t.jsx)(s.Button,{className:"mt-4",onClick:l,children:"Go Back"})]});let j=(0,d.formatInstallCommand)(c),v=(0,d.getSourceLink)(c.source),k=(0,d.getCategoryBadgeColor)(c.category);return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,t.jsx)(E.ArrowLeftIcon,{className:"h-5 w-5 cursor-pointer text-gray-500 hover:text-gray-700",onClick:l}),(0,t.jsx)("h2",{className:"text-2xl font-bold",children:c.name}),c.version&&(0,t.jsxs)(w.Badge,{color:"blue",size:"xs",children:["v",c.version]}),c.category&&(0,t.jsx)(w.Badge,{color:k,size:"xs",children:c.category}),(0,t.jsx)(w.Badge,{color:c.enabled?"green":"gray",size:"xs",children:c.enabled?"Enabled":"Disabled"})]}),(0,t.jsx)(R.Card,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)(F.Text,{className:"text-gray-600 text-xs mb-2",children:"Install Command"}),(0,t.jsx)("div",{className:"font-mono bg-gray-100 px-3 py-2 rounded text-sm",children:j})]}),(0,t.jsx)(A.Tooltip,{title:"Copy install command",children:(0,t.jsx)(s.Button,{size:"xs",variant:"secondary",icon:x.CopyOutlined,onClick:()=>b(j),className:"ml-4",children:"Copy"})})]})}),(0,t.jsxs)(R.Card,{children:[(0,t.jsx)(L.Title,{children:"Plugin Details"}),(0,t.jsxs)(B.Grid,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(F.Text,{className:"text-gray-600 text-xs",children:"Plugin ID"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsx)(F.Text,{className:"font-mono text-xs",children:c.id}),(0,t.jsx)(x.CopyOutlined,{className:"cursor-pointer text-gray-500 hover:text-blue-500 text-xs",onClick:()=>b(c.id)})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(F.Text,{className:"text-gray-600 text-xs",children:"Name"}),(0,t.jsx)(F.Text,{className:"font-semibold mt-1",children:c.name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(F.Text,{className:"text-gray-600 text-xs",children:"Version"}),(0,t.jsx)(F.Text,{className:"font-semibold mt-1",children:c.version||"N/A"})]}),(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)(F.Text,{className:"text-gray-600 text-xs",children:"Source"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsx)(F.Text,{className:"font-semibold",children:(0,d.getSourceDisplayText)(c.source)}),v&&(0,t.jsx)("a",{href:v,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-700",children:(0,t.jsx)(D.ExternalLinkIcon,{className:"h-4 w-4"})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(F.Text,{className:"text-gray-600 text-xs",children:"Category"}),(0,t.jsx)("div",{className:"mt-1",children:c.category?(0,t.jsx)(w.Badge,{color:k,size:"xs",children:c.category}):(0,t.jsx)(F.Text,{className:"text-gray-400",children:"Uncategorized"})})]}),n&&(0,t.jsxs)("div",{className:"col-span-3",children:[(0,t.jsx)(F.Text,{className:"text-gray-600 text-xs",children:"Status"}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mt-2",children:[(0,t.jsx)(I.Switch,{checked:c.enabled,loading:g,onChange:y}),(0,t.jsx)(F.Text,{className:"text-sm",children:c.enabled?"Plugin is enabled and visible in marketplace":"Plugin is disabled and hidden from marketplace"})]})]})]})]}),c.description&&(0,t.jsxs)(R.Card,{children:[(0,t.jsx)(L.Title,{children:"Description"}),(0,t.jsx)(F.Text,{className:"mt-2",children:c.description})]}),c.keywords&&c.keywords.length>0&&(0,t.jsxs)(R.Card,{children:[(0,t.jsx)(L.Title,{children:"Keywords"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:c.keywords.map((e,a)=>(0,t.jsx)(w.Badge,{color:"gray",size:"xs",children:e},a))})]}),c.author&&(0,t.jsxs)(R.Card,{children:[(0,t.jsx)(L.Title,{children:"Author Information"}),(0,t.jsxs)(B.Grid,{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4",children:[c.author.name&&(0,t.jsxs)("div",{children:[(0,t.jsx)(F.Text,{className:"text-gray-600 text-xs",children:"Name"}),(0,t.jsx)(F.Text,{className:"font-semibold mt-1",children:c.author.name})]}),c.author.email&&(0,t.jsxs)("div",{children:[(0,t.jsx)(F.Text,{className:"text-gray-600 text-xs",children:"Email"}),(0,t.jsx)(F.Text,{className:"font-semibold mt-1",children:(0,t.jsx)("a",{href:`mailto:${c.author.email}`,className:"text-blue-500 hover:text-blue-700",children:c.author.email})})]})]})]}),c.homepage&&(0,t.jsxs)(R.Card,{children:[(0,t.jsx)(L.Title,{children:"Homepage"}),(0,t.jsxs)("a",{href:c.homepage,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-700 flex items-center gap-2 mt-2",children:[c.homepage,(0,t.jsx)(D.ExternalLinkIcon,{className:"h-4 w-4"})]})]}),(0,t.jsxs)(R.Card,{children:[(0,t.jsx)(L.Title,{children:"Metadata"}),(0,t.jsxs)(B.Grid,{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(F.Text,{className:"text-gray-600 text-xs",children:"Created At"}),(0,t.jsx)(F.Text,{className:"font-semibold mt-1",children:(0,d.formatDateString)(c.created_at)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(F.Text,{className:"text-gray-600 text-xs",children:"Updated At"}),(0,t.jsx)(F.Text,{className:"font-semibold mt-1",children:(0,d.formatDateString)(c.updated_at)})]}),c.created_by&&(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)(F.Text,{className:"text-gray-600 text-xs",children:"Created By"}),(0,t.jsx)(F.Text,{className:"font-semibold mt-1",children:c.created_by})]})]})]})]})};e.s(["default",0,({accessToken:e,userRole:i})=>{let[n,o]=(0,a.useState)([]),[c,d]=(0,a.useState)(!1),[u,m]=(0,a.useState)(!1),[h,x]=(0,a.useState)(!1),[p,f]=(0,a.useState)(null),[y,b]=(0,a.useState)(null),j=!!i&&(0,O.isAdminRole)(i),v=async()=>{if(e){m(!0);try{let t=await (0,r.getClaudeCodePluginsList)(e,!1);console.log(`Claude Code plugins: ${JSON.stringify(t)}`),o(t.plugins)}catch(e){console.error("Error fetching Claude Code plugins:",e)}finally{m(!1)}}};(0,a.useEffect)(()=>{v()},[e]);let w=async()=>{if(p&&e){x(!0);try{await (0,r.deleteClaudeCodePlugin)(e,p.name),M.default.success(`Plugin "${p.displayName}" deleted successfully`),v()}catch(e){console.error("Error deleting plugin:",e),M.default.error("Failed to delete plugin")}finally{x(!1),f(null)}}};return(0,t.jsxs)("div",{className:"w-full mx-auto flex-auto overflow-y-auto m-8 p-2",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2 mb-4",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Claude Code Plugins"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Manage Claude Code marketplace plugins. Add, enable, disable, or delete plugins that will be available in your marketplace catalog. Enabled plugins will appear in the public marketplace at"," ",(0,t.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:"/claude-code/marketplace.json"}),"."]}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(s.Button,{onClick:()=>{y&&b(null),d(!0)},disabled:!e||!j,children:"+ Add New Plugin"})})]}),y?(0,t.jsx)(q,{pluginId:y,onClose:()=>b(null),accessToken:e,isAdmin:j,onPluginUpdated:v}):(0,t.jsx)(P,{pluginsList:n,isLoading:u,onDeleteClick:(e,t)=>{f({name:e,displayName:t})},accessToken:e,onPluginUpdated:v,isAdmin:j,onPluginClick:e=>b(e)}),(0,t.jsx)(g,{visible:c,onClose:()=>{d(!1)},accessToken:e,onSuccess:()=>{v()}}),p&&(0,t.jsxs)(l.Modal,{title:"Delete Plugin",open:null!==p,onOk:w,onCancel:()=>{f(null)},confirmLoading:h,okText:"Delete",okButtonProps:{danger:!0},children:[(0,t.jsxs)("p",{children:["Are you sure you want to delete plugin:"," ",(0,t.jsx)("strong",{children:p.displayName}),"?"]}),(0,t.jsx)("p",{children:"This action cannot be undone."})]})]})}],704308)},345244,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(752978),l=e.i(994388),r=e.i(309426),i=e.i(599724),n=e.i(350967),o=e.i(278587),c=e.i(304967),d=e.i(629569),u=e.i(389083),m=e.i(677667),h=e.i(898667),g=e.i(130643),x=e.i(808613),p=e.i(311451),f=e.i(199133),y=e.i(592968),b=e.i(827252),j=e.i(702597),v=e.i(355619),w=e.i(764205),k=e.i(727749),_=e.i(435451),N=e.i(860585),C=e.i(500330),S=e.i(678784),T=e.i(118366),I=e.i(464571);let A=({tagId:e,onClose:s,accessToken:r,is_admin:n,editTag:o})=>{let[A]=x.Form.useForm(),[M,P]=(0,a.useState)(null),[O,E]=(0,a.useState)(o),[D,R]=(0,a.useState)([]),[B,F]=(0,a.useState)({}),L=async(e,t)=>{await (0,C.copyToClipboard)(e)&&(F(e=>({...e,[t]:!0})),setTimeout(()=>{F(e=>({...e,[t]:!1}))},2e3))},z=async()=>{if(r)try{let t=(await (0,w.tagInfoCall)(r,[e]))[e];t&&(P(t),o&&A.setFieldsValue({name:t.name,description:t.description,models:t.models,max_budget:t.litellm_budget_table?.max_budget,budget_duration:t.litellm_budget_table?.budget_duration}))}catch(e){console.error("Error fetching tag details:",e),k.default.fromBackend("Error fetching tag details: "+e)}};(0,a.useEffect)(()=>{z()},[e,r]),(0,a.useEffect)(()=>{r&&(0,j.fetchUserModels)("dummy-user","Admin",r,R)},[r]);let q=async e=>{if(r)try{await (0,w.tagUpdateCall)(r,{name:e.name,description:e.description,models:e.models,max_budget:e.max_budget,tpm_limit:e.tpm_limit,rpm_limit:e.rpm_limit,budget_duration:e.budget_duration}),k.default.success("Tag updated successfully"),E(!1),z()}catch(e){console.error("Error updating tag:",e),k.default.fromBackend("Error updating tag: "+e)}};return M?(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Button,{onClick:s,className:"mb-4",children:"← Back to Tags"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.Text,{className:"font-medium",children:"Tag Name:"}),(0,t.jsx)("span",{className:"font-mono px-2 py-1 bg-gray-100 rounded text-sm border border-gray-200",children:M.name}),(0,t.jsx)(I.Button,{type:"text",size:"small",icon:B["tag-name"]?(0,t.jsx)(S.CheckIcon,{size:12}):(0,t.jsx)(T.CopyIcon,{size:12}),onClick:()=>L(M.name,"tag-name"),className:`transition-all duration-200 ${B["tag-name"]?"text-green-600 bg-green-50 border-green-200":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`})]}),(0,t.jsx)(i.Text,{className:"text-gray-500",children:M.description||"No description"})]}),n&&!O&&(0,t.jsx)(l.Button,{onClick:()=>E(!0),children:"Edit Tag"})]}),O?(0,t.jsx)(c.Card,{children:(0,t.jsxs)(x.Form,{form:A,onFinish:q,layout:"vertical",initialValues:M,children:[(0,t.jsx)(x.Form.Item,{label:"Tag Name",name:"name",rules:[{required:!0,message:"Please input a tag name"}],children:(0,t.jsx)(p.Input,{className:"rounded-md border-gray-300"})}),(0,t.jsx)(x.Form.Item,{label:"Description",name:"description",children:(0,t.jsx)(p.Input.TextArea,{rows:4})}),(0,t.jsx)(x.Form.Item,{label:(0,t.jsxs)("span",{children:["Allowed Models",(0,t.jsx)(y.Tooltip,{title:"Select which models are allowed to process this type of data",children:(0,t.jsx)(b.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"models",children:(0,t.jsx)(f.Select,{mode:"multiple",placeholder:"Select Models",children:D.map(e=>(0,t.jsx)(f.Select.Option,{value:e,children:(0,v.getModelDisplayName)(e)},e))})}),(0,t.jsxs)(m.Accordion,{className:"mt-4 mb-4",children:[(0,t.jsx)(h.AccordionHeader,{children:(0,t.jsx)(d.Title,{className:"m-0",children:"Budget & Rate Limits"})}),(0,t.jsxs)(g.AccordionBody,{children:[(0,t.jsx)(x.Form.Item,{label:(0,t.jsxs)("span",{children:["最大预算"," ",(0,t.jsx)(y.Tooltip,{title:"最大金额 this tag can spend",children:(0,t.jsx)(b.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"max_budget",children:(0,t.jsx)(_.default,{step:.01,precision:2,width:200})}),(0,t.jsx)(x.Form.Item,{label:(0,t.jsxs)("span",{children:["Reset Budget"," ",(0,t.jsx)(y.Tooltip,{title:"How often the budget should reset",children:(0,t.jsx)(b.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"budget_duration",children:(0,t.jsx)(N.default,{onChange:e=>A.setFieldValue("budget_duration",e)})}),(0,t.jsx)("div",{className:"mt-4 p-3 bg-gray-50 rounded-md border border-gray-200",children:(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["TPM/RPM limits for tags are not currently supported. If you need this feature, please"," ",(0,t.jsx)("a",{href:"https://github.com/BerriAI/litellm/issues/new",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"create a GitHub issue"}),"."]})})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,t.jsx)(l.Button,{onClick:()=>E(!1),children:"Cancel"}),(0,t.jsx)(l.Button,{type:"submit",children:"Save Changes"})]})]})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(c.Card,{children:[(0,t.jsx)(d.Title,{children:"Tag Details"}),(0,t.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Text,{className:"font-medium",children:"Name"}),(0,t.jsx)(i.Text,{children:M.name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Text,{className:"font-medium",children:"Description"}),(0,t.jsx)(i.Text,{children:M.description||"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Text,{className:"font-medium",children:"Allowed Models"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:M.models&&0!==M.models.length?M.models.map(e=>(0,t.jsx)(u.Badge,{color:"blue",children:(0,t.jsx)(y.Tooltip,{title:`ID: ${e}`,children:M.model_info?.[e]||e})},e)):(0,t.jsx)(u.Badge,{color:"red",children:"All Models"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Text,{className:"font-medium",children:"Created"}),(0,t.jsx)(i.Text,{children:M.created_at?new Date(M.created_at).toLocaleString():"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Text,{className:"font-medium",children:"Last Updated"}),(0,t.jsx)(i.Text,{children:M.updated_at?new Date(M.updated_at).toLocaleString():"-"})]})]})]}),M.litellm_budget_table&&(0,t.jsxs)(c.Card,{children:[(0,t.jsx)(d.Title,{children:"Budget & Rate Limits"}),(0,t.jsxs)("div",{className:"space-y-4 mt-4",children:[void 0!==M.litellm_budget_table.max_budget&&null!==M.litellm_budget_table.max_budget&&(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Text,{className:"font-medium",children:"Max Budget"}),(0,t.jsxs)(i.Text,{children:["$",M.litellm_budget_table.max_budget]})]}),M.litellm_budget_table.budget_duration&&(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Text,{className:"font-medium",children:"Budget Duration"}),(0,t.jsx)(i.Text,{children:M.litellm_budget_table.budget_duration})]}),void 0!==M.litellm_budget_table.tpm_limit&&null!==M.litellm_budget_table.tpm_limit&&(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Text,{className:"font-medium",children:"TPM Limit"}),(0,t.jsx)(i.Text,{children:M.litellm_budget_table.tpm_limit.toLocaleString()})]}),void 0!==M.litellm_budget_table.rpm_limit&&null!==M.litellm_budget_table.rpm_limit&&(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Text,{className:"font-medium",children:"RPM Limit"}),(0,t.jsx)(i.Text,{children:M.litellm_budget_table.rpm_limit.toLocaleString()})]})]})]})]})]}):(0,t.jsx)("div",{children:"Loading..."})};var M=e.i(871943),P=e.i(360820),O=e.i(591935),E=e.i(94629),D=e.i(68155),R=e.i(152990),B=e.i(682830),F=e.i(269200),L=e.i(942232),z=e.i(977572),q=e.i(427612),U=e.i(64848),H=e.i(496020);let $="This is just a spend tag that was passed dynamically in a request. It does not control any LLM models.",K=({data:e,onEdit:r,onDelete:n,onSelectTag:o})=>{let[c,d]=a.default.useState([{id:"created_at",desc:!0}]),m=[{header:"Tag Name",accessorKey:"name",cell:({row:e})=>{let a=e.original,s=a.description===$;return(0,t.jsx)("div",{className:"overflow-hidden",children:(0,t.jsx)(y.Tooltip,{title:s?"You cannot view the information of a dynamically generated spend tag":a.name,children:(0,t.jsx)(l.Button,{size:"xs",variant:"light",className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5",onClick:()=>o(a.name),disabled:s,children:a.name})})})}},{header:"Description",accessorKey:"description",cell:({row:e})=>{let a=e.original;return(0,t.jsx)(y.Tooltip,{title:a.description,children:(0,t.jsx)("span",{className:"text-xs",children:a.description||"-"})})}},{header:"Allowed Models",accessorKey:"models",cell:({row:e})=>{let a=e.original;return(0,t.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:a?.models?.length===0?(0,t.jsx)(u.Badge,{size:"xs",className:"mb-1",color:"red",children:"All Models"}):a?.models?.map(e=>(0,t.jsx)(u.Badge,{size:"xs",className:"mb-1",color:"blue",children:(0,t.jsx)(y.Tooltip,{title:`ID: ${e}`,children:(0,t.jsx)(i.Text,{children:a.model_info?.[e]||e})})},e))})}},{header:"Created",accessorKey:"created_at",sortingFn:"datetime",cell:({row:e})=>{let a=e.original;return(0,t.jsx)("span",{className:"text-xs",children:new Date(a.created_at).toLocaleDateString()})}},{id:"actions",header:"Actions",cell:({row:e})=>{let a=e.original,l=a.description===$;return(0,t.jsxs)("div",{className:"flex space-x-2",children:[l?(0,t.jsx)(y.Tooltip,{title:"Dynamically generated spend tags cannot be edited",children:(0,t.jsx)(s.Icon,{icon:O.PencilAltIcon,size:"sm",className:"opacity-50 cursor-not-allowed","aria-label":"Edit tag (disabled)"})}):(0,t.jsx)(y.Tooltip,{title:"Edit tag",children:(0,t.jsx)(s.Icon,{icon:O.PencilAltIcon,size:"sm",onClick:()=>r(a),className:"cursor-pointer hover:text-blue-500"})}),l?(0,t.jsx)(y.Tooltip,{title:"Dynamically generated spend tags cannot be deleted",children:(0,t.jsx)(s.Icon,{icon:D.TrashIcon,size:"sm",className:"opacity-50 cursor-not-allowed","aria-label":"Delete tag (disabled)"})}):(0,t.jsx)(y.Tooltip,{title:"Delete tag",children:(0,t.jsx)(s.Icon,{icon:D.TrashIcon,size:"sm",onClick:()=>n(a.name),className:"cursor-pointer hover:text-red-500"})})]})}}],h=(0,R.useReactTable)({data:e,columns:m,state:{sorting:c},onSortingChange:d,getCoreRowModel:(0,B.getCoreRowModel)(),getSortedRowModel:(0,B.getSortedRowModel)(),enableSorting:!0});return(0,t.jsx)("div",{className:"rounded-lg custom-border relative",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(F.Table,{className:"[&_td]:py-0.5 [&_th]:py-1",children:[(0,t.jsx)(q.TableHead,{children:h.getHeaderGroups().map(e=>(0,t.jsx)(H.TableRow,{children:e.headers.map(e=>(0,t.jsx)(U.TableHeaderCell,{className:`py-1 h-8 ${"actions"===e.id?"sticky right-0 bg-white shadow-[-4px_0_8px_-6px_rgba(0,0,0,0.1)]":""}`,onClick:e.column.getToggleSortingHandler(),children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("div",{className:"flex items-center",children:e.isPlaceholder?null:(0,R.flexRender)(e.column.columnDef.header,e.getContext())}),"actions"!==e.id&&(0,t.jsx)("div",{className:"w-4",children:e.column.getIsSorted()?({asc:(0,t.jsx)(P.ChevronUpIcon,{className:"h-4 w-4 text-blue-500"}),desc:(0,t.jsx)(M.ChevronDownIcon,{className:"h-4 w-4 text-blue-500"})})[e.column.getIsSorted()]:(0,t.jsx)(E.SwitchVerticalIcon,{className:"h-4 w-4 text-gray-400"})})]})},e.id))},e.id))}),(0,t.jsx)(L.TableBody,{children:h.getRowModel().rows.length>0?h.getRowModel().rows.map(e=>(0,t.jsx)(H.TableRow,{className:"h-8",children:e.getVisibleCells().map(e=>(0,t.jsx)(z.TableCell,{className:`py-0.5 max-h-8 overflow-hidden text-ellipsis whitespace-nowrap ${"actions"===e.column.id?"sticky right-0 bg-white shadow-[-4px_0_8px_-6px_rgba(0,0,0,0.1)]":""}`,children:(0,R.flexRender)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,t.jsx)(H.TableRow,{children:(0,t.jsx)(z.TableCell,{colSpan:m.length,className:"h-8 text-center",children:(0,t.jsx)("div",{className:"text-center text-gray-500",children:(0,t.jsx)("p",{children:"No tags found"})})})})})]})})})};var V=e.i(779241),G=e.i(212931);let Q=({visible:e,onCancel:a,onSubmit:s,availableModels:r})=>{let[i]=x.Form.useForm();return(0,t.jsx)(G.Modal,{title:"Create New Tag",open:e,width:800,footer:null,onCancel:()=>{i.resetFields(),a()},children:(0,t.jsxs)(x.Form,{form:i,onFinish:e=>{s(e),i.resetFields()},labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,t.jsx)(x.Form.Item,{label:"Tag Name",name:"tag_name",rules:[{required:!0,message:"Please input a tag name"}],children:(0,t.jsx)(V.TextInput,{})}),(0,t.jsx)(x.Form.Item,{label:"Description",name:"description",children:(0,t.jsx)(p.Input.TextArea,{rows:4})}),(0,t.jsx)(x.Form.Item,{label:(0,t.jsxs)("span",{children:["Allowed Models",(0,t.jsx)(y.Tooltip,{title:"Select which models are allowed to process requests from this tag",children:(0,t.jsx)(b.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"allowed_llms",children:(0,t.jsx)(f.Select,{mode:"multiple",placeholder:"Select Models",children:r.map(e=>(0,t.jsx)(f.Select.Option,{value:e.model_info.id,children:(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{children:e.model_name}),(0,t.jsxs)("span",{className:"text-gray-400 ml-2",children:["(",e.model_info.id,")"]})]})},e.model_info.id))})}),(0,t.jsxs)(m.Accordion,{className:"mt-4 mb-4",children:[(0,t.jsx)(h.AccordionHeader,{children:(0,t.jsx)(d.Title,{className:"m-0",children:"Budget & Rate Limits (Optional)"})}),(0,t.jsxs)(g.AccordionBody,{children:[(0,t.jsx)(x.Form.Item,{className:"mt-4",label:(0,t.jsxs)("span",{children:["最大预算"," ",(0,t.jsx)(y.Tooltip,{title:"最大金额 this tag can spend. When reached, requests with this tag will be blocked",children:(0,t.jsx)(b.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"max_budget",children:(0,t.jsx)(_.default,{step:.01,precision:2,width:200})}),(0,t.jsx)(x.Form.Item,{className:"mt-4",label:(0,t.jsxs)("span",{children:["Reset Budget"," ",(0,t.jsx)(y.Tooltip,{title:"How often the budget should reset. For example, setting 'daily' will reset the budget every 24 hours",children:(0,t.jsx)(b.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"budget_duration",children:(0,t.jsx)(N.default,{onChange:e=>i.setFieldValue("budget_duration",e)})}),(0,t.jsx)("div",{className:"mt-4 p-3 bg-gray-50 rounded-md border border-gray-200",children:(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["TPM/RPM limits for tags are not currently supported. If you need this feature, please"," ",(0,t.jsx)("a",{href:"https://github.com/BerriAI/litellm/issues/new",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"create a GitHub issue"}),"."]})})]})]}),(0,t.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,t.jsx)(l.Button,{type:"submit",children:"Create Tag"})})]})})};e.s(["default",0,({accessToken:e,userID:c,userRole:d})=>{let[u,m]=(0,a.useState)([]),[h,g]=(0,a.useState)(!1),[x,p]=(0,a.useState)(null),[f,y]=(0,a.useState)(!1),[b,j]=(0,a.useState)(!1),[v,_]=(0,a.useState)(null),[N,C]=(0,a.useState)(""),[S,T]=(0,a.useState)([]),I=async()=>{if(e)try{let t=await (0,w.tagListCall)(e);console.log("List tags response:",t),m(Object.values(t))}catch(e){console.error("Error fetching tags:",e),k.default.fromBackend("Error fetching tags: "+e)}},M=async t=>{if(e)try{await (0,w.tagCreateCall)(e,{name:t.tag_name,description:t.description,models:t.allowed_llms,max_budget:t.max_budget,soft_budget:t.soft_budget,tpm_limit:t.tpm_limit,rpm_limit:t.rpm_limit,budget_duration:t.budget_duration}),k.default.success("Tag created successfully"),g(!1),I()}catch(e){console.error("Error creating tag:",e),k.default.fromBackend("Error creating tag: "+e)}},P=async e=>{_(e),j(!0)},O=async()=>{if(e&&v){try{await (0,w.tagDeleteCall)(e,v),k.default.success("Tag deleted successfully"),I()}catch(e){console.error("Error deleting tag:",e),k.default.fromBackend("Error deleting tag: "+e)}j(!1),_(null)}};return(0,a.useEffect)(()=>{c&&d&&e&&(async()=>{try{let t=await (0,w.modelInfoCall)(e,c,d);t&&t.data&&T(t.data)}catch(e){console.error("Error fetching models:",e),k.default.fromBackend("Error fetching models: "+e)}})()},[e,c,d]),(0,a.useEffect)(()=>{I()},[e]),(0,t.jsx)("div",{className:"w-full mx-4 h-[75vh]",children:x?(0,t.jsx)(A,{tagId:x,onClose:()=>{p(null),y(!1)},accessToken:e,is_admin:"Admin"===d,editTag:f}):(0,t.jsxs)("div",{className:"gap-2 p-8 h-[75vh] w-full mt-2",children:[(0,t.jsxs)("div",{className:"flex justify-between mt-2 w-full items-center mb-4",children:[(0,t.jsx)("h1",{children:"Tag Management"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[N&&(0,t.jsxs)(i.Text,{children:["Last Refreshed: ",N]}),(0,t.jsx)(s.Icon,{icon:o.RefreshIcon,variant:"shadow",size:"xs",className:"self-center cursor-pointer",onClick:()=>{I(),C(new Date().toLocaleString())}})]})]}),(0,t.jsxs)(i.Text,{className:"mb-4",children:["Click on a tag name to view and edit its details.",(0,t.jsxs)("p",{children:["You can use tags to restrict the usage of certain LLMs based on tags passed in the request. Read more about tag routing"," ",(0,t.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/tag_routing",target:"_blank",rel:"noopener noreferrer",children:"here"}),"."]})]}),(0,t.jsx)(l.Button,{className:"mb-4",onClick:()=>g(!0),children:"+ Create New Tag"}),(0,t.jsx)(n.Grid,{numItems:1,className:"gap-2 pt-2 pb-2 h-[75vh] w-full mt-2",children:(0,t.jsx)(r.Col,{numColSpan:1,children:(0,t.jsx)(K,{data:u,onEdit:e=>{p(e.name),y(!0)},onDelete:P,onSelectTag:p})})}),(0,t.jsx)(Q,{visible:h,onCancel:()=>g(!1),onSubmit:M,availableModels:S}),b&&(0,t.jsx)("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:(0,t.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,t.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:(0,t.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),(0,t.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[(0,t.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,t.jsx)("div",{className:"sm:flex sm:items-start",children:(0,t.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[(0,t.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Delete Tag"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this tag?"})})]})})}),(0,t.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,t.jsx)(l.Button,{onClick:O,color:"red",className:"ml-2",children:"Delete"}),(0,t.jsx)(l.Button,{onClick:()=>{j(!1),_(null)},children:"Cancel"})]})]})]})})]})})}],345244)},213970,657150,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(220486),l=e.i(727749),r=e.i(447593),i=e.i(955135),n=e.i(91500),o=e.i(646563),c=e.i(464571),d=e.i(311451),u=e.i(199133),m=e.i(592968),h=e.i(422233),g=e.i(761793),x=e.i(964421),p=e.i(254530),f=e.i(689020),y=e.i(921687),b=e.i(953860),j=e.i(903446),j=j,v=e.i(37727),w=e.i(475254);let k=(0,w.default)("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);e.s(["default",()=>k],657150);var _=e.i(531278);let N=(0,w.default)("user-round",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);var C=e.i(918789),S=e.i(650056),T=e.i(219470),I=e.i(843153),A=e.i(966988),M=e.i(989022),P=e.i(152401);function O({messages:e,isLoading:a}){if(0===e.length)return(0,t.jsx)("div",{className:"h-full"});let s=[],l=0;for(;l<e.length;){let t=e[l];if("user"===t.role){let a=e[l+1];if(a?.role==="assistant"){s.push({user:t,assistant:a}),l+=2;continue}s.push({user:t})}else"assistant"===t.role&&s.push({assistant:t});l+=1}let r=e=>(0,t.jsxs)("div",{className:"whitespace-pre-wrap break-words",style:{wordWrap:"break-word",overflowWrap:"break-word",wordBreak:"break-word",hyphens:"auto"},children:[(0,t.jsx)(I.default,{message:e}),(0,t.jsx)(C.default,{components:{code({node:e,inline:a,className:s,children:l,...r}){let i=/language-(\w+)/.exec(s||"");return!a&&i?(0,t.jsx)(S.Prism,{style:T.coy,language:i[1],PreTag:"div",className:"rounded-md my-2",wrapLines:!0,wrapLongLines:!0,...r,children:String(l).replace(/\n$/,"")}):(0,t.jsx)("code",{className:`${s} px-1.5 py-0.5 rounded bg-gray-100 text-sm font-mono`,...r,children:l})},pre:({node:e,...a})=>(0,t.jsx)("pre",{style:{overflowX:"auto",maxWidth:"100%"},...a})},children:"string"==typeof e.content?e.content:""})]});return(0,t.jsxs)("div",{className:"flex flex-col gap-6 min-w-0 w-full p-4",children:[s.map((e,l)=>{let i=e.assistant,n=i?.model||"助手";return(0,t.jsxs)("div",{className:"space-y-4",children:[e.user&&(0,t.jsxs)("div",{className:"space-y-2 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-blue-100 text-blue-600",children:(0,t.jsx)(N,{size:16})}),(0,t.jsx)("div",{className:"text-sm font-semibold text-gray-700",children:"你"})]}),r(e.user)]}),(0,t.jsx)("div",{className:"border-t border-gray-200"}),i?(0,t.jsxs)("div",{className:"space-y-3 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-gray-100 text-gray-600",children:(0,t.jsx)(k,{size:16})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:n}),i.toolName&&(0,t.jsx)("span",{className:"rounded bg-gray-100 px-2 py-0.5 text-xs text-gray-600",children:i.toolName})]})]}),i.reasoningContent&&(0,t.jsx)(A.default,{reasoningContent:i.reasoningContent}),i.searchResults&&(0,t.jsx)(P.SearchResultsDisplay,{searchResults:i.searchResults}),r(i),(i.timeToFirstToken||i.totalLatency||i.usage)&&(0,t.jsx)(M.default,{timeToFirstToken:i.timeToFirstToken,totalLatency:i.totalLatency,usage:i.usage,toolName:i.toolName})]}):a&&l===s.length-1?(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,t.jsx)(_.Loader2,{size:18,className:"animate-spin"}),(0,t.jsx)("span",{children:"正在生成响应..."})]}):(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"等待响应中..."})]},l)}),a&&0===s.length&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-500",children:[(0,t.jsx)(_.Loader2,{size:18,className:"animate-spin"}),(0,t.jsx)("span",{children:"正在生成响应..."})]})]})}var E=e.i(482725);function D({value:e,options:a,loading:s,config:l,onChange:r}){return(0,t.jsx)(u.Select,{value:e||void 0,placeholder:s?`正在加载${l.selectorLabel}...`:l.selectorPlaceholder,onChange:r,loading:s,showSearch:!0,filterOption:(e,t)=>(t?.label??"").toLowerCase().includes(e.toLowerCase()),options:a,className:"w-48 md:w-64 lg:w-72",notFoundContent:s?(0,t.jsx)("div",{className:"flex items-center justify-center py-2",children:(0,t.jsx)(E.Spin,{size:"small"})}):`暂无可用${l.selectorLabel}`})}var R=e.i(318059),B=e.i(916940),F=e.i(891547),L=e.i(536916),z=e.i(312361),q=e.i(282786),U=e.i(850627);let H="/v1/chat/completions",$="/a2a",K={[H]:{id:H,label:"/v1/chat/completions",selectorType:"model",selectorLabel:"模型",selectorPlaceholder:"选择模型",inputPlaceholder:"发送提示词以对比模型",loadingMessage:"正在汇总所有模型的响应...",validationMessage:"发送消息前请先选择模型。"},[$]:{id:$,label:"/a2a（智能体）",selectorType:"agent",selectorLabel:"智能体",selectorPlaceholder:"选择智能体",inputPlaceholder:"发送消息以对比智能体",loadingMessage:"正在汇总所有智能体的响应...",validationMessage:"发送消息前请先选择智能体。"}},V=e=>"agent"===K[e].selectorType,G=(e,t)=>V(t)?e.agent:e.model;function Q({comparison:e,onUpdate:s,onRemove:l,canRemove:r,selectorOptions:i,isLoadingOptions:n,endpointConfig:o,apiKey:c}){let d=V(o.id),u=G(e,o.id),[m,h]=(0,a.useState)(!1),g=(t,a)=>{s({[t]:a},e.applyAcrossModels?{applyToAll:!0,keysToApply:[t]}:void 0)},x=e.useAdvancedParams?1:.4,p=e.useAdvancedParams?"text-gray-700":"text-gray-400",f=(0,t.jsxs)("div",{className:"w-[300px] max-h-[65vh] overflow-y-auto relative",children:[(0,t.jsx)("button",{onClick:()=>{h(!1)},className:"absolute top-0 right-0 p-1 hover:bg-gray-100 rounded transition-colors text-gray-500 hover:text-gray-700 z-10",children:(0,t.jsx)(v.X,{size:14})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(L.Checkbox,{checked:e.applyAcrossModels,onChange:t=>{t.target.checked?s({applyAcrossModels:!0,temperature:e.temperature,maxTokens:e.maxTokens,tags:[...e.tags],vectorStores:[...e.vectorStores],guardrails:[...e.guardrails],useAdvancedParams:e.useAdvancedParams},{applyToAll:!0,keysToApply:["temperature","maxTokens","tags","vectorStores","guardrails","useAdvancedParams"]}):s({applyAcrossModels:!1})},children:(0,t.jsx)("span",{className:"text-xs font-medium",children:"跨模型同步设置"})})}),(0,t.jsx)(z.Divider,{className:"border-gray-200"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-xs font-semibold text-gray-700 mb-1.5 uppercase tracking-wide",children:"通用设置"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-gray-600 block mb-0.5",children:"标签"}),(0,t.jsx)(R.default,{value:e.tags,onChange:e=>g("tags",e),accessToken:c})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-gray-600 block mb-0.5",children:"向量库"}),(0,t.jsx)(B.default,{value:e.vectorStores,onChange:e=>g("vectorStores",e),accessToken:c})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-gray-600 block mb-0.5",children:"护栏"}),(0,t.jsx)(F.default,{value:e.guardrails,onChange:e=>g("guardrails",e),accessToken:c})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-xs font-semibold text-gray-700 mb-1.5 uppercase tracking-wide",children:"高级设置"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"flex items-center gap-2 pb-1",children:(0,t.jsx)(L.Checkbox,{checked:e.useAdvancedParams,onChange:t=>{s({useAdvancedParams:t.target.checked},e.applyAcrossModels?{applyToAll:!0,keysToApply:["useAdvancedParams"]}:void 0)},children:(0,t.jsx)("span",{className:"text-sm font-medium",children:"启用高级参数"})})}),(0,t.jsxs)("div",{className:"space-y-2 transition-opacity duration-200",style:{opacity:x},children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("label",{className:`text-xs font-medium ${p}`,children:"温度"}),(0,t.jsx)("span",{className:`text-xs ${p}`,children:e.temperature.toFixed(2)})]}),(0,t.jsx)(U.Slider,{min:0,max:2,step:.01,value:e.temperature,onChange:e=>{g("temperature",Math.min(2,Math.max(0,Number((Array.isArray(e)?e[0]:e).toFixed(2)))))},disabled:!e.useAdvancedParams})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("label",{className:`text-xs font-medium ${p}`,children:"最大 Tokens"}),(0,t.jsx)("span",{className:`text-xs ${p}`,children:e.maxTokens})]}),(0,t.jsx)(U.Slider,{min:1,max:32768,step:1,value:e.maxTokens,onChange:e=>{g("maxTokens",Math.min(32768,Math.max(1,Math.round(Array.isArray(e)?e[0]:e))))},disabled:!e.useAdvancedParams})]})]})]})]})]})]});return(0,t.jsxs)("div",{className:"bg-white first:border-l-0 border-l border-gray-200 flex flex-col min-h-0",children:[(0,t.jsxs)("div",{className:"border-b flex items-center justify-between gap-3 px-4 py-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,t.jsx)(D,{value:u,options:i,loading:n,config:o,onChange:e=>s(d?{agent:e}:{model:e})}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(q.Popover,{content:f,trigger:[],open:m,onOpenChange:()=>{},placement:"bottomRight",destroyOnHidden:!1,children:(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),h(e=>!e)},className:`p-2 rounded-lg transition-colors ${m?"bg-gray-200 text-gray-700":"hover:bg-gray-100 text-gray-600"}`,children:(0,t.jsx)(j.default,{size:18})})})})]}),r&&(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),l()},className:"p-2 hover:bg-red-50 text-red-600 rounded-lg transition-colors",children:(0,t.jsx)(v.X,{size:18})})]}),(0,t.jsx)("div",{className:"relative flex-1 flex flex-col min-h-0",children:(0,t.jsx)("div",{className:"flex-1 max-h-[calc(100vh-385px)] overflow-auto rounded-b-2xl",children:(0,t.jsx)(O,{messages:e.messages,isLoading:e.isLoading})})})]})}var W=e.i(132104);let{TextArea:J}=d.Input;function Y({value:e,onChange:a,onSend:s,disabled:l,hasAttachment:r,uploadComponent:i}){let n=!l&&(e.trim().length>0||!!r);return(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)("div",{className:"flex items-center flex-1 bg-white border border-gray-300 rounded-xl px-3 py-1 min-h-[44px]",children:[i&&(0,t.jsx)("div",{className:"flex-shrink-0 mr-2",children:i}),(0,t.jsx)(J,{value:e,onChange:e=>a(e.target.value),onKeyDown:e=>{"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),n&&s())},placeholder:"输入你的消息...（Shift+Enter 换行）",disabled:l,className:"flex-1",autoSize:{minRows:1,maxRows:4},style:{resize:"none",border:"none",boxShadow:"none",background:"transparent",padding:"4px 0",fontSize:"14px",lineHeight:"20px"}}),(0,t.jsx)(c.Button,{onClick:s,disabled:!n,icon:(0,t.jsx)(W.ArrowUpOutlined,{}),shape:"circle"})]})})}let X=["请总结关键要点。","你做了哪些假设？","下一步建议是什么？"],Z=["写一首诗","解释一下量子计算","帮我起草一封礼貌的会议邀请邮件"];function ee({accessToken:e,disabledPersonalKeyCreation:s}){let[j,v]=(0,a.useState)([{id:"1",model:"",agent:"",messages:[],isLoading:!1,tags:[],mcpTools:[],vectorStores:[],guardrails:[],temperature:1,maxTokens:2048,applyAcrossModels:!1,useAdvancedParams:!1},{id:"2",model:"",agent:"",messages:[],isLoading:!1,tags:[],mcpTools:[],vectorStores:[],guardrails:[],temperature:1,maxTokens:2048,applyAcrossModels:!1,useAdvancedParams:!1}]),[w,k]=(0,a.useState)([]),[_,N]=(0,a.useState)([]),[C,S]=(0,a.useState)(!1),[T,I]=(0,a.useState)(!1),[A,M]=(0,a.useState)(H),P=K[A],O=V(A),E=O?_.map(e=>({value:e.agent_name,label:e.agent_name||e.agent_id})):w.map(e=>({value:e,label:e})),D=O?T:C,[R,B]=(0,a.useState)(""),[F,L]=(0,a.useState)(null),[z,q]=(0,a.useState)(null),[U,$]=(0,a.useState)(s?"custom":"session"),[W,J]=(0,a.useState)(""),[ee,et]=(0,a.useState)(""),[ea]=(0,a.useState)(()=>sessionStorage.getItem("customProxyBaseUrl")||"");(0,a.useEffect)(()=>{let e=setTimeout(()=>{et(W)},300);return()=>clearTimeout(e)},[W]),(0,a.useEffect)(()=>()=>{z&&URL.revokeObjectURL(z)},[z]);let es=(0,a.useMemo)(()=>"session"===U?e||"":ee.trim(),[U,e,ee]),el=(0,a.useMemo)(()=>j.length>0&&j.every(e=>!e.isLoading&&e.messages.some(e=>"assistant"===e.role)),[j]);(0,a.useEffect)(()=>{let e=!0;return(async()=>{if(!es)return k([]);S(!0);try{let t=await (0,f.fetchAvailableModels)(es);if(!e)return;let a=Array.from(new Set(t.map(e=>e.model_group)));k(a)}catch(t){console.error("CompareUI: failed to fetch models",t),e&&k([])}finally{e&&S(!1)}})(),()=>{e=!1}},[es]),(0,a.useEffect)(()=>{let e=!0;return(async()=>{if(!es||!O)return N([]);I(!0);try{let t=await (0,y.fetchAvailableAgents)(es,ea||void 0);if(!e)return;N(t)}catch(t){console.error("CompareUI: failed to fetch agents",t),e&&N([])}finally{e&&I(!1)}})(),()=>{e=!1}},[es,O]),(0,a.useEffect)(()=>{0!==w.length&&v(e=>e.map((e,t)=>({...e,temperature:e.temperature??1,maxTokens:e.maxTokens??2048,applyAcrossModels:e.applyAcrossModels??!1,useAdvancedParams:e.useAdvancedParams??!1,...e.model?{}:{model:w[t%w.length]??""}})))},[w]);let er=()=>{z&&URL.revokeObjectURL(z),L(null),q(null)},ei=(e,t)=>{v(a=>a.map(a=>{if(a.id!==e)return a;let s=[...a.messages],l=s[s.length-1];return l&&"assistant"===l.role?s[s.length-1]={...l,timeToFirstToken:t}:l&&"user"===l.role&&s.push({role:"assistant",content:"",timeToFirstToken:t}),{...a,messages:s}}))},en=(e,t)=>{v(a=>a.map(a=>{if(a.id!==e)return a;let s=[...a.messages],l=s[s.length-1];return l&&"assistant"===l.role?s[s.length-1]={...l,totalLatency:t}:l&&"user"===l.role&&s.push({role:"assistant",content:"",totalLatency:t}),{...a,messages:s}}))},eo=!!e,ec=async e=>{let t=e.trim(),a=!!F;if(!t&&!a)return;if(!es)return void l.default.fromBackend("请提供虚拟密钥，或选择“当前 UI 会话”");if(0===j.length)return;if(j.some(e=>{let t;return!((t=G(e,A))&&t.trim())}))return void l.default.fromBackend(P.validationMessage);let s=a?await (0,x.createChatMultimodalMessage)(t,F):{role:"user",content:t},r=(0,x.createChatDisplayMessage)(t,a,z||void 0,F?.name),i=new Map;j.forEach(e=>{let a=e.traceId??(0,h.v4)(),l=[...e.messages.map(({role:e,content:t})=>({role:e,content:Array.isArray(t)||"string"==typeof t?t:""})),s];i.set(e.id,{id:e.id,model:e.model,agent:e.agent,inputMessage:t,traceId:a,tags:e.tags,vectorStores:e.vectorStores,guardrails:e.guardrails,temperature:e.temperature,maxTokens:e.maxTokens,displayMessages:[...e.messages,r],apiChatHistory:l})}),0!==i.size&&(v(e=>e.map(e=>{let t=i.get(e.id);return t?{...e,traceId:t.traceId,messages:t.displayMessages,isLoading:!0}:e})),B(""),er(),i.forEach(e=>{let t=e.tags.length>0?e.tags:void 0,a=e.vectorStores.length>0?e.vectorStores:void 0,s=e.guardrails.length>0?e.guardrails:void 0,r=j.find(t=>t.id===e.id),i=r?.useAdvancedParams??!1;(O?(0,b.makeA2AStreamMessageRequest)(e.agent,e.inputMessage,(t,a)=>{v(s=>s.map(s=>{if(s.id!==e.id)return s;let l=[...s.messages],r=l[l.length-1];return r&&"assistant"===r.role?l[l.length-1]={...r,content:t,model:r.model??a}:l.push({role:"assistant",content:t,model:a}),{...s,messages:l}}))},es,void 0,t=>ei(e.id,t),t=>en(e.id,t),void 0,ea||void 0):(0,p.makeOpenAIChatCompletionRequest)(e.apiChatHistory,(t,a)=>{var s;return s=e.id,void(t&&v(e=>e.map(e=>{if(e.id!==s)return e;let l=[...e.messages],r=l[l.length-1];if(r&&"assistant"===r.role){let e="string"==typeof r.content?r.content:"";l[l.length-1]={...r,content:e+t,model:r.model??a}}else l.push({role:"assistant",content:t,model:a});return{...e,messages:l}})))},e.model,es,t,void 0,t=>{var a;return a=e.id,void(t&&v(e=>e.map(e=>{if(e.id!==a)return e;let s=[...e.messages],l=s[s.length-1];return l&&"assistant"===l.role?s[s.length-1]={...l,reasoningContent:(l.reasoningContent||"")+t}:l&&"user"===l.role&&s.push({role:"assistant",content:"",reasoningContent:t}),{...e,messages:s}})))},t=>ei(e.id,t),t=>{var a;return a=e.id,void v(e=>e.map(e=>{if(e.id!==a)return e;let s=[...e.messages],l=s[s.length-1];return l&&"assistant"===l.role&&(s[s.length-1]={...l,usage:t,toolName:void 0}),{...e,messages:s}}))},e.traceId,a,s,void 0,void 0,void 0,t=>{var a;return a=e.id,void(t&&v(e=>e.map(e=>{if(e.id!==a)return e;let s=[...e.messages],l=s[s.length-1];return l&&"assistant"===l.role&&(s[s.length-1]={...l,searchResults:t}),{...e,messages:s}})))},i?e.temperature:void 0,i?e.maxTokens:void 0,t=>en(e.id,t),ea||void 0)).catch(t=>{let a=t instanceof Error?t.message:String(t);console.error("CompareUI: failed to fetch response",t),l.default.fromBackend(a),v(t=>t.map(t=>{if(t.id!==e.id)return t;let s=[...t.messages],l=s[s.length-1],r=l&&"assistant"===l.role&&"string"==typeof l.content?l.content:"";return l&&"assistant"===l.role?s[s.length-1]={...l,content:r?`${r}
获取响应失败：${a}`:`获取响应失败：${a}`}:s.push({role:"assistant",content:`获取响应失败：${a}`}),{...t,messages:s}}))}).finally(()=>{v(t=>t.map(t=>t.id===e.id?{...t,isLoading:!1}:t))})}))},ed=e=>{B(e)},eu=j.some(e=>e.messages.length>0),em=j.some(e=>e.isLoading),eh=!!F,eg=!!F?.name.toLowerCase().endsWith(".pdf"),ex=!eu&&!em&&!eh;return(0,t.jsx)("div",{className:"w-full h-full p-4 bg-white",children:(0,t.jsxs)("div",{className:"rounded-2xl border border-gray-200 bg-white shadow-sm min-h-[calc(100vh-160px)] flex flex-col",children:[(0,t.jsx)("div",{className:"border-b px-4 py-2",children:(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"虚拟密钥来源"}),(0,t.jsxs)(u.Select,{value:U,onChange:e=>$(e),disabled:s,className:"w-48",children:[(0,t.jsx)(u.Select.Option,{value:"session",disabled:!eo,children:"当前 UI 会话"}),(0,t.jsx)(u.Select.Option,{value:"custom",children:"虚拟密钥"})]}),"custom"===U&&(0,t.jsx)(d.Input.Password,{value:W,onChange:e=>J(e.target.value),placeholder:"输入虚拟密钥",className:"w-56"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"端点"}),(0,t.jsx)(u.Select,{value:A,onChange:e=>M(e),className:"w-56",children:Object.values(K).map(e=>({value:e.id,label:e.label})).map(e=>(0,t.jsx)(u.Select.Option,{value:e.value,children:e.label},e.value))})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(c.Button,{onClick:()=>{v(e=>e.map(e=>({...e,messages:[],traceId:void 0,isLoading:!1}))),B(""),er()},disabled:!eu,icon:(0,t.jsx)(r.ClearOutlined,{}),children:"清空全部对话"}),(0,t.jsx)(m.Tooltip,{title:j.length>=3?"最多可同时对比 3 个模型":"添加一个对比栏",children:(0,t.jsx)(c.Button,{onClick:()=>{if(j.length>=3)return;let e=w[j.length%(w.length||1)]??"",t=_[j.length%(_.length||1)]?.agent_name??"",a={id:Date.now().toString(),model:e,agent:t,messages:[],isLoading:!1,tags:[],mcpTools:[],vectorStores:[],guardrails:[],temperature:1,maxTokens:2048,applyAcrossModels:!1,useAdvancedParams:!1};v(e=>[...e,a])},disabled:j.length>=3,icon:(0,t.jsx)(o.PlusOutlined,{}),children:"添加对比"})})]})]})}),(0,t.jsx)("div",{className:"grid flex-1 min-h-0 auto-rows-[minmax(0,1fr)]",style:{gridTemplateColumns:`repeat(${j.length}, minmax(0, 1fr))`},children:j.map(e=>(0,t.jsx)(Q,{comparison:e,onUpdate:(t,a)=>{var s;return s=e.id,void v(e=>{if(a?.applyToAll&&a.keysToApply?.length){let l={};a.keysToApply.forEach(e=>{let a=t[e];void 0!==a&&(l[e]=Array.isArray(a)?[...a]:a)});let r=Object.keys(l).length>0;return e.map(e=>e.id===s?{...e,...t}:r?{...e,...l}:e)}return e.map(e=>e.id===s?{...e,...t}:e)})},onRemove:()=>{var t;return t=e.id,void(j.length>1&&v(e=>e.filter(e=>e.id!==t)))},canRemove:j.length>1,selectorOptions:E,isLoadingOptions:D,endpointConfig:P,apiKey:es},e.id))}),(0,t.jsx)("div",{className:"flex justify-center pb-4",children:(0,t.jsx)("div",{className:"w-full max-w-3xl px-4",children:(0,t.jsxs)("div",{className:"border border-gray-200 shadow-lg rounded-xl bg-white p-4",children:[(0,t.jsx)("div",{className:"flex items-center justify-between gap-4 mb-3 min-h-8",children:eh?(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"附件已就绪，可发送"}):ex?(0,t.jsx)("div",{className:"flex items-center gap-2 overflow-x-auto",children:Z.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>ed(e),className:"shrink-0 rounded-full border border-gray-200 px-3 py-1 text-xs font-medium text-gray-600 transition-colors hover:bg-gray-100 cursor-pointer",children:e},e))}):el&&!eh?(0,t.jsx)("div",{className:"flex items-center gap-2 overflow-x-auto",children:X.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>ed(e),className:"shrink-0 rounded-full border border-gray-200 px-3 py-1 text-xs font-medium text-gray-600 transition-colors hover:bg-gray-100 cursor-pointer",children:e},e))}):em?(0,t.jsxs)("span",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,t.jsx)("span",{className:"h-2 w-2 rounded-full bg-blue-500 animate-pulse","aria-hidden":!0}),P.loadingMessage]}):(0,t.jsx)("span",{className:"text-sm text-gray-500",children:P.inputPlaceholder})}),F&&(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,t.jsx)("div",{className:"relative inline-block",children:eg?(0,t.jsx)("div",{className:"w-10 h-10 rounded-md bg-red-500 flex items-center justify-center",children:(0,t.jsx)(n.FilePdfOutlined,{style:{fontSize:"16px",color:"white"}})}):(0,t.jsx)("img",{src:z||"",alt:"Upload preview",className:"w-10 h-10 rounded-md border border-gray-200 object-cover"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:F.name}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:eg?"PDF":"图片"})]}),(0,t.jsx)("button",{className:"flex items-center justify-center w-6 h-6 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded-full transition-colors",onClick:er,children:(0,t.jsx)(i.DeleteOutlined,{style:{fontSize:"12px"}})})]})}),(0,t.jsx)(Y,{value:R,onChange:e=>{B(e)},onSend:()=>{ec(R)},disabled:0===j.length||j.every(e=>e.isLoading),hasAttachment:eh,uploadComponent:(0,t.jsx)(g.default,{chatUploadedImage:F,chatImagePreviewUrl:z,onImageUpload:e=>(z&&URL.revokeObjectURL(z),L(e),q(URL.createObjectURL(e)),!1),onRemoveImage:er})})]})})})]})})}var et=e.i(653824),ea=e.i(881073),es=e.i(197647),el=e.i(723731),er=e.i(404206),ei=e.i(135214),en=e.i(62478),eo=e.i(213548);function ec(){let{accessToken:e,userRole:l,userId:r,disabledPersonalKeyCreation:i,token:n}=(0,ei.default)(),o=(0,eo.buildTranslationsForLocale)("zh-CN"),c=(0,eo.buildTranslationsForLocale)("en-US"),d=(e,t)=>{let a=t.split("."),s=e;for(let e of a)if(!s||"object"!=typeof s||!(e in s))return null;else s=s[e];return"string"==typeof s?s:null},u=(e,t)=>d(o,e)||d(c,e)||t,[m,h]=(0,a.useState)(void 0);return(0,a.useEffect)(()=>{(async()=>{if(e){let t=await (0,en.fetchProxySettings)(e);t&&h({PROXY_BASE_URL:t.PROXY_BASE_URL,LITELLM_UI_API_DOC_BASE_URL:t.LITELLM_UI_API_DOC_BASE_URL})}})()},[e]),(0,t.jsxs)(et.TabGroup,{className:"h-full w-full",children:[(0,t.jsxs)(ea.TabList,{className:"mb-0",children:[(0,t.jsx)(es.Tab,{children:u("playground.tabs.chat","Chat")}),(0,t.jsx)(es.Tab,{children:u("playground.tabs.compare","Compare")})]}),(0,t.jsxs)(el.TabPanels,{className:"h-full",children:[(0,t.jsx)(er.TabPanel,{className:"h-full",children:(0,t.jsx)(s.default,{accessToken:e,token:n,userRole:l,userID:r,disabledPersonalKeyCreation:i,proxySettings:m})}),(0,t.jsx)(er.TabPanel,{className:"h-full",children:(0,t.jsx)(ee,{accessToken:e,disabledPersonalKeyCreation:i})})]})]})}e.s(["default",()=>ec],213970)},559061,e=>{"use strict";var t=e.i(843476),a=e.i(584935),s=e.i(304967),l=e.i(309426),r=e.i(350967),i=e.i(752978),n=e.i(621642),o=e.i(25080),c=e.i(37091),d=e.i(197647),u=e.i(653824),m=e.i(881073),h=e.i(404206),g=e.i(723731),x=e.i(599724),p=e.i(271645),f=e.i(727749),y=e.i(144267),b=e.i(278587),j=e.i(764205),v=e.i(994388),w=e.i(220508),k=e.i(964306);let _=p.forwardRef(function(e,t){return p.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),p.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"}))}),N=({responseTimeMs:e})=>null==e?null:(0,t.jsxs)("div",{className:"flex items-center space-x-1 text-xs text-gray-500 font-mono",children:[(0,t.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M12 6V12L16 14M12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,t.jsxs)("span",{children:[e.toFixed(0),"ms"]})]}),C=e=>{let t=e;if("string"==typeof t)try{t=JSON.parse(t)}catch{}return t},S=({label:e,value:a})=>{let[s,l]=p.default.useState(!1),[r,i]=p.default.useState(!1),n=a?.toString()||"N/A",o=n.length>50?n.substring(0,50)+"...":n;return(0,t.jsx)("tr",{className:"hover:bg-gray-50",children:(0,t.jsx)("td",{className:"px-4 py-2 align-top",colSpan:2,children:(0,t.jsxs)("div",{className:"flex items-center justify-between group",children:[(0,t.jsxs)("div",{className:"flex items-center flex-1",children:[(0,t.jsx)("button",{onClick:()=>l(!s),className:"text-gray-400 hover:text-gray-600 mr-2",children:s?"▼":"▶"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-gray-600",children:e}),(0,t.jsx)("pre",{className:"mt-1 text-sm font-mono text-gray-800 whitespace-pre-wrap",children:s?n:o})]})]}),(0,t.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(n),i(!0),setTimeout(()=>i(!1),2e3)},className:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-gray-600",children:(0,t.jsx)(_,{className:"h-4 w-4"})})]})})})},T=({response:e})=>{let a=null,s={},l={};try{if(e?.error)try{let t="string"==typeof e.error.message?JSON.parse(e.error.message):e.error.message;a={message:t?.message||"Unknown error",traceback:t?.traceback||"No traceback available",litellm_params:t?.litellm_cache_params||{},health_check_cache_params:t?.health_check_cache_params||{}},s=C(a.litellm_params)||{},l=C(a.health_check_cache_params)||{}}catch(t){console.warn("Error parsing error details:",t),a={message:String(e.error.message||"Unknown error"),traceback:"Error parsing details",litellm_params:{},health_check_cache_params:{}}}else s=C(e?.litellm_cache_params)||{},l=C(e?.health_check_cache_params)||{}}catch(e){console.warn("Error in response parsing:",e),s={},l={}}let r={redis_host:l?.redis_client?.connection_pool?.connection_kwargs?.host||l?.redis_async_client?.connection_pool?.connection_kwargs?.host||l?.connection_kwargs?.host||l?.host||"N/A",redis_port:l?.redis_client?.connection_pool?.connection_kwargs?.port||l?.redis_async_client?.connection_pool?.connection_kwargs?.port||l?.connection_kwargs?.port||l?.port||"N/A",redis_version:l?.redis_version||"N/A",startup_nodes:(()=>{try{if(l?.redis_kwargs?.startup_nodes)return JSON.stringify(l.redis_kwargs.startup_nodes);let e=l?.redis_client?.connection_pool?.connection_kwargs?.host||l?.redis_async_client?.connection_pool?.connection_kwargs?.host,t=l?.redis_client?.connection_pool?.connection_kwargs?.port||l?.redis_async_client?.connection_pool?.connection_kwargs?.port;return e&&t?JSON.stringify([{host:e,port:t}]):"N/A"}catch(e){return"N/A"}})(),namespace:l?.namespace||"N/A"};return(0,t.jsx)("div",{className:"bg-white rounded-lg shadow",children:(0,t.jsxs)(u.TabGroup,{children:[(0,t.jsxs)(m.TabList,{className:"border-b border-gray-200 px-4",children:[(0,t.jsx)(d.Tab,{className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-800",children:"Summary"}),(0,t.jsx)(d.Tab,{className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-800",children:"Raw Response"})]}),(0,t.jsxs)(g.TabPanels,{children:[(0,t.jsx)(h.TabPanel,{className:"p-4",children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center mb-6",children:[e?.status==="healthy"?(0,t.jsx)(w.CheckCircleIcon,{className:"h-5 w-5 text-green-500 mr-2"}):(0,t.jsx)(k.XCircleIcon,{className:"h-5 w-5 text-red-500 mr-2"}),(0,t.jsxs)(x.Text,{className:`text-sm font-medium ${e?.status==="healthy"?"text-green-500":"text-red-500"}`,children:["Cache Status: ",e?.status||"unhealthy"]})]}),(0,t.jsx)("table",{className:"w-full border-collapse",children:(0,t.jsxs)("tbody",{children:[a&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:2,className:"pt-4 pb-2 font-semibold text-red-600",children:"Error Details"})}),(0,t.jsx)(S,{label:"Error Message",value:a.message}),(0,t.jsx)(S,{label:"Traceback",value:a.traceback})]}),(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:2,className:"pt-4 pb-2 font-semibold",children:"Cache Details"})}),(0,t.jsx)(S,{label:"Cache Configuration",value:String(s?.type)}),(0,t.jsx)(S,{label:"Ping Response",value:String(e.ping_response)}),(0,t.jsx)(S,{label:"Set Cache Response",value:e.set_cache_response||"N/A"}),(0,t.jsx)(S,{label:"litellm_settings.cache_params",value:JSON.stringify(s,null,2)}),s?.type==="redis"&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:2,className:"pt-4 pb-2 font-semibold",children:"Redis Details"})}),(0,t.jsx)(S,{label:"Redis Host",value:r.redis_host||"N/A"}),(0,t.jsx)(S,{label:"Redis Port",value:r.redis_port||"N/A"}),(0,t.jsx)(S,{label:"Redis Version",value:r.redis_version||"N/A"}),(0,t.jsx)(S,{label:"Startup Nodes",value:r.startup_nodes||"N/A"}),(0,t.jsx)(S,{label:"Namespace",value:r.namespace||"N/A"})]})]})})]})}),(0,t.jsx)(h.TabPanel,{className:"p-4",children:(0,t.jsx)("div",{className:"bg-gray-50 rounded-md p-4 font-mono text-sm",children:(0,t.jsx)("pre",{className:"whitespace-pre-wrap break-words overflow-auto max-h-[500px]",children:(()=>{try{let t={...e,litellm_cache_params:s,health_check_cache_params:l},a=JSON.parse(JSON.stringify(t,(e,t)=>{if("string"==typeof t)try{return JSON.parse(t)}catch{}return t}));return JSON.stringify(a,null,2)}catch(e){return"Error formatting JSON: "+e.message}})()})})})]})]})})},I=({accessToken:e,healthCheckResponse:a,runCachingHealthCheck:s,responseTimeMs:l})=>{let[r,i]=p.default.useState(null),[n,o]=p.default.useState(!1),c=async()=>{o(!0);let e=performance.now();await s(),i(performance.now()-e),o(!1)};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(v.Button,{onClick:c,disabled:n,className:"bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-400 text-white text-sm px-4 py-2 rounded-md",children:n?"Running Health Check...":"Run Health Check"}),(0,t.jsx)(N,{responseTimeMs:r})]}),a&&(0,t.jsx)(T,{response:a})]})};var A=e.i(677667),M=e.i(898667),P=e.i(130643),O=e.i(206929),E=e.i(35983);let D=({redisType:e,redisTypeDescriptions:a,onTypeChange:s})=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Redis Type"}),(0,t.jsxs)(O.Select,{value:e,onValueChange:s,children:[(0,t.jsx)(E.SelectItem,{value:"node",children:"Node (Single Instance)"}),(0,t.jsx)(E.SelectItem,{value:"cluster",children:"Cluster"}),(0,t.jsx)(E.SelectItem,{value:"sentinel",children:"Sentinel"}),(0,t.jsx)(E.SelectItem,{value:"semantic",children:"Semantic"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:a[e]||"Select the type of Redis deployment you're using"})]});var R=e.i(135214),B=e.i(620250),F=e.i(779241),L=e.i(199133),z=e.i(689020),q=e.i(435451);let U=({field:e,currentValue:a})=>{let[s,l]=(0,p.useState)([]),[r,i]=(0,p.useState)(a||""),{accessToken:n}=(0,R.default)();if((0,p.useEffect)(()=>{n&&(async()=>{try{let e=await (0,z.fetchAvailableModels)(n);console.log("Fetched models for selector:",e),e.length>0&&l(e)}catch(e){console.error("Error fetching model info:",e)}})()},[n]),"Boolean"===e.field_type)return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:e.ui_field_name}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",name:e.field_name,defaultChecked:!0===a||"true"===a,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,t.jsx)("span",{className:"ml-2 text-sm text-gray-500",children:e.field_description})]})]});if("Integer"===e.field_type||"Float"===e.field_type)return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:e.ui_field_name}),(0,t.jsx)(q.default,{name:e.field_name,type:"number",defaultValue:a,placeholder:e.field_description}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:e.field_description})]});if("List"===e.field_type)return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:e.ui_field_name}),(0,t.jsx)("textarea",{name:e.field_name,defaultValue:"object"==typeof a?JSON.stringify(a,null,2):a,placeholder:e.field_description,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",rows:4}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:e.field_description})]});if("Models_Select"===e.field_type){let a=s.filter(e=>"embedding"===e.mode).map(e=>({value:e.model_group,label:e.model_group}));return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:e.ui_field_name}),(0,t.jsx)(L.Select,{value:r,onChange:i,showSearch:!0,placeholder:"Search and select a model...",options:a,style:{width:"100%"},className:"rounded-md",filterOption:(e,t)=>(t?.label??"").toLowerCase().includes(e.toLowerCase())}),(0,t.jsx)("input",{type:"hidden",name:e.field_name,value:r}),e.field_description&&(0,t.jsx)("p",{className:"text-xs text-gray-500",children:e.field_description})]})}if("Integer"===e.field_type||"Float"===e.field_type)return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:e.ui_field_name}),(0,t.jsx)(B.NumberInput,{name:e.field_name,defaultValue:a,placeholder:e.field_description,step:"Float"===e.field_type?.01:1}),e.field_description&&(0,t.jsx)("p",{className:"text-xs text-gray-500",children:e.field_description})]});let o="password"===e.field_name||e.field_name.includes("password")?"password":"text";return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:e.ui_field_name}),(0,t.jsx)(F.TextInput,{name:e.field_name,type:o,defaultValue:a,placeholder:e.field_description}),e.field_description&&(0,t.jsx)("p",{className:"text-xs text-gray-500",children:e.field_description})]})},H=(e,t)=>e.find(e=>e.field_name===t),$=(e,t)=>{let a={type:"redis"};return e.forEach(e=>{if("redis_type"===e.field_name||null!==e.redis_type&&void 0!==e.redis_type&&e.redis_type!==t)return;let s=e.field_name,l=null;if("Boolean"===e.field_type){let e=document.querySelector(`input[name="${s}"]`);e?.checked!==void 0&&(l=e.checked)}else if("List"===e.field_type){let e=document.querySelector(`textarea[name="${s}"]`);if(e?.value)try{l=JSON.parse(e.value)}catch(e){console.error(`Invalid JSON for ${s}:`,e)}}else{let t=document.querySelector(`input[name="${s}"]`);if(t?.value){let a=t.value.trim();if(""!==a)if("Integer"===e.field_type){let e=Number(a);isNaN(e)||(l=e)}else if("Float"===e.field_type){let e=Number(a);isNaN(e)||(l=e)}else l=a}}null!=l&&(a[s]=l)}),a},K=({accessToken:e,userRole:a,userID:s})=>{let l,r,i,n,o,[c,d]=(0,p.useState)({}),[u,m]=(0,p.useState)([]),[h,g]=(0,p.useState)({}),[x,y]=(0,p.useState)("node"),[b,w]=(0,p.useState)(!1),[k,_]=(0,p.useState)(!1),N=(0,p.useCallback)(async()=>{try{let t=await (0,j.getCacheSettingsCall)(e);console.log("cache settings from API",t),t.fields&&m(t.fields),t.current_values&&(d(t.current_values),t.current_values.redis_type&&y(t.current_values.redis_type)),t.redis_type_descriptions&&g(t.redis_type_descriptions)}catch(e){console.error("Failed to load cache settings:",e),f.default.fromBackend("Failed to load cache settings")}},[e]);(0,p.useEffect)(()=>{e&&N()},[e,N]);let C=async()=>{if(e){w(!0);try{let t=$(u,x),a=await (0,j.testCacheConnectionCall)(e,t);"success"===a.status?f.default.success("Cache connection test successful!"):f.default.fromBackend(`Connection test failed: ${a.message||a.error}`)}catch(e){console.error("Test connection error:",e),f.default.fromBackend(`Connection test failed: ${e.message||"Unknown error"}`)}finally{w(!1)}}},S=async()=>{if(e){_(!0);try{let t=$(u,x);"semantic"===x&&(t.type="redis-semantic"),await (0,j.updateCacheSettingsCall)(e,t),f.default.success("Cache settings updated successfully"),await N()}catch(e){console.error("Failed to save cache settings:",e),f.default.fromBackend("Failed to update cache settings")}finally{_(!1)}}};if(!e)return null;let{basicFields:T,sslFields:I,cacheManagementFields:O,gcpFields:E,clusterFields:R,sentinelFields:B,semanticFields:F}=(l=["host","port","password","username"].map(e=>H(u,e)).filter(Boolean),r=["ssl","ssl_cert_reqs","ssl_check_hostname"].map(e=>H(u,e)).filter(Boolean),i=["namespace","ttl","max_connections"].map(e=>H(u,e)).filter(Boolean),n=["gcp_service_account","gcp_ssl_ca_certs"].map(e=>H(u,e)).filter(Boolean),o=u.filter(e=>"cluster"===e.redis_type),{basicFields:l,sslFields:r,cacheManagementFields:i,gcpFields:n,clusterFields:o,sentinelFields:u.filter(e=>"sentinel"===e.redis_type),semanticFields:u.filter(e=>"semantic"===e.redis_type)});return(0,t.jsxs)("div",{className:"w-full space-y-8 py-2",children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"max-w-3xl",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Cache Settings"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Configure Redis cache for Silinex"})]}),(0,t.jsx)(D,{redisType:x,redisTypeDescriptions:h,onTypeChange:y}),(0,t.jsxs)("div",{className:"space-y-6 pt-4 border-t border-gray-200",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Connection Settings"}),(0,t.jsx)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:T.map(e=>{if(!e)return null;let a=c[e.field_name]??e.field_default??"";return(0,t.jsx)(U,{field:e,currentValue:a},e.field_name)})})]}),"cluster"===x&&R.length>0&&(0,t.jsxs)("div",{className:"space-y-6 pt-4 border-t border-gray-200",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Cluster Configuration"}),(0,t.jsx)("div",{className:"grid grid-cols-1 gap-6",children:R.map(e=>{let a=c[e.field_name]??e.field_default??"";return(0,t.jsx)(U,{field:e,currentValue:a},e.field_name)})})]}),"sentinel"===x&&B.length>0&&(0,t.jsxs)("div",{className:"space-y-6 pt-4 border-t border-gray-200",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Sentinel Configuration"}),(0,t.jsx)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:B.map(e=>{let a=c[e.field_name]??e.field_default??"";return(0,t.jsx)(U,{field:e,currentValue:a},e.field_name)})})]}),"semantic"===x&&F.length>0&&(0,t.jsxs)("div",{className:"space-y-6 pt-4 border-t border-gray-200",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Semantic Configuration"}),(0,t.jsx)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:F.map(e=>{let a=c[e.field_name]??e.field_default??"";return(0,t.jsx)(U,{field:e,currentValue:a},e.field_name)})})]}),(0,t.jsxs)(A.Accordion,{className:"mt-4",children:[(0,t.jsx)(M.AccordionHeader,{children:(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Advanced Settings"})}),(0,t.jsx)(P.AccordionBody,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[I.length>0&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h5",{className:"text-sm font-medium text-gray-700",children:"SSL Settings"}),(0,t.jsx)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:I.map(e=>{if(!e)return null;let a=c[e.field_name]??e.field_default??"";return(0,t.jsx)(U,{field:e,currentValue:a},e.field_name)})})]}),O.length>0&&(0,t.jsxs)("div",{className:"space-y-4 pt-4 border-t border-gray-200",children:[(0,t.jsx)("h5",{className:"text-sm font-medium text-gray-700",children:"Cache Management"}),(0,t.jsx)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:O.map(e=>{if(!e)return null;let a=c[e.field_name]??e.field_default??"";return(0,t.jsx)(U,{field:e,currentValue:a},e.field_name)})})]}),E.length>0&&(0,t.jsxs)("div",{className:"space-y-4 pt-4 border-t border-gray-200",children:[(0,t.jsx)("h5",{className:"text-sm font-medium text-gray-700",children:"GCP Authentication"}),(0,t.jsx)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:E.map(e=>{if(!e)return null;let a=c[e.field_name]??e.field_default??"";return(0,t.jsx)(U,{field:e,currentValue:a},e.field_name)})})]})]})})]})]}),(0,t.jsxs)("div",{className:"border-t border-gray-200 pt-6 flex justify-end gap-3",children:[(0,t.jsx)(v.Button,{variant:"secondary",size:"sm",onClick:C,disabled:b,className:"text-sm",children:b?"Testing...":"Test Connection"}),(0,t.jsx)(v.Button,{size:"sm",onClick:S,disabled:k,className:"text-sm font-medium",children:k?"Saving...":"Save Changes"})]})]})},V=e=>{if(e)return e.toISOString().split("T")[0]};function G(e){return new Intl.NumberFormat("en-US",{maximumFractionDigits:0,notation:"compact",compactDisplay:"short"}).format(e)}e.s(["default",0,({accessToken:e,token:v,userRole:w,userID:k,premiumUser:_})=>{let[N,C]=(0,p.useState)([]),[S,T]=(0,p.useState)([]),[A,M]=(0,p.useState)([]),[P,O]=(0,p.useState)([]),[E,D]=(0,p.useState)("0"),[R,B]=(0,p.useState)("0"),[F,L]=(0,p.useState)("0"),[z,q]=(0,p.useState)({from:new Date(Date.now()-6048e5),to:new Date}),[U,H]=(0,p.useState)(""),[$,Q]=(0,p.useState)("");(0,p.useEffect)(()=>{e&&z&&((async()=>{O(await (0,j.adminGlobalCacheActivity)(e,V(z.from),V(z.to)))})(),H(new Date().toLocaleString()))},[e]);let W=Array.from(new Set(P.map(e=>e?.api_key??""))),J=Array.from(new Set(P.map(e=>e?.model??"")));Array.from(new Set(P.map(e=>e?.call_type??"")));let Y=async(t,a)=>{t&&a&&e&&O(await (0,j.adminGlobalCacheActivity)(e,V(t),V(a)))};(0,p.useEffect)(()=>{console.log("DATA IN CACHE DASHBOARD",P);let e=P;S.length>0&&(e=e.filter(e=>S.includes(e.api_key))),A.length>0&&(e=e.filter(e=>A.includes(e.model))),console.log("before processed data in cache dashboard",e);let t=0,a=0,s=0,l=e.reduce((e,l)=>{console.log("Processing item:",l),l.call_type||(console.log("Item has no call_type:",l),l.call_type="Unknown"),t+=(l.total_rows||0)-(l.cache_hit_true_rows||0),a+=l.cache_hit_true_rows||0,s+=l.cached_completion_tokens||0;let r=e.find(e=>e.name===l.call_type);return r?(r["LLM API requests"]+=(l.total_rows||0)-(l.cache_hit_true_rows||0),r["Cache hit"]+=l.cache_hit_true_rows||0,r["Cached Completion Tokens"]+=l.cached_completion_tokens||0,r["Generated Completion Tokens"]+=l.generated_completion_tokens||0):e.push({name:l.call_type,"LLM API requests":(l.total_rows||0)-(l.cache_hit_true_rows||0),"Cache hit":l.cache_hit_true_rows||0,"Cached Completion Tokens":l.cached_completion_tokens||0,"Generated Completion Tokens":l.generated_completion_tokens||0}),e},[]);D(G(a)),B(G(s));let r=a+t;r>0?L((a/r*100).toFixed(2)):L("0"),C(l),console.log("PROCESSED DATA IN CACHE DASHBOARD",l)},[S,A,z,P]);let X=async()=>{try{f.default.info("Running cache health check..."),Q("");let t=await (0,j.cachingHealthCheckCall)(null!==e?e:"");console.log("CACHING HEALTH CHECK RESPONSE",t),Q(t)}catch(t){let e;if(console.error("Error running health check:",t),t&&t.message)try{let a=JSON.parse(t.message);a.error&&(a=a.error),e=a}catch(a){e={message:t.message}}else e={message:"Unknown error occurred"};Q({error:e})}};return(0,t.jsxs)(u.TabGroup,{className:"gap-2 p-8 h-full w-full mt-2 mb-8",children:[(0,t.jsxs)(m.TabList,{className:"flex justify-between mt-2 w-full items-center",children:[(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(d.Tab,{children:"Cache Analytics"}),(0,t.jsx)(d.Tab,{children:"Cache Health"}),(0,t.jsx)(d.Tab,{children:"Cache Settings"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[U&&(0,t.jsxs)(x.Text,{children:["Last Refreshed: ",U]}),(0,t.jsx)(i.Icon,{icon:b.RefreshIcon,variant:"shadow",size:"xs",className:"self-center",onClick:()=>{H(new Date().toLocaleString())}})]})]}),(0,t.jsxs)(g.TabPanels,{children:[(0,t.jsx)(h.TabPanel,{children:(0,t.jsxs)(s.Card,{children:[(0,t.jsxs)(r.Grid,{numItems:3,className:"gap-4 mt-4",children:[(0,t.jsx)(l.Col,{children:(0,t.jsx)(n.MultiSelect,{placeholder:"Select Virtual Keys",value:S,onValueChange:T,children:W.map(e=>(0,t.jsx)(o.MultiSelectItem,{value:e,children:e},e))})}),(0,t.jsx)(l.Col,{children:(0,t.jsx)(n.MultiSelect,{placeholder:"Select Models",value:A,onValueChange:M,children:J.map(e=>(0,t.jsx)(o.MultiSelectItem,{value:e,children:e},e))})}),(0,t.jsx)(l.Col,{children:(0,t.jsx)(y.default,{value:z,onValueChange:e=>{q(e),Y(e.from,e.to)}})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 mt-4",children:[(0,t.jsxs)(s.Card,{children:[(0,t.jsx)("p",{className:"text-tremor-default font-medium text-tremor-content dark:text-dark-tremor-content",children:"Cache Hit Ratio"}),(0,t.jsx)("div",{className:"mt-2 flex items-baseline space-x-2.5",children:(0,t.jsxs)("p",{className:"text-tremor-metric font-semibold text-tremor-content-strong dark:text-dark-tremor-content-strong",children:[F,"%"]})})]}),(0,t.jsxs)(s.Card,{children:[(0,t.jsx)("p",{className:"text-tremor-default font-medium text-tremor-content dark:text-dark-tremor-content",children:"Cache Hits"}),(0,t.jsx)("div",{className:"mt-2 flex items-baseline space-x-2.5",children:(0,t.jsx)("p",{className:"text-tremor-metric font-semibold text-tremor-content-strong dark:text-dark-tremor-content-strong",children:E})})]}),(0,t.jsxs)(s.Card,{children:[(0,t.jsx)("p",{className:"text-tremor-default font-medium text-tremor-content dark:text-dark-tremor-content",children:"Cached Tokens"}),(0,t.jsx)("div",{className:"mt-2 flex items-baseline space-x-2.5",children:(0,t.jsx)("p",{className:"text-tremor-metric font-semibold text-tremor-content-strong dark:text-dark-tremor-content-strong",children:R})})]})]}),(0,t.jsx)(c.Subtitle,{className:"mt-4",children:"Cache Hits vs API Requests"}),(0,t.jsx)(a.BarChart,{title:"Cache Hits vs API Requests",data:N,stack:!0,index:"name",valueFormatter:G,categories:["LLM API requests","Cache hit"],colors:["sky","teal"],yAxisWidth:48}),(0,t.jsx)(c.Subtitle,{className:"mt-4",children:"Cached Completion Tokens vs Generated Completion Tokens"}),(0,t.jsx)(a.BarChart,{className:"mt-6",data:N,stack:!0,index:"name",valueFormatter:G,categories:["Generated Completion Tokens","Cached Completion Tokens"],colors:["sky","teal"],yAxisWidth:48})]})}),(0,t.jsx)(h.TabPanel,{children:(0,t.jsx)(I,{accessToken:e,healthCheckResponse:$,runCachingHealthCheck:X})}),(0,t.jsx)(h.TabPanel,{children:(0,t.jsx)(K,{accessToken:e,userRole:w,userID:k})})]})]})}],559061)},566606,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(618566),l=e.i(317751),r=e.i(912598),i=e.i(947293),n=e.i(764205),o=e.i(954616),c=e.i(266027),d=e.i(612256);let u=(0,e.i(243652).createQueryKeys)("onboarding");var m=e.i(482725),h=e.i(56456);function g(){return(0,t.jsx)("div",{className:"mx-auto w-full max-w-md mt-10 flex justify-center",children:(0,t.jsx)(m.Spin,{indicator:(0,t.jsx)(h.LoadingOutlined,{spin:!0}),size:"large"})})}var x=e.i(560445),p=e.i(464571);function f(){return(0,t.jsxs)("div",{className:"mx-auto w-full max-w-md mt-10",children:[(0,t.jsx)(x.Alert,{type:"error",message:"Failed to load invitation",description:"The invitation link may be invalid or expired.",showIcon:!0}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(p.Button,{href:"/ui/login",children:"Back to Login"})})]})}var y=e.i(175712),b=e.i(808613),j=e.i(311451),v=e.i(898586);function w({variant:e,userEmail:s,isPending:l,claimError:r,onSubmit:i}){let[n]=b.Form.useForm();return a.default.useEffect(()=>{s&&n.setFieldValue("user_email",s)},[s,n]),(0,t.jsx)("div",{className:"mx-auto w-full max-w-md mt-10",children:(0,t.jsxs)(y.Card,{children:[(0,t.jsx)(v.Typography.Title,{level:5,className:"text-center mb-5",children:"🚅 Silinex"}),(0,t.jsx)(v.Typography.Title,{level:3,children:"reset_password"===e?"Reset Password":"Sign Up"}),(0,t.jsx)(v.Typography.Text,{children:"reset_password"===e?"Reset your password to access Admin UI.":"Claim your user account to login to Admin UI."}),"signup"===e&&(0,t.jsx)(x.Alert,{className:"mt-4",type:"info",message:"SSO",description:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{children:"SSO is under the Enterprise Tier."}),(0,t.jsx)(p.Button,{type:"primary",size:"small",href:"https://forms.gle/W3U4PZpJGFHWtHyA9",target:"_blank",children:"Get Free Trial"})]}),showIcon:!0}),(0,t.jsxs)(b.Form,{className:"mt-10 mb-5",layout:"vertical",form:n,onFinish:e=>i({password:e.password}),children:[(0,t.jsx)(b.Form.Item,{label:"Email Address",name:"user_email",children:(0,t.jsx)(j.Input,{type:"email",disabled:!0})}),(0,t.jsx)(b.Form.Item,{label:"Password",name:"password",rules:[{required:!0,message:"password required to sign up"}],help:"reset_password"===e?"Enter your new password":"Create a password for your account",children:(0,t.jsx)(j.Input.Password,{})}),r&&(0,t.jsx)(x.Alert,{type:"error",message:r,showIcon:!0,className:"mb-4"}),(0,t.jsx)("div",{className:"mt-10",children:(0,t.jsx)(p.Button,{htmlType:"submit",loading:l,children:"reset_password"===e?"Reset Password":"Sign Up"})})]})]})})}function k({variant:e}){let l=(0,s.useSearchParams)().get("invitation_id"),[r,m]=a.default.useState(null),{data:h,isLoading:x,isError:p}=(e=>{let{isLoading:t}=(0,d.useUIConfig)();return(0,c.useQuery)({queryKey:u.detail(e??""),queryFn:async()=>{if(!e)throw Error("inviteId is required");return(0,n.getOnboardingCredentials)(e)},enabled:!!e&&!t})})(l),{mutate:y,isPending:b}=(0,o.useMutation)({mutationFn:async({accessToken:e,inviteId:t,userId:a,password:s})=>await (0,n.claimOnboardingToken)(e,t,a,s)}),j=h?.token?(0,i.jwtDecode)(h.token):null,v=j?.user_email??"",k=j?.user_id??null,_=j?.key??null,N=h?.token??null;return x?(0,t.jsx)(g,{}):p?(0,t.jsx)(f,{}):(0,t.jsx)(w,{variant:e,userEmail:v,isPending:b,claimError:r,onSubmit:e=>{_&&N&&k&&l&&(m(null),y({accessToken:_,inviteId:l,userId:k,password:e.password},{onSuccess:()=>{document.cookie=`token=${N}; path=/; SameSite=Lax`;let e=(0,n.getProxyBaseUrl)();window.location.href=e?`${e}/ui/?login=success`:"/ui/?login=success"},onError:e=>{m(e.message||"Failed to submit. Please try again.")}}))}})}let _=new l.QueryClient;function N(){let e=(0,s.useSearchParams)().get("action");return(0,t.jsx)(k,{variant:"reset_password"===e?"reset_password":"signup"})}function C(){return(0,t.jsx)(r.QueryClientProvider,{client:_,children:(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Loading..."}),children:(0,t.jsx)(N,{})})})}e.s(["default",()=>C],566606)},700514,e=>{"use strict";var t=e.i(271645);e.s(["defaultPageSize",0,25,"useBaseUrl",0,()=>{let[e,a]=(0,t.useState)("http://localhost:4000");return(0,t.useEffect)(()=>{{let{protocol:e,host:t}=window.location;a(`${e}//${t}`)}},[]),e}])},633627,969550,e=>{"use strict";var t=e.i(764205);let a=async e=>{if(!e)return[];try{let{aliases:a}=await (0,t.keyAliasesCall)(e);return Array.from(new Set((a||[]).filter(Boolean)))}catch(e){return console.error("Error fetching all key aliases:",e),[]}},s=async(e,a)=>{if(!e)return[];try{let s=[],l=1,r=!0;for(;r;){let i=await (0,t.teamListCall)(e,a||null,null);s=[...s,...i],l<i.total_pages?l++:r=!1}return s}catch(e){return console.error("Error fetching all teams:",e),[]}},l=async e=>{if(!e)return[];try{let a=[],s=1,l=!0;for(;l;){let r=await (0,t.organizationListCall)(e);a=[...a,...r],s<r.total_pages?s++:l=!1}return a}catch(e){return console.error("Error fetching all organizations:",e),[]}};e.s(["fetchAllKeyAliases",0,a,"fetchAllOrganizations",0,l,"fetchAllTeams",0,s],633627);var r=e.i(843476),i=e.i(271645);let n=i.forwardRef(function(e,t){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"}))});var o=e.i(464571),c=e.i(311451),d=e.i(199133),u=e.i(374009);e.s(["default",0,({options:e,onApplyFilters:t,onResetFilters:a,initialValues:s={},buttonLabel:l="筛选"})=>{let[m,h]=(0,i.useState)(!1),[g,x]=(0,i.useState)(s),[p,f]=(0,i.useState)({}),[y,b]=(0,i.useState)({}),[j,v]=(0,i.useState)({}),[w,k]=(0,i.useState)({}),_=(0,i.useCallback)((0,u.default)(async(e,t)=>{if(t.isSearchable&&t.searchFn){b(e=>({...e,[t.name]:!0}));try{let a=await t.searchFn(e);f(e=>({...e,[t.name]:a}))}catch(e){console.error("Error searching:",e),f(e=>({...e,[t.name]:[]}))}finally{b(e=>({...e,[t.name]:!1}))}}},300),[]),N=(0,i.useCallback)(async e=>{if(e.isSearchable&&e.searchFn&&!w[e.name]){b(t=>({...t,[e.name]:!0})),k(t=>({...t,[e.name]:!0}));try{let t=await e.searchFn("");f(a=>({...a,[e.name]:t}))}catch(t){console.error("Error loading initial options:",t),f(t=>({...t,[e.name]:[]}))}finally{b(t=>({...t,[e.name]:!1}))}}},[w]);(0,i.useEffect)(()=>{m&&e.forEach(e=>{e.isSearchable&&!w[e.name]&&N(e)})},[m,e,N,w]);let C=(e,a)=>{let s={...g,[e]:a};x(s),t(s)};return(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,r.jsx)(o.Button,{icon:(0,r.jsx)(n,{className:"h-4 w-4"}),onClick:()=>h(!m),className:"flex items-center gap-2",children:l}),(0,r.jsx)(o.Button,{onClick:()=>{let t={};e.forEach(e=>{t[e.name]=""}),x(t),a()},children:"重置筛选"})]}),m&&(0,r.jsx)("div",{className:"grid grid-cols-3 gap-x-6 gap-y-4 mb-6",children:["Team ID","Status","Organization ID","Key Alias","User ID","End User","Error Code","Error Message","Key Hash","Model"].map(t=>{let a,s=e.find(e=>e.label===t||e.name===t);return s?(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("label",{className:"text-sm text-gray-600",children:s.label||s.name}),s.isSearchable?(0,r.jsx)(d.Select,{showSearch:!0,className:"w-full",placeholder:`搜索 ${s.label||s.name}...`,value:g[s.name]||void 0,onChange:e=>C(s.name,e),onOpenChange:e=>{e&&s.isSearchable&&!w[s.name]&&N(s)},onSearch:e=>{v(t=>({...t,[s.name]:e})),s.searchFn&&_(e,s)},filterOption:!1,loading:y[s.name],options:p[s.name]||[],allowClear:!0,notFoundContent:y[s.name]?"加载中...":"未找到结果"}):s.options?(0,r.jsx)(d.Select,{className:"w-full",placeholder:`选择 ${s.label||s.name}...`,value:g[s.name]||void 0,onChange:e=>C(s.name,e),allowClear:!0,children:s.options.map(e=>(0,r.jsx)(d.Select.Option,{value:e.value,children:e.label},e.value))}):s.customComponent?(a=s.customComponent,(0,r.jsx)(a,{value:g[s.name]||void 0,onChange:e=>C(s.name,e??""),placeholder:`Select ${s.label||s.name}...`})):(0,r.jsx)(c.Input,{className:"w-full",placeholder:`Enter ${s.label||s.name}...`,value:g[s.name]||"",onChange:e=>C(s.name,e.target.value),allowClear:!0})]},s.name):null})})]})}],969550)},693569,e=>{"use strict";var t=e.i(843476),a=e.i(268004),s=e.i(309426),l=e.i(350967),r=e.i(898586),i=e.i(947293),n=e.i(618566),o=e.i(271645),c=e.i(566606),d=e.i(584578),u=e.i(764205),m=e.i(702597),h=e.i(111110),g=e.i(207082),x=e.i(500330),p=e.i(871943),f=e.i(502547),y=e.i(360820),b=e.i(94629),j=e.i(152990),v=e.i(682830),w=e.i(389083),k=e.i(994388),_=e.i(752978),N=e.i(269200),C=e.i(942232),S=e.i(977572),T=e.i(427612),I=e.i(64848),A=e.i(496020),M=e.i(599724),P=e.i(827252),O=e.i(282786),E=e.i(981339),D=e.i(592968),R=e.i(355619),B=e.i(266027),F=e.i(633627),L=e.i(374009),z=e.i(700514),q=e.i(135214),U=e.i(969550),H=e.i(20147);function $({teams:e,organizations:a,onSortChange:s,currentSort:l}){let[r,i]=(0,o.useState)(null),[n,c]=o.default.useState(()=>l?[{id:l.sortBy,desc:"desc"===l.sortOrder}]:[{id:"created_at",desc:!0}]),[d,m]=o.default.useState({pageIndex:0,pageSize:50}),$=n.length>0?n[0].id:null,K=n.length>0?n[0].desc?"desc":"asc":null,{data:V,isPending:G,isFetching:Q,refetch:W}=(0,g.useKeys)(d.pageIndex+1,d.pageSize,{sortBy:$||void 0,sortOrder:K||void 0}),J=V?.total_count||0,[Y,X]=(0,o.useState)({}),{filters:Z,filteredKeys:ee,allKeyAliases:et,allTeams:ea,allOrganizations:es,handleFilterChange:el,handleFilterReset:er}=function({keys:e,teams:t,organizations:a}){let s={"Team ID":"","Organization ID":"","Key Alias":"","User ID":"","Sort By":"created_at","Sort Order":"desc"},{accessToken:l}=(0,q.default)(),[r,i]=(0,o.useState)(s),[n,c]=(0,o.useState)(t||[]),[d,m]=(0,o.useState)(a||[]),[h,g]=(0,o.useState)(e),x=(0,o.useRef)(0),p=(0,o.useCallback)((0,L.default)(async e=>{if(!l)return;let t=Date.now();x.current=t;try{let a=await (0,u.keyListCall)(l,e["Organization ID"]||null,e["Team ID"]||null,e["Key Alias"]||null,e["User ID"]||null,e["Key Hash"]||null,1,z.defaultPageSize,e["Sort By"]||null,e["Sort Order"]||null);t===x.current&&a&&(g(a.keys),console.log("called from debouncedSearch filters:",JSON.stringify(e)),console.log("called from debouncedSearch data:",JSON.stringify(a)))}catch(e){console.error("Error searching users:",e)}},300),[l]);(0,o.useEffect)(()=>{if(!e)return void g([]);let t=[...e];r["Team ID"]&&(t=t.filter(e=>e.team_id===r["Team ID"])),r["Organization ID"]&&(t=t.filter(e=>e.organization_id===r["Organization ID"])),g(t)},[e,r]),(0,o.useEffect)(()=>{let e=async()=>{let e=await (0,F.fetchAllTeams)(l);e.length>0&&c(e);let t=await (0,F.fetchAllOrganizations)(l);t.length>0&&m(t)};l&&e()},[l]);let f=(0,B.useQuery)({queryKey:["allKeys"],queryFn:async()=>{if(!l)throw Error("Access token required");return await (0,F.fetchAllKeyAliases)(l)},enabled:!!l}).data||[];return(0,o.useEffect)(()=>{t&&t.length>0&&c(e=>e.length<t.length?t:e)},[t]),(0,o.useEffect)(()=>{a&&a.length>0&&m(e=>e.length<a.length?a:e)},[a]),{filters:r,filteredKeys:h,allKeyAliases:f,allTeams:n,allOrganizations:d,handleFilterChange:(e,t=!1)=>{i({"Team ID":e["Team ID"]||"","Organization ID":e["Organization ID"]||"","Key Alias":e["Key Alias"]||"","User ID":e["User ID"]||"","Sort By":e["Sort By"]||"created_at","Sort Order":e["Sort Order"]||"desc"}),t||p({...r,...e})},handleFilterReset:()=>{i(s),p(s)}}}({keys:V?.keys||[],teams:e,organizations:a});(0,o.useEffect)(()=>{if(W){let e=()=>{W()};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}}},[W]);let{t:ei}=(0,h.useLanguage)(),en=e=>"all-team-models"===e?ei("keyDetail.settings.messages.allTeamModels"):"all-proxy-models"===e?ei("teams.allProxyModels"):(0,R.getModelDisplayName)(e),eo=(0,o.useMemo)(()=>[{id:"expander",header:()=>null,size:40,enableSorting:!1,cell:({row:e})=>e.getCanExpand()?(0,t.jsx)("button",{onClick:e.getToggleExpandedHandler(),style:{cursor:"pointer"},children:e.getIsExpanded()?"▼":"▶"}):null},{id:"token",accessorKey:"token",header:"密钥 ID",size:100,enableSorting:!0,cell:e=>{let a=e.getValue(),s=e.cell.column.getSize();return(0,t.jsx)(D.Tooltip,{title:a,children:(0,t.jsx)(k.Button,{size:"xs",variant:"light",className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left overflow-hidden truncate block",style:{maxWidth:s,overflow:"hidden"},onClick:()=>i(e.row.original),children:a??"-"})})}},{id:"key_alias",accessorKey:"key_alias",header:"密钥别名",size:150,enableSorting:!0,cell:e=>{let a=e.getValue(),s=e.cell.column.getSize();return(0,t.jsx)(D.Tooltip,{title:a,children:(0,t.jsx)("span",{className:"font-mono text-xs truncate block",style:{maxWidth:s,overflow:"hidden"},children:a??"-"})})}},{id:"key_name",accessorKey:"key_name",header:"密钥",size:120,enableSorting:!1,cell:e=>(0,t.jsx)("span",{className:"font-mono text-xs",children:e.getValue()})},{id:"team_alias",accessorKey:"team_id",header:"分组别名",size:120,enableSorting:!1,cell:({row:t,getValue:a})=>{let s=a(),l=e?.find(e=>e.team_id===s);return l?.team_alias||"Unknown"}},{id:"team_id",accessorKey:"team_id",header:"分组 ID",size:80,enableSorting:!1,cell:e=>{let a=e.getValue(),s=e.cell.column.getSize();return(0,t.jsx)(D.Tooltip,{title:a,children:(0,t.jsx)("span",{className:"font-mono text-xs truncate block",style:{maxWidth:s,overflow:"hidden"},children:a??"-"})})}},{id:"organization_id",accessorKey:"organization_id",header:"组织 ID",size:140,enableSorting:!1,cell:e=>e.getValue()?e.renderValue():"-"},{id:"user_email",accessorKey:"user",header:"用户邮箱",size:160,enableSorting:!1,cell:e=>{let a=e.getValue(),s=a?.user_email,l=e.cell.column.getSize();return(0,t.jsx)(D.Tooltip,{title:s,children:(0,t.jsx)("span",{className:"font-mono text-xs truncate block",style:{maxWidth:l,overflow:"hidden"},children:s??"-"})})}},{id:"user_id",accessorKey:"user_id",header:"用户 ID",size:70,enableSorting:!1,cell:e=>{let a=e.getValue(),s="default_user_id"===a?ei("memberTable.defaultProxyAdmin"):a,l=e.cell.column.getSize();return(0,t.jsx)(D.Tooltip,{title:s,children:(0,t.jsx)("span",{className:"font-mono text-xs truncate block",style:{maxWidth:l,overflow:"hidden"},children:s??"-"})})}},{id:"created_at",accessorKey:"created_at",header:"创建时间",size:120,enableSorting:!0,cell:e=>{let t=e.getValue();return t?new Date(t).toLocaleDateString():"-"}},{id:"created_by",accessorKey:"created_by",header:"创建者",size:70,enableSorting:!1,cell:e=>{let a=e.getValue(),s="default_user_id"===a?ei("memberTable.defaultProxyAdmin"):a,l=e.cell.column.getSize();return(0,t.jsx)(D.Tooltip,{title:s,children:(0,t.jsx)("span",{className:"font-mono text-xs truncate block",style:{maxWidth:l,overflow:"hidden"},children:s??"-"})})}},{id:"updated_at",accessorKey:"updated_at",header:"更新时间",size:120,enableSorting:!0,cell:e=>{let t=e.getValue();return t?new Date(t).toLocaleDateString():"Never"}},{id:"last_active",accessorKey:"last_active",header:()=>(0,t.jsxs)("span",{className:"flex items-center gap-1",children:["最后活跃",(0,t.jsx)(O.Popover,{content:"这是一个新字段，不会回填历史数据。只有新的密钥使用记录会更新此值。",trigger:"hover",children:(0,t.jsx)(P.InfoCircleOutlined,{className:"text-gray-400 text-xs cursor-help"})})]}),size:130,enableSorting:!1,cell:e=>{let a=e.getValue();if(!a)return"未知";let s=new Date(a);return(0,t.jsx)(D.Tooltip,{title:s.toLocaleString(void 0,{dateStyle:"medium",timeStyle:"long"}),children:(0,t.jsx)("span",{children:s.toLocaleDateString()})})}},{id:"expires",accessorKey:"expires",header:"过期时间",size:120,enableSorting:!1,cell:e=>{let t=e.getValue();return t?new Date(t).toLocaleDateString():"永不过期"}},{id:"spend",accessorKey:"spend",header:"消费",size:100,enableSorting:!0,cell:e=>(0,x.formatNumberWithCommas)(e.getValue(),4)},{id:"max_budget",accessorKey:"max_budget",header:"预算",size:110,enableSorting:!0,cell:e=>{let t=e.getValue();return null===t?"无限制":`\xa5${(0,x.formatNumberWithCommas)(t)}`}},{id:"budget_reset_at",accessorKey:"budget_reset_at",header:"预算重置时间",size:130,enableSorting:!1,cell:e=>{let t=e.getValue();return t?new Date(t).toLocaleString():"永不重置"}},{id:"models",accessorKey:"models",header:"模型",size:200,enableSorting:!1,cell:e=>{let a=e.getValue();return(0,t.jsx)("div",{className:"flex flex-col py-2",children:Array.isArray(a)?(0,t.jsx)("div",{className:"flex flex-col",children:0===a.length?(0,t.jsx)(w.Badge,{size:"xs",className:"mb-1",color:"red",children:(0,t.jsx)(M.Text,{children:"所有代理模型"})}):(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"flex items-start",children:[a.length>3&&(0,t.jsx)("div",{children:(0,t.jsx)(_.Icon,{icon:Y[e.row.id]?p.ChevronDownIcon:f.ChevronRightIcon,className:"cursor-pointer",size:"xs",onClick:()=>{X(t=>({...t,[e.row.id]:!t[e.row.id]}))}})}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[a.slice(0,3).map((e,a)=>"all-proxy-models"===e||"all-team-models"===e?(0,t.jsx)(w.Badge,{size:"xs",color:"red",children:(0,t.jsx)(M.Text,{children:en(e)})},a):(0,t.jsx)(w.Badge,{size:"xs",color:"blue",children:(0,t.jsx)(M.Text,{children:e.length>30?`${en(e).slice(0,30)}...`:en(e)})},a)),a.length>3&&!Y[e.row.id]&&(0,t.jsx)(w.Badge,{size:"xs",color:"gray",className:"cursor-pointer",children:(0,t.jsxs)(M.Text,{children:["+",a.length-3," ",(a.length,"个模型")]})}),Y[e.row.id]&&(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:a.slice(3).map((e,a)=>"all-proxy-models"===e||"all-team-models"===e?(0,t.jsx)(w.Badge,{size:"xs",color:"red",children:(0,t.jsx)(M.Text,{children:en(e)})},a+3):(0,t.jsx)(w.Badge,{size:"xs",color:"blue",children:(0,t.jsx)(M.Text,{children:e.length>30?`${en(e).slice(0,30)}...`:en(e)})},a+3))})]})]})})}):null})}},{id:"rate_limits",header:"速率限制",size:140,enableSorting:!1,cell:({row:e})=>{let a=e.original;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:["TPM: ",null!==a.tpm_limit?a.tpm_limit:"无限制"]}),(0,t.jsxs)("div",{children:["RPM: ",null!==a.rpm_limit?a.rpm_limit:"无限制"]})]})}}],[ei]),ec=[{name:"Team ID",label:"分组 ID",isSearchable:!0,searchFn:async e=>ea&&0!==ea.length?ea.filter(t=>t.team_id.toLowerCase().includes(e.toLowerCase())||t.team_alias&&t.team_alias.toLowerCase().includes(e.toLowerCase())).map(e=>({label:`${e.team_alias||e.team_id} (${e.team_id})`,value:e.team_id})):[]},{name:"Organization ID",label:"组织 ID",isSearchable:!0,searchFn:async e=>es&&0!==es.length?es.filter(t=>t.organization_id?.toLowerCase().includes(e.toLowerCase())??!1).filter(e=>null!==e.organization_id&&void 0!==e.organization_id).map(e=>({label:`${e.organization_id||"Unknown"} (${e.organization_id})`,value:e.organization_id})):[]},{name:"Key Alias",label:"密钥别名",isSearchable:!0,searchFn:async e=>et.filter(t=>t.toLowerCase().includes(e.toLowerCase())).map(e=>({label:e,value:e}))},{name:"User ID",label:"用户 ID",isSearchable:!1},{name:"Key Hash",label:"密钥哈希",isSearchable:!1}];console.log(`keys: ${JSON.stringify(V)}`);let ed=(0,j.useReactTable)({data:ee,columns:eo.filter(e=>"expander"!==e.id),columnResizeMode:"onChange",columnResizeDirection:"ltr",state:{sorting:n,pagination:d},onSortingChange:e=>{let t="function"==typeof e?e(n):e;if(console.log(`newSorting: ${JSON.stringify(t)}`),c(t),t&&t.length>0){let e=t[0],a=e.id,l=e.desc?"desc":"asc";console.log(`sortBy: ${a}, sortOrder: ${l}`),el({...Z,"Sort By":a,"Sort Order":l},!0),s?.(a,l)}},onPaginationChange:m,getCoreRowModel:(0,v.getCoreRowModel)(),getSortedRowModel:(0,v.getSortedRowModel)(),getPaginationRowModel:(0,v.getPaginationRowModel)(),enableSorting:!0,manualSorting:!1,manualPagination:!0,pageCount:Math.ceil(J/d.pageSize)});o.default.useEffect(()=>{l&&c([{id:l.sortBy,desc:"desc"===l.sortOrder}])},[l]);let{pageIndex:eu,pageSize:em}=ed.getState().pagination,eh=Math.min((eu+1)*em,J),eg=`${eu*em+1} - ${eh}`;return(0,t.jsx)("div",{className:"w-full h-full overflow-hidden",children:r?(0,t.jsx)(H.default,{keyId:r.token,onClose:()=>i(null),keyData:r,teams:ea,onDelete:W}):(0,t.jsxs)("div",{className:"border-b py-4 flex-1 overflow-hidden",children:[(0,t.jsx)("div",{className:"w-full mb-6",children:(0,t.jsx)(U.default,{options:ec,onApplyFilters:el,initialValues:Z,onResetFilters:er})}),(0,t.jsxs)("div",{className:"flex items-center justify-between w-full mb-4",children:[G||Q?(0,t.jsx)(E.Skeleton.Node,{active:!0,style:{width:200,height:20}}):(0,t.jsxs)("span",{className:"inline-flex text-sm text-gray-700",children:["显示 ",eg,"，共 ",J," 条结果"]}),(0,t.jsxs)("div",{className:"inline-flex items-center gap-2",children:[G||Q?(0,t.jsx)(E.Skeleton.Node,{active:!0,style:{width:74,height:20}}):(0,t.jsxs)("span",{className:"text-sm text-gray-700",children:["第 ",eu+1," 页，共 ",ed.getPageCount()," 页"]}),G||Q?(0,t.jsx)(E.Skeleton.Button,{active:!0,size:"small",style:{width:84,height:30}}):(0,t.jsx)("button",{onClick:()=>ed.previousPage(),disabled:G||Q||!ed.getCanPreviousPage(),className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"上一页"}),G||Q?(0,t.jsx)(E.Skeleton.Button,{active:!0,size:"small",style:{width:58,height:30}}):(0,t.jsx)("button",{onClick:()=>ed.nextPage(),disabled:G||Q||!ed.getCanNextPage(),className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"下一页"})]})]}),(0,t.jsx)("div",{className:"h-[75vh] overflow-auto",children:(0,t.jsx)("div",{className:"rounded-lg custom-border relative",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(N.Table,{className:"[&_td]:py-0.5 [&_th]:py-1",style:{width:ed.getCenterTotalSize()},children:[(0,t.jsx)(T.TableHead,{children:ed.getHeaderGroups().map(e=>(0,t.jsx)(A.TableRow,{children:e.headers.map(e=>(0,t.jsx)(I.TableHeaderCell,{"data-header-id":e.id,className:`py-1 h-8 relative hover:bg-gray-50 ${"actions"===e.id?"sticky right-0 bg-white shadow-[-4px_0_8px_-6px_rgba(0,0,0,0.1)]":""}`,style:{width:e.getSize(),position:"relative",cursor:e.column.getCanSort()?"pointer":"default"},onMouseEnter:()=>{let t=document.querySelector(`[data-header-id="${e.id}"] .resizer`);t&&(t.style.opacity="0.5")},onMouseLeave:()=>{let t=document.querySelector(`[data-header-id="${e.id}"] .resizer`);t&&!e.column.getIsResizing()&&(t.style.opacity="0")},onClick:e.column.getCanSort()?e.column.getToggleSortingHandler():void 0,children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("div",{className:"flex items-center",children:e.isPlaceholder?null:(0,j.flexRender)(e.column.columnDef.header,e.getContext())}),"actions"!==e.id&&e.column.getCanSort()&&(0,t.jsx)("div",{className:"w-4",children:e.column.getIsSorted()?({asc:(0,t.jsx)(y.ChevronUpIcon,{className:"h-4 w-4 text-blue-500"}),desc:(0,t.jsx)(p.ChevronDownIcon,{className:"h-4 w-4 text-blue-500"})})[e.column.getIsSorted()]:(0,t.jsx)(b.SwitchVerticalIcon,{className:"h-4 w-4 text-gray-400"})}),(0,t.jsx)("div",{onDoubleClick:()=>e.column.resetSize(),onMouseDown:e.getResizeHandler(),onTouchStart:e.getResizeHandler(),className:`resizer ${ed.options.columnResizeDirection} ${e.column.getIsResizing()?"isResizing":""}`,style:{position:"absolute",right:0,top:0,height:"100%",width:"5px",background:e.column.getIsResizing()?"#3b82f6":"transparent",cursor:"col-resize",userSelect:"none",touchAction:"none",opacity:+!!e.column.getIsResizing()}})]})},e.id))},e.id))}),(0,t.jsx)(C.TableBody,{children:G||Q?(0,t.jsx)(A.TableRow,{children:(0,t.jsx)(S.TableCell,{colSpan:eo.length,className:"h-8 text-center",children:(0,t.jsx)("div",{className:"text-center text-gray-500",children:(0,t.jsx)("p",{children:"🚅 Loading keys..."})})})}):ee.length>0?ed.getRowModel().rows.map(e=>(0,t.jsx)(A.TableRow,{className:"h-8",children:e.getVisibleCells().map(e=>(0,t.jsx)(S.TableCell,{style:{width:e.column.getSize(),maxWidth:"8-x",whiteSpace:"pre-wrap",overflow:"hidden"},className:`py-0.5 max-h-8 overflow-hidden text-ellipsis whitespace-nowrap ${"models"===e.column.id&&Array.isArray(e.getValue())&&e.getValue().length>3?"px-0":""}`,children:(0,j.flexRender)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,t.jsx)(A.TableRow,{children:(0,t.jsx)(S.TableCell,{colSpan:eo.length,className:"h-8 text-center",children:(0,t.jsx)("div",{className:"text-center text-gray-500",children:(0,t.jsx)("p",{children:"No keys found"})})})})})]})})})})]})})}e.s(["default",0,({userID:e,userRole:h,teams:g,keys:x,setUserRole:p,userEmail:f,setUserEmail:y,setTeams:b,setKeys:j,premiumUser:v,organizations:w,addKey:k,createClicked:_})=>{let N,[C,S]=(0,o.useState)(null),[T,I]=(0,o.useState)(null),A=(0,n.useSearchParams)(),M=(console.log("COOKIES",document.cookie),(N=document.cookie.split("; ").find(e=>e.startsWith("token=")))?N.split("=")[1]:null),P=A.get("invitation_id"),[O,E]=(0,o.useState)(null),[D,R]=(0,o.useState)(null),[B,F]=(0,o.useState)([]),[L,z]=(0,o.useState)(null),[q,U]=(0,o.useState)(null);if(window.addEventListener("beforeunload",function(){sessionStorage.clear()}),(0,o.useEffect)(()=>{if(M){let e=(0,i.jwtDecode)(M);if(e){if(console.log("Decoded token:",e),console.log("Decoded key:",e.key),E(e.key),e.user_role){let t=function(e){if(!e)return"Undefined Role";switch(console.log(`Received user role: ${e}`),e.toLowerCase()){case"app_owner":case"demo_app_owner":return"App Owner";case"app_admin":case"proxy_admin":return"Admin";case"proxy_admin_viewer":return"Admin Viewer";case"app_user":return"App User";case"internal_user":return"Internal User";case"internal_user_viewer":return"Internal Viewer";default:return"Unknown Role"}}(e.user_role);console.log("Decoded user_role:",t),p(t)}else console.log("User role not defined");e.user_email?y(e.user_email):console.log(`User Email is not set ${e}`)}}if(e&&O&&h&&!x&&!C){let t=sessionStorage.getItem("userModels"+e);t?F(JSON.parse(t)):(console.log(`currentOrg: ${JSON.stringify(T)}`),(async()=>{try{let t=await (0,u.getProxyUISettings)(O);z(t);let a=await (0,u.userInfoCall)(O,e,h,!1,null,null);S(a.user_info),console.log(`userSpendData: ${JSON.stringify(C)}`),a?.teams[0].keys?j(a.keys.concat(a.teams.filter(t=>"Admin"===h||t.user_id===e).flatMap(e=>e.keys))):j(a.keys),sessionStorage.setItem("userData"+e,JSON.stringify(a.keys)),sessionStorage.setItem("userSpendData"+e,JSON.stringify(a.user_info));let s=(await (0,u.modelAvailableCall)(O,e,h)).data.map(e=>e.id);console.log("available_model_names:",s),F(s),console.log("userModels:",B),sessionStorage.setItem("userModels"+e,JSON.stringify(s))}catch(e){console.error("There was an error fetching the data",e),e.message.includes("Invalid proxy server token passed")&&H()}})(),(0,d.fetchTeams)(O,e,h,T,b))}},[e,M,O,x,h]),(0,o.useEffect)(()=>{O&&(async()=>{try{let e=await (0,u.keyInfoCall)(O,[O]);console.log("keyInfo: ",e)}catch(e){e.message.includes("Invalid proxy server token passed")&&H()}})()},[O]),(0,o.useEffect)(()=>{console.log(`currentOrg: ${JSON.stringify(T)}, accessToken: ${O}, userID: ${e}, userRole: ${h}`),O&&(console.log("fetching teams"),(0,d.fetchTeams)(O,e,h,T,b))},[T]),(0,o.useEffect)(()=>{if(null!==x&&null!=q&&null!==q.team_id){let e=0;for(let t of(console.log(`keys: ${JSON.stringify(x)}`),x))q.hasOwnProperty("team_id")&&null!==t.team_id&&t.team_id===q.team_id&&(e+=t.spend);console.log(`sum: ${e}`),R(e)}else if(null!==x){let e=0;for(let t of x)e+=t.spend;R(e)}},[q]),null!=P)return(0,t.jsx)(c.default,{});function H(){(0,a.clearTokenCookies)();let e=(0,u.getProxyBaseUrl)();console.log("proxyBaseUrl:",e);let t=e?`${e}/sso/key/generate`:"/sso/key/generate";return console.log("Full URL:",t),window.location.href=t,null}if(null==M)return console.log("All cookies before redirect:",document.cookie),H(),null;try{let e=(0,i.jwtDecode)(M);console.log("Decoded token:",e);let t=e.exp,a=Math.floor(Date.now()/1e3);if(t&&a>=t)return console.log("Token expired, redirecting to login"),H(),null}catch(e){return console.error("Error decoding token:",e),(0,a.clearTokenCookies)(),H(),null}if(null==O)return null;if(null==e)return(0,t.jsx)("h1",{children:"User ID is not set"});if(null==h&&p("App Owner"),h&&"Admin Viewer"==h){let{Title:e,Paragraph:a}=r.Typography;return(0,t.jsxs)("div",{children:[(0,t.jsx)(e,{level:1,children:"Access Denied"}),(0,t.jsx)(a,{children:"Ask your proxy admin for access to create keys"})]})}return console.log("inside user dashboard, selected team",q),console.log("All cookies after redirect:",document.cookie),(0,t.jsx)("div",{className:"w-full mx-4 h-[75vh]",children:(0,t.jsx)(l.Grid,{numItems:1,className:"gap-2 p-8 w-full mt-2",children:(0,t.jsxs)(s.Col,{numColSpan:1,className:"flex flex-col gap-2",children:[(0,t.jsx)(m.default,{team:q,teams:g,data:x,addKey:k},q?q.team_id:null),(0,t.jsx)($,{teams:g,organizations:w})]})})})}],693569)},601236,e=>{e.v(e=>Promise.resolve().then(()=>e(764205)))}]);