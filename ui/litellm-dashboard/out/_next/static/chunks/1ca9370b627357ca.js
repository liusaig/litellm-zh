(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,829672,836938,310730,e=>{"use strict";e.i(247167);var t=e.i(271645),r=e.i(343794),n=e.i(914949),l=e.i(404948);let o=e=>e?"function"==typeof e?e():e:null;e.s(["getRenderPropValue",0,o],836938);var i=e.i(613541),a=e.i(763731),s=e.i(242064),d=e.i(491816);e.i(793154);var c=e.i(880476),u=e.i(183293),p=e.i(717356),m=e.i(320560),g=e.i(307358),f=e.i(246422),x=e.i(838378),y=e.i(617933);let b=(0,f.genStyleHooks)("Popover",e=>{let{colorBgElevated:t,colorText:r}=e,n=(0,x.mergeToken)(e,{popoverBg:t,popoverColor:r});return[(e=>{let{componentCls:t,popoverColor:r,titleMinWidth:n,fontWeightStrong:l,innerPadding:o,boxShadowSecondary:i,colorTextHeading:a,borderRadiusLG:s,zIndexPopup:d,titleMarginBottom:c,colorBgElevated:p,popoverBg:g,titleBorderBottom:f,innerContentPadding:x,titlePadding:y}=e;return[{[t]:Object.assign(Object.assign({},(0,u.resetComponent)(e)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:d,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:"var(--valid-offset-x, 50%) var(--arrow-y, 50%)","--antd-arrow-background-color":p,width:"max-content",maxWidth:"100vw","&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${t}-content`]:{position:"relative"},[`${t}-inner`]:{backgroundColor:g,backgroundClip:"padding-box",borderRadius:s,boxShadow:i,padding:o},[`${t}-title`]:{minWidth:n,marginBottom:c,color:a,fontWeight:l,borderBottom:f,padding:y},[`${t}-inner-content`]:{color:r,padding:x}})},(0,m.default)(e,"var(--antd-arrow-background-color)"),{[`${t}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow,display:"inline-block",[`${t}-content`]:{display:"inline-block"}}}]})(n),(e=>{let{componentCls:t}=e;return{[t]:y.PresetColors.map(r=>{let n=e[`${r}6`];return{[`&${t}-${r}`]:{"--antd-arrow-background-color":n,[`${t}-inner`]:{backgroundColor:n},[`${t}-arrow`]:{background:"transparent"}}}})}})(n),(0,p.initZoomMotion)(n,"zoom-big")]},e=>{let{lineWidth:t,controlHeight:r,fontHeight:n,padding:l,wireframe:o,zIndexPopupBase:i,borderRadiusLG:a,marginXS:s,lineType:d,colorSplit:c,paddingSM:u}=e,p=r-n;return Object.assign(Object.assign(Object.assign({titleMinWidth:177,zIndexPopup:i+30},(0,g.getArrowToken)(e)),(0,m.getArrowOffsetToken)({contentRadius:a,limitVerticalRadius:!0})),{innerPadding:12*!o,titleMarginBottom:o?0:s,titlePadding:o?`${p/2}px ${l}px ${p/2-t}px`:0,titleBorderBottom:o?`${t}px ${d} ${c}`:"none",innerContentPadding:o?`${u}px ${l}px`:0})},{resetStyle:!1,deprecatedTokens:[["width","titleMinWidth"],["minWidth","titleMinWidth"]]});var h=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,n=Object.getOwnPropertySymbols(e);l<n.length;l++)0>t.indexOf(n[l])&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(r[n[l]]=e[n[l]]);return r};let v=({title:e,content:r,prefixCls:n})=>e||r?t.createElement(t.Fragment,null,e&&t.createElement("div",{className:`${n}-title`},e),r&&t.createElement("div",{className:`${n}-inner-content`},r)):null,j=e=>{let{hashId:n,prefixCls:l,className:i,style:a,placement:s="top",title:d,content:u,children:p}=e,m=o(d),g=o(u),f=(0,r.default)(n,l,`${l}-pure`,`${l}-placement-${s}`,i);return t.createElement("div",{className:f,style:a},t.createElement("div",{className:`${l}-arrow`}),t.createElement(c.Popup,Object.assign({},e,{className:n,prefixCls:l}),p||t.createElement(v,{prefixCls:l,title:m,content:g})))},O=e=>{let{prefixCls:n,className:l}=e,o=h(e,["prefixCls","className"]),{getPrefixCls:i}=t.useContext(s.ConfigContext),a=i("popover",n),[d,c,u]=b(a);return d(t.createElement(j,Object.assign({},o,{prefixCls:a,hashId:c,className:(0,r.default)(l,u)})))};e.s(["Overlay",0,v,"default",0,O],310730);var w=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,n=Object.getOwnPropertySymbols(e);l<n.length;l++)0>t.indexOf(n[l])&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(r[n[l]]=e[n[l]]);return r};let C=t.forwardRef((e,c)=>{var u,p;let{prefixCls:m,title:g,content:f,overlayClassName:x,placement:y="top",trigger:h="hover",children:j,mouseEnterDelay:O=.1,mouseLeaveDelay:C=.1,onOpenChange:S,overlayStyle:N={},styles:$,classNames:k}=e,P=w(e,["prefixCls","title","content","overlayClassName","placement","trigger","children","mouseEnterDelay","mouseLeaveDelay","onOpenChange","overlayStyle","styles","classNames"]),{getPrefixCls:E,className:I,style:_,classNames:B,styles:T}=(0,s.useComponentConfig)("popover"),z=E("popover",m),[A,F,D]=b(z),R=E(),U=(0,r.default)(x,F,D,I,B.root,null==k?void 0:k.root),W=(0,r.default)(B.body,null==k?void 0:k.body),[M,L]=(0,n.default)(!1,{value:null!=(u=e.open)?u:e.visible,defaultValue:null!=(p=e.defaultOpen)?p:e.defaultVisible}),V=(e,t)=>{L(e,!0),null==S||S(e,t)},K=o(g),q=o(f);return A(t.createElement(d.default,Object.assign({placement:y,trigger:h,mouseEnterDelay:O,mouseLeaveDelay:C},P,{prefixCls:z,classNames:{root:U,body:W},styles:{root:Object.assign(Object.assign(Object.assign(Object.assign({},T.root),_),N),null==$?void 0:$.root),body:Object.assign(Object.assign({},T.body),null==$?void 0:$.body)},ref:c,open:M,onOpenChange:e=>{V(e)},overlay:K||q?t.createElement(v,{prefixCls:z,title:K,content:q}):null,transitionName:(0,i.getTransitionName)(R,"zoom-big",P.transitionName),"data-popover-inject":!0}),(0,a.cloneElement)(j,{onKeyDown:e=>{var r,n;(0,t.isValidElement)(j)&&(null==(n=null==j?void 0:(r=j.props).onKeyDown)||n.call(r,e)),e.keyCode===l.default.ESC&&V(!1,e)}})))});C._InternalPanelDoNotUseOrYouWillBeFired=O,e.s(["default",0,C],829672)},282786,e=>{"use strict";var t=e.i(829672);e.s(["Popover",()=>t.default])},594542,e=>{"use strict";var t=e.i(843476),r=e.i(954616),n=e.i(764205),l=e.i(612256),o=e.i(936578),i=e.i(268004),a=e.i(161281),s=e.i(317751),d=e.i(912598),c=e.i(560445),u=e.i(464571),p=e.i(175712),m=e.i(808613),g=e.i(311451),f=e.i(282786),x=e.i(770914),y=e.i(898586),b=e.i(618566),h=e.i(271645);function v(){let[e,s]=(0,h.useState)(""),[d,v]=(0,h.useState)(""),[j,O]=(0,h.useState)(!0),{data:w,isLoading:C}=(0,l.useUIConfig)(),S=(0,r.useMutation)({mutationFn:async({username:e,password:t})=>await (0,n.loginCall)(e,t)}),N=(0,b.useRouter)();(0,h.useEffect)(()=>{if(C)return;if(w&&w.admin_ui_disabled)return void O(!1);let e=(0,i.getCookie)("token");e&&!(0,a.isJwtExpired)(e)?N.replace(`${(0,n.getProxyBaseUrl)()}/ui`):w&&w.auto_redirect_to_sso?N.push(`${(0,n.getProxyBaseUrl)()}/sso/key/generate`):O(!1)},[C,N,w]);let $=S.error instanceof Error?S.error.message:null,k=S.isPending,{Title:P,Text:E,Paragraph:I}=y.Typography;return C||j?(0,t.jsx)(o.default,{}):w&&w.admin_ui_disabled?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsx)(p.Card,{className:"w-full max-w-lg shadow-md",children:(0,t.jsx)(x.Space,{direction:"vertical",size:"middle",className:"w-full",children:(0,t.jsx)(c.Alert,{message:"管理后台已禁用",description:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(I,{className:"text-sm",children:"管理员已禁用管理后台。若需重新启用，请更新以下环境变量："}),(0,t.jsx)(I,{className:"text-sm",children:(0,t.jsx)("code",{className:"bg-gray-100 px-1 py-0.5 rounded text-xs",children:"DISABLE_ADMIN_UI=False"})})]}),type:"warning",showIcon:!0})})})}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,t.jsxs)(p.Card,{className:"w-full max-w-lg shadow-md",children:[(0,t.jsxs)(x.Space,{direction:"vertical",size:"middle",className:"w-full",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(P,{level:3,children:"登录"}),(0,t.jsx)(E,{type:"secondary",children:"访问网关管理后台。"})]}),$&&(0,t.jsx)(c.Alert,{message:$,type:"error",showIcon:!0}),(0,t.jsxs)(m.Form,{onFinish:()=>{S.mutate({username:e,password:d},{onSuccess:e=>{N.push(e.redirect_url)}})},layout:"vertical",requiredMark:!0,children:[(0,t.jsx)(m.Form.Item,{label:"用户名",name:"username",rules:[{required:!0,message:"请输入用户名"}],children:(0,t.jsx)(g.Input,{placeholder:"请输入用户名",autoComplete:"username",value:e,onChange:e=>s(e.target.value),disabled:k,size:"large",className:"rounded-md border-gray-300"})}),(0,t.jsx)(m.Form.Item,{label:"密码",name:"password",rules:[{required:!0,message:"请输入密码"}],children:(0,t.jsx)(g.Input.Password,{placeholder:"请输入密码",autoComplete:"current-password",value:d,onChange:e=>v(e.target.value),disabled:k,size:"large"})}),(0,t.jsx)(m.Form.Item,{children:(0,t.jsx)(u.Button,{type:"primary",htmlType:"submit",loading:k,disabled:k,block:!0,size:"large",children:k?"登录中...":"登录"})}),(0,t.jsx)(m.Form.Item,{children:w?.sso_configured?(0,t.jsx)(u.Button,{disabled:k,onClick:()=>N.push(`${(0,n.getProxyBaseUrl)()}/sso/key/generate`),block:!0,size:"large",children:"使用 SSO 登录"}):(0,t.jsx)(f.Popover,{content:"请先配置 SSO 后再使用 SSO 登录。",trigger:"hover",children:(0,t.jsx)(u.Button,{disabled:!0,block:!0,size:"large",children:"使用 SSO 登录"})})})]})]}),w?.sso_configured&&(0,t.jsx)(c.Alert,{type:"info",showIcon:!0,closable:!0,message:(0,t.jsxs)(E,{children:["已启用单点登录（SSO）。Silinex 现在在加载此页面时不再自动跳转到 SSO 登录流程。若要恢复自动跳转，请在环境配置中设置",(0,t.jsx)(E,{code:!0,children:"AUTO_REDIRECT_UI_LOGIN_TO_SSO=true"}),"。"]})})]})})}e.s(["default",0,function(){let e=new s.QueryClient;return(0,t.jsx)(d.QueryClientProvider,{client:e,children:(0,t.jsx)(v,{})})}],594542)}]);