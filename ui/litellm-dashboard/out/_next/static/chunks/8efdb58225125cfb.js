(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,980187,e=>{"use strict";e.s(["createTeamAliasMap",0,e=>e?e.reduce((e,a)=>(e[a.team_id]=a.team_alias,e),{}):{},"resolveTeamAliasFromTeamID",0,(e,a)=>{let i=a.find(a=>a.team_id===e);return i?i.team_alias:null}])},846753,e=>{"use strict";let a=(0,e.i(475254).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["default",()=>a])},655913,38419,78334,54943,555436,e=>{"use strict";var a=e.i(843476),i=e.i(115504),l=e.i(311451),t=e.i(374009),r=e.i(271645);e.s(["FilterInput",0,({placeholder:e,value:s,onChange:o,icon:n,className:d})=>{let[c,m]=(0,r.useState)(s);(0,r.useEffect)(()=>{m(s)},[s]);let g=(0,r.useMemo)(()=>(0,t.default)(e=>o(e),300),[o]);(0,r.useEffect)(()=>()=>{g.cancel()},[g]);let u=(0,r.useCallback)(e=>{let a=e.target.value;m(a),g(a)},[g]);return(0,a.jsx)(l.Input,{placeholder:e,value:c,onChange:u,prefix:n?(0,a.jsx)(n,{size:16,className:"text-gray-500"}):void 0,className:(0,i.cx)("w-64",d)})}],655913);var s=e.i(906579),o=e.i(464571),n=e.i(475254);let d=(0,n.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);e.s(["FiltersButton",0,({onClick:e,active:i,hasActiveFilters:l,label:t="Filters"})=>(0,a.jsx)(s.Badge,{color:"blue",dot:l,children:(0,a.jsx)(o.Button,{type:"default",onClick:e,icon:(0,a.jsx)(d,{size:16}),className:i?"bg-gray-100":"",children:t})})],38419);let c=(0,n.default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);e.s(["ResetFiltersButton",0,({onClick:e,label:i="Reset Filters"})=>(0,a.jsx)(o.Button,{type:"default",onClick:e,icon:(0,a.jsx)(c,{size:16}),children:i})],78334);let m=(0,n.default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["default",()=>m],54943),e.s(["Search",()=>m],555436)},284614,e=>{"use strict";var a=e.i(846753);e.s(["User",()=>a.default])},846835,e=>{"use strict";var a=e.i(843476),i=e.i(655913),l=e.i(38419),t=e.i(78334),r=e.i(555436),s=e.i(284614);let o=({filters:e,showFilters:o,onToggleFilters:n,onChange:d,onReset:c})=>{let m=!!(e.org_id||e.org_alias);return(0,a.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,a.jsx)(i.FilterInput,{placeholder:"按组织名称搜索",value:e.org_alias,onChange:e=>d("org_alias",e),icon:r.Search,className:"w-64"}),(0,a.jsx)(l.FiltersButton,{onClick:()=>n(!o),active:o,hasActiveFilters:m,label:"筛选"}),(0,a.jsx)(t.ResetFiltersButton,{onClick:c,label:"重置筛选"})]}),o&&(0,a.jsx)("div",{className:"flex flex-wrap items-center gap-3 mt-3",children:(0,a.jsx)(i.FilterInput,{placeholder:"按组织 ID 搜索",value:e.org_id,onChange:e=>d("org_id",e),icon:s.User,className:"w-64"})})]})};var n=e.i(827252),d=e.i(871943),c=e.i(502547),m=e.i(278587),g=e.i(389083),u=e.i(994388),x=e.i(304967),h=e.i(309426),_=e.i(350967),p=e.i(752978),b=e.i(197647),j=e.i(653824),v=e.i(269200),z=e.i(942232),f=e.i(977572),w=e.i(427612),T=e.i(64848),y=e.i(496020),D=e.i(881073),C=e.i(404206),N=e.i(723731),F=e.i(599724),S=e.i(779241),k=e.i(808613),I=e.i(311451),B=e.i(212931),L=e.i(199133),M=e.i(592968),A=e.i(271645),P=e.i(111110),O=e.i(500330),E=e.i(127952),V=e.i(902555),R=e.i(355619),U=e.i(75921),H=e.i(162386),q=e.i(727749),G=e.i(764205),W=e.i(785242),$=e.i(980187),J=e.i(530212),K=e.i(629569),Q=e.i(464571),X=e.i(653496),Y=e.i(898586),Z=e.i(678784),ee=e.i(118366),ea=e.i(294612),ei=e.i(907308),el=e.i(384767),et=e.i(435451),er=e.i(276173),es=e.i(916940);let eo=({organizationId:e,onClose:i,accessToken:l,is_org_admin:t,is_proxy_admin:r,userModels:s,editOrg:o})=>{let[n,d]=(0,A.useState)(null),[c,m]=(0,A.useState)(!0),[h]=k.Form.useForm(),[p,b]=(0,A.useState)(!1),[j,v]=(0,A.useState)(!1),[z,f]=(0,A.useState)(!1),[w,T]=(0,A.useState)(null),[y,D]=(0,A.useState)({}),[C,N]=(0,A.useState)(!1),B=t||r,{data:M}=(0,W.useTeams)(),{t:E}=(0,P.useLanguage)(),V=(0,A.useMemo)(()=>(0,$.createTeamAliasMap)(M),[M]),R=async()=>{try{if(m(!0),!l)return;let a=await (0,G.organizationInfoCall)(l,e);d(a)}catch(e){q.default.fromBackend(E("organizationDetail.errors.loadFailed")),console.error("Error fetching organization info:",e)}finally{m(!1)}};(0,A.useEffect)(()=>{R()},[e,l]);let eo=async a=>{try{if(null==l)return;let i={user_email:a.user_email,user_id:a.user_id,role:a.role};await (0,G.organizationMemberAddCall)(l,e,i),q.default.success(E("organizationDetail.notifications.memberAdded")),v(!1),h.resetFields(),R()}catch(e){q.default.fromBackend(E("organizationDetail.errors.memberAddFailed")),console.error("Error adding organization member:",e)}},en=async a=>{try{if(!l)return;let i={user_email:a.user_email,user_id:a.user_id,role:a.role};await (0,G.organizationMemberUpdateCall)(l,e,i),q.default.success(E("organizationDetail.notifications.memberUpdated")),f(!1),h.resetFields(),R()}catch(e){q.default.fromBackend(E("organizationDetail.errors.memberUpdateFailed")),console.error("Error updating organization member:",e)}},ed=async a=>{try{if(!l)return;await (0,G.organizationMemberDeleteCall)(l,e,a.user_id),q.default.success(E("organizationDetail.notifications.memberDeleted")),f(!1),h.resetFields(),R()}catch(e){q.default.fromBackend(E("organizationDetail.errors.memberDeleteFailed")),console.error("Error deleting organization member:",e)}},ec=async a=>{try{if(!l)return;N(!0);let i={organization_id:e,organization_alias:a.organization_alias,models:a.models,litellm_budget_table:{tpm_limit:a.tpm_limit,rpm_limit:a.rpm_limit,max_budget:a.max_budget,budget_duration:a.budget_duration},metadata:a.metadata?JSON.parse(a.metadata):null};if((void 0!==a.vector_stores||void 0!==a.mcp_servers_and_groups)&&(i.object_permission={...n?.object_permission,vector_stores:a.vector_stores||[]},void 0!==a.mcp_servers_and_groups)){let{servers:e,accessGroups:l}=a.mcp_servers_and_groups||{servers:[],accessGroups:[]};e&&e.length>0&&(i.object_permission.mcp_servers=e),l&&l.length>0&&(i.object_permission.mcp_access_groups=l)}await (0,G.organizationUpdateCall)(l,i),q.default.success(E("organizationDetail.notifications.settingsUpdated")),b(!1),R()}catch(e){q.default.fromBackend(E("organizationDetail.errors.settingsUpdateFailed")),console.error("Error updating organization:",e)}finally{N(!1)}};if(c)return(0,a.jsx)("div",{className:"p-4",children:E("organizationDetail.loading")});if(!n)return(0,a.jsx)("div",{className:"p-4",children:E("organizationDetail.notFound")});let em=async(e,a)=>{await (0,O.copyToClipboard)(e)&&(D(e=>({...e,[a]:!0})),setTimeout(()=>{D(e=>({...e,[a]:!1}))},2e3))},eg=[{title:E("organizationDetail.columns.spend"),key:"spend",render:(e,i)=>{let l=null!=i.user_id?(n.members||[]).find(e=>e.user_id===i.user_id):void 0;return(0,a.jsx)(Y.Typography.Text,{children:(0,O.formatNumberWithCommas)(l?.spend??0,4)})}},{title:E("organizationDetail.columns.createdAt"),key:"created_at",render:(e,i)=>{let l=null!=i.user_id?(n.members||[]).find(e=>e.user_id===i.user_id):void 0;return(0,a.jsx)(Y.Typography.Text,{children:l?.created_at?new Date(l.created_at).toLocaleString():"-"})}}];return(0,a.jsxs)("div",{className:"w-full h-screen p-4 bg-white",children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(u.Button,{icon:J.ArrowLeftIcon,onClick:i,variant:"light",className:"mb-4",children:E("organizationDetail.backButton")}),(0,a.jsx)(K.Title,{children:n.organization_alias}),(0,a.jsxs)("div",{className:"flex items-center cursor-pointer",children:[(0,a.jsx)(F.Text,{className:"text-gray-500 font-mono",children:n.organization_id}),(0,a.jsx)(Q.Button,{type:"text",size:"small",icon:y["org-id"]?(0,a.jsx)(Z.CheckIcon,{size:12}):(0,a.jsx)(ee.CopyIcon,{size:12}),onClick:()=>em(n.organization_id,"org-id"),className:`left-2 z-10 transition-all duration-200 ${y["org-id"]?"text-green-600 bg-green-50 border-green-200":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`})]})]})}),(0,a.jsx)(X.Tabs,{defaultActiveKey:o?"settings":"overview",className:"mb-4",items:[{key:"overview",label:E("organizationDetail.tabs.overview"),children:(0,a.jsxs)(_.Grid,{numItems:1,numItemsSm:2,numItemsLg:3,className:"gap-6",children:[(0,a.jsxs)(x.Card,{children:[(0,a.jsx)(F.Text,{children:E("organizationDetail.overview.orgDetails")}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)(F.Text,{children:[E("organizationDetail.overview.created"),": ",new Date(n.created_at).toLocaleDateString()]}),(0,a.jsxs)(F.Text,{children:[E("organizationDetail.overview.updated"),": ",new Date(n.updated_at).toLocaleDateString()]}),(0,a.jsxs)(F.Text,{children:[E("organizationDetail.overview.createdBy"),": ",n.created_by]})]})]}),(0,a.jsxs)(x.Card,{children:[(0,a.jsx)(F.Text,{children:E("organizationDetail.overview.budgetStatus")}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)(K.Title,{children:(0,O.formatNumberWithCommas)(n.spend,4)}),(0,a.jsxs)(F.Text,{children:[E("organizationDetail.overview.of")," ",null===n.litellm_budget_table.max_budget?E("organizationDetail.overview.unlimited"):(0,O.formatNumberWithCommas)(n.litellm_budget_table.max_budget,4)]}),n.litellm_budget_table.budget_duration&&(0,a.jsxs)(F.Text,{className:"text-gray-500",children:[E("organizationDetail.overview.reset"),": ",n.litellm_budget_table.budget_duration]})]})]}),(0,a.jsxs)(x.Card,{children:[(0,a.jsx)(F.Text,{children:E("organizationDetail.overview.rateLimits")}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)(F.Text,{children:[E("organizationDetail.overview.tpm"),": ",n.litellm_budget_table.tpm_limit||E("organizationDetail.overview.unlimited")]}),(0,a.jsxs)(F.Text,{children:[E("organizationDetail.overview.rpm"),": ",n.litellm_budget_table.rpm_limit||E("organizationDetail.overview.unlimited")]}),n.litellm_budget_table.max_parallel_requests&&(0,a.jsxs)(F.Text,{children:[E("organizationDetail.overview.maxParallelRequests"),": ",n.litellm_budget_table.max_parallel_requests]})]})]}),(0,a.jsxs)(x.Card,{children:[(0,a.jsx)(F.Text,{children:E("organizationDetail.overview.models")}),(0,a.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:0===n.models.length?(0,a.jsx)(g.Badge,{color:"red",children:E("organizationDetail.overview.allProxyModels")}):n.models.map((e,i)=>(0,a.jsx)(g.Badge,{color:"red",children:e},i))})]}),(0,a.jsxs)(x.Card,{children:[(0,a.jsx)(F.Text,{children:E("organizationDetail.overview.teams")}),(0,a.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:n.teams?.map((e,i)=>(0,a.jsx)(g.Badge,{color:"red",children:V[e.team_id]||e.team_id},i))})]}),(0,a.jsx)(el.default,{objectPermission:n.object_permission,variant:"card",accessToken:l})]})},{key:"members",label:E("organizationDetail.tabs.members"),children:(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsx)(ea.default,{members:(n.members||[]).map(e=>({role:e.user_role||"",user_id:e.user_id,user_email:e.user_email})),canEdit:B,onEdit:e=>{T(e),f(!0)},onDelete:e=>ed(e),onAddMember:()=>v(!0),roleColumnTitle:E("organizationDetail.members.roleColumn"),extraColumns:eg,emptyText:E("organizationDetail.members.noMembers")})})},{key:"settings",label:E("organizationDetail.tabs.settings"),children:(0,a.jsxs)(x.Card,{className:"overflow-y-auto max-h-[65vh]",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)(K.Title,{children:E("organizationDetail.settings.title")}),B&&!p&&(0,a.jsx)(u.Button,{onClick:()=>b(!0),children:E("organizationDetail.settings.editButton")})]}),p?(0,a.jsxs)(k.Form,{form:h,onFinish:ec,initialValues:{organization_alias:n.organization_alias,models:n.models,tpm_limit:n.litellm_budget_table.tpm_limit,rpm_limit:n.litellm_budget_table.rpm_limit,max_budget:n.litellm_budget_table.max_budget,budget_duration:n.litellm_budget_table.budget_duration,metadata:n.metadata?JSON.stringify(n.metadata,null,2):"",vector_stores:n.object_permission?.vector_stores||[],mcp_servers_and_groups:{servers:n.object_permission?.mcp_servers||[],accessGroups:n.object_permission?.mcp_access_groups||[]}},layout:"vertical",children:[(0,a.jsx)(k.Form.Item,{label:E("organizationDetail.settings.orgName"),name:"organization_alias",rules:[{required:!0,message:E("organizationDetail.settings.orgNameRequired")}],children:(0,a.jsx)(S.TextInput,{placeholder:E("organizations.modal.orgNamePlaceholder")})}),(0,a.jsx)(k.Form.Item,{label:E("organizationDetail.settings.models"),name:"models",children:(0,a.jsx)(H.ModelSelect,{value:h.getFieldValue("models"),onChange:e=>h.setFieldValue("models",e),context:"organization",placeholder:E("organizations.modal.modelsPlaceholder"),options:{includeSpecialOptions:!0,showAllProxyModelsOverride:!0}})}),(0,a.jsx)(k.Form.Item,{label:E("organizationDetail.settings.maxBudget"),name:"max_budget",children:(0,a.jsx)(et.default,{step:.01,precision:2,style:{width:"100%"},placeholder:E("organizations.modal.maxBudgetPlaceholder")})}),(0,a.jsx)(k.Form.Item,{label:E("organizationDetail.settings.resetBudget"),name:"budget_duration",children:(0,a.jsxs)(L.Select,{placeholder:E("organizations.modal.budgetDurationPlaceholder"),children:[(0,a.jsx)(L.Select.Option,{value:"24h",children:E("organizationDetail.settings.daily")}),(0,a.jsx)(L.Select.Option,{value:"7d",children:E("organizationDetail.settings.weekly")}),(0,a.jsx)(L.Select.Option,{value:"30d",children:E("organizationDetail.settings.monthly")})]})}),(0,a.jsx)(k.Form.Item,{label:E("organizationDetail.settings.tpmLimit"),name:"tpm_limit",children:(0,a.jsx)(et.default,{step:1,style:{width:"100%"},placeholder:E("organizations.modal.tpmLimitPlaceholder")})}),(0,a.jsx)(k.Form.Item,{label:E("organizationDetail.settings.rpmLimit"),name:"rpm_limit",children:(0,a.jsx)(et.default,{step:1,style:{width:"100%"},placeholder:E("organizations.modal.rpmLimitPlaceholder")})}),(0,a.jsx)(k.Form.Item,{label:E("organizationDetail.settings.vectorStores"),name:"vector_stores",children:(0,a.jsx)(es.default,{onChange:e=>h.setFieldValue("vector_stores",e),value:h.getFieldValue("vector_stores"),accessToken:l||"",placeholder:E("organizations.modal.vectorStoresPlaceholder")})}),(0,a.jsx)(k.Form.Item,{label:E("organizationDetail.settings.mcpServers"),name:"mcp_servers_and_groups",children:(0,a.jsx)(U.default,{onChange:e=>h.setFieldValue("mcp_servers_and_groups",e),value:h.getFieldValue("mcp_servers_and_groups"),accessToken:l||"",placeholder:E("organizations.modal.mcpServersPlaceholder")})}),(0,a.jsx)(k.Form.Item,{label:E("organizationDetail.settings.metadata"),name:"metadata",children:(0,a.jsx)(I.Input.TextArea,{rows:4,placeholder:E("organizations.modal.metadata")})}),(0,a.jsx)("div",{className:"sticky z-10 bg-white p-4 border-t border-gray-200 bottom-[-1.5rem] inset-x-[-1.5rem]",children:(0,a.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,a.jsx)(u.Button,{variant:"secondary",onClick:()=>b(!1),disabled:C,children:E("organizationDetail.settings.cancel")}),(0,a.jsx)(u.Button,{type:"submit",loading:C,children:E("organizationDetail.settings.saveChanges")})]})})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(F.Text,{className:"font-medium",children:E("organizationDetail.settings.orgName")}),(0,a.jsx)("div",{children:n.organization_alias})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(F.Text,{className:"font-medium",children:E("organizationDetail.settings.orgId")}),(0,a.jsx)("div",{className:"font-mono",children:n.organization_id})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(F.Text,{className:"font-medium",children:E("organizationDetail.settings.createdAt")}),(0,a.jsx)("div",{children:new Date(n.created_at).toLocaleString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(F.Text,{className:"font-medium",children:E("organizationDetail.settings.models")}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:n.models.map((e,i)=>(0,a.jsx)(g.Badge,{color:"red",children:e},i))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(F.Text,{className:"font-medium",children:E("organizationDetail.settings.rateLimits")}),(0,a.jsxs)("div",{children:[E("organizationDetail.overview.tpm"),": ",n.litellm_budget_table.tpm_limit||E("organizationDetail.overview.unlimited")]}),(0,a.jsxs)("div",{children:[E("organizationDetail.overview.rpm"),": ",n.litellm_budget_table.rpm_limit||E("organizationDetail.overview.unlimited")]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(F.Text,{className:"font-medium",children:E("organizationDetail.settings.budget")}),(0,a.jsxs)("div",{children:[E("organizationDetail.settings.max"),":"," ",null!==n.litellm_budget_table.max_budget?(0,O.formatNumberWithCommas)(n.litellm_budget_table.max_budget,4):E("organizationDetail.settings.noLimit")]}),(0,a.jsxs)("div",{children:[E("organizationDetail.settings.reset"),": ",n.litellm_budget_table.budget_duration||E("organizationDetail.settings.never")]})]}),(0,a.jsx)(el.default,{objectPermission:n.object_permission,variant:"inline",className:"pt-4 border-t border-gray-200",accessToken:l})]})]})}]}),(0,a.jsx)(ei.default,{isVisible:j,onCancel:()=>v(!1),onSubmit:eo,accessToken:l,title:E("organizationDetail.members.addMemberTitle"),roles:[{label:"org_admin",value:"org_admin",description:E("organizationDetail.members.roles.orgAdmin.description")},{label:"internal_user",value:"internal_user",description:E("organizationDetail.members.roles.internalUser.description")},{label:"internal_user_viewer",value:"internal_user_viewer",description:E("organizationDetail.members.roles.internalUserViewer.description")}],defaultRole:"internal_user"}),(0,a.jsx)(er.default,{visible:z,onCancel:()=>f(!1),onSubmit:en,initialData:w,mode:"edit",config:{title:E("organizationDetail.members.editMemberTitle"),showEmail:!0,showUserId:!0,roleOptions:[{label:E("organizationDetail.members.roles.orgAdmin.label"),value:"org_admin"},{label:E("organizationDetail.members.roles.internalUser.label"),value:"internal_user"},{label:E("organizationDetail.members.roles.internalUserViewer.label"),value:"internal_user_viewer"}]}})]})},en=async(e,a,i=null,l=null)=>{a(await (0,G.organizationListCall)(e,i,l))};e.s(["default",0,({organizations:e,userRole:i,userModels:l,accessToken:t,lastRefreshed:r,handleRefreshClick:s,currentOrg:W,guardrailsList:$=[],setOrganizations:J,premiumUser:K})=>{let{t:Q}=(0,P.useLanguage)(),[X,Y]=(0,A.useState)(null),[Z,ee]=(0,A.useState)(!1),[ea,ei]=(0,A.useState)(!1),[el,er]=(0,A.useState)(null),[ed,ec]=(0,A.useState)(!1),[em,eg]=(0,A.useState)(!1),[eu]=k.Form.useForm(),[ex,eh]=(0,A.useState)({}),[e_,ep]=(0,A.useState)(!1),[eb,ej]=(0,A.useState)({org_id:"",org_alias:"",sort_by:"created_at",sort_order:"desc"}),ev=async()=>{if(el&&t)try{ec(!0),await (0,G.organizationDeleteCall)(t,el),q.default.success(Q("organizations.notifications.deleteSuccess")),ei(!1),er(null),await en(t,J,eb.org_id||null,eb.org_alias||null)}catch(e){console.error("Error deleting organization:",e)}finally{ec(!1)}},ez=async e=>{try{if(!t)return;console.log(`values in organizations new create call: ${JSON.stringify(e)}`),(e.allowed_vector_store_ids&&e.allowed_vector_store_ids.length>0||e.allowed_mcp_servers_and_groups&&(e.allowed_mcp_servers_and_groups.servers?.length>0||e.allowed_mcp_servers_and_groups.accessGroups?.length>0))&&(e.object_permission={},e.allowed_vector_store_ids&&e.allowed_vector_store_ids.length>0&&(e.object_permission.vector_stores=e.allowed_vector_store_ids,delete e.allowed_vector_store_ids),e.allowed_mcp_servers_and_groups&&(e.allowed_mcp_servers_and_groups.servers?.length>0&&(e.object_permission.mcp_servers=e.allowed_mcp_servers_and_groups.servers),e.allowed_mcp_servers_and_groups.accessGroups?.length>0&&(e.object_permission.mcp_access_groups=e.allowed_mcp_servers_and_groups.accessGroups),delete e.allowed_mcp_servers_and_groups)),await (0,G.organizationCreateCall)(t,e),q.default.success(Q("organizations.notifications.createSuccess")),eg(!1),eu.resetFields(),en(t,J,eb.org_id||null,eb.org_alias||null)}catch(e){console.error("Error creating organization:",e)}};return(0,a.jsxs)("div",{className:"w-full mx-4 h-[75vh]",children:[(0,a.jsx)(_.Grid,{numItems:1,className:"gap-2 p-8 w-full mt-2",children:(0,a.jsxs)(h.Col,{numColSpan:1,className:"flex flex-col gap-2",children:[(0,a.jsxs)(u.Button,{className:"w-fit",onClick:()=>eg(!0),children:["+ ",Q("organizations.createButton")]}),X?(0,a.jsx)(eo,{organizationId:X,onClose:()=>{Y(null),ee(!1)},accessToken:t,is_org_admin:!0,is_proxy_admin:"Admin"===i,userModels:l,editOrg:Z}):(0,a.jsxs)(j.TabGroup,{className:"gap-2 h-[75vh] w-full",children:[(0,a.jsxs)(D.TabList,{className:"flex justify-between mt-2 w-full items-center",children:[(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)(b.Tab,{children:Q("organizations.myOrganizations")})}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[r&&(0,a.jsxs)(F.Text,{children:[Q("organizations.lastRefreshed"),r]}),(0,a.jsx)(p.Icon,{icon:m.RefreshIcon,variant:"shadow",size:"xs",className:"self-center",onClick:s})]})]}),(0,a.jsx)(N.TabPanels,{children:(0,a.jsxs)(C.TabPanel,{children:[(0,a.jsx)(F.Text,{children:Q("organizations.clickToView")}),(0,a.jsx)(_.Grid,{numItems:1,className:"gap-2 pt-2 pb-2 h-[75vh] w-full mt-2",children:(0,a.jsx)(h.Col,{numColSpan:1,children:(0,a.jsxs)(x.Card,{className:"w-full mx-auto flex-auto overflow-hidden overflow-y-auto max-h-[50vh]",children:[(0,a.jsx)("div",{className:"border-b px-6 py-4",children:(0,a.jsx)("div",{className:"flex flex-col space-y-4",children:(0,a.jsx)(o,{filters:eb,showFilters:e_,onToggleFilters:ep,onChange:(e,a)=>{let i={...eb,[e]:a};ej(i),t&&(0,G.organizationListCall)(t,i.org_id||null,i.org_alias||null).then(e=>{e&&J(e)}).catch(e=>{console.error("Error fetching organizations:",e)})},onReset:()=>{ej({org_id:"",org_alias:"",sort_by:"created_at",sort_order:"desc"}),t&&(0,G.organizationListCall)(t,null,null).then(e=>{e&&J(e)}).catch(e=>{console.error("Error fetching organizations:",e)})}})})}),(0,a.jsxs)(v.Table,{children:[(0,a.jsx)(w.TableHead,{children:(0,a.jsxs)(y.TableRow,{children:[(0,a.jsx)(T.TableHeaderCell,{children:Q("organizations.table.orgId")}),(0,a.jsx)(T.TableHeaderCell,{children:Q("organizations.table.orgName")}),(0,a.jsx)(T.TableHeaderCell,{children:Q("organizations.table.createdAt")}),(0,a.jsx)(T.TableHeaderCell,{children:Q("organizations.table.spend")}),(0,a.jsx)(T.TableHeaderCell,{children:Q("organizations.table.budget")}),(0,a.jsx)(T.TableHeaderCell,{children:Q("organizations.table.models")}),(0,a.jsx)(T.TableHeaderCell,{children:Q("organizations.table.tpmRpmLimit")}),(0,a.jsx)(T.TableHeaderCell,{children:Q("organizations.table.info")}),(0,a.jsx)(T.TableHeaderCell,{children:Q("organizations.table.actions")})]})}),(0,a.jsx)(z.TableBody,{children:e&&e.length>0?e.sort((e,a)=>new Date(a.created_at).getTime()-new Date(e.created_at).getTime()).map(e=>(0,a.jsxs)(y.TableRow,{children:[(0,a.jsx)(f.TableCell,{children:(0,a.jsx)("div",{className:"overflow-hidden",children:(0,a.jsx)(M.Tooltip,{title:e.organization_id,children:(0,a.jsxs)(u.Button,{size:"xs",variant:"light",className:"font-mono text-[#6E29F6] bg-[#F1EAFE] hover:bg-[#E6D9FE] text-xs font-normal px-2 py-0.5 text-left overflow-hidden truncate max-w-[200px]",onClick:()=>Y(e.organization_id),children:[e.organization_id?.slice(0,7),"..."]})})})}),(0,a.jsx)(f.TableCell,{children:e.organization_alias}),(0,a.jsx)(f.TableCell,{children:e.created_at?new Date(e.created_at).toLocaleDateString():Q("organizations.table.noDate")}),(0,a.jsx)(f.TableCell,{children:(0,O.formatNumberWithCommas)(e.spend,4)}),(0,a.jsx)(f.TableCell,{children:e.litellm_budget_table?.max_budget!==null&&e.litellm_budget_table?.max_budget!==void 0?e.litellm_budget_table?.max_budget:Q("organizations.table.unlimited")}),(0,a.jsx)(f.TableCell,{style:{maxWidth:"8-x",whiteSpace:"pre-wrap",overflow:"hidden"},className:e.models.length>3?"px-0":"",children:(0,a.jsx)("div",{className:"flex flex-col",children:Array.isArray(e.models)?(0,a.jsx)("div",{className:"flex flex-col",children:0===e.models.length?(0,a.jsx)(g.Badge,{size:"xs",className:"mb-1",color:"red",children:(0,a.jsx)(F.Text,{children:Q("organizations.table.allModels")})}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex items-start",children:[e.models.length>3&&(0,a.jsx)("div",{children:(0,a.jsx)(p.Icon,{icon:ex[e.organization_id||""]?d.ChevronDownIcon:c.ChevronRightIcon,className:"cursor-pointer",size:"xs",onClick:()=>{eh(a=>({...a,[e.organization_id||""]:!a[e.organization_id||""]}))}})}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.models.slice(0,3).map((e,i)=>"all-proxy-models"===e?(0,a.jsx)(g.Badge,{size:"xs",color:"red",children:(0,a.jsx)(F.Text,{children:Q("organizations.table.allModels")})},i):(0,a.jsx)(g.Badge,{size:"xs",color:"blue",children:(0,a.jsx)(F.Text,{children:e.length>30?`${(0,R.getModelDisplayName)(e).slice(0,30)}...`:(0,R.getModelDisplayName)(e)})},i)),e.models.length>3&&!ex[e.organization_id||""]&&(0,a.jsx)(g.Badge,{size:"xs",color:"gray",className:"cursor-pointer",children:(0,a.jsxs)(F.Text,{children:["+",e.models.length-3,Q("organizations.table.moreModels")]})}),ex[e.organization_id||""]&&(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.models.slice(3).map((e,i)=>"all-proxy-models"===e?(0,a.jsx)(g.Badge,{size:"xs",color:"red",children:(0,a.jsx)(F.Text,{children:Q("organizations.table.allModels")})},i+3):(0,a.jsx)(g.Badge,{size:"xs",color:"blue",children:(0,a.jsx)(F.Text,{children:e.length>30?`${(0,R.getModelDisplayName)(e).slice(0,30)}...`:(0,R.getModelDisplayName)(e)})},i+3))})]})]})})}):null})}),(0,a.jsx)(f.TableCell,{children:(0,a.jsxs)(F.Text,{children:[Q("organizations.table.tpm"),e.litellm_budget_table?.tpm_limit?e.litellm_budget_table?.tpm_limit:Q("organizations.table.unlimited"),(0,a.jsx)("br",{}),Q("organizations.table.rpm"),e.litellm_budget_table?.rpm_limit?e.litellm_budget_table?.rpm_limit:Q("organizations.table.unlimited")]})}),(0,a.jsx)(f.TableCell,{children:(0,a.jsxs)(F.Text,{children:[e.members?.length||0,Q("organizations.table.members")]})}),(0,a.jsx)(f.TableCell,{children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(V.default,{variant:"Edit",tooltipText:Q("organizations.actions.edit"),onClick:()=>{Y(e.organization_id),ee(!0)}}),(0,a.jsx)(V.default,{variant:"Delete",tooltipText:Q("organizations.actions.delete"),onClick:()=>{var a;(a=e.organization_id)&&(er(a),ei(!0))}})]})})]},e.organization_id)):null})]})]})})})]})})]})]})}),(0,a.jsx)(B.Modal,{title:Q("organizations.modal.createTitle"),visible:em,width:800,footer:null,onCancel:()=>{eg(!1),eu.resetFields()},children:(0,a.jsxs)(k.Form,{form:eu,onFinish:ez,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,a.jsx)(k.Form.Item,{label:Q("organizations.modal.orgName"),name:"organization_alias",rules:[{required:!0,message:Q("organizations.modal.orgNameRequired")}],children:(0,a.jsx)(S.TextInput,{placeholder:Q("organizations.modal.orgNamePlaceholder")})}),(0,a.jsx)(k.Form.Item,{label:Q("organizations.modal.models"),name:"models",style:{marginTop:16},children:(0,a.jsx)(H.ModelSelect,{options:{showAllProxyModelsOverride:!0,includeSpecialOptions:!0},value:eu.getFieldValue("models"),onChange:e=>eu.setFieldValue("models",e),context:"organization",placeholder:Q("organizations.modal.modelsPlaceholder")})}),(0,a.jsx)(k.Form.Item,{label:Q("organizations.modal.maxBudget"),name:"max_budget",style:{marginTop:16},children:(0,a.jsx)(et.default,{step:.01,precision:2,width:200,placeholder:Q("organizations.modal.maxBudgetPlaceholder")})}),(0,a.jsx)(k.Form.Item,{label:Q("organizations.modal.budgetDuration"),name:"budget_duration",style:{marginTop:16},children:(0,a.jsxs)(L.Select,{defaultValue:null,placeholder:Q("organizations.modal.budgetDurationPlaceholder"),children:[(0,a.jsx)(L.Select.Option,{value:"24h",children:Q("organizations.modal.budgetDaily")}),(0,a.jsx)(L.Select.Option,{value:"7d",children:Q("organizations.modal.budgetWeekly")}),(0,a.jsx)(L.Select.Option,{value:"30d",children:Q("organizations.modal.budgetMonthly")})]})}),(0,a.jsx)(k.Form.Item,{label:Q("organizations.modal.tpmLimit"),name:"tpm_limit",style:{marginTop:16},children:(0,a.jsx)(et.default,{step:1,width:400,placeholder:Q("organizations.modal.tpmLimitPlaceholder")})}),(0,a.jsx)(k.Form.Item,{label:Q("organizations.modal.rpmLimit"),name:"rpm_limit",style:{marginTop:16},children:(0,a.jsx)(et.default,{step:1,width:400,placeholder:Q("organizations.modal.rpmLimitPlaceholder")})}),(0,a.jsx)(k.Form.Item,{label:(0,a.jsxs)("span",{children:[Q("organizations.modal.vectorStores")," ",(0,a.jsx)(M.Tooltip,{title:Q("organizations.modal.vectorStoresTooltip"),children:(0,a.jsx)(n.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"allowed_vector_store_ids",style:{marginTop:16,marginBottom:32},help:Q("organizations.modal.vectorStoresHelp"),children:(0,a.jsx)(es.default,{onChange:e=>eu.setFieldValue("allowed_vector_store_ids",e),value:eu.getFieldValue("allowed_vector_store_ids"),accessToken:t||"",placeholder:Q("organizations.modal.vectorStoresPlaceholder")})}),(0,a.jsx)(k.Form.Item,{label:(0,a.jsxs)("span",{children:[Q("organizations.modal.mcpServers")," ",(0,a.jsx)(M.Tooltip,{title:Q("organizations.modal.mcpServersTooltip"),children:(0,a.jsx)(n.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"allowed_mcp_servers_and_groups",style:{marginTop:20,marginBottom:32},help:Q("organizations.modal.mcpServersHelp"),children:(0,a.jsx)(U.default,{onChange:e=>eu.setFieldValue("allowed_mcp_servers_and_groups",e),value:eu.getFieldValue("allowed_mcp_servers_and_groups"),accessToken:t||"",placeholder:Q("organizations.modal.mcpServersPlaceholder")})}),(0,a.jsx)(k.Form.Item,{label:Q("organizations.modal.metadata"),name:"metadata",style:{marginTop:16},children:(0,a.jsx)(I.Input.TextArea,{rows:4})}),(0,a.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,a.jsx)(u.Button,{type:"submit",children:Q("organizations.modal.createSubmit")})})]})}),(0,a.jsx)(E.default,{isOpen:ea,title:Q("organizations.delete.title"),message:Q("organizations.delete.message"),resourceInformationTitle:Q("organizations.delete.resourceTitle"),resourceInformation:[{label:Q("organizations.delete.resourceLabel"),value:el,code:!0}],onCancel:()=>{ei(!1),er(null)},onOk:ev,confirmLoading:ed,cancelText:Q("organizations.delete.cancel"),okText:Q("organizations.delete.confirm"),okLoadingText:Q("organizations.delete.deleting")})]})},"fetchOrganizations",0,en],846835)}]);