(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,621482,e=>{"use strict";var a=e.i(869230),i=e.i(992571),l=class extends a.QueryObserver{constructor(e,a){super(e,a)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:(0,i.infiniteQueryBehavior)()})}getOptimisticResult(e){return e.behavior=(0,i.infiniteQueryBehavior)(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,a){let{state:l}=e,t=super.createResult(e,a),{isFetching:r,isRefetching:s,isError:n,isRefetchError:o}=t,d=l.fetchMeta?.fetchMore?.direction,m=n&&"forward"===d,c=r&&"forward"===d,u=n&&"backward"===d,g=r&&"backward"===d;return{...t,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,i.hasNextPage)(a,l.data),hasPreviousPage:(0,i.hasPreviousPage)(a,l.data),isFetchNextPageError:m,isFetchingNextPage:c,isFetchPreviousPageError:u,isFetchingPreviousPage:g,isRefetchError:o&&!m&&!u,isRefetching:s&&!c&&!g}}},t=e.i(469637);function r(e,a){return(0,t.useBaseQuery)(e,l,a)}e.s(["useInfiniteQuery",()=>r],621482)},785242,e=>{"use strict";var a=e.i(619273),i=e.i(266027),l=e.i(912598),t=e.i(135214),r=e.i(270345),s=e.i(243652),n=e.i(764205);let o=(0,s.createQueryKeys)("teams"),d=async(e,a,i,l={})=>{try{let t=(0,n.getProxyBaseUrl)(),r=new URLSearchParams(Object.entries({team_id:l.teamID,organization_id:l.organizationID,team_alias:l.team_alias,user_id:l.userID,page:a,page_size:i,sort_by:l.sortBy,sort_order:l.sortOrder,status:"deleted"}).filter(([,e])=>null!=e).map(([e,a])=>[e,String(a)])),s=`${t?`${t}/v2/team/list`:"/v2/team/list"}?${r}`,o=await fetch(s,{method:"GET",headers:{[(0,n.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"}});if(!o.ok){let e=await o.json(),a=(0,n.deriveErrorMessage)(e);throw(0,n.handleError)(a),Error(a)}let d=await o.json();if(console.log("/team/list?status=deleted API Response:",d),d&&"object"==typeof d&&"teams"in d)return d.teams;return d}catch(e){throw console.error("Failed to list deleted teams:",e),e}},m=(0,s.createQueryKeys)("deletedTeams");e.s(["useDeletedTeams",0,(e,l,r={})=>{let{accessToken:s}=(0,t.default)();return(0,i.useQuery)({queryKey:m.list({page:e,limit:l,...r}),queryFn:async()=>await d(s,e,l,r),enabled:!!s,staleTime:3e4,placeholderData:a.keepPreviousData})},"useTeam",0,e=>{let{accessToken:a}=(0,t.default)(),r=(0,l.useQueryClient)();return(0,i.useQuery)({queryKey:o.detail(e),enabled:!!(a&&e),queryFn:async()=>{if(!a||!e)throw Error("Missing auth or teamId");return(0,n.teamInfoCall)(a,e)},initialData:()=>{if(!e)return;let a=r.getQueryData(o.list({}));return a?.find(a=>a.team_id===e)}})},"useTeams",0,()=>{let{accessToken:e,userId:a,userRole:l}=(0,t.default)();return(0,i.useQuery)({queryKey:o.list({}),queryFn:async()=>await (0,r.fetchTeams)(e,a,l,null),enabled:!!e})}])},738014,e=>{"use strict";var a=e.i(135214),i=e.i(764205),l=e.i(266027);let t=(0,e.i(243652).createQueryKeys)("users");e.s(["useCurrentUser",0,()=>{let{accessToken:e,userId:r,userRole:s}=(0,a.default)();return(0,l.useQuery)({queryKey:t.detail(r),queryFn:async()=>{let a=await (0,i.userInfoCall)(e,r,s,!1,null,null);return console.log(`userInfo: ${JSON.stringify(a)}`),a.user_info},enabled:!!(e&&r&&s)})}])},980187,e=>{"use strict";e.s(["createTeamAliasMap",0,e=>e?e.reduce((e,a)=>(e[a.team_id]=a.team_alias,e),{}):{},"resolveTeamAliasFromTeamID",0,(e,a)=>{let i=a.find(a=>a.team_id===e);return i?i.team_alias:null}])},109799,e=>{"use strict";var a=e.i(135214),i=e.i(764205),l=e.i(266027),t=e.i(912598);let r=(0,e.i(243652).createQueryKeys)("organizations");e.s(["useOrganization",0,e=>{let s=(0,t.useQueryClient)(),{accessToken:n}=(0,a.default)();return(0,l.useQuery)({queryKey:r.detail(e),enabled:!!(n&&e),queryFn:async()=>{if(!n||!e)throw Error("Missing auth or teamId");return(0,i.organizationInfoCall)(n,e)},initialData:()=>{if(!e)return;let a=s.getQueryData(r.list({}));return a?.find(a=>a.organization_id===e)}})},"useOrganizations",0,()=>{let{accessToken:e,userId:t,userRole:s}=(0,a.default)();return(0,l.useQuery)({queryKey:r.list({}),queryFn:async()=>await (0,i.organizationListCall)(e),enabled:!!(e&&t&&s)})}])},625901,e=>{"use strict";var a=e.i(266027),i=e.i(621482),l=e.i(243652),t=e.i(764205),r=e.i(135214);let s=(0,l.createQueryKeys)("models"),n=(0,l.createQueryKeys)("modelHub"),o=(0,l.createQueryKeys)("allProxyModels");(0,l.createQueryKeys)("selectedTeamModels");let d=(0,l.createQueryKeys)("infiniteModels");e.s(["useAllProxyModels",0,()=>{let{accessToken:e,userId:i,userRole:l}=(0,r.default)();return(0,a.useQuery)({queryKey:o.list({}),queryFn:async()=>await (0,t.modelAvailableCall)(e,i,l,!0,null,!0,!1,"expand"),enabled:!!(e&&i&&l)})},"useInfiniteModelInfo",0,(e=50,a)=>{let{accessToken:l,userId:s,userRole:n}=(0,r.default)();return(0,i.useInfiniteQuery)({queryKey:d.list({filters:{...s&&{userId:s},...n&&{userRole:n},size:e,...a&&{search:a}}}),queryFn:async({pageParam:i})=>await (0,t.modelInfoCall)(l,s,n,i,e,a),initialPageParam:1,getNextPageParam:e=>{if(e.current_page<e.total_pages)return e.current_page+1},enabled:!!(l&&s&&n)})},"useModelHub",0,()=>{let{accessToken:e}=(0,r.default)();return(0,a.useQuery)({queryKey:n.list({}),queryFn:async()=>await (0,t.modelHubCall)(e),enabled:!!e})},"useModelsInfo",0,(e=1,i=50,l,n,o,d,m)=>{let{accessToken:c,userId:u,userRole:g}=(0,r.default)();return(0,a.useQuery)({queryKey:s.list({filters:{...u&&{userId:u},...g&&{userRole:g},page:e,size:i,...l&&{search:l},...n&&{modelId:n},...o&&{teamId:o},...d&&{sortBy:d},...m&&{sortOrder:m}}}),queryFn:async()=>await (0,t.modelInfoCall)(c,u,g,e,i,l,n,o,d,m),enabled:!!(c&&u&&g)})}])},907308,e=>{"use strict";var a=e.i(843476),i=e.i(271645),l=e.i(212931),t=e.i(808613),r=e.i(464571),s=e.i(199133),n=e.i(592968),o=e.i(374009),d=e.i(764205);e.s(["default",0,({isVisible:e,onCancel:m,onSubmit:c,accessToken:u,title:g="Add Team Member",roles:h=[{label:"admin",value:"admin",description:"Admin role. Can create team keys, add members, and manage settings."},{label:"user",value:"user",description:"User role. Can view team info, but not manage it."}],defaultRole:x="user"})=>{let[p]=t.Form.useForm(),[b,_]=(0,i.useState)([]),[v,j]=(0,i.useState)(!1),[f,y]=(0,i.useState)("user_email"),z=async(e,a)=>{if(!e)return void _([]);j(!0);try{let i=new URLSearchParams;if(i.append(a,e),null==u)return;let l=(await (0,d.userFilterUICall)(u,i)).map(e=>({label:"user_email"===a?`${e.user_email}`:`${e.user_id}`,value:"user_email"===a?e.user_email:e.user_id,user:e}));_(l)}catch(e){console.error("Error fetching users:",e)}finally{j(!1)}},w=(0,i.useCallback)((0,o.default)((e,a)=>z(e,a),300),[]),T=(e,a)=>{y(a),w(e,a)},D=(e,a)=>{let i=a.user;p.setFieldsValue({user_email:i.user_email,user_id:i.user_id,role:p.getFieldValue("role")})};return(0,a.jsx)(l.Modal,{title:g,open:e,onCancel:()=>{p.resetFields(),_([]),m()},footer:null,width:800,children:(0,a.jsxs)(t.Form,{form:p,onFinish:c,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",initialValues:{role:x},children:[(0,a.jsx)(t.Form.Item,{label:"Email",name:"user_email",className:"mb-4",children:(0,a.jsx)(s.Select,{showSearch:!0,className:"w-full",placeholder:"Search by email",filterOption:!1,onSearch:e=>T(e,"user_email"),onSelect:(e,a)=>D(e,a),options:"user_email"===f?b:[],loading:v,allowClear:!0})}),(0,a.jsx)("div",{className:"text-center mb-4",children:"OR"}),(0,a.jsx)(t.Form.Item,{label:"User ID",name:"user_id",className:"mb-4",children:(0,a.jsx)(s.Select,{showSearch:!0,className:"w-full",placeholder:"Search by user ID",filterOption:!1,onSearch:e=>T(e,"user_id"),onSelect:(e,a)=>D(e,a),options:"user_id"===f?b:[],loading:v,allowClear:!0})}),(0,a.jsx)(t.Form.Item,{label:"Member Role",name:"role",className:"mb-4",children:(0,a.jsx)(s.Select,{defaultValue:x,children:h.map(e=>(0,a.jsx)(s.Select.Option,{value:e.value,children:(0,a.jsxs)(n.Tooltip,{title:e.description,children:[(0,a.jsx)("span",{className:"font-medium",children:e.label}),(0,a.jsxs)("span",{className:"ml-2 text-gray-500 text-sm",children:["- ",e.description]})]})},e.value))})}),(0,a.jsx)("div",{className:"text-right mt-4",children:(0,a.jsx)(r.Button,{type:"default",htmlType:"submit",children:"Add Member"})})]})})}])},162386,e=>{"use strict";var a=e.i(843476),i=e.i(625901),l=e.i(109799),t=e.i(785242),r=e.i(738014),s=e.i(199133),n=e.i(981339),o=e.i(592968);let d={label:"全部模型",value:"all-proxy-models"},m={label:"无默认模型",value:"no-default-models"},c=[d,m],u={user:({allProxyModels:e,userModels:a,options:i})=>a&&i?.includeUserModels?a:[],team:({allProxyModels:e,selectedOrganization:a,userModels:i})=>a?a.models.includes(d.value)||0===a.models.length?e:e.filter(e=>a.models.includes(e)):e??[],organization:({allProxyModels:e})=>e,global:({allProxyModels:e})=>e};e.s(["ModelSelect",0,e=>{let{teamID:g,organizationID:h,options:x,context:p,dataTestId:b,value:_=[],onChange:v,style:j,placeholder:f}=e,{includeUserModels:y,showAllTeamModelsOption:z,showAllProxyModelsOverride:w,includeSpecialOptions:T}=x||{},{data:D,isLoading:C}=(0,i.useAllProxyModels)(),{data:N,isLoading:S}=(0,t.useTeam)(g),{data:F,isLoading:I}=(0,l.useOrganization)(h),{data:P,isLoading:M}=(0,r.useCurrentUser)(),O=e=>c.some(a=>a.value===e),k=_.some(O),B=F?.models.includes(d.value)||F?.models.length===0;if(C||S||I||M)return(0,a.jsx)(n.Skeleton.Input,{active:!0,block:!0});let{wildcard:L,regular:A}=(e=>{let a=[],i=[];for(let l of e)l.endsWith("/*")?a.push(l):i.push(l);return{wildcard:a,regular:i}})(((e,a,i)=>{let l=Array.from(new Map(e.map(e=>[e.id,e])).values()).map(e=>e.id);if(a.options?.showAllProxyModelsOverride)return l;let t=u[a.context];return t?t({allProxyModels:l,...i,options:a.options}):[]})(D?.data??[],e,{selectedTeam:N,selectedOrganization:F,userModels:P?.models}));return(0,a.jsx)(s.Select,{"data-testid":b,value:_,onChange:e=>{let a=e.filter(O);v(a.length>0?[a[a.length-1]]:e)},style:j,options:[T?{label:(0,a.jsx)("span",{children:"Special Options"}),title:"Special Options",options:[...w||B&&T||"global"===p?[{label:(0,a.jsx)("span",{children:"全部模型"}),value:d.value,disabled:_.length>0&&_.some(e=>O(e)&&e!==d.value),key:d.value}]:[],{label:(0,a.jsx)("span",{children:"无默认模型"}),value:m.value,disabled:_.length>0&&_.some(e=>O(e)&&e!==m.value),key:m.value}]}:[],...L.length>0?[{label:(0,a.jsx)("span",{children:"Wildcard Options"}),title:"Wildcard Options",options:L.map(e=>{let i=e.replace("/*",""),l=i.charAt(0).toUpperCase()+i.slice(1);return{label:(0,a.jsx)("span",{children:`All ${l} models`}),value:e,disabled:k}})}]:[],{label:(0,a.jsx)("span",{children:"Models"}),title:"Models",options:A.map(e=>({label:(0,a.jsx)("span",{children:e}),value:e,disabled:k}))}],mode:"multiple",placeholder:f??"Select Models",allowClear:!0,maxTagCount:"responsive",maxTagPlaceholder:e=>(0,a.jsx)(o.Tooltip,{styles:{root:{pointerEvents:"none"}},title:e.map(({value:e})=>e).join(", "),children:(0,a.jsxs)("span",{children:["+",e.length," more"]})})})}],162386)},276173,e=>{"use strict";var a=e.i(843476),i=e.i(599724),l=e.i(779241),t=e.i(464571),r=e.i(808613),s=e.i(212931),n=e.i(199133),o=e.i(271645),d=e.i(435451),m=e.i(111110);e.s(["default",0,({visible:e,onCancel:c,onSubmit:u,initialData:g,mode:h,config:x})=>{let p,{t:b}=(0,m.useLanguage)(),[_]=r.Form.useForm(),[v,j]=(0,o.useState)(!1);console.log("Initial Data:",g),(0,o.useEffect)(()=>{if(e)if("edit"===h&&g){let e={...g,role:g.role||x.defaultRole,max_budget_in_team:g.max_budget_in_team||null,tpm_limit:g.tpm_limit||null,rpm_limit:g.rpm_limit||null};console.log("Setting form values:",e),_.setFieldsValue(e)}else _.resetFields(),_.setFieldsValue({role:x.defaultRole||x.roleOptions[0]?.value})},[e,g,h,_,x.defaultRole,x.roleOptions]);let f=async e=>{try{j(!0);let a=Object.entries(e).reduce((e,[a,i])=>{if("string"==typeof i){let l=i.trim();return""===l&&("max_budget_in_team"===a||"tpm_limit"===a||"rpm_limit"===a)?{...e,[a]:null}:{...e,[a]:l}}return{...e,[a]:i}},{});console.log("Submitting form data:",a),await Promise.resolve(u(a)),_.resetFields()}catch(e){console.error("Form submission error:",e)}finally{j(!1)}};return(0,a.jsx)(s.Modal,{title:x.title||b("add"===h?"teamDetail.memberPermissions.modal.addMember":"teamDetail.memberPermissions.modal.editMember"),open:e,width:1e3,footer:null,onCancel:c,children:(0,a.jsxs)(r.Form,{form:_,onFinish:f,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[x.showEmail&&(0,a.jsx)(r.Form.Item,{label:b("teamDetail.memberPermissions.modal.userEmail"),name:"user_email",className:"mb-4",rules:[{type:"email",message:b("teamDetail.memberPermissions.modal.validEmail")}],children:(0,a.jsx)(l.TextInput,{placeholder:"user@example.com"})}),x.showEmail&&x.showUserId&&(0,a.jsx)("div",{className:"text-center mb-4",children:(0,a.jsx)(i.Text,{children:b("teamDetail.memberPermissions.modal.or")})}),x.showUserId&&(0,a.jsx)(r.Form.Item,{label:b("teamDetail.memberPermissions.modal.userId"),name:"user_id",className:"mb-4",children:(0,a.jsx)(l.TextInput,{placeholder:"user_123"})}),(0,a.jsx)(r.Form.Item,{label:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:b("teamDetail.memberPermissions.modal.role")}),"edit"===h&&g&&(0,a.jsxs)("span",{className:"text-gray-500 text-sm",children:["(",b("teamDetail.memberPermissions.modal.current"),(p=g.role,x.roleOptions.find(e=>e.value===p)?.label||p),")"]})]}),name:"role",className:"mb-4",rules:[{required:!0,message:b("teamDetail.memberPermissions.modal.roleRequired")}],children:(0,a.jsx)(n.Select,{children:"edit"===h&&g?[...x.roleOptions.filter(e=>e.value===g.role),...x.roleOptions.filter(e=>e.value!==g.role)].map(e=>(0,a.jsx)(n.Select.Option,{value:e.value,children:e.label},e.value)):x.roleOptions.map(e=>(0,a.jsx)(n.Select.Option,{value:e.value,children:e.label},e.value))})}),x.additionalFields?.map(e=>(0,a.jsx)(r.Form.Item,{label:e.label,name:e.name,className:"mb-4",rules:e.rules,children:(e=>{switch(e.type){case"input":return(0,a.jsx)(l.TextInput,{placeholder:e.placeholder});case"numerical":return(0,a.jsx)(d.default,{step:e.step||1,min:e.min||0,style:{width:"100%"},placeholder:e.placeholder||"Enter a numerical value"});case"select":return(0,a.jsx)(n.Select,{children:e.options?.map(e=>(0,a.jsx)(n.Select.Option,{value:e.value,children:e.label},e.value))});default:return null}})(e)},e.name)),(0,a.jsxs)("div",{className:"text-right mt-6",children:[(0,a.jsx)(t.Button,{onClick:c,className:"mr-2",disabled:v,children:b("teamDetail.memberPermissions.modal.cancel")}),(0,a.jsx)(t.Button,{type:"default",htmlType:"submit",loading:v,children:b("add"===h?v?"teamDetail.memberPermissions.modal.adding":"teamDetail.memberPermissions.modal.addMember":v?"teamDetail.memberPermissions.modal.saving":"teamDetail.memberPermissions.saveChanges")})]})]})})}])},294612,e=>{"use strict";var a=e.i(843476);e.i(247167);var i=e.i(931067),l=e.i(271645);let t={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M899.6 276.5L705 396.4 518.4 147.5a8.06 8.06 0 00-12.9 0L319 396.4 124.3 276.5c-5.7-3.5-13.1 1.2-12.2 7.9L188.5 865c1.1 7.9 7.9 14 16 14h615.1c8 0 14.9-6 15.9-14l76.4-580.6c.8-6.7-6.5-11.4-12.3-7.9zm-126 534.1H250.3l-53.8-409.4 139.8 86.1L512 252.9l175.7 234.4 139.8-86.1-53.9 409.4zM512 509c-62.1 0-112.6 50.5-112.6 112.6S449.9 734.2 512 734.2s112.6-50.5 112.6-112.6S574.1 509 512 509zm0 160.9c-26.6 0-48.2-21.6-48.2-48.3 0-26.6 21.6-48.3 48.2-48.3s48.2 21.6 48.2 48.3c0 26.6-21.6 48.3-48.2 48.3z"}}]},name:"crown",theme:"outlined"};var r=e.i(9583),s=l.forwardRef(function(e,a){return l.createElement(r.default,(0,i.default)({},e,{ref:a,icon:t}))}),n=e.i(827252),o=e.i(213205),d=e.i(771674),m=e.i(464571),c=e.i(770914),u=e.i(291542),g=e.i(262218),h=e.i(592968),x=e.i(898586),p=e.i(902555),b=e.i(111110);let{Text:_}=x.Typography;function v({members:e,canEdit:i,onEdit:l,onDelete:t,onAddMember:r,roleColumnTitle:x="Role",roleTooltip:v,extraColumns:j=[],showDeleteForMember:f,emptyText:y}){let{t:z}=(0,b.useLanguage)(),w=[{title:z("teamDetail.memberPermissions.modal.userEmail"),dataIndex:"user_email",key:"user_email",render:e=>(0,a.jsx)(_,{children:e||"-"})},{title:z("teamDetail.memberPermissions.modal.userId"),dataIndex:"user_id",key:"user_id",render:e=>"default_user_id"===e?(0,a.jsx)(g.Tag,{color:"blue",children:z("memberTable.defaultProxyAdmin")}):(0,a.jsx)(_,{children:e||"-"})},{title:v?(0,a.jsxs)(c.Space,{direction:"horizontal",children:[x,(0,a.jsx)(h.Tooltip,{title:v,children:(0,a.jsx)(n.InfoCircleOutlined,{})})]}):x,dataIndex:"role",key:"role",render:e=>(0,a.jsxs)(c.Space,{children:[e?.toLowerCase()==="admin"||e?.toLowerCase()==="org_admin"?(0,a.jsx)(s,{}):(0,a.jsx)(d.UserOutlined,{}),(0,a.jsx)(_,{style:{textTransform:"capitalize"},children:e||"-"})]})},...j,{title:z("memberTable.actions"),key:"actions",fixed:"right",width:120,render:(e,r)=>i?(0,a.jsxs)(c.Space,{children:[(0,a.jsx)(p.default,{variant:"Edit",tooltipText:z("memberTable.editMember"),dataTestId:"edit-member",onClick:()=>l(r)}),(!f||f(r))&&(0,a.jsx)(p.default,{variant:"Delete",tooltipText:z("memberTable.deleteMember"),dataTestId:"delete-member",onClick:()=>t(r)})]}):null}];return(0,a.jsxs)(c.Space,{direction:"vertical",style:{width:"100%"},children:[(0,a.jsx)(u.Table,{columns:w,dataSource:e,rowKey:e=>e.user_id??e.user_email??JSON.stringify(e),pagination:!1,size:"small",scroll:{x:"max-content"},locale:y?{emptyText:y}:void 0}),r&&i&&(0,a.jsx)(m.Button,{icon:(0,a.jsx)(o.UserAddOutlined,{}),type:"primary",onClick:r,children:z("memberTable.addMember")})]})}e.s(["default",()=>v],294612)},846835,e=>{"use strict";var a=e.i(843476),i=e.i(655913),l=e.i(38419),t=e.i(78334),r=e.i(555436),s=e.i(284614);let n=({filters:e,showFilters:n,onToggleFilters:o,onChange:d,onReset:m})=>{let c=!!(e.org_id||e.org_alias);return(0,a.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,a.jsx)(i.FilterInput,{placeholder:"按组织名称搜索",value:e.org_alias,onChange:e=>d("org_alias",e),icon:r.Search,className:"w-64"}),(0,a.jsx)(l.FiltersButton,{onClick:()=>o(!n),active:n,hasActiveFilters:c,label:"筛选"}),(0,a.jsx)(t.ResetFiltersButton,{onClick:m,label:"重置筛选"})]}),n&&(0,a.jsx)("div",{className:"flex flex-wrap items-center gap-3 mt-3",children:(0,a.jsx)(i.FilterInput,{placeholder:"按组织 ID 搜索",value:e.org_id,onChange:e=>d("org_id",e),icon:s.User,className:"w-64"})})]})};var o=e.i(827252),d=e.i(871943),m=e.i(502547),c=e.i(278587),u=e.i(389083),g=e.i(994388),h=e.i(304967),x=e.i(309426),p=e.i(350967),b=e.i(752978),_=e.i(197647),v=e.i(653824),j=e.i(269200),f=e.i(942232),y=e.i(977572),z=e.i(427612),w=e.i(64848),T=e.i(496020),D=e.i(881073),C=e.i(404206),N=e.i(723731),S=e.i(599724),F=e.i(779241),I=e.i(808613),P=e.i(311451),M=e.i(212931),O=e.i(199133),k=e.i(592968),B=e.i(271645),L=e.i(111110),A=e.i(500330),E=e.i(127952),R=e.i(902555),q=e.i(355619),Q=e.i(75921),U=e.i(162386),V=e.i(727749),K=e.i(764205),H=e.i(785242),$=e.i(980187),G=e.i(530212),W=e.i(629569),J=e.i(464571),X=e.i(653496),Y=e.i(898586),Z=e.i(678784),ee=e.i(118366),ea=e.i(294612),ei=e.i(907308),el=e.i(384767),et=e.i(435451),er=e.i(276173),es=e.i(916940);let en=({organizationId:e,onClose:i,accessToken:l,is_org_admin:t,is_proxy_admin:r,userModels:s,editOrg:n})=>{let[o,d]=(0,B.useState)(null),[m,c]=(0,B.useState)(!0),[x]=I.Form.useForm(),[b,_]=(0,B.useState)(!1),[v,j]=(0,B.useState)(!1),[f,y]=(0,B.useState)(!1),[z,w]=(0,B.useState)(null),[T,D]=(0,B.useState)({}),[C,N]=(0,B.useState)(!1),M=t||r,{data:k}=(0,H.useTeams)(),{t:E}=(0,L.useLanguage)(),R=(0,B.useMemo)(()=>(0,$.createTeamAliasMap)(k),[k]),q=async()=>{try{if(c(!0),!l)return;let a=await (0,K.organizationInfoCall)(l,e);d(a)}catch(e){V.default.fromBackend(E("organizationDetail.errors.loadFailed")),console.error("Error fetching organization info:",e)}finally{c(!1)}};(0,B.useEffect)(()=>{q()},[e,l]);let en=async a=>{try{if(null==l)return;let i={user_email:a.user_email,user_id:a.user_id,role:a.role};await (0,K.organizationMemberAddCall)(l,e,i),V.default.success(E("organizationDetail.notifications.memberAdded")),j(!1),x.resetFields(),q()}catch(e){V.default.fromBackend(E("organizationDetail.errors.memberAddFailed")),console.error("Error adding organization member:",e)}},eo=async a=>{try{if(!l)return;let i={user_email:a.user_email,user_id:a.user_id,role:a.role};await (0,K.organizationMemberUpdateCall)(l,e,i),V.default.success(E("organizationDetail.notifications.memberUpdated")),y(!1),x.resetFields(),q()}catch(e){V.default.fromBackend(E("organizationDetail.errors.memberUpdateFailed")),console.error("Error updating organization member:",e)}},ed=async a=>{try{if(!l)return;await (0,K.organizationMemberDeleteCall)(l,e,a.user_id),V.default.success(E("organizationDetail.notifications.memberDeleted")),y(!1),x.resetFields(),q()}catch(e){V.default.fromBackend(E("organizationDetail.errors.memberDeleteFailed")),console.error("Error deleting organization member:",e)}},em=async a=>{try{if(!l)return;N(!0);let i={organization_id:e,organization_alias:a.organization_alias,models:a.models,litellm_budget_table:{tpm_limit:a.tpm_limit,rpm_limit:a.rpm_limit,max_budget:a.max_budget,budget_duration:a.budget_duration},metadata:a.metadata?JSON.parse(a.metadata):null};if((void 0!==a.vector_stores||void 0!==a.mcp_servers_and_groups)&&(i.object_permission={...o?.object_permission,vector_stores:a.vector_stores||[]},void 0!==a.mcp_servers_and_groups)){let{servers:e,accessGroups:l}=a.mcp_servers_and_groups||{servers:[],accessGroups:[]};e&&e.length>0&&(i.object_permission.mcp_servers=e),l&&l.length>0&&(i.object_permission.mcp_access_groups=l)}await (0,K.organizationUpdateCall)(l,i),V.default.success(E("organizationDetail.notifications.settingsUpdated")),_(!1),q()}catch(e){V.default.fromBackend(E("organizationDetail.errors.settingsUpdateFailed")),console.error("Error updating organization:",e)}finally{N(!1)}};if(m)return(0,a.jsx)("div",{className:"p-4",children:E("organizationDetail.loading")});if(!o)return(0,a.jsx)("div",{className:"p-4",children:E("organizationDetail.notFound")});let ec=async(e,a)=>{await (0,A.copyToClipboard)(e)&&(D(e=>({...e,[a]:!0})),setTimeout(()=>{D(e=>({...e,[a]:!1}))},2e3))},eu=[{title:E("organizationDetail.columns.spend"),key:"spend",render:(e,i)=>{let l=null!=i.user_id?(o.members||[]).find(e=>e.user_id===i.user_id):void 0;return(0,a.jsx)(Y.Typography.Text,{children:(0,A.formatNumberWithCommas)(l?.spend??0,4)})}},{title:E("organizationDetail.columns.createdAt"),key:"created_at",render:(e,i)=>{let l=null!=i.user_id?(o.members||[]).find(e=>e.user_id===i.user_id):void 0;return(0,a.jsx)(Y.Typography.Text,{children:l?.created_at?new Date(l.created_at).toLocaleString():"-"})}}];return(0,a.jsxs)("div",{className:"w-full h-screen p-4 bg-white",children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(g.Button,{icon:G.ArrowLeftIcon,onClick:i,variant:"light",className:"mb-4",children:E("organizationDetail.backButton")}),(0,a.jsx)(W.Title,{children:o.organization_alias}),(0,a.jsxs)("div",{className:"flex items-center cursor-pointer",children:[(0,a.jsx)(S.Text,{className:"text-gray-500 font-mono",children:o.organization_id}),(0,a.jsx)(J.Button,{type:"text",size:"small",icon:T["org-id"]?(0,a.jsx)(Z.CheckIcon,{size:12}):(0,a.jsx)(ee.CopyIcon,{size:12}),onClick:()=>ec(o.organization_id,"org-id"),className:`left-2 z-10 transition-all duration-200 ${T["org-id"]?"text-green-600 bg-green-50 border-green-200":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`})]})]})}),(0,a.jsx)(X.Tabs,{defaultActiveKey:n?"settings":"overview",className:"mb-4",items:[{key:"overview",label:E("organizationDetail.tabs.overview"),children:(0,a.jsxs)(p.Grid,{numItems:1,numItemsSm:2,numItemsLg:3,className:"gap-6",children:[(0,a.jsxs)(h.Card,{children:[(0,a.jsx)(S.Text,{children:E("organizationDetail.overview.orgDetails")}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)(S.Text,{children:[E("organizationDetail.overview.created"),": ",new Date(o.created_at).toLocaleDateString()]}),(0,a.jsxs)(S.Text,{children:[E("organizationDetail.overview.updated"),": ",new Date(o.updated_at).toLocaleDateString()]}),(0,a.jsxs)(S.Text,{children:[E("organizationDetail.overview.createdBy"),": ",o.created_by]})]})]}),(0,a.jsxs)(h.Card,{children:[(0,a.jsx)(S.Text,{children:E("organizationDetail.overview.budgetStatus")}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)(W.Title,{children:(0,A.formatNumberWithCommas)(o.spend,4)}),(0,a.jsxs)(S.Text,{children:[E("organizationDetail.overview.of")," ",null===o.litellm_budget_table.max_budget?E("organizationDetail.overview.unlimited"):(0,A.formatNumberWithCommas)(o.litellm_budget_table.max_budget,4)]}),o.litellm_budget_table.budget_duration&&(0,a.jsxs)(S.Text,{className:"text-gray-500",children:[E("organizationDetail.overview.reset"),": ",o.litellm_budget_table.budget_duration]})]})]}),(0,a.jsxs)(h.Card,{children:[(0,a.jsx)(S.Text,{children:E("organizationDetail.overview.rateLimits")}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)(S.Text,{children:[E("organizationDetail.overview.tpm"),": ",o.litellm_budget_table.tpm_limit||E("organizationDetail.overview.unlimited")]}),(0,a.jsxs)(S.Text,{children:[E("organizationDetail.overview.rpm"),": ",o.litellm_budget_table.rpm_limit||E("organizationDetail.overview.unlimited")]}),o.litellm_budget_table.max_parallel_requests&&(0,a.jsxs)(S.Text,{children:[E("organizationDetail.overview.maxParallelRequests"),": ",o.litellm_budget_table.max_parallel_requests]})]})]}),(0,a.jsxs)(h.Card,{children:[(0,a.jsx)(S.Text,{children:E("organizationDetail.overview.models")}),(0,a.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:0===o.models.length?(0,a.jsx)(u.Badge,{color:"red",children:E("organizationDetail.overview.allProxyModels")}):o.models.map((e,i)=>(0,a.jsx)(u.Badge,{color:"red",children:e},i))})]}),(0,a.jsxs)(h.Card,{children:[(0,a.jsx)(S.Text,{children:E("organizationDetail.overview.teams")}),(0,a.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:o.teams?.map((e,i)=>(0,a.jsx)(u.Badge,{color:"red",children:R[e.team_id]||e.team_id},i))})]}),(0,a.jsx)(el.default,{objectPermission:o.object_permission,variant:"card",accessToken:l})]})},{key:"members",label:E("organizationDetail.tabs.members"),children:(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsx)(ea.default,{members:(o.members||[]).map(e=>({role:e.user_role||"",user_id:e.user_id,user_email:e.user_email})),canEdit:M,onEdit:e=>{w(e),y(!0)},onDelete:e=>ed(e),onAddMember:()=>j(!0),roleColumnTitle:E("organizationDetail.members.roleColumn"),extraColumns:eu,emptyText:E("organizationDetail.members.noMembers")})})},{key:"settings",label:E("organizationDetail.tabs.settings"),children:(0,a.jsxs)(h.Card,{className:"overflow-y-auto max-h-[65vh]",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)(W.Title,{children:E("organizationDetail.settings.title")}),M&&!b&&(0,a.jsx)(g.Button,{onClick:()=>_(!0),children:E("organizationDetail.settings.editButton")})]}),b?(0,a.jsxs)(I.Form,{form:x,onFinish:em,initialValues:{organization_alias:o.organization_alias,models:o.models,tpm_limit:o.litellm_budget_table.tpm_limit,rpm_limit:o.litellm_budget_table.rpm_limit,max_budget:o.litellm_budget_table.max_budget,budget_duration:o.litellm_budget_table.budget_duration,metadata:o.metadata?JSON.stringify(o.metadata,null,2):"",vector_stores:o.object_permission?.vector_stores||[],mcp_servers_and_groups:{servers:o.object_permission?.mcp_servers||[],accessGroups:o.object_permission?.mcp_access_groups||[]}},layout:"vertical",children:[(0,a.jsx)(I.Form.Item,{label:E("organizationDetail.settings.orgName"),name:"organization_alias",rules:[{required:!0,message:E("organizationDetail.settings.orgNameRequired")}],children:(0,a.jsx)(F.TextInput,{})}),(0,a.jsx)(I.Form.Item,{label:E("organizationDetail.settings.models"),name:"models",children:(0,a.jsx)(U.ModelSelect,{value:x.getFieldValue("models"),onChange:e=>x.setFieldValue("models",e),context:"organization",options:{includeSpecialOptions:!0,showAllProxyModelsOverride:!0}})}),(0,a.jsx)(I.Form.Item,{label:E("organizationDetail.settings.maxBudget"),name:"max_budget",children:(0,a.jsx)(et.default,{step:.01,precision:2,style:{width:"100%"}})}),(0,a.jsx)(I.Form.Item,{label:E("organizationDetail.settings.resetBudget"),name:"budget_duration",children:(0,a.jsxs)(O.Select,{placeholder:E("organizationDetail.settings.resetBudgetPlaceholder"),children:[(0,a.jsx)(O.Select.Option,{value:"24h",children:E("organizationDetail.settings.daily")}),(0,a.jsx)(O.Select.Option,{value:"7d",children:E("organizationDetail.settings.weekly")}),(0,a.jsx)(O.Select.Option,{value:"30d",children:E("organizationDetail.settings.monthly")})]})}),(0,a.jsx)(I.Form.Item,{label:E("organizationDetail.settings.tpmLimit"),name:"tpm_limit",children:(0,a.jsx)(et.default,{step:1,style:{width:"100%"}})}),(0,a.jsx)(I.Form.Item,{label:E("organizationDetail.settings.rpmLimit"),name:"rpm_limit",children:(0,a.jsx)(et.default,{step:1,style:{width:"100%"}})}),(0,a.jsx)(I.Form.Item,{label:E("organizationDetail.settings.vectorStores"),name:"vector_stores",children:(0,a.jsx)(es.default,{onChange:e=>x.setFieldValue("vector_stores",e),value:x.getFieldValue("vector_stores"),accessToken:l||"",placeholder:E("organizationDetail.settings.vectorStoresPlaceholder")})}),(0,a.jsx)(I.Form.Item,{label:E("organizationDetail.settings.mcpServers"),name:"mcp_servers_and_groups",children:(0,a.jsx)(Q.default,{onChange:e=>x.setFieldValue("mcp_servers_and_groups",e),value:x.getFieldValue("mcp_servers_and_groups"),accessToken:l||"",placeholder:E("organizationDetail.settings.mcpServersPlaceholder")})}),(0,a.jsx)(I.Form.Item,{label:E("organizationDetail.settings.metadata"),name:"metadata",children:(0,a.jsx)(P.Input.TextArea,{rows:4})}),(0,a.jsx)("div",{className:"sticky z-10 bg-white p-4 border-t border-gray-200 bottom-[-1.5rem] inset-x-[-1.5rem]",children:(0,a.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,a.jsx)(g.Button,{variant:"secondary",onClick:()=>_(!1),disabled:C,children:E("organizationDetail.settings.cancel")}),(0,a.jsx)(g.Button,{type:"submit",loading:C,children:E("organizationDetail.settings.saveChanges")})]})})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(S.Text,{className:"font-medium",children:E("organizationDetail.settings.orgName")}),(0,a.jsx)("div",{children:o.organization_alias})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(S.Text,{className:"font-medium",children:E("organizationDetail.settings.orgId")}),(0,a.jsx)("div",{className:"font-mono",children:o.organization_id})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(S.Text,{className:"font-medium",children:E("organizationDetail.settings.createdAt")}),(0,a.jsx)("div",{children:new Date(o.created_at).toLocaleString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(S.Text,{className:"font-medium",children:E("organizationDetail.settings.models")}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:o.models.map((e,i)=>(0,a.jsx)(u.Badge,{color:"red",children:e},i))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(S.Text,{className:"font-medium",children:E("organizationDetail.settings.rateLimits")}),(0,a.jsxs)("div",{children:[E("organizationDetail.overview.tpm"),": ",o.litellm_budget_table.tpm_limit||E("organizationDetail.overview.unlimited")]}),(0,a.jsxs)("div",{children:[E("organizationDetail.overview.rpm"),": ",o.litellm_budget_table.rpm_limit||E("organizationDetail.overview.unlimited")]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(S.Text,{className:"font-medium",children:E("organizationDetail.settings.budget")}),(0,a.jsxs)("div",{children:[E("organizationDetail.settings.max"),":"," ",null!==o.litellm_budget_table.max_budget?(0,A.formatNumberWithCommas)(o.litellm_budget_table.max_budget,4):E("organizationDetail.settings.noLimit")]}),(0,a.jsxs)("div",{children:[E("organizationDetail.settings.reset"),": ",o.litellm_budget_table.budget_duration||E("organizationDetail.settings.never")]})]}),(0,a.jsx)(el.default,{objectPermission:o.object_permission,variant:"inline",className:"pt-4 border-t border-gray-200",accessToken:l})]})]})}]}),(0,a.jsx)(ei.default,{isVisible:v,onCancel:()=>j(!1),onSubmit:en,accessToken:l,title:E("organizationDetail.members.addMemberTitle"),roles:[{label:"org_admin",value:"org_admin",description:E("organizationDetail.members.roles.orgAdmin.description")},{label:"internal_user",value:"internal_user",description:E("organizationDetail.members.roles.internalUser.description")},{label:"internal_user_viewer",value:"internal_user_viewer",description:E("organizationDetail.members.roles.internalUserViewer.description")}],defaultRole:"internal_user"}),(0,a.jsx)(er.default,{visible:f,onCancel:()=>y(!1),onSubmit:eo,initialData:z,mode:"edit",config:{title:E("organizationDetail.members.editMemberTitle"),showEmail:!0,showUserId:!0,roleOptions:[{label:E("organizationDetail.members.roles.orgAdmin.label"),value:"org_admin"},{label:E("organizationDetail.members.roles.internalUser.label"),value:"internal_user"},{label:E("organizationDetail.members.roles.internalUserViewer.label"),value:"internal_user_viewer"}]}})]})},eo=async(e,a,i=null,l=null)=>{a(await (0,K.organizationListCall)(e,i,l))};e.s(["default",0,({organizations:e,userRole:i,userModels:l,accessToken:t,lastRefreshed:r,handleRefreshClick:s,currentOrg:H,guardrailsList:$=[],setOrganizations:G,premiumUser:W})=>{let{t:J}=(0,L.useLanguage)(),[X,Y]=(0,B.useState)(null),[Z,ee]=(0,B.useState)(!1),[ea,ei]=(0,B.useState)(!1),[el,er]=(0,B.useState)(null),[ed,em]=(0,B.useState)(!1),[ec,eu]=(0,B.useState)(!1),[eg]=I.Form.useForm(),[eh,ex]=(0,B.useState)({}),[ep,eb]=(0,B.useState)(!1),[e_,ev]=(0,B.useState)({org_id:"",org_alias:"",sort_by:"created_at",sort_order:"desc"}),ej=async()=>{if(el&&t)try{em(!0),await (0,K.organizationDeleteCall)(t,el),V.default.success(J("organizations.notifications.deleteSuccess")),ei(!1),er(null),await eo(t,G,e_.org_id||null,e_.org_alias||null)}catch(e){console.error("Error deleting organization:",e)}finally{em(!1)}},ef=async e=>{try{if(!t)return;console.log(`values in organizations new create call: ${JSON.stringify(e)}`),(e.allowed_vector_store_ids&&e.allowed_vector_store_ids.length>0||e.allowed_mcp_servers_and_groups&&(e.allowed_mcp_servers_and_groups.servers?.length>0||e.allowed_mcp_servers_and_groups.accessGroups?.length>0))&&(e.object_permission={},e.allowed_vector_store_ids&&e.allowed_vector_store_ids.length>0&&(e.object_permission.vector_stores=e.allowed_vector_store_ids,delete e.allowed_vector_store_ids),e.allowed_mcp_servers_and_groups&&(e.allowed_mcp_servers_and_groups.servers?.length>0&&(e.object_permission.mcp_servers=e.allowed_mcp_servers_and_groups.servers),e.allowed_mcp_servers_and_groups.accessGroups?.length>0&&(e.object_permission.mcp_access_groups=e.allowed_mcp_servers_and_groups.accessGroups),delete e.allowed_mcp_servers_and_groups)),await (0,K.organizationCreateCall)(t,e),V.default.success(J("organizations.notifications.createSuccess")),eu(!1),eg.resetFields(),eo(t,G,e_.org_id||null,e_.org_alias||null)}catch(e){console.error("Error creating organization:",e)}};return(0,a.jsxs)("div",{className:"w-full mx-4 h-[75vh]",children:[(0,a.jsx)(p.Grid,{numItems:1,className:"gap-2 p-8 w-full mt-2",children:(0,a.jsxs)(x.Col,{numColSpan:1,className:"flex flex-col gap-2",children:[(0,a.jsxs)(g.Button,{className:"w-fit",onClick:()=>eu(!0),children:["+ ",J("organizations.createButton")]}),X?(0,a.jsx)(en,{organizationId:X,onClose:()=>{Y(null),ee(!1)},accessToken:t,is_org_admin:!0,is_proxy_admin:"Admin"===i,userModels:l,editOrg:Z}):(0,a.jsxs)(v.TabGroup,{className:"gap-2 h-[75vh] w-full",children:[(0,a.jsxs)(D.TabList,{className:"flex justify-between mt-2 w-full items-center",children:[(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)(_.Tab,{children:J("organizations.myOrganizations")})}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[r&&(0,a.jsxs)(S.Text,{children:[J("organizations.lastRefreshed"),r]}),(0,a.jsx)(b.Icon,{icon:c.RefreshIcon,variant:"shadow",size:"xs",className:"self-center",onClick:s})]})]}),(0,a.jsx)(N.TabPanels,{children:(0,a.jsxs)(C.TabPanel,{children:[(0,a.jsx)(S.Text,{children:J("organizations.clickToView")}),(0,a.jsx)(p.Grid,{numItems:1,className:"gap-2 pt-2 pb-2 h-[75vh] w-full mt-2",children:(0,a.jsx)(x.Col,{numColSpan:1,children:(0,a.jsxs)(h.Card,{className:"w-full mx-auto flex-auto overflow-hidden overflow-y-auto max-h-[50vh]",children:[(0,a.jsx)("div",{className:"border-b px-6 py-4",children:(0,a.jsx)("div",{className:"flex flex-col space-y-4",children:(0,a.jsx)(n,{filters:e_,showFilters:ep,onToggleFilters:eb,onChange:(e,a)=>{let i={...e_,[e]:a};ev(i),t&&(0,K.organizationListCall)(t,i.org_id||null,i.org_alias||null).then(e=>{e&&G(e)}).catch(e=>{console.error("Error fetching organizations:",e)})},onReset:()=>{ev({org_id:"",org_alias:"",sort_by:"created_at",sort_order:"desc"}),t&&(0,K.organizationListCall)(t,null,null).then(e=>{e&&G(e)}).catch(e=>{console.error("Error fetching organizations:",e)})}})})}),(0,a.jsxs)(j.Table,{children:[(0,a.jsx)(z.TableHead,{children:(0,a.jsxs)(T.TableRow,{children:[(0,a.jsx)(w.TableHeaderCell,{children:J("organizations.table.orgId")}),(0,a.jsx)(w.TableHeaderCell,{children:J("organizations.table.orgName")}),(0,a.jsx)(w.TableHeaderCell,{children:J("organizations.table.createdAt")}),(0,a.jsx)(w.TableHeaderCell,{children:J("organizations.table.spend")}),(0,a.jsx)(w.TableHeaderCell,{children:J("organizations.table.budget")}),(0,a.jsx)(w.TableHeaderCell,{children:J("organizations.table.models")}),(0,a.jsx)(w.TableHeaderCell,{children:J("organizations.table.tpmRpmLimit")}),(0,a.jsx)(w.TableHeaderCell,{children:J("organizations.table.info")}),(0,a.jsx)(w.TableHeaderCell,{children:J("organizations.table.actions")})]})}),(0,a.jsx)(f.TableBody,{children:e&&e.length>0?e.sort((e,a)=>new Date(a.created_at).getTime()-new Date(e.created_at).getTime()).map(e=>(0,a.jsxs)(T.TableRow,{children:[(0,a.jsx)(y.TableCell,{children:(0,a.jsx)("div",{className:"overflow-hidden",children:(0,a.jsx)(k.Tooltip,{title:e.organization_id,children:(0,a.jsxs)(g.Button,{size:"xs",variant:"light",className:"font-mono text-[#6E29F6] bg-[#F1EAFE] hover:bg-[#E6D9FE] text-xs font-normal px-2 py-0.5 text-left overflow-hidden truncate max-w-[200px]",onClick:()=>Y(e.organization_id),children:[e.organization_id?.slice(0,7),"..."]})})})}),(0,a.jsx)(y.TableCell,{children:e.organization_alias}),(0,a.jsx)(y.TableCell,{children:e.created_at?new Date(e.created_at).toLocaleDateString():J("organizations.table.noDate")}),(0,a.jsx)(y.TableCell,{children:(0,A.formatNumberWithCommas)(e.spend,4)}),(0,a.jsx)(y.TableCell,{children:e.litellm_budget_table?.max_budget!==null&&e.litellm_budget_table?.max_budget!==void 0?e.litellm_budget_table?.max_budget:J("organizations.table.unlimited")}),(0,a.jsx)(y.TableCell,{style:{maxWidth:"8-x",whiteSpace:"pre-wrap",overflow:"hidden"},className:e.models.length>3?"px-0":"",children:(0,a.jsx)("div",{className:"flex flex-col",children:Array.isArray(e.models)?(0,a.jsx)("div",{className:"flex flex-col",children:0===e.models.length?(0,a.jsx)(u.Badge,{size:"xs",className:"mb-1",color:"red",children:(0,a.jsx)(S.Text,{children:J("organizations.table.allModels")})}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex items-start",children:[e.models.length>3&&(0,a.jsx)("div",{children:(0,a.jsx)(b.Icon,{icon:eh[e.organization_id||""]?d.ChevronDownIcon:m.ChevronRightIcon,className:"cursor-pointer",size:"xs",onClick:()=>{ex(a=>({...a,[e.organization_id||""]:!a[e.organization_id||""]}))}})}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.models.slice(0,3).map((e,i)=>"all-proxy-models"===e?(0,a.jsx)(u.Badge,{size:"xs",color:"red",children:(0,a.jsx)(S.Text,{children:J("organizations.table.allModels")})},i):(0,a.jsx)(u.Badge,{size:"xs",color:"blue",children:(0,a.jsx)(S.Text,{children:e.length>30?`${(0,q.getModelDisplayName)(e).slice(0,30)}...`:(0,q.getModelDisplayName)(e)})},i)),e.models.length>3&&!eh[e.organization_id||""]&&(0,a.jsx)(u.Badge,{size:"xs",color:"gray",className:"cursor-pointer",children:(0,a.jsxs)(S.Text,{children:["+",e.models.length-3,J("organizations.table.moreModels")]})}),eh[e.organization_id||""]&&(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.models.slice(3).map((e,i)=>"all-proxy-models"===e?(0,a.jsx)(u.Badge,{size:"xs",color:"red",children:(0,a.jsx)(S.Text,{children:J("organizations.table.allModels")})},i+3):(0,a.jsx)(u.Badge,{size:"xs",color:"blue",children:(0,a.jsx)(S.Text,{children:e.length>30?`${(0,q.getModelDisplayName)(e).slice(0,30)}...`:(0,q.getModelDisplayName)(e)})},i+3))})]})]})})}):null})}),(0,a.jsx)(y.TableCell,{children:(0,a.jsxs)(S.Text,{children:[J("organizations.table.tpm"),e.litellm_budget_table?.tpm_limit?e.litellm_budget_table?.tpm_limit:J("organizations.table.unlimited"),(0,a.jsx)("br",{}),J("organizations.table.rpm"),e.litellm_budget_table?.rpm_limit?e.litellm_budget_table?.rpm_limit:J("organizations.table.unlimited")]})}),(0,a.jsx)(y.TableCell,{children:(0,a.jsxs)(S.Text,{children:[e.members?.length||0,J("organizations.table.members")]})}),(0,a.jsx)(y.TableCell,{children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R.default,{variant:"Edit",tooltipText:J("organizations.actions.edit"),onClick:()=>{Y(e.organization_id),ee(!0)}}),(0,a.jsx)(R.default,{variant:"Delete",tooltipText:J("organizations.actions.delete"),onClick:()=>{var a;(a=e.organization_id)&&(er(a),ei(!0))}})]})})]},e.organization_id)):null})]})]})})})]})})]})]})}),(0,a.jsx)(M.Modal,{title:J("organizations.modal.createTitle"),visible:ec,width:800,footer:null,onCancel:()=>{eu(!1),eg.resetFields()},children:(0,a.jsxs)(I.Form,{form:eg,onFinish:ef,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,a.jsx)(I.Form.Item,{label:J("organizations.modal.orgName"),name:"organization_alias",rules:[{required:!0,message:J("organizations.modal.orgNameRequired")}],children:(0,a.jsx)(F.TextInput,{placeholder:J("organizations.modal.orgNamePlaceholder")})}),(0,a.jsx)(I.Form.Item,{label:J("organizations.modal.models"),name:"models",style:{marginTop:16},children:(0,a.jsx)(U.ModelSelect,{options:{showAllProxyModelsOverride:!0,includeSpecialOptions:!0},value:eg.getFieldValue("models"),onChange:e=>eg.setFieldValue("models",e),context:"organization",placeholder:J("organizations.modal.modelsPlaceholder")})}),(0,a.jsx)(I.Form.Item,{label:J("organizations.modal.maxBudget"),name:"max_budget",style:{marginTop:16},children:(0,a.jsx)(et.default,{step:.01,precision:2,width:200,placeholder:J("organizations.modal.maxBudgetPlaceholder")})}),(0,a.jsx)(I.Form.Item,{label:J("organizations.modal.budgetDuration"),name:"budget_duration",style:{marginTop:16},children:(0,a.jsxs)(O.Select,{defaultValue:null,placeholder:J("organizations.modal.budgetDurationPlaceholder"),children:[(0,a.jsx)(O.Select.Option,{value:"24h",children:J("organizations.modal.budgetDaily")}),(0,a.jsx)(O.Select.Option,{value:"7d",children:J("organizations.modal.budgetWeekly")}),(0,a.jsx)(O.Select.Option,{value:"30d",children:J("organizations.modal.budgetMonthly")})]})}),(0,a.jsx)(I.Form.Item,{label:J("organizations.modal.tpmLimit"),name:"tpm_limit",style:{marginTop:16},children:(0,a.jsx)(et.default,{step:1,width:400,placeholder:J("organizations.modal.tpmLimitPlaceholder")})}),(0,a.jsx)(I.Form.Item,{label:J("organizations.modal.rpmLimit"),name:"rpm_limit",style:{marginTop:16},children:(0,a.jsx)(et.default,{step:1,width:400,placeholder:J("organizations.modal.rpmLimitPlaceholder")})}),(0,a.jsx)(I.Form.Item,{label:(0,a.jsxs)("span",{children:[J("organizations.modal.vectorStores")," ",(0,a.jsx)(k.Tooltip,{title:J("organizations.modal.vectorStoresTooltip"),children:(0,a.jsx)(o.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"allowed_vector_store_ids",style:{marginTop:16,marginBottom:32},help:J("organizations.modal.vectorStoresHelp"),children:(0,a.jsx)(es.default,{onChange:e=>eg.setFieldValue("allowed_vector_store_ids",e),value:eg.getFieldValue("allowed_vector_store_ids"),accessToken:t||"",placeholder:J("organizations.modal.vectorStoresPlaceholder")})}),(0,a.jsx)(I.Form.Item,{label:(0,a.jsxs)("span",{children:[J("organizations.modal.mcpServers")," ",(0,a.jsx)(k.Tooltip,{title:J("organizations.modal.mcpServersTooltip"),children:(0,a.jsx)(o.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"allowed_mcp_servers_and_groups",style:{marginTop:20,marginBottom:32},help:J("organizations.modal.mcpServersHelp"),children:(0,a.jsx)(Q.default,{onChange:e=>eg.setFieldValue("allowed_mcp_servers_and_groups",e),value:eg.getFieldValue("allowed_mcp_servers_and_groups"),accessToken:t||"",placeholder:J("organizations.modal.mcpServersPlaceholder")})}),(0,a.jsx)(I.Form.Item,{label:J("organizations.modal.metadata"),name:"metadata",style:{marginTop:16},children:(0,a.jsx)(P.Input.TextArea,{rows:4})}),(0,a.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,a.jsx)(g.Button,{type:"submit",children:J("organizations.modal.createSubmit")})})]})}),(0,a.jsx)(E.default,{isOpen:ea,title:J("organizations.delete.title"),message:J("organizations.delete.message"),resourceInformationTitle:J("organizations.delete.resourceTitle"),resourceInformation:[{label:J("organizations.delete.resourceLabel"),value:el,code:!0}],onCancel:()=>{ei(!1),er(null)},onOk:ej,confirmLoading:ed})]})},"fetchOrganizations",0,eo],846835)}]);