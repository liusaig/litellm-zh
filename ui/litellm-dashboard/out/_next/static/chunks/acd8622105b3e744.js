(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,517442,e=>{"use strict";var s=e.i(843476),t=e.i(271645),l=e.i(592968);let a=e=>e>=.8?"text-green-600":"text-yellow-600",r=({entities:e})=>{let[l,r]=(0,t.useState)(!0),[n,i]=(0,t.useState)({});return e&&0!==e.length?(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsxs)("div",{className:"flex items-center mb-2 cursor-pointer",onClick:()=>r(!l),children:[(0,s.jsx)("svg",{className:`w-5 h-5 mr-2 transition-transform ${l?"transform rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,s.jsxs)("h4",{className:"font-medium",children:["Detected Entities (",e.length,")"]})]}),l&&(0,s.jsx)("div",{className:"space-y-2",children:e.map((e,t)=>{let l=n[t]||!1;return(0,s.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 cursor-pointer hover:bg-gray-100",onClick:()=>{i(e=>({...e,[t]:!e[t]}))},children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("svg",{className:`w-5 h-5 mr-2 transition-transform ${l?"transform rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,s.jsx)("span",{className:"font-medium mr-2",children:e.entity_type}),(0,s.jsxs)("span",{className:`font-mono ${a(e.score)}`,children:["Score: ",e.score.toFixed(2)]})]}),(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:["Position: ",e.start,"-",e.end]})]}),l&&(0,s.jsx)("div",{className:"p-3 border-t bg-white",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-2",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("span",{className:"font-medium w-1/3",children:"Entity Type:"}),(0,s.jsx)("span",{children:e.entity_type})]}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("span",{className:"font-medium w-1/3",children:"Position:"}),(0,s.jsxs)("span",{children:["Characters ",e.start,"-",e.end]})]}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("span",{className:"font-medium w-1/3",children:"Confidence:"}),(0,s.jsx)("span",{className:a(e.score),children:e.score.toFixed(2)})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[e.recognition_metadata&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("span",{className:"font-medium w-1/3",children:"Recognizer:"}),(0,s.jsx)("span",{children:e.recognition_metadata.recognizer_name})]}),(0,s.jsxs)("div",{className:"flex overflow-hidden",children:[(0,s.jsx)("span",{className:"font-medium w-1/3",children:"Identifier:"}),(0,s.jsx)("span",{className:"truncate text-xs font-mono",children:e.recognition_metadata.recognizer_identifier})]})]}),e.analysis_explanation&&(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("span",{className:"font-medium w-1/3",children:"Explanation:"}),(0,s.jsx)("span",{children:e.analysis_explanation})]})]})]})})]},t)})})]}):null},n=(e,t="slate")=>(0,s.jsx)("span",{className:`px-2 py-1 rounded-md text-xs font-medium inline-block ${{green:"bg-green-100 text-green-800",red:"bg-red-100 text-red-800",blue:"bg-blue-50 text-blue-700",slate:"bg-slate-100 text-slate-800",amber:"bg-amber-100 text-amber-800"}[t]}`,children:e}),i=e=>e?n("detected","red"):n("not detected","slate"),o=({title:e,count:l,defaultOpen:a=!0,right:r,children:n})=>{let[i,o]=(0,t.useState)(a);return(0,s.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 cursor-pointer hover:bg-gray-100",onClick:()=>o(e=>!e),children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("svg",{className:`w-5 h-5 mr-2 transition-transform ${i?"transform rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,s.jsxs)("h5",{className:"font-medium",children:[e," ","number"==typeof l&&(0,s.jsxs)("span",{className:"text-gray-500 font-normal",children:["(",l,")"]})]})]}),(0,s.jsx)("div",{children:r})]}),i&&(0,s.jsx)("div",{className:"p-3 border-t bg-white",children:n})]})},d=({label:e,children:t,mono:l})=>(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("span",{className:"font-medium w-1/3",children:e}),(0,s.jsx)("span",{className:l?"font-mono text-sm break-all":"",children:t})]}),c=()=>(0,s.jsx)("div",{className:"my-3 border-t"}),m=({response:e})=>{if(!e)return null;let t=e.outputs??e.output??[],l="GUARDRAIL_INTERVENED"===e.action?"red":"green",a=(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.guardrailCoverage?.textCharacters&&n(`text guarded ${e.guardrailCoverage.textCharacters.guarded??0}/${e.guardrailCoverage.textCharacters.total??0}`,"blue"),e.guardrailCoverage?.images&&n(`images guarded ${e.guardrailCoverage.images.guarded??0}/${e.guardrailCoverage.images.total??0}`,"blue")]}),r=e.usage&&(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(e.usage).map(([e,t])=>"number"==typeof t?(0,s.jsxs)("span",{className:"px-2 py-1 bg-slate-100 text-slate-800 rounded-md text-xs font-medium",children:[e,": ",t]},e):null)});return(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d,{label:"Action:",children:n(e.action??"N/A",l)}),e.actionReason&&(0,s.jsx)(d,{label:"Action Reason:",children:e.actionReason}),e.blockedResponse&&(0,s.jsx)(d,{label:"Blocked Response:",children:(0,s.jsx)("span",{className:"italic",children:e.blockedResponse})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d,{label:"Coverage:",children:a}),(0,s.jsx)(d,{label:"Usage:",children:r})]})]}),t.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c,{}),(0,s.jsx)("h4",{className:"font-medium mb-2",children:"Outputs"}),(0,s.jsx)("div",{className:"space-y-2",children:t.map((e,t)=>(0,s.jsx)("div",{className:"p-3 bg-gray-50 rounded-md",children:(0,s.jsx)("div",{className:"text-sm whitespace-pre-wrap",children:e.text??(0,s.jsx)("em",{children:"(non-text output)"})})},t))})]})]}),e.assessments?.length?(0,s.jsx)("div",{className:"space-y-3",children:e.assessments.map((e,t)=>{let l=(0,s.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.wordPolicy&&n("word","slate"),e.contentPolicy&&n("content","slate"),e.topicPolicy&&n("topic","slate"),e.sensitiveInformationPolicy&&n("sensitive-info","slate"),e.contextualGroundingPolicy&&n("contextual-grounding","slate"),e.automatedReasoningPolicy&&n("automated-reasoning","slate")]});return(0,s.jsxs)(o,{title:`Assessment #${t+1}`,defaultOpen:!0,right:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[e.invocationMetrics?.guardrailProcessingLatency!=null&&n(`${e.invocationMetrics.guardrailProcessingLatency} ms`,"amber"),l]}),children:[e.wordPolicy&&(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("h6",{className:"font-medium mb-2",children:"Word Policy"}),(e.wordPolicy.customWords?.length??0)>0&&(0,s.jsx)(o,{title:"Custom Words",defaultOpen:!0,children:(0,s.jsx)("div",{className:"space-y-2",children:e.wordPolicy.customWords.map((e,t)=>(0,s.jsxs)("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[n(e.action??"N/A",e.detected?"red":"slate"),(0,s.jsx)("span",{className:"font-mono text-sm break-all",children:e.match})]}),i(e.detected)]},t))})}),(e.wordPolicy.managedWordLists?.length??0)>0&&(0,s.jsx)(o,{title:"Managed Word Lists",defaultOpen:!1,children:(0,s.jsx)("div",{className:"space-y-2",children:e.wordPolicy.managedWordLists.map((e,t)=>(0,s.jsxs)("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[n(e.action??"N/A",e.detected?"red":"slate"),(0,s.jsx)("span",{className:"font-mono text-sm break-all",children:e.match}),e.type&&n(e.type,"slate")]}),i(e.detected)]},t))})})]}),e.contentPolicy?.filters?.length?(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("h6",{className:"font-medium mb-2",children:"Content Policy"}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"text-left text-gray-600",children:[(0,s.jsx)("th",{className:"py-1 pr-4",children:"Type"}),(0,s.jsx)("th",{className:"py-1 pr-4",children:"Action"}),(0,s.jsx)("th",{className:"py-1 pr-4",children:"Detected"}),(0,s.jsx)("th",{className:"py-1 pr-4",children:"Strength"}),(0,s.jsx)("th",{className:"py-1 pr-4",children:"Confidence"})]})}),(0,s.jsx)("tbody",{children:e.contentPolicy.filters.map((e,t)=>(0,s.jsxs)("tr",{className:"border-t",children:[(0,s.jsx)("td",{className:"py-1 pr-4",children:e.type??"â€”"}),(0,s.jsx)("td",{className:"py-1 pr-4",children:n(e.action??"â€”",e.detected?"red":"slate")}),(0,s.jsx)("td",{className:"py-1 pr-4",children:i(e.detected)}),(0,s.jsx)("td",{className:"py-1 pr-4",children:e.filterStrength??"â€”"}),(0,s.jsx)("td",{className:"py-1 pr-4",children:e.confidence??"â€”"})]},t))})]})})]}):null,e.contextualGroundingPolicy?.filters?.length?(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("h6",{className:"font-medium mb-2",children:"Contextual Grounding"}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"text-left text-gray-600",children:[(0,s.jsx)("th",{className:"py-1 pr-4",children:"Type"}),(0,s.jsx)("th",{className:"py-1 pr-4",children:"Action"}),(0,s.jsx)("th",{className:"py-1 pr-4",children:"Detected"}),(0,s.jsx)("th",{className:"py-1 pr-4",children:"Score"}),(0,s.jsx)("th",{className:"py-1 pr-4",children:"Threshold"})]})}),(0,s.jsx)("tbody",{children:e.contextualGroundingPolicy.filters.map((e,t)=>(0,s.jsxs)("tr",{className:"border-t",children:[(0,s.jsx)("td",{className:"py-1 pr-4",children:e.type??"â€”"}),(0,s.jsx)("td",{className:"py-1 pr-4",children:n(e.action??"â€”",e.detected?"red":"slate")}),(0,s.jsx)("td",{className:"py-1 pr-4",children:i(e.detected)}),(0,s.jsx)("td",{className:"py-1 pr-4",children:e.score??"â€”"}),(0,s.jsx)("td",{className:"py-1 pr-4",children:e.threshold??"â€”"})]},t))})]})})]}):null,e.sensitiveInformationPolicy&&(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("h6",{className:"font-medium mb-2",children:"Sensitive Information"}),(e.sensitiveInformationPolicy.piiEntities?.length??0)>0&&(0,s.jsx)(o,{title:"PII Entities",defaultOpen:!0,children:(0,s.jsx)("div",{className:"space-y-2",children:e.sensitiveInformationPolicy.piiEntities.map((e,t)=>(0,s.jsxs)("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[n(e.action??"N/A",e.detected?"red":"slate"),e.type&&n(e.type,"slate"),(0,s.jsx)("span",{className:"font-mono text-xs break-all",children:e.match})]}),i(e.detected)]},t))})}),(e.sensitiveInformationPolicy.regexes?.length??0)>0&&(0,s.jsx)(o,{title:"Custom Regexes",defaultOpen:!1,children:(0,s.jsx)("div",{className:"space-y-2",children:e.sensitiveInformationPolicy.regexes.map((e,t)=>(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-2 bg-gray-50 rounded gap-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[n(e.action??"N/A",e.detected?"red":"slate"),(0,s.jsx)("span",{className:"font-medium",children:e.name??"regex"}),(0,s.jsx)("span",{className:"font-mono text-xs break-all",children:e.regex})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[i(e.detected),e.match&&(0,s.jsx)("span",{className:"font-mono text-xs break-all",children:e.match})]})]},t))})})]}),e.topicPolicy?.topics?.length?(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("h6",{className:"font-medium mb-2",children:"Topic Policy"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:e.topicPolicy.topics.map((e,t)=>(0,s.jsx)("div",{className:"px-3 py-1.5 bg-gray-50 rounded-md text-xs",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[n(e.action??"N/A",e.detected?"red":"slate"),(0,s.jsx)("span",{className:"font-medium",children:e.name??"topic"}),e.type&&n(e.type,"slate"),i(e.detected)]})},t))})]}):null,e.invocationMetrics&&(0,s.jsx)(o,{title:"Invocation Metrics",defaultOpen:!1,children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d,{label:"Latency (ms)",children:e.invocationMetrics.guardrailProcessingLatency??"â€”"}),(0,s.jsx)(d,{label:"Coverage:",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.invocationMetrics.guardrailCoverage?.textCharacters&&n(`text ${e.invocationMetrics.guardrailCoverage.textCharacters.guarded??0}/${e.invocationMetrics.guardrailCoverage.textCharacters.total??0}`,"blue"),e.invocationMetrics.guardrailCoverage?.images&&n(`images ${e.invocationMetrics.guardrailCoverage.images.guarded??0}/${e.invocationMetrics.guardrailCoverage.images.total??0}`,"blue")]})})]}),(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsx)(d,{label:"Usage:",children:(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:e.invocationMetrics.usage&&Object.entries(e.invocationMetrics.usage).map(([e,t])=>"number"==typeof t?(0,s.jsxs)("span",{className:"px-2 py-1 bg-slate-100 text-slate-800 rounded-md text-xs font-medium",children:[e,": ",t]},e):null)})})})]})}),e.automatedReasoningPolicy?.findings?.length?(0,s.jsx)(o,{title:"Automated Reasoning Findings",defaultOpen:!1,children:(0,s.jsx)("div",{className:"space-y-2",children:e.automatedReasoningPolicy.findings.map((e,t)=>(0,s.jsx)("pre",{className:"bg-gray-50 rounded p-2 text-xs overflow-x-auto",children:JSON.stringify(e,null,2)},t))})}):null]},t)})}):null,(0,s.jsx)(o,{title:"Raw Bedrock Guardrail Response",defaultOpen:!1,children:(0,s.jsx)("pre",{className:"bg-gray-50 rounded p-3 text-xs overflow-x-auto",children:JSON.stringify(e,null,2)})})]})},u=(e,t="slate")=>(0,s.jsx)("span",{className:`px-2 py-1 rounded-md text-xs font-medium inline-block ${{green:"bg-green-100 text-green-800",red:"bg-red-100 text-red-800",blue:"bg-blue-50 text-blue-700",slate:"bg-slate-100 text-slate-800",amber:"bg-amber-100 text-amber-800"}[t]}`,children:e}),x=({title:e,count:l,defaultOpen:a=!0,children:r})=>{let[n,i]=(0,t.useState)(a);return(0,s.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"flex items-center justify-between p-3 bg-gray-50 cursor-pointer hover:bg-gray-100",onClick:()=>i(e=>!e),children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("svg",{className:`w-5 h-5 mr-2 transition-transform ${n?"transform rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,s.jsxs)("h5",{className:"font-medium",children:[e," ","number"==typeof l&&(0,s.jsxs)("span",{className:"text-gray-500 font-normal",children:["(",l,")"]})]})]})}),n&&(0,s.jsx)("div",{className:"p-3 border-t bg-white",children:r})]})},p=({label:e,children:t,mono:l})=>(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("span",{className:"font-medium w-1/3",children:e}),(0,s.jsx)("span",{className:l?"font-mono text-sm break-all":"",children:t})]}),h=({response:e})=>{if(!e||"string"==typeof e)return"string"==typeof e&&e?(0,s.jsx)("div",{className:"bg-white rounded-lg border border-red-200 p-4",children:(0,s.jsxs)("div",{className:"text-red-800",children:[(0,s.jsx)("h5",{className:"font-medium mb-2",children:"Error"}),(0,s.jsx)("p",{className:"text-sm",children:e})]})}):null;let t=Array.isArray(e)?e:[];if(0===t.length)return(0,s.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,s.jsx)("div",{className:"text-gray-600 text-sm",children:"No detections found"})});let l=t.filter(e=>"pattern"===e.type),a=t.filter(e=>"blocked_word"===e.type),r=t.filter(e=>"category_keyword"===e.type),n=t.filter(e=>"BLOCK"===e.action).length,i=t.filter(e=>"MASK"===e.action).length,o=t.length;return(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p,{label:"Total Detections:",children:(0,s.jsx)("span",{className:"font-semibold",children:o})}),(0,s.jsx)(p,{label:"Actions:",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[n>0&&u(`${n} blocked`,"red"),i>0&&u(`${i} masked`,"blue"),0===n&&0===i&&u("passed","green")]})})]}),(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsx)(p,{label:"By Type:",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[l.length>0&&u(`${l.length} patterns`,"slate"),a.length>0&&u(`${a.length} keywords`,"slate"),r.length>0&&u(`${r.length} categories`,"slate")]})})})]})}),l.length>0&&(0,s.jsx)(x,{title:"Patterns Matched",count:l.length,defaultOpen:!0,children:(0,s.jsx)("div",{className:"space-y-2",children:l.map((e,t)=>(0,s.jsx)("div",{className:"p-3 bg-gray-50 rounded-md",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)("div",{className:"space-y-1",children:(0,s.jsx)(p,{label:"Pattern:",children:e.pattern_name||"unknown"})}),(0,s.jsx)("div",{className:"space-y-1",children:(0,s.jsx)(p,{label:"Action:",children:u(e.action,"BLOCK"===e.action?"red":"blue")})})]})},t))})}),a.length>0&&(0,s.jsx)(x,{title:"Blocked Words Detected",count:a.length,defaultOpen:!0,children:(0,s.jsx)("div",{className:"space-y-2",children:a.map((e,t)=>(0,s.jsx)("div",{className:"p-3 bg-gray-50 rounded-md",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(p,{label:"Keyword:",mono:!0,children:e.keyword||"unknown"}),e.description&&(0,s.jsx)(p,{label:"Description:",children:e.description})]}),(0,s.jsx)("div",{className:"space-y-1",children:(0,s.jsx)(p,{label:"Action:",children:u(e.action,"BLOCK"===e.action?"red":"blue")})})]})},t))})}),r.length>0&&(0,s.jsx)(x,{title:"Category Keywords Detected",count:r.length,defaultOpen:!0,children:(0,s.jsx)("div",{className:"space-y-2",children:r.map((e,t)=>(0,s.jsx)("div",{className:"p-3 bg-gray-50 rounded-md",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(p,{label:"Category:",children:e.category||"unknown"}),(0,s.jsx)(p,{label:"Keyword:",mono:!0,children:e.keyword||"unknown"}),e.severity&&(0,s.jsx)(p,{label:"Severity:",children:u(e.severity,"high"===e.severity?"red":"medium"===e.severity?"amber":"slate")})]}),(0,s.jsx)("div",{className:"space-y-1",children:(0,s.jsx)(p,{label:"Action:",children:u(e.action,"BLOCK"===e.action?"red":"blue")})})]})},t))})}),(0,s.jsx)(x,{title:"Raw Detection Data",defaultOpen:!1,children:(0,s.jsx)("pre",{className:"bg-gray-50 rounded p-3 text-xs overflow-x-auto",children:JSON.stringify(t,null,2)})})]})};var g=e.i(764205);let f=()=>(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,s.jsx)("circle",{cx:"8",cy:"8",r:"7",stroke:"#16A34A",strokeWidth:"1.5",fill:"#F0FDF4"}),(0,s.jsx)("path",{d:"M5 8l2 2 4-4",stroke:"#16A34A",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),j=()=>(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,s.jsx)("circle",{cx:"8",cy:"8",r:"7",stroke:"#DC2626",strokeWidth:"1.5",fill:"#FEF2F2"}),(0,s.jsx)("path",{d:"M6 6l4 4M10 6l-4 4",stroke:"#DC2626",strokeWidth:"1.5",strokeLinecap:"round"})]}),y=()=>(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",className:"animate-spin",children:[(0,s.jsx)("circle",{cx:"8",cy:"8",r:"6",stroke:"#D1D5DB",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M8 2a6 6 0 0 1 6 6",stroke:"#6366F1",strokeWidth:"2",strokeLinecap:"round"})]}),b=({title:e,data:a,loading:r,error:n})=>{let[i,o]=(0,t.useState)(!1);return(0,s.jsxs)("div",{className:"border border-gray-200 rounded-lg bg-white",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>o(!i),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[r?(0,s.jsx)(y,{}):n?(0,s.jsx)(l.Tooltip,{title:n,children:(0,s.jsx)("span",{className:"text-gray-400 text-sm",children:"--"})}):a?.compliant?(0,s.jsx)(f,{}):(0,s.jsx)(j,{}),(0,s.jsx)("span",{className:"font-medium text-sm text-gray-900",children:e})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[!r&&!n&&a&&(0,s.jsx)("span",{className:`px-2 py-0.5 rounded text-[11px] font-semibold uppercase ${a.compliant?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"}`,children:a.compliant?"COMPLIANT":"NON-COMPLIANT"}),n&&(0,s.jsx)("span",{className:"px-2 py-0.5 rounded text-[11px] font-medium bg-gray-100 text-gray-500 border border-gray-200",children:"UNAVAILABLE"}),(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",className:`transition-transform ${i?"rotate-180":""}`,children:(0,s.jsx)("path",{d:"M6 8l4 4 4-4",stroke:"#6B7280",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),i&&(0,s.jsxs)("div",{className:"border-t border-gray-100 px-4 py-3",children:[r&&(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Checking compliance..."}),n&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:n}),a&&(0,s.jsx)("div",{className:"space-y-2",children:a.checks.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:e.passed?(0,s.jsx)(f,{}):(0,s.jsx)(j,{})}),(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.check_name}),(0,s.jsx)("span",{className:"text-[10px] font-mono text-gray-400",children:e.article})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:e.detail})]})]},t))})]})]})},v=({accessToken:e,logEntry:l})=>{let[a,r]=(0,t.useState)(null),[n,i]=(0,t.useState)(null),[o,d]=(0,t.useState)(!1),[c,m]=(0,t.useState)(!1),[u,x]=(0,t.useState)(null),[p,h]=(0,t.useState)(null);return(0,t.useEffect)(()=>{if(!e||!l.request_id)return;let s={request_id:l.request_id,user_id:l.user,model:l.model,timestamp:l.startTime,guardrail_information:l.metadata?.guardrail_information};d(!0),x(null),(0,g.checkEuAiActCompliance)(e,s).then(r).catch(e=>x(e.message||"Failed to check EU AI Act compliance")).finally(()=>d(!1)),m(!0),h(null),(0,g.checkGdprCompliance)(e,s).then(i).catch(e=>h(e.message||"Failed to check GDPR compliance")).finally(()=>m(!1))},[e,l]),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-4",children:"Regulatory Compliance"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(b,{title:"EU AI Act",data:a,loading:o,error:u}),(0,s.jsx)(b,{title:"GDPR",data:n,loading:c,error:p})]})]})},_=new Set(["presidio","bedrock","litellm_content_filter"]),N=e=>Object.values(e.masked_entity_count||{}).reduce((e,s)=>e+("number"==typeof s?s:0),0),w=e=>"success"===(e.guardrail_status??"").toLowerCase(),S=e=>e.policy_template||e.guardrail_name,k=()=>(0,s.jsxs)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",children:[(0,s.jsx)("circle",{cx:"20",cy:"20",r:"20",fill:"#EEF2FF"}),(0,s.jsx)("path",{d:"M20 10l8 4v6c0 5.25-3.4 10.15-8 11.5C15.4 30.15 12 25.25 12 20v-6l8-4z",stroke:"#6366F1",strokeWidth:"1.5",fill:"none"}),(0,s.jsx)("path",{d:"M16 20l3 3 5-6",stroke:"#6366F1",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]}),C=({className:e})=>(0,s.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",className:e,children:[(0,s.jsx)("circle",{cx:"11",cy:"11",r:"10",stroke:"#16A34A",strokeWidth:"1.5",fill:"#F0FDF4"}),(0,s.jsx)("path",{d:"M7 11l3 3 5-6",stroke:"#16A34A",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),T=({className:e})=>(0,s.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",className:e,children:[(0,s.jsx)("circle",{cx:"11",cy:"11",r:"10",stroke:"#DC2626",strokeWidth:"1.5",fill:"#FEF2F2"}),(0,s.jsx)("path",{d:"M8 8l6 6M14 8l-6 6",stroke:"#DC2626",strokeWidth:"1.5",strokeLinecap:"round"})]}),M=()=>(0,s.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",children:[(0,s.jsx)("circle",{cx:"11",cy:"11",r:"10",stroke:"#3B82F6",strokeWidth:"1.5",fill:"#EFF6FF"}),(0,s.jsx)("path",{d:"M9 7.5l6 3.5-6 3.5V7.5z",fill:"#3B82F6"})]}),L=()=>(0,s.jsx)("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",children:(0,s.jsx)("circle",{cx:"11",cy:"11",r:"5",fill:"#9CA3AF"})}),E=({expanded:e})=>(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",className:`transition-transform ${e?"rotate-180":""}`,children:(0,s.jsx)("path",{d:"M6 8l4 4 4-4",stroke:"#6B7280",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),D=()=>(0,s.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,s.jsx)("path",{d:"M8 2v8m0 0l-3-3m3 3l3-3M3 12h10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),A=({matchDetails:e})=>e&&0!==e.length?(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsxs)("h5",{className:"text-sm font-medium mb-2 text-gray-700",children:["Match Details (",e.length,")"]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b text-left text-gray-500",children:[(0,s.jsx)("th",{className:"pb-2 pr-4 font-medium",children:"Type"}),(0,s.jsx)("th",{className:"pb-2 pr-4 font-medium",children:"Method"}),(0,s.jsx)("th",{className:"pb-2 pr-4 font-medium",children:"Action"}),(0,s.jsx)("th",{className:"pb-2 font-medium",children:"Detail"})]})}),(0,s.jsx)("tbody",{children:e.map((e,t)=>(0,s.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,s.jsx)("td",{className:"py-2 pr-4",children:e.type}),(0,s.jsx)("td",{className:"py-2 pr-4",children:(0,s.jsx)("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-700 rounded text-xs",children:e.detection_method??"-"})}),(0,s.jsx)("td",{className:"py-2 pr-4",children:(0,s.jsx)("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${"BLOCK"===e.action_taken?"bg-red-100 text-red-800":"bg-blue-50 text-blue-700"}`,children:e.action_taken??"-"})}),(0,s.jsxs)("td",{className:"py-2 font-mono text-xs text-gray-600 break-all",children:[e.category?`[${e.category}] `:"",e.snippet??"-"]})]},t))})]})})]}):null,I=({response:e})=>{let[l,a]=(0,t.useState)(!1);return(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"flex items-center justify-between p-3 bg-gray-50 cursor-pointer hover:bg-gray-100",onClick:()=>a(!l),children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(E,{expanded:l}),(0,s.jsx)("h5",{className:"font-medium text-sm ml-1",children:"Raw Guardrail Response"})]})}),l&&(0,s.jsx)("div",{className:"p-3 border-t bg-white",children:(0,s.jsx)("pre",{className:"bg-gray-50 rounded p-3 text-xs overflow-x-auto",children:JSON.stringify(e,null,2)})})]})})},R=({entries:e})=>{let l=(0,t.useMemo)(()=>[...e].sort((e,s)=>(e.start_time??0)-(s.start_time??0)),[e]),a=(0,t.useMemo)(()=>{if(0===l.length)return[];let e=l[0].start_time,s=[];s.push({type:"request",label:"Request received",offsetMs:0});let t=l.filter(e=>"pre_call"===e.guardrail_mode),a=l.filter(e=>"post_call"===e.guardrail_mode||"logging_only"===e.guardrail_mode),r=l.filter(e=>"during_call"===e.guardrail_mode);for(let l of t){let t=Math.round((l.end_time-e)*1e3);s.push({type:"guardrail",label:`Pre-call guardrail: ${S(l)}`,offsetMs:t,status:w(l)?"PASSED":"FAILED",isSuccess:w(l)})}let n=t.length>0?Math.max(...t.map(e=>e.end_time)):e,i=Math.round((((a.length>0?Math.min(...a.map(e=>e.start_time)):void 0)??n+1)-e)*1e3);for(let t of(s.push({type:"llm",label:"LLM call",offsetMs:i}),r)){let l=Math.round((t.end_time-e)*1e3);s.push({type:"guardrail",label:`During-call guardrail: ${S(t)}`,offsetMs:l,status:w(t)?"PASSED":"FAILED",isSuccess:w(t)})}for(let t of a){let l=Math.round((t.end_time-e)*1e3);s.push({type:"guardrail",label:`Post-call guardrail: ${S(t)}`,offsetMs:l,status:w(t)?"PASSED":"FAILED",isSuccess:w(t)})}let o=Math.round((Math.max(...l.map(e=>e.end_time))-e)*1e3)+1;return s.push({type:"response",label:"Response returned",offsetMs:o}),s},[l]);return(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-4",children:"Request Lifecycle"}),(0,s.jsx)("div",{className:"relative",children:a.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-start gap-3 relative",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:"request"===e.type||"response"===e.type?(0,s.jsx)(L,{}):"llm"===e.type?(0,s.jsx)(M,{}):e.isSuccess?(0,s.jsx)(C,{}):(0,s.jsx)(T,{})}),t<a.length-1&&(0,s.jsx)("div",{className:"w-0.5 bg-gray-200 flex-grow",style:{minHeight:"24px"}})]}),(0,s.jsx)("div",{className:"pb-4 flex-1 min-w-0",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,s.jsx)("span",{className:`text-sm ${"llm"===e.type?"text-blue-600 font-medium":"text-gray-900"}`,children:e.label}),e.status&&(0,s.jsx)("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-bold uppercase ${e.isSuccess?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.status}),(0,s.jsxs)("span",{className:"text-xs text-gray-400 font-mono ml-auto flex-shrink-0",children:["T+",e.offsetMs,"ms"]})]})})]},t))})]})},z=({entry:e})=>{var a;let n,[i,o]=(0,t.useState)(!1),d=w(e),c=N(e),u=S(e),x=(n=Math.round(1e3*e.duration),`${n}ms`),p=null==(a=e.guardrail_mode)||""===a?"â€”":("string"==typeof a?a:String(a)).replace(/_/g,"-").toUpperCase(),g=(e=>{if(!w(e))return null;if(null!=e.risk_score)return e.risk_score;let s=N(e),t=e.patterns_checked??0,l=e.confidence_score??0;if(0===t&&0===l)return 0;let a=7*(t>0?s/t:0)+3*l;return s>0&&a<2&&(a=2),Math.min(10,Math.round(10*a)/10)})(e),f=e.guardrail_provider??"presidio",j=e.guardrail_response,y=Array.isArray(j)?j:[],b="bedrock"!==f||null===j||"object"!=typeof j||Array.isArray(j)?void 0:j,v=null!=e.patterns_checked?`${c}/${e.patterns_checked} matched`:c>0?`${c} matched`:null;return(0,s.jsxs)("div",{className:"border border-gray-200 rounded-lg bg-white",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 px-4 py-3 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>o(!i),children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:d?(0,s.jsx)(C,{}):(0,s.jsx)(T,{})}),(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap flex-1 min-w-0",children:[(0,s.jsx)("span",{className:"font-semibold text-gray-900 text-sm truncate",children:u}),(0,s.jsx)("span",{className:"px-2 py-0.5 border border-blue-200 bg-blue-50 text-blue-700 rounded text-[11px] font-semibold uppercase flex-shrink-0",children:p}),(0,s.jsx)("span",{className:`px-2 py-0.5 rounded text-[11px] font-semibold uppercase flex-shrink-0 ${d?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"}`,children:d?"PASSED":"FAILED"}),v&&(0,s.jsx)("span",{className:`px-2 py-0.5 rounded text-[11px] font-medium flex-shrink-0 ${0===c?"bg-green-50 text-green-700 border border-green-200":"bg-amber-50 text-amber-700 border border-amber-200"}`,children:v}),null!=e.confidence_score&&(0,s.jsxs)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 border border-gray-200 rounded text-[11px] font-medium flex-shrink-0",children:[(100*e.confidence_score).toFixed(0),"% conf"]}),null!=g&&d&&(0,s.jsx)(l.Tooltip,{title:`Risk score: ${g}/10`,children:(0,s.jsxs)("span",{className:`px-2 py-0.5 border rounded text-[11px] font-semibold flex-shrink-0 ${g<=3?"text-green-600 bg-green-50 border-green-200":g<=6?"text-amber-600 bg-amber-50 border-amber-200":"text-red-600 bg-red-50 border-red-200"}`,children:["Risk ",g,"/10"]})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 flex-shrink-0",children:[(0,s.jsx)("span",{className:"text-sm text-gray-500 font-mono",children:x}),e.detection_method&&(0,s.jsx)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 border border-gray-200 rounded text-[11px] font-medium",children:e.detection_method.split(",")[0].trim()}),(0,s.jsx)(E,{expanded:i})]})]}),i&&(0,s.jsxs)("div",{className:"border-t border-gray-100 px-4 py-3",children:[e.classification&&(0,s.jsxs)("div",{className:"mb-3 bg-gray-50 rounded-lg p-3 space-y-1",children:[(0,s.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Classification"}),e.classification.category&&(0,s.jsxs)("div",{className:"flex text-sm",children:[(0,s.jsx)("span",{className:"font-medium w-1/3 text-gray-500",children:"Category:"}),(0,s.jsx)("span",{children:e.classification.category})]}),e.classification.article_reference&&(0,s.jsxs)("div",{className:"flex text-sm",children:[(0,s.jsx)("span",{className:"font-medium w-1/3 text-gray-500",children:"Reference:"}),(0,s.jsx)("span",{className:"font-mono",children:e.classification.article_reference})]}),null!=e.classification.confidence&&(0,s.jsxs)("div",{className:"flex text-sm",children:[(0,s.jsx)("span",{className:"font-medium w-1/3 text-gray-500",children:"Confidence:"}),(0,s.jsxs)("span",{children:[(100*e.classification.confidence).toFixed(0),"%"]})]}),e.classification.reason&&(0,s.jsxs)("div",{className:"flex text-sm",children:[(0,s.jsx)("span",{className:"font-medium w-1/3 text-gray-500",children:"Reason:"}),(0,s.jsx)("span",{children:e.classification.reason})]})]}),e.match_details&&e.match_details.length>0&&(0,s.jsx)(A,{matchDetails:e.match_details}),c>0&&(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Masked Entities"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(e.masked_entity_count||{}).map(([e,t])=>(0,s.jsxs)("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs font-medium",children:[e,": ",t]},e))})]}),"presidio"===f&&y.length>0&&(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)(r,{entities:y})}),"bedrock"===f&&b&&(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)(m,{response:b})}),"litellm_content_filter"===f&&j&&(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)(h,{response:j})}),f&&!_.has(f)&&j&&(0,s.jsx)(I,{response:j})]})]})};e.s(["default",0,({data:e,accessToken:l,logEntry:a})=>{let r=(0,t.useMemo)(()=>Array.isArray(e)?e.filter(e=>!!e):e?[e]:[],[e]),n=r.filter(w).length,i=n===r.length,o=(0,t.useMemo)(()=>Math.round(1e3*r.reduce((e,s)=>e+(s.duration??0),0)),[r]);return((0,t.useMemo)(()=>Array.from(new Set(r.map(e=>e.policy_template).filter(Boolean))),[r]),0===r.length)?null:(0,s.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm w-full max-w-full overflow-hidden mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-100",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(k,{}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Guardrails & Policy Compliance"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-500",children:[r.length," guardrail",1!==r.length?"s":""," evaluated"]}),(0,s.jsx)("span",{className:"text-gray-300",children:"|"}),(0,s.jsxs)("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-semibold ${i?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:[i?(0,s.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:(0,s.jsx)("path",{d:"M3 6l2.5 2.5L9 4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}):null,n," Passed"]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-6",children:[(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["Total: ",o,"ms overhead"]})}),(0,s.jsxs)("button",{onClick:()=>{let e=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),s=URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download=`guardrail-compliance-log-${new Date().toISOString().slice(0,10)}.json`,t.click(),URL.revokeObjectURL(s)},className:"inline-flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[(0,s.jsx)(D,{}),"Export Compliance Log"]})]})]}),l&&a&&(0,s.jsx)("div",{className:"px-6 py-4 border-b border-gray-100",children:(0,s.jsx)(v,{accessToken:l,logEntry:a})}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"w-[340px] flex-shrink-0 border-r border-gray-100 px-6 py-5",children:(0,s.jsx)(R,{entries:r})}),(0,s.jsxs)("div",{className:"flex-1 px-6 py-5 min-w-0",children:[(0,s.jsx)("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-4",children:"Evaluation Details"}),(0,s.jsx)("div",{className:"space-y-3",children:r.map((e,t)=>(0,s.jsx)(z,{entry:e},`${e.guardrail_name??"guardrail"}-${t}`))})]})]})]})}],517442)},93648,245767,291950,e=>{"use strict";var s=e.i(843476),t=e.i(271645),l=e.i(207082),a=e.i(500330),r=e.i(871943),n=e.i(360820),i=e.i(94629),o=e.i(111110),d=e.i(152990),c=e.i(682830),m=e.i(269200),u=e.i(942232),x=e.i(977572),p=e.i(427612),h=e.i(64848),g=e.i(496020),f=e.i(592968);function j({keys:e,totalCount:l,isLoading:j,isFetching:y,pageIndex:b,pageSize:v,onPageChange:_}){let{t:N}=(0,o.useLanguage)(),[w,S]=(0,t.useState)([{id:"deleted_at",desc:!0}]),[k,C]=(0,t.useState)({pageIndex:b,pageSize:v});t.default.useEffect(()=>{C({pageIndex:b,pageSize:v})},[b,v]);let T=[{id:"token",accessorKey:"token",header:N("logs.deletedKeys.columns.keyId"),size:150,maxSize:250,cell:e=>{let t=e.getValue();return(0,s.jsx)(f.Tooltip,{title:t,children:(0,s.jsx)("span",{className:"font-mono text-blue-500 text-xs truncate block max-w-[250px]",children:t||"-"})})}},{id:"key_alias",accessorKey:"key_alias",header:N("logs.deletedKeys.columns.keyAlias"),size:150,maxSize:200,cell:e=>{let t=e.getValue();return(0,s.jsx)(f.Tooltip,{title:t,children:(0,s.jsx)("span",{className:"font-mono text-xs truncate block max-w-[200px]",children:t??"-"})})}},{id:"team_alias",accessorKey:"team_alias",header:N("logs.deletedKeys.columns.teamAlias"),size:120,maxSize:180,cell:e=>{let t=e.getValue();return(0,s.jsx)("span",{className:"truncate block max-w-[180px]",children:t||"-"})}},{id:"spend",accessorKey:"spend",header:N("logs.deletedKeys.columns.spend"),size:100,maxSize:140,cell:e=>(0,s.jsx)("span",{className:"block max-w-[140px]",children:(0,a.formatNumberWithCommas)(e.getValue(),4)})},{id:"max_budget",accessorKey:"max_budget",header:N("logs.deletedKeys.columns.budget"),size:110,maxSize:150,cell:e=>{let t=e.getValue();return(0,s.jsx)("span",{className:"block max-w-[150px]",children:null===t?N("logs.deletedKeys.unlimited"):`\xa5${(0,a.formatNumberWithCommas)(t)}`})}},{id:"user_email",accessorKey:"user_email",header:N("logs.deletedKeys.columns.userEmail"),size:160,maxSize:250,cell:e=>{let t=e.getValue();return(0,s.jsx)(f.Tooltip,{title:t,children:(0,s.jsx)("span",{className:"font-mono text-xs truncate block max-w-[250px]",children:t??"-"})})}},{id:"user_id",accessorKey:"user_id",header:N("logs.deletedKeys.columns.userId"),size:120,maxSize:200,cell:e=>{let t=e.getValue();return(0,s.jsx)(f.Tooltip,{title:t||void 0,children:(0,s.jsx)("span",{className:"truncate block max-w-[200px]",children:t||"-"})})}},{id:"created_at",accessorKey:"created_at",header:N("logs.deletedKeys.columns.createdAt"),size:120,maxSize:140,cell:e=>{let t=e.getValue();return(0,s.jsx)("span",{className:"block max-w-[140px]",children:t?new Date(t).toLocaleDateString():"-"})}},{id:"created_by",accessorKey:"created_by",header:N("logs.deletedKeys.columns.createdBy"),size:120,maxSize:180,cell:e=>{let t=e.row.original.created_by;return(0,s.jsx)(f.Tooltip,{title:t||void 0,children:(0,s.jsx)("span",{className:"truncate block max-w-[180px]",children:t||"-"})})}},{id:"deleted_at",accessorKey:"deleted_at",header:N("logs.deletedKeys.columns.deletedAt"),size:120,maxSize:140,cell:e=>{let t=e.row.original.deleted_at;return(0,s.jsx)("span",{className:"block max-w-[140px]",children:t?new Date(t).toLocaleDateString():"-"})}},{id:"deleted_by",accessorKey:"deleted_by",header:N("logs.deletedKeys.columns.deletedBy"),size:120,maxSize:180,cell:e=>{let t=e.row.original.deleted_by;return(0,s.jsx)(f.Tooltip,{title:t||void 0,children:(0,s.jsx)("span",{className:"truncate block max-w-[180px]",children:t||"-"})})}}],M=(0,d.useReactTable)({data:e,columns:T,columnResizeMode:"onChange",columnResizeDirection:"ltr",state:{sorting:w,pagination:k},onSortingChange:S,onPaginationChange:e=>{let s="function"==typeof e?e(k):e;C(s),_(s.pageIndex)},getCoreRowModel:(0,c.getCoreRowModel)(),getSortedRowModel:(0,c.getSortedRowModel)(),getPaginationRowModel:(0,c.getPaginationRowModel)(),enableSorting:!0,manualSorting:!1,manualPagination:!0,pageCount:Math.ceil(l/v)}),{pageIndex:L}=M.getState().pagination,E=L*v+1,D=Math.min((L+1)*v,l);return(0,s.jsx)("div",{className:"w-full h-full overflow-hidden",children:(0,s.jsxs)("div",{className:"border-b py-4 flex-1 overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between w-full mb-4",children:[j||y?(0,s.jsx)("span",{className:"inline-flex text-sm text-gray-700",children:N("logs.deletedKeys.loading")}):l>0&&(0,s.jsx)("span",{className:"inline-flex text-sm text-gray-700",children:N("logs.deletedKeys.showing").replace("{start}",String(E)).replace("{end}",String(D)).replace("{total}",String(l))}),(0,s.jsxs)("div",{className:"inline-flex items-center gap-2",children:[j||y?(0,s.jsx)("span",{className:"text-sm text-gray-700",children:N("logs.deletedKeys.loading")}):l>0&&(0,s.jsx)("span",{className:"text-sm text-gray-700",children:N("logs.deletedKeys.pageOf").replace("{current}",String(L+1)).replace("{total}",String(M.getPageCount()))}),(0,s.jsx)("button",{onClick:()=>M.previousPage(),disabled:j||y||!M.getCanPreviousPage(),className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:N("logs.deletedKeys.previous")}),(0,s.jsx)("button",{onClick:()=>M.nextPage(),disabled:j||y||!M.getCanNextPage(),className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:N("logs.deletedKeys.next")})]})]}),(0,s.jsx)("div",{className:"h-[75vh] overflow-auto",children:(0,s.jsx)("div",{className:"rounded-lg custom-border relative",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)(m.Table,{className:"[&_td]:py-0.5 [&_th]:py-1",style:{width:M.getCenterTotalSize()},children:[(0,s.jsx)(p.TableHead,{children:M.getHeaderGroups().map(e=>(0,s.jsx)(g.TableRow,{children:e.headers.map(e=>(0,s.jsx)(h.TableHeaderCell,{"data-header-id":e.id,className:"py-1 h-8 relative hover:bg-gray-50",style:{width:e.getSize(),maxWidth:e.column.columnDef.maxSize,position:"relative"},onMouseEnter:()=>{let s=document.querySelector(`[data-header-id="${e.id}"] .resizer`);s&&(s.style.opacity="0.5")},onMouseLeave:()=>{let s=document.querySelector(`[data-header-id="${e.id}"] .resizer`);s&&!e.column.getIsResizing()&&(s.style.opacity="0")},onClick:e.column.getToggleSortingHandler(),children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,s.jsx)("div",{className:"flex items-center",children:e.isPlaceholder?null:(0,d.flexRender)(e.column.columnDef.header,e.getContext())}),(0,s.jsx)("div",{className:"w-4",children:e.column.getIsSorted()?({asc:(0,s.jsx)(n.ChevronUpIcon,{className:"h-4 w-4 text-blue-500"}),desc:(0,s.jsx)(r.ChevronDownIcon,{className:"h-4 w-4 text-blue-500"})})[e.column.getIsSorted()]:(0,s.jsx)(i.SwitchVerticalIcon,{className:"h-4 w-4 text-gray-400"})}),(0,s.jsx)("div",{onDoubleClick:()=>e.column.resetSize(),onMouseDown:e.getResizeHandler(),onTouchStart:e.getResizeHandler(),className:`resizer ${M.options.columnResizeDirection} ${e.column.getIsResizing()?"isResizing":""}`,style:{position:"absolute",right:0,top:0,height:"100%",width:"5px",background:e.column.getIsResizing()?"#3b82f6":"transparent",cursor:"col-resize",userSelect:"none",touchAction:"none",opacity:+!!e.column.getIsResizing()}})]})},e.id))},e.id))}),(0,s.jsx)(u.TableBody,{children:j||y?(0,s.jsx)(g.TableRow,{children:(0,s.jsx)(x.TableCell,{colSpan:T.length,className:"h-8 text-center",children:(0,s.jsx)("div",{className:"text-center text-gray-500",children:(0,s.jsxs)("p",{children:["ðŸš… ",N("logs.deletedKeys.loadingKeys")]})})})}):e.length>0?M.getRowModel().rows.map(e=>(0,s.jsx)(g.TableRow,{className:"h-8",children:e.getVisibleCells().map(e=>(0,s.jsx)(x.TableCell,{style:{width:e.column.getSize(),maxWidth:e.column.columnDef.maxSize,whiteSpace:"pre-wrap",overflow:"hidden"},className:"py-0.5 max-h-8 overflow-hidden text-ellipsis whitespace-nowrap",children:(0,d.flexRender)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,s.jsx)(g.TableRow,{children:(0,s.jsx)(x.TableCell,{colSpan:T.length,className:"h-8 text-center",children:(0,s.jsx)("div",{className:"text-center text-gray-500",children:(0,s.jsx)("p",{children:N("logs.deletedKeys.noResults")})})})})})]})})})})]})})}function y(){let[e,a]=(0,t.useState)(0),[r]=(0,t.useState)(50),{data:n,isPending:i,isFetching:o}=(0,l.useDeletedKeys)(e+1,r);return(0,s.jsx)(j,{keys:n?.keys||[],totalCount:n?.total_count||0,isLoading:i,isFetching:o,pageIndex:e,pageSize:r,onPageChange:a})}e.s(["default",()=>y],93648);var b=e.i(785242),v=e.i(389083),_=e.i(599724),N=e.i(355619);function w({teams:e,isLoading:l,isFetching:j}){let{t:y}=(0,o.useLanguage)(),[b,w]=(0,t.useState)([{id:"deleted_at",desc:!0}]),S=[{id:"team_alias",accessorKey:"team_alias",header:y("logs.deletedTeams.columns.teamName"),size:150,maxSize:200,cell:e=>{let t=e.getValue();return(0,s.jsx)(f.Tooltip,{title:t||void 0,children:(0,s.jsx)("span",{className:"truncate block max-w-[200px]",children:t||"-"})})}},{id:"team_id",accessorKey:"team_id",header:y("logs.deletedTeams.columns.teamId"),size:150,maxSize:250,cell:e=>{let t=e.getValue();return(0,s.jsx)(f.Tooltip,{title:t,children:(0,s.jsx)("span",{className:"font-mono text-blue-500 text-xs truncate block max-w-[250px]",children:t||"-"})})}},{id:"created_at",accessorKey:"created_at",header:y("logs.deletedTeams.columns.createdAt"),size:120,maxSize:140,cell:e=>{let t=e.getValue();return(0,s.jsx)("span",{className:"block max-w-[140px]",children:t?new Date(t).toLocaleDateString():"-"})}},{id:"spend",accessorKey:"spend",header:y("logs.deletedTeams.columns.spend"),size:100,maxSize:140,cell:e=>{let t=e.row.original.spend;return(0,s.jsx)("span",{className:"block max-w-[140px]",children:void 0!==t?(0,a.formatNumberWithCommas)(t,4):"-"})}},{id:"max_budget",accessorKey:"max_budget",header:y("logs.deletedTeams.columns.budget"),size:110,maxSize:150,cell:e=>{let t=e.getValue();return(0,s.jsx)("span",{className:"block max-w-[150px]",children:null==t?y("logs.deletedTeams.noLimit"):`\xa5${(0,a.formatNumberWithCommas)(t)}`})}},{id:"models",accessorKey:"models",header:y("logs.deletedTeams.columns.models"),size:200,maxSize:300,cell:e=>{let t=e.getValue();return Array.isArray(t)&&0!==t.length?(0,s.jsxs)("div",{className:"flex flex-wrap gap-1 max-w-[300px]",children:[t.slice(0,3).map((e,t)=>"all-proxy-models"===e?(0,s.jsx)(v.Badge,{size:"xs",color:"red",children:(0,s.jsx)(_.Text,{children:y("logs.deletedTeams.allProxyModels")})},t):(0,s.jsx)(v.Badge,{size:"xs",color:"blue",children:(0,s.jsx)(_.Text,{children:e.length>30?`${(0,N.getModelDisplayName)(e).slice(0,30)}...`:(0,N.getModelDisplayName)(e)})},t)),t.length>3&&(0,s.jsx)(v.Badge,{size:"xs",color:"gray",children:(0,s.jsx)(_.Text,{children:y("logs.deletedTeams.moreModel").replace("{count}",String(t.length-3))})})]}):(0,s.jsx)(v.Badge,{size:"xs",color:"red",children:(0,s.jsx)(_.Text,{children:y("logs.deletedTeams.allProxyModels")})})}},{id:"organization_id",accessorKey:"organization_id",header:y("logs.deletedTeams.columns.organization"),size:150,maxSize:200,cell:e=>{let t=e.getValue();return(0,s.jsx)(f.Tooltip,{title:t||void 0,children:(0,s.jsx)("span",{className:"truncate block max-w-[200px]",children:t||"-"})})}},{id:"deleted_at",accessorKey:"deleted_at",header:y("logs.deletedTeams.columns.deletedAt"),size:120,maxSize:140,cell:e=>{let t=e.row.original.deleted_at;return(0,s.jsx)("span",{className:"block max-w-[140px]",children:t?new Date(t).toLocaleDateString():"-"})}},{id:"deleted_by",accessorKey:"deleted_by",header:y("logs.deletedTeams.columns.deletedBy"),size:120,maxSize:180,cell:e=>{let t=e.row.original.deleted_by;return(0,s.jsx)(f.Tooltip,{title:t||void 0,children:(0,s.jsx)("span",{className:"truncate block max-w-[180px]",children:t||"-"})})}}],k=(0,d.useReactTable)({data:e,columns:S,columnResizeMode:"onChange",columnResizeDirection:"ltr",state:{sorting:b},onSortingChange:w,getCoreRowModel:(0,c.getCoreRowModel)(),getSortedRowModel:(0,c.getSortedRowModel)(),enableSorting:!0,manualSorting:!1});return(0,s.jsx)("div",{className:"w-full h-full overflow-hidden",children:(0,s.jsxs)("div",{className:"border-b py-4 flex-1 overflow-hidden",children:[(0,s.jsx)("div",{className:"flex items-center justify-between w-full mb-4",children:l||j?(0,s.jsx)("span",{className:"inline-flex text-sm text-gray-700",children:y("logs.deletedTeams.loading")}):e.length>0&&(0,s.jsx)("span",{className:"inline-flex text-sm text-gray-700",children:y("logs.deletedTeams.showing").replace("{count}",String(e.length))})}),(0,s.jsx)("div",{className:"h-[75vh] overflow-auto",children:(0,s.jsx)("div",{className:"rounded-lg custom-border relative",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)(m.Table,{className:"[&_td]:py-0.5 [&_th]:py-1",style:{width:k.getCenterTotalSize()},children:[(0,s.jsx)(p.TableHead,{children:k.getHeaderGroups().map(e=>(0,s.jsx)(g.TableRow,{children:e.headers.map(e=>(0,s.jsx)(h.TableHeaderCell,{"data-header-id":e.id,className:"py-1 h-8 relative hover:bg-gray-50",style:{width:e.getSize(),maxWidth:e.column.columnDef.maxSize,position:"relative"},onMouseEnter:()=>{let s=document.querySelector(`[data-header-id="${e.id}"] .resizer`);s&&(s.style.opacity="0.5")},onMouseLeave:()=>{let s=document.querySelector(`[data-header-id="${e.id}"] .resizer`);s&&!e.column.getIsResizing()&&(s.style.opacity="0")},onClick:e.column.getToggleSortingHandler(),children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,s.jsx)("div",{className:"flex items-center",children:e.isPlaceholder?null:(0,d.flexRender)(e.column.columnDef.header,e.getContext())}),(0,s.jsx)("div",{className:"w-4",children:e.column.getIsSorted()?({asc:(0,s.jsx)(n.ChevronUpIcon,{className:"h-4 w-4 text-blue-500"}),desc:(0,s.jsx)(r.ChevronDownIcon,{className:"h-4 w-4 text-blue-500"})})[e.column.getIsSorted()]:(0,s.jsx)(i.SwitchVerticalIcon,{className:"h-4 w-4 text-gray-400"})}),(0,s.jsx)("div",{onDoubleClick:()=>e.column.resetSize(),onMouseDown:e.getResizeHandler(),onTouchStart:e.getResizeHandler(),className:`resizer ${k.options.columnResizeDirection} ${e.column.getIsResizing()?"isResizing":""}`,style:{position:"absolute",right:0,top:0,height:"100%",width:"5px",background:e.column.getIsResizing()?"#3b82f6":"transparent",cursor:"col-resize",userSelect:"none",touchAction:"none",opacity:+!!e.column.getIsResizing()}})]})},e.id))},e.id))}),(0,s.jsx)(u.TableBody,{children:l||j?(0,s.jsx)(g.TableRow,{children:(0,s.jsx)(x.TableCell,{colSpan:S.length,className:"h-8 text-center",children:(0,s.jsx)("div",{className:"text-center text-gray-500",children:(0,s.jsxs)("p",{children:["ðŸš… ",y("logs.deletedTeams.loadingTeams")]})})})}):e.length>0?k.getRowModel().rows.map(e=>(0,s.jsx)(g.TableRow,{className:"h-8",children:e.getVisibleCells().map(e=>(0,s.jsx)(x.TableCell,{style:{width:e.column.getSize(),maxWidth:e.column.columnDef.maxSize,whiteSpace:"pre-wrap",overflow:"hidden"},className:"py-0.5 max-h-8 overflow-hidden text-ellipsis whitespace-nowrap",children:(0,d.flexRender)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,s.jsx)(g.TableRow,{children:(0,s.jsx)(x.TableCell,{colSpan:S.length,className:"h-8 text-center",children:(0,s.jsx)("div",{className:"text-center text-gray-500",children:(0,s.jsx)("p",{children:y("logs.deletedTeams.noResults")})})})})})]})})})})]})})}function S(){let{data:e,isPending:t,isFetching:l}=(0,b.useDeletedTeams)(1,100);return(0,s.jsx)(w,{teams:e||[],isLoading:t,isFetching:l})}e.s(["default",()=>S],245767);var k=e.i(625901),C=e.i(56456),T=e.i(152473),M=e.i(199133),L=e.i(770914);let{Text:E}=e.i(898586).Typography;e.s(["PaginatedModelSelect",0,({value:e,onChange:l,placeholder:a="Select a model",style:r,pageSize:n=50,allowClear:i=!0,disabled:o=!1})=>{let[d,c]=(0,t.useState)(""),[m,u]=(0,T.useDebouncedState)("",{wait:300}),{data:x,fetchNextPage:p,hasNextPage:h,isFetchingNextPage:g,isLoading:f}=(0,k.useInfiniteModelInfo)(n,m||void 0),j=(0,t.useMemo)(()=>{if(!x?.pages)return[];let e=new Set,s=[];for(let t of x.pages)for(let l of t.data){let t=l.model_info?.id??"",a=l.model_name??"";!t||e.has(t)||(e.add(t),s.push({label:a?`${a} (${t})`:t,value:t,modelName:a,modelId:t}))}return s},[x]);return(0,s.jsx)(M.Select,{value:e||void 0,onChange:e=>{let s="string"==typeof e?e:Array.isArray(e)?e[0]??"":"";l?.(s)},placeholder:a,style:{width:"100%",...r},allowClear:i,disabled:o,showSearch:!0,filterOption:!1,onSearch:e=>{c(e),u(e)},searchValue:d,onPopupScroll:e=>{let s=e.currentTarget;(s.scrollTop+s.clientHeight)/s.scrollHeight>=.8&&h&&!g&&p()},loading:f,notFoundContent:f?(0,s.jsx)(C.LoadingOutlined,{spin:!0}):"No models found",options:j,optionRender:e=>{let{modelName:t,modelId:l}=e.data;return(0,s.jsx)(s.Fragment,{children:t?(0,s.jsxs)(L.Space,{direction:"vertical",children:[(0,s.jsxs)(L.Space,{direction:"horizontal",children:[(0,s.jsx)(E,{strong:!0,children:"Model name:"}),(0,s.jsx)(E,{ellipsis:!0,children:t})]}),(0,s.jsxs)(E,{ellipsis:!0,type:"secondary",children:["Model ID: ",l]})]}):(0,s.jsxs)(E,{ellipsis:!0,type:"secondary",children:["Model ID: ",l]})})},popupRender:e=>(0,s.jsxs)(s.Fragment,{children:[e,g&&(0,s.jsx)("div",{style:{textAlign:"center",padding:8},children:(0,s.jsx)(C.LoadingOutlined,{spin:!0})})]})})}],291950)},307582,e=>{"use strict";var s=e.i(843476);e.s(["TimeCell",0,({utcTime:e})=>(0,s.jsx)("span",{style:{fontFamily:"monospace",width:"180px",display:"inline-block"},children:(e=>{try{return new Date(e).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}).replace(",","")}catch(e){return"Error converting time"}})(e)})])},97859,e=>{"use strict";e.s(["ERROR_CODE_OPTIONS",0,[{label:"400 - Bad Request",value:"400"},{label:"401 - Invalid Authentication",value:"401"},{label:"403 - Permission Denied",value:"403"},{label:"404 - Not Found",value:"404"},{label:"408 - Request Timeout",value:"408"},{label:"422 - Unprocessable Entity",value:"422"},{label:"429 - Rate Limited",value:"429"},{label:"500 - Internal Server Error",value:"500"},{label:"502 - Bad Gateway",value:"502"},{label:"503 - Service Unavailable",value:"503"},{label:"529 - Overloaded",value:"529"}],"MCP_CALL_TYPES",0,["call_mcp_tool","list_mcp_tools"],"QUICK_SELECT_OPTIONS",0,[{label:"Last 15 Minutes",value:15,unit:"minutes"},{label:"Last Hour",value:1,unit:"hours"},{label:"Last 4 Hours",value:4,unit:"hours"},{label:"Last 24 Hours",value:24,unit:"hours"},{label:"Last 7 Days",value:7,unit:"days"}]])},245099,e=>{"use strict";var s=e.i(843476),t=e.i(500330),l=(e.i(389083),e.i(994388)),a=e.i(592968);e.i(271645);var r=e.i(916925),n=e.i(446891),i=e.i(307582),o=e.i(97859);let d=({size:e=12})=>(0,s.jsx)("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"flex-shrink-0 text-gray-400",children:(0,s.jsx)("path",{d:"M12 3l1.912 5.813a2 2 0 0 0 1.275 1.275L21 12l-5.813 1.912a2 2 0 0 0-1.275 1.275L12 21l-1.912-5.813a2 2 0 0 0-1.275-1.275L3 12l5.813-1.912a2 2 0 0 0 1.275-1.275L12 3z"})}),c=({size:e=10})=>(0,s.jsx)("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"flex-shrink-0",children:(0,s.jsx)("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),m=({count:e})=>(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-blue-50 text-blue-700 border border-blue-200 rounded-full text-[11px] font-medium whitespace-nowrap",children:[(0,s.jsx)(d,{}),null!=e?e:"LLM"]}),u=({count:e})=>(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-amber-50 text-amber-700 border border-amber-200 rounded-full text-[11px] font-medium whitespace-nowrap",children:[(0,s.jsx)(c,{}),null!=e?e:"MCP"]}),x=({label:e,field:t,sortBy:l,sortOrder:a,onSortChange:r})=>(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{children:e}),(0,s.jsx)(n.TableHeaderSortDropdown,{sortState:l===t&&a,onSortChange:e=>{!1===e?r("startTime","desc"):r(t,e)}})]}),p=e=>{let{sortProps:n,t:p}=e||{},h=(e,s)=>p?.(e)||s||e;return[{header:n?()=>(0,s.jsx)(x,{label:h("logs.columns.time","Time"),field:"startTime",sortBy:n.sortBy,sortOrder:n.sortOrder,onSortChange:n.onSortChange}):h("logs.columns.time","Time"),accessorKey:"startTime",cell:e=>(0,s.jsx)(i.TimeCell,{utcTime:e.getValue()})},{header:h("logs.columns.type","Type"),id:"type",cell:e=>{let t=e.row.original,l=t.session_total_count||1,r=o.MCP_CALL_TYPES.includes(t.call_type),n=t.session_llm_count??(r?0:l),i=t.session_mcp_count??(r?l:0);if(r)return(0,s.jsx)(u,{});if(l<=1)return(0,s.jsx)(m,{});let x=(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-blue-50 text-blue-700 border border-blue-200 rounded-full text-[11px] font-medium whitespace-nowrap",children:[(0,s.jsx)(d,{}),(0,s.jsx)("span",{children:l}),i>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-blue-300",children:"Â·"}),(0,s.jsx)(c,{})]})]});return(0,s.jsx)(a.Tooltip,{title:p?.("logs.columns.llmMcpCount",{llm:n,mcp:i})||`${n} LLM â€¢ ${i} MCP`,children:x})}},{header:h("logs.columns.status","Status"),accessorKey:"metadata.status",cell:e=>{let t="failure"!==(e.getValue()||h("logs.columns.success","Success")).toLowerCase();return(0,s.jsx)("span",{className:`px-2 py-1 rounded-md text-xs font-medium inline-block text-center w-16 ${t?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t?h("logs.columns.success","Success"):h("logs.columns.failure","Failure")})}},{header:h("logs.columns.sessionId","Session ID"),accessorKey:"session_id",cell:e=>{let t=String(e.getValue()||""),r=e.row.original.onSessionClick;return(0,s.jsx)(a.Tooltip,{title:String(e.getValue()||""),children:(0,s.jsx)(l.Button,{size:"xs",variant:"light",className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal text-xs max-w-[15ch] truncate block",onClick:()=>r?.(t),children:String(e.getValue()||"")})})}},{header:h("logs.columns.requestId","Request ID"),accessorKey:"request_id",cell:e=>(0,s.jsx)(a.Tooltip,{title:String(e.getValue()||""),children:(0,s.jsx)("span",{className:"font-mono text-xs max-w-[15ch] truncate block",children:String(e.getValue()||"")})})},{header:n?()=>(0,s.jsx)(x,{label:h("logs.columns.cost","Cost"),field:"spend",sortBy:n.sortBy,sortOrder:n.sortOrder,onSortChange:n.onSortChange}):h("logs.columns.cost","Cost"),accessorKey:"spend",cell:e=>{let l=e.row.original,r=l.mcp_tool_call_count||0,n=l.mcp_tool_call_spend||0;return(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)(a.Tooltip,{title:`$${String(e.getValue()||0)}`,children:(0,s.jsx)("span",{children:(0,t.getSpendString)(e.getValue()||0)})}),r>0&&n>0&&(0,s.jsx)("span",{className:"text-[10px] text-amber-600",children:p?.("logs.columns.inclFromMcp",{cost:(0,t.getSpendString)(n),count:r})||`incl. ${(0,t.getSpendString)(n)} from ${r} MCP`})]})}},{header:h("logs.columns.duration","Duration (s)"),accessorKey:"duration",cell:e=>(0,s.jsx)(a.Tooltip,{title:String(e.getValue()||"-"),children:(0,s.jsx)("span",{className:"max-w-[15ch] truncate block",children:String(e.getValue()||"-")})})},{header:h("logs.columns.teamName","Team Name"),accessorKey:"metadata.user_api_key_team_alias",cell:e=>(0,s.jsx)(a.Tooltip,{title:String(e.getValue()||"-"),children:(0,s.jsx)("span",{className:"max-w-[15ch] truncate block",children:String(e.getValue()||"-")})})},{header:h("logs.columns.keyHash","Key Hash"),accessorKey:"metadata.user_api_key",cell:e=>{let t=String(e.getValue()||"-"),l=e.row.original.onKeyHashClick;return(0,s.jsx)(a.Tooltip,{title:t,children:(0,s.jsx)("span",{className:"font-mono max-w-[15ch] truncate block cursor-pointer hover:text-blue-600",onClick:()=>l?.(t),children:t})})}},{header:h("logs.columns.keyName","Key Name"),accessorKey:"metadata.user_api_key_alias",cell:e=>(0,s.jsx)(a.Tooltip,{title:String(e.getValue()||"-"),children:(0,s.jsx)("span",{className:"max-w-[15ch] truncate block",children:String(e.getValue()||"-")})})},{header:h("logs.columns.model","Model"),accessorKey:"model",cell:e=>{let t=e.row.original,l=t.custom_llm_provider,n=String(e.getValue()||"");return(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[l&&(0,s.jsx)("img",{src:t.metadata?.mcp_tool_call_metadata?.mcp_server_logo_url?t.metadata.mcp_tool_call_metadata.mcp_server_logo_url:l?(0,r.getProviderLogoAndName)(l).logo:"",alt:"",className:"w-4 h-4",onError:e=>{e.target.style.display="none"}}),(0,s.jsx)(a.Tooltip,{title:n,children:(0,s.jsx)("span",{className:"max-w-[15ch] truncate block",children:n})})]})}},{header:n?()=>(0,s.jsx)(x,{label:h("logs.columns.tokens","Tokens"),field:"total_tokens",sortBy:n.sortBy,sortOrder:n.sortOrder,onSortChange:n.onSortChange}):h("logs.columns.tokens","Tokens"),accessorKey:"total_tokens",cell:e=>{let t=e.row.original;return(0,s.jsxs)("span",{className:"text-sm",children:[String(t.total_tokens||"0"),(0,s.jsxs)("span",{className:"text-gray-400 text-xs ml-1",children:["(",String(t.prompt_tokens||"0"),"+",String(t.completion_tokens||"0"),")"]})]})}},{header:h("logs.columns.internalUser","Internal User"),accessorKey:"user",cell:e=>(0,s.jsx)(a.Tooltip,{title:String(e.getValue()||"-"),children:(0,s.jsx)("span",{className:"max-w-[15ch] truncate block",children:String(e.getValue()||"-")})})},{header:h("logs.columns.endUser","End User"),accessorKey:"end_user",cell:e=>(0,s.jsx)(a.Tooltip,{title:String(e.getValue()||"-"),children:(0,s.jsx)("span",{className:"max-w-[15ch] truncate block",children:String(e.getValue()||"-")})})},{header:h("logs.columns.tags","Tags"),accessorKey:"request_tags",cell:e=>{let t=e.getValue();if(!t||0===Object.keys(t).length)return"-";let l=Object.entries(t),r=l[0],n=l.slice(1);return(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:(0,s.jsx)(a.Tooltip,{title:(0,s.jsx)("div",{className:"flex flex-col gap-1",children:l.map(([e,t])=>(0,s.jsxs)("span",{children:[e,": ",String(t)]},e))}),children:(0,s.jsxs)("span",{className:"px-2 py-1 bg-gray-100 rounded-full text-xs",children:[r[0],": ",String(r[1]),n.length>0&&` +${n.length}`]})})})}}]};p(),e.s(["createColumns",0,p],245099)},70969,e=>{"use strict";var s=e.i(843476),t=e.i(111110);e.s(["ConfigInfoMessage",0,({show:e,onOpenSettings:l})=>{let{t:a}=(0,t.useLanguage)();return e?(0,s.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start",children:[(0,s.jsx)("div",{className:"text-blue-500 mr-3 flex-shrink-0 mt-0.5",children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,s.jsx)("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),(0,s.jsx)("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-blue-800",children:a("logs.details.requestNotFound")}),(0,s.jsxs)("p",{className:"text-sm text-blue-700 mt-1",children:["To view request and response details, enable prompt storage in your LiteLLM configuration by adding the following to your ",(0,s.jsx)("code",{className:"bg-blue-100 px-1 py-0.5 rounded",children:"proxy_config.yaml"})," file",l&&(0,s.jsxs)(s.Fragment,{children:[" or"," ",(0,s.jsx)("button",{onClick:l,className:"text-blue-600 hover:text-blue-800 underline font-medium",children:"open the settings"})," ","to configure this directly."]})]}),(0,s.jsx)("pre",{className:"mt-2 bg-white p-3 rounded border border-blue-200 text-xs font-mono overflow-auto",children:`general_settings:
  store_model_in_db: true
  store_prompts_in_spend_logs: true`}),(0,s.jsx)("p",{className:"text-xs text-blue-700 mt-2",children:"Note: This will only affect new requests after the configuration change."})]})]}):null}])},70635,e=>{"use strict";var s=e.i(843476),t=e.i(362024),l=e.i(500330);let a=e=>null==e?"-":`\xa5${(0,l.formatNumberWithCommas)(e)}`,r=e=>null==e?"-":`${(100*e).toFixed(2)}%`;e.s(["CostBreakdownViewer",0,({costBreakdown:e,totalSpend:l,promptTokens:n,completionTokens:i,cacheHit:o})=>{let d=o?.toLowerCase()==="true",c=void 0!==n||void 0!==i;if(!(e?.input_cost!==void 0||e?.output_cost!==void 0||c||e&&(void 0!==e.discount_percent&&0!==e.discount_percent||void 0!==e.discount_amount&&0!==e.discount_amount||void 0!==e.margin_percent&&0!==e.margin_percent||void 0!==e.margin_fixed_amount&&0!==e.margin_fixed_amount||void 0!==e.margin_total_amount&&0!==e.margin_total_amount)))return null;let m=e&&(void 0!==e.discount_percent&&0!==e.discount_percent||void 0!==e.discount_amount&&0!==e.discount_amount),u=e&&(void 0!==e.margin_percent&&0!==e.margin_percent||void 0!==e.margin_fixed_amount&&0!==e.margin_fixed_amount||void 0!==e.margin_total_amount&&0!==e.margin_total_amount),x=d?0:e?.input_cost,p=d?0:e?.output_cost,h=d?0:e?.original_cost,g=d?0:e?.total_cost??l;return(0,s.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,s.jsx)(t.Collapse,{expandIconPosition:"start",items:[{key:"1",label:(0,s.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Cost Breakdown"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 mr-4",children:[(0,s.jsx)("span",{className:"text-sm text-gray-500",children:"Total:"}),(0,s.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:[a(l),d&&" (Cached)"]})]})]}),children:(0,s.jsxs)("div",{className:"p-6 space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2 max-w-2xl",children:[(0,s.jsxs)("div",{className:"flex text-sm",children:[(0,s.jsx)("span",{className:"text-gray-600 font-medium w-1/3",children:"Input Cost:"}),(0,s.jsxs)("span",{className:"text-gray-900",children:[a(x),void 0!==n&&(0,s.jsxs)("span",{className:"text-gray-500 font-normal ml-1",children:["(",n.toLocaleString()," prompt tokens)"]})]})]}),(0,s.jsxs)("div",{className:"flex text-sm",children:[(0,s.jsx)("span",{className:"text-gray-600 font-medium w-1/3",children:"Output Cost:"}),(0,s.jsxs)("span",{className:"text-gray-900",children:[a(p),void 0!==i&&(0,s.jsxs)("span",{className:"text-gray-500 font-normal ml-1",children:["(",i.toLocaleString()," completion tokens)"]})]})]}),e?.tool_usage_cost!==void 0&&e.tool_usage_cost>0&&(0,s.jsxs)("div",{className:"flex text-sm",children:[(0,s.jsx)("span",{className:"text-gray-600 font-medium w-1/3",children:"Tool Usage Cost:"}),(0,s.jsx)("span",{className:"text-gray-900",children:a(e.tool_usage_cost)})]}),e?.additional_costs&&Object.keys(e.additional_costs).length>0&&(0,s.jsx)(s.Fragment,{children:Object.entries(e.additional_costs).map(([e,t])=>(0,s.jsxs)("div",{className:"flex text-sm",children:[(0,s.jsxs)("span",{className:"text-gray-600 font-medium w-1/3",children:[e,":"]}),(0,s.jsx)("span",{className:"text-gray-900",children:a(t)})]},e))})]}),!d&&(0,s.jsx)("div",{className:"pt-2 border-t border-gray-100 max-w-2xl",children:(0,s.jsxs)("div",{className:"flex text-sm font-semibold",children:[(0,s.jsx)("span",{className:"text-gray-900 w-1/3",children:"Original LLM Cost:"}),(0,s.jsx)("span",{className:"text-gray-900",children:a(h)})]})}),(m||u)&&(0,s.jsxs)("div",{className:"pt-2 space-y-2 max-w-2xl",children:[m&&(0,s.jsxs)("div",{className:"space-y-2",children:[void 0!==e.discount_percent&&0!==e.discount_percent&&(0,s.jsxs)("div",{className:"flex text-sm text-gray-600",children:[(0,s.jsxs)("span",{className:"font-medium w-1/3",children:["Discount (",r(e.discount_percent),"):"]}),(0,s.jsxs)("span",{className:"text-gray-900",children:["-",a(e.discount_amount)]})]}),void 0!==e.discount_amount&&void 0===e.discount_percent&&(0,s.jsxs)("div",{className:"flex text-sm text-gray-600",children:[(0,s.jsx)("span",{className:"font-medium w-1/3",children:"Discount Amount:"}),(0,s.jsxs)("span",{className:"text-gray-900",children:["-",a(e.discount_amount)]})]})]}),u&&(0,s.jsxs)("div",{className:"space-y-2",children:[void 0!==e.margin_percent&&0!==e.margin_percent&&(0,s.jsxs)("div",{className:"flex text-sm text-gray-600",children:[(0,s.jsxs)("span",{className:"font-medium w-1/3",children:["Margin (",r(e.margin_percent),"):"]}),(0,s.jsxs)("span",{className:"text-gray-900",children:["+",a((e.margin_total_amount||0)-(e.margin_fixed_amount||0))]})]}),void 0!==e.margin_fixed_amount&&0!==e.margin_fixed_amount&&(0,s.jsxs)("div",{className:"flex text-sm text-gray-600",children:[(0,s.jsx)("span",{className:"font-medium w-1/3",children:"Margin:"}),(0,s.jsxs)("span",{className:"text-gray-900",children:["+",a(e.margin_fixed_amount)]})]})]})]}),(0,s.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200 max-w-2xl",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"font-bold text-sm text-gray-900 w-1/3",children:"Final Calculated Cost:"}),(0,s.jsxs)("span",{className:"text-sm font-bold text-gray-900",children:[a(g),d&&" (Cached)"]})]})})]})}]})})}])},339086,504809,e=>{"use strict";e.i(843476);var s=e.i(271645);e.s([],339086);var t=e.i(166540),l=e.i(764205),a=e.i(266027),r=e.i(633627),n=e.i(374009),i=e.i(700514);let o="Team ID",d="Key Hash",c="Request ID",m="Model",u="User ID",x="End User",p="Status",h="Key Alias",g="Error Code",f="Error Message";function j({logs:e,accessToken:j,startTime:y,endTime:b,pageSize:v=i.defaultPageSize,isCustomDate:_,setCurrentPage:N,userID:w,userRole:S,sortBy:k="startTime",sortOrder:C="desc",currentPage:T=1}){let M=(0,s.useMemo)(()=>({[o]:"",[d]:"",[c]:"",[m]:"",[u]:"",[x]:"",[p]:"",[h]:"",[g]:"",[f]:""}),[]),[L,E]=(0,s.useState)(M),[D,A]=(0,s.useState)({data:[],total:0,page:1,page_size:50,total_pages:0}),I=(0,s.useRef)(0),R=(0,s.useCallback)(async(e,s=1)=>{if(!j)return;console.log("Filters being sent to API:",e);let a=Date.now();I.current=a;let r=(0,t.default)(y).utc().format("YYYY-MM-DD HH:mm:ss"),n=_?(0,t.default)(b).utc().format("YYYY-MM-DD HH:mm:ss"):(0,t.default)().utc().format("YYYY-MM-DD HH:mm:ss");try{let t=await (0,l.uiSpendLogsCall)({accessToken:j,start_date:r,end_date:n,page:s,page_size:v,params:{api_key:e[d]||void 0,team_id:e[o]||void 0,request_id:e[c]||void 0,user_id:e[u]||void 0,end_user:e[x]||void 0,status_filter:e[p]||void 0,model_id:e[m]||void 0,key_alias:e[h]||void 0,error_code:e[g]||void 0,error_message:e[f]||void 0,sort_by:k,sort_order:C}});a===I.current&&t.data&&A(t)}catch(e){console.error("Error searching users:",e)}},[j,y,b,_,v,k,C]),z=(0,s.useMemo)(()=>(0,n.default)((e,s)=>R(e,s),300),[R]);(0,s.useEffect)(()=>()=>z.cancel(),[z]);let O=(0,a.useQuery)({queryKey:["allKeys"],queryFn:async()=>{if(!j)throw Error("Access token required");return await (0,r.fetchAllKeyAliases)(j)},enabled:!!j}).data||[],P=(0,s.useMemo)(()=>!!(L[h]||L[d]||L[c]||L[u]||L[x]||L[g]||L[f]||L[m]),[L]);(0,s.useEffect)(()=>{P&&j&&(z.cancel(),R(L,T))},[k,C,T,y,b,_]);let F=(0,s.useMemo)(()=>{if(!e||!e.data)return{data:[],total:0,page:1,page_size:50,total_pages:0};if(P)return e;let s=[...e.data];return L[o]&&(s=s.filter(e=>e.team_id===L[o])),L[p]&&(s=s.filter(e=>"success"===L[p]?!e.status||"success"===e.status:e.status===L[p])),L[m]&&(s=s.filter(e=>e.model_id===L[m])),L[d]&&(s=s.filter(e=>e.api_key===L[d])),L[x]&&(s=s.filter(e=>e.end_user===L[x])),L[g]&&(s=s.filter(e=>{let s=(e.metadata||{}).error_information;return s&&s.error_code===L[g]})),{data:s,total:e.total,page:e.page,page_size:e.page_size,total_pages:e.total_pages}},[e,L,P]),B=(0,s.useMemo)(()=>P?D&&D.data&&D.data.length>0?D:e||{data:[],total:0,page:1,page_size:50,total_pages:0}:F,[P,D,F,e]),{data:q}=(0,a.useQuery)({queryKey:["allTeamsForLogFilters",j],queryFn:async()=>j&&await (0,r.fetchAllTeams)(j)||[],enabled:!!j});return{filters:L,filteredLogs:B,hasBackendFilters:P,allKeyAliases:O,allTeams:q,handleFilterChange:e=>{E(s=>{let t={...s,...e};for(let e of Object.keys(M))e in t||(t[e]=M[e]);return JSON.stringify(t)!==JSON.stringify(s)&&(N(1),z(t,1)),t})},handleFilterReset:()=>{E(M),A({data:[],total:0,page:1,page_size:50,total_pages:0}),z(M,1)}}}e.s(["useLogFilterLogic",()=>j],504809)},492030,894660,283086,195116,e=>{"use strict";var s=e.i(121229);e.s(["CheckOutlined",()=>s.default],492030);var t=e.i(801312);e.s(["LeftOutlined",()=>t.default],894660);var l=e.i(475254);let a=(0,l.default)("sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);e.s(["Sparkles",()=>a],283086);let r=(0,l.default)("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);e.s(["Wrench",()=>r],195116)},257486,624001,207066,337767,237062,e=>{"use strict";var s=e.i(97859);function t(e,t){let l=(t||"").trim();if(s.MCP_CALL_TYPES.includes(e))return l.replace(/^mcp:\s*/i,"").split("/").pop()||l||"mcp_tool";let a=(l.split("/").pop()||l).replace(/-20\d{6}.*$/i,"").replace(/:.*$/,""),r=a.match(/claude-[a-z0-9-]+/i);return r?r[0]:a||"llm_call"}e.s(["getEventDisplayName",()=>t],257486);var l=e.i(843476),a=e.i(464571),r=e.i(770914),n=e.i(262218),i=e.i(592968),o=e.i(898586),d=e.i(149192),c=e.i(536591);e.s(["UpOutlined",()=>c.default],624001);var c=c,m=e.i(755151),u=e.i(166540),x=e.i(916925);let p="16px 24px",h="Escape",g="monospace",f="#f0f0f0",j="#fff";e.s(["API_BASE_MAX_WIDTH",0,200,"COLOR_BACKGROUND",0,j,"COLOR_BG_LIGHT",0,"#fafafa","COLOR_BORDER",0,f,"DEFAULT_MAX_WIDTH",0,180,"DRAWER_CONTENT_PADDING",0,"24px","DRAWER_HEADER_PADDING",0,p,"DRAWER_WIDTH",0,"60%","FONT_FAMILY_MONO",0,g,"FONT_SIZE_HEADER",0,16,"FONT_SIZE_MEDIUM",0,13,"FONT_SIZE_SMALL",0,12,"JSON_MAX_HEIGHT",0,400,"KEY_ESCAPE",0,h,"KEY_J_LOWER",0,"j","KEY_J_UPPER",0,"J","KEY_K_LOWER",0,"k","KEY_K_UPPER",0,"K","METADATA_MAX_HEIGHT",0,300,"SPACING_LARGE",0,12,"SPACING_MEDIUM",0,8,"SPACING_SMALL",0,4,"SPACING_XLARGE",0,16,"TAB_REQUEST",0,"request","TAB_RESPONSE",0,"response"],207066);let{Text:y}=o.Typography;function b({log:e,onClose:s,onPrevious:t,onNext:a,statusLabel:r,statusColor:n,environment:i}){let o=e.custom_llm_provider||"",d=o?(0,x.getProviderLogoAndName)(o):null;return(0,l.jsxs)("div",{style:{padding:p,borderBottom:`1px solid ${f}`,backgroundColor:j,position:"sticky",top:0,zIndex:10},children:[(0,l.jsx)(v,{model:e.model,providerLogo:d?.logo,providerName:d?.displayName}),(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[(0,l.jsx)(_,{requestId:e.request_id}),(0,l.jsx)(N,{onPrevious:t,onNext:a,onClose:s})]}),(0,l.jsx)(w,{log:e,statusLabel:r,statusColor:n,environment:i})]})}function v({model:e,providerLogo:s,providerName:t}){return(0,l.jsxs)(r.Space,{size:8,style:{marginBottom:8},children:[s&&(0,l.jsx)("img",{src:s,alt:t||"Provider",style:{width:24,height:24},onError:e=>{e.target.style.display="none"}}),(0,l.jsxs)(r.Space,{size:8,direction:"horizontal",children:[(0,l.jsx)(y,{strong:!0,style:{fontSize:14},children:e}),t&&(0,l.jsx)(y,{type:"secondary",style:{fontSize:12},children:t})]})]})}function _({requestId:e}){return(0,l.jsx)("div",{style:{flex:1,minWidth:0},children:(0,l.jsx)(i.Tooltip,{title:e,children:(0,l.jsx)(y,{strong:!0,copyable:{text:e,tooltips:["Copy Request ID","Copied!"]},style:{fontSize:16,fontFamily:g,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},children:e})})})}function N({onPrevious:e,onNext:s,onClose:t}){let n={border:"1px solid #d9d9d9",borderRadius:4,padding:"0 4px",fontSize:12,fontFamily:"monospace",marginLeft:4,background:"#fafafa"};return(0,l.jsxs)(r.Space,{size:4,split:(0,l.jsx)("div",{style:{width:1,height:20,background:f}}),children:[(0,l.jsxs)(a.Button,{type:"text",size:"small",onClick:e,children:[(0,l.jsx)(c.default,{}),(0,l.jsx)("span",{style:n,children:"K"})]}),(0,l.jsxs)(a.Button,{type:"text",size:"small",onClick:s,children:[(0,l.jsx)(m.DownOutlined,{}),(0,l.jsx)("span",{style:n,children:"J"})]}),(0,l.jsx)(i.Tooltip,{title:"ESC to close",children:(0,l.jsx)(a.Button,{type:"text",icon:(0,l.jsx)(d.CloseOutlined,{}),onClick:t})})]})}function w({log:e,statusLabel:s,statusColor:t,environment:a}){return(0,l.jsxs)(r.Space,{size:12,children:[(0,l.jsx)(n.Tag,{color:t,children:s}),(0,l.jsxs)(n.Tag,{children:["Env: ",a]}),(0,l.jsxs)(r.Space,{size:8,children:[(0,l.jsx)(y,{type:"secondary",style:{fontSize:13},children:(0,u.default)(e.startTime).format("MMM D, YYYY h:mm:ss A")}),(0,l.jsxs)(y,{type:"secondary",style:{fontSize:13},children:["(",(0,u.default)(e.startTime).fromNow(),")"]})]})]})}e.s(["DrawerHeader",()=>b],337767);var S=e.i(271645);function k({isOpen:e,currentLog:s,allLogs:t,onClose:l,onSelectLog:a}){(0,S.useEffect)(()=>{let s=s=>{var t;if(!((t=s.target)instanceof HTMLInputElement||t instanceof HTMLTextAreaElement)&&e)switch(s.key){case h:l();break;case"j":case"J":n();break;case"k":case"K":r()}};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[e,s,t]);let r=()=>{if(!s||!t.length||!a)return;let e=t.findIndex(e=>e.request_id===s.request_id);e<t.length-1&&a(t[e+1])},n=()=>{if(!s||!t.length||!a)return;let e=t.findIndex(e=>e.request_id===s.request_id);e>0&&a(t[e-1])};return{selectNextLog:r,selectPreviousLog:n}}e.s(["useKeyboardNavigation",()=>k],237062)},3565,331052,867612,502626,e=>{"use strict";var s=e.i(843476),t=e.i(271645),l=e.i(464571),a=e.i(608856),r=e.i(492030),n=e.i(166406),i=e.i(894660),o=e.i(240647),d=e.i(283086),c=e.i(195116),m=e.i(97859),u=e.i(257486),x=e.i(337767),p=e.i(237062),h=e.i(898586),g=e.i(869216),f=e.i(175712),j=e.i(262218),y=e.i(653496),b=e.i(560445),v=e.i(362024),_=e.i(91739),N=e.i(770914),w=e.i(482725),S=e.i(166540),k=e.i(500330),C=e.i(517442),T=e.i(70635),M=e.i(70969),L=e.i(916925);function E({data:e}){let[l,a]=(0,t.useState)({});if(!e||0===e.length)return null;let r=e=>new Date(1e3*e).toLocaleString();return(0,s.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,s.jsx)(v.Collapse,{defaultActiveKey:["1"],expandIconPosition:"start",items:[{key:"1",label:(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Vector Store Requests"}),children:(0,s.jsx)("div",{className:"p-4",children:e.map((e,t)=>{var n,i;return(0,s.jsxs)("div",{className:"mb-6 last:mb-0",children:[(0,s.jsx)("div",{className:"bg-white rounded-lg border p-4 mb-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("span",{className:"font-medium w-1/3",children:"Query:"}),(0,s.jsx)("span",{className:"font-mono",children:e.query})]}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("span",{className:"font-medium w-1/3",children:"Vector Store ID:"}),(0,s.jsx)("span",{className:"font-mono",children:e.vector_store_id})]}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("span",{className:"font-medium w-1/3",children:"Provider:"}),(0,s.jsx)("span",{className:"flex items-center",children:(()=>{let{logo:t,displayName:l}=(0,L.getProviderLogoAndName)(e.custom_llm_provider);return(0,s.jsxs)(s.Fragment,{children:[t&&(0,s.jsx)("img",{src:t,alt:`${l} logo`,className:"h-5 w-5 mr-2"}),l]})})()})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("span",{className:"font-medium w-1/3",children:"Start Time:"}),(0,s.jsx)("span",{children:r(e.start_time)})]}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("span",{className:"font-medium w-1/3",children:"End Time:"}),(0,s.jsx)("span",{children:r(e.end_time)})]}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("span",{className:"font-medium w-1/3",children:"Duration:"}),(0,s.jsx)("span",{children:(n=e.start_time,i=e.end_time,`${((i-n)*1e3).toFixed(2)}ms`)})]})]})]})}),(0,s.jsx)("h4",{className:"font-medium mb-2",children:"Search Results"}),(0,s.jsx)("div",{className:"space-y-2",children:e.vector_store_search_response.data.map((e,r)=>{let n=l[`${t}-${r}`]||!1;return(0,s.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center p-3 bg-gray-50 cursor-pointer",onClick:()=>{let e;return e=`${t}-${r}`,void a(s=>({...s,[e]:!s[e]}))},children:[(0,s.jsx)("svg",{className:`w-5 h-5 mr-2 transition-transform ${n?"transform rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)("span",{className:"font-medium mr-2",children:["Result ",r+1]}),(0,s.jsxs)("span",{className:"text-gray-500 text-sm",children:["Score: ",(0,s.jsx)("span",{className:"font-mono",children:e.score.toFixed(4)})]})]})]}),n&&(0,s.jsx)("div",{className:"p-3 border-t bg-white",children:e.content.map((e,t)=>(0,s.jsxs)("div",{className:"mb-2 last:mb-0",children:[(0,s.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:e.type}),(0,s.jsx)("pre",{className:"text-xs font-mono whitespace-pre-wrap break-all bg-gray-50 p-2 rounded",children:e.text})]},t))})]},r)})})]},t)})})}]})})}e.s(["VectorStoreViewer",()=>E],331052);var D=e.i(592968),A=e.i(207066);let{Text:I}=h.Typography;function R({value:e,maxWidth:t=A.DEFAULT_MAX_WIDTH}){return e?(0,s.jsx)(D.Tooltip,{title:e,children:(0,s.jsx)(I,{copyable:{text:e,tooltips:["Copy","Copied!"]},style:{maxWidth:t,display:"inline-block",verticalAlign:"bottom",fontFamily:A.FONT_FAMILY_MONO,fontSize:A.FONT_SIZE_SMALL},ellipsis:!0,children:e})}):(0,s.jsx)(I,{type:"secondary",children:"-"})}let{Text:z}=h.Typography;function O({prompt:e=0,completion:t=0,total:l=0}){return(0,s.jsxs)(z,{children:[l.toLocaleString()," (",e.toLocaleString()," prompt tokens + ",t.toLocaleString()," completion tokens)"]})}let P=e=>!!e&&e instanceof Date,F=e=>"object"==typeof e&&null!==e,B=e=>!!e&&e instanceof Object&&"function"==typeof e;function q(e,s){return void 0===s&&(s=!1),!e||s?`"${e}"`:e}function K(e){let{field:s,value:l,data:a,lastElement:r,openBracket:n,closeBracket:i,level:o,style:d,shouldExpandNode:c,clickToExpandNode:m,outerRef:u,beforeExpandChange:x}=e,p=(0,t.useRef)(!1),[h,g]=(0,t.useState)(()=>c(o,l,s)),f=(0,t.useRef)(null);(0,t.useEffect)(()=>{p.current?g(c(o,l,s)):p.current=!0},[c]);let j=(0,t.useId)();if(0===a.length)return function(e){let{field:s,openBracket:l,closeBracket:a,lastElement:r,style:n}=e;return(0,t.createElement)("div",{className:n.basicChildStyle,role:"treeitem","aria-selected":void 0},(s||""===s)&&(0,t.createElement)("span",{className:n.label},q(s,n.quotesForFieldNames),":"),(0,t.createElement)("span",{className:n.punctuation},l),(0,t.createElement)("span",{className:n.punctuation},a),!r&&(0,t.createElement)("span",{className:n.punctuation},","))}({field:s,openBracket:n,closeBracket:i,lastElement:r,style:d});let y=h?d.collapseIcon:d.expandIcon,b=h?d.ariaLables.collapseJson:d.ariaLables.expandJson,v=o+1,_=a.length-1,N=e=>{h!==e&&(!x||x({level:o,value:l,field:s,newExpandValue:e}))&&g(e)},w=e=>{if("ArrowRight"===e.key||"ArrowLeft"===e.key)e.preventDefault(),N("ArrowRight"===e.key);else if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();let s="ArrowUp"===e.key?-1:1;if(!u.current)return;let t=u.current.querySelectorAll("[role=button]"),l=-1;for(let e=0;e<t.length;e++)if(0===t[e].tabIndex){l=e;break}if(l<0)return;let a=(l+s+t.length)%t.length;t[l].tabIndex=-1,t[a].tabIndex=0,t[a].focus()}},S=()=>{var e;N(!h);let s=f.current;if(!s)return;let t=null==(e=u.current)?void 0:e.querySelector('[role=button][tabindex="0"]');t&&(t.tabIndex=-1),s.tabIndex=0,s.focus()};return(0,t.createElement)("div",{className:d.basicChildStyle,role:"treeitem","aria-expanded":h,"aria-selected":void 0},(0,t.createElement)("span",{className:y,onClick:S,onKeyDown:w,role:"button","aria-label":b,"aria-expanded":h,"aria-controls":h?j:void 0,ref:f,tabIndex:0===o?0:-1}),(s||""===s)&&(m?(0,t.createElement)("span",{className:d.clickableLabel,onClick:S,onKeyDown:w},q(s,d.quotesForFieldNames),":"):(0,t.createElement)("span",{className:d.label},q(s,d.quotesForFieldNames),":")),(0,t.createElement)("span",{className:d.punctuation},n),h?(0,t.createElement)("ul",{id:j,role:"group",className:d.childFieldsContainer},a.map((e,s)=>(0,t.createElement)(V,{key:e[0]||s,field:e[0],value:e[1],style:d,lastElement:s===_,level:v,shouldExpandNode:c,clickToExpandNode:m,beforeExpandChange:x,outerRef:u}))):(0,t.createElement)("span",{className:d.collapsedContent,onClick:S,onKeyDown:w}),(0,t.createElement)("span",{className:d.punctuation},i),!r&&(0,t.createElement)("span",{className:d.punctuation},","))}function H(e){let{field:s,value:t,style:l,lastElement:a,shouldExpandNode:r,clickToExpandNode:n,level:i,outerRef:o,beforeExpandChange:d}=e;return K({field:s,value:t,lastElement:a||!1,level:i,openBracket:"{",closeBracket:"}",style:l,shouldExpandNode:r,clickToExpandNode:n,data:Object.keys(t).map(e=>[e,t[e]]),outerRef:o,beforeExpandChange:d})}function $(e){let{field:s,value:t,style:l,lastElement:a,level:r,shouldExpandNode:n,clickToExpandNode:i,outerRef:o,beforeExpandChange:d}=e;return K({field:s,value:t,lastElement:a||!1,level:r,openBracket:"[",closeBracket:"]",style:l,shouldExpandNode:n,clickToExpandNode:i,data:t.map(e=>[void 0,e]),outerRef:o,beforeExpandChange:d})}function Y(e){let s,{field:l,value:a,style:r,lastElement:n}=e,i=r.otherValue;if(null===a)s="null",i=r.nullValue;else if(void 0===a)s="undefined",i=r.undefinedValue;else if("string"==typeof a||a instanceof String){var o;o=!r.noQuotesForStringValues,s=r.stringifyStringValues?JSON.stringify(a):o?`"${a}"`:a,i=r.stringValue}else if("boolean"==typeof a||a instanceof Boolean)s=a?"true":"false",i=r.booleanValue;else if("number"==typeof a||a instanceof Number)s=a.toString(),i=r.numberValue;else"bigint"==typeof a||a instanceof BigInt?(s=`${a.toString()}n`,i=r.numberValue):s=P(a)?a.toISOString():B(a)?"function() { }":a.toString();return(0,t.createElement)("div",{className:r.basicChildStyle,role:"treeitem","aria-selected":void 0},(l||""===l)&&(0,t.createElement)("span",{className:r.label},q(l,r.quotesForFieldNames),":"),(0,t.createElement)("span",{className:i},s),!n&&(0,t.createElement)("span",{className:r.punctuation},","))}function V(e){let s=e.value;return Array.isArray(s)?(0,t.createElement)($,Object.assign({},e)):!F(s)||P(s)||B(s)?(0,t.createElement)(Y,Object.assign({},e)):(0,t.createElement)(H,Object.assign({},e))}let W={container:"_2IvMF _GzYRV",basicChildStyle:"_2bkNM",childFieldsContainer:"_1BXBN",label:"_1MGIk",clickableLabel:"_2YKJg _1MGIk _1MFti",nullValue:"_2T6PJ",undefinedValue:"_1Gho6",stringValue:"_vGjyY",booleanValue:"_3zQKs",numberValue:"_1bQdo",otherValue:"_1xvuR",punctuation:"_3uHL6 _3eOF8",collapseIcon:"_oLqym _f10Tu _1MFti _1LId0",expandIcon:"_2AXVT _f10Tu _1MFti _1UmXx",collapsedContent:"_2KJWg _1pNG9 _1MFti",noQuotesForStringValues:!1,quotesForFieldNames:!1,ariaLables:{collapseJson:"collapse JSON",expandJson:"expand JSON"},stringifyStringValues:!1},G=()=>!0,U=e=>{let{data:s,style:l=W,shouldExpandNode:a=G,clickToExpandNode:r=!1,beforeExpandChange:n,compactTopLevel:i,...o}=e,d=(0,t.useRef)(null);return(0,t.createElement)("div",Object.assign({"aria-label":"JSON view"},o,{className:l.container,ref:d,role:"tree"}),i&&F(s)?Object.entries(s).map(e=>{let[s,i]=e;return(0,t.createElement)(V,{key:s,field:s,value:i,style:{...W,...l},lastElement:!0,level:1,shouldExpandNode:a,clickToExpandNode:r,beforeExpandChange:n,outerRef:d})}):(0,t.createElement)(V,{value:s,style:{...W,...l},lastElement:!0,level:0,shouldExpandNode:a,clickToExpandNode:r,outerRef:d,beforeExpandChange:n}))};e.s(["JsonView",()=>U,"defaultStyles",()=>W],867612);let{Text:J}=h.Typography;function Q({data:e}){return e?(0,s.jsx)("div",{style:{maxHeight:A.JSON_MAX_HEIGHT,overflow:"auto",background:A.COLOR_BG_LIGHT,padding:A.SPACING_LARGE,borderRadius:4},children:(0,s.jsx)("div",{className:"[&_[role='tree']]:bg-white [&_[role='tree']]:text-slate-900",children:(0,s.jsx)(U,{data:e,style:W,clickToExpandNode:!0})})}):(0,s.jsx)(J,{type:"secondary",children:"No data"})}function X(e){if("string"==typeof e)try{return JSON.parse(e)}catch{}return e}function Z(e){return Array.isArray(e)?e:e?[e]:[]}function ee(e){if("string"==typeof e)try{return JSON.parse(e)}catch{}return e}var es=e.i(366308),et=e.i(755151),el=e.i(291542);let{Text:ea}=h.Typography;function er({tool:e}){let t=Object.entries(e.parameters?.properties||{}).map(([s,t])=>({key:s,name:s,type:t.type||"any",description:t.description||"-",required:e.parameters?.required?.includes(s)||!1})),l=[{title:"Parameter",dataIndex:"name",key:"name",render:(e,t)=>(0,s.jsxs)(ea,{code:!0,children:[e,t.required&&(0,s.jsx)(ea,{type:"danger",children:"*"})]})},{title:"Type",dataIndex:"type",key:"type",render:e=>(0,s.jsx)(ea,{code:!0,style:{color:"#1890ff"},children:e})},{title:"Description",dataIndex:"description",key:"description",render:e=>(0,s.jsx)(ea,{type:"secondary",children:e})}];return(0,s.jsxs)("div",{children:[e.description&&(0,s.jsx)("div",{style:{marginBottom:16},children:(0,s.jsx)(ea,{style:{lineHeight:1.6},children:e.description})}),t.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)(ea,{type:"secondary",style:{fontSize:12,display:"block",marginBottom:8},children:"Parameters"}),(0,s.jsx)(el.Table,{dataSource:t,columns:l,pagination:!1,size:"small",bordered:!0})]}),e.called&&e.callData&&(0,s.jsxs)("div",{style:{marginTop:16},children:[(0,s.jsx)(ea,{type:"secondary",style:{fontSize:12,display:"block",marginBottom:8},children:"Called With"}),(0,s.jsx)("div",{style:{background:"#f6ffed",border:"1px solid #b7eb8f",borderRadius:4,padding:12},children:(0,s.jsx)("pre",{style:{margin:0,fontSize:12,whiteSpace:"pre-wrap",wordBreak:"break-word"},children:JSON.stringify(e.callData.arguments,null,2)})})]})]})}function en({tool:e}){let t={type:"function",function:{name:e.name,description:e.description,parameters:e.parameters}};return(0,s.jsx)("pre",{style:{margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word",fontSize:12,background:"#fafafa",padding:12,borderRadius:4,maxHeight:300,overflow:"auto"},children:JSON.stringify(t,null,2)})}let{Text:ei}=h.Typography;function eo({tool:e}){let[l,a]=(0,t.useState)("formatted");return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:12},children:[(0,s.jsx)(ei,{type:"secondary",style:{fontSize:12},children:"Description"}),(0,s.jsxs)(_.Radio.Group,{size:"small",value:l,onChange:e=>a(e.target.value),children:[(0,s.jsx)(_.Radio.Button,{value:"formatted",children:"Formatted"}),(0,s.jsx)(_.Radio.Button,{value:"json",children:"JSON"})]})]}),"formatted"===l?(0,s.jsx)(er,{tool:e}):(0,s.jsx)(en,{tool:e})]})}let{Text:ed}=h.Typography;function ec({tool:e}){let[l,a]=(0,t.useState)(!1);return(0,s.jsxs)("div",{style:{border:"1px solid #f0f0f0",borderRadius:8,overflow:"hidden"},children:[(0,s.jsxs)("div",{onClick:()=>a(!l),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",cursor:"pointer",background:l?"#fafafa":"#fff",transition:"background 0.2s"},children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,s.jsx)(es.ToolOutlined,{style:{color:"#8c8c8c",fontSize:14}}),(0,s.jsxs)(ed,{style:{fontSize:14},children:[e.index,". ",e.name]})]}),(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,s.jsx)(j.Tag,{color:e.called?"blue":"default",children:e.called?"called":"not called"}),l?(0,s.jsx)(et.DownOutlined,{style:{fontSize:12,color:"#8c8c8c"}}):(0,s.jsx)(o.RightOutlined,{style:{fontSize:12,color:"#8c8c8c"}})]})]}),l&&(0,s.jsx)("div",{style:{padding:"16px",borderTop:"1px solid #f0f0f0",background:"#fff"},children:(0,s.jsx)(eo,{tool:e})})]})}let{Text:em}=h.Typography;function eu({log:e}){let t=function(e){let s,t=!(s=ee(e.proxy_server_request||e.messages))||Array.isArray(s)?[]:"object"==typeof s&&s.tools&&Array.isArray(s.tools)?s.tools:[];if(0===t.length)return[];let l=function(e){let s=ee(e.response);if(!s||"object"!=typeof s)return[];let t=s.choices;if(Array.isArray(t)&&t.length>0){let e=t[0].message;if(e&&Array.isArray(e.tool_calls))return e.tool_calls}if(Array.isArray(s.content)){let e=s.content.filter(e=>"tool_use"===e.type);if(e.length>0)return e.map(e=>({id:e.id,type:"function",function:{name:e.name,arguments:JSON.stringify(e.input||{})}}))}return[]}(e),a=new Set(l.map(e=>e.function?.name).filter(Boolean)),r=new Map;return l.forEach(e=>{let s=e.function?.name;s&&r.set(s,{id:e.id,name:s,arguments:function(e){try{return JSON.parse(e)}catch{return{}}}(e.function?.arguments||"{}")})}),t.map((e,s)=>{let t=e.function?.name||e.name||`Tool ${s+1}`;return{index:s+1,name:t,description:e.function?.description||e.description||"",parameters:e.function?.parameters||e.input_schema||{},called:a.has(t),callData:r.get(t)}})}(e);if(0===t.length)return null;let l=t.length,a=t.filter(e=>e.called).length,r=t.slice(0,2).map(e=>e.name).join(", "),n=t.length>2;return(0,s.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,s.jsx)(v.Collapse,{expandIconPosition:"start",items:[{key:"1",label:(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Tools"}),(0,s.jsxs)(em,{type:"secondary",style:{fontSize:14},children:[l," provided, ",a," called"]}),(0,s.jsxs)(em,{type:"secondary",style:{fontSize:14},children:["â€¢ ",r,n&&"..."]})]}),children:(0,s.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:t.map(e=>(0,s.jsx)(ec,{tool:e},e.name))})}]})})}let ex=e=>{if(!e)return{};if("string"==typeof e)try{return JSON.parse(e)}catch{return{raw:e}}return e};var ep=e.i(998573);e.i(247167);var eh=e.i(931067);let eg={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 512a48 48 0 1096 0 48 48 0 10-96 0zm200 0a48 48 0 1096 0 48 48 0 10-96 0zm-400 0a48 48 0 1096 0 48 48 0 10-96 0zm661.2-173.6c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 00-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 00-142 96.5c-40.9 41.3-73 89.3-95.2 142.8-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 00112 714v152a46 46 0 0046 46h152.1A449.4 449.4 0 00510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 00142.8-95.2c41.3-40.9 73.8-88.7 96.5-142 23.6-55.2 35.6-113.9 35.9-174.5.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8 69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9 44.6 18.7 84.6 45.6 119 80 34.3 34.3 61.3 74.4 80 119 19.4 46.2 29.1 95.2 28.9 145.8-.6 99.6-39.7 192.9-110.1 262.7z"}}]},name:"message",theme:"outlined"};var ef=e.i(9583),ej=t.forwardRef(function(e,s){return t.createElement(ef.default,(0,eh.default)({},e,{ref:s,icon:eg}))}),ey=e.i(624001);let{Text:eb}=h.Typography;function ev({type:e,tokens:t,cost:a,onCopy:r,isCollapsed:i,onToggleCollapse:o}){return(0,s.jsxs)("div",{onClick:o,style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 16px",borderBottom:i?"none":"1px solid #f0f0f0",background:"#fafafa",cursor:o?"pointer":"default",transition:"background 0.15s ease"},onMouseEnter:e=>{o&&(e.currentTarget.style.background="#f5f5f5")},onMouseLeave:e=>{e.currentTarget.style.background="#fafafa"},children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:16},children:[o&&(0,s.jsx)("div",{style:{display:"flex",alignItems:"center"},children:i?(0,s.jsx)(et.DownOutlined,{style:{fontSize:10,color:"#8c8c8c"}}):(0,s.jsx)(ey.UpOutlined,{style:{fontSize:10,color:"#8c8c8c"}})}),(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:["input"===e?(0,s.jsx)(ej,{style:{color:"#8c8c8c",fontSize:14}}):(0,s.jsx)("span",{style:{fontSize:14,filter:"grayscale(1)",opacity:.6},children:"âœ¨"}),(0,s.jsx)(eb,{style:{fontWeight:500,fontSize:14},children:"input"===e?"Input":"Output"})]}),void 0!==t&&(0,s.jsxs)(eb,{type:"secondary",style:{fontSize:12},children:["Tokens: ",t.toLocaleString()]}),void 0!==a&&(0,s.jsxs)(eb,{type:"secondary",style:{fontSize:12},children:["Cost: $",a.toFixed(6)]})]}),(0,s.jsx)(D.Tooltip,{title:"Copy",children:(0,s.jsx)(l.Button,{type:"text",size:"small",icon:(0,s.jsx)(n.CopyOutlined,{}),onClick:e=>{e.stopPropagation(),r()}})})]})}let{Text:e_}=h.Typography;function eN({label:e,content:l,defaultExpanded:a=!1}){let[r,n]=(0,t.useState)(a),[i,d]=(0,t.useState)(!1),c=l?.length||0;return l&&0!==c?(0,s.jsxs)("div",{style:{marginBottom:8},children:[(0,s.jsxs)("div",{onClick:()=>n(!r),onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),style:{display:"flex",alignItems:"center",gap:6,cursor:"pointer",padding:"4px 0",borderRadius:4,background:i?"#f5f5f5":"transparent",transition:"background 0.15s ease",marginBottom:4*!!r},children:[r?(0,s.jsx)(et.DownOutlined,{style:{fontSize:10,color:"#8c8c8c"}}):(0,s.jsx)(o.RightOutlined,{style:{fontSize:10,color:"#8c8c8c"}}),(0,s.jsx)(e_,{type:"secondary",style:{fontSize:10,letterSpacing:"0.5px",textTransform:"uppercase"},children:e}),(0,s.jsxs)(e_,{type:"secondary",style:{fontSize:10},children:["(",c.toLocaleString()," chars)"]})]}),(0,s.jsx)("div",{style:{maxHeight:r?"2000px":"0px",overflow:"hidden",transition:"max-height 0.2s ease-out, opacity 0.2s ease-out",opacity:+!!r},children:(0,s.jsx)("div",{style:{paddingLeft:16,fontSize:13,lineHeight:1.7,color:"#262626",borderLeft:"1px solid #f0f0f0",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:l})})]}):null}let{Text:ew}=h.Typography;function eS({tool:e,compact:t=!1}){return(0,s.jsxs)("div",{style:{background:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:6,padding:t?"6px 10px":"10px 14px",marginTop:8,fontFamily:"monospace",fontSize:12,position:"relative"},children:[(0,s.jsx)("div",{style:{position:"absolute",top:-8,left:12,background:"#fff",padding:"0 6px",fontSize:10,color:"#8c8c8c",border:"1px solid #e9ecef",borderRadius:3},children:"function"}),(0,s.jsx)(ew,{strong:!0,style:{fontSize:13,display:"block",marginBottom:6},children:e.name}),Object.keys(e.arguments).length>0&&(0,s.jsx)("div",{children:Object.entries(e.arguments).map(([e,t])=>(0,s.jsxs)("div",{style:{marginBottom:2},children:[(0,s.jsxs)(ew,{type:"secondary",style:{fontSize:12},children:[e,":"," "]}),(0,s.jsx)(ew,{style:{fontSize:12},children:JSON.stringify(t)})]},e))})]})}let{Text:ek}=h.Typography;function eC({label:e,content:t,toolCalls:l,isCompact:a=!1}){let r=t&&"null"!==t&&t.length>0?t:null,n=l&&l.length>0;return r||n?(0,s.jsxs)("div",{style:{marginBottom:8*!!a},children:[(0,s.jsx)(ek,{type:"secondary",style:{fontSize:10,letterSpacing:"0.5px",textTransform:"uppercase",display:"block",marginBottom:3},children:e}),r&&(0,s.jsx)("div",{style:{fontSize:13,lineHeight:1.7,color:"#262626",whiteSpace:"pre-wrap",wordBreak:"break-word",marginBottom:6*!!n},children:r}),n&&(0,s.jsx)("div",{children:l.map((e,t)=>(0,s.jsx)(eS,{tool:e,compact:a},e.id||t))})]}):null}let{Text:eT}=h.Typography;function eM({messages:e}){let[l,a]=(0,t.useState)(!1),[r,n]=(0,t.useState)(!1);return 0===e.length?null:(0,s.jsxs)("div",{style:{marginBottom:8},children:[(0,s.jsxs)("div",{onClick:()=>a(!l),onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),style:{display:"flex",alignItems:"center",gap:6,cursor:"pointer",padding:"4px 0",borderRadius:4,background:r?"#f5f5f5":"transparent",transition:"background 0.15s ease",marginBottom:4*!!l},children:[l?(0,s.jsx)(et.DownOutlined,{style:{fontSize:10,color:"#8c8c8c"}}):(0,s.jsx)(o.RightOutlined,{style:{fontSize:10,color:"#8c8c8c"}}),(0,s.jsxs)(eT,{type:"secondary",style:{fontSize:10,letterSpacing:"0.5px",textTransform:"uppercase"},children:["HISTORY (",e.length," message",1!==e.length?"s":"",")"]})]}),(0,s.jsx)("div",{style:{maxHeight:l?"2000px":"0px",overflow:"hidden",transition:"max-height 0.2s ease-out, opacity 0.2s ease-out",opacity:+!!l},children:(0,s.jsx)("div",{style:{paddingLeft:16,borderLeft:"1px solid #f0f0f0"},children:e.map((e,t)=>(0,s.jsx)(eC,{label:e.role.toUpperCase(),content:e.content,toolCalls:e.toolCalls,isCompact:!0},t))})})]})}function eL({messages:e,promptTokens:l,inputCost:a}){let[r,n]=(0,t.useState)(!1);if(0===e.length)return null;let i=e.find(e=>"system"===e.role),o=e.filter(e=>"system"!==e.role),d=o.length>0?o[o.length-1]:null,c=o.slice(0,-1);return(0,s.jsxs)("div",{style:{border:"1px solid #f0f0f0",borderRadius:6,marginBottom:8,overflow:"hidden"},children:[(0,s.jsx)(ev,{type:"input",tokens:l,cost:a,onCopy:()=>{let e=d?.content||"";navigator.clipboard.writeText(e),ep.message.success("Input copied")},isCollapsed:r,onToggleCollapse:()=>n(!r)}),(0,s.jsx)("div",{style:{maxHeight:r?"0px":"10000px",overflow:"hidden",transition:"max-height 0.3s ease-out, opacity 0.3s ease-out",opacity:+!r},children:(0,s.jsxs)("div",{style:{padding:"12px 16px"},children:[i&&(0,s.jsx)(eN,{label:"SYSTEM",content:i.content,defaultExpanded:!!(i.content&&i.content.length<200)}),c.length>0&&(0,s.jsx)(eM,{messages:c}),d&&(0,s.jsx)(eC,{label:d.role.toUpperCase(),content:d.content,toolCalls:d.toolCalls})]})})]})}let{Text:eE}=h.Typography;function eD({message:e,completionTokens:l,outputCost:a}){let[r,n]=(0,t.useState)(!1),i=()=>{if(!e)return;let s=e.content||"";navigator.clipboard.writeText(s),ep.message.success("Output copied")};return e?(0,s.jsxs)("div",{style:{border:"1px solid #f0f0f0",borderRadius:6,overflow:"hidden"},children:[(0,s.jsx)(ev,{type:"output",tokens:l,cost:a,onCopy:i,isCollapsed:r,onToggleCollapse:()=>n(!r)}),(0,s.jsx)("div",{style:{maxHeight:r?"0px":"10000px",overflow:"hidden",transition:"max-height 0.3s ease-out, opacity 0.3s ease-out",opacity:+!r},children:(0,s.jsx)("div",{style:{padding:"12px 16px"},children:(0,s.jsx)(eC,{label:"ASSISTANT",content:e.content,toolCalls:e.toolCalls})})})]}):(0,s.jsxs)("div",{style:{border:"1px solid #f0f0f0",borderRadius:6,overflow:"hidden"},children:[(0,s.jsx)(ev,{type:"output",tokens:l,cost:a,onCopy:i,isCollapsed:r,onToggleCollapse:()=>n(!r)}),(0,s.jsx)("div",{style:{maxHeight:r?"0px":"10000px",overflow:"hidden",transition:"max-height 0.3s ease-out, opacity 0.3s ease-out",opacity:+!r},children:(0,s.jsx)("div",{style:{padding:"12px 16px"},children:(0,s.jsx)(eE,{type:"secondary",style:{fontSize:13,fontStyle:"italic"},children:"No response data available"})})})]})}function eA({request:e,response:t,metrics:l}){let a,r,n,{requestMessages:i,responseMessage:o}=(a=[],e?.messages&&Array.isArray(e.messages)&&e.messages.forEach(e=>{let s;a.push({role:e.role||"user",content:"string"==typeof(s=e.content)?s:Array.isArray(s)?s.map(e=>"string"==typeof e?e:"text"===e.type?e.text:"image_url"===e.type?"[Image]":JSON.stringify(e)).join("\n"):JSON.stringify(s),toolCallId:e.tool_call_id})}),r=null,(n=t?.choices?.[0]?.message)&&(r={role:n.role||"assistant",content:n.content||"",toolCalls:(e=>{if(e&&Array.isArray(e))return e.map(e=>({id:e.id||"",name:e.function?.name||"unknown",arguments:ex(e.function?.arguments)}))})(n.tool_calls)}),{requestMessages:a,responseMessage:r});return(0,s.jsxs)("div",{children:[(0,s.jsx)(eL,{messages:i,promptTokens:l?.prompt_tokens,inputCost:l?.input_cost}),(0,s.jsx)(eD,{message:o,completionTokens:l?.completion_tokens,outputCost:l?.output_cost})]})}let{Text:eI}=h.Typography;function eR({logEntry:e,onOpenSettings:t,isLoadingDetails:l=!1,accessToken:a}){var r,n;let i=e.metadata||{},o="failure"===i.status,d=o?i.error_information:null,c=!!(r=e.messages)&&(Array.isArray(r)?r.length>0:"object"==typeof r&&Object.keys(r).length>0),m=!!(n=e.response)&&Object.keys(X(n)).length>0,u=!c&&!m&&!o&&!l,x=i?.guardrail_information,p=Z(x),h=p.length>0,j=p.reduce((e,s)=>{let t=s?.masked_entity_count;return t?e+Object.values(t).reduce((e,s)=>"number"==typeof s?e+s:e,0):e},0),y=0===p.length?"-":1===p.length?p[0]?.guardrail_name??"-":`${p.length} guardrails`,v=i.vector_store_request_metadata&&Array.isArray(i.vector_store_request_metadata)&&i.vector_store_request_metadata.length>0;return(0,s.jsxs)("div",{style:{padding:`${A.DRAWER_CONTENT_PADDING} ${A.DRAWER_CONTENT_PADDING} 0`},children:[o&&d&&(0,s.jsx)(b.Alert,{type:"error",showIcon:!0,message:"Request Failed",description:(0,s.jsx)(ez,{errorInfo:d}),className:"mb-6"}),e.request_tags&&Object.keys(e.request_tags).length>0&&(0,s.jsx)(eO,{tags:e.request_tags}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,s.jsx)(f.Card,{title:"Request Details",size:"small",bordered:!1,style:{marginBottom:0},children:(0,s.jsxs)(g.Descriptions,{column:2,size:"small",children:[(0,s.jsx)(g.Descriptions.Item,{label:"Model",children:e.model}),(0,s.jsx)(g.Descriptions.Item,{label:"Provider",children:e.custom_llm_provider||"-"}),(0,s.jsx)(g.Descriptions.Item,{label:"Call Type",children:e.call_type}),(0,s.jsx)(g.Descriptions.Item,{label:"Model ID",children:(0,s.jsx)(R,{value:e.model_id})}),(0,s.jsx)(g.Descriptions.Item,{label:"API Base",children:(0,s.jsx)(R,{value:e.api_base,maxWidth:A.API_BASE_MAX_WIDTH})}),e.requester_ip_address&&(0,s.jsx)(g.Descriptions.Item,{label:"IP Address",children:e.requester_ip_address}),h&&(0,s.jsx)(g.Descriptions.Item,{label:"Guardrail",children:(0,s.jsx)(eP,{label:y,maskedCount:j})})]})})}),(0,s.jsx)(eF,{logEntry:e,metadata:i}),(0,s.jsx)(T.CostBreakdownViewer,{costBreakdown:i?.cost_breakdown,totalSpend:e.spend??0,promptTokens:e.prompt_tokens,completionTokens:e.completion_tokens,cacheHit:e.cache_hit}),(0,s.jsx)(eu,{log:e}),u&&(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)(M.ConfigInfoMessage,{show:u,onOpenSettings:t})}),l?(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6 p-8 text-center",children:[(0,s.jsx)(w.Spin,{size:"default"}),(0,s.jsx)("div",{style:{marginTop:8,color:"#999"},children:"Loading request & response data..."})]}):(0,s.jsx)(eB,{hasResponse:m,hasError:o,getRawRequest:()=>X(e.proxy_server_request||e.messages),getFormattedResponse:()=>o&&d?{error:{message:d.error_message||"An error occurred",type:d.error_class||"error",code:d.error_code||"unknown",param:null}}:X(e.response),logEntry:e}),h&&(0,s.jsx)("div",{id:"guardrail-section",children:(0,s.jsx)(C.default,{data:x,accessToken:a??null,logEntry:{request_id:e.request_id,user:e.user,model:e.model,startTime:e.startTime,metadata:e.metadata}})}),v&&(0,s.jsx)(E,{data:i.vector_store_request_metadata}),e.metadata&&Object.keys(e.metadata).length>0&&(0,s.jsx)(eK,{metadata:e.metadata}),(0,s.jsx)("div",{style:{height:A.DRAWER_CONTENT_PADDING}})]})}function ez({errorInfo:e}){return(0,s.jsxs)("div",{children:[e.error_code&&(0,s.jsxs)("div",{children:[(0,s.jsx)(eI,{strong:!0,children:"Error Code:"})," ",e.error_code]}),e.error_message&&(0,s.jsxs)("div",{children:[(0,s.jsx)(eI,{strong:!0,children:"Message:"})," ",e.error_message]})]})}function eO({tags:e}){return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden p-4 mb-6",children:[(0,s.jsx)(eI,{strong:!0,style:{display:"block",marginBottom:8,fontSize:16},children:"Tags"}),(0,s.jsx)(N.Space,{size:A.SPACING_MEDIUM,wrap:!0,children:Object.entries(e).map(([e,t])=>(0,s.jsxs)(j.Tag,{children:[e,": ",String(t)]},e))})]})}function eP({label:e,maskedCount:t}){return(0,s.jsxs)(N.Space,{size:A.SPACING_MEDIUM,children:[(0,s.jsx)("a",{onClick:()=>{let e=document.getElementById("guardrail-section");e&&e.scrollIntoView({behavior:"smooth"})},style:{cursor:"pointer"},children:e}),t>0&&(0,s.jsxs)(j.Tag,{color:"blue",children:[t," masked"]})]})}function eF({logEntry:e,metadata:t}){let l=e.cache_hit||t?.additional_usage_values?.cache_read_input_tokens&&t.additional_usage_values.cache_read_input_tokens>0,a=String(e.cache_hit??"None"),r="true"===a.toLowerCase()?"green":"false"===a.toLowerCase()?"red":"default";return(0,s.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,s.jsx)(f.Card,{title:"Metrics",size:"small",style:{marginBottom:0},children:(0,s.jsxs)(g.Descriptions,{column:2,size:"small",children:[(0,s.jsx)(g.Descriptions.Item,{label:"Tokens",children:(0,s.jsx)(O,{prompt:e.prompt_tokens,completion:e.completion_tokens,total:e.total_tokens})}),(0,s.jsxs)(g.Descriptions.Item,{label:"Cost",children:["$",(0,k.formatNumberWithCommas)(e.spend||0,8)]}),(0,s.jsxs)(g.Descriptions.Item,{label:"Duration",children:[e.duration?.toFixed(3)," s"]}),l&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.Descriptions.Item,{label:"Cache Hit",children:(0,s.jsx)(j.Tag,{color:r,children:a})}),t?.additional_usage_values?.cache_read_input_tokens>0&&(0,s.jsx)(g.Descriptions.Item,{label:"Cache Read Tokens",children:(0,k.formatNumberWithCommas)(t.additional_usage_values.cache_read_input_tokens)}),t?.additional_usage_values?.cache_creation_input_tokens>0&&(0,s.jsx)(g.Descriptions.Item,{label:"Cache Creation Tokens",children:(0,k.formatNumberWithCommas)(t.additional_usage_values.cache_creation_input_tokens)})]}),t?.litellm_overhead_time_ms!==void 0&&null!==t.litellm_overhead_time_ms&&(0,s.jsxs)(g.Descriptions.Item,{label:"Silinex Overhead",children:[t.litellm_overhead_time_ms.toFixed(2)," ms"]}),(0,s.jsx)(g.Descriptions.Item,{label:"Retries",children:t?.attempted_retries!==void 0&&t?.attempted_retries!==null?t.attempted_retries>0?(0,s.jsxs)(s.Fragment,{children:[t.attempted_retries,void 0!==t.max_retries&&null!==t.max_retries?` / ${t.max_retries}`:""]}):(0,s.jsx)(j.Tag,{color:"green",children:"None"}):"-"}),(0,s.jsx)(g.Descriptions.Item,{label:"Start Time",children:(0,S.default)(e.startTime).format("YYYY-MM-DDTHH:mm:ss.SSS[Z]")}),(0,s.jsx)(g.Descriptions.Item,{label:"End Time",children:(0,S.default)(e.endTime).format("YYYY-MM-DDTHH:mm:ss.SSS[Z]")})]})})})}function eB({hasResponse:e,hasError:l,getRawRequest:a,getFormattedResponse:r,logEntry:n}){let[i,o]=(0,t.useState)(A.TAB_REQUEST),[d,c]=(0,t.useState)("pretty"),m=n.spend??0,u=n.prompt_tokens||0,x=n.completion_tokens||0,p=u+x,h=n.metadata?.cost_breakdown,g=h?.input_cost!==void 0&&h?.output_cost!==void 0,f=g?h.input_cost??0:p>0?m*u/p:0,j=g?h.output_cost??0:p>0?m*x/p:0;return(0,s.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,s.jsx)(v.Collapse,{defaultActiveKey:["1"],expandIconPosition:"start",items:[{key:"1",label:(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},onClick:e=>{e.target.closest(".ant-radio-group")&&e.stopPropagation()},children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",style:{margin:0},children:"Request & Response"}),(0,s.jsxs)(_.Radio.Group,{size:"small",value:d,onChange:e=>c(e.target.value),children:[(0,s.jsx)(_.Radio.Button,{value:"pretty",children:"Pretty"}),(0,s.jsx)(_.Radio.Button,{value:"json",children:"JSON"})]})]}),children:(0,s.jsx)("div",{children:"pretty"===d?(0,s.jsx)(eA,{request:a(),response:r(),metrics:{prompt_tokens:u,completion_tokens:x,input_cost:f,output_cost:j}}):(0,s.jsx)(y.Tabs,{activeKey:i,onChange:e=>o(e),tabBarExtraContent:(0,s.jsx)(eI,{copyable:{text:JSON.stringify(i===A.TAB_REQUEST?a():r(),null,2),tooltips:["Copy JSON","Copied!"]},disabled:i===A.TAB_RESPONSE&&!e&&!l}),items:[{key:A.TAB_REQUEST,label:"Request",children:(0,s.jsx)("div",{style:{paddingTop:A.SPACING_XLARGE,paddingBottom:A.SPACING_XLARGE},children:(0,s.jsx)(Q,{data:a(),mode:"formatted"})})},{key:A.TAB_RESPONSE,label:"Response",children:(0,s.jsx)("div",{style:{paddingTop:A.SPACING_XLARGE,paddingBottom:A.SPACING_XLARGE},children:e||l?(0,s.jsx)(Q,{data:r(),mode:"formatted"}):(0,s.jsx)("div",{style:{textAlign:"center",padding:20,color:"#999",fontStyle:"italic"},children:"Response data not available"})})}]})})}]})})}function eq({guardrailEntries:e}){let t=e.every(e=>{let s=e?.guardrail_status||e?.status;return"pass"===s||"passed"===s||"success"===s});return(0,s.jsx)("div",{style:{textAlign:"left",marginBottom:12},children:(0,s.jsxs)("div",{onClick:()=>{let e=document.getElementById("guardrail-section");e&&e.scrollIntoView({behavior:"smooth"})},style:{display:"inline-flex",alignItems:"center",gap:6,padding:"4px 12px",borderRadius:16,cursor:"pointer",fontSize:13,fontWeight:500,backgroundColor:t?"#f0fdf4":"#fef2f2",color:t?"#15803d":"#b91c1c",border:`1px solid ${t?"#bbf7d0":"#fecaca"}`},children:[t?"âœ“":"âœ—"," ",e.length," guardrail",1!==e.length?"s":""," evaluated",(0,s.jsx)("span",{style:{fontSize:11,opacity:.7},children:"â†“"})]})})}function eK({metadata:e}){return(0,s.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,s.jsx)(v.Collapse,{defaultActiveKey:["1"],expandIconPosition:"start",items:[{key:"1",label:(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Metadata"}),children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:8},children:(0,s.jsx)(eI,{copyable:{text:JSON.stringify(e,null,2),tooltips:["Copy Metadata","Copied!"]}})}),(0,s.jsx)("pre",{style:{maxHeight:A.METADATA_MAX_HEIGHT,overflowY:"auto",fontSize:A.FONT_SIZE_SMALL,fontFamily:A.FONT_FAMILY_MONO,whiteSpace:"pre-wrap",wordBreak:"break-all",margin:0},children:JSON.stringify(e,null,2)})]})}]})})}var eH=e.i(764205),e$=e.i(266027),eY=e.i(135214);function eV({row:e,isSelected:t,onClick:l}){let a=m.MCP_CALL_TYPES.includes(e.call_type),r=null!=e.duration?e.duration.toFixed(3):e.startTime&&e.endTime?((Date.parse(e.endTime)-Date.parse(e.startTime))/1e3).toFixed(3):"-";return(0,s.jsxs)("button",{type:"button",className:`w-full text-left pl-8 pr-2 py-1 transition-colors ${t?"bg-blue-50":"hover:bg-slate-100"}`,onClick:l,children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[a?(0,s.jsx)(c.Wrench,{size:12,className:"text-slate-500 flex-shrink-0"}):(0,s.jsx)(d.Sparkles,{size:12,className:"text-slate-500 flex-shrink-0"}),(0,s.jsx)("span",{className:"text-xs font-medium text-slate-900 truncate",children:(0,u.getEventDisplayName)(e.call_type,e.model)})]}),(0,s.jsxs)("div",{className:"text-[10px] text-slate-500 mt-0 flex items-center gap-1.5 font-mono",children:[(0,s.jsxs)("span",{children:[r,"s"]}),e.spend?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"Â·"}),(0,s.jsx)("span",{children:(0,k.getSpendString)(e.spend)})]}):null,e.total_tokens?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"Â·"}),(0,s.jsxs)("span",{children:[e.total_tokens," tok"]})]}):null]})]})}function eW({open:e,onClose:d,logEntry:c,sessionId:u,accessToken:h,onOpenSettings:g,allLogs:f=[],onSelectLog:j,startTime:y}){let b=!!u,[v,_]=(0,t.useState)(null),[N,w]=(0,t.useState)(!1),[S,C]=(0,t.useState)(!1),{data:T=[]}=(0,e$.useQuery)({queryKey:["sessionLogs",u],queryFn:async()=>{if(!u||!h)return[];let e=await (0,eH.sessionSpendLogsCall)(h,u);return(e.data||e||[]).map(e=>({...e,duration:(Date.parse(e.endTime)-Date.parse(e.startTime))/1e3})).sort((e,s)=>{let t=+!!m.MCP_CALL_TYPES.includes(e.call_type),l=+!!m.MCP_CALL_TYPES.includes(s.call_type);return t!==l?t-l:new Date(e.startTime).getTime()-new Date(s.startTime).getTime()})},enabled:!!(e&&b&&u&&h)}),M=(0,t.useMemo)(()=>b?T.length?v?T.find(e=>e.request_id===v)||T[0]:c?.request_id&&T.find(e=>e.request_id===c.request_id)||T[0]:null:c,[b,c,v,T]);(0,t.useEffect)(()=>{b&&T.length&&(v&&T.some(e=>e.request_id===v)||_(c?.request_id&&T.some(e=>e.request_id===c.request_id)?c.request_id:T[0].request_id))},[b,c,v,T]),(0,t.useEffect)(()=>{e?w(!1):(b&&_(null),C(!1))},[e,b]);let{selectNextLog:L,selectPreviousLog:E}=(0,p.useKeyboardNavigation)({isOpen:e,currentLog:M,allLogs:b?T:f,onClose:d,onSelectLog:e=>{b&&_(e.request_id),j?.(e)}}),D=((e,s,t)=>{let{accessToken:l}=(0,eY.default)();return(0,e$.useQuery)({queryKey:["logDetails",e,s,l],queryFn:async()=>l&&e&&s?await (0,eH.uiSpendLogDetailsCall)(l,e,s):null,enabled:t&&!!l&&!!e&&!!s,staleTime:6e5,gcTime:6e5})})(M?.request_id,y,e&&!!M?.request_id),I=D.data,R=D.isLoading,z=(0,t.useMemo)(()=>M?{...M,messages:I?.messages||M.messages,response:I?.response||M.response,proxy_server_request:I?.proxy_server_request||M.proxy_server_request}:null,[M,I]),O=M?.metadata||{},P="failure"===O.status?"Failure":"Success",F="failure"===O.status?"error":"success",B=O?.user_api_key_team_alias||"default",q=T.reduce((e,s)=>e+(s.spend||0),0),K=T.length>0?new Date(Math.min(...T.map(e=>new Date(e.startTime).getTime()))):null,H=T.length>0?new Date(Math.max(...T.map(e=>new Date(e.endTime).getTime()))):null,$=K&&H?((H.getTime()-K.getTime())/1e3).toFixed(2):"0.00",Y=T.filter(e=>!m.MCP_CALL_TYPES.includes(e.call_type)).length,V=T.filter(e=>m.MCP_CALL_TYPES.includes(e.call_type)).length,W=b?T:M?[M]:[],G=b?u||"":M?.request_id||"",U=G.length>14?`${G.slice(0,11)}...`:G,J=async()=>{if(G)try{await navigator.clipboard.writeText(G),C(!0),setTimeout(()=>C(!1),1200)}catch{}};return M&&z?(0,s.jsx)(a.Drawer,{title:null,placement:"right",onClose:d,open:e,width:A.DRAWER_WIDTH,closable:!1,mask:!0,maskClosable:!0,styles:{body:{padding:0,overflow:"hidden"},header:{display:"none"}},children:(0,s.jsxs)("div",{style:{height:"100%"},className:"flex relative",children:[N?(0,s.jsx)(l.Button,{type:"text",size:"small",icon:(0,s.jsx)(o.RightOutlined,{}),onClick:()=>w(!1),className:"absolute top-2 left-2 z-20 !bg-white !border !border-slate-200 !rounded-md","aria-label":"Expand trace sidebar"}):(0,s.jsx)(l.Button,{type:"text",size:"small",icon:(0,s.jsx)(i.LeftOutlined,{}),onClick:()=>w(!0),className:"absolute top-2 left-2 z-20 !bg-white !border !border-slate-200 !rounded-md","aria-label":"Collapse trace sidebar"}),!N&&(0,s.jsxs)("div",{className:"border-r border-slate-200 bg-slate-50 flex flex-col",style:{width:224},children:[(0,s.jsxs)("div",{className:"pl-12 pr-3 py-2 border-b border-slate-200 bg-white",children:[(0,s.jsx)("div",{className:"flex items-start justify-between gap-2",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-[10px] uppercase tracking-wide text-slate-500",children:b?"Session":"Trace"}),(0,s.jsxs)("div",{className:"font-mono text-[12px] text-slate-900 leading-tight flex items-center gap-1",children:[(0,s.jsx)("span",{className:"truncate",children:U}),(0,s.jsx)("button",{type:"button",onClick:J,className:"text-slate-400 hover:text-slate-600","aria-label":"Copy trace id",children:S?(0,s.jsx)(r.CheckOutlined,{className:"text-[11px]"}):(0,s.jsx)(n.CopyOutlined,{className:"text-[11px]"})})]})]})}),(0,s.jsxs)("div",{className:"mt-1 text-[11px] text-slate-500 font-mono",children:[W.length," req",(0,s.jsx)("span",{className:"mx-1.5",children:"Â·"}),b?`${Y} LLM`:`${W.filter(e=>!m.MCP_CALL_TYPES.includes(e.call_type)).length} LLM`,(0,s.jsx)("span",{className:"mx-1.5",children:"Â·"}),b?`${V} MCP`:`${W.filter(e=>m.MCP_CALL_TYPES.includes(e.call_type)).length} MCP`,(0,s.jsx)("span",{className:"mx-1.5",children:"Â·"}),b?(0,k.getSpendString)(q):(0,k.getSpendString)(M.spend||0),b&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"mx-1.5",children:"Â·"}),$,"s"]})]})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[Z(O?.guardrail_information).length>0&&(0,s.jsx)("div",{className:"px-3 pt-2",children:(0,s.jsx)(eq,{guardrailEntries:Z(O?.guardrail_information)})}),b?(0,s.jsx)("div",{className:"py-1",children:(0,s.jsxs)("div",{className:"relative pl-2",children:[(0,s.jsx)("div",{className:"absolute left-4 top-1 bottom-1 border-l border-slate-300"}),W.map((e,t)=>{let l=t===W.length-1;return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute left-4 top-3 w-3 border-t border-slate-300"}),l&&(0,s.jsx)("div",{className:"absolute left-4 top-3 bottom-0 w-px bg-slate-50"}),(0,s.jsx)(eV,{row:e,isSelected:e.request_id===M.request_id,onClick:()=>{_(e.request_id),j?.(e)}})]},e.request_id)})]})}):(0,s.jsx)("div",{className:"py-1",children:W.map(e=>(0,s.jsx)(eV,{row:e,isSelected:e.request_id===M.request_id,onClick:()=>j?.(e)},e.request_id))})]})]}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,s.jsx)(x.DrawerHeader,{log:M,onClose:d,onPrevious:E,onNext:L,statusLabel:P,statusColor:F,environment:B}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,s.jsx)(eR,{logEntry:z,onOpenSettings:g,isLoadingDetails:R,accessToken:h??null})})]})]})}):null}e.s(["LogDetailsDrawer",()=>eW],502626),e.s([],3565)},936190,e=>{"use strict";var s=e.i(843476),t=e.i(619273),l=e.i(266027),a=e.i(912598),r=e.i(166540),n=e.i(271645);e.i(517442),e.i(500330),e.i(122550);var i=e.i(313603),o=e.i(772345),d=e.i(793130),c=e.i(197647),m=e.i(653824),u=e.i(881073),x=e.i(404206),p=e.i(723731),h=e.i(464571),g=e.i(111110),f=e.i(708347),j=e.i(93648),y=e.i(245767),b=e.i(633627),v=e.i(291950),_=e.i(969550),N=e.i(764205),w=e.i(20147),S=e.i(245099);e.i(70969);var k=e.i(97859);e.i(70635),e.i(339086);var C=e.i(504809);e.i(3565);var T=e.i(502626),M=e.i(727749);e.i(867612);var L=e.i(153472),E=e.i(954616),D=e.i(135214);let A=async(e,s)=>{let t=(0,N.getProxyBaseUrl)(),l=t?`${t}/config/update`:"/config/update",a=await fetch(l,{method:"POST",headers:{[(0,N.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({general_settings:{store_prompts_in_spend_logs:s.store_prompts_in_spend_logs,...s.maximum_spend_logs_retention_period&&{maximum_spend_logs_retention_period:s.maximum_spend_logs_retention_period}}})});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e?.error?.message||e?.message||e?.detail||"Failed to update spend logs settings")}return await a.json()};var I=e.i(190702),R=e.i(637235),z=e.i(808613),O=e.i(311451),P=e.i(212931),F=e.i(981339),B=e.i(770914),q=e.i(790848),K=e.i(898586);let H=({isVisible:e,onCancel:t,onSuccess:l})=>{let{t:a}=(0,g.useLanguage)(),[r]=z.Form.useForm(),{mutateAsync:i,isPending:o}=(()=>{let{accessToken:e}=(0,D.default)();return(0,E.useMutation)({mutationFn:async s=>{if(!e)throw Error("Access token is required");return await A(e,s)}})})(),{mutateAsync:d,isPending:c}=(0,L.useDeleteProxyConfigField)(),{data:m,isLoading:u,refetch:x}=(0,L.useProxyConfig)(L.ConfigType.GENERAL_SETTINGS),p=z.Form.useWatch("store_prompts_in_spend_logs",r);(0,n.useEffect)(()=>{e&&x()},[e,x]);let f=(0,n.useMemo)(()=>{if(!m)return{store_prompts_in_spend_logs:!1,maximum_spend_logs_retention_period:void 0};let e=m.find(e=>"store_prompts_in_spend_logs"===e.field_name),s=m.find(e=>"maximum_spend_logs_retention_period"===e.field_name);return{store_prompts_in_spend_logs:e?.field_value??!1,maximum_spend_logs_retention_period:s?.field_value??void 0}},[m]),j=async e=>{try{let s=e.maximum_spend_logs_retention_period;if(!s||"string"==typeof s&&""===s.trim())try{await d({config_type:L.ConfigType.GENERAL_SETTINGS,field_name:L.GeneralSettingsFieldName.MAXIMUM_SPEND_LOGS_RETENTION_PERIOD})}catch(e){console.warn("Failed to delete retention period field (may not exist):",e)}let t={store_prompts_in_spend_logs:e.store_prompts_in_spend_logs,...s&&"string"==typeof s&&""!==s.trim()&&{maximum_spend_logs_retention_period:s}};await i(t,{onSuccess:()=>{M.default.success(a("logs.settings.success")),x(),l?.()},onError:e=>{M.default.fromBackend(a("logs.settings.failed").replace("{error}",(0,I.parseErrorMessage)(e)))}})}catch(e){M.default.fromBackend(a("logs.settings.failed").replace("{error}",(0,I.parseErrorMessage)(e)))}},y=()=>{r.resetFields(),t()};return(0,s.jsx)(P.Modal,{title:(0,s.jsx)(K.Typography.Title,{level:5,children:a("logs.settings.title")}),open:e,footer:(0,s.jsxs)(B.Space,{children:[(0,s.jsx)(h.Button,{onClick:y,disabled:o||c||u,children:a("logs.settings.cancel")}),(0,s.jsx)(h.Button,{type:"primary",loading:o||c,disabled:u,onClick:()=>r.submit(),children:o||c?a("logs.settings.saving"):a("logs.settings.saveSettings")})]}),onCancel:y,children:(0,s.jsxs)(z.Form,{form:r,layout:"horizontal",onFinish:j,initialValues:f,children:[(0,s.jsx)(z.Form.Item,{label:a("logs.settings.storePrompts"),name:"store_prompts_in_spend_logs",tooltip:m?.find(e=>"store_prompts_in_spend_logs"===e.field_name)?.field_description||a("logs.settings.storePromptsTooltip"),valuePropName:"checked",children:(0,s.jsx)("div",{children:u?(0,s.jsx)(F.Skeleton.Input,{active:!0,block:!0}):(0,s.jsx)(q.Switch,{checked:p??!1,onChange:e=>r.setFieldValue("store_prompts_in_spend_logs",e)})})}),(0,s.jsx)(z.Form.Item,{label:a("logs.settings.retentionPeriod"),name:"maximum_spend_logs_retention_period",tooltip:m?.find(e=>"maximum_spend_logs_retention_period"===e.field_name)?.field_description||a("logs.settings.retentionPeriodTooltip"),children:u?(0,s.jsx)(F.Skeleton.Input,{active:!0,block:!0}):(0,s.jsx)(O.Input,{placeholder:a("logs.settings.retentionPeriodPlaceholder"),prefix:(0,s.jsx)(R.ClockCircleOutlined,{})})})]},m?JSON.stringify(f):"loading")})};var $=e.i(149121);function Y({accessToken:e,token:M,userRole:L,userID:E,allTeams:D,premiumUser:A}){let{t:I}=(0,g.useLanguage)(),[R,z]=(0,n.useState)(""),[O,P]=(0,n.useState)(!1),[F,B]=(0,n.useState)(!1),[q,K]=(0,n.useState)(1),[Y]=(0,n.useState)(50),V=(0,n.useRef)(null),W=(0,n.useRef)(null),G=(0,n.useRef)(null),[U,J]=(0,n.useState)((0,r.default)().subtract(24,"hours").format("YYYY-MM-DDTHH:mm")),[Q,X]=(0,n.useState)((0,r.default)().format("YYYY-MM-DDTHH:mm")),[Z,ee]=(0,n.useState)(!1),[es,et]=(0,n.useState)(!1),[el,ea]=(0,n.useState)(""),[er,en]=(0,n.useState)(""),[ei,eo]=(0,n.useState)(""),[ed,ec]=(0,n.useState)(""),[em,eu]=(0,n.useState)(""),[ex,ep]=(0,n.useState)(null),[eh,eg]=(0,n.useState)(null),[ef,ej]=(0,n.useState)(""),[ey,eb]=(0,n.useState)(""),[ev,e_]=(0,n.useState)(L&&f.internalUserRoles.includes(L)),[eN,ew]=(0,n.useState)("request logs"),[eS,ek]=(0,n.useState)(null),[eC,eT]=(0,n.useState)(!1),[eM,eL]=(0,n.useState)(null),[eE,eD]=(0,n.useState)(!1),[eA,eI]=(0,n.useState)("startTime"),[eR,ez]=(0,n.useState)("desc"),[eO,eP]=(0,n.useState)(!0);(0,a.useQueryClient)();let[eF,eB]=(0,n.useState)(()=>{let e=sessionStorage.getItem("isLiveTail");return null===e||JSON.parse(e)});(0,n.useEffect)(()=>{sessionStorage.setItem("isLiveTail",JSON.stringify(eF))},[eF]);let[eq,eK]=(0,n.useState)({value:24,unit:"hours"});(0,n.useEffect)(()=>{(async()=>{eh&&e&&ep({...(await (0,N.keyInfoV1Call)(e,eh)).info,token:eh,api_key:eh})})()},[eh,e]),(0,n.useEffect)(()=>{function e(e){V.current&&!V.current.contains(e.target)&&B(!1),W.current&&!W.current.contains(e.target)&&P(!1),G.current&&!G.current.contains(e.target)&&et(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,n.useEffect)(()=>{L&&f.internalUserRoles.includes(L)&&e_(!0)},[L]);let eH=(0,l.useQuery)({queryKey:["logs","table",q,Y,U,Q,ei,ed,ev?E:null,ef,em,eA,eR],queryFn:async()=>{if(!e||!M||!L||!E)return{data:[],total:0,page:1,page_size:Y,total_pages:0};let s=(0,r.default)(U).utc().format("YYYY-MM-DD HH:mm:ss"),t=Z?(0,r.default)(Q).utc().format("YYYY-MM-DD HH:mm:ss"):(0,r.default)().utc().format("YYYY-MM-DD HH:mm:ss");return await (0,N.uiSpendLogsCall)({accessToken:e,start_date:s,end_date:t,page:q,page_size:Y,params:{api_key:ed||void 0,team_id:ei||void 0,user_id:ev?E??void 0:void 0,end_user:ey||void 0,status_filter:ef||void 0,model_id:em||void 0,sort_by:eA,sort_order:eR}})},enabled:!!e&&!!M&&!!L&&!!E&&"request logs"===eN&&eO,refetchInterval:!!eF&&1===q&&15e3,placeholderData:t.keepPreviousData,refetchIntervalInBackground:!0}),e$=(0,n.useDeferredValue)(eH.isFetching),eY=eH.isFetching||e$,eV=eH.data||{data:[],total:0,page:1,page_size:Y||10,total_pages:1},{filters:eW,filteredLogs:eG,hasBackendFilters:eU,allTeams:eJ,allKeyAliases:eQ,handleFilterChange:eX,handleFilterReset:eZ}=(0,C.useLogFilterLogic)({logs:eV,accessToken:e,startTime:U,endTime:Q,pageSize:Y,isCustomDate:Z,setCurrentPage:K,userID:E,userRole:L,sortBy:eA,sortOrder:eR,currentPage:q}),e0=(0,n.useCallback)(()=>{eZ(),J((0,r.default)().subtract(24,"hours").format("YYYY-MM-DDTHH:mm")),X((0,r.default)().format("YYYY-MM-DDTHH:mm")),ee(!1),eK({value:24,unit:"hours"}),K(1)},[eZ]);if((0,n.useEffect)(()=>{eP(!eU)},[eU]),(0,n.useEffect)(()=>{e&&(eW["Team ID"]?eo(eW["Team ID"]):eo(""),ej(eW.Status||""),eu(eW.Model||""),eb(eW["End User"]||""),ec(eW["Key Hash"]||""))},[eW,e]),!e||!M||!L||!E)return null;let e1=eG.data.filter(e=>!R||e.request_id.includes(R)||e.model.includes(R)||e.user&&e.user.includes(R)),e2=e1.reduce((e,s)=>(s.session_id&&(e[s.session_id]||(e[s.session_id]={llm:0,mcp:0}),k.MCP_CALL_TYPES.includes(s.call_type)?e[s.session_id].mcp+=1:e[s.session_id].llm+=1),e),{}),e5=new Map;for(let e of e1){if(!e.session_id||1>=(e.session_total_count||1))continue;let s=k.MCP_CALL_TYPES.includes(e.call_type),t=e5.get(e.session_id);t&&(!t.isMcp||s)||e5.set(e.session_id,{requestId:e.request_id,isMcp:s})}let e4=e1.map(e=>{let s=e.session_id?e2[e.session_id]:void 0;return{...e,duration:(Date.parse(e.endTime)-Date.parse(e.startTime))/1e3,session_llm_count:s?.llm??void 0,session_mcp_count:s?.mcp??void 0,onKeyHashClick:e=>eg(e),onSessionClick:s=>{s&&(eL(s),ek(e),eT(!0))}}}).filter(e=>!e.session_id||1>=(e.session_total_count||1)||e5.get(e.session_id)?.requestId===e.request_id)||[],e6=[{name:"teamId",label:I("logs.filters.teamId"),isSearchable:!0,searchFn:async e=>D&&0!==D.length?D.filter(s=>s.team_id.toLowerCase().includes(e.toLowerCase())||s.team_alias&&s.team_alias.toLowerCase().includes(e.toLowerCase())).map(e=>({label:`${e.team_alias||e.team_id} (${e.team_id})`,value:e.team_id})):[]},{name:"status",label:I("logs.filters.status"),isSearchable:!1,options:[{label:I("logs.filters.success"),value:"success"},{label:I("logs.filters.failure"),value:"failure"}]},{name:"model",label:I("logs.filters.model"),customComponent:v.PaginatedModelSelect},{name:"keyAlias",label:I("logs.filters.keyAlias"),isSearchable:!0,searchFn:async s=>e?(await (0,b.fetchAllKeyAliases)(e)).filter(e=>e.toLowerCase().includes(s.toLowerCase())).map(e=>({label:e,value:e})):[]},{name:"endUser",label:I("logs.filters.endUser"),isSearchable:!0,searchFn:async s=>{if(!e)return[];let t=await (0,N.allEndUsersCall)(e);return(t?.map(e=>e.user_id)||[]).filter(e=>e.toLowerCase().includes(s.toLowerCase())).map(e=>({label:e,value:e}))}},{name:"errorCode",label:I("logs.filters.errorCode"),isSearchable:!0,searchFn:async e=>{if(!e)return k.ERROR_CODE_OPTIONS;let s=e.toLowerCase(),t=k.ERROR_CODE_OPTIONS.filter(e=>e.label.toLowerCase().includes(s));return!k.ERROR_CODE_OPTIONS.some(s=>s.value===e.trim())&&e.trim()&&t.push({label:`Use custom code: ${e.trim()}`,value:e.trim()}),t}},{name:"keyHash",label:I("logs.filters.keyHash"),isSearchable:!1},{name:"Error Message",label:"Error Message",isSearchable:!1}],e3=k.QUICK_SELECT_OPTIONS.find(e=>e.value===eq.value&&e.unit===eq.unit),e8=e=>15===e.value&&"minutes"===e.unit?I("logs.quickSelect.last15Minutes"):1===e.value&&"hours"===e.unit?I("logs.quickSelect.lastHour"):4===e.value&&"hours"===e.unit?I("logs.quickSelect.last4Hours"):24===e.value&&"hours"===e.unit?I("logs.quickSelect.last24Hours"):7===e.value&&"days"===e.unit?I("logs.quickSelect.last7Days"):e.label,e9=k.QUICK_SELECT_OPTIONS.map(e=>({...e,label:e8(e)})),e7=Z?((e,s,t)=>{if(e)return`${(0,r.default)(s).format("MMM D, h:mm A")} - ${(0,r.default)(t).format("MMM D, h:mm A")}`;let l=(0,r.default)(),a=(0,r.default)(s),n=l.diff(a,"minutes");if(n>=0&&n<2)return"Last 1 Minute";if(n>=2&&n<16)return"Last 15 Minutes";if(n>=16&&n<61)return"Last Hour";let i=l.diff(a,"hours");return i>=1&&i<5?"Last 4 Hours":i>=5&&i<25?"Last 24 Hours":i>=25&&i<169?"Last 7 Days":`${a.format("MMM D")} - ${l.format("MMM D")}`})(Z,U,Q):e3?e8(e3):"";return(0,s.jsxs)("div",{className:"w-full max-w-screen p-6 overflow-x-hidden box-border",children:[(0,s.jsxs)(m.TabGroup,{defaultIndex:0,onIndexChange:e=>ew(0===e?"request logs":1===e?"deleted keys":"deleted teams"),children:[(0,s.jsxs)(u.TabList,{children:[(0,s.jsx)(c.Tab,{children:I("logs.tabs.requestLogs")}),(0,s.jsx)(c.Tab,{children:I("logs.tabs.deletedKeys")}),(0,s.jsx)(c.Tab,{children:I("logs.tabs.deletedTeams")})]}),(0,s.jsxs)(p.TabPanels,{children:[(0,s.jsxs)(x.TabPanel,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h1",{className:"text-xl font-semibold",children:I("logs.title")}),(0,s.jsx)(h.Button,{icon:(0,s.jsx)(i.SettingOutlined,{}),onClick:()=>eD(!0),title:I("logs.settingsButton")})]}),ex&&eh&&ex.api_key===eh?(0,s.jsx)(w.default,{keyId:eh,keyData:ex,teams:D,onClose:()=>eg(null),backButtonText:I("logs.backToLogs")}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(_.default,{options:e6,onApplyFilters:eX,onResetFilters:e0}),(0,s.jsx)(H,{isVisible:eE,onCancel:()=>eD(!1),onSuccess:()=>eD(!1)}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow w-full max-w-full box-border",children:[(0,s.jsx)("div",{className:"border-b px-6 py-4 w-full max-w-full box-border",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between space-y-4 md:space-y-0 w-full max-w-full box-border",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-3 w-full max-w-full box-border",children:[(0,s.jsxs)("div",{className:"relative w-64 min-w-0 flex-shrink-0",children:[(0,s.jsx)("input",{type:"text",placeholder:I("logs.searchByRequestId"),className:"w-full px-3 py-2 pl-8 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:R,onChange:e=>z(e.target.value)}),(0,s.jsx)("svg",{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-shrink",children:[(0,s.jsxs)("div",{className:"relative z-50",ref:G,children:[(0,s.jsxs)("button",{onClick:()=>et(!es),className:"px-3 py-2 text-sm border rounded-md hover:bg-gray-50 flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e7]}),es&&(0,s.jsx)("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border p-2 z-50",children:(0,s.jsxs)("div",{className:"space-y-1",children:[e9.map(e=>(0,s.jsx)("button",{className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-50 rounded-md ${e7===e.label?"bg-blue-50 text-blue-600":""}`,onClick:()=>{K(1),X((0,r.default)().format("YYYY-MM-DDTHH:mm")),J((0,r.default)().subtract(e.value,e.unit).format("YYYY-MM-DDTHH:mm")),eK({value:e.value,unit:e.unit}),ee(!1),et(!1)},children:e.label},e.label)),(0,s.jsx)("div",{className:"border-t my-2"}),(0,s.jsx)("button",{className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-50 rounded-md ${Z?"bg-blue-50 text-blue-600":""}`,onClick:()=>ee(!Z),children:I("logs.customRange")})]})})]}),(0,s.jsx)(()=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900",children:I("logs.liveTail")}),(0,s.jsx)(d.Switch,{color:"green",checked:eF,defaultChecked:!0,onChange:eB})]}),{}),(0,s.jsx)(h.Button,{type:"default",icon:(0,s.jsx)(o.SyncOutlined,{spin:eY}),onClick:()=>{eH.refetch()},disabled:eY,title:I("logs.fetch"),children:eY?I("logs.fetching"):I("logs.fetch")})]}),Z&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{children:(0,s.jsx)("input",{type:"datetime-local",value:U,onChange:e=>{J(e.target.value),K(1)},className:"px-3 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),(0,s.jsx)("span",{className:"text-gray-500",children:I("logs.dateTo")}),(0,s.jsx)("div",{children:(0,s.jsx)("input",{type:"datetime-local",value:Q,onChange:e=>{X(e.target.value),K(1)},className:"px-3 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[!eH.isLoading&&eG?.total>0&&(0,s.jsx)("span",{className:"text-sm text-gray-700 whitespace-nowrap",dangerouslySetInnerHTML:{__html:I("logs.showingResults").replace("{start}",String((q-1)*Y+1)).replace("{end}",String(Math.min(q*Y,eG.total))).replace("{total}",String(eG.total))}}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[!eH.isLoading&&eG?.total>0&&(0,s.jsx)("span",{className:"text-sm text-gray-700 min-w-[90px]",children:I("logs.pageOf").replace("{current}",String(q)).replace("{total}",String(eG.total_pages))}),(0,s.jsx)("button",{onClick:()=>K(e=>Math.max(1,e-1)),disabled:eH.isLoading||1===q,className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:I("logs.previous")}),(0,s.jsx)("button",{onClick:()=>K(e=>Math.min(eG.total_pages||1,e+1)),disabled:eH.isLoading||q===(eG.total_pages||1),className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:I("logs.next")})]})]})]})}),eF&&1===q&&eO&&(0,s.jsxs)("div",{className:"mb-4 px-4 py-2 bg-green-50 border border-greem-200 rounded-md flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("span",{className:"text-sm text-green-700",children:"Auto-refreshing every 15 seconds"})}),(0,s.jsx)("button",{onClick:()=>eB(!1),className:"text-sm text-green-600 hover:text-green-800",children:"Stop"})]}),(0,s.jsx)($.DataTable,{columns:(0,S.createColumns)({sortProps:{sortBy:eA,sortOrder:eR,onSortChange:(e,s)=>{eI(e),ez(s),K(1)}},t:I}),data:e4,onRowClick:e=>{if(e.session_id&&(e.session_total_count||1)>1){eL(e.session_id),ek(e),eT(!0);return}eL(null),ek(e),eT(!0)},isLoading:eH.isLoading,loadingMessage:I("logs.loadingMessage"),noDataMessage:I("logs.noDataMessage")})]})]})]}),(0,s.jsx)(x.TabPanel,{children:(0,s.jsx)(j.default,{})}),(0,s.jsx)(x.TabPanel,{children:(0,s.jsx)(y.default,{})})]})]}),(0,s.jsx)(T.LogDetailsDrawer,{open:eC,onClose:()=>{eT(!1),eL(null)},logEntry:eS,sessionId:eM,accessToken:e,onOpenSettings:()=>eD(!0),allLogs:e4,onSelectLog:e=>{ek(e)},startTime:(0,r.default)(U).utc().format("YYYY-MM-DD HH:mm:ss")})]})}e.i(331052),e.s(["default",()=>Y],936190)}]);