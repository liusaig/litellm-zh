(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,392110,939510,e=>{"use strict";var l=e.i(843476),t=e.i(271645),s=e.i(199133),a=e.i(592968),r=e.i(312361),i=e.i(790848),n=e.i(827252),o=e.i(779241);let{Option:d}=s.Select;e.s(["default",0,({form:e,autoRotationEnabled:c,onAutoRotationChange:u,rotationInterval:m,onRotationIntervalChange:p,isCreateMode:h=!1})=>{let x=m&&!["7d","30d","90d","180d","365d"].includes(m),[g,_]=(0,t.useState)(x),[y,f]=(0,t.useState)(x?m:""),[j,b]=(0,t.useState)(e?.getFieldValue?.("duration")||"");return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Key Expiry Settings"}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("label",{className:"text-sm font-medium text-gray-700 flex items-center space-x-1",children:[(0,l.jsx)("span",{children:"Expire Key"}),(0,l.jsx)(a.Tooltip,{title:h?"Set when this key should expire. Format: 30s (seconds), 30m (minutes), 30h (hours), 30d (days). Leave empty to never expire.":"Set when this key should expire. Format: 30s (seconds), 30m (minutes), 30h (hours), 30d (days). Use -1 to never expire.",children:(0,l.jsx)(n.InfoCircleOutlined,{className:"text-gray-400 cursor-help text-xs"})})]}),(0,l.jsx)(o.TextInput,{name:"duration",placeholder:h?"e.g., 30d or leave empty to never expire":"e.g., 30d or -1 to never expire",className:"w-full",value:j,onValueChange:l=>{b(l),e&&"function"==typeof e.setFieldValue?e.setFieldValue("duration",l):e&&"function"==typeof e.setFieldsValue&&e.setFieldsValue({duration:l})}})]})]}),(0,l.jsx)(r.Divider,{}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Auto-Rotation Settings"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("label",{className:"text-sm font-medium text-gray-700 flex items-center space-x-1",children:[(0,l.jsx)("span",{children:"Enable Auto-Rotation"}),(0,l.jsx)(a.Tooltip,{title:"Key will automatically regenerate at the specified interval for enhanced security.",children:(0,l.jsx)(n.InfoCircleOutlined,{className:"text-gray-400 cursor-help text-xs"})})]}),(0,l.jsx)(i.Switch,{checked:c,onChange:u,size:"default",className:c?"":"bg-gray-400"})]}),c&&(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("label",{className:"text-sm font-medium text-gray-700 flex items-center space-x-1",children:[(0,l.jsx)("span",{children:"Rotation Interval"}),(0,l.jsx)(a.Tooltip,{title:"How often the key should be automatically rotated. Choose the interval that best fits your security requirements.",children:(0,l.jsx)(n.InfoCircleOutlined,{className:"text-gray-400 cursor-help text-xs"})})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)(s.Select,{value:g?"custom":m,onChange:e=>{"custom"===e?_(!0):(_(!1),f(""),p(e))},className:"w-full",placeholder:"Select interval",children:[(0,l.jsx)(d,{value:"7d",children:"7 days"}),(0,l.jsx)(d,{value:"30d",children:"30 days"}),(0,l.jsx)(d,{value:"90d",children:"90 days"}),(0,l.jsx)(d,{value:"180d",children:"180 days"}),(0,l.jsx)(d,{value:"365d",children:"365 days"}),(0,l.jsx)(d,{value:"custom",children:"Custom interval"})]}),g&&(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)(o.TextInput,{value:y,onChange:e=>{let l=e.target.value;f(l),p(l)},placeholder:"e.g., 1s, 5m, 2h, 14d"}),(0,l.jsx)("div",{className:"text-xs text-gray-500",children:"Supported formats: seconds (s), minutes (m), hours (h), days (d)"})]})]})]})]}),c&&(0,l.jsx)("div",{className:"bg-blue-50 p-3 rounded-md text-sm text-blue-700",children:"When rotation occurs, you'll receive a notification with the new key. The old key will be deactivated after a brief grace period."})]})]})}],392110);var c=e.i(808613);let{Option:u}=s.Select;e.s(["default",0,({type:e,name:t,showDetailedDescriptions:r=!0,className:i="",initialValue:o=null,form:d,onChange:m})=>{let p=e.toUpperCase(),h=e.toLowerCase(),x=`Select 'guaranteed_throughput' to prevent overallocating ${p} limit when the key belongs to a Team with specific ${p} limits.`;return(0,l.jsx)(c.Form.Item,{label:(0,l.jsxs)("span",{children:[p," Rate Limit Type"," ",(0,l.jsx)(a.Tooltip,{title:x,children:(0,l.jsx)(n.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:t,initialValue:o,className:i,children:(0,l.jsx)(s.Select,{defaultValue:r?"default":void 0,placeholder:"Select rate limit type",style:{width:"100%"},optionLabelProp:r?"label":void 0,onChange:e=>{d&&d.setFieldValue(t,e),m&&m(e)},children:r?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u,{value:"best_effort_throughput",label:"Default",children:(0,l.jsxs)("div",{style:{padding:"4px 0"},children:[(0,l.jsx)("div",{style:{fontWeight:500},children:"Default"}),(0,l.jsxs)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:["Best effort throughput - no error if we're overallocating ",h," (Team/Key Limits checked at runtime)."]})]})}),(0,l.jsx)(u,{value:"guaranteed_throughput",label:"Guaranteed throughput",children:(0,l.jsxs)("div",{style:{padding:"4px 0"},children:[(0,l.jsx)("div",{style:{fontWeight:500},children:"Guaranteed throughput"}),(0,l.jsxs)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:["Guaranteed throughput - raise an error if we're overallocating ",h," (also checks model-specific limits)"]})]})}),(0,l.jsx)(u,{value:"dynamic",label:"Dynamic",children:(0,l.jsxs)("div",{style:{padding:"4px 0"},children:[(0,l.jsx)("div",{style:{fontWeight:500},children:"Dynamic"}),(0,l.jsxs)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:["If the key has a set ",p," (e.g. 2 ",p,") and there are no 429 errors, it can dynamically exceed the limit when the model being called is not erroring."]})]})})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u,{value:"best_effort_throughput",children:"Best effort throughput"}),(0,l.jsx)(u,{value:"guaranteed_throughput",children:"Guaranteed throughput"}),(0,l.jsx)(u,{value:"dynamic",children:"Dynamic"})]})})})}],939510)},207082,e=>{"use strict";var l=e.i(619273),t=e.i(266027),s=e.i(243652),a=e.i(764205),r=e.i(135214);let i=(0,s.createQueryKeys)("keys"),n=async(e,l,t,s={})=>{try{let r=(0,a.getProxyBaseUrl)(),i=new URLSearchParams(Object.entries({team_id:s.teamID,organization_id:s.organizationID,key_alias:s.selectedKeyAlias,key_hash:s.keyHash,user_id:s.userID,page:l,size:t,sort_by:s.sortBy,sort_order:s.sortOrder,expand:s.expand,status:s.status,return_full_object:"true",include_team_keys:"true",include_created_by_keys:"true"}).filter(([,e])=>null!=e).map(([e,l])=>[e,String(l)])),n=`${r?`${r}/key/list`:"/key/list"}?${i}`,o=await fetch(n,{method:"GET",headers:{[(0,a.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"}});if(!o.ok){let e=await o.json(),l=(0,a.deriveErrorMessage)(e);throw(0,a.handleError)(l),Error(l)}let d=await o.json();return console.log("/key/list API Response:",d),d}catch(e){throw console.error("Failed to list keys:",e),e}},o=(0,s.createQueryKeys)("deletedKeys");e.s(["keyKeys",0,i,"useDeletedKeys",0,(e,s,a={})=>{let{accessToken:i}=(0,r.default)();return(0,t.useQuery)({queryKey:o.list({page:e,limit:s,...a}),queryFn:async()=>await n(i,e,s,{...a,status:"deleted"}),enabled:!!i,staleTime:3e4,placeholderData:l.keepPreviousData})},"useKeys",0,(e,s,a={})=>{let{accessToken:o}=(0,r.default)();return(0,t.useQuery)({queryKey:i.list({page:e,limit:s,...a}),queryFn:async()=>await n(o,e,s,a),enabled:!!o,staleTime:3e4,placeholderData:l.keepPreviousData})}])},460285,750419,e=>{"use strict";var l=e.i(843476),t=e.i(271645),s=e.i(404206),a=e.i(723731),r=e.i(653824),i=e.i(881073),n=e.i(197647),o=e.i(764205),d=e.i(158392),c=e.i(419470),u=e.i(689020);let m=(0,t.forwardRef)(({accessToken:e,value:m,onChange:p,modelData:h},x)=>{let[g,_]=(0,t.useState)({routerSettings:{},selectedStrategy:null,enableTagFiltering:!1}),[y,f]=(0,t.useState)([]),[j,b]=(0,t.useState)([]),[v,w]=(0,t.useState)([]),[S,k]=(0,t.useState)([]),[C,N]=(0,t.useState)({}),[T,I]=(0,t.useState)({}),F=(0,t.useRef)(!1),A=(0,t.useRef)(null);(0,t.useEffect)(()=>{let e=m?.router_settings?JSON.stringify({routing_strategy:m.router_settings.routing_strategy,fallbacks:m.router_settings.fallbacks,enable_tag_filtering:m.router_settings.enable_tag_filtering}):null;if(F.current&&e===A.current){F.current=!1;return}if(F.current&&e!==A.current&&(F.current=!1),e!==A.current)if(A.current=e,m?.router_settings){let e=m.router_settings,{fallbacks:l,...t}=e;_({routerSettings:t,selectedStrategy:e.routing_strategy||null,enableTagFiltering:e.enable_tag_filtering??!1});let s=e.fallbacks||[];f(s),b(s&&0!==s.length?s.map((e,l)=>{let[t,s]=Object.entries(e)[0];return{id:(l+1).toString(),primaryModel:t||null,fallbackModels:s||[]}}):[{id:"1",primaryModel:null,fallbackModels:[]}])}else _({routerSettings:{},selectedStrategy:null,enableTagFiltering:!1}),f([]),b([{id:"1",primaryModel:null,fallbackModels:[]}])},[m]),(0,t.useEffect)(()=>{e&&(0,o.getRouterSettingsCall)(e).then(e=>{if(e.fields){let l={};e.fields.forEach(e=>{l[e.field_name]={ui_field_name:e.ui_field_name,field_description:e.field_description,options:e.options,link:e.link}}),N(l);let t=e.fields.find(e=>"routing_strategy"===e.field_name);t?.options&&k(t.options),e.routing_strategy_descriptions&&I(e.routing_strategy_descriptions)}})},[e]),(0,t.useEffect)(()=>{e&&(async()=>{try{let l=await (0,u.fetchAvailableModels)(e);w(l)}catch(e){console.error("Error fetching model info for fallbacks:",e)}})()},[e]);let O=()=>{let e=new Set(["allowed_fails","cooldown_time","num_retries","timeout","retry_after"]),l=new Set(["model_group_alias","retry_policy"]),t=Object.fromEntries(Object.entries({...g.routerSettings,enable_tag_filtering:g.enableTagFiltering,routing_strategy:g.selectedStrategy,fallbacks:y.length>0?y:null}).map(([t,s])=>{if("routing_strategy_args"!==t&&"routing_strategy"!==t&&"enable_tag_filtering"!==t&&"fallbacks"!==t){let a=document.querySelector(`input[name="${t}"]`);if(a&&void 0!==a.value&&""!==a.value){let r=((t,s,a)=>{if(null==s)return a;let r=String(s).trim();if(""===r||"null"===r.toLowerCase())return null;if(e.has(t)){let e=Number(r);return Number.isNaN(e)?a:e}if(l.has(t)){if(""===r)return null;try{return JSON.parse(r)}catch{return a}}return"true"===r.toLowerCase()||"false"!==r.toLowerCase()&&r})(t,a.value,s);return[t,r]}}else if("routing_strategy"===t)return[t,g.selectedStrategy];else if("enable_tag_filtering"===t)return[t,g.enableTagFiltering];else if("fallbacks"===t)return[t,y.length>0?y:null];else if("routing_strategy_args"===t&&"latency-based-routing"===g.selectedStrategy){let e=document.querySelector('input[name="lowest_latency_buffer"]'),l=document.querySelector('input[name="ttl"]'),t={};return e?.value&&(t.lowest_latency_buffer=Number(e.value)),l?.value&&(t.ttl=Number(l.value)),["routing_strategy_args",Object.keys(t).length>0?t:null]}return[t,s]}).filter(e=>null!=e)),s=(e,l=!1)=>null==e||"object"==typeof e&&!Array.isArray(e)&&0===Object.keys(e).length||l&&("number"!=typeof e||Number.isNaN(e))?null:e;return{routing_strategy:s(t.routing_strategy),allowed_fails:s(t.allowed_fails,!0),cooldown_time:s(t.cooldown_time,!0),num_retries:s(t.num_retries,!0),timeout:s(t.timeout,!0),retry_after:s(t.retry_after,!0),fallbacks:y.length>0?y:null,context_window_fallbacks:s(t.context_window_fallbacks),retry_policy:s(t.retry_policy),model_group_alias:s(t.model_group_alias),enable_tag_filtering:g.enableTagFiltering,routing_strategy_args:s(t.routing_strategy_args)}};(0,t.useEffect)(()=>{if(!p)return;let e=setTimeout(()=>{F.current=!0,p({router_settings:O()})},100);return()=>clearTimeout(e)},[g,y]);let L=Array.from(new Set(v.map(e=>e.model_group))).sort();return((0,t.useImperativeHandle)(x,()=>({getValue:()=>({router_settings:O()})})),e)?(0,l.jsx)("div",{className:"w-full",children:(0,l.jsxs)(r.TabGroup,{className:"w-full",children:[(0,l.jsxs)(i.TabList,{variant:"line",defaultValue:"1",className:"px-8 pt-4",children:[(0,l.jsx)(n.Tab,{value:"1",children:"Loadbalancing"}),(0,l.jsx)(n.Tab,{value:"2",children:"Fallbacks"})]}),(0,l.jsxs)(a.TabPanels,{className:"px-8 py-6",children:[(0,l.jsx)(s.TabPanel,{children:(0,l.jsx)(d.default,{value:g,onChange:_,routerFieldsMetadata:C,availableRoutingStrategies:S,routingStrategyDescriptions:T})}),(0,l.jsx)(s.TabPanel,{children:(0,l.jsx)(c.FallbackSelectionForm,{groups:j,onGroupsChange:e=>{b(e),f(e.filter(e=>e.primaryModel&&e.fallbackModels.length>0).map(e=>({[e.primaryModel]:e.fallbackModels})))},availableModels:L,maxGroups:5})})]})]})}):null});m.displayName="RouterSettingsAccordion",e.s(["default",0,m],460285),e.s(["simplifyKeyGenerateError",0,e=>{let l;if(!(l=!e||"object"!=typeof e||e instanceof Error?String(e):JSON.stringify(e)).includes("/key/generate")&&!l.includes("KeyManagementRoutes.KEY_GENERATE"))return`Error creating the key: ${e}`;let t=l;try{if(!e||"object"!=typeof e||e instanceof Error){let e=l.match(/\{[\s\S]*\}/);if(e){let l=JSON.parse(e[0]),s=l?.error||l;s?.message&&(t=s.message)}}else{let l=e?.error||e;l?.message&&(t=l.message)}}catch(e){}return l.includes("team_member_permission_error")||t.includes("Team member does not have permissions")?"Team member does not have permission to generate key for this team. Ask your proxy admin to configure the team member permission settings.":`Error creating the key: ${e}`}],750419)},364769,e=>{"use strict";var l=e.i(843476),t=e.i(271645),s=e.i(237016),a=e.i(464571),r=e.i(998573);e.s(["default",0,({apiKey:e})=>{let[i,n]=(0,t.useState)(!1);return(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"mb-2",children:["Please save this secret key somewhere safe and accessible. For security reasons,"," ",(0,l.jsx)("b",{children:"you will not be able to view it again"})," through your LiteLLM account. If you lose this secret key, you will need to generate a new one."]}),(0,l.jsx)("p",{className:"text-sm text-gray-600 mt-3 mb-1",children:"Virtual Key:"}),(0,l.jsx)("div",{style:{background:"#f8f8f8",padding:"10px",borderRadius:"5px",marginBottom:"10px"},children:(0,l.jsx)("pre",{style:{wordWrap:"break-word",whiteSpace:"normal",margin:0},children:e})}),(0,l.jsx)(s.CopyToClipboard,{text:e,onCopy:()=>{n(!0),r.message.success("Key copied to clipboard"),setTimeout(()=>n(!1),2e3)},children:(0,l.jsx)(a.Button,{type:"primary",style:{marginTop:12},children:i?"Copied!":"Copy Virtual Key"})})]})}])},702597,e=>{"use strict";var l=e.i(843476),t=e.i(207082),s=e.i(135214),a=e.i(500330),r=e.i(827252),i=e.i(912598),n=e.i(677667),o=e.i(130643),d=e.i(898667),c=e.i(994388),u=e.i(309426),m=e.i(350967),p=e.i(599724),h=e.i(779241),x=e.i(629569),g=e.i(464571),_=e.i(808613),y=e.i(311451),f=e.i(212931),j=e.i(91739),b=e.i(199133),v=e.i(790848),w=e.i(262218),S=e.i(592968),k=e.i(998573),C=e.i(374009),N=e.i(271645),T=e.i(708347),I=e.i(552130),F=e.i(557662),A=e.i(860585),O=e.i(82946),L=e.i(392110),P=e.i(533882),M=e.i(844565),E=e.i(651904),V=e.i(939510),R=e.i(460285),D=e.i(9314),K=e.i(663435),B=e.i(371455),$=e.i(355619),U=e.i(75921),G=e.i(390605),q=e.i(727749),H=e.i(764205),J=e.i(435451),W=e.i(916940),z=e.i(750419),Q=e.i(364769);let{Option:Y}=b.Select,X=async(e,l,t,s)=>{try{if(null===e||null===l)return[];if(null!==t){let a=(await (0,H.modelAvailableCall)(t,e,l,!0,s,!0)).data.map(e=>e.id);return console.log("available_model_names:",a),a}return[]}catch(e){return console.error("Error fetching user models:",e),[]}},Z=async(e,l,t,s)=>{try{if(null===e||null===l)return;if(null!==t){let a=(await (0,H.modelAvailableCall)(t,e,l)).data.map(e=>e.id);console.log("available_model_names:",a),s(a)}}catch(e){console.error("Error fetching user models:",e)}};e.s(["default",0,({team:e,teams:ee,data:el,addKey:et})=>{let{accessToken:es,userId:ea,userRole:er,premiumUser:ei}=(0,s.default)(),en=(0,i.useQueryClient)(),[eo]=_.Form.useForm(),[ed,ec]=(0,N.useState)(!1),[eu,em]=(0,N.useState)(null),[ep,eh]=(0,N.useState)(null),[ex,eg]=(0,N.useState)([]),[e_,ey]=(0,N.useState)([]),[ef,ej]=(0,N.useState)("you"),[eb,ev]=(0,N.useState)((e=>{let l=[];if(console.log("data:",JSON.stringify(e)),e)for(let t of e)t.metadata&&t.metadata.tags&&l.push(...t.metadata.tags);let t=Array.from(new Set(l)).map(e=>({value:e,label:e}));return console.log("uniqueTags:",t),t})(el)),[ew,eS]=(0,N.useState)([]),[ek,eC]=(0,N.useState)([]),[eN,eT]=(0,N.useState)([]),[eI,eF]=(0,N.useState)([]),[eA,eO]=(0,N.useState)(e),[eL,eP]=(0,N.useState)(!1),[eM,eE]=(0,N.useState)(null),[eV,eR]=(0,N.useState)({}),[eD,eK]=(0,N.useState)([]),[eB,e$]=(0,N.useState)(!1),[eU,eG]=(0,N.useState)([]),[eq,eH]=(0,N.useState)([]),[eJ,eW]=(0,N.useState)("llm_api"),[ez,eQ]=(0,N.useState)({}),[eY,eX]=(0,N.useState)(!1),[eZ,e0]=(0,N.useState)("30d"),[e4,e1]=(0,N.useState)(null),[e2,e3]=(0,N.useState)(0),[e5,e7]=(0,N.useState)([]),[e6,e8]=(0,N.useState)(null),e9=()=>{ec(!1),eo.resetFields(),eF([]),eH([]),eW("llm_api"),eQ({}),eX(!1),e0("30d"),e1(null),e3(e=>e+1),e8(null)},le=()=>{ec(!1),em(null),eO(null),eo.resetFields(),eF([]),eH([]),eW("llm_api"),eQ({}),eX(!1),e0("30d"),e1(null),e3(e=>e+1),e8(null)};(0,N.useEffect)(()=>{ea&&er&&es&&Z(ea,er,es,eg)},[es,ea,er]),(0,N.useEffect)(()=>{es&&(0,H.getAgentsList)(es).then(e=>e7(e?.agents||[])).catch(()=>e7([]))},[es]),(0,N.useEffect)(()=>{let e=async()=>{try{let e=(await (0,H.getPoliciesList)(es)).policies.map(e=>e.policy_name);eC(e)}catch(e){console.error("Failed to fetch policies:",e)}},l=async()=>{try{let e=await (0,H.getPromptsList)(es);eT(e.prompts.map(e=>e.prompt_id))}catch(e){console.error("Failed to fetch prompts:",e)}};(async()=>{try{let e=(await (0,H.getGuardrailsList)(es)).guardrails.map(e=>e.guardrail_name);eS(e)}catch(e){console.error("Failed to fetch guardrails:",e)}})(),e(),l()},[es]),(0,N.useEffect)(()=>{(async()=>{try{if(es){let e=sessionStorage.getItem("possibleUserRoles");if(e)eR(JSON.parse(e));else{let e=await (0,H.getPossibleUserRoles)(es);sessionStorage.setItem("possibleUserRoles",JSON.stringify(e)),eR(e)}}}catch(e){console.error("Error fetching possible user roles:",e)}})()},[es]);let ll=e_.includes("no-default-models")&&!eA,lt=async e=>{try{let l,s=e?.key_alias??"",a=e?.team_id??null;if((el?.filter(e=>e.team_id===a).map(e=>e.key_alias)??[]).includes(s))throw Error(`Key alias ${s} already exists for team with ID ${a}, please provide another key alias`);if(q.default.info("Making API Call"),ec(!0),"you"===ef)e.user_id=ea;else if("agent"===ef){if(!e6)return void k.message.error("Please select an agent");e.agent_id=e6}let r={};try{r=JSON.parse(e.metadata||"{}")}catch(e){console.error("Error parsing metadata:",e)}if("service_account"===ef&&(r.service_account_id=e.key_alias),eI.length>0&&(r={...r,logging:eI.filter(e=>e.callback_name)}),eq.length>0){let e=(0,F.mapDisplayToInternalNames)(eq);r={...r,litellm_disabled_callbacks:e}}if(eY&&(e.auto_rotate=!0,e.rotation_interval=eZ),e.duration&&""!==e.duration.trim()||(e.duration=null),e.metadata=JSON.stringify(r),e.allowed_vector_store_ids&&e.allowed_vector_store_ids.length>0&&(e.object_permission={vector_stores:e.allowed_vector_store_ids},delete e.allowed_vector_store_ids),e.allowed_mcp_servers_and_groups&&(e.allowed_mcp_servers_and_groups.servers?.length>0||e.allowed_mcp_servers_and_groups.accessGroups?.length>0)){e.object_permission||(e.object_permission={});let{servers:l,accessGroups:t}=e.allowed_mcp_servers_and_groups;l&&l.length>0&&(e.object_permission.mcp_servers=l),t&&t.length>0&&(e.object_permission.mcp_access_groups=t),delete e.allowed_mcp_servers_and_groups}let i=e.mcp_tool_permissions||{};if(Object.keys(i).length>0&&(e.object_permission||(e.object_permission={}),e.object_permission.mcp_tool_permissions=i),delete e.mcp_tool_permissions,e.allowed_mcp_access_groups&&e.allowed_mcp_access_groups.length>0&&(e.object_permission||(e.object_permission={}),e.object_permission.mcp_access_groups=e.allowed_mcp_access_groups,delete e.allowed_mcp_access_groups),e.allowed_agents_and_groups&&(e.allowed_agents_and_groups.agents?.length>0||e.allowed_agents_and_groups.accessGroups?.length>0)){e.object_permission||(e.object_permission={});let{agents:l,accessGroups:t}=e.allowed_agents_and_groups;l&&l.length>0&&(e.object_permission.agents=l),t&&t.length>0&&(e.object_permission.agent_access_groups=t),delete e.allowed_agents_and_groups}Object.keys(ez).length>0&&(e.aliases=JSON.stringify(ez)),e4?.router_settings&&Object.values(e4.router_settings).some(e=>null!=e&&""!==e)&&(e.router_settings=e4.router_settings),l="service_account"===ef?await (0,H.keyCreateServiceAccountCall)(es,e):await (0,H.keyCreateCall)(es,ea,e),console.log("key create Response:",l),et(l),en.invalidateQueries({queryKey:t.keyKeys.lists()}),em(l.key),eh(l.soft_budget),q.default.success("Virtual Key Created"),eo.resetFields(),localStorage.removeItem("userData"+ea)}catch(l){console.log("error in create key:",l);let e=(0,z.simplifyKeyGenerateError)(l);q.default.fromBackend(e)}};(0,N.useEffect)(()=>{ea&&er&&es&&X(ea,er,es,eA?.team_id??null).then(e=>{ey(Array.from(new Set([...eA?.models??[],...e])))}),eo.setFieldValue("models",[])},[eA,es,ea,er]);let ls=async e=>{if(!e)return void eK([]);e$(!0);try{let l=new URLSearchParams;if(l.append("user_email",e),null==es)return;let t=(await (0,H.userFilterUICall)(es,l)).map(e=>({label:`${e.user_email} (${e.user_id})`,value:e.user_id,user:e}));eK(t)}catch(e){console.error("Error fetching users:",e),q.default.fromBackend("Failed to search for users")}finally{e$(!1)}},la=(0,N.useCallback)((0,C.default)(e=>ls(e),300),[es]);return(0,l.jsxs)("div",{children:[er&&T.rolesWithWriteAccess.includes(er)&&(0,l.jsx)(c.Button,{className:"mx-auto",onClick:()=>ec(!0),children:"+ 创建新密钥"}),(0,l.jsx)(f.Modal,{open:ed,width:1e3,footer:null,onOk:e9,onCancel:le,children:(0,l.jsxs)(_.Form,{form:eo,onFinish:lt,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)(x.Title,{className:"mb-4",children:"密钥所有权"}),(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["所有者"," ",(0,l.jsx)(S.Tooltip,{title:"选择谁将拥有此虚拟密钥",children:(0,l.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),className:"mb-4",children:(0,l.jsxs)(j.Radio.Group,{onChange:e=>ej(e.target.value),value:ef,children:[(0,l.jsx)(j.Radio,{value:"you",children:"您"}),(0,l.jsx)(j.Radio,{value:"service_account",children:"服务账户"}),"Admin"===er&&(0,l.jsx)(j.Radio,{value:"another_user",children:"其他用户"}),(0,l.jsxs)(j.Radio,{value:"agent",children:["智能体 ",(0,l.jsx)(w.Tag,{color:"purple",children:"新"})]})]})}),"another_user"===ef&&(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["用户 ID"," ",(0,l.jsx)(S.Tooltip,{title:"将拥有此密钥并负责其使用的用户",children:(0,l.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"user_id",className:"mt-4",rules:[{required:"another_user"===ef,message:`请输入您要分配密钥的用户 ID`}],children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{style:{display:"flex",marginBottom:"8px"},children:[(0,l.jsx)(b.Select,{showSearch:!0,placeholder:"输入邮箱搜索用户",filterOption:!1,onSearch:e=>{la(e)},onSelect:(e,l)=>{let t;return t=l.user,void eo.setFieldsValue({user_id:t.user_id})},options:eD,loading:eB,allowClear:!0,style:{width:"100%"},notFoundContent:eB?"搜索中...":"未找到用户"}),(0,l.jsx)(g.Button,{onClick:()=>eP(!0),style:{marginLeft:"8px"},children:"创建用户"})]}),(0,l.jsx)("div",{className:"text-xs text-gray-500",children:"通过邮箱搜索用户"})]})}),"agent"===ef&&(0,l.jsxs)("div",{className:"mt-4 p-4 bg-purple-50 border border-purple-200 rounded-md",children:[(0,l.jsx)("div",{className:"mb-3",children:(0,l.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["选择智能体 ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]})}),(0,l.jsx)(b.Select,{showSearch:!0,placeholder:"选择智能体",style:{width:"100%"},value:e6,onChange:e=>e8(e),filterOption:(e,l)=>l?.label?.toLowerCase().includes(e.toLowerCase()),options:e5.map(e=>({label:e.agent_name||e.agent_id,value:e.agent_id}))}),(0,l.jsx)("div",{className:"text-xs text-gray-500 mt-2",children:"此密钥将被选定的智能体用于向 LiteLLM 发起请求"})]}),(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["团队"," ",(0,l.jsx)(S.Tooltip,{title:"此密钥所属的团队，决定可用模型和预算限制",children:(0,l.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"team_id",initialValue:e?e.team_id:null,className:"mt-4",rules:[{required:"service_account"===ef,message:"请为服务账户选择团队"}],help:"service_account"===ef?"必填":"",children:(0,l.jsx)(K.default,{teams:ee,onChange:e=>{eO(ee?.find(l=>l.team_id===e)||null)}})})]}),ll&&(0,l.jsx)("div",{className:"mb-8 p-4 bg-blue-50 border border-blue-200 rounded-md",children:(0,l.jsx)(p.Text,{className:"text-blue-800 text-sm",children:"请选择团队以继续配置您的虚拟密钥。如果您没有看到任何团队，请联系您的代理管理员为您提供模型访问权限或将您添加到团队中。 contact your Proxy Admin to either provide you with access to models or to add you to a team."})}),!ll&&(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)(x.Title,{className:"mb-4",children:"密钥详情"}),(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["you"===ef||"another_user"===ef?"密钥名称":"服务账户 ID"," ",(0,l.jsx)(S.Tooltip,{title:"you"===ef||"another_user"===ef?"用于识别此密钥的描述性名称":"此服务账户的唯一标识符",children:(0,l.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"key_alias",rules:[{required:!0,message:`请输入${"you"===ef?"密钥名称":"服务账户 ID"}`}],help:"必填",children:(0,l.jsx)(h.TextInput,{placeholder:""})}),(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["模型"," ",(0,l.jsx)(S.Tooltip,{title:"选择此密钥可以访问的模型。选择'所有团队模型'以授予对团队所有可用模型的访问权限",children:(0,l.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"models",rules:"management"===eJ||"read_only"===eJ?[]:[{required:!0,message:"请选择模型"}],help:"management"===eJ||"read_only"===eJ?"此密钥类型禁用模型字段":"必填",className:"mt-4",children:(0,l.jsxs)(b.Select,{mode:"multiple",placeholder:"选择模型",style:{width:"100%"},disabled:"management"===eJ||"read_only"===eJ,onChange:e=>{e.includes("all-team-models")&&eo.setFieldsValue({models:["all-team-models"]})},children:[(0,l.jsx)(Y,{value:"all-team-models",children:"所有团队模型"},"all-team-models"),e_.map(e=>(0,l.jsx)(Y,{value:e,children:(0,$.getModelDisplayName)(e)},e))]})}),(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["密钥类型"," ",(0,l.jsx)(S.Tooltip,{title:"选择密钥类型以确定此密钥可以访问的路由和操作",children:(0,l.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"key_type",initialValue:"llm_api",className:"mt-4",children:(0,l.jsxs)(b.Select,{defaultValue:"llm_api",placeholder:"选择密钥类型",style:{width:"100%"},optionLabelProp:"label",onChange:e=>{eW(e),("management"===e||"read_only"===e)&&eo.setFieldsValue({models:[]})},children:[(0,l.jsx)(Y,{value:"default",label:"默认",children:(0,l.jsxs)("div",{style:{padding:"4px 0"},children:[(0,l.jsx)("div",{style:{fontWeight:500},children:"默认"}),(0,l.jsx)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:"可调用 AI API + 管理路由"})]})}),(0,l.jsx)(Y,{value:"llm_api",label:"AI API",children:(0,l.jsxs)("div",{style:{padding:"4px 0"},children:[(0,l.jsx)("div",{style:{fontWeight:500},children:"AI API"}),(0,l.jsx)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:"仅可调用 AI API 路由（chat/completions、embeddings 等）"})]})}),(0,l.jsx)(Y,{value:"management",label:"管理",children:(0,l.jsxs)("div",{style:{padding:"4px 0"},children:[(0,l.jsx)("div",{style:{fontWeight:500},children:"管理"}),(0,l.jsx)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:"仅可调用管理路由（用户/团队/密钥管理）"})]})})]})})]}),!ll&&(0,l.jsx)("div",{className:"mb-8",children:(0,l.jsxs)(n.Accordion,{className:"mt-4 mb-4",children:[(0,l.jsx)(d.AccordionHeader,{children:(0,l.jsx)(x.Title,{className:"m-0",children:"可选设置"})}),(0,l.jsxs)(o.AccordionBody,{children:[(0,l.jsx)(_.Form.Item,{className:"mt-4",label:(0,l.jsxs)("span",{children:["最大预算"," ",(0,l.jsx)(S.Tooltip,{title:"此密钥可以消费的最大金额。达到后，密钥将被阻止发起进一步请求",children:(0,l.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"max_budget",help:`预算不能超过团队最大预算：$${e?.max_budget!==null&&e?.max_budget!==void 0?e?.max_budget:"无限制"}`,rules:[{validator:async(l,t)=>{if(t&&e&&null!==e.max_budget&&t>e.max_budget)throw Error(`预算不能超过团队最大预算：$${(0,a.formatNumberWithCommas)(e.max_budget,4)}`)}}],children:(0,l.jsx)(J.default,{step:.01,precision:2,width:200})}),(0,l.jsx)(_.Form.Item,{className:"mt-4",label:(0,l.jsxs)("span",{children:["重置预算"," ",(0,l.jsx)(S.Tooltip,{title:"预算应多久重置一次。例如，设置'每天'将每 24 小时重置一次预算",children:(0,l.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"budget_duration",help:`团队重置预算：${e?.budget_duration!==null&&e?.budget_duration!==void 0?e?.budget_duration:"无"}`,children:(0,l.jsx)(A.default,{onChange:e=>eo.setFieldValue("budget_duration",e)})}),(0,l.jsx)(_.Form.Item,{className:"mt-4",label:(0,l.jsxs)("span",{children:["每分钟 Token 限制 (TPM)"," ",(0,l.jsx)(S.Tooltip,{title:"此密钥每分钟可以处理的最大 token 数量。有助于控制使用和成本",children:(0,l.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"tpm_limit",help:`TPM 不能超过团队 TPM 限制：${e?.tpm_limit!==null&&e?.tpm_limit!==void 0?e?.tpm_limit:"无限制"}`,rules:[{validator:async(l,t)=>{if(t&&e&&null!==e.tpm_limit&&t>e.tpm_limit)throw Error(`TPM 限制不能超过团队 TPM 限制：${e.tpm_limit}`)}}],children:(0,l.jsx)(J.default,{step:1,width:400})}),(0,l.jsx)(V.default,{type:"tpm",name:"tpm_limit_type",className:"mt-4",initialValue:null,form:eo,showDetailedDescriptions:!0}),(0,l.jsx)(_.Form.Item,{className:"mt-4",label:(0,l.jsxs)("span",{children:["每分钟请求限制 (RPM)"," ",(0,l.jsx)(S.Tooltip,{title:"此密钥每分钟可以发起的最大 API 请求数。有助于防止滥用和管理负载",children:(0,l.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"rpm_limit",help:`RPM 不能超过团队 RPM 限制：${e?.rpm_limit!==null&&e?.rpm_limit!==void 0?e?.rpm_limit:"无限制"}`,rules:[{validator:async(l,t)=>{if(t&&e&&null!==e.rpm_limit&&t>e.rpm_limit)throw Error(`RPM 限制不能超过团队 RPM 限制：${e.rpm_limit}`)}}],children:(0,l.jsx)(J.default,{step:1,width:400})}),(0,l.jsx)(V.default,{type:"rpm",name:"rpm_limit_type",className:"mt-4",initialValue:null,form:eo,showDetailedDescriptions:!0}),(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["安全防护"," ",(0,l.jsx)(S.Tooltip,{title:"为此密钥应用安全防护以过滤内容或强制执行策略",children:(0,l.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/guardrails/quick_start",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,l.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})})]}),name:"guardrails",className:"mt-4",help:ei?"选择现有安全防护或输入新的":"企业功能 - 升级以按密钥设置安全防护",children:(0,l.jsx)(b.Select,{mode:"tags",style:{width:"100%"},disabled:!ei,placeholder:ei?"选择或输入安全防护":"企业功能 - 升级以按密钥设置安全防护",options:ew.map(e=>({value:e,label:e}))})}),(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["禁用全局安全防护"," ",(0,l.jsx)(S.Tooltip,{title:"启用后，此密钥将绕过任何配置为在每个请求上运行的安全防护（全局安全防护）",children:(0,l.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/guardrails/quick_start",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,l.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})})]}),name:"disable_global_guardrails",className:"mt-4",valuePropName:"checked",help:ei?"为此密钥绕过全局安全防护":"企业功能 - 升级以按密钥禁用全局安全防护",children:(0,l.jsx)(v.Switch,{disabled:!ei,checkedChildren:"是",unCheckedChildren:"否"})}),(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["策略"," ",(0,l.jsx)(S.Tooltip,{title:"为此密钥应用策略以控制安全防护和其他设置",children:(0,l.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/guardrails/guardrail_policies",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,l.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})})]}),name:"policies",className:"mt-4",help:ei?"选择现有策略或输入新的":"企业功能 - 升级以按密钥设置策略",children:(0,l.jsx)(b.Select,{mode:"tags",style:{width:"100%"},disabled:!ei,placeholder:ei?"选择或输入策略":"企业功能 - 升级以按密钥设置策略",options:ek.map(e=>({value:e,label:e}))})}),(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["提示词"," ",(0,l.jsx)(S.Tooltip,{title:"允许此密钥使用特定的提示词模板",children:(0,l.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/prompt_management",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,l.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})})]}),name:"prompts",className:"mt-4",help:ei?"选择现有提示词或输入新的":"企业功能 - 升级以按密钥设置提示词",children:(0,l.jsx)(b.Select,{mode:"tags",style:{width:"100%"},disabled:!ei,placeholder:ei?"选择或输入提示词":"企业功能 - 升级以按密钥设置提示词",options:eN.map(e=>({value:e,label:e}))})}),(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["访问组"," ",(0,l.jsx)(S.Tooltip,{title:"为此密钥分配访问组。访问组控制此密钥可以使用的模型、MCP 服务器和智能体",children:(0,l.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"access_group_ids",className:"mt-4",help:"选择要分配给此密钥的访问组",children:(0,l.jsx)(D.default,{placeholder:"选择访问组（可选）"})}),(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["允许的透传路由"," ",(0,l.jsx)(S.Tooltip,{title:"允许此密钥使用特定的透传路由",children:(0,l.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/pass_through",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,l.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})})]}),name:"allowed_passthrough_routes",className:"mt-4",help:ei?"选择现有透传路由或输入新的":"企业功能 - 升级以按密钥设置透传路由",children:(0,l.jsx)(M.default,{onChange:e=>eo.setFieldValue("allowed_passthrough_routes",e),value:eo.getFieldValue("allowed_passthrough_routes"),accessToken:es,placeholder:ei?"选择或输入透传路由":"企业功能 - 升级以按密钥设置透传路由",disabled:!ei,teamId:eA?eA.team_id:null})}),(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["允许的向量库"," ",(0,l.jsx)(S.Tooltip,{title:"选择此密钥可以访问的向量库。如果未选择，密钥将可以访问所有可用的向量库",children:(0,l.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"allowed_vector_store_ids",className:"mt-4",help:"选择此密钥可以访问的向量库。留空则可访问所有向量库",children:(0,l.jsx)(W.default,{onChange:e=>eo.setFieldValue("allowed_vector_store_ids",e),value:eo.getFieldValue("allowed_vector_store_ids"),accessToken:es,placeholder:"选择向量库（可选）"})}),(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["元数据"," ",(0,l.jsx)(S.Tooltip,{title:"包含有关此密钥的附加信息的 JSON 对象。用于跟踪或自定义逻辑",children:(0,l.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"metadata",className:"mt-4",children:(0,l.jsx)(y.Input.TextArea,{rows:4,placeholder:"输入 JSON 格式的元数据"})}),(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["标签"," ",(0,l.jsx)(S.Tooltip,{title:"用于跟踪消费和/或进行基于标签的路由。用于分析和过滤",children:(0,l.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"tags",className:"mt-4",help:`用于跟踪消费和/或进行基于标签的路由。`,children:(0,l.jsx)(b.Select,{mode:"tags",style:{width:"100%"},placeholder:"输入标签",tokenSeparators:[","],options:eb})}),(0,l.jsxs)(n.Accordion,{className:"mt-4 mb-4",children:[(0,l.jsx)(d.AccordionHeader,{children:(0,l.jsx)("b",{children:"MCP 设置"})}),(0,l.jsxs)(o.AccordionBody,{children:[(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["允许的 MCP 服务器"," ",(0,l.jsx)(S.Tooltip,{title:"选择此密钥可以访问的 MCP 服务器或访问组",children:(0,l.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"allowed_mcp_servers_and_groups",help:"选择此密钥可以访问的 MCP 服务器或访问组",children:(0,l.jsx)(U.default,{onChange:e=>eo.setFieldValue("allowed_mcp_servers_and_groups",e),value:eo.getFieldValue("allowed_mcp_servers_and_groups"),accessToken:es,placeholder:"选择 MCP 服务器或访问组（可选）"})}),(0,l.jsx)(_.Form.Item,{name:"mcp_tool_permissions",initialValue:{},hidden:!0,children:(0,l.jsx)(y.Input,{type:"hidden"})}),(0,l.jsx)(_.Form.Item,{noStyle:!0,shouldUpdate:(e,l)=>e.allowed_mcp_servers_and_groups!==l.allowed_mcp_servers_and_groups||e.mcp_tool_permissions!==l.mcp_tool_permissions,children:()=>(0,l.jsx)("div",{className:"mt-6",children:(0,l.jsx)(G.default,{accessToken:es,selectedServers:eo.getFieldValue("allowed_mcp_servers_and_groups")?.servers||[],toolPermissions:eo.getFieldValue("mcp_tool_permissions")||{},onChange:e=>eo.setFieldsValue({mcp_tool_permissions:e})})})})]})]}),(0,l.jsxs)(n.Accordion,{className:"mt-4 mb-4",children:[(0,l.jsx)(d.AccordionHeader,{children:(0,l.jsx)("b",{children:"智能体设置"})}),(0,l.jsx)(o.AccordionBody,{children:(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["允许的智能体"," ",(0,l.jsx)(S.Tooltip,{title:"选择此密钥可以访问的智能体或访问组",children:(0,l.jsx)(r.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"allowed_agents_and_groups",help:"选择此密钥可以访问的智能体或访问组",children:(0,l.jsx)(I.default,{onChange:e=>eo.setFieldValue("allowed_agents_and_groups",e),value:eo.getFieldValue("allowed_agents_and_groups"),accessToken:es,placeholder:"选择智能体或访问组（可选）"})})})]}),ei?(0,l.jsxs)(n.Accordion,{className:"mt-4 mb-4",children:[(0,l.jsx)(d.AccordionHeader,{children:(0,l.jsx)("b",{children:"日志设置"})}),(0,l.jsx)(o.AccordionBody,{children:(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)(E.default,{value:eI,onChange:eF,premiumUser:!0,disabledCallbacks:eq,onDisabledCallbacksChange:eH})})})]}):(0,l.jsx)(S.Tooltip,{title:(0,l.jsxs)("span",{children:["密钥级别的日志设置是企业功能，请联系 -",(0,l.jsx)("a",{href:"https://www.litellm.ai/enterprise",target:"_blank",children:"https://www.litellm.ai/enterprise"})]}),placement:"top",children:(0,l.jsxs)("div",{style:{position:"relative"},children:[(0,l.jsx)("div",{style:{opacity:.5},children:(0,l.jsxs)(n.Accordion,{className:"mt-4 mb-4",children:[(0,l.jsx)(d.AccordionHeader,{children:(0,l.jsx)("b",{children:"日志设置"})}),(0,l.jsx)(o.AccordionBody,{children:(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)(E.default,{value:eI,onChange:eF,premiumUser:!1,disabledCallbacks:eq,onDisabledCallbacksChange:eH})})})]})}),(0,l.jsx)("div",{style:{position:"absolute",inset:0,cursor:"not-allowed"}})]})}),(0,l.jsxs)(n.Accordion,{className:"mt-4 mb-4",children:[(0,l.jsx)(d.AccordionHeader,{children:(0,l.jsx)("b",{children:"路由设置"})}),(0,l.jsx)(o.AccordionBody,{children:(0,l.jsx)("div",{className:"mt-4 w-full",children:(0,l.jsx)(R.default,{accessToken:es||"",value:e4||void 0,onChange:e1,modelData:ex.length>0?{data:ex.map(e=>({model_name:e}))}:void 0},e2)})})]},`router-settings-accordion-${e2}`),(0,l.jsxs)(n.Accordion,{className:"mt-4 mb-4",children:[(0,l.jsx)(d.AccordionHeader,{children:(0,l.jsx)("b",{children:"模型别名"})}),(0,l.jsx)(o.AccordionBody,{children:(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsx)(p.Text,{className:"text-sm text-gray-600 mb-4",children:"为模型创建可在 API 调用中使用的自定义别名。这允许您为特定模型创建快捷方式。 shortcuts for specific models."}),(0,l.jsx)(P.default,{accessToken:es,initialModelAliases:ez,onAliasUpdate:eQ,showExampleConfig:!1})]})})]}),(0,l.jsxs)(n.Accordion,{className:"mt-4 mb-4",children:[(0,l.jsx)(d.AccordionHeader,{children:(0,l.jsx)("b",{children:"密钥生命周期"})}),(0,l.jsx)(o.AccordionBody,{children:(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)(L.default,{form:eo,autoRotationEnabled:eY,onAutoRotationChange:eX,rotationInterval:eZ,onRotationIntervalChange:e0,isCreateMode:!0})})}),(0,l.jsx)(_.Form.Item,{name:"duration",hidden:!0,initialValue:null,children:(0,l.jsx)(y.Input,{})})]}),(0,l.jsxs)(n.Accordion,{className:"mt-4 mb-4",children:[(0,l.jsx)(d.AccordionHeader,{children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("b",{children:"高级设置"}),(0,l.jsx)(S.Tooltip,{title:(0,l.jsxs)("span",{children:["在我们的文档中了解更多关于高级设置的信息"," ",(0,l.jsx)("a",{href:H.proxyBaseUrl?`${H.proxyBaseUrl}/#/key%20management/generate_key_fn_key_generate_post`:"/#/key%20management/generate_key_fn_key_generate_post",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300",children:"文档"})]}),children:(0,l.jsx)(r.InfoCircleOutlined,{className:"text-gray-400 hover:text-gray-300 cursor-help"})})]})}),(0,l.jsx)(o.AccordionBody,{children:(0,l.jsx)(O.default,{schemaComponent:"GenerateKeyRequest",form:eo,excludedFields:["key_alias","team_id","models","duration","metadata","tags","guardrails","max_budget","budget_duration","tpm_limit","rpm_limit"]})})]})]})]})}),(0,l.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,l.jsx)(g.Button,{htmlType:"submit",disabled:ll,style:{opacity:ll?.5:1},children:"创建密钥"})})]})}),eL&&(0,l.jsx)(f.Modal,{title:"创建新用户",open:eL,onCancel:()=>eP(!1),footer:null,width:800,children:(0,l.jsx)(B.CreateUserButton,{userID:ea,accessToken:es,teams:ee,possibleUIRoles:eV,onUserCreated:e=>{eE(e),eo.setFieldsValue({user_id:e}),eP(!1)},isEmbedded:!0})}),eu&&(0,l.jsx)(f.Modal,{open:ed,onOk:e9,onCancel:le,footer:null,children:(0,l.jsxs)(m.Grid,{numItems:1,className:"gap-2 w-full",children:[(0,l.jsx)(x.Title,{children:"保存您的密钥"}),(0,l.jsx)(u.Col,{numColSpan:1,children:null!=eu?(0,l.jsx)(Q.default,{apiKey:eu}):(0,l.jsx)(p.Text,{children:"密钥创建中，这可能需要 30 秒"})})]})})]})},"fetchTeamModels",0,X,"fetchUserModels",0,Z])}]);