(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,822315,(e,t,a)=>{e.e,t.exports=function(){"use strict";var e="millisecond",t="second",a="minute",n="hour",r="week",s="month",l="quarter",o="year",i="date",c="Invalid Date",u=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m=function(e,t,a){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(a)+e},f="en",p={};p[f]={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],a=e%100;return"["+e+(t[(a-20)%10]||t[a]||t[0])+"]"}};var h="$isDayjsObject",g=function(e){return e instanceof y||!(!e||!e[h])},x=function e(t,a,n){var r;if(!t)return f;if("string"==typeof t){var s=t.toLowerCase();p[s]&&(r=s),a&&(p[s]=a,r=s);var l=t.split("-");if(!r&&l.length>1)return e(l[0])}else{var o=t.name;p[o]=t,r=o}return!n&&r&&(f=r),r||!n&&f},v=function(e,t){if(g(e))return e.clone();var a="object"==typeof t?t:{};return a.date=e,a.args=arguments,new y(a)},b={s:m,z:function(e){var t=-e.utcOffset(),a=Math.abs(t);return(t<=0?"+":"-")+m(Math.floor(a/60),2,"0")+":"+m(a%60,2,"0")},m:function e(t,a){if(t.date()<a.date())return-e(a,t);var n=12*(a.year()-t.year())+(a.month()-t.month()),r=t.clone().add(n,s),l=a-r<0,o=t.clone().add(n+(l?-1:1),s);return+(-(n+(a-r)/(l?r-o:o-r))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(c){return({M:s,y:o,w:r,d:"day",D:i,h:n,m:a,s:t,ms:e,Q:l})[c]||String(c||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}};b.l=x,b.i=g,b.w=function(e,t){return v(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var y=function(){function m(e){this.$L=x(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[h]=!0}var f=m.prototype;return f.parse=function(e){this.$d=function(e){var t=e.date,a=e.utc;if(null===t)return new Date(NaN);if(b.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(u);if(n){var r=n[2]-1||0,s=(n[7]||"0").substring(0,3);return a?new Date(Date.UTC(n[1],r,n[3]||1,n[4]||0,n[5]||0,n[6]||0,s)):new Date(n[1],r,n[3]||1,n[4]||0,n[5]||0,n[6]||0,s)}}return new Date(t)}(e),this.init()},f.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},f.$utils=function(){return b},f.isValid=function(){return this.$d.toString()!==c},f.isSame=function(e,t){var a=v(e);return this.startOf(t)<=a&&a<=this.endOf(t)},f.isAfter=function(e,t){return v(e)<this.startOf(t)},f.isBefore=function(e,t){return this.endOf(t)<v(e)},f.$g=function(e,t,a){return b.u(e)?this[t]:this.set(a,e)},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(e,l){var c=this,u=!!b.u(l)||l,d=b.p(e),m=function(e,t){var a=b.w(c.$u?Date.UTC(c.$y,t,e):new Date(c.$y,t,e),c);return u?a:a.endOf("day")},f=function(e,t){return b.w(c.toDate()[e].apply(c.toDate("s"),(u?[0,0,0,0]:[23,59,59,999]).slice(t)),c)},p=this.$W,h=this.$M,g=this.$D,x="set"+(this.$u?"UTC":"");switch(d){case o:return u?m(1,0):m(31,11);case s:return u?m(1,h):m(0,h+1);case r:var v=this.$locale().weekStart||0,y=(p<v?p+7:p)-v;return m(u?g-y:g+(6-y),h);case"day":case i:return f(x+"Hours",0);case n:return f(x+"Minutes",1);case a:return f(x+"Seconds",2);case t:return f(x+"Milliseconds",3);default:return this.clone()}},f.endOf=function(e){return this.startOf(e,!1)},f.$set=function(r,l){var c,u=b.p(r),d="set"+(this.$u?"UTC":""),m=((c={}).day=d+"Date",c[i]=d+"Date",c[s]=d+"Month",c[o]=d+"FullYear",c[n]=d+"Hours",c[a]=d+"Minutes",c[t]=d+"Seconds",c[e]=d+"Milliseconds",c)[u],f="day"===u?this.$D+(l-this.$W):l;if(u===s||u===o){var p=this.clone().set(i,1);p.$d[m](f),p.init(),this.$d=p.set(i,Math.min(this.$D,p.daysInMonth())).$d}else m&&this.$d[m](f);return this.init(),this},f.set=function(e,t){return this.clone().$set(e,t)},f.get=function(e){return this[b.p(e)]()},f.add=function(e,l){var i,c=this;e=Number(e);var u=b.p(l),d=function(t){var a=v(c);return b.w(a.date(a.date()+Math.round(t*e)),c)};if(u===s)return this.set(s,this.$M+e);if(u===o)return this.set(o,this.$y+e);if("day"===u)return d(1);if(u===r)return d(7);var m=((i={})[a]=6e4,i[n]=36e5,i[t]=1e3,i)[u]||1,f=this.$d.getTime()+e*m;return b.w(f,this)},f.subtract=function(e,t){return this.add(-1*e,t)},f.format=function(e){var t=this,a=this.$locale();if(!this.isValid())return a.invalidDate||c;var n=e||"YYYY-MM-DDTHH:mm:ssZ",r=b.z(this),s=this.$H,l=this.$m,o=this.$M,i=a.weekdays,u=a.months,m=a.meridiem,f=function(e,a,r,s){return e&&(e[a]||e(t,n))||r[a].slice(0,s)},p=function(e){return b.s(s%12||12,e,"0")},h=m||function(e,t,a){var n=e<12?"AM":"PM";return a?n.toLowerCase():n};return n.replace(d,function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return b.s(t.$y,4,"0");case"M":return o+1;case"MM":return b.s(o+1,2,"0");case"MMM":return f(a.monthsShort,o,u,3);case"MMMM":return f(u,o);case"D":return t.$D;case"DD":return b.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return f(a.weekdaysMin,t.$W,i,2);case"ddd":return f(a.weekdaysShort,t.$W,i,3);case"dddd":return i[t.$W];case"H":return String(s);case"HH":return b.s(s,2,"0");case"h":return p(1);case"hh":return p(2);case"a":return h(s,l,!0);case"A":return h(s,l,!1);case"m":return String(l);case"mm":return b.s(l,2,"0");case"s":return String(t.$s);case"ss":return b.s(t.$s,2,"0");case"SSS":return b.s(t.$ms,3,"0");case"Z":return r}return null}(e)||r.replace(":","")})},f.utcOffset=function(){return-(15*Math.round(this.$d.getTimezoneOffset()/15))},f.diff=function(e,i,c){var u,d=this,m=b.p(i),f=v(e),p=(f.utcOffset()-this.utcOffset())*6e4,h=this-f,g=function(){return b.m(d,f)};switch(m){case o:u=g()/12;break;case s:u=g();break;case l:u=g()/3;break;case r:u=(h-p)/6048e5;break;case"day":u=(h-p)/864e5;break;case n:u=h/36e5;break;case a:u=h/6e4;break;case t:u=h/1e3;break;default:u=h}return c?u:b.a(u)},f.daysInMonth=function(){return this.endOf(s).$D},f.$locale=function(){return p[this.$L]},f.locale=function(e,t){if(!e)return this.$L;var a=this.clone(),n=x(e,t,!0);return n&&(a.$L=n),a},f.clone=function(){return b.w(this.$d,this)},f.toDate=function(){return new Date(this.valueOf())},f.toJSON=function(){return this.isValid()?this.toISOString():null},f.toISOString=function(){return this.$d.toISOString()},f.toString=function(){return this.$d.toUTCString()},m}(),k=y.prototype;return v.prototype=k,[["$ms",e],["$s",t],["$m",a],["$H",n],["$W","day"],["$M",s],["$y",o],["$D",i]].forEach(function(e){k[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),v.extend=function(e,t){return e.$i||(e(t,y,v),e.$i=!0),v},v.locale=x,v.isDayjs=g,v.unix=function(e){return v(1e3*e)},v.en=p[f],v.Ls=p,v.p={},v}()},238439,(e,t,a)=>{e.e,t.exports=function(){"use strict";var e="week",t="year";return function(a,n,r){var s=n.prototype;s.week=function(a){if(void 0===a&&(a=null),null!==a)return this.add(7*(a-this.week()),"day");var n=this.$locale().yearStart||1;if(11===this.month()&&this.date()>25){var s=r(this).startOf(t).add(1,t).date(n),l=r(this).endOf(e);if(s.isBefore(l))return 1}var o=r(this).startOf(t).date(n).startOf(e).subtract(1,"millisecond"),i=this.diff(o,e,!0);return i<0?r(this).startOf("week").week():Math.ceil(i)},s.weeks=function(e){return void 0===e&&(e=null),this.week(e)}}}()},905540,(e,t,a)=>{e.e,t.exports=function(e,t){t.prototype.weekday=function(e){var t=this.$locale().weekStart||0,a=this.$W,n=(a<t?a+7:a)-t;return this.$utils().u(e)?n:this.subtract(n,"day").add(e,"day")}}},235971,(e,t,a)=>{e.e,t.exports=function(e,t,a){var n=t.prototype,r=function(e){return e&&(e.indexOf?e:e.s)},s=function(e,t,a,n,s){var l=e.name?e:e.$locale(),o=r(l[t]),i=r(l[a]),c=o||i.map(function(e){return e.slice(0,n)});if(!s)return c;var u=l.weekStart;return c.map(function(e,t){return c[(t+(u||0))%7]})},l=function(){return a.Ls[a.locale()]},o=function(e,t){return e.formats[t]||e.formats[t.toUpperCase()].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(e,t,a){return t||a.slice(1)})},i=function(){var e=this;return{months:function(t){return t?t.format("MMMM"):s(e,"months")},monthsShort:function(t){return t?t.format("MMM"):s(e,"monthsShort","months",3)},firstDayOfWeek:function(){return e.$locale().weekStart||0},weekdays:function(t){return t?t.format("dddd"):s(e,"weekdays")},weekdaysMin:function(t){return t?t.format("dd"):s(e,"weekdaysMin","weekdays",2)},weekdaysShort:function(t){return t?t.format("ddd"):s(e,"weekdaysShort","weekdays",3)},longDateFormat:function(t){return o(e.$locale(),t)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};n.localeData=function(){return i.bind(this)()},a.localeData=function(){var e=l();return{firstDayOfWeek:function(){return e.weekStart||0},weekdays:function(){return a.weekdays()},weekdaysShort:function(){return a.weekdaysShort()},weekdaysMin:function(){return a.weekdaysMin()},months:function(){return a.months()},monthsShort:function(){return a.monthsShort()},longDateFormat:function(t){return o(e,t)},meridiem:e.meridiem,ordinal:e.ordinal}},a.months=function(){return s(l(),"months")},a.monthsShort=function(){return s(l(),"monthsShort","months",3)},a.weekdays=function(e){return s(l(),"weekdays",null,null,e)},a.weekdaysShort=function(e){return s(l(),"weekdaysShort","weekdays",3,e)},a.weekdaysMin=function(e){return s(l(),"weekdaysMin","weekdays",2,e)}}},2221,(e,t,a)=>{e.e,t.exports=function(e,t){t.prototype.weekYear=function(){var e=this.month(),t=this.week(),a=this.year();return 1===t&&11===e?a+1:0===e&&t>=52?a-1:a}}},83593,(e,t,a)=>{e.e,t.exports=function(e,t){var a=t.prototype,n=a.format;a.format=function(e){var t=this,a=this.$locale();if(!this.isValid())return n.bind(this)(e);var r=this.$utils(),s=(e||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(e){switch(e){case"Q":return Math.ceil((t.$M+1)/3);case"Do":return a.ordinal(t.$D);case"gggg":return t.weekYear();case"GGGG":return t.isoWeekYear();case"wo":return a.ordinal(t.week(),"W");case"w":case"ww":return r.s(t.week(),"w"===e?1:2,"0");case"W":case"WW":return r.s(t.isoWeek(),"W"===e?1:2,"0");case"k":case"kk":return r.s(String(0===t.$H?24:t.$H),"k"===e?1:2,"0");case"X":return Math.floor(t.$d.getTime()/1e3);case"x":return t.$d.getTime();case"z":return"["+t.offsetName()+"]";case"zzz":return"["+t.offsetName("long")+"]";default:return e}});return n.bind(this)(s)}}},346628,(e,t,a)=>{e.e,t.exports=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,a=/\d/,n=/\d\d/,r=/\d\d?/,s=/\d*[^-_:/,()\s\d]+/,l={},o=function(e){return(e*=1)+(e>68?1900:2e3)},i=function(e){return function(t){this[e]=+t}},c=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e||"Z"===e)return 0;var t=e.match(/([+-]|\d\d)/g),a=60*t[1]+(+t[2]||0);return 0===a?0:"+"===t[0]?-a:a}(e)}],u=function(e){var t=l[e];return t&&(t.indexOf?t:t.s.concat(t.f))},d=function(e,t){var a,n=l.meridiem;if(n){for(var r=1;r<=24;r+=1)if(e.indexOf(n(r,0,t))>-1){a=r>12;break}}else a=e===(t?"pm":"PM");return a},m={A:[s,function(e){this.afternoon=d(e,!1)}],a:[s,function(e){this.afternoon=d(e,!0)}],Q:[a,function(e){this.month=3*(e-1)+1}],S:[a,function(e){this.milliseconds=100*e}],SS:[n,function(e){this.milliseconds=10*e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[r,i("seconds")],ss:[r,i("seconds")],m:[r,i("minutes")],mm:[r,i("minutes")],H:[r,i("hours")],h:[r,i("hours")],HH:[r,i("hours")],hh:[r,i("hours")],D:[r,i("day")],DD:[n,i("day")],Do:[s,function(e){var t=l.ordinal,a=e.match(/\d+/);if(this.day=a[0],t)for(var n=1;n<=31;n+=1)t(n).replace(/\[|\]/g,"")===e&&(this.day=n)}],w:[r,i("week")],ww:[n,i("week")],M:[r,i("month")],MM:[n,i("month")],MMM:[s,function(e){var t=u("months"),a=(u("monthsShort")||t.map(function(e){return e.slice(0,3)})).indexOf(e)+1;if(a<1)throw Error();this.month=a%12||a}],MMMM:[s,function(e){var t=u("months").indexOf(e)+1;if(t<1)throw Error();this.month=t%12||t}],Y:[/[+-]?\d+/,i("year")],YY:[n,function(e){this.year=o(e)}],YYYY:[/\d{4}/,i("year")],Z:c,ZZ:c};return function(a,n,r){r.p.customParseFormat=!0,a&&a.parseTwoDigitYear&&(o=a.parseTwoDigitYear);var s=n.prototype,i=s.parse;s.parse=function(a){var n=a.date,s=a.utc,o=a.args;this.$u=s;var c=o[1];if("string"==typeof c){var u=!0===o[2],d=!0===o[3],f=o[2];d&&(f=o[2]),l=this.$locale(),!u&&f&&(l=r.Ls[f]),this.$d=function(a,n,r,s){try{if(["x","X"].indexOf(n)>-1)return new Date(("X"===n?1e3:1)*a);var o=(function(a){var n,r;n=a,r=l&&l.formats;for(var s=(a=n.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(t,a,n){var s=n&&n.toUpperCase();return a||r[n]||e[n]||r[s].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(e,t,a){return t||a.slice(1)})})).match(t),o=s.length,i=0;i<o;i+=1){var c=s[i],u=m[c],d=u&&u[0],f=u&&u[1];s[i]=f?{regex:d,parser:f}:c.replace(/^\[|\]$/g,"")}return function(e){for(var t={},a=0,n=0;a<o;a+=1){var r=s[a];if("string"==typeof r)n+=r.length;else{var l=r.regex,i=r.parser,c=e.slice(n),u=l.exec(c)[0];i.call(t,u),e=e.replace(u,"")}}return function(e){var t=e.afternoon;if(void 0!==t){var a=e.hours;t?a<12&&(e.hours+=12):12===a&&(e.hours=0),delete e.afternoon}}(t),t}})(n)(a),i=o.year,c=o.month,u=o.day,d=o.hours,f=o.minutes,p=o.seconds,h=o.milliseconds,g=o.zone,x=o.week,v=new Date,b=u||(i||c?1:v.getDate()),y=i||v.getFullYear(),k=0;i&&!c||(k=c>0?c-1:v.getMonth());var _,j=d||0,w=f||0,C=p||0,N=h||0;return g?new Date(Date.UTC(y,k,b,j,w,C,N+60*g.offset*1e3)):r?new Date(Date.UTC(y,k,b,j,w,C,N)):(_=new Date(y,k,b,j,w,C,N),x&&(_=s(_).week(x).toDate()),_)}catch(e){return new Date("")}}(n,c,s,r),this.init(),f&&!0!==f&&(this.$L=this.locale(f).$L),(u||d)&&n!=this.format(c)&&(this.$d=new Date("")),l={}}else if(c instanceof Array)for(var p=c.length,h=1;h<=p;h+=1){o[1]=c[h-1];var g=r.apply(this,o);if(g.isValid()){this.$d=g.$d,this.$L=g.$L,this.init();break}h===p&&(this.$d=new Date(""))}else i.call(this,a)}}}()},256331,(e,t,a)=>{e.e,t.exports=function(e){"use strict";var t={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(e,t){return"W"===t?e+"周":e+"日"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(e,t){var a=100*e+t;return a<600?"凌晨":a<900?"早上":a<1100?"上午":a<1300?"中午":a<1800?"下午":"晚上"}};return(e&&"object"==typeof e&&"default"in e?e:{default:e}).default.locale(t,null,!0),t}(e.r(822315))},797305,289793,e=>{"use strict";var t=e.i(843476),a=e.i(827252),n=e.i(56456),r=e.i(771674),s=e.i(584935),l=e.i(304967),o=e.i(309426),i=e.i(350967),c=e.i(197647),u=e.i(653824),d=e.i(881073),m=e.i(404206),f=e.i(723731),p=e.i(599724),h=e.i(629569),g=e.i(560445),x=e.i(560025),v=e.i(199133),b=e.i(592968),y=e.i(898586),k=e.i(152473),_=e.i(822315),j=e.i(271645),w=e.i(111110),C=e.i(764205),N=e.i(266027),S=e.i(243652),T=e.i(708347),M=e.i(135214);let $=(0,S.createQueryKeys)("agents"),D=()=>{let{accessToken:e,userRole:t}=(0,M.default)();return(0,N.useQuery)({queryKey:$.list({}),queryFn:async()=>await (0,C.getAgentsList)(e),enabled:!!e&&T.all_admin_roles.includes(t||"")})};e.s(["useAgents",0,D],289793);let E=(0,S.createQueryKeys)("customers");var q=e.i(738014),P=e.i(621482);let O=(0,S.createQueryKeys)("infiniteUsers"),I=50;var L=e.i(500330),A=e.i(994388),F=e.i(980187),R=e.i(476961),Y=e.i(362024);let H={blue:"#3b82f6",cyan:"#06b6d4",indigo:"#6366f1",green:"#22c55e",red:"#ef4444",purple:"#8b5cf6",emerald:"#37bc7d"},W=({active:e,payload:a,label:n})=>{let{locale:r}=(0,w.useLanguage)(),s="zh-CN"===r;if(e&&a&&a.length){let e=e=>e.replace("metrics.","").replace(/_/g," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");return(0,t.jsxs)("div",{className:"w-56 rounded-tremor-default border border-tremor-border bg-tremor-background p-2 text-tremor-default shadow-tremor-dropdown",children:[(0,t.jsx)("p",{className:"text-tremor-content-strong",children:n}),a.map(a=>{let n,r=a.dataKey?.toString();if(!r||!a.payload)return null;let l=((e,t)=>{let a=t.substring(t.indexOf(".")+1);if(e.metrics&&a in e.metrics)return e.metrics[a]})(a.payload,r),o=r.includes("spend"),i=void 0!==l?o?`\xa5${l.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`:l.toLocaleString():"N/A",c=H[a.color]||a.color;return(0,t.jsxs)("div",{className:"flex items-center justify-between space-x-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"h-2 w-2 shrink-0 rounded-full ring-2 ring-white drop-shadow-md",style:{backgroundColor:c}}),(0,t.jsx)("p",{className:"font-medium text-tremor-content dark:text-dark-tremor-content",children:(n=r.replace("metrics.",""),s&&({successful_requests:"成功请求数",failed_requests:"失败请求数",total_tokens:"总 Token 数",prompt_tokens:"输入 Token 数",completion_tokens:"输出 Token 数",api_requests:"总请求数",spend:"花费",cache_read_input_tokens:"缓存读取输入 Token",cache_creation_input_tokens:"缓存创建输入 Token"})[n]||e(r))})]}),(0,t.jsx)("p",{className:"font-medium text-tremor-content-emphasis dark:text-dark-tremor-content-emphasis",children:i})]},r)})]})}return null},V=({categories:e,colors:a})=>{let{locale:n}=(0,w.useLanguage)(),r="zh-CN"===n,s=e=>e.replace("metrics.","").replace(/_/g," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");return(0,t.jsx)("div",{className:"flex items-center justify-end space-x-4",children:e.map((e,n)=>{let l,o=H[a[n]]||a[n];return(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"h-2 w-2 shrink-0 rounded-full ring-4 ring-white",style:{backgroundColor:o}}),(0,t.jsx)("p",{className:"text-sm text-tremor-content dark:text-dark-tremor-content",children:(l=e.replace("metrics.",""),r&&({successful_requests:"成功请求数",failed_requests:"失败请求数",total_tokens:"总 Token 数",prompt_tokens:"输入 Token 数",completion_tokens:"输出 Token 数",api_requests:"总请求数",spend:"花费",cache_read_input_tokens:"缓存读取输入 Token",cache_creation_input_tokens:"缓存创建输入 Token"})[l]||s(e))})]},e)})})};var z=e.i(291542);let B=({topModels:e})=>{let{t:a}=(0,w.useLanguage)(),[n,r]=(0,j.useState)("table"),o=(0,j.useMemo)(()=>[{title:a("usagePage.keyModelUsage.model"),dataIndex:"model",key:"model",render:e=>e||"-"},{title:a("usagePage.keyModelUsage.spend"),dataIndex:"spend",key:"spend",render:e=>`\xa5${(0,L.formatNumberWithCommas)(e)}`},{title:a("usagePage.keyModelUsage.successful"),dataIndex:"successful_requests",key:"successful_requests",render:e=>(0,t.jsx)("span",{className:"text-green-600",children:e?.toLocaleString()||0})},{title:a("usagePage.keyModelUsage.failed"),dataIndex:"failed_requests",key:"failed_requests",render:e=>(0,t.jsx)("span",{className:"text-red-600",children:e?.toLocaleString()||0})},{title:a("usagePage.keyModelUsage.tokens"),dataIndex:"tokens",key:"tokens",render:e=>e?.toLocaleString()||0}],[a]);return 0===e.length?null:(0,t.jsxs)(l.Card,{className:"mt-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,t.jsx)(h.Title,{children:a("usagePage.keyModelUsage.title")}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("button",{onClick:()=>r("table"),className:`px-3 py-1 text-sm rounded-md ${"table"===n?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:a("usagePage.keyModelUsage.table")}),(0,t.jsx)("button",{onClick:()=>r("chart"),className:`px-3 py-1 text-sm rounded-md ${"chart"===n?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:a("usagePage.keyModelUsage.chart")})]})]}),"chart"===n?(0,t.jsx)("div",{className:"max-h-[234px] overflow-y-auto",children:(0,t.jsx)(s.BarChart,{style:{height:40*e.length},data:e.map(e=>({key:e.model,spend:e.spend})),index:"key",categories:["spend"],colors:["cyan"],valueFormatter:e=>`\xa5${(0,L.formatNumberWithCommas)(e)}`,layout:"vertical",yAxisWidth:180,tickGap:5,showLegend:!1})}):(0,t.jsx)(z.Table,{columns:o,dataSource:e,rowKey:"model",size:"small",pagination:!1,scroll:e.length>5?{y:195}:void 0})]})};function U(e){return e>=1e6?(e/1e6).toFixed(2)+"M":e>=1e3?e/1e3+"k":e.toString()}function K(e){return 0===e?"¥0":e>=1e6?"¥"+e/1e6+"M":e>=1e3?"¥"+e/1e3+"k":"¥"+e}let G=({modelName:e,metrics:a,labels:n,hidePromptCachingMetrics:r=!1})=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(i.Grid,{numItems:4,className:"gap-4",children:[(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(p.Text,{children:n.totalRequests}),(0,t.jsx)(h.Title,{children:a.total_requests.toLocaleString()})]}),(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(p.Text,{children:n.totalSuccessfulRequests}),(0,t.jsx)(h.Title,{children:a.total_successful_requests.toLocaleString()})]}),(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(p.Text,{children:n.totalTokens}),(0,t.jsx)(h.Title,{children:a.total_tokens.toLocaleString()}),(0,t.jsxs)(p.Text,{children:[Math.round(a.total_tokens/a.total_successful_requests)," ",n.avgPerSuccessfulRequest]})]}),(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(p.Text,{children:n.totalSpend}),(0,t.jsxs)(h.Title,{children:["¥",(0,L.formatNumberWithCommas)(a.total_spend,2)]}),(0,t.jsxs)(p.Text,{children:["¥",(0,L.formatNumberWithCommas)(a.total_spend/a.total_successful_requests,3)," ",n.perSuccessfulRequest]})]})]}),a.top_api_keys&&a.top_api_keys.length>0&&(0,t.jsxs)(l.Card,{className:"mt-4",children:[(0,t.jsx)(h.Title,{children:n.topApiKeysBySpend}),(0,t.jsx)("div",{className:"mt-3",children:(0,t.jsx)("div",{className:"grid grid-cols-1 gap-2",children:a.top_api_keys.map((e,a)=>(0,t.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(p.Text,{className:"font-medium",children:e.key_alias||`${e.api_key.substring(0,10)}...`}),e.team_id&&(0,t.jsxs)(p.Text,{className:"text-xs text-gray-500",children:[n.team,": ",e.team_id]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)(p.Text,{className:"font-medium",children:["¥",(0,L.formatNumberWithCommas)(e.spend,2)]}),(0,t.jsxs)(p.Text,{className:"text-xs text-gray-500",children:[e.requests.toLocaleString()," ",n.requests," | ",e.tokens.toLocaleString()," ",n.tokens]})]})]},e.api_key))})})]}),a.top_models&&a.top_models.length>0&&(0,t.jsx)(B,{topModels:a.top_models}),(0,t.jsxs)(l.Card,{className:"mt-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(h.Title,{children:n.spendPerDay}),(0,t.jsx)(V,{categories:["metrics.spend"],colors:["green"]})]}),(0,t.jsx)(s.BarChart,{className:"mt-4",data:a.daily_data,index:"date",categories:["metrics.spend"],colors:["green"],valueFormatter:e=>`\xa5${(0,L.formatNumberWithCommas)(e)}`,yAxisWidth:72})]}),(0,t.jsxs)(i.Grid,{numItems:2,className:"gap-4 mt-4",children:[(0,t.jsxs)(l.Card,{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(h.Title,{children:n.totalTokens}),(0,t.jsx)(V,{categories:["metrics.prompt_tokens","metrics.completion_tokens","metrics.total_tokens"],colors:["blue","cyan","indigo"]})]}),(0,t.jsx)(R.AreaChart,{className:"mt-4",data:a.daily_data,index:"date",categories:["metrics.prompt_tokens","metrics.completion_tokens","metrics.total_tokens"],colors:["blue","cyan","indigo"],valueFormatter:U,customTooltip:W,showLegend:!1})]}),(0,t.jsxs)(l.Card,{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(h.Title,{children:n.requestsPerDay}),(0,t.jsx)(V,{categories:["metrics.api_requests"],colors:["blue"]})]}),(0,t.jsx)(s.BarChart,{className:"mt-4",data:a.daily_data,index:"date",categories:["metrics.api_requests"],colors:["blue"],valueFormatter:U,customTooltip:W,showLegend:!1})]}),(0,t.jsxs)(l.Card,{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(h.Title,{children:n.successVsFailedRequests}),(0,t.jsx)(V,{categories:["metrics.successful_requests","metrics.failed_requests"],colors:["green","red"]})]}),(0,t.jsx)(R.AreaChart,{className:"mt-4",data:a.daily_data,index:"date",categories:["metrics.successful_requests","metrics.failed_requests"],colors:["green","red"],valueFormatter:U,customTooltip:W,showLegend:!1})]}),!r&&(0,t.jsxs)(l.Card,{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(h.Title,{children:n.promptCachingMetrics}),(0,t.jsx)(V,{categories:["metrics.cache_read_input_tokens","metrics.cache_creation_input_tokens"],colors:["cyan","purple"]})]}),(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsxs)(p.Text,{children:[n.cacheRead,": ",a.total_cache_read_input_tokens?.toLocaleString()||0," ",n.tokens]}),(0,t.jsxs)(p.Text,{children:[n.cacheCreation,": ",a.total_cache_creation_input_tokens?.toLocaleString()||0," ",n.tokens]})]}),(0,t.jsx)(R.AreaChart,{className:"mt-4",data:a.daily_data,index:"date",categories:["metrics.cache_read_input_tokens","metrics.cache_creation_input_tokens"],colors:["cyan","purple"],valueFormatter:U,customTooltip:W,showLegend:!1})]})]})]}),Z=({modelMetrics:e,hidePromptCachingMetrics:a=!1})=>{let{locale:n}=(0,w.useLanguage)(),r="zh-CN"===n,s={totalRequests:r?"总请求数":"Total Requests",totalSuccessfulRequests:r?"成功请求数":"Total Successful Requests",totalTokens:r?"总 Token 数":"Total Tokens",totalSpend:r?"总花费":"Total Spend",avgPerSuccessfulRequest:r?"每次成功请求平均":"avg per successful request",perSuccessfulRequest:r?"每次成功请求":"per successful request",topApiKeysBySpend:r?"按花费排名的 API 密钥":"Top Virtual Keys by Spend",team:r?"分组":"Team",requests:r?"请求":"requests",tokens:"tokens",spendPerDay:r?"每日花费":"Spend per day",requestsPerDay:r?"每日请求数":"Requests per day",successVsFailedRequests:r?"成功请求 vs 失败请求":"Success vs Failed Requests",promptCachingMetrics:r?"Prompt 缓存指标":"Prompt Caching Metrics",cacheRead:r?"缓存读取":"Cache Read",cacheCreation:r?"缓存创建":"Cache Creation",overallUsage:r?"整体用量":"Overall Usage",totalTokensOverTime:r?"Token 总量趋势":"Total Tokens Over Time",totalRequestsOverTime:r?"请求总量趋势":"Total Requests Over Time",unknownItem:r?"未知项":"Unknown Item",unknownModel:r?"未知模型":"Unknown Model"},o=Object.keys(e).sort((t,a)=>""===t?1:""===a?-1:e[a].total_spend-e[t].total_spend),c={total_requests:0,total_successful_requests:0,total_tokens:0,total_spend:0,total_cache_read_input_tokens:0,total_cache_creation_input_tokens:0,daily_data:{}};Object.values(e).forEach(e=>{c.total_requests+=e.total_requests,c.total_successful_requests+=e.total_successful_requests,c.total_tokens+=e.total_tokens,c.total_spend+=e.total_spend,c.total_cache_read_input_tokens+=e.total_cache_read_input_tokens||0,c.total_cache_creation_input_tokens+=e.total_cache_creation_input_tokens||0,e.daily_data.forEach(e=>{c.daily_data[e.date]||(c.daily_data[e.date]={prompt_tokens:0,completion_tokens:0,total_tokens:0,api_requests:0,spend:0,successful_requests:0,failed_requests:0,cache_read_input_tokens:0,cache_creation_input_tokens:0}),c.daily_data[e.date].prompt_tokens+=e.metrics.prompt_tokens,c.daily_data[e.date].completion_tokens+=e.metrics.completion_tokens,c.daily_data[e.date].total_tokens+=e.metrics.total_tokens,c.daily_data[e.date].api_requests+=e.metrics.api_requests,c.daily_data[e.date].spend+=e.metrics.spend,c.daily_data[e.date].successful_requests+=e.metrics.successful_requests,c.daily_data[e.date].failed_requests+=e.metrics.failed_requests,c.daily_data[e.date].cache_read_input_tokens+=e.metrics.cache_read_input_tokens||0,c.daily_data[e.date].cache_creation_input_tokens+=e.metrics.cache_creation_input_tokens||0})});let u=Object.entries(c.daily_data).map(([e,t])=>({date:e,metrics:t})).sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime());return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,t.jsx)(h.Title,{children:s.overallUsage}),(0,t.jsxs)(i.Grid,{numItems:4,className:"gap-4 mb-4",children:[(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(p.Text,{children:s.totalRequests}),(0,t.jsx)(h.Title,{children:c.total_requests.toLocaleString()})]}),(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(p.Text,{children:s.totalSuccessfulRequests}),(0,t.jsx)(h.Title,{children:c.total_successful_requests.toLocaleString()})]}),(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(p.Text,{children:s.totalTokens}),(0,t.jsx)(h.Title,{children:c.total_tokens.toLocaleString()})]}),(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(p.Text,{children:s.totalSpend}),(0,t.jsxs)(h.Title,{children:["¥",(0,L.formatNumberWithCommas)(c.total_spend,2)]})]})]}),(0,t.jsxs)(i.Grid,{numItems:2,className:"gap-4",children:[(0,t.jsxs)(l.Card,{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(h.Title,{children:s.totalTokensOverTime}),(0,t.jsx)(V,{categories:["metrics.prompt_tokens","metrics.completion_tokens","metrics.total_tokens"],colors:["blue","cyan","indigo"]})]}),(0,t.jsx)(R.AreaChart,{className:"mt-4",data:u,index:"date",categories:["metrics.prompt_tokens","metrics.completion_tokens","metrics.total_tokens"],colors:["blue","cyan","indigo"],valueFormatter:U,customTooltip:W,showLegend:!1})]}),(0,t.jsxs)(l.Card,{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(h.Title,{children:s.totalRequestsOverTime}),(0,t.jsx)(V,{categories:["metrics.successful_requests","metrics.failed_requests"],colors:["emerald","red"]})]}),(0,t.jsx)(R.AreaChart,{className:"mt-4",data:u,index:"date",categories:["metrics.successful_requests","metrics.failed_requests"],colors:["emerald","red"],valueFormatter:e=>e.toLocaleString(),customTooltip:W,showLegend:!1})]})]})]}),(0,t.jsx)(Y.Collapse,{defaultActiveKey:o[0],children:o.map(n=>(0,t.jsx)(Y.Collapse.Panel,{header:(0,t.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,t.jsx)(h.Title,{children:e[n].label||s.unknownItem}),(0,t.jsxs)("div",{className:"flex space-x-4 text-sm text-gray-500",children:[(0,t.jsxs)("span",{children:["¥",(0,L.formatNumberWithCommas)(e[n].total_spend,2)]}),(0,t.jsxs)("span",{children:[e[n].total_requests.toLocaleString()," ",s.requests]})]})]}),children:(0,t.jsx)(G,{modelName:n||s.unknownModel,metrics:e[n],labels:s,hidePromptCachingMetrics:a})},n))})]})},Q=(e,t,a=[])=>{let n={};return e.results.forEach(e=>{Object.entries(e.breakdown[t]||{}).forEach(([r,s])=>{n[r]||(n[r]={label:"api_keys"===t?((e,t,a)=>{let n=e.metadata.key_alias||`key-hash-${t}`,r=e.metadata.team_id;if(r){let e=(0,F.resolveTeamAliasFromTeamID)(r,a);return e?`${n} (team: ${e})`:`${n} (team_id: ${r})`}return n})(s,r,a):r,total_requests:0,total_successful_requests:0,total_failed_requests:0,total_tokens:0,prompt_tokens:0,completion_tokens:0,total_spend:0,total_cache_read_input_tokens:0,total_cache_creation_input_tokens:0,top_api_keys:[],top_models:[],daily_data:[]}),n[r].total_requests+=s.metrics.api_requests,n[r].prompt_tokens+=s.metrics.prompt_tokens,n[r].completion_tokens+=s.metrics.completion_tokens,n[r].total_tokens+=s.metrics.total_tokens,n[r].total_spend+=s.metrics.spend,n[r].total_successful_requests+=s.metrics.successful_requests,n[r].total_failed_requests+=s.metrics.failed_requests,n[r].total_cache_read_input_tokens+=s.metrics.cache_read_input_tokens||0,n[r].total_cache_creation_input_tokens+=s.metrics.cache_creation_input_tokens||0,n[r].daily_data.push({date:e.date,metrics:{prompt_tokens:s.metrics.prompt_tokens,completion_tokens:s.metrics.completion_tokens,total_tokens:s.metrics.total_tokens,api_requests:s.metrics.api_requests,spend:s.metrics.spend,successful_requests:s.metrics.successful_requests,failed_requests:s.metrics.failed_requests,cache_read_input_tokens:s.metrics.cache_read_input_tokens||0,cache_creation_input_tokens:s.metrics.cache_creation_input_tokens||0}})})}),"api_keys"!==t&&Object.entries(n).forEach(([a,r])=>{let s={};e.results.forEach(e=>{let n=e.breakdown[t]?.[a];n&&"api_key_breakdown"in n&&Object.entries(n.api_key_breakdown||{}).forEach(([e,t])=>{s[e]||(s[e]={api_key:e,key_alias:t.metadata.key_alias,team_id:t.metadata.team_id,spend:0,requests:0,tokens:0}),s[e].spend+=t.metrics.spend,s[e].requests+=t.metrics.api_requests,s[e].tokens+=t.metrics.total_tokens})}),n[a].top_api_keys=Object.values(s).sort((e,t)=>t.spend-e.spend).slice(0,5)}),"api_keys"===t&&Object.entries(n).forEach(([t,a])=>{let r={};e.results.forEach(e=>{Object.entries(e.breakdown.models||{}).forEach(([e,a])=>{if(a&&"api_key_breakdown"in a){let n=a.api_key_breakdown?.[t];n&&(r[e]||(r[e]={model:e,spend:0,requests:0,successful_requests:0,failed_requests:0,tokens:0}),r[e].spend+=n.metrics.spend,r[e].requests+=n.metrics.api_requests,r[e].successful_requests+=n.metrics.successful_requests||0,r[e].failed_requests+=n.metrics.failed_requests||0,r[e].tokens+=n.metrics.total_tokens)}})}),n[t].top_models=Object.values(r).sort((e,t)=>t.spend-e.spend)}),Object.values(n).forEach(e=>{e.daily_data.sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime())}),n};var X=e.i(366283),J=e.i(779241),ee=e.i(212931),et=e.i(808613),ea=e.i(482725),en=e.i(727749);let er=({isOpen:e,onClose:a,accessToken:n})=>{let[r]=et.Form.useForm(),[s,l]=(0,j.useState)(!1),[o,i]=(0,j.useState)(null),[c,u]=(0,j.useState)(!1),[d,m]=(0,j.useState)("cloudzero"),[f,h]=(0,j.useState)(!1);(0,j.useEffect)(()=>{e&&n&&g()},[e,n]);let g=async()=>{u(!0);try{let e=await fetch("/cloudzero/settings",{method:"GET",headers:{[(0,C.getGlobalLitellmHeaderName)()]:`Bearer ${n}`,"Content-Type":"application/json"}});if(e.ok){let t=await e.json();i(t),r.setFieldsValue({connection_id:t.connection_id})}else if(404!==e.status){let t=await e.json();en.default.fromBackend(`Failed to load existing settings: ${t.error||"Unknown error"}`)}}catch(e){console.error("Error loading CloudZero settings:",e),en.default.fromBackend("Failed to load existing settings")}finally{u(!1)}},x=async e=>{if(!n)return void en.default.fromBackend("No access token available");l(!0);try{let t=o?"/cloudzero/settings":"/cloudzero/init",a=o?"PUT":"POST",r={...e,timezone:"UTC"},s=await fetch(t,{method:a,headers:{[(0,C.getGlobalLitellmHeaderName)()]:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify(r)}),l=await s.json();if(s.ok)return en.default.success(l.message||"CloudZero settings saved successfully"),i({api_key_masked:e.api_key.substring(0,4)+"****"+e.api_key.slice(-4),connection_id:e.connection_id,status:"configured"}),!0;return en.default.fromBackend(l.error||"Failed to save CloudZero settings"),!1}catch(e){return console.error("Error saving CloudZero settings:",e),en.default.fromBackend("Failed to save CloudZero settings"),!1}finally{l(!1)}},b=async()=>{if(!n)return void en.default.fromBackend("No access token available");h(!0);try{let e=await fetch("/cloudzero/export",{method:"POST",headers:{[(0,C.getGlobalLitellmHeaderName)()]:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({limit:1e5,operation:"replace_hourly"})}),t=await e.json();e.ok?(en.default.success(t.message||"Export to CloudZero completed successfully"),a()):en.default.fromBackend(t.error||"Failed to export to CloudZero")}catch(e){console.error("Error exporting to CloudZero:",e),en.default.fromBackend("Failed to export to CloudZero")}finally{h(!1)}},y=async()=>{h(!0);try{en.default.info("CSV export functionality coming soon!"),a()}catch(e){console.error("Error exporting CSV:",e),en.default.fromBackend("Failed to export CSV")}finally{h(!1)}},k=async()=>{if("cloudzero"===d){if(!o){let e=await r.validateFields();if(!await x(e))return}await b()}else await y()},_=()=>{r.resetFields(),m("cloudzero"),i(null),a()},w=[{value:"cloudzero",label:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("img",{src:"/cloudzero.png",alt:"CloudZero",className:"w-5 h-5",onError:e=>{e.target.style.display="none"}}),(0,t.jsx)("span",{children:"Export to CloudZero"})]})},{value:"csv",label:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,t.jsx)("span",{children:"Export to CSV"})]})}];return(0,t.jsx)(ee.Modal,{title:"Export Data",open:e,onCancel:_,footer:null,width:600,destroyOnHidden:!0,children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(p.Text,{className:"font-medium mb-2 block",children:"Export Destination"}),(0,t.jsx)(v.Select,{value:d,onChange:m,options:w,className:"w-full",size:"large"})]}),"cloudzero"===d&&(0,t.jsx)("div",{children:c?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(ea.Spin,{size:"large"})}):(0,t.jsxs)(t.Fragment,{children:[o&&(0,t.jsx)(X.Callout,{title:"Existing CloudZero Configuration",icon:()=>(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),color:"green",className:"mb-4",children:(0,t.jsxs)(p.Text,{children:["API Key: ",o.api_key_masked,(0,t.jsx)("br",{}),"Connection ID: ",o.connection_id]})}),!o&&(0,t.jsxs)(et.Form,{form:r,layout:"vertical",children:[(0,t.jsx)(et.Form.Item,{label:"CloudZero API Key",name:"api_key",rules:[{required:!0,message:"Please enter your CloudZero API key"}],children:(0,t.jsx)(J.TextInput,{type:"password",placeholder:"Enter your CloudZero API key"})}),(0,t.jsx)(et.Form.Item,{label:"Connection ID",name:"connection_id",rules:[{required:!0,message:"Please enter the CloudZero connection ID"}],children:(0,t.jsx)(J.TextInput,{placeholder:"Enter CloudZero connection ID"})})]})]})}),"csv"===d&&(0,t.jsx)(X.Callout,{title:"CSV Export",icon:()=>(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),color:"blue",children:(0,t.jsx)(p.Text,{children:"Export your usage data as a CSV file for analysis in spreadsheet applications."})}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,t.jsx)(A.Button,{variant:"secondary",onClick:_,children:"Cancel"}),(0,t.jsx)(A.Button,{onClick:k,loading:s||f,disabled:s||f,children:"cloudzero"===d?"Export to CloudZero":"Export CSV"})]})]})})};var es=e.i(785242),el=e.i(464571),eo=e.i(981339);let ei=({value:e,onChange:a})=>{let{t:n}=(0,w.useLanguage)();return(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 block mb-2",children:n("usagePage.exportModal.format")}),(0,t.jsx)(v.Select,{value:e,onChange:a,className:"w-full",options:[{value:"csv",label:n("usagePage.exportModal.csvOption")},{value:"json",label:n("usagePage.exportModal.jsonOption")}]})]})},ec=({dateRange:e,selectedFilters:a})=>{let{t:n}=(0,w.useLanguage)(),r=e=>e?`${e.getFullYear()}/${e.getMonth()+1}/${e.getDate()}`:"";return(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:[r(e.from)," - ",r(e.to),a.length>0&&` \xb7 ${a.length}${n("usagePage.exportModal.filtersAppliedSuffix")}`]})};var eu=e.i(91739);let ed=({value:e,onChange:a,entityType:n})=>{let{t:r}=(0,w.useLanguage)(),s={team:r("usagePage.exportModal.entity.team"),tag:r("usagePage.exportModal.entity.tag"),organization:r("usagePage.exportModal.entity.organization"),customer:r("usagePage.exportModal.entity.customer"),agent:r("usagePage.exportModal.entity.agent")}[n];return(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 block mb-2",children:r("usagePage.exportModal.exportType")}),(0,t.jsx)(eu.Radio.Group,{value:e,onChange:e=>a(e.target.value),className:"w-full",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"flex items-start p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",children:[(0,t.jsx)(eu.Radio,{value:"daily",className:"mt-0.5"}),(0,t.jsxs)("div",{className:"ml-3 flex-1",children:[(0,t.jsx)("div",{className:"font-medium text-sm",children:r("usagePage.exportModal.dailyByEntityTitle").replace("{entity}",s)}),(0,t.jsx)("div",{className:"text-xs text-gray-500 mt-0.5",children:r("usagePage.exportModal.dailyByEntityDesc").replace("{entity}",s)})]})]}),(0,t.jsxs)("label",{className:"flex items-start p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",children:[(0,t.jsx)(eu.Radio,{value:"daily_with_keys",className:"mt-0.5"}),(0,t.jsxs)("div",{className:"ml-3 flex-1",children:[(0,t.jsx)("div",{className:"font-medium text-sm",children:r("usagePage.exportModal.dailyByEntityAndKeyTitle").replace("{entity}",s)}),(0,t.jsx)("div",{className:"text-xs text-gray-500 mt-0.5",children:r("usagePage.exportModal.dailyByEntityAndKeyDesc").replace("{entity}",s)})]})]}),(0,t.jsxs)("label",{className:"flex items-start p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",children:[(0,t.jsx)(eu.Radio,{value:"daily_with_models",className:"mt-0.5"}),(0,t.jsxs)("div",{className:"ml-3 flex-1",children:[(0,t.jsx)("div",{className:"font-medium text-sm",children:r("usagePage.exportModal.dailyByEntityAndModelTitle").replace("{entity}",s)}),(0,t.jsx)("div",{className:"text-xs text-gray-500 mt-0.5",children:r("usagePage.exportModal.dailyByEntityAndModelDesc")})]})]})]})})]})};var em=e.i(238439),ef=e.i(59935);_.default.extend(em.default);let ep=e=>{if(!e)return null;for(let t of Object.values(e)){let e=t?.metadata?.team_id;if(e)return e}return null},eh=()=>({spend:0,api_requests:0,successful_requests:0,failed_requests:0,total_tokens:0,prompt_tokens:0,completion_tokens:0}),eg=(e,t)=>{t&&(e.spend+=t.spend||0,e.api_requests+=t.api_requests||0,e.successful_requests+=t.successful_requests||0,e.failed_requests+=t.failed_requests||0,e.total_tokens+=t.total_tokens||0,e.prompt_tokens+=t.prompt_tokens||0,e.completion_tokens+=t.completion_tokens||0)},ex=e=>{let t,a=e?.breakdown?.entities||{};return Object.keys(a).length>0?a:(t={},Object.entries(e?.breakdown?.api_keys||{}).forEach(([e,a])=>{let n=a?.metadata?.team_id||"Unassigned";t[n]||(t[n]={metrics:eh(),api_key_breakdown:{}}),eg(t[n].metrics,a?.metrics),t[n].api_key_breakdown[e]||(t[n].api_key_breakdown[e]={metrics:eh(),metadata:a?.metadata||{}}),eg(t[n].api_key_breakdown[e].metrics,a?.metrics)}),0===Object.keys(t).length&&e?.metrics&&(t.Unassigned={metrics:{spend:e.metrics.spend||0,api_requests:e.metrics.api_requests||0,successful_requests:e.metrics.successful_requests||0,failed_requests:e.metrics.failed_requests||0,total_tokens:e.metrics.total_tokens||0,prompt_tokens:e.metrics.prompt_tokens||0,completion_tokens:e.metrics.completion_tokens||0},api_key_breakdown:{}}),t)},ev=(e,t,a,n={})=>{switch(t){case"daily":default:return((e,t,a={})=>{let n=[];return e.results.forEach(e=>{Object.entries(ex(e)).forEach(([r,s])=>{let l=ep(s.api_key_breakdown),o=l&&a[l]||null;n.push({Date:e.date,[t]:o||"-",[`${t} ID`]:l||"-","Spend (¥)":(0,L.formatNumberWithCommas)(s.metrics.spend,4),Requests:s.metrics.api_requests,"Successful Requests":s.metrics.successful_requests,"Failed Requests":s.metrics.failed_requests,"Total Tokens":s.metrics.total_tokens,"Prompt Tokens":s.metrics.prompt_tokens||0,"Completion Tokens":s.metrics.completion_tokens||0})})}),n.sort((e,t)=>new Date(e.Date).getTime()-new Date(t.Date).getTime())})(e,a,n);case"daily_with_keys":return((e,t,a={})=>{let n={};return e.results.forEach(e=>{Object.entries(ex(e)).forEach(([t,r])=>{Object.entries(r.api_key_breakdown||{}).forEach(([r,s])=>{let l=s?.metadata?.key_alias||null,o=s?.metadata?.team_id||t,i=o&&a[o]||null,c=`${e.date}_${o}_${r}`;n[c]?(n[c].metrics.spend+=s.metrics?.spend||0,n[c].metrics.api_requests+=s.metrics?.api_requests||0,n[c].metrics.successful_requests+=s.metrics?.successful_requests||0,n[c].metrics.failed_requests+=s.metrics?.failed_requests||0,n[c].metrics.total_tokens+=s.metrics?.total_tokens||0,n[c].metrics.prompt_tokens+=s.metrics?.prompt_tokens||0,n[c].metrics.completion_tokens+=s.metrics?.completion_tokens||0):n[c]={Date:e.date,teamId:o,teamAlias:i,keyId:r,keyAlias:l,metrics:{spend:s.metrics?.spend||0,api_requests:s.metrics?.api_requests||0,successful_requests:s.metrics?.successful_requests||0,failed_requests:s.metrics?.failed_requests||0,total_tokens:s.metrics?.total_tokens||0,prompt_tokens:s.metrics?.prompt_tokens||0,completion_tokens:s.metrics?.completion_tokens||0}}})})}),Object.values(n).map(e=>({Date:e.Date,[t]:e.teamAlias||"-",[`${t} ID`]:e.teamId||"-","Key Alias":e.keyAlias||"-","Key ID":e.keyId,"Spend (¥)":(0,L.formatNumberWithCommas)(e.metrics.spend,4),Requests:e.metrics.api_requests,"Successful Requests":e.metrics.successful_requests,"Failed Requests":e.metrics.failed_requests,"Total Tokens":e.metrics.total_tokens,"Prompt Tokens":e.metrics.prompt_tokens,"Completion Tokens":e.metrics.completion_tokens})).sort((e,t)=>new Date(e.Date).getTime()-new Date(t.Date).getTime())})(e,a,n);case"daily_with_models":return((e,t,a={})=>{let n=[];return e.results.forEach(e=>{if(0===Object.keys(e?.breakdown?.entities||{}).length){let r={};Object.entries(e?.breakdown?.models||{}).forEach(([t,n])=>{Object.entries(n?.api_key_breakdown||{}).forEach(([n,s])=>{let l=s?.metadata?.team_id||"Unassigned",o=a[l]||null,i=`${e.date}_${l}_${t}`;r[i]||(r[i]={Date:e.date,teamId:l,teamAlias:o,model:t,metrics:{spend:0,requests:0,successful:0,failed:0,tokens:0}}),r[i].metrics.spend+=s?.metrics?.spend||0,r[i].metrics.requests+=s?.metrics?.api_requests||0,r[i].metrics.successful+=s?.metrics?.successful_requests||0,r[i].metrics.failed+=s?.metrics?.failed_requests||0,r[i].metrics.tokens+=s?.metrics?.total_tokens||0})}),Object.values(r).forEach(e=>{n.push({Date:e.Date,[t]:e.teamAlias||"-",[`${t} ID`]:e.teamId||"-",Model:e.model,"Spend (¥)":(0,L.formatNumberWithCommas)(e.metrics.spend,4),Requests:e.metrics.requests,Successful:e.metrics.successful,Failed:e.metrics.failed,"Total Tokens":e.metrics.tokens})});return}let r={};Object.entries(e.breakdown.entities||{}).forEach(([t,a])=>{r[t]||(r[t]={}),Object.entries(e.breakdown.models||{}).forEach(([e,n])=>{Object.entries(a.api_key_breakdown||{}).forEach(([a,n])=>{r[t][e]||(r[t][e]={spend:0,requests:0,successful:0,failed:0,tokens:0}),r[t][e].spend+=n.metrics.spend||0,r[t][e].requests+=n.metrics.api_requests||0,r[t][e].successful+=n.metrics.successful_requests||0,r[t][e].failed+=n.metrics.failed_requests||0,r[t][e].tokens+=n.metrics.total_tokens||0})})}),Object.entries(r).forEach(([r,s])=>{let l=e.breakdown.entities?.[r],o=ep(l?.api_key_breakdown),i=o&&a[o]||null;Object.entries(s).forEach(([a,r])=>{n.push({Date:e.date,[t]:i||"-",[`${t} ID`]:o||"-",Model:a,"Spend (¥)":(0,L.formatNumberWithCommas)(r.spend,4),Requests:r.requests,Successful:r.successful,Failed:r.failed,"Total Tokens":r.tokens})})})}),n.sort((e,t)=>new Date(e.Date).getTime()-new Date(t.Date).getTime())})(e,a,n)}},eb=(e,t,a)=>{let n,r,s,l=a||(e=>{let t=e.from?(0,_.default)(e.from):null,a=e.to?(0,_.default)(e.to):null;if(t&&a){if(t.startOf("month").isSame(t,"day")&&a.endOf("month").startOf("day").isSame(a.startOf("day"),"day"))return"month";if(t.startOf("week").isSame(t,"day")&&a.endOf("week").startOf("day").isSame(a.startOf("day"),"day"))return"week"}return"day"})(t);return`${"week"===l?"周账单":"month"===l?"月账单":"日账单"}-${n=t.from?(0,_.default)(t.from):null,r=t.to?(0,_.default)(t.to):null,s="day"===l?r||n||(0,_.default)():n||r||(0,_.default)(),"week"===l?`${s.year()}年${s.week()}周`:"month"===l?`${s.year()}年${s.month()+1}月`:`${s.year()}年${s.month()+1}月${s.date()}日`}-${"daily_with_keys"===e?"分组与API密钥明细":"daily_with_models"===e?"分组与模型明细":"分组明细"}`},ey=({isOpen:e,onClose:a,entityType:n,spendData:r,dateRange:s,timeRangeType:l,selectedFilters:o,customTitle:i})=>{let{t:c}=(0,w.useLanguage)(),[u,d]=(0,j.useState)("csv"),[m,f]=(0,j.useState)("daily"),[p,h]=(0,j.useState)(!1),{data:g,isLoading:x}=(0,es.useTeams)(),v=n.charAt(0).toUpperCase()+n.slice(1),b=i||`Export ${v} Usage`,y=(0,j.useMemo)(()=>(0,F.createTeamAliasMap)(g),[g]),k=async e=>{let t=e||u;h(!0);try{"csv"===t?(((e,t,a,n,r,s,l={})=>{let o=ev(e,t,a,l),i=r.to?(0,_.default)(r.to).format("YYYY-MM-DD"):(0,_.default)().format("YYYY-MM-DD"),c=o.length>0?o:[{Date:i,[a]:"-",[`${a} ID`]:"-","Spend (¥)":(0,L.formatNumberWithCommas)(e?.metadata?.total_spend||0,4),Requests:e?.metadata?.total_api_requests||0,"Successful Requests":e?.metadata?.total_successful_requests||0,"Failed Requests":e?.metadata?.total_failed_requests||0,"Total Tokens":e?.metadata?.total_tokens||0,"Prompt Tokens":0,"Completion Tokens":0}],u=new Blob([ef.default.unparse(c)],{type:"text/csv;charset=utf-8;"}),d=window.URL.createObjectURL(u),m=document.createElement("a");m.href=d,m.download=`${eb(t,r,s)}.csv`,document.body.appendChild(m),m.click(),document.body.removeChild(m),window.URL.revokeObjectURL(d)})(r,m,v,0,s,l,y),en.default.success(c("usagePage.exportModal.exportSuccessCsv"))):(((e,t,a,n,r,s,l,o={})=>{let i=ev(e,t,a,o),c={export_date:new Date().toISOString(),entity_type:n,date_range:{from:r.from?.toISOString(),to:r.to?.toISOString()},filters_applied:l.length>0?l:"None",export_scope:t,summary:{total_spend:e.metadata.total_spend,total_requests:e.metadata.total_api_requests,successful_requests:e.metadata.total_successful_requests,failed_requests:e.metadata.total_failed_requests,total_tokens:e.metadata.total_tokens}},u=new Blob([JSON.stringify({metadata:c,data:i},null,2)],{type:"application/json"}),d=window.URL.createObjectURL(u),m=document.createElement("a");m.href=d,m.download=`${eb(t,r,s)}.json`,document.body.appendChild(m),m.click(),document.body.removeChild(m),window.URL.revokeObjectURL(d)})(r,m,v,n,s,l,o,y),en.default.success(c("usagePage.exportModal.exportSuccessJson"))),a()}catch(e){console.error("Error exporting data:",e),en.default.fromBackend(c("usagePage.exportModal.exportFailed"))}finally{h(!1)}};return(0,t.jsx)(ee.Modal,{title:(0,t.jsx)("span",{className:"text-base font-semibold",children:b}),open:e,onCancel:a,footer:null,width:480,children:(0,t.jsxs)("div",{className:"space-y-5 py-2",children:[x?(0,t.jsx)(eo.Skeleton,{active:!0}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ec,{dateRange:s,selectedFilters:o}),(0,t.jsx)(ed,{value:m,onChange:f,entityType:n}),(0,t.jsx)(ei,{value:u,onChange:d})]}),x?(0,t.jsxs)("div",{className:"flex items-center justify-end gap-2 pt-4 border-t",children:[(0,t.jsx)(eo.Skeleton.Button,{active:!0}),(0,t.jsx)(eo.Skeleton.Button,{active:!0})]}):(0,t.jsxs)("div",{className:"flex items-center justify-end gap-2 pt-4 border-t",children:[(0,t.jsx)(el.Button,{variant:"outlined",onClick:a,disabled:p,children:c("usagePage.exportModal.cancel")}),(0,t.jsx)(el.Button,{onClick:()=>k(),loading:p||x,disabled:p||x,type:"primary",children:p?c("usagePage.exportModal.exporting"):"csv"===u?c("usagePage.exportModal.exportCsv"):c("usagePage.exportModal.exportJson")})]})]})})},ek=({dateValue:e,timeRangeType:a,entityType:n,spendData:r,showFilters:s=!1,filterLabel:l,filterPlaceholder:o,selectedFilters:i=[],onFiltersChange:c,filterOptions:u=[],customTitle:d,compactLayout:m=!1,teams:f=[]})=>{let[h,g]=(0,j.useState)(!1);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsxs)("div",{className:`grid ${s&&u.length>0?"grid-cols-[1fr_auto]":"grid-cols-[auto]"} items-end gap-4`,children:[s&&u.length>0&&(0,t.jsxs)("div",{children:[l&&(0,t.jsx)(p.Text,{className:"mb-2",children:l}),(0,t.jsx)(v.Select,{mode:"multiple",style:{width:"100%"},placeholder:o,value:i,onChange:c,options:u,allowClear:!0})]}),(0,t.jsx)("div",{className:"justify-self-end",children:(0,t.jsx)(A.Button,{onClick:()=>g(!0),icon:()=>(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),children:"Export Data"})})]})}),(0,t.jsx)(ey,{isOpen:h,onClose:()=>g(!1),entityType:n,spendData:r,dateRange:e,timeRangeType:a,selectedFilters:i,customTitle:d,teams:f})]})};var e_=e.i(905540),ej=e.i(235971),ew=e.i(2221),eC=e.i(83593),eN=e.i(346628);_.default.extend(eN.default),_.default.extend(eC.default),_.default.extend(e_.default),_.default.extend(ej.default),_.default.extend(em.default),_.default.extend(ew.default),_.default.extend(function(e,t){var a=t.prototype,n=a.format;a.format=function(e){var t=(e||"").replace("Wo","wo");return n.bind(this)(t)}});var eS={bn_BD:"bn-bd",by_BY:"be",en_GB:"en-gb",en_US:"en",fr_BE:"fr",fr_CA:"fr-ca",hy_AM:"hy-am",kmr_IQ:"ku",nl_BE:"nl-be",pt_BR:"pt-br",zh_CN:"zh-cn",zh_HK:"zh-hk",zh_TW:"zh-tw"},eT=function(e){return eS[e]||e.split("_")[0]},eM=function(){},e$=e.i(805484);e.i(247167);var eD=e.i(931067);let eE={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M873.1 596.2l-164-208A32 32 0 00684 376h-64.8c-6.7 0-10.4 7.7-6.3 13l144.3 183H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h695.9c26.8 0 41.7-30.8 25.2-51.8z"}}]},name:"swap-right",theme:"outlined"};var eq=e.i(9583),eP=j.forwardRef(function(e,t){return j.createElement(eq.default,(0,eD.default)({},e,{ref:t,icon:eE}))}),eO=e.i(343794),eI=e.i(8211),eL=e.i(209428),eA=e.i(392221);e.i(62664);var eF=e.i(697539),eR=e.i(731855),eY=e.i(174428),eH=e.i(529681),eW=e.i(244009),eV=e.i(883110),ez=e.i(211577),eB=e.i(707067),eU=j.createContext(null),eK={bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}}};let eG=function(e){var t,a=e.popupElement,n=e.popupStyle,r=e.popupClassName,s=e.popupAlign,l=e.transitionName,o=e.getPopupContainer,i=e.children,c=e.range,u=e.placement,d=e.builtinPlacements,m=e.direction,f=e.visible,p=e.onClose,h=j.useContext(eU).prefixCls,g="".concat(h,"-dropdown"),x=(t="rtl"===m,void 0!==u?u:t?"bottomRight":"bottomLeft");return j.createElement(eB.default,{showAction:[],hideAction:["click"],popupPlacement:x,builtinPlacements:void 0===d?eK:d,prefixCls:g,popupTransitionName:l,popup:a,popupAlign:s,popupVisible:f,popupClassName:(0,eO.default)(r,(0,ez.default)((0,ez.default)({},"".concat(g,"-range"),c),"".concat(g,"-rtl"),"rtl"===m)),popupStyle:n,stretch:"minWidth",getPopupContainer:o,onPopupVisibleChange:function(e){e||p()}},i)};function eZ(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0",n=String(e);n.length<t;)n="".concat(a).concat(n);return n}function eQ(e){return null==e?[]:Array.isArray(e)?e:[e]}function eX(e,t,a){var n=(0,eI.default)(e);return n[t]=a,n}function eJ(e,t){var a={};return(t||Object.keys(e)).forEach(function(t){void 0!==e[t]&&(a[t]=e[t])}),a}function e0(e,t,a){if(a)return a;switch(e){case"time":return t.fieldTimeFormat;case"datetime":return t.fieldDateTimeFormat;case"month":return t.fieldMonthFormat;case"year":return t.fieldYearFormat;case"quarter":return t.fieldQuarterFormat;case"week":return t.fieldWeekFormat;default:return t.fieldDateFormat}}function e1(e,t,a){var n=void 0!==a?a:t[t.length-1],r=t.find(function(t){return e[t]});return n!==r?e[r]:void 0}function e2(e){return eJ(e,["placement","builtinPlacements","popupAlign","getPopupContainer","transitionName","direction"])}function e4(e,t,a,n){var r=j.useMemo(function(){return e||function(e,n){return t&&"date"===n.type?t(e,n.today):a&&"month"===n.type?a(e,n.locale):n.originNode}},[e,a,t]);return j.useCallback(function(e,t){return r(e,(0,eL.default)((0,eL.default)({},t),{},{range:n}))},[r,n])}function e5(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=j.useState([!1,!1]),r=(0,eA.default)(n,2),s=r[0],l=r[1];return[j.useMemo(function(){return s.map(function(n,r){if(n)return!0;var s=e[r];return!!s&&!!(!a[r]&&!s||s&&t(s,{activeIndex:r}))})},[e,s,t,a]),function(e,t){l(function(a){return eX(a,t,e)})}]}function e3(e,t,a,n,r){var s="",l=[];return e&&l.push(r?"hh":"HH"),t&&l.push("mm"),a&&l.push("ss"),s=l.join(":"),n&&(s+=".SSS"),r&&(s+=" A"),s}function e6(e,t){var a=t.showHour,n=t.showMinute,r=t.showSecond,s=t.showMillisecond,l=t.use12Hours;return j.default.useMemo(function(){var t,o,i,c,u,d,m,f,p,h,g,x,v;return t=e.fieldDateTimeFormat,o=e.fieldDateFormat,i=e.fieldTimeFormat,c=e.fieldMonthFormat,u=e.fieldYearFormat,d=e.fieldWeekFormat,m=e.fieldQuarterFormat,f=e.yearFormat,p=e.cellYearFormat,h=e.cellQuarterFormat,g=e.dayFormat,x=e.cellDateFormat,v=e3(a,n,r,s,l),(0,eL.default)((0,eL.default)({},e),{},{fieldDateTimeFormat:t||"YYYY-MM-DD ".concat(v),fieldDateFormat:o||"YYYY-MM-DD",fieldTimeFormat:i||v,fieldMonthFormat:c||"YYYY-MM",fieldYearFormat:u||"YYYY",fieldWeekFormat:d||"gggg-wo",fieldQuarterFormat:m||"YYYY-[Q]Q",yearFormat:f||"YYYY",cellYearFormat:p||"YYYY",cellQuarterFormat:h||"[Q]Q",cellDateFormat:x||g||"D"})},[e,a,n,r,s,l])}var e9=e.i(410160);function e7(e,t,a){return null!=a?a:t.some(function(t){return e.includes(t)})}var e8=["showNow","showHour","showMinute","showSecond","showMillisecond","use12Hours","hourStep","minuteStep","secondStep","millisecondStep","hideDisabledOptions","defaultValue","disabledHours","disabledMinutes","disabledSeconds","disabledMilliseconds","disabledTime","changeOnScroll","defaultOpenValue"];function te(e,t,a,n){return[e,t,a,n].some(function(e){return void 0!==e})}function tt(e,t,a,n,r){var s=t,l=a,o=n;if(e||s||l||o||r){if(e){var i,c,u,d=[s,l,o].some(function(e){return!1===e}),m=[s,l,o].some(function(e){return!0===e}),f=!!d||!m;s=null!=(i=s)?i:f,l=null!=(c=l)?c:f,o=null!=(u=o)?u:f}}else s=!0,l=!0,o=!0;return[s,l,o,r]}function ta(e){var t,a,n,r,s=e.showTime,l=(t=eJ(e,e8),a=e.format,n=e.picker,r=null,a&&(Array.isArray(r=a)&&(r=r[0]),r="object"===(0,e9.default)(r)?r.format:r),"time"===n&&(t.format=r),[t,r]),o=(0,eA.default)(l,2),i=o[0],c=o[1],u=s&&"object"===(0,e9.default)(s)?s:{},d=(0,eL.default)((0,eL.default)({defaultOpenValue:u.defaultOpenValue||u.defaultValue},i),u),m=d.showMillisecond,f=d.showHour,p=d.showMinute,h=d.showSecond,g=tt(te(f,p,h,m),f,p,h,m),x=(0,eA.default)(g,3);return f=x[0],p=x[1],h=x[2],[d,(0,eL.default)((0,eL.default)({},d),{},{showHour:f,showMinute:p,showSecond:h,showMillisecond:m}),d.format,c]}function tn(e,t,a,n,r){var s="time"===e;if("datetime"===e||s){for(var l=e0(e,r,null),o=[t,a],i=0;i<o.length;i+=1){var c=eQ(o[i])[0];if(c&&"string"==typeof c){l=c;break}}var u=n.showHour,d=n.showMinute,m=n.showSecond,f=n.showMillisecond,p=e7(l,["a","A","LT","LLL","LTS"],n.use12Hours),h=te(u,d,m,f);h||(u=e7(l,["H","h","k","LT","LLL"]),d=e7(l,["m","LT","LLL"]),m=e7(l,["s","LTS"]),f=e7(l,["SSS"]));var g=tt(h,u,d,m,f),x=(0,eA.default)(g,3);u=x[0],d=x[1],m=x[2];var v=t||e3(u,d,m,f,p);return(0,eL.default)((0,eL.default)({},n),{},{format:v,showHour:u,showMinute:d,showSecond:m,showMillisecond:f,use12Hours:p})}return null}function tr(e,t,a){return!e&&!t||e===t||!!e&&!!t&&a()}function ts(e,t,a){return tr(t,a,function(){return Math.floor(e.getYear(t)/10)===Math.floor(e.getYear(a)/10)})}function tl(e,t,a){return tr(t,a,function(){return e.getYear(t)===e.getYear(a)})}function to(e,t){return Math.floor(e.getMonth(t)/3)+1}function ti(e,t,a){return tr(t,a,function(){return tl(e,t,a)&&e.getMonth(t)===e.getMonth(a)})}function tc(e,t,a){return tr(t,a,function(){return tl(e,t,a)&&ti(e,t,a)&&e.getDate(t)===e.getDate(a)})}function tu(e,t,a){return tr(t,a,function(){return e.getHour(t)===e.getHour(a)&&e.getMinute(t)===e.getMinute(a)&&e.getSecond(t)===e.getSecond(a)})}function td(e,t,a){return tr(t,a,function(){return tc(e,t,a)&&tu(e,t,a)&&e.getMillisecond(t)===e.getMillisecond(a)})}function tm(e,t,a,n){return tr(a,n,function(){var r=e.locale.getWeekFirstDate(t,a),s=e.locale.getWeekFirstDate(t,n);return tl(e,r,s)&&e.locale.getWeek(t,a)===e.locale.getWeek(t,n)})}function tf(e,t,a,n,r){switch(r){case"date":return tc(e,a,n);case"week":return tm(e,t.locale,a,n);case"month":return ti(e,a,n);case"quarter":return tr(a,n,function(){return tl(e,a,n)&&to(e,a)===to(e,n)});case"year":return tl(e,a,n);case"decade":return ts(e,a,n);case"time":return tu(e,a,n);default:return td(e,a,n)}}function tp(e,t,a,n){return!!t&&!!a&&!!n&&e.isAfter(n,t)&&e.isAfter(a,n)}function th(e,t,a,n,r){return!!tf(e,t,a,n,r)||e.isAfter(a,n)}function tg(e,t){var a=t.generateConfig,n=t.locale,r=t.format;return e?"function"==typeof r?r(e):a.locale.format(n.locale,e,r):""}function tx(e,t,a){var n=t,r=["getHour","getMinute","getSecond","getMillisecond"];return["setHour","setMinute","setSecond","setMillisecond"].forEach(function(t,s){n=a?e[t](n,e[r[s]](a)):e[t](n,0)}),n}function tv(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return j.useMemo(function(){var a=e?eQ(e):e;return t&&a&&(a[1]=a[1]||a[0]),a},[e,t])}function tb(e,t){var a=e.generateConfig,n=e.locale,r=e.picker,s=void 0===r?"date":r,l=e.prefixCls,o=void 0===l?"rc-picker":l,i=e.styles,c=void 0===i?{}:i,u=e.classNames,d=void 0===u?{}:u,m=e.order,f=void 0===m||m,p=e.components,h=void 0===p?{}:p,g=e.inputRender,x=e.allowClear,v=e.clearIcon,b=e.needConfirm,y=e.multiple,k=e.format,_=e.inputReadOnly,w=e.disabledDate,C=e.minDate,N=e.maxDate,S=e.showTime,T=e.value,M=e.defaultValue,$=e.pickerValue,D=e.defaultPickerValue,E=tv(T),q=tv(M),P=tv($),O=tv(D),I="date"===s&&S?"datetime":s,L="time"===I||"datetime"===I,A=L||y,F=null!=b?b:L,R=ta(e),Y=(0,eA.default)(R,4),H=Y[0],W=Y[1],V=Y[2],z=Y[3],B=e6(n,W),U=j.useMemo(function(){return tn(I,V,z,H,B)},[I,V,z,H,B]),K=j.useMemo(function(){return(0,eL.default)((0,eL.default)({},e),{},{prefixCls:o,locale:B,picker:s,styles:c,classNames:d,order:f,components:(0,eL.default)({input:g},h),clearIcon:!1===x?null:(x&&"object"===(0,e9.default)(x)?x:{}).clearIcon||v||j.createElement("span",{className:"".concat(o,"-clear-btn")}),showTime:U,value:E,defaultValue:q,pickerValue:P,defaultPickerValue:O},null==t?void 0:t())},[e]),G=j.useMemo(function(){var e=eQ(e0(I,B,k)),t=e[0],a="object"===(0,e9.default)(t)&&"mask"===t.type?t.format:null;return[e.map(function(e){return"string"==typeof e||"function"==typeof e?e:e.format}),a]},[I,B,k]),Z=(0,eA.default)(G,2),Q=Z[0],X=Z[1],J="function"==typeof Q[0]||!!y||_,ee=(0,eF.useEvent)(function(e,t){return!!(w&&w(e,t)||C&&a.isAfter(C,e)&&!tf(a,n,C,e,t.type)||N&&a.isAfter(e,N)&&!tf(a,n,N,e,t.type))}),et=(0,eF.useEvent)(function(e,t){var n=(0,eL.default)({type:s},t);if(delete n.activeIndex,!a.isValidate(e)||ee&&ee(e,n))return!0;if(("date"===s||"time"===s)&&U){var r,l=t&&1===t.activeIndex?"end":"start",o=(null==(r=U.disabledTime)?void 0:r.call(U,e,l,{from:n.from}))||{},i=o.disabledHours,c=o.disabledMinutes,u=o.disabledSeconds,d=o.disabledMilliseconds,m=U.disabledHours,f=U.disabledMinutes,p=U.disabledSeconds,h=i||m,g=c||f,x=u||p,v=a.getHour(e),b=a.getMinute(e),y=a.getSecond(e),k=a.getMillisecond(e);if(h&&h().includes(v)||g&&g(v).includes(b)||x&&x(v,b).includes(y)||d&&d(v,b,y).includes(k))return!0}return!1});return[j.useMemo(function(){return(0,eL.default)((0,eL.default)({},K),{},{needConfirm:F,inputReadOnly:J,disabledDate:ee})},[K,F,J,ee]),I,A,Q,X,et]}var ty=e.i(963188);function tk(e,t){var a,n,r,s,l,o,i,c,u,d,m,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],p=arguments.length>3?arguments[3]:void 0,h=(a=!f.every(function(e){return e})&&e,n=t||!1,r=(0,eR.useMergedState)(n,{value:a}),l=(s=(0,eA.default)(r,2))[0],o=s[1],i=j.default.useRef(a),c=j.default.useRef(),u=function(){ty.default.cancel(c.current)},d=(0,eF.useEvent)(function(){o(i.current),p&&l!==i.current&&p(i.current)}),m=(0,eF.useEvent)(function(e,t){u(),i.current=e,e||t?d():c.current=(0,ty.default)(d)}),j.default.useEffect(function(){return u},[]),[l,m]),g=(0,eA.default)(h,2),x=g[0],v=g[1];return[x,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(!t.inherit||x)&&v(e,t.force)}]}function t_(e){var t=j.useRef();return j.useImperativeHandle(e,function(){var e;return{nativeElement:null==(e=t.current)?void 0:e.nativeElement,focus:function(e){var a;null==(a=t.current)||a.focus(e)},blur:function(){var e;null==(e=t.current)||e.blur()}}}),t}function tj(e,t){return j.useMemo(function(){return e||(t?((0,eV.default)(!1,"`ranges` is deprecated. Please use `presets` instead."),Object.entries(t).map(function(e){var t=(0,eA.default)(e,2);return{label:t[0],value:t[1]}})):[])},[e,t])}function tw(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=j.useRef(t);n.current=t,(0,eY.useLayoutUpdateEffect)(function(){if(e)n.current(e);else{var t=(0,ty.default)(function(){n.current(e)},a);return function(){ty.default.cancel(t)}}},[e])}function tC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=j.useState(0),r=(0,eA.default)(n,2),s=r[0],l=r[1],o=j.useState(!1),i=(0,eA.default)(o,2),c=i[0],u=i[1],d=j.useRef([]),m=j.useRef(null),f=j.useRef(null),p=function(e){m.current=e};return tw(c||a,function(){c||(d.current=[],p(null))}),j.useEffect(function(){c&&d.current.push(s)},[c,s]),[c,function(e){u(e)},function(e){return e&&(f.current=e),f.current},s,l,function(a){var n=d.current,r=new Set(n.filter(function(e){return a[e]||t[e]})),s=+(0===n[n.length-1]);return r.size>=2||e[s]?null:s},d.current,p,function(e){return m.current===e}]}function tN(e,t,a,n){switch(t){case"date":case"week":return e.addMonth(a,n);case"month":case"quarter":return e.addYear(a,n);case"year":return e.addYear(a,10*n);case"decade":return e.addYear(a,100*n);default:return a}}var tS=[];function tT(e,t,a,n,r,s,l,o){var i=arguments.length>8&&void 0!==arguments[8]?arguments[8]:tS,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:tS,u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:tS,d=arguments.length>11?arguments[11]:void 0,m=arguments.length>12?arguments[12]:void 0,f=arguments.length>13?arguments[13]:void 0,p="time"===l,h=s||0,g=function(t){var n=e.getNow();return p&&(n=tx(e,n)),i[t]||a[t]||n},x=(0,eA.default)(c,2),v=x[0],b=x[1],y=(0,eR.useMergedState)(function(){return g(0)},{value:v}),k=(0,eA.default)(y,2),_=k[0],w=k[1],C=(0,eR.useMergedState)(function(){return g(1)},{value:b}),N=(0,eA.default)(C,2),S=N[0],T=N[1],M=j.useMemo(function(){var t=[_,S][h];return p?t:tx(e,t,u[h])},[p,_,S,h,e,u]),$=function(a){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"panel";(0,[w,T][h])(a);var s=[_,S];s[h]=a,!d||tf(e,t,_,s[0],l)&&tf(e,t,S,s[1],l)||d(s,{source:r,range:1===h?"end":"start",mode:n})},D=function(a,n){if(o){var r={date:"month",week:"month",month:"year",quarter:"year"}[l];if(r&&!tf(e,t,a,n,r)||"year"===l&&a&&Math.floor(e.getYear(a)/10)!==Math.floor(e.getYear(n)/10))return tN(e,l,n,-1)}return n},E=j.useRef(null);return(0,eY.default)(function(){if(r&&!i[h]){var t=p?null:e.getNow();if(null!==E.current&&E.current!==h?t=[_,S][1^h]:a[h]?t=0===h?a[0]:D(a[0],a[1]):a[1^h]&&(t=a[1^h]),t){m&&e.isAfter(m,t)&&(t=m);var n=o?tN(e,l,t,1):t;f&&e.isAfter(n,f)&&(t=o?tN(e,l,f,-1):f),$(t,"reset")}}},[r,h,a[h]]),j.useEffect(function(){r?E.current=h:E.current=null},[r,h]),(0,eY.default)(function(){r&&i&&i[h]&&$(i[h],"reset")},[r,h]),[M,$]}function tM(e,t){var a=j.useRef(e),n=j.useState({}),r=(0,eA.default)(n,2)[1],s=function(e){return e&&void 0!==t?t:a.current};return[s,function(e){a.current=e,r({})},s(!0)]}var t$=[];function tD(e,t,a){return[function(n){return n.map(function(n){return tg(n,{generateConfig:e,locale:t,format:a[0]})})},function(t,a){for(var n=Math.max(t.length,a.length),r=-1,s=0;s<n;s+=1){var l=t[s]||null,o=a[s]||null;if(l!==o&&!td(e,l,o)){r=s;break}}return[r<0,0!==r]}]}function tE(e,t){return(0,eI.default)(e).sort(function(e,a){return t.isAfter(e,a)?1:-1})}function tq(e,t,a,n,r,s,l,o,i){var c,u,d,m,f,p=(0,eR.useMergedState)(s,{value:l}),h=(0,eA.default)(p,2),g=h[0],x=h[1],v=g||t$,b=(c=tM(v),d=(u=(0,eA.default)(c,2))[0],m=u[1],f=(0,eF.useEvent)(function(){m(v)}),j.useEffect(function(){f()},[v]),[d,m]),y=(0,eA.default)(b,2),k=y[0],_=y[1],w=tD(e,t,a),C=(0,eA.default)(w,2),N=C[0],S=C[1],T=(0,eF.useEvent)(function(t){var a=(0,eI.default)(t);if(n)for(var s=0;s<2;s+=1)a[s]=a[s]||null;else r&&(a=tE(a.filter(function(e){return e}),e));var l=S(k(),a),i=(0,eA.default)(l,2),c=i[0],u=i[1];if(!c&&(_(a),o)){var d=N(a);o(a,d,{range:u?"end":"start"})}});return[v,x,k,T,function(){i&&i(k())}]}function tP(e,t,a,n,r,s,l,o,i,c){var u=e.generateConfig,d=e.locale,m=e.picker,f=e.onChange,p=e.allowEmpty,h=e.order,g=!s.some(function(e){return e})&&h,x=tD(u,d,l),v=(0,eA.default)(x,2),b=v[0],y=v[1],k=tM(t),_=(0,eA.default)(k,2),w=_[0],C=_[1],N=(0,eF.useEvent)(function(){C(t)});j.useEffect(function(){N()},[t]);var S=(0,eF.useEvent)(function(e){var n=null===e,l=(0,eI.default)(e||w());if(n)for(var o=Math.max(s.length,l.length),i=0;i<o;i+=1)s[i]||(l[i]=null);g&&l[0]&&l[1]&&(l=tE(l,u)),r(l);var x=l,v=(0,eA.default)(x,2),k=v[0],_=v[1],j=!k,C=!_,N=!p||(!j||p[0])&&(!C||p[1]),S=!h||j||C||tf(u,d,k,_,m)||u.isAfter(_,k),T=(s[0]||!k||!c(k,{activeIndex:0}))&&(s[1]||!_||!c(_,{from:k,activeIndex:1})),M=n||N&&S&&T;if(M){a(l);var $=y(l,t),D=(0,eA.default)($,1)[0];f&&!D&&f(n&&l.every(function(e){return!e})?null:l,b(l))}return M}),T=(0,eF.useEvent)(function(e,t){C(eX(w(),e,n()[e])),t&&S()}),M=!o&&!i;return tw(!M,function(){M&&(S(),r(t),N())},2),[T,S]}function tO(e,t,a,n,r){return("date"===t||"time"===t)&&(void 0!==a?a:void 0!==n?n:!r&&("date"===e||"time"===e))}var tI=e.i(430073);function tL(){return[]}function tA(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2,l=[],o=a>=1?0|a:1,i=e;i<=t;i+=o){var c=r.includes(i);c&&n||l.push({label:eZ(i,s),value:i,disabled:c})}return l}function tF(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,n=t||{},r=n.use12Hours,s=n.hourStep,l=void 0===s?1:s,o=n.minuteStep,i=void 0===o?1:o,c=n.secondStep,u=void 0===c?1:c,d=n.millisecondStep,m=void 0===d?100:d,f=n.hideDisabledOptions,p=n.disabledTime,h=n.disabledHours,g=n.disabledMinutes,x=n.disabledSeconds,v=j.useMemo(function(){return a||e.getNow()},[a,e]),b=j.useCallback(function(e){var t=(null==p?void 0:p(e))||{};return[t.disabledHours||h||tL,t.disabledMinutes||g||tL,t.disabledSeconds||x||tL,t.disabledMilliseconds||tL]},[p,h,g,x]),y=j.useMemo(function(){return b(v)},[v,b]),k=(0,eA.default)(y,4),_=k[0],w=k[1],C=k[2],N=k[3],S=j.useCallback(function(e,t,a,n){var s=tA(0,23,l,f,e());return[r?s.map(function(e){return(0,eL.default)((0,eL.default)({},e),{},{label:eZ(e.value%12||12,2)})}):s,function(e){return tA(0,59,i,f,t(e))},function(e,t){return tA(0,59,u,f,a(e,t))},function(e,t,a){return tA(0,999,m,f,n(e,t,a),3)}]},[f,l,r,m,i,u]),T=j.useMemo(function(){return S(_,w,C,N)},[S,_,w,C,N]),M=(0,eA.default)(T,4),$=M[0],D=M[1],E=M[2],q=M[3];return[function(t,a){var n=function(){return $},r=D,s=E,l=q;if(a){var o=b(a),i=(0,eA.default)(o,4),c=S(i[0],i[1],i[2],i[3]),u=(0,eA.default)(c,4),d=u[0],m=u[1],f=u[2],p=u[3];n=function(){return d},r=m,s=f,l=p}return function(e,t,a,n,r,s){var l=e;function o(e,t,a){var n=s[e](l),r=a.find(function(e){return e.value===n});if(!r||r.disabled){var o=a.filter(function(e){return!e.disabled}),i=(0,eI.default)(o).reverse().find(function(e){return e.value<=n})||o[0];i&&(n=i.value,l=s[t](l,n))}return n}var i=o("getHour","setHour",t()),c=o("getMinute","setMinute",a(i)),u=o("getSecond","setSecond",n(i,c));return o("getMillisecond","setMillisecond",r(i,c,u)),l}(t,n,r,s,l,e)},$,D,E,q]}function tR(e){var t=e.mode,a=e.internalMode,n=e.renderExtraFooter,r=e.showNow,s=e.showTime,l=e.onSubmit,o=e.onNow,i=e.invalid,c=e.needConfirm,u=e.generateConfig,d=e.disabledDate,m=j.useContext(eU),f=m.prefixCls,p=m.locale,h=m.button,g=u.getNow(),x=tF(u,s,g),v=(0,eA.default)(x,1)[0],b=null==n?void 0:n(t),y=d(g,{type:t}),k="".concat(f,"-now"),_="".concat(k,"-btn"),w=r&&j.createElement("li",{className:k},j.createElement("a",{className:(0,eO.default)(_,y&&"".concat(_,"-disabled")),"aria-disabled":y,onClick:function(){y||o(v(g))}},"date"===a?p.today:p.now)),C=c&&j.createElement("li",{className:"".concat(f,"-ok")},j.createElement(void 0===h?"button":h,{disabled:i,onClick:l},p.ok)),N=(w||C)&&j.createElement("ul",{className:"".concat(f,"-ranges")},w,C);return b||N?j.createElement("div",{className:"".concat(f,"-footer")},b&&j.createElement("div",{className:"".concat(f,"-footer-extra")},b),N):null}function tY(e,t,a){return function(n,r){var s=n.findIndex(function(n){return tf(e,t,n,r,a)});if(-1===s)return[].concat((0,eI.default)(n),[r]);var l=(0,eI.default)(n);return l.splice(s,1),l}}var tH=j.createContext(null);function tW(){return j.useContext(tH)}function tV(e,t){var a=e.prefixCls,n=e.generateConfig,r=e.locale,s=e.disabledDate,l=e.minDate,o=e.maxDate,i=e.cellRender,c=e.hoverValue,u=e.hoverRangeValue,d=e.onHover,m=e.values,f=e.pickerValue,p=e.onSelect,h=e.prevIcon,g=e.nextIcon,x=e.superPrevIcon,v=e.superNextIcon,b=n.getNow();return[{now:b,values:m,pickerValue:f,prefixCls:a,disabledDate:s,minDate:l,maxDate:o,cellRender:i,hoverValue:c,hoverRangeValue:u,onHover:d,locale:r,generateConfig:n,onSelect:p,panelType:t,prevIcon:h,nextIcon:g,superPrevIcon:x,superNextIcon:v},b]}var tz=j.createContext({});function tB(e){for(var t=e.rowNum,a=e.colNum,n=e.baseDate,r=e.getCellDate,s=e.prefixColumn,l=e.rowClassName,o=e.titleFormat,i=e.getCellText,c=e.getCellClassName,u=e.headerCells,d=e.cellSelection,m=void 0===d||d,f=e.disabledDate,p=tW(),h=p.prefixCls,g=p.panelType,x=p.now,v=p.disabledDate,b=p.cellRender,y=p.onHover,k=p.hoverValue,_=p.hoverRangeValue,w=p.generateConfig,C=p.values,N=p.locale,S=p.onSelect,T=f||v,M="".concat(h,"-cell"),$=j.useContext(tz).onCellDblClick,D=function(e){return C.some(function(t){return t&&tf(w,N,e,t,g)})},E=[],q=0;q<t;q+=1){for(var P=[],O=void 0,I=0;I<a;I+=1)!function(){var e=r(n,q*a+I),t=null==T?void 0:T(e,{type:g});0===I&&(O=e,s&&P.push(s(O)));var l=!1,u=!1,d=!1;if(m&&_){var f=(0,eA.default)(_,2),p=f[0],v=f[1];l=tp(w,p,v,e),u=tf(w,N,e,p,g),d=tf(w,N,e,v,g)}var C=o?tg(e,{locale:N,format:o,generateConfig:w}):void 0,E=j.createElement("div",{className:"".concat(M,"-inner")},i(e));P.push(j.createElement("td",{key:I,title:C,className:(0,eO.default)(M,(0,eL.default)((0,ez.default)((0,ez.default)((0,ez.default)((0,ez.default)((0,ez.default)((0,ez.default)({},"".concat(M,"-disabled"),t),"".concat(M,"-hover"),(k||[]).some(function(t){return tf(w,N,e,t,g)})),"".concat(M,"-in-range"),l&&!u&&!d),"".concat(M,"-range-start"),u),"".concat(M,"-range-end"),d),"".concat(h,"-cell-selected"),!_&&"week"!==g&&D(e)),c(e))),onClick:function(){t||S(e)},onDoubleClick:function(){!t&&$&&$()},onMouseEnter:function(){t||null==y||y(e)},onMouseLeave:function(){t||null==y||y(null)}},b?b(e,{prefixCls:h,originNode:E,today:x,type:g,locale:N}):E))}();E.push(j.createElement("tr",{key:q,className:null==l?void 0:l(O)},P))}return j.createElement("div",{className:"".concat(h,"-body")},j.createElement("table",{className:"".concat(h,"-content")},u&&j.createElement("thead",null,j.createElement("tr",null,u)),j.createElement("tbody",null,E)))}var tU={visibility:"hidden"};let tK=function(e){var t=e.offset,a=e.superOffset,n=e.onChange,r=e.getStart,s=e.getEnd,l=e.children,o=tW(),i=o.prefixCls,c=o.prevIcon,u=o.nextIcon,d=o.superPrevIcon,m=o.superNextIcon,f=o.minDate,p=o.maxDate,h=o.generateConfig,g=o.locale,x=o.pickerValue,v=o.panelType,b="".concat(i,"-header"),y=j.useContext(tz),k=y.hidePrev,_=y.hideNext,w=y.hideHeader,C=j.useMemo(function(){return!!f&&!!t&&!!s&&!th(h,g,s(t(-1,x)),f,v)},[f,t,x,s,h,g,v]),N=j.useMemo(function(){return!!f&&!!a&&!!s&&!th(h,g,s(a(-1,x)),f,v)},[f,a,x,s,h,g,v]),S=j.useMemo(function(){return!!p&&!!t&&!!r&&!th(h,g,p,r(t(1,x)),v)},[p,t,x,r,h,g,v]),T=j.useMemo(function(){return!!p&&!!a&&!!r&&!th(h,g,p,r(a(1,x)),v)},[p,a,x,r,h,g,v]),M=function(e){t&&n(t(e,x))},$=function(e){a&&n(a(e,x))};if(w)return null;var D="".concat(b,"-prev-btn"),E="".concat(b,"-next-btn"),q="".concat(b,"-super-prev-btn"),P="".concat(b,"-super-next-btn");return j.createElement("div",{className:b},a&&j.createElement("button",{type:"button","aria-label":g.previousYear,onClick:function(){return $(-1)},tabIndex:-1,className:(0,eO.default)(q,N&&"".concat(q,"-disabled")),disabled:N,style:k?tU:{}},void 0===d?"«":d),t&&j.createElement("button",{type:"button","aria-label":g.previousMonth,onClick:function(){return M(-1)},tabIndex:-1,className:(0,eO.default)(D,C&&"".concat(D,"-disabled")),disabled:C,style:k?tU:{}},void 0===c?"‹":c),j.createElement("div",{className:"".concat(b,"-view")},l),t&&j.createElement("button",{type:"button","aria-label":g.nextMonth,onClick:function(){return M(1)},tabIndex:-1,className:(0,eO.default)(E,S&&"".concat(E,"-disabled")),disabled:S,style:_?tU:{}},void 0===u?"›":u),a&&j.createElement("button",{type:"button","aria-label":g.nextYear,onClick:function(){return $(1)},tabIndex:-1,className:(0,eO.default)(P,T&&"".concat(P,"-disabled")),disabled:T,style:_?tU:{}},void 0===m?"»":m))};function tG(e){var t,a,n,r,s,l=e.prefixCls,o=e.panelName,i=e.locale,c=e.generateConfig,u=e.pickerValue,d=e.onPickerValueChange,m=e.onModeChange,f=e.mode,p=void 0===f?"date":f,h=e.disabledDate,g=e.onSelect,x=e.onHover,v=e.showWeek,b="".concat(l,"-").concat(void 0===o?"date":o,"-panel"),y="".concat(l,"-cell"),k="week"===p,_=tV(e,p),w=(0,eA.default)(_,2),C=w[0],N=w[1],S=c.locale.getWeekFirstDay(i.locale),T=c.setDate(u,1),M=(t=i.locale,a=c.locale.getWeekFirstDay(t),n=c.setDate(T,1),r=c.getWeekDay(n),s=c.addDate(n,a-r),c.getMonth(s)===c.getMonth(T)&&c.getDate(s)>1&&(s=c.addDate(s,-7)),s),$=c.getMonth(u),D=(void 0===v?k:v)?function(e){var t=null==h?void 0:h(e,{type:"week"});return j.createElement("td",{key:"week",className:(0,eO.default)(y,"".concat(y,"-week"),(0,ez.default)({},"".concat(y,"-disabled"),t)),onClick:function(){t||g(e)},onMouseEnter:function(){t||null==x||x(e)},onMouseLeave:function(){t||null==x||x(null)}},j.createElement("div",{className:"".concat(y,"-inner")},c.locale.getWeek(i.locale,e)))}:null,E=[],q=i.shortWeekDays||(c.locale.getShortWeekDays?c.locale.getShortWeekDays(i.locale):[]);D&&E.push(j.createElement("th",{key:"empty"},j.createElement("span",{style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},i.week)));for(var P=0;P<7;P+=1)E.push(j.createElement("th",{key:P},q[(P+S)%7]));var O=i.shortMonths||(c.locale.getShortMonths?c.locale.getShortMonths(i.locale):[]),I=j.createElement("button",{type:"button","aria-label":i.yearSelect,key:"year",onClick:function(){m("year",u)},tabIndex:-1,className:"".concat(l,"-year-btn")},tg(u,{locale:i,format:i.yearFormat,generateConfig:c})),L=j.createElement("button",{type:"button","aria-label":i.monthSelect,key:"month",onClick:function(){m("month",u)},tabIndex:-1,className:"".concat(l,"-month-btn")},i.monthFormat?tg(u,{locale:i,format:i.monthFormat,generateConfig:c}):O[$]),A=i.monthBeforeYear?[L,I]:[I,L];return j.createElement(tH.Provider,{value:C},j.createElement("div",{className:(0,eO.default)(b,v&&"".concat(b,"-show-week"))},j.createElement(tK,{offset:function(e){return c.addMonth(u,e)},superOffset:function(e){return c.addYear(u,e)},onChange:d,getStart:function(e){return c.setDate(e,1)},getEnd:function(e){var t=c.setDate(e,1);return t=c.addMonth(t,1),c.addDate(t,-1)}},A),j.createElement(tB,(0,eD.default)({titleFormat:i.fieldDateFormat},e,{colNum:7,rowNum:6,baseDate:M,headerCells:E,getCellDate:function(e,t){return c.addDate(e,t)},getCellText:function(e){return tg(e,{locale:i,format:i.cellDateFormat,generateConfig:c})},getCellClassName:function(e){return(0,ez.default)((0,ez.default)({},"".concat(l,"-cell-in-view"),ti(c,e,u)),"".concat(l,"-cell-today"),tc(c,e,N))},prefixColumn:D,cellSelection:!k}))))}var tZ=e.i(606262),tQ=1/3;function tX(e){var t,a,n,r,s,l,o=e.units,i=e.value,c=e.optionalValue,u=e.type,d=e.onChange,m=e.onHover,f=e.onDblClick,p=e.changeOnScroll,h=tW(),g=h.prefixCls,x=h.cellRender,v=h.now,b=h.locale,y="".concat(g,"-time-panel-cell"),k=j.useRef(null),_=j.useRef(),w=function(){clearTimeout(_.current)},C=(t=null!=i?i:c,a=j.useRef(!1),n=j.useRef(null),r=j.useRef(null),s=function(){ty.default.cancel(n.current),a.current=!1},l=j.useRef(),[(0,eF.useEvent)(function(){var e=k.current;if(r.current=null,l.current=0,e){var o=e.querySelector('[data-value="'.concat(t,'"]')),i=e.querySelector("li");o&&i&&function t(){s(),a.current=!0,l.current+=1;var c=e.scrollTop,u=i.offsetTop,d=o.offsetTop,m=d-u;if(0===d&&o!==i||!(0,tZ.default)(e)){l.current<=5&&(n.current=(0,ty.default)(t));return}var f=c+(m-c)*tQ,p=Math.abs(m-f);if(null!==r.current&&r.current<p)return void s();if(r.current=p,p<=1){e.scrollTop=m,s();return}e.scrollTop=f,n.current=(0,ty.default)(t)}()}}),s,function(){return a.current}]),N=(0,eA.default)(C,3),S=N[0],T=N[1],M=N[2];return(0,eY.default)(function(){return S(),w(),function(){T(),w()}},[i,c,o.map(function(e){return[e.value,e.label,e.disabled].join(",")}).join(";")]),j.createElement("ul",{className:"".concat("".concat(g,"-time-panel"),"-column"),ref:k,"data-type":u,onScroll:function(e){w();var t=e.target;!M()&&p&&(_.current=setTimeout(function(){var e=k.current,a=e.querySelector("li").offsetTop,n=Array.from(e.querySelectorAll("li")).map(function(e){return e.offsetTop-a}).map(function(e,a){return o[a].disabled?Number.MAX_SAFE_INTEGER:Math.abs(e-t.scrollTop)}),r=Math.min.apply(Math,(0,eI.default)(n)),s=o[n.findIndex(function(e){return e===r})];s&&!s.disabled&&d(s.value)},300))}},o.map(function(e){var t=e.label,a=e.value,n=e.disabled,r=j.createElement("div",{className:"".concat(y,"-inner")},t);return j.createElement("li",{key:a,className:(0,eO.default)(y,(0,ez.default)((0,ez.default)({},"".concat(y,"-selected"),i===a),"".concat(y,"-disabled"),n)),onClick:function(){n||d(a)},onDoubleClick:function(){!n&&f&&f()},onMouseEnter:function(){m(a)},onMouseLeave:function(){m(null)},"data-value":a},x?x(a,{prefixCls:g,originNode:r,today:v,type:"time",subType:u,locale:b}):r)}))}function tJ(e){var t=e.showHour,a=e.showMinute,n=e.showSecond,r=e.showMillisecond,s=e.use12Hours,l=e.changeOnScroll,o=tW(),i=o.prefixCls,c=o.values,u=o.generateConfig,d=o.locale,m=o.onSelect,f=o.onHover,p=void 0===f?function(){}:f,h=o.pickerValue,g=(null==c?void 0:c[0])||null,x=j.useContext(tz).onCellDblClick,v=tF(u,e,g),b=(0,eA.default)(v,5),y=b[0],k=b[1],_=b[2],w=b[3],C=b[4],N=function(e){return[g&&u[e](g),h&&u[e](h)]},S=N("getHour"),T=(0,eA.default)(S,2),M=T[0],$=T[1],D=N("getMinute"),E=(0,eA.default)(D,2),q=E[0],P=E[1],O=N("getSecond"),I=(0,eA.default)(O,2),L=I[0],A=I[1],F=N("getMillisecond"),R=(0,eA.default)(F,2),Y=R[0],H=R[1],W=null===M?null:M<12?"am":"pm",V=j.useMemo(function(){return s?M<12?k.filter(function(e){return e.value<12}):k.filter(function(e){return!(e.value<12)}):k},[M,k,s]),z=function(e,t){var a,n=e.filter(function(e){return!e.disabled});return null!=t?t:null==n||null==(a=n[0])?void 0:a.value},B=z(k,M),U=j.useMemo(function(){return _(B)},[_,B]),K=z(U,q),G=j.useMemo(function(){return w(B,K)},[w,B,K]),Z=z(G,L),Q=j.useMemo(function(){return C(B,K,Z)},[C,B,K,Z]),X=z(Q,Y),J=j.useMemo(function(){if(!s)return[];var e=u.getNow(),t=u.setHour(e,6),a=u.setHour(e,18),n=function(e,t){var a=d.cellMeridiemFormat;return a?tg(e,{generateConfig:u,locale:d,format:a}):t};return[{label:n(t,"AM"),value:"am",disabled:k.every(function(e){return e.disabled||!(e.value<12)})},{label:n(a,"PM"),value:"pm",disabled:k.every(function(e){return e.disabled||e.value<12})}]},[k,s,u,d]),ee=function(e){m(y(e))},et=j.useMemo(function(){var e=g||h||u.getNow(),t=function(e){return null!=e};return t(M)?(e=u.setHour(e,M),e=u.setMinute(e,q),e=u.setSecond(e,L),e=u.setMillisecond(e,Y)):t($)?(e=u.setHour(e,$),e=u.setMinute(e,P),e=u.setSecond(e,A),e=u.setMillisecond(e,H)):t(B)&&(e=u.setHour(e,B),e=u.setMinute(e,K),e=u.setSecond(e,Z),e=u.setMillisecond(e,X)),e},[g,h,M,q,L,Y,B,K,Z,X,$,P,A,H,u]),ea=function(e,t){return null===e?null:u[t](et,e)},en=function(e){return ea(e,"setHour")},er=function(e){return ea(e,"setMinute")},es=function(e){return ea(e,"setSecond")},el=function(e){return ea(e,"setMillisecond")},eo=function(e){return null===e?null:"am"!==e||M<12?"pm"===e&&M<12?u.setHour(et,M+12):et:u.setHour(et,M-12)},ei={onDblClick:x,changeOnScroll:l};return j.createElement("div",{className:"".concat(i,"-content")},t&&j.createElement(tX,(0,eD.default)({units:V,value:M,optionalValue:$,type:"hour",onChange:function(e){ee(en(e))},onHover:function(e){p(en(e))}},ei)),a&&j.createElement(tX,(0,eD.default)({units:U,value:q,optionalValue:P,type:"minute",onChange:function(e){ee(er(e))},onHover:function(e){p(er(e))}},ei)),n&&j.createElement(tX,(0,eD.default)({units:G,value:L,optionalValue:A,type:"second",onChange:function(e){ee(es(e))},onHover:function(e){p(es(e))}},ei)),r&&j.createElement(tX,(0,eD.default)({units:Q,value:Y,optionalValue:H,type:"millisecond",onChange:function(e){ee(el(e))},onHover:function(e){p(el(e))}},ei)),s&&j.createElement(tX,(0,eD.default)({units:J,value:W,type:"meridiem",onChange:function(e){ee(eo(e))},onHover:function(e){p(eo(e))}},ei)))}function t0(e){var t=e.prefixCls,a=e.value,n=e.locale,r=e.generateConfig,s=e.showTime,l=(s||{}).format,o=tV(e,"time"),i=(0,eA.default)(o,1)[0];return j.createElement(tH.Provider,{value:i},j.createElement("div",{className:(0,eO.default)("".concat(t,"-time-panel"))},j.createElement(tK,null,a?tg(a,{locale:n,format:l,generateConfig:r}):" "),j.createElement(tJ,s)))}var t1={date:tG,datetime:function(e){var t=e.prefixCls,a=e.generateConfig,n=e.showTime,r=e.onSelect,s=e.value,l=e.pickerValue,o=e.onHover,i=tF(a,n),c=(0,eA.default)(i,1)[0],u=function(e){return s?tx(a,e,s):tx(a,e,l)};return j.createElement("div",{className:"".concat(t,"-datetime-panel")},j.createElement(tG,(0,eD.default)({},e,{onSelect:function(e){var t=u(e);r(c(t,t))},onHover:function(e){null==o||o(e?u(e):e)}})),j.createElement(t0,e))},week:function(e){var t=e.prefixCls,a=e.generateConfig,n=e.locale,r=e.value,s=e.hoverValue,l=e.hoverRangeValue,o=n.locale,i="".concat(t,"-week-panel-row");return j.createElement(tG,(0,eD.default)({},e,{mode:"week",panelName:"week",rowClassName:function(e){var t={};if(l){var n=(0,eA.default)(l,2),c=n[0],u=n[1],d=tm(a,o,c,e),m=tm(a,o,u,e);t["".concat(i,"-range-start")]=d,t["".concat(i,"-range-end")]=m,t["".concat(i,"-range-hover")]=!d&&!m&&tp(a,c,u,e)}return s&&(t["".concat(i,"-hover")]=s.some(function(t){return tm(a,o,e,t)})),(0,eO.default)(i,(0,ez.default)({},"".concat(i,"-selected"),!l&&tm(a,o,r,e)),t)}}))},month:function(e){var t=e.prefixCls,a=e.locale,n=e.generateConfig,r=e.pickerValue,s=e.disabledDate,l=e.onPickerValueChange,o=e.onModeChange,i="".concat(t,"-month-panel"),c=tV(e,"month"),u=(0,eA.default)(c,1)[0],d=n.setMonth(r,0),m=a.shortMonths||(n.locale.getShortMonths?n.locale.getShortMonths(a.locale):[]),f=s?function(e,t){var a=n.setDate(e,1),r=n.setMonth(a,n.getMonth(a)+1),l=n.addDate(r,-1);return s(a,t)&&s(l,t)}:null,p=j.createElement("button",{type:"button",key:"year","aria-label":a.yearSelect,onClick:function(){o("year")},tabIndex:-1,className:"".concat(t,"-year-btn")},tg(r,{locale:a,format:a.yearFormat,generateConfig:n}));return j.createElement(tH.Provider,{value:u},j.createElement("div",{className:i},j.createElement(tK,{superOffset:function(e){return n.addYear(r,e)},onChange:l,getStart:function(e){return n.setMonth(e,0)},getEnd:function(e){return n.setMonth(e,11)}},p),j.createElement(tB,(0,eD.default)({},e,{disabledDate:f,titleFormat:a.fieldMonthFormat,colNum:3,rowNum:4,baseDate:d,getCellDate:function(e,t){return n.addMonth(e,t)},getCellText:function(e){var t=n.getMonth(e);return a.monthFormat?tg(e,{locale:a,format:a.monthFormat,generateConfig:n}):m[t]},getCellClassName:function(){return(0,ez.default)({},"".concat(t,"-cell-in-view"),!0)}}))))},quarter:function(e){var t=e.prefixCls,a=e.locale,n=e.generateConfig,r=e.pickerValue,s=e.onPickerValueChange,l=e.onModeChange,o="".concat(t,"-quarter-panel"),i=tV(e,"quarter"),c=(0,eA.default)(i,1)[0],u=n.setMonth(r,0),d=j.createElement("button",{type:"button",key:"year","aria-label":a.yearSelect,onClick:function(){l("year")},tabIndex:-1,className:"".concat(t,"-year-btn")},tg(r,{locale:a,format:a.yearFormat,generateConfig:n}));return j.createElement(tH.Provider,{value:c},j.createElement("div",{className:o},j.createElement(tK,{superOffset:function(e){return n.addYear(r,e)},onChange:s,getStart:function(e){return n.setMonth(e,0)},getEnd:function(e){return n.setMonth(e,11)}},d),j.createElement(tB,(0,eD.default)({},e,{titleFormat:a.fieldQuarterFormat,colNum:4,rowNum:1,baseDate:u,getCellDate:function(e,t){return n.addMonth(e,3*t)},getCellText:function(e){return tg(e,{locale:a,format:a.cellQuarterFormat,generateConfig:n})},getCellClassName:function(){return(0,ez.default)({},"".concat(t,"-cell-in-view"),!0)}}))))},year:function(e){var t=e.prefixCls,a=e.locale,n=e.generateConfig,r=e.pickerValue,s=e.disabledDate,l=e.onPickerValueChange,o=e.onModeChange,i="".concat(t,"-year-panel"),c=tV(e,"year"),u=(0,eA.default)(c,1)[0],d=function(e){var t=10*Math.floor(n.getYear(e)/10);return n.setYear(e,t)},m=function(e){var t=d(e);return n.addYear(t,9)},f=d(r),p=m(r),h=n.addYear(f,-1),g=s?function(e,t){var a=n.setMonth(e,0),r=n.setDate(a,1),l=n.addYear(r,1),o=n.addDate(l,-1);return s(r,t)&&s(o,t)}:null,x=j.createElement("button",{type:"button",key:"decade","aria-label":a.decadeSelect,onClick:function(){o("decade")},tabIndex:-1,className:"".concat(t,"-decade-btn")},tg(f,{locale:a,format:a.yearFormat,generateConfig:n}),"-",tg(p,{locale:a,format:a.yearFormat,generateConfig:n}));return j.createElement(tH.Provider,{value:u},j.createElement("div",{className:i},j.createElement(tK,{superOffset:function(e){return n.addYear(r,10*e)},onChange:l,getStart:d,getEnd:m},x),j.createElement(tB,(0,eD.default)({},e,{disabledDate:g,titleFormat:a.fieldYearFormat,colNum:3,rowNum:4,baseDate:h,getCellDate:function(e,t){return n.addYear(e,t)},getCellText:function(e){return tg(e,{locale:a,format:a.cellYearFormat,generateConfig:n})},getCellClassName:function(e){return(0,ez.default)({},"".concat(t,"-cell-in-view"),tl(n,e,f)||tl(n,e,p)||tp(n,f,p,e))}}))))},decade:function(e){var t=e.prefixCls,a=e.locale,n=e.generateConfig,r=e.pickerValue,s=e.disabledDate,l=e.onPickerValueChange,o=tV(e,"decade"),i=(0,eA.default)(o,1)[0],c=function(e){var t=100*Math.floor(n.getYear(e)/100);return n.setYear(e,t)},u=function(e){var t=c(e);return n.addYear(t,99)},d=c(r),m=u(r),f=n.addYear(d,-10),p=s?function(e,t){var a=n.setDate(e,1),r=n.setMonth(a,0),l=n.setYear(r,10*Math.floor(n.getYear(r)/10)),o=n.addYear(l,10),i=n.addDate(o,-1);return s(l,t)&&s(i,t)}:null,h="".concat(tg(d,{locale:a,format:a.yearFormat,generateConfig:n}),"-").concat(tg(m,{locale:a,format:a.yearFormat,generateConfig:n}));return j.createElement(tH.Provider,{value:i},j.createElement("div",{className:"".concat(t,"-decade-panel")},j.createElement(tK,{superOffset:function(e){return n.addYear(r,100*e)},onChange:l,getStart:c,getEnd:u},h),j.createElement(tB,(0,eD.default)({},e,{disabledDate:p,colNum:3,rowNum:4,baseDate:f,getCellDate:function(e,t){return n.addYear(e,10*t)},getCellText:function(e){var t=a.cellYearFormat,r=tg(e,{locale:a,format:t,generateConfig:n}),s=tg(n.addYear(e,9),{locale:a,format:t,generateConfig:n});return"".concat(r,"-").concat(s)},getCellClassName:function(e){return(0,ez.default)({},"".concat(t,"-cell-in-view"),ts(n,e,d)||ts(n,e,m)||tp(n,d,m,e))}}))))},time:t0},t2=j.memo(j.forwardRef(function(e,t){var a,n=e.locale,r=e.generateConfig,s=e.direction,l=e.prefixCls,o=e.tabIndex,i=e.multiple,c=e.defaultValue,u=e.value,d=e.onChange,m=e.onSelect,f=e.defaultPickerValue,p=e.pickerValue,h=e.onPickerValueChange,g=e.mode,x=e.onPanelChange,v=e.picker,b=void 0===v?"date":v,y=e.showTime,k=e.hoverValue,_=e.hoverRangeValue,w=e.cellRender,C=e.dateRender,N=e.monthCellRender,S=e.components,T=e.hideHeader,M=(null==(a=j.useContext(eU))?void 0:a.prefixCls)||l||"rc-picker",$=j.useRef();j.useImperativeHandle(t,function(){return{nativeElement:$.current}});var D=ta(e),E=(0,eA.default)(D,4),q=E[0],P=E[1],O=E[2],I=E[3],L=e6(n,P),A="date"===b&&y?"datetime":b,F=j.useMemo(function(){return tn(A,O,I,q,L)},[A,O,I,q,L]),R=r.getNow(),Y=(0,eR.useMergedState)(b,{value:g,postState:function(e){return e||"date"}}),H=(0,eA.default)(Y,2),W=H[0],V=H[1],z="date"===W&&F?"datetime":W,B=tY(r,n,A),U=(0,eR.useMergedState)(c,{value:u}),K=(0,eA.default)(U,2),G=K[0],Z=K[1],Q=j.useMemo(function(){var e=eQ(G).filter(function(e){return e});return i?e:e.slice(0,1)},[G,i]),X=(0,eF.useEvent)(function(e){Z(e),d&&(null===e||Q.length!==e.length||Q.some(function(t,a){return!tf(r,n,t,e[a],A)}))&&(null==d||d(i?e:e[0]))}),J=(0,eF.useEvent)(function(e){null==m||m(e),W===b&&X(i?B(Q,e):[e])}),ee=(0,eR.useMergedState)(f||Q[0]||R,{value:p}),et=(0,eA.default)(ee,2),ea=et[0],en=et[1];j.useEffect(function(){Q[0]&&!p&&en(Q[0])},[Q[0]]);var er=function(e,t){null==x||x(e||p,t||W)},es=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];en(e),null==h||h(e),t&&er(e)},el=function(e,t){V(e),t&&es(t),er(t,e)},eo=j.useMemo(function(){if(Array.isArray(_)){var e,t,a=(0,eA.default)(_,2);e=a[0],t=a[1]}else e=_;return e||t?(e=e||t,t=t||e,r.isAfter(e,t)?[t,e]:[e,t]):null},[_,r]),ei=e4(w,C,N),ec=(void 0===S?{}:S)[z]||t1[z]||tG,eu=j.useContext(tz),ed=j.useMemo(function(){return(0,eL.default)((0,eL.default)({},eu),{},{hideHeader:T})},[eu,T]),em="".concat(M,"-panel"),ef=eJ(e,["showWeek","prevIcon","nextIcon","superPrevIcon","superNextIcon","disabledDate","minDate","maxDate","onHover"]);return j.createElement(tz.Provider,{value:ed},j.createElement("div",{ref:$,tabIndex:void 0===o?0:o,className:(0,eO.default)(em,(0,ez.default)({},"".concat(em,"-rtl"),"rtl"===s))},j.createElement(ec,(0,eD.default)({},ef,{showTime:F,prefixCls:M,locale:L,generateConfig:r,onModeChange:el,pickerValue:ea,onPickerValueChange:function(e){es(e,!0)},value:Q[0],onSelect:function(e){if(J(e),es(e),W!==b){var t=["decade","year"],a=[].concat(t,["month"]),n={quarter:[].concat(t,["quarter"]),week:[].concat((0,eI.default)(a),["week"]),date:[].concat((0,eI.default)(a),["date"])}[b]||a,r=n.indexOf(W),s=n[r+1];s&&el(s,e)}},values:Q,cellRender:ei,hoverRangeValue:eo,hoverValue:k}))))}));function t4(e){var t=e.picker,a=e.multiplePanel,n=e.pickerValue,r=e.onPickerValueChange,s=e.needConfirm,l=e.onSubmit,o=e.range,i=e.hoverValue,c=j.useContext(eU),u=c.prefixCls,d=c.generateConfig,m=j.useCallback(function(e,a){return tN(d,t,e,a)},[d,t]),f=j.useMemo(function(){return m(n,1)},[n,m]),p={onCellDblClick:function(){s&&l()}},h=(0,eL.default)((0,eL.default)({},e),{},{hoverValue:null,hoverRangeValue:null,hideHeader:"time"===t});return(o?h.hoverRangeValue=i:h.hoverValue=i,a)?j.createElement("div",{className:"".concat(u,"-panels")},j.createElement(tz.Provider,{value:(0,eL.default)((0,eL.default)({},p),{},{hideNext:!0})},j.createElement(t2,h)),j.createElement(tz.Provider,{value:(0,eL.default)((0,eL.default)({},p),{},{hidePrev:!0})},j.createElement(t2,(0,eD.default)({},h,{pickerValue:f,onPickerValueChange:function(e){r(m(e,-1))}})))):j.createElement(tz.Provider,{value:(0,eL.default)({},p)},j.createElement(t2,h))}function t5(e){return"function"==typeof e?e():e}function t3(e){var t=e.prefixCls,a=e.presets,n=e.onClick,r=e.onHover;return a.length?j.createElement("div",{className:"".concat(t,"-presets")},j.createElement("ul",null,a.map(function(e,t){var a=e.label,s=e.value;return j.createElement("li",{key:t,onClick:function(){n(t5(s))},onMouseEnter:function(){r(t5(s))},onMouseLeave:function(){r(null)}},a)}))):null}function t6(e){var t=e.panelRender,a=e.internalMode,n=e.picker,r=e.showNow,s=e.range,l=e.multiple,o=e.activeInfo,i=e.presets,c=e.onPresetHover,u=e.onPresetSubmit,d=e.onFocus,m=e.onBlur,f=e.onPanelMouseDown,p=e.direction,h=e.value,g=e.onSelect,x=e.isInvalid,v=e.defaultOpenValue,b=e.onOk,y=e.onSubmit,k=j.useContext(eU).prefixCls,_="".concat(k,"-panel"),w="rtl"===p,C=j.useRef(null),N=j.useRef(null),S=j.useState(0),T=(0,eA.default)(S,2),M=T[0],$=T[1],D=j.useState(0),E=(0,eA.default)(D,2),q=E[0],P=E[1],O=j.useState(0),I=(0,eA.default)(O,2),L=I[0],A=I[1],F=(0,eA.default)(void 0===o?[0,0,0]:o,3),R=F[0],Y=F[1],H=F[2],W=j.useState(0),V=(0,eA.default)(W,2),z=V[0],B=V[1];function U(e){return e.filter(function(e){return e})}j.useEffect(function(){B(10)},[R]),j.useEffect(function(){if(s&&N.current){var e,t=(null==(e=C.current)?void 0:e.offsetWidth)||0,a=N.current.getBoundingClientRect();if(!a.height||a.right<0)return void B(function(e){return Math.max(0,e-1)});A((w?Y-t:R)-a.left),M&&M<H?P(Math.max(0,w?a.right-(Y-t+M):R+t-a.left-M)):P(0)}},[z,w,M,R,Y,H,s]);var K=j.useMemo(function(){return U(eQ(h))},[h]),G="time"===n&&!K.length,Z=j.useMemo(function(){return G?U([v]):K},[G,K,v]),Q=G?v:K,X=j.useMemo(function(){return!Z.length||Z.some(function(e){return x(e)})},[Z,x]),J=j.createElement("div",{className:"".concat(k,"-panel-layout")},j.createElement(t3,{prefixCls:k,presets:i,onClick:u,onHover:c}),j.createElement("div",null,j.createElement(t4,(0,eD.default)({},e,{value:Q})),j.createElement(tR,(0,eD.default)({},e,{showNow:!l&&r,invalid:X,onSubmit:function(){G&&g(v),b(),y()}}))));t&&(J=t(J));var ee="marginLeft",et="marginRight",ea=j.createElement("div",{onMouseDown:f,tabIndex:-1,className:(0,eO.default)("".concat(_,"-container"),"".concat(k,"-").concat(a,"-panel-container")),style:(0,ez.default)((0,ez.default)({},w?et:ee,q),w?ee:et,"auto"),onFocus:d,onBlur:m},J);return s&&(ea=j.createElement("div",{onMouseDown:f,ref:N,className:(0,eO.default)("".concat(k,"-range-wrapper"),"".concat(k,"-").concat(n,"-range-wrapper"))},j.createElement("div",{ref:C,className:"".concat(k,"-range-arrow"),style:{left:L}}),j.createElement(tI.default,{onResize:function(e){e.width&&$(e.width)}},ea))),ea}var t9=e.i(703923);function t7(e,t){var a=e.format,n=e.maskFormat,r=e.generateConfig,s=e.locale,l=e.preserveInvalidOnBlur,o=e.inputReadOnly,i=e.required,c=e["aria-required"],u=e.onSubmit,d=e.onFocus,m=e.onBlur,f=e.onInputChange,p=e.onInvalid,h=e.open,g=e.onOpenChange,x=e.onKeyDown,v=e.onChange,b=e.activeHelp,y=e.name,k=e.autoComplete,_=e.id,w=e.value,C=e.invalid,N=e.placeholder,S=e.disabled,T=e.activeIndex,M=e.allHelp,$=e.picker,D=function(e,t){var a=r.locale.parse(s.locale,e,[t]);return a&&r.isValidate(a)?a:null},E=a[0],q=j.useCallback(function(e){return tg(e,{locale:s,format:E,generateConfig:r})},[s,r,E]),P=j.useMemo(function(){return w.map(q)},[w,q]),O=j.useMemo(function(){return Math.max("time"===$?8:10,"function"==typeof E?E(r.getNow()).length:E.length)+2},[E,$,r]),I=function(e){for(var t=0;t<a.length;t+=1){var n=a[t];if("string"==typeof n){var r=D(e,n);if(r)return r}}return!1};return[function(a){function r(e){return void 0!==a?e[a]:e}var s=(0,eW.default)(e,{aria:!0,data:!0}),j=(0,eL.default)((0,eL.default)({},s),{},{format:n,validateFormat:function(e){return!!I(e)},preserveInvalidOnBlur:l,readOnly:o,required:i,"aria-required":c,name:y,autoComplete:k,size:O,id:r(_),value:r(P)||"",invalid:r(C),placeholder:r(N),active:T===a,helped:M||b&&T===a,disabled:r(S),onFocus:function(e){d(e,a)},onBlur:function(e){m(e,a)},onSubmit:u,onChange:function(e){f();var t=I(e);if(t){p(!1,a),v(t,a);return}p(!!e,a)},onHelp:function(){g(!0,{index:a})},onKeyDown:function(e){var t=!1;if(null==x||x(e,function(){t=!0}),!e.defaultPrevented&&!t)switch(e.key){case"Escape":g(!1,{index:a});break;case"Enter":h||g(!0)}}},null==t?void 0:t({valueTexts:P}));return Object.keys(j).forEach(function(e){void 0===j[e]&&delete j[e]}),j},q]}var t8=["onMouseEnter","onMouseLeave"];function ae(e){return j.useMemo(function(){return eJ(e,t8)},[e])}var at=["icon","type"],aa=["onClear"];function an(e){var t=e.icon,a=e.type,n=(0,t9.default)(e,at),r=j.useContext(eU).prefixCls;return t?j.createElement("span",(0,eD.default)({className:"".concat(r,"-").concat(a)},n),t):null}function ar(e){var t=e.onClear,a=(0,t9.default)(e,aa);return j.createElement(an,(0,eD.default)({},a,{type:"clear",role:"button",onMouseDown:function(e){e.preventDefault()},onClick:function(e){e.stopPropagation(),t()}}))}var as=e.i(278409),al=e.i(233848),ao=["YYYY","MM","DD","HH","mm","ss","SSS"],ai=function(){function e(t){(0,as.default)(this,e),(0,ez.default)(this,"format",void 0),(0,ez.default)(this,"maskFormat",void 0),(0,ez.default)(this,"cells",void 0),(0,ez.default)(this,"maskCells",void 0),this.format=t;var a=RegExp(ao.map(function(e){return"(".concat(e,")")}).join("|"),"g");this.maskFormat=t.replace(a,function(e){return"顧".repeat(e.length)});var n=new RegExp("(".concat(ao.join("|"),")")),r=(t.split(n)||[]).filter(function(e){return e}),s=0;this.cells=r.map(function(e){var t=ao.includes(e),a=s,n=s+e.length;return s=n,{text:e,mask:t,start:a,end:n}}),this.maskCells=this.cells.filter(function(e){return e.mask})}return(0,al.default)(e,[{key:"getSelection",value:function(e){var t=this.maskCells[e]||{};return[t.start||0,t.end||0]}},{key:"match",value:function(e){for(var t=0;t<this.maskFormat.length;t+=1){var a=this.maskFormat[t],n=e[t];if(!n||"顧"!==a&&a!==n)return!1}return!0}},{key:"size",value:function(){return this.maskCells.length}},{key:"getMaskCellIndex",value:function(e){for(var t=Number.MAX_SAFE_INTEGER,a=0,n=0;n<this.maskCells.length;n+=1){var r=this.maskCells[n],s=r.start,l=r.end;if(e>=s&&e<=l)return n;var o=Math.min(Math.abs(e-s),Math.abs(e-l));o<t&&(t=o,a=n)}return a}}]),e}(),ac=["active","showActiveCls","suffixIcon","format","validateFormat","onChange","onInput","helped","onHelp","onSubmit","onKeyDown","preserveInvalidOnBlur","invalid","clearIcon"],au=j.forwardRef(function(e,t){var a=e.active,n=e.showActiveCls,r=e.suffixIcon,s=e.format,l=e.validateFormat,o=e.onChange,i=(e.onInput,e.helped),c=e.onHelp,u=e.onSubmit,d=e.onKeyDown,m=e.preserveInvalidOnBlur,f=void 0!==m&&m,p=e.invalid,h=e.clearIcon,g=(0,t9.default)(e,ac),x=e.value,v=e.onFocus,b=e.onBlur,y=e.onMouseUp,k=j.useContext(eU),_=k.prefixCls,w=k.input,C="".concat(_,"-input"),N=j.useState(!1),S=(0,eA.default)(N,2),T=S[0],M=S[1],$=j.useState(x),D=(0,eA.default)($,2),E=D[0],q=D[1],P=j.useState(""),O=(0,eA.default)(P,2),I=O[0],L=O[1],A=j.useState(null),F=(0,eA.default)(A,2),R=F[0],Y=F[1],H=j.useState(null),W=(0,eA.default)(H,2),V=W[0],z=W[1],B=E||"";j.useEffect(function(){q(x)},[x]);var U=j.useRef(),K=j.useRef();j.useImperativeHandle(t,function(){return{nativeElement:U.current,inputElement:K.current,focus:function(e){K.current.focus(e)},blur:function(){K.current.blur()}}});var G=j.useMemo(function(){return new ai(s||"")},[s]),Z=j.useMemo(function(){return i?[0,0]:G.getSelection(R)},[G,R,i]),Q=(0,eA.default)(Z,2),X=Q[0],J=Q[1],ee=function(e){e&&e!==s&&e!==x&&c()},et=(0,eF.useEvent)(function(e){l(e)&&o(e),q(e),ee(e)}),ea=j.useRef(!1),en=function(e){b(e)};tw(a,function(){a||f||q(x)});var er=function(e){"Enter"===e.key&&l(B)&&u(),null==d||d(e)},es=j.useRef();(0,eY.default)(function(){if(T&&s&&!ea.current)return G.match(B)?(K.current.setSelectionRange(X,J),es.current=(0,ty.default)(function(){K.current.setSelectionRange(X,J)}),function(){ty.default.cancel(es.current)}):void et(s)},[G,s,T,B,R,X,J,V,et]);var el=s?{onFocus:function(e){M(!0),Y(0),L(""),v(e)},onBlur:function(e){M(!1),en(e)},onKeyDown:function(e){er(e);var t=e.key,a=null,n=null,r=J-X,l=s.slice(X,J),o=function(e){Y(function(t){var a=t+e;return Math.min(a=Math.max(a,0),G.size()-1)})},i=function(e){var t={YYYY:[0,9999,new Date().getFullYear()],MM:[1,12],DD:[1,31],HH:[0,23],mm:[0,59],ss:[0,59],SSS:[0,999]}[l],a=(0,eA.default)(t,3),n=a[0],r=a[1],s=a[2],o=Number(B.slice(X,J));if(isNaN(o))return String(s||(e>0?n:r));var i=r-n+1;return String(n+(i+(o+e)-n)%i)};switch(t){case"Backspace":case"Delete":a="",n=l;break;case"ArrowLeft":a="",o(-1);break;case"ArrowRight":a="",o(1);break;case"ArrowUp":a="",n=i(1);break;case"ArrowDown":a="",n=i(-1);break;default:isNaN(Number(t))||(n=a=I+t)}null!==a&&(L(a),a.length>=r&&(o(1),L(""))),null!==n&&et((B.slice(0,X)+eZ(n,r)+B.slice(J)).slice(0,s.length)),z({})},onMouseDown:function(){ea.current=!0},onMouseUp:function(e){var t=e.target.selectionStart;Y(G.getMaskCellIndex(t)),z({}),null==y||y(e),ea.current=!1},onPaste:function(e){var t=e.clipboardData.getData("text");l(t)&&et(t)}}:{};return j.createElement("div",{ref:U,className:(0,eO.default)(C,(0,ez.default)((0,ez.default)({},"".concat(C,"-active"),a&&(void 0===n||n)),"".concat(C,"-placeholder"),i))},j.createElement(void 0===w?"input":w,(0,eD.default)({ref:K,"aria-invalid":p,autoComplete:"off"},g,{onKeyDown:er,onBlur:en},el,{value:B,onChange:function(e){if(!s){var t=e.target.value;ee(t),q(t),o(t)}}})),j.createElement(an,{type:"suffix",icon:r}),h)}),ad=["id","prefix","clearIcon","suffixIcon","separator","activeIndex","activeHelp","allHelp","focused","onFocus","onBlur","onKeyDown","locale","generateConfig","placeholder","className","style","onClick","onClear","value","onChange","onSubmit","onInputChange","format","maskFormat","preserveInvalidOnBlur","onInvalid","disabled","invalid","inputReadOnly","direction","onOpenChange","onActiveInfo","placement","onMouseDown","required","aria-required","autoFocus","tabIndex"],am=["index"],af=j.forwardRef(function(e,t){var a=e.id,n=e.prefix,r=e.clearIcon,s=e.suffixIcon,l=e.separator,o=e.activeIndex,i=(e.activeHelp,e.allHelp,e.focused),c=(e.onFocus,e.onBlur,e.onKeyDown,e.locale,e.generateConfig,e.placeholder),u=e.className,d=e.style,m=e.onClick,f=e.onClear,p=e.value,h=(e.onChange,e.onSubmit,e.onInputChange,e.format,e.maskFormat,e.preserveInvalidOnBlur,e.onInvalid,e.disabled),g=e.invalid,x=(e.inputReadOnly,e.direction),v=(e.onOpenChange,e.onActiveInfo),b=(e.placement,e.onMouseDown),y=(e.required,e["aria-required"],e.autoFocus),k=e.tabIndex,_=(0,t9.default)(e,ad),w=j.useContext(eU).prefixCls,C=j.useMemo(function(){if("string"==typeof a)return[a];var e=a||{};return[e.start,e.end]},[a]),N=j.useRef(),S=j.useRef(),T=j.useRef(),M=function(e){var t;return null==(t=[S,T][e])?void 0:t.current};j.useImperativeHandle(t,function(){return{nativeElement:N.current,focus:function(e){if("object"===(0,e9.default)(e)){var t,a,n=e||{},r=n.index,s=(0,t9.default)(n,am);null==(a=M(void 0===r?0:r))||a.focus(s)}else null==(t=M(null!=e?e:0))||t.focus()},blur:function(){var e,t;null==(e=M(0))||e.blur(),null==(t=M(1))||t.blur()}}});var $=ae(_),D=j.useMemo(function(){return Array.isArray(c)?c:[c,c]},[c]),E=t7((0,eL.default)((0,eL.default)({},e),{},{id:C,placeholder:D})),q=(0,eA.default)(E,1)[0],P=j.useState({position:"absolute",width:0}),O=(0,eA.default)(P,2),I=O[0],L=O[1],A=(0,eF.useEvent)(function(){var e=M(o);if(e){var t=e.nativeElement.getBoundingClientRect(),a=N.current.getBoundingClientRect(),n=t.left-a.left;L(function(e){return(0,eL.default)((0,eL.default)({},e),{},{width:t.width,left:n})}),v([t.left,t.right,a.width])}});j.useEffect(function(){A()},[o]);var F=r&&(p[0]&&!h[0]||p[1]&&!h[1]),R=y&&!h[0],Y=y&&!R&&!h[1];return j.createElement(tI.default,{onResize:A},j.createElement("div",(0,eD.default)({},$,{className:(0,eO.default)(w,"".concat(w,"-range"),(0,ez.default)((0,ez.default)((0,ez.default)((0,ez.default)({},"".concat(w,"-focused"),i),"".concat(w,"-disabled"),h.every(function(e){return e})),"".concat(w,"-invalid"),g.some(function(e){return e})),"".concat(w,"-rtl"),"rtl"===x),u),style:d,ref:N,onClick:m,onMouseDown:function(e){var t=e.target;t!==S.current.inputElement&&t!==T.current.inputElement&&e.preventDefault(),null==b||b(e)}}),n&&j.createElement("div",{className:"".concat(w,"-prefix")},n),j.createElement(au,(0,eD.default)({ref:S},q(0),{autoFocus:R,tabIndex:k,"date-range":"start"})),j.createElement("div",{className:"".concat(w,"-range-separator")},void 0===l?"~":l),j.createElement(au,(0,eD.default)({ref:T},q(1),{autoFocus:Y,tabIndex:k,"date-range":"end"})),j.createElement("div",{className:"".concat(w,"-active-bar"),style:I}),j.createElement(an,{type:"suffix",icon:s}),F&&j.createElement(ar,{icon:r,onClear:f})))});function ap(e,t){var a=null!=e?e:t;return Array.isArray(a)?a:[a,a]}function ah(e){return 1===e?"end":"start"}var ag=j.forwardRef(function(e,t){var a,n=tb(e,function(){var t=e.disabled,a=e.allowEmpty;return{disabled:ap(t,!1),allowEmpty:ap(a,!1)}}),r=(0,eA.default)(n,6),s=r[0],l=r[1],o=r[2],i=r[3],c=r[4],u=r[5],d=s.prefixCls,m=s.styles,f=s.classNames,p=s.defaultValue,h=s.value,g=s.needConfirm,x=s.onKeyDown,v=s.disabled,b=s.allowEmpty,y=s.disabledDate,k=s.minDate,_=s.maxDate,w=s.defaultOpen,C=s.open,N=s.onOpenChange,S=s.locale,T=s.generateConfig,M=s.picker,$=s.showNow,D=s.showToday,E=s.showTime,q=s.mode,P=s.onPanelChange,O=s.onCalendarChange,I=s.onOk,L=s.defaultPickerValue,A=s.pickerValue,F=s.onPickerValueChange,R=s.inputReadOnly,Y=s.suffixIcon,H=s.onFocus,W=s.onBlur,V=s.presets,z=s.ranges,B=s.components,U=s.cellRender,K=s.dateRender,G=s.monthCellRender,Z=s.onClick,Q=t_(t),X=tk(C,w,v,N),J=(0,eA.default)(X,2),ee=J[0],et=J[1],ea=function(e,t){(v.some(function(e){return!e})||!e)&&et(e,t)},en=tq(T,S,i,!0,!1,p,h,O,I),er=(0,eA.default)(en,5),es=er[0],el=er[1],eo=er[2],ei=er[3],ec=er[4],eu=eo(),ed=tC(v,b,ee),em=(0,eA.default)(ed,9),ef=em[0],ep=em[1],eh=em[2],eg=em[3],ex=em[4],ev=em[5],eb=em[6],ey=em[7],ek=em[8],e_=function(e,t){ep(!0),null==H||H(e,{range:ah(null!=t?t:eg)})},ej=function(e,t){ep(!1),null==W||W(e,{range:ah(null!=t?t:eg)})},ew=j.useMemo(function(){if(!E)return null;var e=E.disabledTime,t=e?function(t){return e(t,ah(eg),{from:e1(eu,eb,eg)})}:void 0;return(0,eL.default)((0,eL.default)({},E),{},{disabledTime:t})},[E,eg,eu,eb]),eC=(0,eR.useMergedState)([M,M],{value:q}),eN=(0,eA.default)(eC,2),eS=eN[0],eT=eN[1],eM=eS[eg]||M,e$="date"===eM&&ew?"datetime":eM,eE=e$===M&&"time"!==e$,eq=tO(M,eM,$,D,!0),eP=tP(s,es,el,eo,ei,v,i,ef,ee,u),eO=(0,eA.default)(eP,2),eV=eO[0],ez=eO[1],eB=(a=eb[eb.length-1],function(e,t){var n=(0,eA.default)(eu,2),r=n[0],s=n[1],l=(0,eL.default)((0,eL.default)({},t),{},{from:e1(eu,eb)});return!!(1===a&&v[0]&&r&&!tf(T,S,r,e,l.type)&&T.isAfter(r,e)||0===a&&v[1]&&s&&!tf(T,S,s,e,l.type)&&T.isAfter(e,s))||(null==y?void 0:y(e,l))}),eK=e5(eu,u,b),eZ=(0,eA.default)(eK,2),eJ=eZ[0],e0=eZ[1],e3=tT(T,S,eu,eS,ee,eg,l,eE,L,A,null==ew?void 0:ew.defaultOpenValue,F,k,_),e6=(0,eA.default)(e3,2),e9=e6[0],e7=e6[1],e8=(0,eF.useEvent)(function(e,t,a){var n=eX(eS,eg,t);if((n[0]!==eS[0]||n[1]!==eS[1])&&eT(n),P&&!1!==a){var r=(0,eI.default)(eu);e&&(r[eg]=e),P(r,n)}}),te=function(e,t){return eX(eu,t,e)},tt=function(e,t){var a=eu;e&&(a=te(e,eg)),ey(eg);var n=ev(a);ei(a),eV(eg,null===n),null===n?ea(!1,{force:!0}):t||Q.current.focus({index:n})},ta=j.useState(null),tn=(0,eA.default)(ta,2),tr=tn[0],ts=tn[1],tl=j.useState(null),to=(0,eA.default)(tl,2),ti=to[0],tc=to[1],tu=j.useMemo(function(){return ti||eu},[eu,ti]);j.useEffect(function(){ee||tc(null)},[ee]);var td=j.useState([0,0,0]),tm=(0,eA.default)(td,2),tp=tm[0],th=tm[1],tg=tj(V,z),tx=e4(U,K,G,ah(eg)),tv=eu[eg]||null,ty=(0,eF.useEvent)(function(e){return u(e,{activeIndex:eg})}),tw=j.useMemo(function(){var e=(0,eW.default)(s,!1);return(0,eH.default)(s,[].concat((0,eI.default)(Object.keys(e)),["onChange","onCalendarChange","style","className","onPanelChange","disabledTime"]))},[s]),tN=j.createElement(t6,(0,eD.default)({},tw,{showNow:eq,showTime:ew,range:!0,multiplePanel:eE,activeInfo:tp,disabledDate:eB,onFocus:function(e){ea(!0),e_(e)},onBlur:ej,onPanelMouseDown:function(){eh("panel")},picker:M,mode:eM,internalMode:e$,onPanelChange:e8,format:c,value:tv,isInvalid:ty,onChange:null,onSelect:function(e){ei(eX(eu,eg,e)),g||o||l!==e$||tt(e)},pickerValue:e9,defaultOpenValue:eQ(null==E?void 0:E.defaultOpenValue)[eg],onPickerValueChange:e7,hoverValue:tu,onHover:function(e){tc(e?te(e,eg):null),ts("cell")},needConfirm:g,onSubmit:tt,onOk:ec,presets:tg,onPresetHover:function(e){tc(e),ts("preset")},onPresetSubmit:function(e){ez(e)&&ea(!1,{force:!0})},onNow:function(e){tt(e)},cellRender:tx})),tS=j.useMemo(function(){return{prefixCls:d,locale:S,generateConfig:T,button:B.button,input:B.input}},[d,S,T,B.button,B.input]);return(0,eY.default)(function(){ee&&void 0!==eg&&e8(null,M,!1)},[ee,eg,M]),(0,eY.default)(function(){var e=eh();ee||"input"!==e||(ea(!1),tt(null,!0)),ee||!o||g||"panel"!==e||(ea(!0),tt())},[ee]),j.createElement(eU.Provider,{value:tS},j.createElement(eG,(0,eD.default)({},e2(s),{popupElement:tN,popupStyle:m.popup,popupClassName:f.popup,visible:ee,onClose:function(){ea(!1)},range:!0}),j.createElement(af,(0,eD.default)({},s,{ref:Q,suffixIcon:Y,activeIndex:ef||ee?eg:null,activeHelp:!!ti,allHelp:!!ti&&"preset"===tr,focused:ef,onFocus:function(e,t){var a=eb.length,n=eb[a-1];a&&n!==t&&g&&!b[n]&&!ek(n)&&eu[n]?Q.current.focus({index:n}):(eh("input"),ea(!0,{inherit:!0}),eg!==t&&ee&&!g&&o&&tt(null,!0),ex(t),e_(e,t))},onBlur:function(e,t){ea(!1),g||"input"!==eh()||eV(eg,null===ev(eu)),ej(e,t)},onKeyDown:function(e,t){"Tab"===e.key&&tt(null,!0),null==x||x(e,t)},onSubmit:tt,value:tu,maskFormat:c,onChange:function(e,t){ei(te(e,t))},onInputChange:function(){eh("input")},format:i,inputReadOnly:R,disabled:v,open:ee,onOpenChange:ea,onClick:function(e){var t,a=e.target.getRootNode();if(!Q.current.nativeElement.contains(null!=(t=a.activeElement)?t:document.activeElement)){var n=v.findIndex(function(e){return!e});n>=0&&Q.current.focus({index:n})}ea(!0),null==Z||Z(e)},onClear:function(){ez(null),ea(!1,{force:!0})},invalid:eJ,onInvalid:e0,onActiveInfo:th}))))}),ax=e.i(658315);function av(e){var t=e.prefixCls,a=e.value,n=e.onRemove,r=e.removeIcon,s=void 0===r?"×":r,l=e.formatDate,o=e.disabled,i=e.maxTagCount,c=e.placeholder,u="".concat(t,"-selection");function d(e,t){return j.createElement("span",{className:(0,eO.default)("".concat(u,"-item")),title:"string"==typeof e?e:null},j.createElement("span",{className:"".concat(u,"-item-content")},e),!o&&t&&j.createElement("span",{onMouseDown:function(e){e.preventDefault()},onClick:t,className:"".concat(u,"-item-remove")},s))}return j.createElement("div",{className:"".concat(t,"-selector")},j.createElement(ax.default,{prefixCls:"".concat(u,"-overflow"),data:a,renderItem:function(e){return d(l(e),function(t){t&&t.stopPropagation(),n(e)})},renderRest:function(e){return d("+ ".concat(e.length," ..."))},itemKey:function(e){return l(e)},maxCount:i}),!a.length&&j.createElement("span",{className:"".concat(t,"-selection-placeholder")},c))}var ab=["id","open","prefix","clearIcon","suffixIcon","activeHelp","allHelp","focused","onFocus","onBlur","onKeyDown","locale","generateConfig","placeholder","className","style","onClick","onClear","internalPicker","value","onChange","onSubmit","onInputChange","multiple","maxTagCount","format","maskFormat","preserveInvalidOnBlur","onInvalid","disabled","invalid","inputReadOnly","direction","onOpenChange","onMouseDown","required","aria-required","autoFocus","tabIndex","removeIcon"],ay=j.forwardRef(function(e,t){e.id;var a=e.open,n=e.prefix,r=e.clearIcon,s=e.suffixIcon,l=(e.activeHelp,e.allHelp,e.focused),o=(e.onFocus,e.onBlur,e.onKeyDown,e.locale),i=e.generateConfig,c=e.placeholder,u=e.className,d=e.style,m=e.onClick,f=e.onClear,p=e.internalPicker,h=e.value,g=e.onChange,x=e.onSubmit,v=(e.onInputChange,e.multiple),b=e.maxTagCount,y=(e.format,e.maskFormat,e.preserveInvalidOnBlur,e.onInvalid,e.disabled),k=e.invalid,_=(e.inputReadOnly,e.direction),w=(e.onOpenChange,e.onMouseDown),C=(e.required,e["aria-required"],e.autoFocus),N=e.tabIndex,S=e.removeIcon,T=(0,t9.default)(e,ab),M=j.useContext(eU).prefixCls,$=j.useRef(),D=j.useRef();j.useImperativeHandle(t,function(){return{nativeElement:$.current,focus:function(e){var t;null==(t=D.current)||t.focus(e)},blur:function(){var e;null==(e=D.current)||e.blur()}}});var E=ae(T),q=t7((0,eL.default)((0,eL.default)({},e),{},{onChange:function(e){g([e])}}),function(e){return{value:e.valueTexts[0]||"",active:l}}),P=(0,eA.default)(q,2),O=P[0],I=P[1],L=!!(r&&h.length&&!y),A=v?j.createElement(j.Fragment,null,j.createElement(av,{prefixCls:M,value:h,onRemove:function(e){g(h.filter(function(t){return t&&!tf(i,o,t,e,p)})),a||x()},formatDate:I,maxTagCount:b,disabled:y,removeIcon:S,placeholder:c}),j.createElement("input",{className:"".concat(M,"-multiple-input"),value:h.map(I).join(","),ref:D,readOnly:!0,autoFocus:C,tabIndex:N}),j.createElement(an,{type:"suffix",icon:s}),L&&j.createElement(ar,{icon:r,onClear:f})):j.createElement(au,(0,eD.default)({ref:D},O(),{autoFocus:C,tabIndex:N,suffixIcon:s,clearIcon:L&&j.createElement(ar,{icon:r,onClear:f}),showActiveCls:!1}));return j.createElement("div",(0,eD.default)({},E,{className:(0,eO.default)(M,(0,ez.default)((0,ez.default)((0,ez.default)((0,ez.default)((0,ez.default)({},"".concat(M,"-multiple"),v),"".concat(M,"-focused"),l),"".concat(M,"-disabled"),y),"".concat(M,"-invalid"),k),"".concat(M,"-rtl"),"rtl"===_),u),style:d,ref:$,onClick:m,onMouseDown:function(e){var t;e.target!==(null==(t=D.current)?void 0:t.inputElement)&&e.preventDefault(),null==w||w(e)}}),n&&j.createElement("div",{className:"".concat(M,"-prefix")},n),A)}),ak=j.forwardRef(function(e,t){var a=tb(e),n=(0,eA.default)(a,6),r=n[0],s=n[1],l=n[2],o=n[3],i=n[4],c=n[5],u=r.prefixCls,d=r.styles,m=r.classNames,f=r.order,p=r.defaultValue,h=r.value,g=r.needConfirm,x=r.onChange,v=r.onKeyDown,b=r.disabled,y=r.disabledDate,k=r.minDate,_=r.maxDate,w=r.defaultOpen,C=r.open,N=r.onOpenChange,S=r.locale,T=r.generateConfig,M=r.picker,$=r.showNow,D=r.showToday,E=r.showTime,q=r.mode,P=r.onPanelChange,O=r.onCalendarChange,I=r.onOk,L=r.multiple,A=r.defaultPickerValue,F=r.pickerValue,R=r.onPickerValueChange,Y=r.inputReadOnly,H=r.suffixIcon,W=r.removeIcon,V=r.onFocus,z=r.onBlur,B=r.presets,U=r.components,K=r.cellRender,G=r.dateRender,Z=r.monthCellRender,Q=r.onClick,X=t_(t);function J(e){return null===e?null:L?e:e[0]}var ee=tY(T,S,s),et=tk(C,w,[b],N),ea=(0,eA.default)(et,2),en=ea[0],er=ea[1],es=tq(T,S,o,!1,f,p,h,function(e,t,a){if(O){var n=(0,eL.default)({},a);delete n.range,O(J(e),J(t),n)}},function(e){null==I||I(J(e))}),el=(0,eA.default)(es,5),eo=el[0],ei=el[1],ec=el[2],eu=el[3],ed=el[4],em=ec(),ef=tC([b]),ep=(0,eA.default)(ef,4),eh=ep[0],eg=ep[1],ex=ep[2],ev=ep[3],eb=function(e){eg(!0),null==V||V(e,{})},ey=function(e){eg(!1),null==z||z(e,{})},ek=(0,eR.useMergedState)(M,{value:q}),e_=(0,eA.default)(ek,2),ej=e_[0],ew=e_[1],eC="date"===ej&&E?"datetime":ej,eN=tO(M,ej,$,D),eS=tP((0,eL.default)((0,eL.default)({},r),{},{onChange:x&&function(e,t){x(J(e),J(t))}}),eo,ei,ec,eu,[],o,eh,en,c),eT=(0,eA.default)(eS,2)[1],eM=e5(em,c),e$=(0,eA.default)(eM,2),eE=e$[0],eq=e$[1],eP=j.useMemo(function(){return eE.some(function(e){return e})},[eE]),eO=tT(T,S,em,[ej],en,ev,s,!1,A,F,eQ(null==E?void 0:E.defaultOpenValue),function(e,t){if(R){var a=(0,eL.default)((0,eL.default)({},t),{},{mode:t.mode[0]});delete a.range,R(e[0],a)}},k,_),eV=(0,eA.default)(eO,2),ez=eV[0],eB=eV[1],eK=(0,eF.useEvent)(function(e,t,a){ew(t),P&&!1!==a&&P(e||em[em.length-1],t)}),eZ=function(){eT(ec()),er(!1,{force:!0})},eX=j.useState(null),eJ=(0,eA.default)(eX,2),e0=eJ[0],e1=eJ[1],e3=j.useState(null),e6=(0,eA.default)(e3,2),e9=e6[0],e7=e6[1],e8=j.useMemo(function(){var e=[e9].concat((0,eI.default)(em)).filter(function(e){return e});return L?e:e.slice(0,1)},[em,e9,L]),te=j.useMemo(function(){return!L&&e9?[e9]:em.filter(function(e){return e})},[em,e9,L]);j.useEffect(function(){en||e7(null)},[en]);var tt=tj(B),ta=function(e){eT(L?ee(ec(),e):[e])&&!L&&er(!1,{force:!0})},tn=e4(K,G,Z),tr=j.useMemo(function(){var e=(0,eW.default)(r,!1),t=(0,eH.default)(r,[].concat((0,eI.default)(Object.keys(e)),["onChange","onCalendarChange","style","className","onPanelChange"]));return(0,eL.default)((0,eL.default)({},t),{},{multiple:r.multiple})},[r]),ts=j.createElement(t6,(0,eD.default)({},tr,{showNow:eN,showTime:E,disabledDate:y,onFocus:function(e){er(!0),eb(e)},onBlur:ey,picker:M,mode:ej,internalMode:eC,onPanelChange:eK,format:i,value:em,isInvalid:c,onChange:null,onSelect:function(e){ex("panel"),(!L||eC===M)&&(eu(L?ee(ec(),e):[e]),g||l||s!==eC||eZ())},pickerValue:ez,defaultOpenValue:null==E?void 0:E.defaultOpenValue,onPickerValueChange:eB,hoverValue:e8,onHover:function(e){e7(e),e1("cell")},needConfirm:g,onSubmit:eZ,onOk:ed,presets:tt,onPresetHover:function(e){e7(e),e1("preset")},onPresetSubmit:ta,onNow:function(e){ta(e)},cellRender:tn})),tl=j.useMemo(function(){return{prefixCls:u,locale:S,generateConfig:T,button:U.button,input:U.input}},[u,S,T,U.button,U.input]);return(0,eY.default)(function(){en&&void 0!==ev&&eK(null,M,!1)},[en,ev,M]),(0,eY.default)(function(){var e=ex();en||"input"!==e||(er(!1),eZ()),en||!l||g||"panel"!==e||eZ()},[en]),j.createElement(eU.Provider,{value:tl},j.createElement(eG,(0,eD.default)({},e2(r),{popupElement:ts,popupStyle:d.popup,popupClassName:m.popup,visible:en,onClose:function(){er(!1)}}),j.createElement(ay,(0,eD.default)({},r,{ref:X,suffixIcon:H,removeIcon:W,activeHelp:!!e9,allHelp:!!e9&&"preset"===e0,focused:eh,onFocus:function(e){ex("input"),er(!0,{inherit:!0}),eb(e)},onBlur:function(e){er(!1),ey(e)},onKeyDown:function(e,t){"Tab"===e.key&&eZ(),null==v||v(e,t)},onSubmit:eZ,value:te,maskFormat:i,onChange:function(e){eu(e)},onInputChange:function(){ex("input")},internalPicker:s,format:o,inputReadOnly:Y,disabled:b,open:en,onOpenChange:er,onClick:function(e){b||X.current.nativeElement.contains(document.activeElement)||X.current.focus(),er(!0),null==Q||Q(e)},onClear:function(){eT(null),er(!1,{force:!0})},invalid:eP,onInvalid:function(e){eq(e,0)}}))))}),a_=e.i(617206),aj=e.i(122767),aw=e.i(52956),aC=e.i(242064),aN=e.i(937328),aS=e.i(321883),aT=e.i(517455),aM=e.i(62139),a$=e.i(792812),aD=e.i(408850),aE=e.i(249616);function aq(e,...t){return j.useMemo(()=>(function e(t,...a){let n=t||{};return a.reduce((t,a)=>(Object.keys(a||{}).forEach(r=>{let s=n[r],l=a[r];if(s&&"object"==typeof s)if(l&&"object"==typeof l)t[r]=e(s,t[r],l);else{let{_default:e}=s;e&&(t[r]=t[r]||{},t[r][e]=(0,eO.default)(t[r][e],l))}else t[r]=(0,eO.default)(t[r],l)}),t),{})}).apply(void 0,[e].concat(t)),[t,e])}function aP(...e){return j.useMemo(()=>e.reduce((e,t={})=>(Object.keys(t).forEach(a=>{e[a]=Object.assign(Object.assign({},e[a]),t[a])}),e),{}),[e])}function aO(e,t){let a=Object.assign({},e);return Object.keys(t).forEach(e=>{if("_default"!==e){let n=t[e],r=a[e]||{};a[e]=n?aO(r,n):r}}),a}let aI=(e,t,a,n,r)=>{var s,l,o;let i,c,{classNames:u,styles:d}=(0,aC.useComponentConfig)(e),[m,f]=(s=[u,t],l=[d,a],o={popup:{_default:"root"}},i=aq.apply(void 0,[o].concat((0,eI.default)(s))),c=aP.apply(void 0,(0,eI.default)(l)),j.useMemo(()=>[aO(i,o),aO(c,o)],[i,c,o]));return j.useMemo(()=>{var e,t;return[Object.assign(Object.assign({},m),{popup:Object.assign(Object.assign({},m.popup),{root:(0,eO.default)(null==(e=m.popup)?void 0:e.root,n)})}),Object.assign(Object.assign({},f),{popup:Object.assign(Object.assign({},f.popup),{root:Object.assign(Object.assign({},null==(t=f.popup)?void 0:t.root),r)})})]},[m,f,n,r])};var aL=e.i(899264);e.i(296059);var aA=e.i(915654),aF=e.i(349942),aR=e.i(517458),aY=e.i(183293),aH=e.i(372409),aW=e.i(777489),aV=e.i(664142),az=e.i(307358),aB=e.i(246422),aU=e.i(838378),aK=e.i(265950);let aG=(e,t)=>{let{componentCls:a,controlHeight:n}=e,r=t?`${a}-${t}`:"",s=(0,aK.getMultipleSelectorUnit)(e);return[{[`${a}-multiple${r}`]:{paddingBlock:s.containerPadding,paddingInlineStart:s.basePadding,minHeight:n,[`${a}-selection-item`]:{height:s.itemHeight,lineHeight:(0,aA.unit)(s.itemLineHeight)}}}]};e.i(262370);var aZ=e.i(135551),aQ=e.i(889943);let aX=(e,t)=>({padding:`${(0,aA.unit)(e)} ${(0,aA.unit)(t)}`}),aJ=(0,aB.genStyleHooks)("DatePicker",e=>{let t=(0,aU.mergeToken)((0,aR.initInputToken)(e),(e=>{let{componentCls:t,controlHeightLG:a,paddingXXS:n,padding:r}=e;return{pickerCellCls:`${t}-cell`,pickerCellInnerCls:`${t}-cell-inner`,pickerYearMonthCellWidth:e.calc(a).mul(1.5).equal(),pickerQuarterPanelContentHeight:e.calc(a).mul(1.4).equal(),pickerCellPaddingVertical:e.calc(n).add(e.calc(n).div(2)).equal(),pickerCellBorderGap:2,pickerControlIconSize:7,pickerControlIconMargin:4,pickerControlIconBorderWidth:1.5,pickerDatePanelPaddingHorizontal:e.calc(r).add(e.calc(n).div(2)).equal()}})(e),{inputPaddingHorizontalBase:e.calc(e.paddingSM).sub(1).equal(),multipleSelectItemHeight:e.multipleItemHeight,selectHeight:e.controlHeight});return[(e=>{let{componentCls:t,textHeight:a,lineWidth:n,paddingSM:r,antCls:s,colorPrimary:l,cellActiveWithRangeBg:o,colorPrimaryBorder:i,lineType:c,colorSplit:u}=e;return{[`${t}-dropdown`]:{[`${t}-footer`]:{borderTop:`${(0,aA.unit)(n)} ${c} ${u}`,"&-extra":{padding:`0 ${(0,aA.unit)(r)}`,lineHeight:(0,aA.unit)(e.calc(a).sub(e.calc(n).mul(2)).equal()),textAlign:"start","&:not(:last-child)":{borderBottom:`${(0,aA.unit)(n)} ${c} ${u}`}}},[`${t}-panels + ${t}-footer ${t}-ranges`]:{justifyContent:"space-between"},[`${t}-ranges`]:{marginBlock:0,paddingInline:(0,aA.unit)(r),overflow:"hidden",textAlign:"start",listStyle:"none",display:"flex",justifyContent:"center",alignItems:"center","> li":{lineHeight:(0,aA.unit)(e.calc(a).sub(e.calc(n).mul(2)).equal()),display:"inline-block"},[`${t}-now-btn-disabled`]:{pointerEvents:"none",color:e.colorTextDisabled},[`${t}-preset > ${s}-tag-blue`]:{color:l,background:o,borderColor:i,cursor:"pointer"},[`${t}-ok`]:{paddingBlock:e.calc(n).mul(2).equal(),marginInlineStart:"auto"}}}}})(t),(e=>{var t;let{componentCls:a,antCls:n,paddingInline:r,lineWidth:s,lineType:l,colorBorder:o,borderRadius:i,motionDurationMid:c,colorTextDisabled:u,colorTextPlaceholder:d,colorTextQuaternary:m,fontSizeLG:f,inputFontSizeLG:p,fontSizeSM:h,inputFontSizeSM:g,controlHeightSM:x,paddingInlineSM:v,paddingXS:b,marginXS:y,colorIcon:k,lineWidthBold:_,colorPrimary:j,motionDurationSlow:w,zIndexPopup:C,paddingXXS:N,sizePopupArrow:S,colorBgElevated:T,borderRadiusLG:M,boxShadowSecondary:$,borderRadiusSM:D,colorSplit:E,cellHoverBg:q,presetsWidth:P,presetsMaxWidth:O,boxShadowPopoverArrow:I,fontHeight:L,lineHeightLG:A}=e;return[{[a]:Object.assign(Object.assign(Object.assign({},(0,aY.resetComponent)(e)),aX(e.paddingBlock,e.paddingInline)),{position:"relative",display:"inline-flex",alignItems:"center",lineHeight:1,borderRadius:i,transition:`border ${c}, box-shadow ${c}, background ${c}`,[`${a}-prefix`]:{flex:"0 0 auto",marginInlineEnd:e.inputAffixPadding},[`${a}-input`]:{position:"relative",display:"inline-flex",alignItems:"center",width:"100%","> input":Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",color:"inherit",fontSize:null!=(t=e.inputFontSize)?t:e.fontSize,lineHeight:e.lineHeight,transition:`all ${c}`},(0,aF.genPlaceholderStyle)(d)),{flex:"auto",minWidth:1,height:"auto",padding:0,background:"transparent",border:0,fontFamily:"inherit","&:focus":{boxShadow:"none",outline:0},"&[disabled]":{background:"transparent",color:u,cursor:"not-allowed"}}),"&-placeholder":{"> input":{color:d}}},"&-large":Object.assign(Object.assign({},aX(e.paddingBlockLG,e.paddingInlineLG)),{[`${a}-input > input`]:{fontSize:null!=p?p:f,lineHeight:A}}),"&-small":Object.assign(Object.assign({},aX(e.paddingBlockSM,e.paddingInlineSM)),{[`${a}-input > input`]:{fontSize:null!=g?g:h}}),[`${a}-suffix`]:{display:"flex",flex:"none",alignSelf:"center",marginInlineStart:e.calc(b).div(2).equal(),color:m,lineHeight:1,pointerEvents:"none",transition:`opacity ${c}, color ${c}`,"> *":{verticalAlign:"top","&:not(:last-child)":{marginInlineEnd:y}}},[`${a}-clear`]:{position:"absolute",top:"50%",insetInlineEnd:0,color:m,lineHeight:1,transform:"translateY(-50%)",cursor:"pointer",opacity:0,transition:`opacity ${c}, color ${c}`,"> *":{verticalAlign:"top"},"&:hover":{color:k}},"&:hover":{[`${a}-clear`]:{opacity:1},[`${a}-suffix:not(:last-child)`]:{opacity:0}},[`${a}-separator`]:{position:"relative",display:"inline-block",width:"1em",height:f,color:m,fontSize:f,verticalAlign:"top",cursor:"default",[`${a}-focused &`]:{color:k},[`${a}-range-separator &`]:{[`${a}-disabled &`]:{cursor:"not-allowed"}}},"&-range":{position:"relative",display:"inline-flex",[`${a}-active-bar`]:{bottom:e.calc(s).mul(-1).equal(),height:_,background:j,opacity:0,transition:`all ${w} ease-out`,pointerEvents:"none"},[`&${a}-focused`]:{[`${a}-active-bar`]:{opacity:1}},[`${a}-range-separator`]:{alignItems:"center",padding:`0 ${(0,aA.unit)(b)}`,lineHeight:1}},"&-range, &-multiple":{[`${a}-clear`]:{insetInlineEnd:r},[`&${a}-small`]:{[`${a}-clear`]:{insetInlineEnd:v}}},"&-dropdown":Object.assign(Object.assign(Object.assign({},(0,aY.resetComponent)(e)),(e=>{let{componentCls:t,pickerCellCls:a,pickerCellInnerCls:n,pickerYearMonthCellWidth:r,pickerControlIconSize:s,cellWidth:l,paddingSM:o,paddingXS:i,paddingXXS:c,colorBgContainer:u,lineWidth:d,lineType:m,borderRadiusLG:f,colorPrimary:p,colorTextHeading:h,colorSplit:g,pickerControlIconBorderWidth:x,colorIcon:v,textHeight:b,motionDurationMid:y,colorIconHover:k,fontWeightStrong:_,cellHeight:j,pickerCellPaddingVertical:w,colorTextDisabled:C,colorText:N,fontSize:S,motionDurationSlow:T,withoutTimeCellHeight:M,pickerQuarterPanelContentHeight:$,borderRadiusSM:D,colorTextLightSolid:E,cellHoverBg:q,timeColumnHeight:P,timeColumnWidth:O,timeCellHeight:I,controlItemBgActive:L,marginXXS:A,pickerDatePanelPaddingHorizontal:F,pickerControlIconMargin:R}=e;return{[t]:{"&-panel":{display:"inline-flex",flexDirection:"column",textAlign:"center",background:u,borderRadius:f,outline:"none","&-focused":{borderColor:p},"&-rtl":{[`${t}-prev-icon,
              ${t}-super-prev-icon`]:{transform:"rotate(45deg)"},[`${t}-next-icon,
              ${t}-super-next-icon`]:{transform:"rotate(-135deg)"},[`${t}-time-panel`]:{[`${t}-content`]:{direction:"ltr","> *":{direction:"rtl"}}}}},[`&-decade-panel,
        &-year-panel,
        &-quarter-panel,
        &-month-panel,
        &-week-panel,
        &-date-panel,
        &-time-panel`]:{display:"flex",flexDirection:"column",width:e.calc(l).mul(7).add(e.calc(F).mul(2)).equal()},"&-header":{display:"flex",padding:`0 ${(0,aA.unit)(i)}`,color:h,borderBottom:`${(0,aA.unit)(d)} ${m} ${g}`,"> *":{flex:"none"},button:{padding:0,color:v,lineHeight:(0,aA.unit)(b),background:"transparent",border:0,cursor:"pointer",transition:`color ${y}`,fontSize:"inherit",display:"inline-flex",alignItems:"center",justifyContent:"center","&:empty":{display:"none"}},"> button":{minWidth:"1.6em",fontSize:S,"&:hover":{color:k},"&:disabled":{opacity:.25,pointerEvents:"none"}},"&-view":{flex:"auto",fontWeight:_,lineHeight:(0,aA.unit)(b),"> button":{color:"inherit",fontWeight:"inherit",verticalAlign:"top","&:not(:first-child)":{marginInlineStart:i},"&:hover":{color:p}}}},[`&-prev-icon,
        &-next-icon,
        &-super-prev-icon,
        &-super-next-icon`]:{position:"relative",width:s,height:s,"&::before":{position:"absolute",top:0,insetInlineStart:0,width:s,height:s,border:"0 solid currentcolor",borderBlockStartWidth:x,borderInlineStartWidth:x,content:'""'}},[`&-super-prev-icon,
        &-super-next-icon`]:{"&::after":{position:"absolute",top:R,insetInlineStart:R,display:"inline-block",width:s,height:s,border:"0 solid currentcolor",borderBlockStartWidth:x,borderInlineStartWidth:x,content:'""'}},"&-prev-icon, &-super-prev-icon":{transform:"rotate(-45deg)"},"&-next-icon, &-super-next-icon":{transform:"rotate(135deg)"},"&-content":{width:"100%",tableLayout:"fixed",borderCollapse:"collapse","th, td":{position:"relative",minWidth:j,fontWeight:"normal"},th:{height:e.calc(j).add(e.calc(w).mul(2)).equal(),color:N,verticalAlign:"middle"}},"&-cell":Object.assign({padding:`${(0,aA.unit)(w)} 0`,color:C,cursor:"pointer","&-in-view":{color:N}},(e=>{let{pickerCellCls:t,pickerCellInnerCls:a,cellHeight:n,borderRadiusSM:r,motionDurationMid:s,cellHoverBg:l,lineWidth:o,lineType:i,colorPrimary:c,cellActiveWithRangeBg:u,colorTextLightSolid:d,colorTextDisabled:m,cellBgDisabled:f,colorFillSecondary:p}=e;return{"&::before":{position:"absolute",top:"50%",insetInlineStart:0,insetInlineEnd:0,zIndex:1,height:n,transform:"translateY(-50%)",content:'""',pointerEvents:"none"},[a]:{position:"relative",zIndex:2,display:"inline-block",minWidth:n,height:n,lineHeight:(0,aA.unit)(n),borderRadius:r,transition:`background ${s}`},[`&:hover:not(${t}-in-view):not(${t}-disabled),
    &:hover:not(${t}-selected):not(${t}-range-start):not(${t}-range-end):not(${t}-disabled)`]:{[a]:{background:l}},[`&-in-view${t}-today ${a}`]:{"&::before":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:1,border:`${(0,aA.unit)(o)} ${i} ${c}`,borderRadius:r,content:'""'}},[`&-in-view${t}-in-range,
      &-in-view${t}-range-start,
      &-in-view${t}-range-end`]:{position:"relative",[`&:not(${t}-disabled):before`]:{background:u}},[`&-in-view${t}-selected,
      &-in-view${t}-range-start,
      &-in-view${t}-range-end`]:{[`&:not(${t}-disabled) ${a}`]:{color:d,background:c},[`&${t}-disabled ${a}`]:{background:p}},[`&-in-view${t}-range-start:not(${t}-disabled):before`]:{insetInlineStart:"50%"},[`&-in-view${t}-range-end:not(${t}-disabled):before`]:{insetInlineEnd:"50%"},[`&-in-view${t}-range-start:not(${t}-range-end) ${a}`]:{borderStartStartRadius:r,borderEndStartRadius:r,borderStartEndRadius:0,borderEndEndRadius:0},[`&-in-view${t}-range-end:not(${t}-range-start) ${a}`]:{borderStartStartRadius:0,borderEndStartRadius:0,borderStartEndRadius:r,borderEndEndRadius:r},"&-disabled":{color:m,cursor:"not-allowed",[a]:{background:"transparent"},"&::before":{background:f}},[`&-disabled${t}-today ${a}::before`]:{borderColor:m}}})(e)),[`&-decade-panel,
        &-year-panel,
        &-quarter-panel,
        &-month-panel`]:{[`${t}-content`]:{height:e.calc(M).mul(4).equal()},[n]:{padding:`0 ${(0,aA.unit)(i)}`}},"&-quarter-panel":{[`${t}-content`]:{height:$}},"&-decade-panel":{[n]:{padding:`0 ${(0,aA.unit)(e.calc(i).div(2).equal())}`},[`${t}-cell::before`]:{display:"none"}},[`&-year-panel,
        &-quarter-panel,
        &-month-panel`]:{[`${t}-body`]:{padding:`0 ${(0,aA.unit)(i)}`},[n]:{width:r}},"&-date-panel":{[`${t}-body`]:{padding:`${(0,aA.unit)(i)} ${(0,aA.unit)(F)}`},[`${t}-content th`]:{boxSizing:"border-box",padding:0}},"&-week-panel-row":{td:{"&:before":{transition:`background ${y}`},"&:first-child:before":{borderStartStartRadius:D,borderEndStartRadius:D},"&:last-child:before":{borderStartEndRadius:D,borderEndEndRadius:D}},"&:hover td:before":{background:q},"&-range-start td, &-range-end td, &-selected td, &-hover td":{[`&${a}`]:{"&:before":{background:p},[`&${t}-cell-week`]:{color:new aZ.FastColor(E).setA(.5).toHexString()},[n]:{color:E}}},"&-range-hover td:before":{background:L}},"&-week-panel, &-date-panel-show-week":{[`${t}-body`]:{padding:`${(0,aA.unit)(i)} ${(0,aA.unit)(o)}`},[`${t}-content th`]:{width:"auto"}},"&-datetime-panel":{display:"flex",[`${t}-time-panel`]:{borderInlineStart:`${(0,aA.unit)(d)} ${m} ${g}`},[`${t}-date-panel,
          ${t}-time-panel`]:{transition:`opacity ${T}`},"&-active":{[`${t}-date-panel,
            ${t}-time-panel`]:{opacity:.3,"&-active":{opacity:1}}}},"&-time-panel":{width:"auto",minWidth:"auto",[`${t}-content`]:{display:"flex",flex:"auto",height:P},"&-column":{flex:"1 0 auto",width:O,margin:`${(0,aA.unit)(c)} 0`,padding:0,overflowY:"hidden",textAlign:"start",listStyle:"none",transition:`background ${y}`,overflowX:"hidden","&::-webkit-scrollbar":{width:8,backgroundColor:"transparent"},"&::-webkit-scrollbar-thumb":{backgroundColor:e.colorTextTertiary,borderRadius:e.borderRadiusSM},"&":{scrollbarWidth:"thin",scrollbarColor:`${e.colorTextTertiary} transparent`},"&::after":{display:"block",height:`calc(100% - ${(0,aA.unit)(I)})`,content:'""'},"&:not(:first-child)":{borderInlineStart:`${(0,aA.unit)(d)} ${m} ${g}`},"&-active":{background:new aZ.FastColor(L).setA(.2).toHexString()},"&:hover":{overflowY:"auto"},"> li":{margin:0,padding:0,[`&${t}-time-panel-cell`]:{marginInline:A,[`${t}-time-panel-cell-inner`]:{display:"block",width:e.calc(O).sub(e.calc(A).mul(2)).equal(),height:I,margin:0,paddingBlock:0,paddingInlineEnd:0,paddingInlineStart:e.calc(O).sub(I).div(2).equal(),color:N,lineHeight:(0,aA.unit)(I),borderRadius:D,cursor:"pointer",transition:`background ${y}`,"&:hover":{background:q}},"&-selected":{[`${t}-time-panel-cell-inner`]:{background:L}},"&-disabled":{[`${t}-time-panel-cell-inner`]:{color:C,background:"transparent",cursor:"not-allowed"}}}}}}}}})(e)),{pointerEvents:"none",position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:C,[`&${a}-dropdown-hidden`]:{display:"none"},"&-rtl":{direction:"rtl"},[`&${a}-dropdown-placement-bottomLeft,
            &${a}-dropdown-placement-bottomRight`]:{[`${a}-range-arrow`]:{top:0,display:"block",transform:"translateY(-100%)"}},[`&${a}-dropdown-placement-topLeft,
            &${a}-dropdown-placement-topRight`]:{[`${a}-range-arrow`]:{bottom:0,display:"block",transform:"translateY(100%) rotate(180deg)"}},[`&${n}-slide-up-appear, &${n}-slide-up-enter`]:{[`${a}-range-arrow${a}-range-arrow`]:{transition:"none"}},[`&${n}-slide-up-enter${n}-slide-up-enter-active${a}-dropdown-placement-topLeft,
          &${n}-slide-up-enter${n}-slide-up-enter-active${a}-dropdown-placement-topRight,
          &${n}-slide-up-appear${n}-slide-up-appear-active${a}-dropdown-placement-topLeft,
          &${n}-slide-up-appear${n}-slide-up-appear-active${a}-dropdown-placement-topRight`]:{animationName:aV.slideDownIn},[`&${n}-slide-up-enter${n}-slide-up-enter-active${a}-dropdown-placement-bottomLeft,
          &${n}-slide-up-enter${n}-slide-up-enter-active${a}-dropdown-placement-bottomRight,
          &${n}-slide-up-appear${n}-slide-up-appear-active${a}-dropdown-placement-bottomLeft,
          &${n}-slide-up-appear${n}-slide-up-appear-active${a}-dropdown-placement-bottomRight`]:{animationName:aV.slideUpIn},[`&${n}-slide-up-leave ${a}-panel-container`]:{pointerEvents:"none"},[`&${n}-slide-up-leave${n}-slide-up-leave-active${a}-dropdown-placement-topLeft,
          &${n}-slide-up-leave${n}-slide-up-leave-active${a}-dropdown-placement-topRight`]:{animationName:aV.slideDownOut},[`&${n}-slide-up-leave${n}-slide-up-leave-active${a}-dropdown-placement-bottomLeft,
          &${n}-slide-up-leave${n}-slide-up-leave-active${a}-dropdown-placement-bottomRight`]:{animationName:aV.slideUpOut},[`${a}-panel > ${a}-time-panel`]:{paddingTop:N},[`${a}-range-wrapper`]:{display:"flex",position:"relative"},[`${a}-range-arrow`]:Object.assign(Object.assign({position:"absolute",zIndex:1,display:"none",paddingInline:e.calc(r).mul(1.5).equal(),boxSizing:"content-box",transition:`all ${w} ease-out`},(0,az.genRoundedArrow)(e,T,I)),{"&:before":{insetInlineStart:e.calc(r).mul(1.5).equal()}}),[`${a}-panel-container`]:{overflow:"hidden",verticalAlign:"top",background:T,borderRadius:M,boxShadow:$,transition:`margin ${w}`,display:"inline-block",pointerEvents:"auto",[`${a}-panel-layout`]:{display:"flex",flexWrap:"nowrap",alignItems:"stretch"},[`${a}-presets`]:{display:"flex",flexDirection:"column",minWidth:P,maxWidth:O,ul:{height:0,flex:"auto",listStyle:"none",overflow:"auto",margin:0,padding:b,borderInlineEnd:`${(0,aA.unit)(s)} ${l} ${E}`,li:Object.assign(Object.assign({},aY.textEllipsis),{borderRadius:D,paddingInline:b,paddingBlock:e.calc(x).sub(L).div(2).equal(),cursor:"pointer",transition:`all ${w}`,"+ li":{marginTop:y},"&:hover":{background:q}})}},[`${a}-panels`]:{display:"inline-flex",flexWrap:"nowrap","&:last-child":{[`${a}-panel`]:{borderWidth:0}}},[`${a}-panel`]:{verticalAlign:"top",background:"transparent",borderRadius:0,borderWidth:0,[`${a}-content, table`]:{textAlign:"center"},"&-focused":{borderColor:o}}}}),"&-dropdown-range":{padding:`${(0,aA.unit)(e.calc(S).mul(2).div(3).equal())} 0`,"&-hidden":{display:"none"}},"&-rtl":{direction:"rtl",[`${a}-separator`]:{transform:"scale(-1, 1)"},[`${a}-footer`]:{"&-extra":{direction:"rtl"}}}})},(0,aV.initSlideMotion)(e,"slide-up"),(0,aV.initSlideMotion)(e,"slide-down"),(0,aW.initMoveMotion)(e,"move-up"),(0,aW.initMoveMotion)(e,"move-down")]})(t),(e=>{let{componentCls:t}=e;return{[t]:[Object.assign(Object.assign(Object.assign(Object.assign({},(0,aQ.genOutlinedStyle)(e)),(0,aQ.genUnderlinedStyle)(e)),(0,aQ.genFilledStyle)(e)),(0,aQ.genBorderlessStyle)(e)),{"&-outlined":{[`&${t}-multiple ${t}-selection-item`]:{background:e.multipleItemBg,border:`${(0,aA.unit)(e.lineWidth)} ${e.lineType} ${e.multipleItemBorderColor}`}},"&-filled":{[`&${t}-multiple ${t}-selection-item`]:{background:e.colorBgContainer,border:`${(0,aA.unit)(e.lineWidth)} ${e.lineType} ${e.colorSplit}`}},"&-borderless":{[`&${t}-multiple ${t}-selection-item`]:{background:e.multipleItemBg,border:`${(0,aA.unit)(e.lineWidth)} ${e.lineType} ${e.multipleItemBorderColor}`}},"&-underlined":{[`&${t}-multiple ${t}-selection-item`]:{background:e.multipleItemBg,border:`${(0,aA.unit)(e.lineWidth)} ${e.lineType} ${e.multipleItemBorderColor}`}}}]}})(t),(e=>{let{componentCls:t,colorError:a,colorWarning:n}=e;return{[`${t}:not(${t}-disabled):not([disabled])`]:{[`&${t}-status-error`]:{[`${t}-active-bar`]:{background:a}},[`&${t}-status-warning`]:{[`${t}-active-bar`]:{background:n}}}}})(t),(e=>{let{componentCls:t,calc:a,lineWidth:n}=e,r=(0,aU.mergeToken)(e,{fontHeight:e.fontSize,selectHeight:e.controlHeightSM,multipleSelectItemHeight:e.multipleItemHeightSM,borderRadius:e.borderRadiusSM,borderRadiusSM:e.borderRadiusXS,controlHeight:e.controlHeightSM}),s=(0,aU.mergeToken)(e,{fontHeight:a(e.multipleItemHeightLG).sub(a(n).mul(2).equal()).equal(),fontSize:e.fontSizeLG,selectHeight:e.controlHeightLG,multipleSelectItemHeight:e.multipleItemHeightLG,borderRadius:e.borderRadiusLG,borderRadiusSM:e.borderRadius,controlHeight:e.controlHeightLG});return[aG(r,"small"),aG(e),aG(s,"large"),{[`${t}${t}-multiple`]:Object.assign(Object.assign({width:"100%",cursor:"text",[`${t}-selector`]:{flex:"auto",padding:0,position:"relative","&:after":{margin:0},[`${t}-selection-placeholder`]:{position:"absolute",top:"50%",insetInlineStart:e.inputPaddingHorizontalBase,insetInlineEnd:0,transform:"translateY(-50%)",transition:`all ${e.motionDurationSlow}`,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",flex:1,color:e.colorTextPlaceholder,pointerEvents:"none"}}},(0,aK.genOverflowStyle)(e)),{[`${t}-multiple-input`]:{width:0,height:0,border:0,visibility:"hidden",position:"absolute",zIndex:-1}})}]})(t),(0,aH.genCompactItemStyle)(e,{focusElCls:`${e.componentCls}-focused`})]},e=>Object.assign(Object.assign(Object.assign(Object.assign({},(0,aR.initComponentToken)(e)),(e=>{let{colorBgContainerDisabled:t,controlHeight:a,controlHeightSM:n,controlHeightLG:r,paddingXXS:s,lineWidth:l}=e,o=2*s,i=2*l,c=Math.min(a-o,a-i),u=Math.min(n-o,n-i),d=Math.min(r-o,r-i);return{INTERNAL_FIXED_ITEM_MARGIN:Math.floor(s/2),cellHoverBg:e.controlItemBgHover,cellActiveWithRangeBg:e.controlItemBgActive,cellHoverWithRangeBg:new aZ.FastColor(e.colorPrimary).lighten(35).toHexString(),cellRangeBorderColor:new aZ.FastColor(e.colorPrimary).lighten(20).toHexString(),cellBgDisabled:t,timeColumnWidth:1.4*r,timeColumnHeight:224,timeCellHeight:28,cellWidth:1.5*n,cellHeight:n,textHeight:r,withoutTimeCellHeight:1.65*r,multipleItemBg:e.colorFillSecondary,multipleItemBorderColor:"transparent",multipleItemHeight:c,multipleItemHeightSM:u,multipleItemHeightLG:d,multipleSelectorBgDisabled:t,multipleItemColorDisabled:e.colorTextDisabled,multipleItemBorderColorDisabled:"transparent"}})(e)),(0,az.getArrowToken)(e)),{presetsWidth:120,presetsMaxWidth:200,zIndexPopup:e.zIndexPopupBase+50}));var a0=e.i(729151);function a1(e,t){let{allowClear:a=!0}=e,{clearIcon:n,removeIcon:r}=(0,a0.default)(Object.assign(Object.assign({},e),{prefixCls:t,componentName:"DatePicker"}));return[j.useMemo(()=>!1!==a&&Object.assign({clearIcon:n},!0===a?{}:a),[a,n]),r]}let[a2,a4]=["week","WeekPicker"],[a5,a3]=["month","MonthPicker"],[a6,a9]=["year","YearPicker"],[a7,a8]=["quarter","QuarterPicker"],[ne,nt]=["time","TimePicker"];var na=e.i(581935),nn=e.i(715902);let nr=({picker:e,hasFeedback:t,feedbackIcon:a,suffixIcon:n})=>null===n||!1===n?null:!0===n||void 0===n?j.default.createElement(j.default.Fragment,null,e===ne?j.default.createElement(nn.default,null):j.default.createElement(na.default,null),t&&a):n;var ns=e.i(920228);let nl=e=>j.createElement(ns.default,Object.assign({size:"small",type:"primary"},e));function no(e){return(0,j.useMemo)(()=>Object.assign({button:nl},e),[e])}var ni=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)0>t.indexOf(n[r])&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]]);return a},nc=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)0>t.indexOf(n[r])&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]]);return a};let nu=e=>{let t,a,n,r,s,l,{DatePicker:o,WeekPicker:i,MonthPicker:c,YearPicker:u,TimePicker:d,QuarterPicker:m}=(a=(t=(t,a)=>{let n=a===nt?"timePicker":"datePicker";return(0,j.forwardRef)((a,r)=>{var s;let{prefixCls:l,getPopupContainer:o,components:i,style:c,className:u,rootClassName:d,size:m,bordered:f,placement:p,placeholder:h,popupStyle:g,popupClassName:x,dropdownClassName:v,disabled:b,status:y,variant:k,onCalendarChange:_,styles:w,classNames:C,suffixIcon:N}=a,S=nc(a,["prefixCls","getPopupContainer","components","style","className","rootClassName","size","bordered","placement","placeholder","popupStyle","popupClassName","dropdownClassName","disabled","status","variant","onCalendarChange","styles","classNames","suffixIcon"]),{getPrefixCls:T,direction:M,getPopupContainer:$,[n]:D}=(0,j.useContext)(aC.ConfigContext),E=T("picker",l),{compactSize:q,compactItemClassnames:P}=(0,aE.useCompactItemContext)(E,M),O=j.useRef(null),[I,L]=(0,a$.default)("datePicker",k,f),A=(0,aS.default)(E),[F,R,Y]=aJ(E,A);(0,j.useImperativeHandle)(r,()=>O.current);let H=t||a.picker,W=T(),{onSelect:V,multiple:z}=S,B=V&&"time"===t&&!z,[U,K]=aI(n,C,w,x||v,g),[G,Z]=a1(a,E),Q=no(i),X=(0,aT.default)(e=>{var t;return null!=(t=null!=m?m:q)?t:e}),J=j.useContext(aN.default),{hasFeedback:ee,status:et,feedbackIcon:ea}=(0,j.useContext)(aM.FormItemInputContext),en=j.createElement(nr,{picker:H,hasFeedback:ee,feedbackIcon:ea,suffixIcon:N}),[er]=(0,aD.useLocale)("DatePicker",aL.default),es=Object.assign(Object.assign({},er),a.locale),[el]=(0,aj.useZIndex)("DatePicker",null==(s=K.popup.root)?void 0:s.zIndex);return F(j.createElement(a_.default,{space:!0},j.createElement(ak,Object.assign({ref:O,placeholder:void 0!==h?h:"year"===H&&es.lang.yearPlaceholder?es.lang.yearPlaceholder:"quarter"===H&&es.lang.quarterPlaceholder?es.lang.quarterPlaceholder:"month"===H&&es.lang.monthPlaceholder?es.lang.monthPlaceholder:"week"===H&&es.lang.weekPlaceholder?es.lang.weekPlaceholder:"time"===H&&es.timePickerLocale.placeholder?es.timePickerLocale.placeholder:es.lang.placeholder,suffixIcon:en,placement:p,prevIcon:j.createElement("span",{className:`${E}-prev-icon`}),nextIcon:j.createElement("span",{className:`${E}-next-icon`}),superPrevIcon:j.createElement("span",{className:`${E}-super-prev-icon`}),superNextIcon:j.createElement("span",{className:`${E}-super-next-icon`}),transitionName:`${W}-slide-up`,picker:t,onCalendarChange:(e,t,a)=>{null==_||_(e,t,a),B&&V(e)}},{showToday:!0},S,{locale:es.lang,className:(0,eO.default)({[`${E}-${X}`]:X,[`${E}-${I}`]:L},(0,aw.getStatusClassNames)(E,(0,aw.getMergedStatus)(et,y),ee),R,P,null==D?void 0:D.className,u,Y,A,d,U.root),style:Object.assign(Object.assign(Object.assign({},null==D?void 0:D.style),c),K.root),prefixCls:E,getPopupContainer:o||$,generateConfig:e,components:Q,direction:M,disabled:null!=b?b:J,classNames:{popup:(0,eO.default)(R,Y,A,d,U.popup.root)},styles:{popup:Object.assign(Object.assign({},K.popup.root),{zIndex:el})},allowClear:G,removeIcon:Z}))))})})(),n=t(a2,a4),r=t(a5,a3),s=t(a6,a9),l=t(a7,a8),{DatePicker:a,WeekPicker:n,MonthPicker:r,YearPicker:s,TimePicker:t(ne,nt),QuarterPicker:l}),f=(0,j.forwardRef)((t,a)=>{var n;let{prefixCls:r,getPopupContainer:s,components:l,className:o,style:i,placement:c,size:u,disabled:d,bordered:m=!0,placeholder:f,popupStyle:p,popupClassName:h,dropdownClassName:g,status:x,rootClassName:v,variant:b,picker:y,styles:k,classNames:_,suffixIcon:w}=t,C=ni(t,["prefixCls","getPopupContainer","components","className","style","placement","size","disabled","bordered","placeholder","popupStyle","popupClassName","dropdownClassName","status","rootClassName","variant","picker","styles","classNames","suffixIcon"]),N=y===ne?"timePicker":"datePicker",S=j.useRef(null),{getPrefixCls:T,direction:M,getPopupContainer:$,rangePicker:D}=(0,j.useContext)(aC.ConfigContext),E=T("picker",r),{compactSize:q,compactItemClassnames:P}=(0,aE.useCompactItemContext)(E,M),O=T(),[I,L]=(0,a$.default)("rangePicker",b,m),A=(0,aS.default)(E),[F,R,Y]=aJ(E,A),[H,W]=aI(N,_,k,h||g,p),[V]=a1(t,E),z=no(l),B=(0,aT.default)(e=>{var t;return null!=(t=null!=u?u:q)?t:e}),U=j.useContext(aN.default),{hasFeedback:K,status:G,feedbackIcon:Z}=(0,j.useContext)(aM.FormItemInputContext),Q=j.createElement(nr,{picker:y,hasFeedback:K,feedbackIcon:Z,suffixIcon:w});(0,j.useImperativeHandle)(a,()=>S.current);let[X]=(0,aD.useLocale)("Calendar",aL.default),J=Object.assign(Object.assign({},X),t.locale),[ee]=(0,aj.useZIndex)("DatePicker",null==(n=W.popup.root)?void 0:n.zIndex);return F(j.createElement(a_.default,{space:!0},j.createElement(ag,Object.assign({separator:j.createElement("span",{"aria-label":"to",className:`${E}-separator`},j.createElement(eP,null)),disabled:null!=d?d:U,ref:S,placement:c,placeholder:void 0!==f?f:"year"===y&&J.lang.yearPlaceholder?J.lang.rangeYearPlaceholder:"quarter"===y&&J.lang.quarterPlaceholder?J.lang.rangeQuarterPlaceholder:"month"===y&&J.lang.monthPlaceholder?J.lang.rangeMonthPlaceholder:"week"===y&&J.lang.weekPlaceholder?J.lang.rangeWeekPlaceholder:"time"===y&&J.timePickerLocale.placeholder?J.timePickerLocale.rangePlaceholder:J.lang.rangePlaceholder,suffixIcon:Q,prevIcon:j.createElement("span",{className:`${E}-prev-icon`}),nextIcon:j.createElement("span",{className:`${E}-next-icon`}),superPrevIcon:j.createElement("span",{className:`${E}-super-prev-icon`}),superNextIcon:j.createElement("span",{className:`${E}-super-next-icon`}),transitionName:`${O}-slide-up`,picker:y},C,{className:(0,eO.default)({[`${E}-${B}`]:B,[`${E}-${I}`]:L},(0,aw.getStatusClassNames)(E,(0,aw.getMergedStatus)(G,x),K),R,P,o,null==D?void 0:D.className,Y,A,v,H.root),style:Object.assign(Object.assign(Object.assign({},null==D?void 0:D.style),i),W.root),locale:J.lang,prefixCls:E,getPopupContainer:s||$,generateConfig:e,components:z,direction:M,classNames:{popup:(0,eO.default)(R,Y,A,v,H.popup.root)},styles:{popup:Object.assign(Object.assign({},W.popup.root),{zIndex:ee})},allowClear:V}))))});return o.WeekPicker=i,o.MonthPicker=c,o.YearPicker=u,o.RangePicker=f,o.TimePicker=d,o.QuarterPicker=m,o},nd=nu({getNow:function(){var e=(0,_.default)();return"function"==typeof e.tz?e.tz():e},getFixedDate:function(e){return(0,_.default)(e,["YYYY-M-DD","YYYY-MM-DD"])},getEndDate:function(e){return e.endOf("month")},getWeekDay:function(e){var t=e.locale("en");return t.weekday()+t.localeData().firstDayOfWeek()},getYear:function(e){return e.year()},getMonth:function(e){return e.month()},getDate:function(e){return e.date()},getHour:function(e){return e.hour()},getMinute:function(e){return e.minute()},getSecond:function(e){return e.second()},getMillisecond:function(e){return e.millisecond()},addYear:function(e,t){return e.add(t,"year")},addMonth:function(e,t){return e.add(t,"month")},addDate:function(e,t){return e.add(t,"day")},setYear:function(e,t){return e.year(t)},setMonth:function(e,t){return e.month(t)},setDate:function(e,t){return e.date(t)},setHour:function(e,t){return e.hour(t)},setMinute:function(e,t){return e.minute(t)},setSecond:function(e,t){return e.second(t)},setMillisecond:function(e,t){return e.millisecond(t)},isAfter:function(e,t){return e.isAfter(t)},isValidate:function(e){return e.isValid()},locale:{getWeekFirstDay:function(e){return(0,_.default)().locale(eT(e)).localeData().firstDayOfWeek()},getWeekFirstDate:function(e,t){return t.locale(eT(e)).weekday(0)},getWeek:function(e,t){return t.locale(eT(e)).week()},getShortWeekDays:function(e){return(0,_.default)().locale(eT(e)).localeData().weekdaysMin()},getShortMonths:function(e){return(0,_.default)().locale(eT(e)).localeData().monthsShort()},format:function(e,t,a){return t.locale(eT(e)).format(a)},parse:function(e,t,a){for(var n=eT(e),r=0;r<a.length;r+=1){var s=a[r];if(s.includes("wo")||s.includes("Wo")){for(var l=t.split("-")[0],o=t.split("-")[1],i=(0,_.default)(l,"YYYY").startOf("year").locale(n),c=0;c<=52;c+=1){var u=i.add(c,"week");if(u.format("Wo")===o)return u}return eM(),null}var d=(0,_.default)(t,s,!0).locale(n);if(d.isValid())return d}return t&&eM(),null}}}),nm=(0,e$.default)(nd,"popupAlign",void 0,"picker");nd._InternalPanelDoNotUseOrYouWillBeFired=nm;let nf=(0,e$.default)(nd.RangePicker,"popupAlign",void 0,"picker");nd._InternalRangePanelDoNotUseOrYouWillBeFired=nf,nd.generatePicker=nu;var np=e.i(770914),nh=e.i(314519);let ng={lang:Object.assign({placeholder:"请选择日期",yearPlaceholder:"请选择年份",quarterPlaceholder:"请选择季度",monthPlaceholder:"请选择月份",weekPlaceholder:"请选择周",rangePlaceholder:["开始日期","结束日期"],rangeYearPlaceholder:["开始年份","结束年份"],rangeMonthPlaceholder:["开始月份","结束月份"],rangeQuarterPlaceholder:["开始季度","结束季度"],rangeWeekPlaceholder:["开始周","结束周"]},(0,eL.default)((0,eL.default)({},nh.commonLocale),{},{locale:"zh_CN",today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",week:"周",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪",yearFormat:"YYYY年",cellDateFormat:"D",monthBeforeYear:!1})),timePickerLocale:Object.assign({},{placeholder:"请选择时间",rangePlaceholder:["开始时间","结束时间"]})};ng.lang.ok="确定",e.i(256331);let{Text:nx}=y.Typography,{RangePicker:nv}=nd;_.default.extend(em.default);let nb=e=>({from:e.startOf("week").startOf("day").toDate(),to:e.endOf("week").endOf("day").toDate()}),ny=e=>({from:e.startOf("month").startOf("day").toDate(),to:e.endOf("month").endOf("day").toDate()}),nk=({value:e,onValueChange:a,className:n})=>{let{t:r,locale:s}=(0,w.useLanguage)(),[l,o]=(0,j.useState)("week"),i="zh-CN"===s?ng:aL.default;(0,j.useEffect)(()=>{_.default.locale("zh-CN"===s?"zh-cn":"en")},[s]),(0,j.useEffect)(()=>{a(nb((0,_.default)()),"week")},[]);let c=(0,j.useCallback)(t=>{o(t);let n=(0,_.default)(e.to||e.from||new Date);"week"===t?a(nb(n),"week"):"month"===t&&a(ny(n),"month")},[a,e.from,e.to]),u=(0,j.useCallback)(e=>{e&&e[0]&&e[1]&&a({from:e[0].startOf("day").toDate(),to:e[1].endOf("day").toDate()},"day")},[a]),d=(0,j.useCallback)(e=>{e&&a(nb(e),"week")},[a]),m=(0,j.useCallback)(e=>{e&&a(ny(e),"month")},[a]);return(0,t.jsx)("div",{className:n,children:(0,t.jsxs)(np.Space,{size:8,wrap:!0,className:"rounded-xl border border-gray-200 bg-white px-3 py-2 shadow-sm",children:[(0,t.jsx)(nx,{type:"secondary",className:"whitespace-nowrap text-xs",children:r("usagePage.datePicker.type")}),(0,t.jsx)(v.Select,{value:l,onChange:c,style:{width:120},options:[{label:r("usagePage.datePicker.day"),value:"day"},{label:r("usagePage.datePicker.week"),value:"week"},{label:r("usagePage.datePicker.month"),value:"month"}]}),"day"===l&&(0,t.jsx)(nv,{locale:i,value:[e.from?(0,_.default)(e.from):null,e.to?(0,_.default)(e.to):null],onChange:u,allowClear:!1,inputReadOnly:!0,placeholder:[r("usagePage.datePicker.placeholder.day"),r("usagePage.datePicker.placeholder.day")]}),"week"===l&&(0,t.jsx)(nd,{locale:i,picker:"week",value:e.from?(0,_.default)(e.from):null,onChange:d,allowClear:!1,inputReadOnly:!0,format:e=>`${e.year()}年${e.week()}周`,placeholder:r("usagePage.datePicker.placeholder.week")}),"month"===l&&(0,t.jsx)(nd,{locale:i,picker:"month",value:e.from?(0,_.default)(e.from):null,onChange:m,allowClear:!1,inputReadOnly:!0,format:"zh-CN"===s?"YYYY年M月":"YYYY-MM",placeholder:r("usagePage.datePicker.placeholder.month")})]})})};var n_=e.i(571303);let nj=({isDateChanging:e=!1})=>(0,t.jsx)("div",{className:"flex items-center justify-center h-40",children:(0,t.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,t.jsx)(n_.UiLoadingSpinner,{className:"size-5"}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-gray-600 text-sm font-medium",children:e?"Processing date selection...":"Loading chart data..."}),(0,t.jsx)("span",{className:"text-gray-400 text-xs mt-1",children:e?"This will only take a moment":"Fetching your data"})]})]})});var nw=e.i(290571),nC=e.i(95779),nN=e.i(444755),nS=e.i(673706);let nT=j.default.forwardRef((e,t)=>{let{color:a,children:n,className:r}=e,s=(0,nw.__rest)(e,["color","children","className"]);return j.default.createElement("p",Object.assign({ref:t,className:(0,nN.tremorTwMerge)("font-semibold text-tremor-metric",a?(0,nS.getColorClassNames)(a,nC.colorPalette.darkText).textColor:"text-tremor-content-strong dark:text-dark-tremor-content-strong",r)},s),n)});nT.displayName="Metric";var nM=e.i(37091),n$=e.i(269200),nD=e.i(427612),nE=e.i(496020),nq=e.i(64848),nP=e.i(942232),nO=e.i(977572);let nI=({accessToken:e,selectedTags:a,formatAbbreviatedNumber:n})=>{let r,l,o,i,[g,x]=(0,j.useState)({results:[],total_count:0,page:1,page_size:50,total_pages:0}),[v,b]=(0,j.useState)(!1),[y,k]=(0,j.useState)(1),_=async()=>{if(e){b(!0);try{let t=await (0,C.perUserAnalyticsCall)(e,y,50,a.length>0?a:void 0);x(t)}catch(e){console.error("Failed to fetch per-user data:",e)}finally{b(!1)}}};return(0,j.useEffect)(()=>{_()},[e,a,y]),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)(h.Title,{children:"Per User Usage"}),(0,t.jsx)(nM.Subtitle,{children:"Individual developer usage metrics"}),(0,t.jsxs)(u.TabGroup,{children:[(0,t.jsxs)(d.TabList,{className:"mb-6",children:[(0,t.jsx)(c.Tab,{children:"User Details"}),(0,t.jsx)(c.Tab,{children:"Usage Distribution"})]}),(0,t.jsxs)(f.TabPanels,{children:[(0,t.jsxs)(m.TabPanel,{children:[(0,t.jsxs)(n$.Table,{children:[(0,t.jsx)(nD.TableHead,{children:(0,t.jsxs)(nE.TableRow,{children:[(0,t.jsx)(nq.TableHeaderCell,{children:"User ID"}),(0,t.jsx)(nq.TableHeaderCell,{children:"User Email"}),(0,t.jsx)(nq.TableHeaderCell,{children:"User Agent"}),(0,t.jsx)(nq.TableHeaderCell,{className:"text-right",children:"Success Generations"}),(0,t.jsx)(nq.TableHeaderCell,{className:"text-right",children:"Total Tokens"}),(0,t.jsx)(nq.TableHeaderCell,{className:"text-right",children:"Failed Requests"}),(0,t.jsx)(nq.TableHeaderCell,{className:"text-right",children:"Total Cost"})]})}),(0,t.jsx)(nP.TableBody,{children:g.results.slice(0,10).map((e,a)=>(0,t.jsxs)(nE.TableRow,{children:[(0,t.jsx)(nO.TableCell,{children:(0,t.jsx)(p.Text,{className:"font-medium",children:e.user_id})}),(0,t.jsx)(nO.TableCell,{children:(0,t.jsx)(p.Text,{children:e.user_email||"N/A"})}),(0,t.jsx)(nO.TableCell,{children:(0,t.jsx)(p.Text,{children:e.user_agent||"Unknown"})}),(0,t.jsx)(nO.TableCell,{className:"text-right",children:(0,t.jsx)(p.Text,{children:n(e.successful_requests)})}),(0,t.jsx)(nO.TableCell,{className:"text-right",children:(0,t.jsx)(p.Text,{children:n(e.total_tokens)})}),(0,t.jsx)(nO.TableCell,{className:"text-right",children:(0,t.jsx)(p.Text,{children:n(e.failed_requests)})}),(0,t.jsx)(nO.TableCell,{className:"text-right",children:(0,t.jsxs)(p.Text,{children:["$",n(e.spend,4)]})})]},a))})]}),g.results.length>10&&(0,t.jsxs)("div",{className:"mt-4 flex justify-between items-center",children:[(0,t.jsxs)(p.Text,{className:"text-sm text-gray-500",children:["Showing 10 of ",g.total_count," results"]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(A.Button,{size:"sm",variant:"secondary",onClick:()=>{y>1&&k(y-1)},disabled:1===y,children:"Previous"}),(0,t.jsx)(A.Button,{size:"sm",variant:"secondary",onClick:()=>{y<g.total_pages&&k(y+1)},disabled:y>=g.total_pages,children:"Next"})]})]})]}),(0,t.jsxs)(m.TabPanel,{children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)(h.Title,{className:"text-lg",children:"User Usage Distribution"}),(0,t.jsx)(nM.Subtitle,{children:"Number of users by successful request frequency"})]}),(0,t.jsx)(s.BarChart,{data:(r=new Map,g.results.forEach(e=>{let t=e.user_agent||"Unknown";r.set(t,(r.get(t)||0)+1)}),l=Array.from(r.entries()).sort(([,e],[,t])=>t-e).slice(0,8).map(([e])=>e),o={"1-9 requests":{range:[1,9],agents:{}},"10-99 requests":{range:[10,99],agents:{}},"100-999 requests":{range:[100,999],agents:{}},"1K-9.9K requests":{range:[1e3,9999],agents:{}},"10K-99.9K requests":{range:[1e4,99999],agents:{}},"100K+ requests":{range:[1e5,1/0],agents:{}}},g.results.forEach(e=>{let t=e.successful_requests,a=e.user_agent||"Unknown";l.includes(a)&&Object.entries(o).forEach(([e,n])=>{t>=n.range[0]&&t<=n.range[1]&&(n.agents[a]||(n.agents[a]=0),n.agents[a]++)})}),Object.entries(o).map(([e,t])=>{let a={category:e};return l.forEach(e=>{a[e]=t.agents[e]||0}),a})),index:"category",categories:(i=new Map,g.results.forEach(e=>{let t=e.user_agent||"Unknown";i.set(t,(i.get(t)||0)+1)}),Array.from(i.entries()).sort(([,e],[,t])=>t-e).slice(0,8).map(([e])=>e)),colors:["blue","green","orange","red","purple","yellow","pink","indigo"],valueFormatter:e=>`${e} users`,yAxisWidth:80,showLegend:!0,stack:!0})]})]})]})]})},nL=({accessToken:e,userRole:a,dateValue:n,onDateChange:r})=>{let[o,g]=(0,j.useState)({results:[]}),[x,y]=(0,j.useState)({results:[]}),[k,_]=(0,j.useState)({results:[]}),[w,N]=(0,j.useState)({results:[]}),[S,T]=(0,j.useState)(""),[M,$]=(0,j.useState)([]),[D,E]=(0,j.useState)([]),[q,P]=(0,j.useState)(!1),[O,I]=(0,j.useState)(!1),[L,A]=(0,j.useState)(!1),[F,R]=(0,j.useState)(!1),[Y,H]=(0,j.useState)(!1),W=new Date,V=async()=>{if(e){P(!0);try{let t=await (0,C.tagDistinctCall)(e);$(t.results.map(e=>e.tag))}catch(e){console.error("Failed to fetch available tags:",e)}finally{P(!1)}}},z=async()=>{if(e){I(!0);try{let t=await (0,C.tagDauCall)(e,W,S||void 0,D.length>0?D:void 0);g(t)}catch(e){console.error("Failed to fetch DAU data:",e)}finally{I(!1)}}},B=async()=>{if(e){A(!0);try{let t=await (0,C.tagWauCall)(e,W,S||void 0,D.length>0?D:void 0);y(t)}catch(e){console.error("Failed to fetch WAU data:",e)}finally{A(!1)}}},U=async()=>{if(e){R(!0);try{let t=await (0,C.tagMauCall)(e,W,S||void 0,D.length>0?D:void 0);_(t)}catch(e){console.error("Failed to fetch MAU data:",e)}finally{R(!1)}}},K=async()=>{if(e&&n.from&&n.to){H(!0);try{let t=await (0,C.userAgentSummaryCall)(e,n.from,n.to,D.length>0?D:void 0);N(t)}catch(e){console.error("Failed to fetch user agent summary data:",e)}finally{H(!1)}}};(0,j.useEffect)(()=>{V()},[e]),(0,j.useEffect)(()=>{if(!e)return;let t=setTimeout(()=>{z(),B(),U()},50);return()=>clearTimeout(t)},[e,S,D]),(0,j.useEffect)(()=>{if(!n.from||!n.to)return;let e=setTimeout(()=>{K()},50);return()=>clearTimeout(e)},[e,n,D]);let G=e=>e.startsWith("User-Agent: ")?e.replace("User-Agent: ",""):e,Z=e=>Object.entries(e.reduce((e,t)=>(e[t.tag]=(e[t.tag]||0)+t.active_users,e),{})).sort(([,e],[,t])=>t-e).map(([e])=>e),Q=Z(o.results).slice(0,10),X=Z(x.results).slice(0,10),J=Z(k.results).slice(0,10),ee=(()=>{let e=[],t=new Date;for(let a=6;a>=0;a--){let n=new Date(t);n.setDate(n.getDate()-a);let r={date:n.toISOString().split("T")[0]};Q.forEach(e=>{r[G(e)]=0}),e.push(r)}return o.results.forEach(t=>{let a=G(t.tag),n=e.find(e=>e.date===t.date);n&&(n[a]=t.active_users)}),e})(),et=(()=>{let e=[];for(let t=1;t<=7;t++){let a={week:`Week ${t}`};X.forEach(e=>{a[G(e)]=0}),e.push(a)}return x.results.forEach(t=>{let a=G(t.tag),n=t.date.match(/Week (\d+)/);if(n){let r=`Week ${n[1]}`,s=e.find(e=>e.week===r);s&&(s[a]=t.active_users)}}),e})(),ea=(()=>{let e=[];for(let t=1;t<=7;t++){let a={month:`Month ${t}`};J.forEach(e=>{a[G(e)]=0}),e.push(a)}return k.results.forEach(t=>{let a=G(t.tag),n=t.date.match(/Month (\d+)/);if(n){let r=`Month ${n[1]}`,s=e.find(e=>e.month===r);s&&(s[a]=t.active_users)}}),e})(),en=(e,t=0)=>{if(e>=1e8||e>=1e7)return(e/1e6).toFixed(t)+"M";if(e>=1e6)return(e/1e6).toFixed(t)+"M";if(e>=1e4)return(e/1e3).toFixed(t)+"K";if(e>=1e3)return(e/1e3).toFixed(t)+"K";else return e.toFixed(t)};return(0,t.jsxs)("div",{className:"space-y-6 mt-6",children:[(0,t.jsx)(l.Card,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(h.Title,{children:"Summary by User Agent"}),(0,t.jsx)(nM.Subtitle,{children:"Performance metrics for different user agents"})]}),(0,t.jsxs)("div",{className:"w-96",children:[(0,t.jsx)(p.Text,{className:"text-sm font-medium block mb-2",children:"Filter by User Agents"}),(0,t.jsx)(v.Select,{mode:"multiple",placeholder:"All User Agents",value:D,onChange:E,style:{width:"100%"},showSearch:!0,allowClear:!0,loading:q,optionFilterProp:"label",className:"rounded-md",maxTagCount:"responsive",children:M.map(e=>{let a=G(e),n=a.length>50?`${a.substring(0,50)}...`:a;return(0,t.jsx)(v.Select.Option,{value:e,label:n,title:a,children:n},e)})})]})]}),Y?(0,t.jsx)(nj,{isDateChanging:!1}):(0,t.jsxs)(i.Grid,{numItems:4,className:"gap-4",children:[(w.results||[]).slice(0,4).map((e,a)=>{let n=G(e.tag),r=n.length>15?n.substring(0,15)+"...":n;return(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(b.Tooltip,{title:n,placement:"top",children:(0,t.jsx)(h.Title,{className:"truncate",children:r})}),(0,t.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(p.Text,{className:"text-sm text-gray-600",children:"Success Requests"}),(0,t.jsx)(nT,{className:"text-lg",children:en(e.successful_requests)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(p.Text,{className:"text-sm text-gray-600",children:"Total Tokens"}),(0,t.jsx)(nT,{className:"text-lg",children:en(e.total_tokens)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(p.Text,{className:"text-sm text-gray-600",children:"Total Cost"}),(0,t.jsxs)(nT,{className:"text-lg",children:["$",en(e.total_spend,4)]})]})]})]},a)}),Array.from({length:Math.max(0,4-(w.results||[]).length)}).map((e,a)=>(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(h.Title,{children:"No Data"}),(0,t.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(p.Text,{className:"text-sm text-gray-600",children:"Success Requests"}),(0,t.jsx)(nT,{className:"text-lg",children:"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(p.Text,{className:"text-sm text-gray-600",children:"Total Tokens"}),(0,t.jsx)(nT,{className:"text-lg",children:"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(p.Text,{className:"text-sm text-gray-600",children:"Total Cost"}),(0,t.jsx)(nT,{className:"text-lg",children:"-"})]})]})]},`empty-${a}`))]})]})}),(0,t.jsx)(l.Card,{children:(0,t.jsxs)(u.TabGroup,{children:[(0,t.jsxs)(d.TabList,{className:"mb-6",children:[(0,t.jsx)(c.Tab,{children:"DAU/WAU/MAU"}),(0,t.jsx)(c.Tab,{children:"Per User Usage (Last 30 Days)"})]}),(0,t.jsxs)(f.TabPanels,{children:[(0,t.jsxs)(m.TabPanel,{children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)(h.Title,{children:"DAU, WAU & MAU per Agent"}),(0,t.jsx)(nM.Subtitle,{children:"Active users across different time periods"})]}),(0,t.jsxs)(u.TabGroup,{children:[(0,t.jsxs)(d.TabList,{className:"mb-6",children:[(0,t.jsx)(c.Tab,{children:"DAU"}),(0,t.jsx)(c.Tab,{children:"WAU"}),(0,t.jsx)(c.Tab,{children:"MAU"})]}),(0,t.jsxs)(f.TabPanels,{children:[(0,t.jsxs)(m.TabPanel,{children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)(h.Title,{className:"text-lg",children:"Daily Active Users - Last 7 Days"})}),O?(0,t.jsx)(nj,{isDateChanging:!1}):(0,t.jsx)(s.BarChart,{data:ee,index:"date",categories:Q.map(G),valueFormatter:e=>en(e),yAxisWidth:60,showLegend:!0,stack:!0})]}),(0,t.jsxs)(m.TabPanel,{children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)(h.Title,{className:"text-lg",children:"Weekly Active Users - Last 7 Weeks"})}),L?(0,t.jsx)(nj,{isDateChanging:!1}):(0,t.jsx)(s.BarChart,{data:et,index:"week",categories:X.map(G),valueFormatter:e=>en(e),yAxisWidth:60,showLegend:!0,stack:!0})]}),(0,t.jsxs)(m.TabPanel,{children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)(h.Title,{className:"text-lg",children:"Monthly Active Users - Last 7 Months"})}),F?(0,t.jsx)(nj,{isDateChanging:!1}):(0,t.jsx)(s.BarChart,{data:ea,index:"month",categories:J.map(G),valueFormatter:e=>en(e),yAxisWidth:60,showLegend:!0,stack:!0})]})]})]})]}),(0,t.jsx)(m.TabPanel,{children:(0,t.jsx)(nI,{accessToken:e,selectedTags:D,formatAbbreviatedNumber:en})})]})]})})]})};var nA=e.i(617802);let nF=({endpointData:e})=>{let{locale:a}=(0,w.useLanguage)(),n=e||{},r=j.default.useMemo(()=>Object.entries(n).map(([e,t])=>({endpoint:e,"metrics.successful_requests":t.metrics.successful_requests,"metrics.failed_requests":t.metrics.failed_requests,metrics:{successful_requests:t.metrics.successful_requests,failed_requests:t.metrics.failed_requests}})),[n]);return(0,t.jsxs)(l.Card,{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(h.Title,{children:"zh-CN"===a?"各端点成功/失败请求对比":"Success vs Failed Requests by Endpoint"}),(0,t.jsx)(V,{categories:["metrics.successful_requests","metrics.failed_requests"],colors:["green","red"]})]}),(0,t.jsx)(s.BarChart,{className:"mt-4",data:r,index:"endpoint",categories:["metrics.successful_requests","metrics.failed_requests"],colors:["green","red"],valueFormatter:e=>e.toLocaleString(),customTooltip:W,showLegend:!1,stack:!0,yAxisWidth:60})]})};var nR=e.i(731195),nY=e.i(883966),nH=e.i(555706),nW=e.i(785183),nV=e.i(93230),nz=e.i(844171),nB=(0,nY.generateCategoricalChart)({chartName:"LineChart",GraphicalChild:nH.Line,axisComponents:[{axisType:"xAxis",AxisComp:nW.XAxis},{axisType:"yAxis",AxisComp:nV.YAxis}],formatAxisMap:nz.formatAxisMap}),nU=e.i(872526),nK=e.i(800494),nG=e.i(234239),nZ=e.i(559559),nQ=e.i(238279),nX=e.i(114887),nJ=e.i(933303),n0=e.i(628781),n1=e.i(472007),n2=e.i(480731);let n4=j.default.forwardRef((e,t)=>{let{data:a=[],categories:n=[],index:r,colors:s=nC.themeColorRange,valueFormatter:l=nS.defaultValueFormatter,startEndOnly:o=!1,showXAxis:i=!0,showYAxis:c=!0,yAxisWidth:u=56,intervalType:d="equidistantPreserveStart",animationDuration:m=900,showAnimation:f=!1,showTooltip:p=!0,showLegend:h=!0,showGridLines:g=!0,autoMinValue:x=!1,curveType:v="linear",minValue:b,maxValue:y,connectNulls:k=!1,allowDecimals:_=!0,noDataText:w,className:C,onValueChange:N,enableLegendSlider:S=!1,customTooltip:T,rotateLabelX:M,padding:$=i||c?{left:20,right:20}:{left:0,right:0},tickGap:D=5,xAxisLabel:E,yAxisLabel:q}=e,P=(0,nw.__rest)(e,["data","categories","index","colors","valueFormatter","startEndOnly","showXAxis","showYAxis","yAxisWidth","intervalType","animationDuration","showAnimation","showTooltip","showLegend","showGridLines","autoMinValue","curveType","minValue","maxValue","connectNulls","allowDecimals","noDataText","className","onValueChange","enableLegendSlider","customTooltip","rotateLabelX","padding","tickGap","xAxisLabel","yAxisLabel"]),[O,I]=(0,j.useState)(60),[L,A]=(0,j.useState)(void 0),[F,R]=(0,j.useState)(void 0),Y=(0,n1.constructCategoryColors)(n,s),H=(0,n1.getYAxisDomain)(x,b,y),W=!!N;function V(e){W&&(e===F&&!L||(0,n1.hasOnlyOneValueForThisKey)(a,e)&&L&&L.dataKey===e?(R(void 0),null==N||N(null)):(R(e),null==N||N({eventType:"category",categoryClicked:e})),A(void 0))}return j.default.createElement("div",Object.assign({ref:t,className:(0,nN.tremorTwMerge)("w-full h-80",C)},P),j.default.createElement(nR.ResponsiveContainer,{className:"h-full w-full"},(null==a?void 0:a.length)?j.default.createElement(nB,{data:a,onClick:W&&(F||L)?()=>{A(void 0),R(void 0),null==N||N(null)}:void 0,margin:{bottom:E?30:void 0,left:q?20:void 0,right:q?5:void 0,top:5}},g?j.default.createElement(nU.CartesianGrid,{className:(0,nN.tremorTwMerge)("stroke-1","stroke-tremor-border","dark:stroke-dark-tremor-border"),horizontal:!0,vertical:!1}):null,j.default.createElement(nW.XAxis,{padding:$,hide:!i,dataKey:r,interval:o?"preserveStartEnd":d,tick:{transform:"translate(0, 6)"},ticks:o?[a[0][r],a[a.length-1][r]]:void 0,fill:"",stroke:"",className:(0,nN.tremorTwMerge)("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickLine:!1,axisLine:!1,minTickGap:D,angle:null==M?void 0:M.angle,dy:null==M?void 0:M.verticalShift,height:null==M?void 0:M.xAxisHeight},E&&j.default.createElement(nK.Label,{position:"insideBottom",offset:-20,className:"fill-tremor-content-emphasis text-tremor-default font-medium dark:fill-dark-tremor-content-emphasis"},E)),j.default.createElement(nV.YAxis,{width:u,hide:!c,axisLine:!1,tickLine:!1,type:"number",domain:H,tick:{transform:"translate(-3, 0)"},fill:"",stroke:"",className:(0,nN.tremorTwMerge)("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickFormatter:l,allowDecimals:_},q&&j.default.createElement(nK.Label,{position:"insideLeft",style:{textAnchor:"middle"},angle:-90,offset:-15,className:"fill-tremor-content-emphasis text-tremor-default font-medium dark:fill-dark-tremor-content-emphasis"},q)),j.default.createElement(nG.Tooltip,{wrapperStyle:{outline:"none"},isAnimationActive:!1,cursor:{stroke:"#d1d5db",strokeWidth:1},content:p?({active:e,payload:t,label:a})=>T?j.default.createElement(T,{payload:null==t?void 0:t.map(e=>{var t;return Object.assign(Object.assign({},e),{color:null!=(t=Y.get(e.dataKey))?t:n2.BaseColors.Gray})}),active:e,label:a}):j.default.createElement(nJ.default,{active:e,payload:t,label:a,valueFormatter:l,categoryColors:Y}):j.default.createElement(j.default.Fragment,null),position:{y:0}}),h?j.default.createElement(nZ.Legend,{verticalAlign:"top",height:O,content:({payload:e})=>(0,nX.default)({payload:e},Y,I,F,W?e=>V(e):void 0,S)}):null,n.map(e=>{var t;return j.default.createElement(nH.Line,{className:(0,nN.tremorTwMerge)((0,nS.getColorClassNames)(null!=(t=Y.get(e))?t:n2.BaseColors.Gray,nC.colorPalette.text).strokeColor),strokeOpacity:L||F&&F!==e?.3:1,activeDot:e=>{var t;let{cx:n,cy:r,stroke:s,strokeLinecap:l,strokeLinejoin:o,strokeWidth:i,dataKey:c}=e;return j.default.createElement(nQ.Dot,{className:(0,nN.tremorTwMerge)("stroke-tremor-background dark:stroke-dark-tremor-background",N?"cursor-pointer":"",(0,nS.getColorClassNames)(null!=(t=Y.get(c))?t:n2.BaseColors.Gray,nC.colorPalette.text).fillColor),cx:n,cy:r,r:5,fill:"",stroke:s,strokeLinecap:l,strokeLinejoin:o,strokeWidth:i,onClick:(t,n)=>{n.stopPropagation(),W&&(e.index===(null==L?void 0:L.index)&&e.dataKey===(null==L?void 0:L.dataKey)||(0,n1.hasOnlyOneValueForThisKey)(a,e.dataKey)&&F&&F===e.dataKey?(R(void 0),A(void 0),null==N||N(null)):(R(e.dataKey),A({index:e.index,dataKey:e.dataKey}),null==N||N(Object.assign({eventType:"dot",categoryClicked:e.dataKey},e.payload))))}})},dot:t=>{var n;let{stroke:r,strokeLinecap:s,strokeLinejoin:l,strokeWidth:o,cx:i,cy:c,dataKey:u,index:d}=t;return(0,n1.hasOnlyOneValueForThisKey)(a,e)&&!(L||F&&F!==e)||(null==L?void 0:L.index)===d&&(null==L?void 0:L.dataKey)===e?j.default.createElement(nQ.Dot,{key:d,cx:i,cy:c,r:5,stroke:r,fill:"",strokeLinecap:s,strokeLinejoin:l,strokeWidth:o,className:(0,nN.tremorTwMerge)("stroke-tremor-background dark:stroke-dark-tremor-background",N?"cursor-pointer":"",(0,nS.getColorClassNames)(null!=(n=Y.get(u))?n:n2.BaseColors.Gray,nC.colorPalette.text).fillColor)}):j.default.createElement(j.Fragment,{key:d})},key:e,name:e,type:v,dataKey:e,stroke:"",strokeWidth:2,strokeLinejoin:"round",strokeLinecap:"round",isAnimationActive:f,animationDuration:m,connectNulls:k})}),N?n.map(e=>j.default.createElement(nH.Line,{className:(0,nN.tremorTwMerge)("cursor-pointer"),strokeOpacity:0,key:e,name:e,type:v,dataKey:e,stroke:"transparent",fill:"transparent",legendType:"none",tooltipType:"none",strokeWidth:12,connectNulls:k,onClick:(e,t)=>{t.stopPropagation();let{name:a}=e;V(a)}})):null):j.default.createElement(n0.default,{noDataText:w})))});n4.displayName="LineChart";let n5=function({dailyData:e,endpointData:a}){let{locale:n}=(0,w.useLanguage)(),r=(0,j.useMemo)(()=>{var t;let a,r;return e?.results&&0!==e.results.length?(t=e.results,a=[],r=new Set,t.forEach(e=>{e.breakdown.endpoints&&Object.keys(e.breakdown.endpoints).forEach(e=>r.add(e))}),t.forEach(e=>{let t=new Date(e.date),s={date:"zh-CN"===n?`${t.getMonth()+1}月${t.getDate()}日`:t.toLocaleDateString("en-US",{month:"short",day:"numeric"})};r.forEach(t=>{let a=e.breakdown.endpoints?.[t];s[t]=a?.metrics.api_requests||0}),a.push(s)}),a.reverse()):[]},[e,n]),s=(0,j.useMemo)(()=>0===r.length?[]:Object.keys(r[0]).filter(e=>"date"!==e),[r]);return(0,t.jsxs)(l.Card,{className:"mb-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsx)(h.Title,{children:"zh-CN"===n?"端点用量趋势":"Endpoint Usage Trends"})}),(0,t.jsx)(n4,{className:"h-80",data:r,index:"date",categories:s,colors:["blue","cyan","indigo","violet","purple","fuchsia","pink","rose","red","orange"].slice(0,s.length),valueFormatter:e=>e.toLocaleString(),showLegend:!0,showGridLines:!0,yAxisWidth:60,connectNulls:!0,curveType:"natural"})]})};var n3=e.i(309821),n3=n3;let n6=({endpointData:e})=>{let{t:a}=(0,w.useLanguage)(),n=Object.entries(e).map(([e,t])=>{var a,n;return{key:e,endpoint:e,successful_requests:t.metrics.successful_requests,failed_requests:t.metrics.failed_requests,api_requests:t.metrics.api_requests,total_tokens:t.metrics.total_tokens,spend:t.metrics.spend,successRate:(a=t.metrics.successful_requests,0===(n=t.metrics.api_requests)?0:a/n*100)}}),r=(0,j.useMemo)(()=>[{title:a("usagePage.endpointUsage.endpoint"),dataIndex:"endpoint",key:"endpoint",render:e=>(0,t.jsx)("span",{className:"font-medium",children:e})},{title:a("usagePage.endpointUsage.successfulFailed"),key:"requests",render:(e,a)=>{let n=a.api_requests>0?a.successful_requests/a.api_requests*100:0,r=a.api_requests>0?a.failed_requests/a.api_requests*100:0,s={"0%":"#22c55e"};return n>0&&n<100&&(s[`${n}%`]="#22c55e",s[`${n+.01}%`]="#ef4444"),s["100%"]=r>0?"#ef4444":"#22c55e",(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"flex-1 relative",children:(0,t.jsx)(n3.default,{percent:n+r,size:"small",strokeColor:s,showInfo:!1})}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm min-w-[100px]",children:[(0,t.jsx)("span",{className:"text-green-600 font-medium",children:a.successful_requests.toLocaleString()}),(0,t.jsx)("span",{className:"text-gray-400",children:"/"}),(0,t.jsx)("span",{className:"text-red-600 font-medium",children:a.failed_requests.toLocaleString()})]})]})}},{title:a("usagePage.endpointUsage.totalRequest"),dataIndex:"api_requests",key:"api_requests",render:e=>e.toLocaleString()},{title:a("usagePage.endpointUsage.successRate"),dataIndex:"successRate",key:"successRate",render:e=>{let a=e.toFixed(2);return(0,t.jsxs)("span",{className:e>=95?"text-green-600 font-medium":e>=80?"text-yellow-600 font-medium":"text-red-600 font-medium",children:[a,"%"]})}},{title:a("usagePage.endpointUsage.tokens"),dataIndex:"total_tokens",key:"total_tokens",render:e=>e.toLocaleString()},{title:a("usagePage.endpointUsage.spend"),dataIndex:"spend",key:"spend",render:e=>`\xa5${(0,L.formatNumberWithCommas)(e)}`}],[a]);return(0,t.jsx)(z.Table,{columns:r,dataSource:n,pagination:!1})},n9=({userSpendData:e})=>{let a=(0,j.useMemo)(()=>{let t={};return e?.results&&e.results.forEach(e=>{Object.entries(e.breakdown.endpoints||{}).forEach(([e,a])=>{t[e]||(t[e]={metrics:{spend:0,prompt_tokens:0,completion_tokens:0,total_tokens:0,api_requests:0,successful_requests:0,failed_requests:0,cache_read_input_tokens:0,cache_creation_input_tokens:0},metadata:a.metadata||{},api_key_breakdown:{}}),t[e].metrics.spend+=a.metrics.spend,t[e].metrics.prompt_tokens+=a.metrics.prompt_tokens,t[e].metrics.completion_tokens+=a.metrics.completion_tokens,t[e].metrics.total_tokens+=a.metrics.total_tokens,t[e].metrics.api_requests+=a.metrics.api_requests,t[e].metrics.successful_requests+=a.metrics.successful_requests||0,t[e].metrics.failed_requests+=a.metrics.failed_requests||0,t[e].metrics.cache_read_input_tokens+=a.metrics.cache_read_input_tokens||0,t[e].metrics.cache_creation_input_tokens+=a.metrics.cache_creation_input_tokens||0})}),t},[e]);return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(n6,{endpointData:a}),(0,t.jsx)(nF,{endpointData:a}),(0,t.jsx)(n5,{dailyData:e,endpointData:a})]})};var n7=e.i(214541),n8=e.i(413990),re=e.i(916925),rt=e.i(1023),ra=e.i(149121);function rn({topModels:e,topModelsLimit:a,setTopModelsLimit:n}){let[r,l]=(0,j.useState)("table"),{t:o}=(0,w.useLanguage)(),i=o("usagePage.topKeyView.chartView"),c=[{header:o("usagePage.topKeyView.model"),accessorKey:"key",cell:e=>e.getValue()||"-"},{header:"花费",accessorKey:"spend",cell:e=>{let t=e.getValue();return`\xa5${(0,L.formatNumberWithCommas)(t)}`}},{header:o("usagePage.successfulRequests"),accessorKey:"successful_requests",cell:e=>(0,t.jsx)("span",{className:"text-green-600",children:e.getValue()?.toLocaleString()||0})},{header:o("usagePage.failedRequests"),accessorKey:"failed_requests",cell:e=>(0,t.jsx)("span",{className:"text-red-600",children:e.getValue()?.toLocaleString()||0})},{header:o("usagePage.totalTokens"),accessorKey:"tokens",cell:e=>e.getValue()?.toLocaleString()||0}],u=e.slice(0,a);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"mb-4 flex justify-between items-center",children:[(0,t.jsx)(x.Segmented,{options:[{label:"5",value:5},{label:"10",value:10},{label:"25",value:25},{label:"50",value:50}],value:a,onChange:e=>n(e)}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("button",{onClick:()=>l("table"),className:`px-3 py-1 text-sm rounded-md ${"table"===r?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:o("usagePage.topKeyView.tableView")}),(0,t.jsx)("button",{onClick:()=>l("chart"),className:`px-3 py-1 text-sm rounded-md ${"chart"===r?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:"usagePage.topKeyView.chartView"===i?"图表视图":i})]})]}),"chart"===r?(0,t.jsx)("div",{className:"relative max-h-[600px] overflow-y-auto",children:(0,t.jsx)(s.BarChart,{className:"mt-4 cursor-pointer hover:opacity-90",style:{height:52*Math.min(u.length,a)},data:u,index:"key",categories:["spend"],colors:["cyan"],valueFormatter:e=>`\xa5${(0,L.formatNumberWithCommas)(e)}`,layout:"vertical",yAxisWidth:200,tickGap:5,showLegend:!1})}):(0,t.jsx)("div",{className:"border rounded-lg overflow-hidden max-h-[600px] overflow-y-auto",children:(0,t.jsx)(ra.DataTable,{columns:c,data:u,renderSubComponent:()=>(0,t.jsx)(t.Fragment,{}),getRowCanExpand:()=>!1,isLoading:!1})})]})}let rr=({accessToken:e,entityType:a,entityId:n,entityList:r,dateValue:g})=>{let x,v,[b,y]=(0,j.useState)({results:[],metadata:{total_spend:0,total_api_requests:0,total_successful_requests:0,total_failed_requests:0,total_tokens:0}}),{teams:k}=(0,n7.default)(),{t:_}=(0,w.useLanguage)(),N=Q(b,"models",k||[]),S=Q(b,"api_keys",k||[]),[T,M]=(0,j.useState)([]),[$,D]=(0,j.useState)(5),[E,q]=(0,j.useState)(5),P=async()=>{if(!e||!g.from||!g.to)return;let t=new Date(g.from),n=new Date(g.to);if("tag"===a)y(await (0,C.tagDailyActivityCall)(e,t,n,1,T.length>0?T:null));else if("team"===a)y(await (0,C.teamDailyActivityCall)(e,t,n,1,T.length>0?T:null));else if("organization"===a)y(await (0,C.organizationDailyActivityCall)(e,t,n,1,T.length>0?T:null));else if("customer"===a)y(await (0,C.customerDailyActivityCall)(e,t,n,1,T.length>0?T:null));else if("agent"===a)y(await (0,C.agentDailyActivityCall)(e,t,n,1,T.length>0?T:null));else throw Error("Invalid entity type")};(0,j.useEffect)(()=>{P()},[e,g,n,T]);let O=()=>{let e={};return b.results.forEach(t=>{Object.entries(t.breakdown.providers||{}).forEach(([t,a])=>{e[t]||(e[t]={provider:t,spend:0,requests:0,successful_requests:0,failed_requests:0,tokens:0});try{e[t].spend+=a.metrics.spend,e[t].requests+=a.metrics.api_requests,e[t].successful_requests+=a.metrics.successful_requests,e[t].failed_requests+=a.metrics.failed_requests,e[t].tokens+=a.metrics.total_tokens}catch(e){console.error(`Error processing provider ${t}: ${e}`)}})}),Object.values(e).filter(e=>e.spend>0).sort((e,t)=>t.spend-e.spend)},I=(e,t)=>{if(r){let t=r.find(t=>t.value===e);if(t)return t.label}return t?.team_alias?t.team_alias:e},A=()=>{var e;let t={};return b.results.forEach(e=>{Object.entries(e.breakdown.entities||{}).forEach(([e,a])=>{t[e]||(t[e]={metrics:{spend:0,prompt_tokens:0,completion_tokens:0,total_tokens:0,api_requests:0,successful_requests:0,failed_requests:0,cache_read_input_tokens:0,cache_creation_input_tokens:0},metadata:{alias:I(e,a.metadata),id:e}}),t[e].metrics.spend+=a.metrics.spend,t[e].metrics.api_requests+=a.metrics.api_requests,t[e].metrics.successful_requests+=a.metrics.successful_requests,t[e].metrics.failed_requests+=a.metrics.failed_requests,t[e].metrics.total_tokens+=a.metrics.total_tokens})}),e=Object.values(t).sort((e,t)=>t.metrics.spend-e.metrics.spend),0===T.length?e:e.filter(e=>T.includes(e.metadata.id))},F=a.charAt(0).toUpperCase()+a.slice(1);return(0,t.jsxs)("div",{style:{width:"100%"},className:"relative",children:[(0,t.jsx)(ek,{dateValue:g,entityType:a,spendData:b,showFilters:null!==r&&r.length>0,filterLabel:`Filter by ${a}`,filterPlaceholder:`Select ${a} to filter...`,selectedFilters:T,onFiltersChange:M,filterOptions:(()=>{if(r)return r})()||void 0,teams:k||[]}),(0,t.jsxs)(u.TabGroup,{children:[(0,t.jsxs)(d.TabList,{variant:"solid",className:"mt-1",children:[(0,t.jsx)(c.Tab,{children:"Cost"}),(0,t.jsx)(c.Tab,{children:_("agent"===a?"usagePage.entityUsage.requestTokenConsumption":"usagePage.modelActivity")}),(0,t.jsx)(c.Tab,{children:_("usagePage.keyActivity")}),(0,t.jsx)(c.Tab,{children:_("usagePage.endpointActivity")})]}),(0,t.jsxs)(f.TabPanels,{children:[(0,t.jsx)(m.TabPanel,{children:(0,t.jsxs)(i.Grid,{numItems:2,className:"gap-2 w-full",children:[(0,t.jsx)(o.Col,{numColSpan:2,children:(0,t.jsxs)(l.Card,{children:[(0,t.jsxs)(h.Title,{children:[F," ",_("usagePage.entityUsage.tagSpendOverview").replace("标签","").replace("Tag","")]}),(0,t.jsxs)(i.Grid,{numItems:5,className:"gap-4 mt-4",children:[(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(h.Title,{children:_("usagePage.entityUsage.totalSpend")}),(0,t.jsxs)(p.Text,{className:"text-2xl font-bold mt-2",children:["¥",(0,L.formatNumberWithCommas)(b.metadata.total_spend,2)]})]}),(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(h.Title,{children:_("usagePage.totalRequests")}),(0,t.jsx)(p.Text,{className:"text-2xl font-bold mt-2",children:b.metadata.total_api_requests.toLocaleString()})]}),(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(h.Title,{children:_("usagePage.successfulRequests")}),(0,t.jsx)(p.Text,{className:"text-2xl font-bold mt-2 text-green-600",children:b.metadata.total_successful_requests.toLocaleString()})]}),(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(h.Title,{children:_("usagePage.failedRequests")}),(0,t.jsx)(p.Text,{className:"text-2xl font-bold mt-2 text-red-600",children:b.metadata.total_failed_requests.toLocaleString()})]}),(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(h.Title,{children:_("usagePage.totalTokens")}),(0,t.jsx)(p.Text,{className:"text-2xl font-bold mt-2",children:b.metadata.total_tokens.toLocaleString()})]})]})]})}),(0,t.jsx)(o.Col,{numColSpan:2,children:(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(h.Title,{children:_("usagePage.dailySpend")}),(0,t.jsx)(s.BarChart,{data:[...b.results].sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()),index:"date",categories:["metrics.spend"],colors:["cyan"],valueFormatter:K,yAxisWidth:100,showLegend:!1,customTooltip:({payload:e,active:a})=>{if(!a||!e?.[0])return null;let n=e[0].payload,r=Object.keys(n.breakdown.entities||{}).length;return(0,t.jsxs)("div",{className:"bg-white p-4 shadow-lg rounded-lg border",children:[(0,t.jsx)("p",{className:"font-bold",children:n.date}),(0,t.jsxs)("p",{className:"text-cyan-500",children:["Total Spend: ¥",(0,L.formatNumberWithCommas)(n.metrics.spend,2)]}),(0,t.jsxs)("p",{className:"text-gray-600",children:["Total Requests: ",n.metrics.api_requests]}),(0,t.jsxs)("p",{className:"text-gray-600",children:["Successful: ",n.metrics.successful_requests]}),(0,t.jsxs)("p",{className:"text-gray-600",children:["Failed: ",n.metrics.failed_requests]}),(0,t.jsxs)("p",{className:"text-gray-600",children:["Total Tokens: ",n.metrics.total_tokens]}),(0,t.jsxs)("p",{className:"text-gray-600",children:["Total ",F,"s: ",r]}),(0,t.jsxs)("div",{className:"mt-2 border-t pt-2",children:[(0,t.jsxs)("p",{className:"font-semibold",children:["Spend by ",F,":"]}),Object.entries(n.breakdown.entities||{}).sort(([,e],[,t])=>{let a=e.metrics.spend;return t.metrics.spend-a}).slice(0,5).map(([e,a])=>(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[I(e,a.metadata),": ¥",(0,L.formatNumberWithCommas)(a.metrics.spend,2)]},e)),r>5&&(0,t.jsxs)("p",{className:"text-sm text-gray-500 italic",children:["...and ",r-5," more"]})]})]})}})]})}),(0,t.jsx)(o.Col,{numColSpan:2,children:(0,t.jsx)(l.Card,{children:(0,t.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,t.jsxs)(h.Title,{children:["Spend Per ",F]}),(0,t.jsx)(nM.Subtitle,{className:"text-xs",children:"Showing Top 5 by Spend"}),(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,t.jsxs)("span",{children:["Get Started by Tracking cost per ",F," "]}),(0,t.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/enterprise#spend-tracking",className:"text-blue-500 hover:text-blue-700 ml-1",children:"here"})]})]}),(0,t.jsxs)(i.Grid,{numItems:2,className:"gap-6",children:[(0,t.jsx)(o.Col,{numColSpan:1,children:(0,t.jsx)(s.BarChart,{className:"mt-4 h-52",data:A().slice(0,5).map(e=>({...e,metadata:{...e.metadata,alias_display:e.metadata.alias&&e.metadata.alias.length>15?`${e.metadata.alias.slice(0,15)}...`:e.metadata.alias}})),index:"metadata.alias_display",categories:["metrics.spend"],colors:["cyan"],valueFormatter:K,layout:"vertical",showLegend:!1,yAxisWidth:150,customTooltip:({payload:e,active:a})=>{if(!a||!e?.[0])return null;let n=e[0].payload;return(0,t.jsxs)("div",{className:"bg-white p-4 shadow-lg rounded-lg border",children:[(0,t.jsx)("p",{className:"font-bold",children:n.metadata.alias}),(0,t.jsxs)("p",{className:"text-cyan-500",children:["Spend: ¥",(0,L.formatNumberWithCommas)(n.metrics.spend,4)]}),(0,t.jsxs)("p",{className:"text-gray-600",children:["Requests: ",n.metrics.api_requests.toLocaleString()]}),(0,t.jsxs)("p",{className:"text-green-600",children:["Successful: ",n.metrics.successful_requests.toLocaleString()]}),(0,t.jsxs)("p",{className:"text-red-600",children:["Failed: ",n.metrics.failed_requests.toLocaleString()]}),(0,t.jsxs)("p",{className:"text-gray-600",children:["Tokens: ",n.metrics.total_tokens.toLocaleString()]})]})}})}),(0,t.jsx)(o.Col,{numColSpan:1,children:(0,t.jsx)("div",{className:"h-52 overflow-y-auto",children:(0,t.jsxs)(n$.Table,{children:[(0,t.jsx)(nD.TableHead,{children:(0,t.jsxs)(nE.TableRow,{children:[(0,t.jsx)(nq.TableHeaderCell,{children:F}),(0,t.jsx)(nq.TableHeaderCell,{children:"Spend"}),(0,t.jsx)(nq.TableHeaderCell,{className:"text-green-600",children:"Successful"}),(0,t.jsx)(nq.TableHeaderCell,{className:"text-red-600",children:"Failed"}),(0,t.jsx)(nq.TableHeaderCell,{children:"Tokens"})]})}),(0,t.jsx)(nP.TableBody,{children:A().filter(e=>e.metrics.spend>0).map(e=>(0,t.jsxs)(nE.TableRow,{children:[(0,t.jsx)(nO.TableCell,{children:e.metadata.alias}),(0,t.jsxs)(nO.TableCell,{children:["¥",(0,L.formatNumberWithCommas)(e.metrics.spend,4)]}),(0,t.jsx)(nO.TableCell,{className:"text-green-600",children:e.metrics.successful_requests.toLocaleString()}),(0,t.jsx)(nO.TableCell,{className:"text-red-600",children:e.metrics.failed_requests.toLocaleString()}),(0,t.jsx)(nO.TableCell,{children:e.metrics.total_tokens.toLocaleString()})]},e.metadata.id))})]})})})]})]})})}),(0,t.jsx)(o.Col,{numColSpan:1,children:(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(h.Title,{children:"Top Virtual Keys"}),(0,t.jsx)(rt.default,{topKeys:(console.log("debugTags",{spendData:b}),x={},b.results.forEach(e=>{let{breakdown:t}=e,{entities:a}=t;console.log("debugTags",{entities:a});let n=Object.keys(a).reduce((e,t)=>{let{api_key_breakdown:n}=a[t];return Object.keys(n).forEach(a=>{let r={tag:t,usage:n[a].metrics.spend};e[a]?e[a].push(r):e[a]=[r]}),e},{});console.log("debugTags",{tagDictionary:n}),Object.entries(e.breakdown.api_keys||{}).forEach(([e,t])=>{x[e]||(x[e]={metrics:{spend:0,prompt_tokens:0,completion_tokens:0,total_tokens:0,api_requests:0,successful_requests:0,failed_requests:0,cache_read_input_tokens:0,cache_creation_input_tokens:0},metadata:{key_alias:t.metadata.key_alias,team_id:t.metadata.team_id||null,tags:n[e]||[]}},console.log("debugTags",{keySpend:x})),x[e].metrics.spend+=t.metrics.spend,x[e].metrics.prompt_tokens+=t.metrics.prompt_tokens,x[e].metrics.completion_tokens+=t.metrics.completion_tokens,x[e].metrics.total_tokens+=t.metrics.total_tokens,x[e].metrics.api_requests+=t.metrics.api_requests,x[e].metrics.successful_requests+=t.metrics.successful_requests,x[e].metrics.failed_requests+=t.metrics.failed_requests,x[e].metrics.cache_read_input_tokens+=t.metrics.cache_read_input_tokens||0,x[e].metrics.cache_creation_input_tokens+=t.metrics.cache_creation_input_tokens||0})}),Object.entries(x).map(([e,t])=>({api_key:e,key_alias:t.metadata.key_alias||"-",tags:t.metadata.tags||"-",spend:t.metrics.spend})).sort((e,t)=>t.spend-e.spend).slice(0,$)),teams:null,showTags:"tag"===a,topKeysLimit:$,setTopKeysLimit:D})]})}),(0,t.jsx)(o.Col,{numColSpan:1,children:(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(h.Title,{children:_("agent"===a?"usagePage.entityUsage.topAgents":"usagePage.entityUsage.topModels")}),(0,t.jsx)(rn,{topModels:(v={},b.results.forEach(e=>{Object.entries(e.breakdown.models||{}).forEach(([e,t])=>{v[e]||(v[e]={spend:0,requests:0,successful_requests:0,failed_requests:0,tokens:0});try{v[e].spend+=t.metrics.spend}catch(a){console.error(`Error adding spend for ${e}: ${a}, got metrics: ${JSON.stringify(t)}`)}v[e].requests+=t.metrics.api_requests,v[e].successful_requests+=t.metrics.successful_requests,v[e].failed_requests+=t.metrics.failed_requests,v[e].tokens+=t.metrics.total_tokens})}),Object.entries(v).map(([e,t])=>({key:e,...t})).sort((e,t)=>t.spend-e.spend).slice(0,E)),topModelsLimit:E,setTopModelsLimit:q})]})}),(0,t.jsx)(o.Col,{numColSpan:2,children:(0,t.jsx)(l.Card,{children:(0,t.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,t.jsx)(h.Title,{children:"Provider Usage"}),(0,t.jsxs)(i.Grid,{numItems:2,children:[(0,t.jsx)(o.Col,{numColSpan:1,children:(0,t.jsx)(n8.DonutChart,{className:"mt-4 h-40",data:O(),index:"provider",category:"spend",valueFormatter:e=>`\xa5${(0,L.formatNumberWithCommas)(e)}`,colors:["cyan","blue","indigo","violet","purple"]})}),(0,t.jsx)(o.Col,{numColSpan:1,children:(0,t.jsxs)(n$.Table,{children:[(0,t.jsx)(nD.TableHead,{children:(0,t.jsxs)(nE.TableRow,{children:[(0,t.jsx)(nq.TableHeaderCell,{children:"Provider"}),(0,t.jsx)(nq.TableHeaderCell,{children:"Spend"}),(0,t.jsx)(nq.TableHeaderCell,{className:"text-green-600",children:"Successful"}),(0,t.jsx)(nq.TableHeaderCell,{className:"text-red-600",children:"Failed"}),(0,t.jsx)(nq.TableHeaderCell,{children:"Tokens"})]})}),(0,t.jsx)(nP.TableBody,{children:O().map(e=>(0,t.jsxs)(nE.TableRow,{children:[(0,t.jsx)(nO.TableCell,{children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[e.provider&&(0,t.jsx)("img",{src:(0,re.getProviderLogoAndName)(e.provider).logo,alt:`${e.provider} logo`,className:"w-4 h-4",onError:t=>{let a=t.target,n=a.parentElement;if(n){let t=document.createElement("div");t.className="w-4 h-4 rounded-full bg-gray-200 flex items-center justify-center text-xs",t.textContent=e.provider?.charAt(0)||"-",n.replaceChild(t,a)}}}),(0,t.jsx)("span",{children:e.provider})]})}),(0,t.jsxs)(nO.TableCell,{children:["¥",(0,L.formatNumberWithCommas)(e.spend,2)]}),(0,t.jsx)(nO.TableCell,{className:"text-green-600",children:e.successful_requests.toLocaleString()}),(0,t.jsx)(nO.TableCell,{className:"text-red-600",children:e.failed_requests.toLocaleString()}),(0,t.jsx)(nO.TableCell,{children:e.tokens.toLocaleString()})]},e.provider))})]})})]})]})})})]})}),(0,t.jsx)(m.TabPanel,{children:(0,t.jsx)(Z,{modelMetrics:N,hidePromptCachingMetrics:"agent"===a})}),(0,t.jsx)(m.TabPanel,{children:(0,t.jsx)(Z,{modelMetrics:S,hidePromptCachingMetrics:"agent"===a})}),(0,t.jsx)(m.TabPanel,{children:(0,t.jsx)(n9,{userSpendData:b})})]})]})]})};var rs=e.i(299251),rl=e.i(153702);let ro={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.4 800.9c.2-.3.5-.6.7-.9C920.6 722.1 960 621.7 960 512s-39.4-210.1-104.8-288c-.2-.3-.5-.5-.7-.8-1.1-1.3-2.1-2.5-3.2-3.7-.4-.5-.8-.9-1.2-1.4l-4.1-4.7-.1-.1c-1.5-1.7-3.1-3.4-4.6-5.1l-.1-.1c-3.2-3.4-6.4-6.8-9.7-10.1l-.1-.1-4.8-4.8-.3-.3c-1.5-1.5-3-2.9-4.5-4.3-.5-.5-1-1-1.6-1.5-1-1-2-1.9-3-2.8-.3-.3-.7-.6-1-1C736.4 109.2 629.5 64 512 64s-224.4 45.2-304.3 119.2c-.3.3-.7.6-1 1-1 .9-2 1.9-3 2.9-.5.5-1 1-1.6 1.5-1.5 1.4-3 2.9-4.5 4.3l-.3.3-4.8 4.8-.1.1c-3.3 3.3-6.5 6.7-9.7 10.1l-.1.1c-1.6 1.7-3.1 3.4-4.6 5.1l-.1.1c-1.4 1.5-2.8 3.1-4.1 4.7-.4.5-.8.9-1.2 1.4-1.1 1.2-2.1 2.5-3.2 3.7-.2.3-.5.5-.7.8C103.4 301.9 64 402.3 64 512s39.4 210.1 104.8 288c.2.3.5.6.7.9l3.1 3.7c.4.5.8.9 1.2 1.4l4.1 4.7c0 .1.1.1.1.2 1.5 1.7 3 3.4 4.6 5l.1.1c3.2 3.4 6.4 6.8 9.6 10.1l.1.1c1.6 1.6 3.1 3.2 4.7 4.7l.3.3c3.3 3.3 6.7 6.5 10.1 9.6 80.1 74 187 119.2 304.5 119.2s224.4-45.2 304.3-119.2a300 300 0 0010-9.6l.3-.3c1.6-1.6 3.2-3.1 4.7-4.7l.1-.1c3.3-3.3 6.5-6.7 9.6-10.1l.1-.1c1.5-1.7 3.1-3.3 4.6-5 0-.1.1-.1.1-.2 1.4-1.5 2.8-3.1 4.1-4.7.4-.5.8-.9 1.2-1.4a99 99 0 003.3-3.7zm4.1-142.6c-13.8 32.6-32 62.8-54.2 90.2a444.07 444.07 0 00-81.5-55.9c11.6-46.9 18.8-98.4 20.7-152.6H887c-3 40.9-12.6 80.6-28.5 118.3zM887 484H743.5c-1.9-54.2-9.1-105.7-20.7-152.6 29.3-15.6 56.6-34.4 81.5-55.9A373.86 373.86 0 01887 484zM658.3 165.5c39.7 16.8 75.8 40 107.6 69.2a394.72 394.72 0 01-59.4 41.8c-15.7-45-35.8-84.1-59.2-115.4 3.7 1.4 7.4 2.9 11 4.4zm-90.6 700.6c-9.2 7.2-18.4 12.7-27.7 16.4V697a389.1 389.1 0 01115.7 26.2c-8.3 24.6-17.9 47.3-29 67.8-17.4 32.4-37.8 58.3-59 75.1zm59-633.1c11 20.6 20.7 43.3 29 67.8A389.1 389.1 0 01540 327V141.6c9.2 3.7 18.5 9.1 27.7 16.4 21.2 16.7 41.6 42.6 59 75zM540 640.9V540h147.5c-1.6 44.2-7.1 87.1-16.3 127.8l-.3 1.2A445.02 445.02 0 00540 640.9zm0-156.9V383.1c45.8-2.8 89.8-12.5 130.9-28.1l.3 1.2c9.2 40.7 14.7 83.5 16.3 127.8H540zm-56 56v100.9c-45.8 2.8-89.8 12.5-130.9 28.1l-.3-1.2c-9.2-40.7-14.7-83.5-16.3-127.8H484zm-147.5-56c1.6-44.2 7.1-87.1 16.3-127.8l.3-1.2c41.1 15.6 85 25.3 130.9 28.1V484H336.5zM484 697v185.4c-9.2-3.7-18.5-9.1-27.7-16.4-21.2-16.7-41.7-42.7-59.1-75.1-11-20.6-20.7-43.3-29-67.8 37.2-14.6 75.9-23.3 115.8-26.1zm0-370a389.1 389.1 0 01-115.7-26.2c8.3-24.6 17.9-47.3 29-67.8 17.4-32.4 37.8-58.4 59.1-75.1 9.2-7.2 18.4-12.7 27.7-16.4V327zM365.7 165.5c3.7-1.5 7.3-3 11-4.4-23.4 31.3-43.5 70.4-59.2 115.4-21-12-40.9-26-59.4-41.8 31.8-29.2 67.9-52.4 107.6-69.2zM165.5 365.7c13.8-32.6 32-62.8 54.2-90.2 24.9 21.5 52.2 40.3 81.5 55.9-11.6 46.9-18.8 98.4-20.7 152.6H137c3-40.9 12.6-80.6 28.5-118.3zM137 540h143.5c1.9 54.2 9.1 105.7 20.7 152.6a444.07 444.07 0 00-81.5 55.9A373.86 373.86 0 01137 540zm228.7 318.5c-39.7-16.8-75.8-40-107.6-69.2 18.5-15.8 38.4-29.7 59.4-41.8 15.7 45 35.8 84.1 59.2 115.4-3.7-1.4-7.4-2.9-11-4.4zm292.6 0c-3.7 1.5-7.3 3-11 4.4 23.4-31.3 43.5-70.4 59.2-115.4 21 12 40.9 26 59.4 41.8a373.81 373.81 0 01-107.6 69.2z"}}]},name:"global",theme:"outlined"};var ri=j.forwardRef(function(e,t){return j.createElement(eq.default,(0,eD.default)({},e,{ref:t,icon:ro}))}),rc=e.i(777579),ru=e.i(983561);let rd={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M922.9 701.9H327.4l29.9-60.9 496.8-.9c16.8 0 31.2-12 34.2-28.6l68.8-385.1c1.8-10.1-.9-20.5-7.5-28.4a34.99 34.99 0 00-26.6-12.5l-632-2.1-5.4-25.4c-3.4-16.2-18-28-34.6-28H96.5a35.3 35.3 0 100 70.6h125.9L246 312.8l58.1 281.3-74.8 122.1a34.96 34.96 0 00-3 36.8c6 11.9 18.1 19.4 31.5 19.4h62.8a102.43 102.43 0 00-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7h161.1a102.43 102.43 0 00-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7H923c19.4 0 35.3-15.8 35.3-35.3a35.42 35.42 0 00-35.4-35.2zM305.7 253l575.8 1.9-56.4 315.8-452.3.8L305.7 253zm96.9 612.7c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 01-31.6 31.6zm325.1 0c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 01-31.6 31.6z"}}]},name:"shopping-cart",theme:"outlined"};var rm=j.forwardRef(function(e,t){return j.createElement(eq.default,(0,eD.default)({},e,{ref:t,icon:rd}))}),rf=e.i(232164),rp=e.i(645526),rh=e.i(906579);let rg=({value:e,onChange:a,isAdmin:n,title:r="Usage View",description:s="Select the usage data you want to view","data-id":l})=>{let{t:o}=(0,w.useLanguage)(),i=[{value:"global",label:o("usagePage.globalUsage"),showForAdmin:o("usagePage.globalUsageAdmin"),showForNonAdmin:o("usagePage.globalUsageNonAdmin"),description:o("usagePage.globalUsageDescAdmin"),descriptionForAdmin:o("usagePage.globalUsageDescAdmin"),descriptionForNonAdmin:o("usagePage.globalUsageDescNonAdmin"),icon:(0,t.jsx)(ri,{style:{fontSize:"16px"}})},{value:"organization",label:o("usagePage.organizationUsage"),showForAdmin:o("usagePage.organizationUsageAdmin"),showForNonAdmin:o("usagePage.organizationUsageNonAdmin"),description:o("usagePage.organizationUsageDescAdmin"),descriptionForAdmin:o("usagePage.organizationUsageDescAdmin"),descriptionForNonAdmin:o("usagePage.organizationUsageDescNonAdmin"),icon:(0,t.jsx)(rs.BankOutlined,{style:{fontSize:"16px"}})},{value:"team",label:o("usagePage.teamUsage"),description:o("usagePage.teamUsageDesc"),icon:(0,t.jsx)(rp.TeamOutlined,{style:{fontSize:"16px"}})},{value:"customer",label:o("usagePage.customerUsage"),description:o("usagePage.customerUsageDesc"),icon:(0,t.jsx)(rm,{style:{fontSize:"16px"}}),adminOnly:!0},{value:"tag",label:o("usagePage.tagUsage"),description:o("usagePage.tagUsageDesc"),icon:(0,t.jsx)(rf.TagsOutlined,{style:{fontSize:"16px"}}),adminOnly:!0},{value:"agent",label:o("usagePage.agentUsage"),description:o("usagePage.agentUsageDesc"),icon:(0,t.jsx)(ru.RobotOutlined,{style:{fontSize:"16px"}}),adminOnly:!0},{value:"user-agent-activity",label:o("usagePage.userAgentActivity"),description:o("usagePage.userAgentActivityDesc"),icon:(0,t.jsx)(rc.LineChartOutlined,{style:{fontSize:"16px"}}),adminOnly:!0}].filter(e=>!e.adminOnly||!!n).map(e=>{let t=e.label,a=e.description;return e.showForAdmin&&e.showForNonAdmin&&(t=n?e.showForAdmin:e.showForNonAdmin),e.descriptionForAdmin&&e.descriptionForNonAdmin&&(a=n?e.descriptionForAdmin:e.descriptionForNonAdmin),{value:e.value,label:t,description:a,icon:e.icon,badgeText:e.badgeText}});return(0,t.jsx)("div",{className:"w-full","data-id":l,children:(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-start gap-4",children:[(0,t.jsxs)("div",{className:"flex items-stretch gap-2 min-w-0",children:[(0,t.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,t.jsx)(rl.BarChartOutlined,{style:{fontSize:"32px"}})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-0.5 leading-tight",children:o("usagePage.usageView")}),(0,t.jsx)("p",{className:"text-xs text-gray-600 leading-tight",children:o("usagePage.selectUsageView")})]})]}),(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)(v.Select,{value:e,onChange:a,className:"w-54 sm:w-64 md:w-72",size:"large",options:i.map(e=>({value:e.value,label:e.label})),optionRender:e=>{let a=i.find(t=>t.value===e.value);return a?(0,t.jsxs)("div",{className:"flex items-center gap-2 py-1",children:[(0,t.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:a.icon}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a.label}),(0,t.jsx)("div",{className:"text-xs text-gray-600 mt-0.5",children:a.description})]}),a.badgeText&&(0,t.jsx)("div",{className:"items-center",children:(0,t.jsx)(rh.Badge,{color:"blue",count:a.badgeText})})]}):e.label},labelRender:e=>{let a=i.find(t=>t.value===e.value);return a?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{children:a.icon}),(0,t.jsx)("span",{className:"text-sm",children:a.label})]}):e.label}})})]})})};var rx=e.i(311451),rv=e.i(918789);let{TextArea:rb}=rx.Input,ry={get_usage_data:"📊",get_team_usage_data:"👥",get_tag_usage_data:"🏷️"},rk=({step:e})=>{let a=ry[e.tool_name]||"🔧",n=e.arguments,r=n.start_date&&n.end_date?`${n.start_date} → ${n.end_date}`:"",s=n.team_ids||n.tags||n.user_id||"";return(0,t.jsxs)("div",{className:"flex items-start gap-2 px-3 py-2 rounded-lg bg-gray-100 border border-gray-200 text-xs",children:[(0,t.jsx)("span",{className:"flex-shrink-0 mt-0.5",children:"running"===e.status?(0,t.jsx)(ea.Spin,{size:"small"}):"error"===e.status?(0,t.jsx)("span",{className:"text-red-500",children:"✗"}):(0,t.jsx)("span",{className:"text-green-600",children:"✓"})}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsxs)("div",{className:"font-medium text-gray-700",children:[a," ",e.tool_label]}),r&&(0,t.jsx)("div",{className:"text-gray-500 mt-0.5",children:r}),s&&(0,t.jsxs)("div",{className:"text-gray-500 mt-0.5",children:["Filter: ",s]}),"error"===e.status&&e.error&&(0,t.jsx)("div",{className:"text-red-600 mt-0.5",children:e.error})]})]})},r_=({content:e})=>(0,t.jsx)(rv.default,{components:{p:({children:e})=>(0,t.jsx)("p",{className:"mb-2 last:mb-0",children:e}),strong:({children:e})=>(0,t.jsx)("strong",{className:"font-semibold",children:e}),ul:({children:e})=>(0,t.jsx)("ul",{className:"list-disc pl-4 mb-2 space-y-0.5",children:e}),ol:({children:e})=>(0,t.jsx)("ol",{className:"list-decimal pl-4 mb-2 space-y-0.5",children:e}),li:({children:e})=>(0,t.jsx)("li",{children:e}),h1:({children:e})=>(0,t.jsx)("h4",{className:"font-semibold text-sm mt-2 mb-1",children:e}),h2:({children:e})=>(0,t.jsx)("h4",{className:"font-semibold text-sm mt-2 mb-1",children:e}),h3:({children:e})=>(0,t.jsx)("h4",{className:"font-semibold text-sm mt-2 mb-1",children:e}),code:({children:e,className:a})=>a?.includes("language-")?(0,t.jsx)("pre",{className:"bg-gray-100 rounded p-2 my-1 overflow-x-auto text-xs",children:(0,t.jsx)("code",{children:e})}):(0,t.jsx)("code",{className:"px-1 py-0.5 rounded bg-gray-100 text-xs font-mono",children:e}),table:({children:e})=>(0,t.jsx)("div",{className:"overflow-x-auto my-2",children:(0,t.jsx)("table",{className:"text-xs border-collapse w-full",children:e})}),th:({children:e})=>(0,t.jsx)("th",{className:"border border-gray-200 px-2 py-1 bg-gray-50 font-medium text-left",children:e}),td:({children:e})=>(0,t.jsx)("td",{className:"border border-gray-200 px-2 py-1",children:e})},children:e}),rj=({open:e,onClose:a,accessToken:n})=>{let{t:r}=(0,w.useLanguage)(),[s,l]=(0,j.useState)([]),[o,i]=(0,j.useState)(""),[c,u]=(0,j.useState)(!1),[d,m]=(0,j.useState)(void 0),[f,p]=(0,j.useState)([]),[h,g]=(0,j.useState)(!1),[x,b]=(0,j.useState)(""),[y,k]=(0,j.useState)(null),[_,N]=(0,j.useState)([]),S=(0,j.useRef)(null),T=(0,j.useRef)(null);(0,j.useEffect)(()=>{e&&0===f.length&&M()},[e]),(0,j.useEffect)(()=>{"function"==typeof S.current?.scrollIntoView&&S.current.scrollIntoView({behavior:"smooth"})},[s,x,_,y]);let M=async()=>{if(n){g(!0);try{let e=await (0,C.modelHubCall)(n);if(e?.data?.length>0){let t=e.data.map(e=>e.model_group).sort();p(t)}}catch(e){console.error("Failed to load models:",e)}finally{g(!1)}}},$=async()=>{if(!n||!o.trim()||c)return;let e=[...s,{role:"user",content:o.trim()}];l(e),i(""),u(!0),b(""),k(null),N([]);let t=new AbortController;T.current=t;let a="",r=[];try{await (0,C.usageAiChatStream)(n,e.slice(-20).map(e=>({role:e.role,content:e.content})),d||"",e=>{k(null),a+=e,b(a)},()=>{k(null),N([]),l(e=>[...e,{role:"assistant",content:a,toolCalls:r.length>0?[...r]:void 0}]),b("")},e=>{k(null),N([]),l(t=>[...t,{role:"assistant",content:`Error: ${e}`}]),b("")},e=>{k(e)},e=>{let t=r.findIndex(t=>t.tool_name===e.tool_name);t>=0?r[t]={...e}:r.push({...e}),N([...r])},t.signal)}catch(a){if(a?.name==="AbortError"||t.signal.aborted)return;let e=a?.message||"Failed to get response. Please try again.";l(t=>[...t,{role:"assistant",content:`Error: ${e}`}]),b("")}finally{u(!1),T.current=null}};return(0,t.jsxs)("div",{"data-testid":"usage-ai-chat-panel",className:`fixed top-0 right-0 h-full bg-white border-l border-gray-200 shadow-2xl z-50 flex flex-col transition-transform duration-300 ease-in-out ${e?"translate-x-0":"translate-x-full"}`,style:{width:420},children:[(0,t.jsxs)("div",{className:"px-5 pt-5 pb-3 border-b border-gray-100 flex-shrink-0",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-blue-600",viewBox:"0 0 16 16",fill:"currentColor",children:(0,t.jsx)("path",{d:"M8 1l1.5 3.5L13 6l-3.5 1.5L8 11 6.5 7.5 3 6l3.5-1.5L8 1zm4 7l.75 1.75L14.5 10.5l-1.75.75L12 13l-.75-1.75L9.5 10.5l1.75-.75L12 8zM4 9l.75 1.75L6.5 11.5l-1.75.75L4 14l-.75-1.75L1.5 11.5l1.75-.75L4 9z"})}),(0,t.jsx)("h3",{className:"text-base font-semibold text-gray-900",children:r("usagePage.aiChatPanel.title")})]}),(0,t.jsx)("button",{onClick:()=>{T.current&&T.current.abort(),a()},className:"text-gray-400 hover:text-gray-600 transition-colors p-1 rounded-md hover:bg-gray-100",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:r("usagePage.aiChatPanel.subtitle")})]}),(0,t.jsx)("div",{className:"px-5 py-3 border-b border-gray-100 flex-shrink-0",children:(0,t.jsx)(v.Select,{placeholder:r("usagePage.aiChatPanel.selectModel"),value:d,onChange:e=>m(e),loading:h,showSearch:!0,allowClear:!0,size:"small",className:"w-full",options:f.map(e=>({label:e,value:e})),filterOption:(e,t)=>(t?.label??"").toLowerCase().includes(e.toLowerCase())})}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50",children:[0===s.length&&!x&&!c&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[(0,t.jsx)("svg",{className:"w-8 h-8 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),(0,t.jsx)("p",{className:"text-sm font-medium",children:r("usagePage.aiChatPanel.emptyState")}),(0,t.jsx)("p",{className:"text-xs mt-1",children:r("usagePage.aiChatPanel.askQuestionPlaceholder")})]}),s.map((e,a)=>(0,t.jsx)("div",{children:"user"===e.role?(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)("div",{className:"max-w-[88%] rounded-xl px-3.5 py-2 text-sm leading-relaxed bg-blue-600 text-white",children:e.content})}):(0,t.jsxs)("div",{className:"space-y-2",children:[e.toolCalls&&e.toolCalls.length>0&&(0,t.jsx)("div",{className:"space-y-1.5",children:e.toolCalls.map((e,a)=>(0,t.jsx)(rk,{step:e},a))}),(0,t.jsx)("div",{className:"max-w-[95%] rounded-xl px-3.5 py-2.5 text-sm leading-relaxed bg-white border border-gray-200 text-gray-800",children:(0,t.jsx)(r_,{content:e.content})})]})},a)),c&&_.length>0&&(0,t.jsx)("div",{className:"space-y-1.5",children:_.map((e,a)=>(0,t.jsx)(rk,{step:e},a))}),c&&!x&&(0,t.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 text-xs text-gray-500",children:[(0,t.jsx)(ea.Spin,{size:"small"}),(0,t.jsx)("span",{className:"italic",children:y||"Thinking..."})]}),x&&(0,t.jsx)("div",{className:"max-w-[95%] rounded-xl px-3.5 py-2.5 text-sm leading-relaxed bg-white border border-gray-200 text-gray-800",children:(0,t.jsx)(r_,{content:x})}),(0,t.jsx)("div",{ref:S})]}),(0,t.jsxs)("div",{className:"px-4 py-3 border-t border-gray-200 bg-white flex-shrink-0",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(rb,{value:o,onChange:e=>i(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),$())},placeholder:r("usagePage.aiChatPanel.askQuestion"),autoSize:{minRows:1,maxRows:3},className:"flex-1",disabled:c}),(0,t.jsx)(el.Button,{type:"primary",onClick:$,disabled:!o.trim()||c,loading:c,children:r("usagePage.aiChatPanel.send")})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,t.jsx)("button",{onClick:()=>{l([]),b(""),N([]),k(null)},className:"text-xs text-gray-400 hover:text-gray-600 transition-colors",disabled:0===s.length,children:r("usagePage.aiChatPanel.clearChat")}),(0,t.jsx)("span",{className:"text-xs text-gray-400",children:"Enter to send"})]})]})]})};e.s(["default",0,({teams:e,organizations:S})=>{let $,{accessToken:F,userRole:R,userId:Y,premiumUser:H}=(0,M.default)(),{t:W}=(0,w.useLanguage)(),[V,z]=(0,j.useState)({results:[],metadata:{}}),[B,U]=(0,j.useState)(!1),[G,X]=(0,j.useState)(!1),J=(0,j.useMemo)(()=>(0,_.default)().startOf("week").startOf("day").toDate(),[]),ee=(0,j.useMemo)(()=>(0,_.default)().endOf("week").endOf("day").toDate(),[]),[et,ea]=(0,j.useState)({from:J,to:ee}),[en,es]=(0,j.useState)([]),{data:el=[]}=(()=>{let{accessToken:e,userRole:t}=(0,M.default)();return(0,N.useQuery)({queryKey:E.list({}),queryFn:async()=>await (0,C.allEndUsersCall)(e),enabled:!!e&&T.all_admin_roles.includes(t)})})(),{data:eo}=D(),{data:ei}=(0,q.useCurrentUser)(),ec=ei?.max_budget??ei?.litellm_budget_table?.max_budget??null;console.log(`currentUser: ${JSON.stringify(ei)}`),console.log(`currentUser max budget: ${ec}`);let eu=T.all_admin_roles.includes(R||""),[ed,em]=(0,j.useState)(""),[ef,ep]=(0,k.useDebouncedState)("",{wait:300}),{data:eh,fetchNextPage:eg,hasNextPage:ex,isFetchingNextPage:ev,isLoading:eb}=((e=I,t)=>{let{accessToken:a,userRole:n}=(0,M.default)();return(0,P.useInfiniteQuery)({queryKey:O.list({filters:{pageSize:e,...t&&{searchEmail:t}}}),queryFn:async({pageParam:n})=>await (0,C.userListCall)(a,null,n,e,t||null),initialPageParam:1,getNextPageParam:e=>{if(e.page<e.total_pages)return e.page+1},enabled:!!a&&T.all_admin_roles.includes(n)})})(50,ef||void 0),ek=(0,j.useMemo)(()=>{if(!eh?.pages)return[];let e=new Set,t=[];for(let a of eh.pages)for(let n of a.users)e.has(n.user_id)||(e.add(n.user_id),t.push({value:n.user_id,label:n.user_alias?`${n.user_alias} (${n.user_id})`:n.user_email?`${n.user_email} (${n.user_id})`:n.user_id}));return t},[eh]),[e_,ej]=(0,j.useState)(eu?null:Y||null),[ew,eC]=(0,j.useState)("groups"),[eN,eS]=(0,j.useState)(null),[eT,eM]=(0,j.useState)(!1),[e$,eD]=(0,j.useState)(!1),[eE,eq]=(0,j.useState)(!1),[eP,eO]=(0,j.useState)("global"),[eI,eL]=(0,j.useState)("week"),[eA,eF]=(0,j.useState)(!0),[eR,eY]=(0,j.useState)(5),[eH,eW]=(0,j.useState)(5),eV=e=>`${e.getFullYear()}年${e.getMonth()+1}月${e.getDate()}日`,ez=async()=>{F&&es(Object.values(await (0,C.tagListCall)(F)).map(e=>({label:e.name,value:e.name})))};(0,j.useEffect)(()=>{ez()},[F]),(0,j.useEffect)(()=>{!eu&&Y&&ej(Y)},[eu,Y]),(0,j.useEffect)(()=>{(async()=>{if(!eu||!e_||!F||!R)return eS(null);try{let e=await (0,C.userInfoCall)(F,e_,R,!1,null,null,!0),t=e?.user_info??e,a=t?.max_budget??t?.litellm_budget_table?.max_budget??null;eS(a)}catch(e){console.error("Failed to fetch selected user budget:",e),eS(null)}})()},[eu,e_,F,R]);let eB=V.metadata?.total_spend||0,eU=(0,j.useCallback)(async()=>{if(!F||!et.from||!et.to)return;let e=eu?e_:Y||null;U(!0);let t=new Date(et.from),a=new Date(et.to);try{try{let n=await (0,C.userDailyActivityAggregatedCall)(F,t,a,e);z(n);return}catch(e){}let n=await (0,C.userDailyActivityCall)(F,t,a,1,e);if(n.metadata.total_pages<=1)return void z(n);let r=[...n.results],s={...n.metadata};for(let l=2;l<=n.metadata.total_pages;l++){let n=await (0,C.userDailyActivityCall)(F,t,a,l,e);r.push(...n.results),n.metadata&&(s.total_spend+=n.metadata.total_spend||0,s.total_api_requests+=n.metadata.total_api_requests||0,s.total_successful_requests+=n.metadata.total_successful_requests||0,s.total_failed_requests+=n.metadata.total_failed_requests||0,s.total_tokens+=n.metadata.total_tokens||0)}z({results:r,metadata:s})}catch(e){console.error("Error fetching user spend data:",e)}finally{U(!1),X(!1)}},[F,et.from,et.to,e_,eu,Y]),eK=(0,j.useCallback)((e,t)=>{X(!0),U(!0),ea(e),t&&eL(t)},[]);(0,j.useEffect)(()=>{if(!et.from||!et.to)return;let e=setTimeout(()=>{eU()},50);return()=>clearTimeout(e)},[eU]);let eG=Q(V,"models",e),eZ=Q(V,"api_keys",e),eQ=Q(V,"mcp_servers",e);return(0,t.jsxs)("div",{style:{width:"100%"},className:"p-8 md:p-10 relative bg-slate-50/40",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-4 mb-5",children:[(0,t.jsx)("div",{className:"flex-1 min-w-[280px]",children:(0,t.jsx)(rg,{value:eP,onChange:e=>eO(e),isAdmin:eu})}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-end gap-3 w-full xl:w-auto",children:[(0,t.jsx)(nk,{value:et,onValueChange:eK,className:"w-full sm:w-auto"}),"global"===eP&&(0,t.jsx)("div",{className:"flex items-center gap-2 ml-auto",children:(0,t.jsx)(A.Button,{onClick:()=>eD(!0),className:"shadow-sm",icon:()=>(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),children:"导出数据"})})]})]}),(0,t.jsxs)("div",{className:"flex-1",children:["global"===eP&&(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(u.TabGroup,{children:[(0,t.jsx)("div",{className:"flex justify-between items-center",children:(0,t.jsxs)(d.TabList,{variant:"solid",className:"mt-1 bg-gray-100/90 rounded-xl p-1 shadow-inner",children:[(0,t.jsx)(c.Tab,{children:"花费"}),(0,t.jsx)(c.Tab,{children:W("usagePage.modelActivity")}),(0,t.jsx)(c.Tab,{children:W("usagePage.keyActivity")}),(0,t.jsx)(c.Tab,{children:"MCP 服务器活动"}),(0,t.jsx)(c.Tab,{children:W("usagePage.endpointActivity")})]})}),(0,t.jsxs)(f.TabPanels,{children:[(0,t.jsx)(m.TabPanel,{children:(0,t.jsxs)(i.Grid,{numItems:2,className:"gap-6 w-full",children:[(0,t.jsxs)(o.Col,{numColSpan:2,children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mt-2 mb-3 rounded-2xl border border-gray-200/80 bg-white px-5 py-4 shadow-sm",children:[(0,t.jsxs)(p.Text,{className:"text-slate-600 text-[16px] md:text-[18px] font-semibold tracking-tight",children:["时间范围"," ",et.from&&et.to&&(0,t.jsxs)(t.Fragment,{children:[eV(et.from)," - ",eV(et.to)]})]}),eu&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(r.UserOutlined,{style:{fontSize:"14px",color:"#6b7280"}}),(0,t.jsx)(v.Select,{showSearch:!0,allowClear:!0,style:{width:300},placeholder:W("usagePage.allUsersPlaceholder"),value:e_,onChange:e=>ej(e??null),filterOption:!1,onSearch:e=>{em(e),ep(e)},searchValue:ed,onPopupScroll:e=>{let t=e.currentTarget;(t.scrollTop+t.clientHeight)/t.scrollHeight>=.8&&ex&&!ev&&eg()},loading:eb,notFoundContent:eb?(0,t.jsx)(n.LoadingOutlined,{spin:!0}):W("usagePage.noUsersFound"),options:ek,popupRender:e=>(0,t.jsxs)(t.Fragment,{children:[e,ev&&(0,t.jsx)("div",{style:{textAlign:"center",padding:8},children:(0,t.jsx)(n.LoadingOutlined,{spin:!0})})]})}),e_&&(0,t.jsx)("span",{className:"text-xs text-gray-500",children:W("usagePage.filteringByUser")})]})]}),(0,t.jsx)(nA.default,{userSpend:eB,selectedTeam:null,userMaxBudget:eu&&e_?eN:ec})]}),(0,t.jsx)(o.Col,{numColSpan:2,children:(0,t.jsxs)(l.Card,{className:"rounded-2xl border border-slate-200/80 shadow-sm bg-white",children:[(0,t.jsx)(h.Title,{className:"text-slate-800 text-[16px] md:text-[18px] tracking-tight",children:W("usagePage.usageMetrics")}),(0,t.jsxs)(i.Grid,{numItems:5,className:"gap-5 mt-5",children:[(0,t.jsxs)(l.Card,{className:"rounded-2xl border border-slate-200/80 shadow-sm bg-slate-50/60",children:[(0,t.jsx)(h.Title,{className:"text-slate-700 text-sm",children:W("usagePage.totalRequests")}),(0,t.jsx)(p.Text,{className:"text-[24px] md:text-[26px] font-semibold mt-2 text-slate-700 leading-tight",children:V.metadata?.total_api_requests?.toLocaleString()||0})]}),(0,t.jsxs)(l.Card,{className:"rounded-2xl border border-slate-200/80 shadow-sm bg-slate-50/60",children:[(0,t.jsx)(h.Title,{className:"text-slate-700 text-sm",children:W("usagePage.successfulRequests")}),(0,t.jsx)(p.Text,{className:"text-[24px] md:text-[26px] font-semibold mt-2 text-emerald-600 leading-tight",children:V.metadata?.total_successful_requests?.toLocaleString()||0})]}),(0,t.jsxs)(l.Card,{className:"rounded-2xl border border-slate-200/80 shadow-sm bg-slate-50/60",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(h.Title,{className:"text-slate-700 text-sm",children:W("usagePage.failedRequests")}),(0,t.jsx)(b.Tooltip,{title:W("usagePage.failedRequestsTooltip"),children:(0,t.jsx)(a.InfoCircleOutlined,{className:"text-gray-400 hover:text-gray-600"})})]}),(0,t.jsx)(p.Text,{className:"text-[24px] md:text-[26px] font-semibold mt-2 text-rose-600 leading-tight",children:V.metadata?.total_failed_requests?.toLocaleString()||0})]}),(0,t.jsxs)(l.Card,{className:"rounded-2xl border border-slate-200/80 shadow-sm bg-slate-50/60",children:[(0,t.jsx)(h.Title,{className:"text-slate-700 text-sm",children:W("usagePage.totalTokens")}),(0,t.jsx)(p.Text,{className:"text-[24px] md:text-[26px] font-semibold mt-2 text-slate-600 leading-tight",children:V.metadata?.total_tokens?.toLocaleString()||0})]}),(0,t.jsxs)(l.Card,{className:"rounded-2xl border border-slate-200/80 shadow-sm bg-slate-50/60",children:[(0,t.jsx)(h.Title,{className:"text-slate-700 text-sm",children:W("usagePage.averageCostPerRequest")}),(0,t.jsxs)(p.Text,{className:"text-[24px] md:text-[26px] font-semibold mt-2 text-slate-600 leading-tight",children:["¥",(0,L.formatNumberWithCommas)((eB||0)/(V.metadata?.total_api_requests||1),4)]})]})]})]})}),(0,t.jsx)(o.Col,{numColSpan:2,children:(0,t.jsxs)(l.Card,{className:"rounded-2xl border border-slate-200/80 shadow-sm bg-white",children:[(0,t.jsx)(h.Title,{className:"text-slate-800 text-[16px] md:text-[18px] tracking-tight",children:W("usagePage.dailySpend")}),B?(0,t.jsx)(nj,{isDateChanging:G}):(0,t.jsx)(s.BarChart,{data:[...V.results].sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()),index:"date",categories:["metrics.spend"],colors:["cyan"],valueFormatter:K,yAxisWidth:100,showLegend:!1,customTooltip:({payload:e,active:a})=>{if(!a||!e?.[0])return null;let n=e[0].payload;return(0,t.jsxs)("div",{className:"bg-white p-4 shadow-lg rounded-lg border",children:[(0,t.jsx)("p",{className:"font-bold",children:n.date}),(0,t.jsxs)("p",{className:"text-cyan-500",children:[W("usagePage.spend"),": ¥",(0,L.formatNumberWithCommas)(n.metrics.spend,2)]}),(0,t.jsxs)("p",{className:"text-gray-600",children:[W("usagePage.requests"),": ",n.metrics.api_requests]}),(0,t.jsxs)("p",{className:"text-gray-600",children:[W("usagePage.successful"),": ",n.metrics.successful_requests]}),(0,t.jsxs)("p",{className:"text-gray-600",children:[W("usagePage.failed"),": ",n.metrics.failed_requests]}),(0,t.jsxs)("p",{className:"text-gray-600",children:[W("usagePage.tokens"),": ",n.metrics.total_tokens]})]})}})]})}),(0,t.jsx)(o.Col,{numColSpan:1,children:(0,t.jsxs)(l.Card,{className:"h-full",children:[(0,t.jsx)(h.Title,{children:W("usagePage.topVirtualKeys")}),(0,t.jsx)(rt.default,{topKeys:((e=5)=>{let t={};return V.results.forEach(e=>{Object.entries(e.breakdown.api_keys||{}).forEach(([e,a])=>{t[e]||(t[e]={metrics:{spend:0,prompt_tokens:0,completion_tokens:0,total_tokens:0,api_requests:0,successful_requests:0,failed_requests:0,cache_read_input_tokens:0,cache_creation_input_tokens:0},metadata:{key_alias:a.metadata.key_alias,team_id:null,tags:a.metadata.tags||[]}}),t[e].metrics.spend+=a.metrics.spend,t[e].metrics.prompt_tokens+=a.metrics.prompt_tokens,t[e].metrics.completion_tokens+=a.metrics.completion_tokens,t[e].metrics.total_tokens+=a.metrics.total_tokens,t[e].metrics.api_requests+=a.metrics.api_requests,t[e].metrics.successful_requests+=a.metrics.successful_requests,t[e].metrics.failed_requests+=a.metrics.failed_requests,t[e].metrics.cache_read_input_tokens+=a.metrics.cache_read_input_tokens||0,t[e].metrics.cache_creation_input_tokens+=a.metrics.cache_creation_input_tokens||0})}),console.log("debugTags",{keySpend:t,userSpendData:V}),Object.entries(t).map(([e,t])=>({api_key:e,key_alias:t.metadata.key_alias||"-",tags:t.metadata.tags||[],spend:t.metrics.spend})).sort((e,t)=>t.spend-e.spend).slice(0,e)})(eR),teams:null,topKeysLimit:eR,setTopKeysLimit:eY})]})}),(0,t.jsx)(o.Col,{numColSpan:1,children:(0,t.jsxs)(l.Card,{className:"h-full",children:[(0,t.jsx)(h.Title,{children:"groups"===ew?W("usagePage.topPublicModelNames"):W("usagePage.topLitellmModels")}),(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)(x.Segmented,{options:[{label:"5",value:5},{label:"10",value:10},{label:"25",value:25},{label:"50",value:50}],value:eH,onChange:e=>eW(e)}),(0,t.jsxs)("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[(0,t.jsx)("button",{className:`px-3 py-1 text-sm rounded-md transition-colors ${"groups"===ew?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:text-gray-900"}`,onClick:()=>eC("groups"),children:W("usagePage.publicModelName")}),(0,t.jsx)("button",{className:`px-3 py-1 text-sm rounded-md transition-colors ${"individual"===ew?"bg-white shadow-sm text-gray-900":"text-gray-600 hover:text-gray-900"}`,onClick:()=>eC("individual"),children:W("usagePage.litellmModelName")})]})]}),B?(0,t.jsx)(nj,{isDateChanging:G}):(0,t.jsx)("div",{className:"relative max-h-[600px] overflow-y-auto",children:($="groups"===ew?((e=5)=>{let t={};return V.results.forEach(e=>{Object.entries(e.breakdown.model_groups||{}).forEach(([e,a])=>{t[e]||(t[e]={metrics:{spend:0,prompt_tokens:0,completion_tokens:0,total_tokens:0,api_requests:0,successful_requests:0,failed_requests:0,cache_read_input_tokens:0,cache_creation_input_tokens:0},metadata:{},api_key_breakdown:{}}),t[e].metrics.spend+=a.metrics.spend,t[e].metrics.prompt_tokens+=a.metrics.prompt_tokens,t[e].metrics.completion_tokens+=a.metrics.completion_tokens,t[e].metrics.total_tokens+=a.metrics.total_tokens,t[e].metrics.api_requests+=a.metrics.api_requests,t[e].metrics.successful_requests+=a.metrics.successful_requests||0,t[e].metrics.failed_requests+=a.metrics.failed_requests||0,t[e].metrics.cache_read_input_tokens+=a.metrics.cache_read_input_tokens||0,t[e].metrics.cache_creation_input_tokens+=a.metrics.cache_creation_input_tokens||0})}),Object.entries(t).map(([e,t])=>({key:e,spend:t.metrics.spend,requests:t.metrics.api_requests,successful_requests:t.metrics.successful_requests,failed_requests:t.metrics.failed_requests,tokens:t.metrics.total_tokens})).sort((e,t)=>t.spend-e.spend).slice(0,e)})(eH):((e=5)=>{let t={};return V.results.forEach(e=>{Object.entries(e.breakdown.models||{}).forEach(([e,a])=>{t[e]||(t[e]={metrics:{spend:0,prompt_tokens:0,completion_tokens:0,total_tokens:0,api_requests:0,successful_requests:0,failed_requests:0,cache_read_input_tokens:0,cache_creation_input_tokens:0},metadata:{},api_key_breakdown:{}}),t[e].metrics.spend+=a.metrics.spend,t[e].metrics.prompt_tokens+=a.metrics.prompt_tokens,t[e].metrics.completion_tokens+=a.metrics.completion_tokens,t[e].metrics.total_tokens+=a.metrics.total_tokens,t[e].metrics.api_requests+=a.metrics.api_requests,t[e].metrics.successful_requests+=a.metrics.successful_requests||0,t[e].metrics.failed_requests+=a.metrics.failed_requests||0,t[e].metrics.cache_read_input_tokens+=a.metrics.cache_read_input_tokens||0,t[e].metrics.cache_creation_input_tokens+=a.metrics.cache_creation_input_tokens||0})}),Object.entries(t).map(([e,t])=>({key:e,spend:t.metrics.spend,requests:t.metrics.api_requests,successful_requests:t.metrics.successful_requests,failed_requests:t.metrics.failed_requests,tokens:t.metrics.total_tokens})).sort((e,t)=>t.spend-e.spend).slice(0,e)})(eH),(0,t.jsx)(s.BarChart,{className:"mt-4",style:{height:52*Math.min($.length,eH)},data:$,index:"key",categories:["spend"],colors:["cyan"],valueFormatter:K,layout:"vertical",yAxisWidth:200,showLegend:!1,customTooltip:({payload:e,active:a})=>{if(!a||!e?.[0])return null;let n=e[0].payload;return(0,t.jsxs)("div",{className:"bg-white p-4 shadow-lg rounded-lg border",children:[(0,t.jsx)("p",{className:"font-bold",children:n.key}),(0,t.jsxs)("p",{className:"text-cyan-500",children:[W("usagePage.spend"),": ¥",(0,L.formatNumberWithCommas)(n.spend,2)]}),(0,t.jsxs)("p",{className:"text-gray-600",children:[W("usagePage.totalRequests"),": ",n.requests.toLocaleString()]}),(0,t.jsxs)("p",{className:"text-green-600",children:[W("usagePage.successful"),": ",n.successful_requests.toLocaleString()]}),(0,t.jsxs)("p",{className:"text-red-600",children:[W("usagePage.failed"),": ",n.failed_requests.toLocaleString()]}),(0,t.jsxs)("p",{className:"text-gray-600",children:[W("usagePage.tokens"),": ",n.tokens.toLocaleString()]})]})}}))})]})})]})}),(0,t.jsx)(m.TabPanel,{children:(0,t.jsx)(Z,{modelMetrics:eG})}),(0,t.jsx)(m.TabPanel,{children:(0,t.jsx)(Z,{modelMetrics:eZ})}),(0,t.jsx)(m.TabPanel,{children:(0,t.jsx)(Z,{modelMetrics:eQ})}),(0,t.jsx)(m.TabPanel,{children:(0,t.jsx)(n9,{userSpendData:V})})]})]})}),"organization"===eP&&(0,t.jsx)(rr,{accessToken:F,entityType:"organization",userID:Y,userRole:R,dateValue:et,entityList:S?.map(e=>({label:e.organization_alias,value:e.organization_id}))||null,premiumUser:H}),"team"===eP&&(0,t.jsx)(rr,{accessToken:F,entityType:"team",userID:Y,userRole:R,entityList:e?.map(e=>({label:e.team_alias,value:e.team_id}))||null,premiumUser:H,dateValue:et}),"customer"===eP&&(0,t.jsx)(rr,{accessToken:F,entityType:"customer",userID:Y,userRole:R,entityList:el?.map(e=>({label:e.alias||e.user_id,value:e.user_id}))||null,premiumUser:H,dateValue:et}),"tag"===eP&&(0,t.jsxs)(t.Fragment,{children:[eA&&(0,t.jsx)(g.Alert,{banner:!0,type:"info",message:W("usagePage.reusableCredentialsTracked"),description:(0,t.jsx)(y.Typography.Text,{children:W("usagePage.reusableCredentialsDescription")}),closable:!0,onClose:()=>eF(!1),className:"mb-5"}),(0,t.jsx)(rr,{accessToken:F,entityType:"tag",userID:Y,userRole:R,entityList:en,premiumUser:H,dateValue:et})]}),"agent"===eP&&(0,t.jsx)(rr,{accessToken:F,entityType:"agent",userID:Y,userRole:R,entityList:eo?.agents?.map(e=>({label:e.agent_name,value:e.agent_id}))||null,premiumUser:H,dateValue:et}),"user-agent-activity"===eP&&(0,t.jsx)(nL,{accessToken:F,userRole:R,dateValue:et})]})]}),(0,t.jsx)(er,{isOpen:eT,onClose:()=>eM(!1),accessToken:F}),(0,t.jsx)(ey,{isOpen:e$,onClose:()=>eD(!1),entityType:"team",spendData:{results:V.results,metadata:V.metadata},dateRange:et,timeRangeType:eI,selectedFilters:[],customTitle:W("usagePage.exportUsageData")}),(0,t.jsx)(rj,{open:eE,onClose:()=>eq(!1),accessToken:F})]})}],797305)}]);