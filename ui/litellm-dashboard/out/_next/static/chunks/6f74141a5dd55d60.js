(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,207082,e=>{"use strict";var l=e.i(619273),t=e.i(266027),s=e.i(243652),a=e.i(764205),r=e.i(135214);let i=(0,s.createQueryKeys)("keys"),n=async(e,l,t,s={})=>{try{let r=(0,a.getProxyBaseUrl)(),i=new URLSearchParams(Object.entries({team_id:s.teamID,organization_id:s.organizationID,key_alias:s.selectedKeyAlias,key_hash:s.keyHash,user_id:s.userID,page:l,size:t,sort_by:s.sortBy,sort_order:s.sortOrder,expand:s.expand,status:s.status,return_full_object:"true",include_team_keys:"true",include_created_by_keys:"true"}).filter(([,e])=>null!=e).map(([e,l])=>[e,String(l)])),n=`${r?`${r}/key/list`:"/key/list"}?${i}`,o=await fetch(n,{method:"GET",headers:{[(0,a.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"}});if(!o.ok){let e=await o.json(),l=(0,a.deriveErrorMessage)(e);throw(0,a.handleError)(l),Error(l)}let c=await o.json();return console.log("/key/list API Response:",c),c}catch(e){throw console.error("Failed to list keys:",e),e}},o=(0,s.createQueryKeys)("deletedKeys");e.s(["keyKeys",0,i,"useDeletedKeys",0,(e,s,a={})=>{let{accessToken:i}=(0,r.default)();return(0,t.useQuery)({queryKey:o.list({page:e,limit:s,...a}),queryFn:async()=>await n(i,e,s,{...a,status:"deleted"}),enabled:!!i,staleTime:3e4,placeholderData:l.keepPreviousData})},"useKeys",0,(e,s,a={})=>{let{accessToken:o}=(0,r.default)();return(0,t.useQuery)({queryKey:i.list({page:e,limit:s,...a}),queryFn:async()=>await n(o,e,s,a),enabled:!!o,staleTime:3e4,placeholderData:l.keepPreviousData})}])},392110,939510,e=>{"use strict";var l=e.i(843476),t=e.i(271645),s=e.i(199133),a=e.i(592968),r=e.i(312361),i=e.i(790848),n=e.i(827252),o=e.i(779241),c=e.i(111110);let{Option:d}=s.Select;e.s(["default",0,({form:e,autoRotationEnabled:u,onAutoRotationChange:m,rotationInterval:p,onRotationIntervalChange:h,isCreateMode:g=!1})=>{let{t:x}=(0,c.useLanguage)(),y=p&&!["7d","30d","90d","180d","365d"].includes(p),[_,f]=(0,t.useState)(y),[j,b]=(0,t.useState)(y?p:""),[v,k]=(0,t.useState)(e?.getFieldValue?.("duration")||"");return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700",children:x("keyDetail.keyLifecycle.title")}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("label",{className:"text-sm font-medium text-gray-700 flex items-center space-x-1",children:[(0,l.jsx)("span",{children:x("keyDetail.keyLifecycle.expireKey")}),(0,l.jsx)(a.Tooltip,{title:x(g?"keyDetail.keyLifecycle.expireKeyTooltipCreate":"keyDetail.keyLifecycle.expireKeyTooltipEdit"),children:(0,l.jsx)(n.InfoCircleOutlined,{className:"text-gray-400 cursor-help text-xs"})})]}),(0,l.jsx)(o.TextInput,{name:"duration",placeholder:x(g?"keyDetail.keyLifecycle.expirePlaceholderCreate":"keyDetail.keyLifecycle.expirePlaceholderEdit"),className:"w-full",value:v,onValueChange:l=>{k(l),e&&"function"==typeof e.setFieldValue?e.setFieldValue("duration",l):e&&"function"==typeof e.setFieldsValue&&e.setFieldsValue({duration:l})}})]})]}),(0,l.jsx)(r.Divider,{}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700",children:x("keyDetail.keyLifecycle.rotationSettings")}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("label",{className:"text-sm font-medium text-gray-700 flex items-center space-x-1",children:[(0,l.jsx)("span",{children:x("keyDetail.keyLifecycle.enableRotation")}),(0,l.jsx)(a.Tooltip,{title:x("keyDetail.keyLifecycle.enableRotationTooltip"),children:(0,l.jsx)(n.InfoCircleOutlined,{className:"text-gray-400 cursor-help text-xs"})})]}),(0,l.jsx)(i.Switch,{checked:u,onChange:m,size:"default",className:u?"":"bg-gray-400"})]}),u&&(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("label",{className:"text-sm font-medium text-gray-700 flex items-center space-x-1",children:[(0,l.jsx)("span",{children:x("keyDetail.keyLifecycle.rotationInterval")}),(0,l.jsx)(a.Tooltip,{title:x("keyDetail.keyLifecycle.rotationIntervalTooltip"),children:(0,l.jsx)(n.InfoCircleOutlined,{className:"text-gray-400 cursor-help text-xs"})})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)(s.Select,{value:_?"custom":p,onChange:e=>{"custom"===e?f(!0):(f(!1),b(""),h(e))},className:"w-full",placeholder:x("keyDetail.keyLifecycle.selectInterval"),children:[(0,l.jsx)(d,{value:"7d",children:x("keyDetail.keyLifecycle.7days")}),(0,l.jsx)(d,{value:"30d",children:x("keyDetail.keyLifecycle.30days")}),(0,l.jsx)(d,{value:"90d",children:x("keyDetail.keyLifecycle.90days")}),(0,l.jsx)(d,{value:"180d",children:x("keyDetail.keyLifecycle.180days")}),(0,l.jsx)(d,{value:"365d",children:x("keyDetail.keyLifecycle.365days")}),(0,l.jsx)(d,{value:"custom",children:x("keyDetail.keyLifecycle.customInterval")})]}),_&&(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)(o.TextInput,{value:j,onChange:e=>{let l=e.target.value;b(l),h(l)},placeholder:x("keyDetail.keyLifecycle.customIntervalPlaceholder")}),(0,l.jsx)("div",{className:"text-xs text-gray-500",children:x("keyDetail.keyLifecycle.supportedFormats")})]})]})]})]}),u&&(0,l.jsx)("div",{className:"bg-blue-50 p-3 rounded-md text-sm text-blue-700",children:x("keyDetail.keyLifecycle.rotationNotice")})]})]})}],392110);var u=e.i(808613);let{Option:m}=s.Select;e.s(["default",0,({type:e,name:t,showDetailedDescriptions:r=!0,className:i="",initialValue:o=null,form:c,onChange:d})=>{let p=e.toUpperCase(),h=e.toLowerCase(),g=`Select 'guaranteed_throughput' to prevent overallocating ${p} limit when the key belongs to a Team with specific ${p} limits.`;return(0,l.jsx)(u.Form.Item,{label:(0,l.jsxs)("span",{children:[p," Rate Limit Type"," ",(0,l.jsx)(a.Tooltip,{title:g,children:(0,l.jsx)(n.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:t,initialValue:o,className:i,children:(0,l.jsx)(s.Select,{defaultValue:r?"default":void 0,placeholder:"Select rate limit type",style:{width:"100%"},optionLabelProp:r?"label":void 0,onChange:e=>{c&&c.setFieldValue(t,e),d&&d(e)},children:r?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(m,{value:"best_effort_throughput",label:"Default",children:(0,l.jsxs)("div",{style:{padding:"4px 0"},children:[(0,l.jsx)("div",{style:{fontWeight:500},children:"Default"}),(0,l.jsxs)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:["Best effort throughput - no error if we're overallocating ",h," (Team/Key Limits checked at runtime)."]})]})}),(0,l.jsx)(m,{value:"guaranteed_throughput",label:"Guaranteed throughput",children:(0,l.jsxs)("div",{style:{padding:"4px 0"},children:[(0,l.jsx)("div",{style:{fontWeight:500},children:"Guaranteed throughput"}),(0,l.jsxs)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:["Guaranteed throughput - raise an error if we're overallocating ",h," (also checks model-specific limits)"]})]})}),(0,l.jsx)(m,{value:"dynamic",label:"Dynamic",children:(0,l.jsxs)("div",{style:{padding:"4px 0"},children:[(0,l.jsx)("div",{style:{fontWeight:500},children:"Dynamic"}),(0,l.jsxs)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:["If the key has a set ",p," (e.g. 2 ",p,") and there are no 429 errors, it can dynamically exceed the limit when the model being called is not erroring."]})]})})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(m,{value:"best_effort_throughput",children:"Best effort throughput"}),(0,l.jsx)(m,{value:"guaranteed_throughput",children:"Guaranteed throughput"}),(0,l.jsx)(m,{value:"dynamic",children:"Dynamic"})]})})})}],939510)},460285,750419,e=>{"use strict";var l=e.i(843476),t=e.i(271645),s=e.i(404206),a=e.i(723731),r=e.i(653824),i=e.i(881073),n=e.i(197647),o=e.i(764205),c=e.i(158392),d=e.i(419470),u=e.i(689020);let m=(0,t.forwardRef)(({accessToken:e,value:m,onChange:p,modelData:h},g)=>{let[x,y]=(0,t.useState)({routerSettings:{},selectedStrategy:null,enableTagFiltering:!1}),[_,f]=(0,t.useState)([]),[j,b]=(0,t.useState)([]),[v,k]=(0,t.useState)([]),[w,S]=(0,t.useState)([]),[N,C]=(0,t.useState)({}),[T,I]=(0,t.useState)({}),F=(0,t.useRef)(!1),D=(0,t.useRef)(null);(0,t.useEffect)(()=>{let e=m?.router_settings?JSON.stringify({routing_strategy:m.router_settings.routing_strategy,fallbacks:m.router_settings.fallbacks,enable_tag_filtering:m.router_settings.enable_tag_filtering}):null;if(F.current&&e===D.current){F.current=!1;return}if(F.current&&e!==D.current&&(F.current=!1),e!==D.current)if(D.current=e,m?.router_settings){let e=m.router_settings,{fallbacks:l,...t}=e;y({routerSettings:t,selectedStrategy:e.routing_strategy||null,enableTagFiltering:e.enable_tag_filtering??!1});let s=e.fallbacks||[];f(s),b(s&&0!==s.length?s.map((e,l)=>{let[t,s]=Object.entries(e)[0];return{id:(l+1).toString(),primaryModel:t||null,fallbackModels:s||[]}}):[{id:"1",primaryModel:null,fallbackModels:[]}])}else y({routerSettings:{},selectedStrategy:null,enableTagFiltering:!1}),f([]),b([{id:"1",primaryModel:null,fallbackModels:[]}])},[m]),(0,t.useEffect)(()=>{e&&(0,o.getRouterSettingsCall)(e).then(e=>{if(e.fields){let l={};e.fields.forEach(e=>{l[e.field_name]={ui_field_name:e.ui_field_name,field_description:e.field_description,options:e.options,link:e.link}}),C(l);let t=e.fields.find(e=>"routing_strategy"===e.field_name);t?.options&&S(t.options),e.routing_strategy_descriptions&&I(e.routing_strategy_descriptions)}})},[e]),(0,t.useEffect)(()=>{e&&(async()=>{try{let l=await (0,u.fetchAvailableModels)(e);k(l)}catch(e){console.error("Error fetching model info for fallbacks:",e)}})()},[e]);let L=()=>{let e=new Set(["allowed_fails","cooldown_time","num_retries","timeout","retry_after"]),l=new Set(["model_group_alias","retry_policy"]),t=Object.fromEntries(Object.entries({...x.routerSettings,enable_tag_filtering:x.enableTagFiltering,routing_strategy:x.selectedStrategy,fallbacks:_.length>0?_:null}).map(([t,s])=>{if("routing_strategy_args"!==t&&"routing_strategy"!==t&&"enable_tag_filtering"!==t&&"fallbacks"!==t){let a=document.querySelector(`input[name="${t}"]`);if(a&&void 0!==a.value&&""!==a.value){let r=((t,s,a)=>{if(null==s)return a;let r=String(s).trim();if(""===r||"null"===r.toLowerCase())return null;if(e.has(t)){let e=Number(r);return Number.isNaN(e)?a:e}if(l.has(t)){if(""===r)return null;try{return JSON.parse(r)}catch{return a}}return"true"===r.toLowerCase()||"false"!==r.toLowerCase()&&r})(t,a.value,s);return[t,r]}}else if("routing_strategy"===t)return[t,x.selectedStrategy];else if("enable_tag_filtering"===t)return[t,x.enableTagFiltering];else if("fallbacks"===t)return[t,_.length>0?_:null];else if("routing_strategy_args"===t&&"latency-based-routing"===x.selectedStrategy){let e=document.querySelector('input[name="lowest_latency_buffer"]'),l=document.querySelector('input[name="ttl"]'),t={};return e?.value&&(t.lowest_latency_buffer=Number(e.value)),l?.value&&(t.ttl=Number(l.value)),["routing_strategy_args",Object.keys(t).length>0?t:null]}return[t,s]}).filter(e=>null!=e)),s=(e,l=!1)=>null==e||"object"==typeof e&&!Array.isArray(e)&&0===Object.keys(e).length||l&&("number"!=typeof e||Number.isNaN(e))?null:e;return{routing_strategy:s(t.routing_strategy),allowed_fails:s(t.allowed_fails,!0),cooldown_time:s(t.cooldown_time,!0),num_retries:s(t.num_retries,!0),timeout:s(t.timeout,!0),retry_after:s(t.retry_after,!0),fallbacks:_.length>0?_:null,context_window_fallbacks:s(t.context_window_fallbacks),retry_policy:s(t.retry_policy),model_group_alias:s(t.model_group_alias),enable_tag_filtering:x.enableTagFiltering,routing_strategy_args:s(t.routing_strategy_args)}};(0,t.useEffect)(()=>{if(!p)return;let e=setTimeout(()=>{F.current=!0,p({router_settings:L()})},100);return()=>clearTimeout(e)},[x,_]);let A=Array.from(new Set(v.map(e=>e.model_group))).sort();return((0,t.useImperativeHandle)(g,()=>({getValue:()=>({router_settings:L()})})),e)?(0,l.jsx)("div",{className:"w-full",children:(0,l.jsxs)(r.TabGroup,{className:"w-full",children:[(0,l.jsxs)(i.TabList,{variant:"line",defaultValue:"1",className:"px-8 pt-4",children:[(0,l.jsx)(n.Tab,{value:"1",children:"Loadbalancing"}),(0,l.jsx)(n.Tab,{value:"2",children:"Fallbacks"})]}),(0,l.jsxs)(a.TabPanels,{className:"px-8 py-6",children:[(0,l.jsx)(s.TabPanel,{children:(0,l.jsx)(c.default,{value:x,onChange:y,routerFieldsMetadata:N,availableRoutingStrategies:w,routingStrategyDescriptions:T})}),(0,l.jsx)(s.TabPanel,{children:(0,l.jsx)(d.FallbackSelectionForm,{groups:j,onGroupsChange:e=>{b(e),f(e.filter(e=>e.primaryModel&&e.fallbackModels.length>0).map(e=>({[e.primaryModel]:e.fallbackModels})))},availableModels:A,maxGroups:5})})]})]})}):null});m.displayName="RouterSettingsAccordion",e.s(["default",0,m],460285),e.s(["simplifyKeyGenerateError",0,e=>{let l;if(!(l=!e||"object"!=typeof e||e instanceof Error?String(e):JSON.stringify(e)).includes("/key/generate")&&!l.includes("KeyManagementRoutes.KEY_GENERATE"))return`Error creating the key: ${e}`;let t=l;try{if(!e||"object"!=typeof e||e instanceof Error){let e=l.match(/\{[\s\S]*\}/);if(e){let l=JSON.parse(e[0]),s=l?.error||l;s?.message&&(t=s.message)}}else{let l=e?.error||e;l?.message&&(t=l.message)}}catch(e){}return l.includes("team_member_permission_error")||t.includes("Team member does not have permissions")?"Team member does not have permission to generate key for this team. Ask your proxy admin to configure the team member permission settings.":`Error creating the key: ${e}`}],750419)},364769,e=>{"use strict";var l=e.i(843476),t=e.i(271645),s=e.i(237016),a=e.i(464571),r=e.i(998573);e.s(["default",0,({apiKey:e})=>{let[i,n]=(0,t.useState)(!1);return(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"mb-2",children:["Please save this secret key somewhere safe and accessible. For security reasons,"," ",(0,l.jsx)("b",{children:"you will not be able to view it again"})," through your Silinex account. If you lose this secret key, you will need to generate a new one."]}),(0,l.jsx)("p",{className:"text-sm text-gray-600 mt-3 mb-1",children:"Virtual Key:"}),(0,l.jsx)("div",{style:{background:"#f8f8f8",padding:"10px",borderRadius:"5px",marginBottom:"10px"},children:(0,l.jsx)("pre",{style:{wordWrap:"break-word",whiteSpace:"normal",margin:0},children:e})}),(0,l.jsx)(s.CopyToClipboard,{text:e,onCopy:()=>{n(!0),r.message.success("Key copied to clipboard"),setTimeout(()=>n(!1),2e3)},children:(0,l.jsx)(a.Button,{type:"primary",style:{marginTop:12},children:i?"Copied!":"Copy Virtual Key"})})]})}])},702597,e=>{"use strict";var l=e.i(843476),t=e.i(111110),s=e.i(207082),a=e.i(135214),r=e.i(500330),i=e.i(827252),n=e.i(912598),o=e.i(677667),c=e.i(130643),d=e.i(898667),u=e.i(994388),m=e.i(309426),p=e.i(350967),h=e.i(599724),g=e.i(779241),x=e.i(629569),y=e.i(464571),_=e.i(808613),f=e.i(311451),j=e.i(212931),b=e.i(91739),v=e.i(199133),k=e.i(790848),w=e.i(592968),S=e.i(374009),N=e.i(271645),C=e.i(708347),T=e.i(552130),I=e.i(557662),F=e.i(860585),D=e.i(82946),L=e.i(392110),A=e.i(533882),O=e.i(844565),P=e.i(651904),V=e.i(939510),M=e.i(460285),E=e.i(9314),R=e.i(663435),B=e.i(371455),K=e.i(355619),$=e.i(75921),G=e.i(390605),U=e.i(727749),q=e.i(764205),H=e.i(435451),J=e.i(916940),z=e.i(750419),W=e.i(364769);let{Option:Q}=v.Select,Y=async(e,l,t,s)=>{try{if(null===e||null===l)return[];if(null!==t){let a=(await (0,q.modelAvailableCall)(t,e,l,!0,s,!0)).data.map(e=>e.id);return console.log("available_model_names:",a),a}return[]}catch(e){return console.error("Error fetching user models:",e),[]}},X=async(e,l,t,s)=>{try{if(null===e||null===l)return;if(null!==t){let a=(await (0,q.modelAvailableCall)(t,e,l)).data.map(e=>e.id);console.log("available_model_names:",a),s(a)}}catch(e){console.error("Error fetching user models:",e)}};e.s(["default",0,({team:e,teams:Z,data:ee,addKey:el})=>{let{accessToken:et,userId:es,userRole:ea,premiumUser:er}=(0,a.default)(),{t:ei}=(0,t.useLanguage)(),en=(0,n.useQueryClient)(),[eo]=_.Form.useForm(),[ec,ed]=(0,N.useState)(!1),[eu,em]=(0,N.useState)(null),[ep,eh]=(0,N.useState)(null),[eg,ex]=(0,N.useState)([]),[ey,e_]=(0,N.useState)([]),[ef,ej]=(0,N.useState)("you"),[eb,ev]=(0,N.useState)((e=>{let l=[];if(console.log("data:",JSON.stringify(e)),e)for(let t of e)t.metadata&&t.metadata.tags&&l.push(...t.metadata.tags);let t=Array.from(new Set(l)).map(e=>({value:e,label:e}));return console.log("uniqueTags:",t),t})(ee)),[ek,ew]=(0,N.useState)([]),[eS,eN]=(0,N.useState)([]),[eC,eT]=(0,N.useState)([]),[eI,eF]=(0,N.useState)([]),[eD,eL]=(0,N.useState)(e),[eA,eO]=(0,N.useState)(!1),[eP,eV]=(0,N.useState)(null),[eM,eE]=(0,N.useState)({}),[eR,eB]=(0,N.useState)([]),[eK,e$]=(0,N.useState)(!1),[eG,eU]=(0,N.useState)([]),[eq,eH]=(0,N.useState)([]),[eJ,ez]=(0,N.useState)("llm_api"),[eW,eQ]=(0,N.useState)({}),[eY,eX]=(0,N.useState)(!1),[eZ,e0]=(0,N.useState)("30d"),[e4,e1]=(0,N.useState)(null),[e2,e3]=(0,N.useState)(0),e5=()=>{ed(!1),eo.resetFields(),eF([]),eH([]),ez("llm_api"),eQ({}),eX(!1),e0("30d"),e1(null),e3(e=>e+1)},e6=()=>{ed(!1),em(null),eL(null),eo.resetFields(),eF([]),eH([]),ez("llm_api"),eQ({}),eX(!1),e0("30d"),e1(null),e3(e=>e+1)};(0,N.useEffect)(()=>{es&&ea&&et&&X(es,ea,et,ex)},[et,es,ea]),(0,N.useEffect)(()=>{let e=async()=>{try{let e=(await (0,q.getPoliciesList)(et)).policies.map(e=>e.policy_name);eN(e)}catch(e){console.error("Failed to fetch policies:",e)}},l=async()=>{try{let e=await (0,q.getPromptsList)(et);eT(e.prompts.map(e=>e.prompt_id))}catch(e){console.error("Failed to fetch prompts:",e)}};(async()=>{try{let e=(await (0,q.getGuardrailsList)(et)).guardrails.map(e=>e.guardrail_name);ew(e)}catch(e){console.error("Failed to fetch guardrails:",e)}})(),e(),l()},[et]),(0,N.useEffect)(()=>{(async()=>{try{if(et){let e=sessionStorage.getItem("possibleUserRoles");if(e)eE(JSON.parse(e));else{let e=await (0,q.getPossibleUserRoles)(et);sessionStorage.setItem("possibleUserRoles",JSON.stringify(e)),eE(e)}}}catch(e){console.error("Error fetching possible user roles:",e)}})()},[et]);let e7=ey.includes("no-default-models")&&!eD,e8=async e=>{try{let l=e?.key_alias??"",t=e?.team_id??null;if((ee?.filter(e=>e.team_id===t).map(e=>e.key_alias)??[]).includes(l))throw Error(`Key alias ${l} already exists for team with ID ${t}, please provide another key alias`);U.default.info("Making API Call"),ed(!0),"you"===ef&&(e.user_id=es);let a={};try{a=JSON.parse(e.metadata||"{}")}catch(e){console.error("Error parsing metadata:",e)}if(eI.length>0&&(a={...a,logging:eI.filter(e=>e.callback_name)}),eq.length>0){let e=(0,I.mapDisplayToInternalNames)(eq);a={...a,litellm_disabled_callbacks:e}}if(eY&&(e.auto_rotate=!0,e.rotation_interval=eZ),e.duration&&""!==e.duration.trim()||(e.duration=null),e.metadata=JSON.stringify(a),e.allowed_vector_store_ids&&e.allowed_vector_store_ids.length>0&&(e.object_permission={vector_stores:e.allowed_vector_store_ids},delete e.allowed_vector_store_ids),e.allowed_mcp_servers_and_groups&&(e.allowed_mcp_servers_and_groups.servers?.length>0||e.allowed_mcp_servers_and_groups.accessGroups?.length>0)){e.object_permission||(e.object_permission={});let{servers:l,accessGroups:t}=e.allowed_mcp_servers_and_groups;l&&l.length>0&&(e.object_permission.mcp_servers=l),t&&t.length>0&&(e.object_permission.mcp_access_groups=t),delete e.allowed_mcp_servers_and_groups}let r=e.mcp_tool_permissions||{};if(Object.keys(r).length>0&&(e.object_permission||(e.object_permission={}),e.object_permission.mcp_tool_permissions=r),delete e.mcp_tool_permissions,e.allowed_mcp_access_groups&&e.allowed_mcp_access_groups.length>0&&(e.object_permission||(e.object_permission={}),e.object_permission.mcp_access_groups=e.allowed_mcp_access_groups,delete e.allowed_mcp_access_groups),e.allowed_agents_and_groups&&(e.allowed_agents_and_groups.agents?.length>0||e.allowed_agents_and_groups.accessGroups?.length>0)){e.object_permission||(e.object_permission={});let{agents:l,accessGroups:t}=e.allowed_agents_and_groups;l&&l.length>0&&(e.object_permission.agents=l),t&&t.length>0&&(e.object_permission.agent_access_groups=t),delete e.allowed_agents_and_groups}Object.keys(eW).length>0&&(e.aliases=JSON.stringify(eW)),e4?.router_settings&&Object.values(e4.router_settings).some(e=>null!=e&&""!==e)&&(e.router_settings=e4.router_settings);let i=await (0,q.keyCreateCall)(et,es,e);console.log("key create Response:",i),el(i),en.invalidateQueries({queryKey:s.keyKeys.lists()}),em(i.key),eh(i.soft_budget),U.default.success("Virtual Key Created"),eo.resetFields(),localStorage.removeItem("userData"+es)}catch(l){console.log("error in create key:",l);let e=(0,z.simplifyKeyGenerateError)(l);U.default.fromBackend(e)}};(0,N.useEffect)(()=>{es&&ea&&et&&Y(es,ea,et,eD?.team_id??null).then(e=>{e_(Array.from(new Set([...eD?.models??[],...e])))}),eo.setFieldValue("models",[])},[eD,et,es,ea]);let e9=async e=>{if(!e)return void eB([]);e$(!0);try{let l=new URLSearchParams;if(l.append("user_email",e),null==et)return;let t=(await (0,q.userFilterUICall)(et,l)).map(e=>({label:`${e.user_email} (${e.user_id})`,value:e.user_id,user:e}));eB(t)}catch(e){console.error("Error fetching users:",e),U.default.fromBackend("Failed to search for users")}finally{e$(!1)}},le=(0,N.useCallback)((0,S.default)(e=>e9(e),300),[et]);return(0,l.jsxs)("div",{children:[ea&&C.rolesWithWriteAccess.includes(ea)&&(0,l.jsx)(u.Button,{className:"mx-auto",onClick:()=>ed(!0),children:"+ 创建新密钥"}),(0,l.jsx)(j.Modal,{open:ec,width:1e3,footer:null,onOk:e5,onCancel:e6,children:(0,l.jsxs)(_.Form,{form:eo,onFinish:e8,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",className:"[&_.ant-form-item]:mb-6",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)(x.Title,{className:"mb-4",children:"创建密钥"}),(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["所有者"," ",(0,l.jsx)(w.Tooltip,{title:"选择谁将拥有此API密钥",children:(0,l.jsx)(i.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),className:"mb-4",children:(0,l.jsxs)(b.Radio.Group,{onChange:e=>ej(e.target.value),value:ef,children:[(0,l.jsx)(b.Radio,{value:"you",children:"您"}),"Admin"===ea&&(0,l.jsx)(b.Radio,{value:"another_user",children:"其他用户"})]})}),"another_user"===ef&&(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["用户 ID"," ",(0,l.jsx)(w.Tooltip,{title:"将拥有此密钥并负责其使用的用户",children:(0,l.jsx)(i.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"user_id",className:"mt-4",rules:[{required:"another_user"===ef,message:`请输入您要分配密钥的用户 ID`}],children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{style:{display:"flex",marginBottom:"8px"},children:[(0,l.jsx)(v.Select,{showSearch:!0,placeholder:"输入用户名搜索用户",filterOption:!1,onSearch:e=>{le(e)},onSelect:(e,l)=>{let t;return t=l.user,void eo.setFieldsValue({user_id:t.user_id})},options:eR,loading:eK,allowClear:!0,style:{width:"100%"},notFoundContent:eK?"搜索中...":"未找到用户"}),(0,l.jsx)(y.Button,{onClick:()=>eO(!0),style:{marginLeft:"8px"},children:"创建用户"})]}),(0,l.jsx)("div",{className:"text-xs text-gray-500",children:"通过用户名搜索用户"})]})}),(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["分组"," ",(0,l.jsx)(w.Tooltip,{title:"此密钥所属的分组，决定可用模型和预算限制",children:(0,l.jsx)(i.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"team_id",initialValue:e?e.team_id:null,className:"mt-4",children:(0,l.jsx)(R.default,{teams:Z,onChange:e=>{eL(Z?.find(l=>l.team_id===e)||null)}})})]}),e7&&(0,l.jsx)("div",{className:"mb-8 p-4 bg-blue-50 border border-blue-200 rounded-md",children:(0,l.jsx)(h.Text,{className:"text-blue-800 text-sm",children:"请选择分组以继续配置您的 API 密钥。如果您没有看到任何分组，请联系您的代理管理员为您提供模型访问权限或将您添加到分组中。"})}),!e7&&(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)(x.Title,{className:"mb-4",children:"密钥详情"}),(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["密钥名称"," ",(0,l.jsx)(w.Tooltip,{title:"用于识别此密钥的描述性名称",children:(0,l.jsx)(i.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"key_alias",rules:[{required:!0,message:"请输入密钥名称"}],children:(0,l.jsx)(g.TextInput,{placeholder:""})}),(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["模型"," ",(0,l.jsx)(w.Tooltip,{title:"选择此密钥可以访问的模型。选择“所有分组模型”以授予对分组所有可用模型的访问权限",children:(0,l.jsx)(i.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"models",rules:"management"===eJ||"read_only"===eJ?[]:[{required:!0,message:"请选择模型"}],help:"management"===eJ||"read_only"===eJ?"此密钥类型禁用模型字段":void 0,className:"mt-4",children:(0,l.jsxs)(v.Select,{mode:"multiple",placeholder:"选择模型",style:{width:"100%"},disabled:"management"===eJ||"read_only"===eJ,onChange:e=>{e.includes("all-team-models")&&eo.setFieldsValue({models:["all-team-models"]})},children:[(0,l.jsx)(Q,{value:"all-team-models",children:ei("keyDetail.settings.messages.allTeamModels").replace("团队","分组")},"all-team-models"),ey.map(e=>(0,l.jsx)(Q,{value:e,children:(0,K.getModelDisplayName)(e)},e))]})}),(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["密钥类型"," ",(0,l.jsx)(w.Tooltip,{title:"选择密钥类型以确定此密钥可以访问的路由和操作",children:(0,l.jsx)(i.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"key_type",initialValue:"llm_api",className:"mt-4",children:(0,l.jsxs)(v.Select,{defaultValue:"llm_api",placeholder:"选择密钥类型",style:{width:"100%"},optionLabelProp:"label",onChange:e=>{ez(e),("management"===e||"read_only"===e)&&eo.setFieldsValue({models:[]})},children:[(0,l.jsx)(Q,{value:"default",label:"默认",children:(0,l.jsxs)("div",{style:{padding:"4px 0"},children:[(0,l.jsx)("div",{style:{fontWeight:500},children:"默认"}),(0,l.jsx)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:"可调用 AI API + 管理路由"})]})}),(0,l.jsx)(Q,{value:"llm_api",label:"AI API",children:(0,l.jsxs)("div",{style:{padding:"4px 0"},children:[(0,l.jsx)("div",{style:{fontWeight:500},children:"AI API"}),(0,l.jsx)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:"仅可调用 AI API 路由（chat/completions、embeddings 等）"})]})}),(0,l.jsx)(Q,{value:"management",label:"管理",children:(0,l.jsxs)("div",{style:{padding:"4px 0"},children:[(0,l.jsx)("div",{style:{fontWeight:500},children:"管理"}),(0,l.jsx)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:"仅可调用管理路由（用户/分组/密钥管理）"})]})})]})}),(0,l.jsx)(_.Form.Item,{className:"mt-4 mb-8",style:{marginBottom:40},label:(0,l.jsxs)("span",{children:["最大预算"," ",(0,l.jsx)(w.Tooltip,{title:"此密钥可以消费的最大金额。达到后，密钥将被阻止发起进一步请求",children:(0,l.jsx)(i.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"max_budget",help:(0,l.jsx)("div",{className:"pb-2",children:`预算不能超过分组最大预算：\xa5${e?.max_budget!==null&&e?.max_budget!==void 0?e.max_budget:"无限制"}`}),rules:[{validator:async(l,t)=>{if(t&&e&&null!==e.max_budget&&t>e.max_budget)throw Error(`预算不能超过分组最大预算：\xa5${(0,r.formatNumberWithCommas)(e.max_budget,4)}`)}}],children:(0,l.jsx)(H.default,{step:.01,precision:2,width:200,placeholder:ei("keyDetail.settings.placeholders.enterNumericalValue")})}),(0,l.jsx)(_.Form.Item,{className:"mt-4 mb-8",style:{marginBottom:40},label:(0,l.jsxs)("span",{children:["重置预算"," ",(0,l.jsx)(w.Tooltip,{title:"预算应多久重置一次。例如，设置'每天'将每 24 小时重置一次预算",children:(0,l.jsx)(i.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"budget_duration",help:(0,l.jsx)("div",{className:"pb-2",children:`分组重置预算：${e?.budget_duration!==null&&e?.budget_duration!==void 0?e.budget_duration:"无"}`}),children:(0,l.jsx)(F.default,{onChange:e=>eo.setFieldValue("budget_duration",e)})})]}),!e7&&(0,l.jsx)("div",{className:"mb-8",children:(0,l.jsxs)(o.Accordion,{className:"mt-4 mb-4",children:[(0,l.jsx)(d.AccordionHeader,{children:(0,l.jsx)(x.Title,{className:"m-0",children:"可选设置"})}),(0,l.jsxs)(c.AccordionBody,{children:[(0,l.jsx)(_.Form.Item,{className:"mt-4",label:(0,l.jsxs)("span",{children:["每分钟 Token 限制 (TPM)"," ",(0,l.jsx)(w.Tooltip,{title:"此密钥每分钟可以处理的最大 token 数量。有助于控制使用和成本",children:(0,l.jsx)(i.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"tpm_limit",help:`TPM 不能超过分组 TPM 限制：${e?.tpm_limit!==null&&e?.tpm_limit!==void 0?e?.tpm_limit:"无限制"}`,rules:[{validator:async(l,t)=>{if(t&&e&&null!==e.tpm_limit&&t>e.tpm_limit)throw Error(`TPM 限制不能超过分组 TPM 限制：${e.tpm_limit}`)}}],children:(0,l.jsx)(H.default,{step:1,width:400,placeholder:ei("keyDetail.settings.placeholders.enterNumericalValue")})}),(0,l.jsx)(V.default,{type:"tpm",name:"tpm_limit_type",className:"mt-4",initialValue:null,form:eo,showDetailedDescriptions:!0}),(0,l.jsx)(_.Form.Item,{className:"mt-4",label:(0,l.jsxs)("span",{children:["每分钟请求限制 (RPM)"," ",(0,l.jsx)(w.Tooltip,{title:"此密钥每分钟可以发起的最大 API 请求数。有助于防止滥用和管理负载",children:(0,l.jsx)(i.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"rpm_limit",help:`RPM 不能超过分组 RPM 限制：${e?.rpm_limit!==null&&e?.rpm_limit!==void 0?e?.rpm_limit:"无限制"}`,rules:[{validator:async(l,t)=>{if(t&&e&&null!==e.rpm_limit&&t>e.rpm_limit)throw Error(`RPM 限制不能超过分组 RPM 限制：${e.rpm_limit}`)}}],children:(0,l.jsx)(H.default,{step:1,width:400,placeholder:ei("keyDetail.settings.placeholders.enterNumericalValue")})}),(0,l.jsx)(V.default,{type:"rpm",name:"rpm_limit_type",className:"mt-4",initialValue:null,form:eo,showDetailedDescriptions:!0}),er&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["安全防护"," ",(0,l.jsx)(w.Tooltip,{title:"为此密钥应用安全防护以过滤内容或强制执行策略",children:(0,l.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/guardrails/quick_start",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,l.jsx)(i.InfoCircleOutlined,{style:{marginLeft:"4px"}})})})]}),name:"guardrails",className:"mt-4",help:"选择现有安全防护或输入新的",children:(0,l.jsx)(v.Select,{mode:"tags",style:{width:"100%"},placeholder:"选择或输入安全防护",options:ek.map(e=>({value:e,label:e}))})}),(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["禁用全局安全防护"," ",(0,l.jsx)(w.Tooltip,{title:"启用后，此密钥将绕过任何配置为在每个请求上运行的安全防护（全局安全防护）",children:(0,l.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/guardrails/quick_start",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,l.jsx)(i.InfoCircleOutlined,{style:{marginLeft:"4px"}})})})]}),name:"disable_global_guardrails",className:"mt-4",valuePropName:"checked",help:"为此密钥绕过全局安全防护",children:(0,l.jsx)(k.Switch,{checkedChildren:"是",unCheckedChildren:"否"})}),(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["策略"," ",(0,l.jsx)(w.Tooltip,{title:"为此密钥应用策略以控制安全防护和其他设置",children:(0,l.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/guardrails/guardrail_policies",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,l.jsx)(i.InfoCircleOutlined,{style:{marginLeft:"4px"}})})})]}),name:"policies",className:"mt-4",help:"选择现有策略或输入新的",children:(0,l.jsx)(v.Select,{mode:"tags",style:{width:"100%"},placeholder:"选择或输入策略",options:eS.map(e=>({value:e,label:e}))})}),(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["提示词"," ",(0,l.jsx)(w.Tooltip,{title:"允许此密钥使用特定的提示词模板",children:(0,l.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/prompt_management",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,l.jsx)(i.InfoCircleOutlined,{style:{marginLeft:"4px"}})})})]}),name:"prompts",className:"mt-4",help:"选择现有提示词或输入新的",children:(0,l.jsx)(v.Select,{mode:"tags",style:{width:"100%"},placeholder:ei("keyDetail.settings.placeholders.selectPrompts"),options:eC.map(e=>({value:e,label:e}))})})]}),(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["访问组"," ",(0,l.jsx)(w.Tooltip,{title:"为此密钥分配访问组。访问组控制此密钥可以使用的模型、MCP 服务器和智能体",children:(0,l.jsx)(i.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"access_group_ids",className:"mt-4",help:ei("keyDetail.settings.accessGroupsTooltip"),children:(0,l.jsx)(E.default,{placeholder:ei("keyDetail.settings.placeholders.selectAccessGroups")})}),er&&(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["允许的透传路由"," ",(0,l.jsx)(w.Tooltip,{title:"允许此密钥使用特定的透传路由",children:(0,l.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/pass_through",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,l.jsx)(i.InfoCircleOutlined,{style:{marginLeft:"4px"}})})})]}),name:"allowed_passthrough_routes",className:"mt-4",help:"选择现有透传路由或输入新的",children:(0,l.jsx)(O.default,{onChange:e=>eo.setFieldValue("allowed_passthrough_routes",e),value:eo.getFieldValue("allowed_passthrough_routes"),accessToken:et,placeholder:"选择或输入透传路由",teamId:eD?eD.team_id:null})}),(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["允许的向量库"," ",(0,l.jsx)(w.Tooltip,{title:"选择此密钥可以访问的向量库。如果未选择，密钥将可以访问所有可用的向量库",children:(0,l.jsx)(i.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"allowed_vector_store_ids",className:"mt-4",help:ei("keyDetail.settings.vectorStores"),children:(0,l.jsx)(J.default,{onChange:e=>eo.setFieldValue("allowed_vector_store_ids",e),value:eo.getFieldValue("allowed_vector_store_ids"),accessToken:et,placeholder:ei("keyDetail.settings.placeholders.selectVectorStores")})}),(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["元数据"," ",(0,l.jsx)(w.Tooltip,{title:"包含有关此密钥的附加信息的 JSON 对象。用于跟踪或自定义逻辑",children:(0,l.jsx)(i.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"metadata",className:"mt-4",children:(0,l.jsx)(f.Input.TextArea,{rows:4,placeholder:ei("keyDetail.settings.metadataLabel")})}),(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["标签"," ",(0,l.jsx)(w.Tooltip,{title:"用于跟踪消费和/或进行基于标签的路由。用于分析和过滤",children:(0,l.jsx)(i.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"tags",className:"mt-4",help:`用于跟踪消费和/或进行基于标签的路由。`,children:(0,l.jsx)(v.Select,{mode:"tags",style:{width:"100%"},placeholder:ei("keyDetail.settings.placeholders.selectTags"),tokenSeparators:[","],options:eb})}),(0,l.jsxs)(o.Accordion,{className:"mt-4 mb-4",children:[(0,l.jsx)(d.AccordionHeader,{children:(0,l.jsx)("b",{children:"MCP 设置"})}),(0,l.jsxs)(c.AccordionBody,{children:[(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["允许的 MCP 服务器"," ",(0,l.jsx)(w.Tooltip,{title:"选择此密钥可以访问的 MCP 服务器或访问组",children:(0,l.jsx)(i.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"allowed_mcp_servers_and_groups",help:ei("keyDetail.settings.mcpServers"),children:(0,l.jsx)($.default,{onChange:e=>eo.setFieldValue("allowed_mcp_servers_and_groups",e),value:eo.getFieldValue("allowed_mcp_servers_and_groups"),accessToken:et,placeholder:ei("keyDetail.settings.placeholders.selectMcpServers")})}),(0,l.jsx)(_.Form.Item,{name:"mcp_tool_permissions",initialValue:{},hidden:!0,children:(0,l.jsx)(f.Input,{type:"hidden"})}),(0,l.jsx)(_.Form.Item,{noStyle:!0,shouldUpdate:(e,l)=>e.allowed_mcp_servers_and_groups!==l.allowed_mcp_servers_and_groups||e.mcp_tool_permissions!==l.mcp_tool_permissions,children:()=>(0,l.jsx)("div",{className:"mt-6",children:(0,l.jsx)(G.default,{accessToken:et,selectedServers:eo.getFieldValue("allowed_mcp_servers_and_groups")?.servers||[],toolPermissions:eo.getFieldValue("mcp_tool_permissions")||{},onChange:e=>eo.setFieldsValue({mcp_tool_permissions:e})})})})]})]}),(0,l.jsxs)(o.Accordion,{className:"mt-4 mb-4",children:[(0,l.jsx)(d.AccordionHeader,{children:(0,l.jsx)("b",{children:"智能体设置"})}),(0,l.jsx)(c.AccordionBody,{children:(0,l.jsx)(_.Form.Item,{label:(0,l.jsxs)("span",{children:["允许的智能体"," ",(0,l.jsx)(w.Tooltip,{title:"选择此密钥可以访问的智能体或访问组",children:(0,l.jsx)(i.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"allowed_agents_and_groups",help:ei("keyDetail.settings.agents"),children:(0,l.jsx)(T.default,{onChange:e=>eo.setFieldValue("allowed_agents_and_groups",e),value:eo.getFieldValue("allowed_agents_and_groups"),accessToken:et,placeholder:ei("keyDetail.settings.placeholders.selectAgents")})})})]}),er&&(0,l.jsxs)(o.Accordion,{className:"mt-4 mb-4",children:[(0,l.jsx)(d.AccordionHeader,{children:(0,l.jsx)("b",{children:"日志设置"})}),(0,l.jsx)(c.AccordionBody,{children:(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)(P.default,{value:eI,onChange:eF,premiumUser:!0,disabledCallbacks:eq,onDisabledCallbacksChange:eH})})})]}),(0,l.jsxs)(o.Accordion,{className:"mt-4 mb-4",children:[(0,l.jsx)(d.AccordionHeader,{children:(0,l.jsx)("b",{children:"路由设置"})}),(0,l.jsx)(c.AccordionBody,{children:(0,l.jsx)("div",{className:"mt-4 w-full",children:(0,l.jsx)(M.default,{accessToken:et||"",value:e4||void 0,onChange:e1,modelData:eg.length>0?{data:eg.map(e=>({model_name:e}))}:void 0},e2)})})]},`router-settings-accordion-${e2}`),(0,l.jsxs)(o.Accordion,{className:"mt-4 mb-4",children:[(0,l.jsx)(d.AccordionHeader,{children:(0,l.jsx)("b",{children:"模型别名"})}),(0,l.jsx)(c.AccordionBody,{children:(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsx)(h.Text,{className:"text-sm text-gray-600 mb-4",children:"为模型创建可在 API 调用中使用的自定义别名。这允许您为特定模型创建快捷方式。 shortcuts for specific models."}),(0,l.jsx)(A.default,{accessToken:et,initialModelAliases:eW,onAliasUpdate:eQ,showExampleConfig:!1})]})})]}),(0,l.jsxs)(o.Accordion,{className:"mt-4 mb-4",children:[(0,l.jsx)(d.AccordionHeader,{children:(0,l.jsx)("b",{children:"密钥生命周期"})}),(0,l.jsx)(c.AccordionBody,{children:(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)(L.default,{form:eo,autoRotationEnabled:eY,onAutoRotationChange:eX,rotationInterval:eZ,onRotationIntervalChange:e0,isCreateMode:!0})})}),(0,l.jsx)(_.Form.Item,{name:"duration",hidden:!0,initialValue:null,children:(0,l.jsx)(f.Input,{})})]}),(0,l.jsxs)(o.Accordion,{className:"mt-4 mb-4",children:[(0,l.jsx)(d.AccordionHeader,{children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("b",{children:"高级设置"}),(0,l.jsx)(w.Tooltip,{title:(0,l.jsxs)("span",{children:["在我们的文档中了解更多关于高级设置的信息"," ",(0,l.jsx)("a",{href:q.proxyBaseUrl?`${q.proxyBaseUrl}/#/key%20management/generate_key_fn_key_generate_post`:"/#/key%20management/generate_key_fn_key_generate_post",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300",children:"文档"})]}),children:(0,l.jsx)(i.InfoCircleOutlined,{className:"text-gray-400 hover:text-gray-300 cursor-help"})})]})}),(0,l.jsx)(c.AccordionBody,{children:(0,l.jsx)(D.default,{schemaComponent:"GenerateKeyRequest",form:eo,excludedFields:["key_alias","team_id","models","duration","metadata","tags","guardrails","max_budget","budget_duration","tpm_limit","rpm_limit"]})})]})]})]})}),(0,l.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,l.jsx)(y.Button,{htmlType:"submit",disabled:e7,style:{opacity:e7?.5:1},children:"创建密钥"})})]})}),eA&&(0,l.jsx)(j.Modal,{title:"创建新用户",open:eA,onCancel:()=>eO(!1),footer:null,width:800,children:(0,l.jsx)(B.CreateUserButton,{userID:es,accessToken:et,teams:Z,possibleUIRoles:eM,onUserCreated:e=>{eV(e),eo.setFieldsValue({user_id:e}),eO(!1)},isEmbedded:!0})}),eu&&(0,l.jsx)(j.Modal,{open:ec,onOk:e5,onCancel:e6,footer:null,children:(0,l.jsxs)(p.Grid,{numItems:1,className:"gap-2 w-full",children:[(0,l.jsx)(x.Title,{children:"保存您的密钥"}),(0,l.jsx)(m.Col,{numColSpan:1,children:null!=eu?(0,l.jsx)(W.default,{apiKey:eu}):(0,l.jsx)(h.Text,{children:"密钥创建中，这可能需要 30 秒"})})]})})]})},"fetchTeamModels",0,Y,"fetchUserModels",0,X])}]);