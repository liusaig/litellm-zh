(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,584578,e=>{"use strict";var a=e.i(764205);let t=async(e,t,l,s,r)=>{let i;i="Admin"!=l&&"Admin Viewer"!=l?await (0,a.teamListCall)(e,s?.organization_id||null,t):await (0,a.teamListCall)(e,s?.organization_id||null),console.log(`givenTeams: ${i}`),r(i)};e.s(["fetchTeams",0,t])},21548,e=>{"use strict";var a=e.i(616303);e.s(["Empty",()=>a.default])},918549,e=>{"use strict";let a=(0,e.i(475254).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["default",()=>a])},582458,e=>{"use strict";let a=(0,e.i(475254).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["default",()=>a])},114600,e=>{"use strict";var a=e.i(290571),t=e.i(444755),l=e.i(673706),s=e.i(271645);let r=(0,l.makeClassName)("Divider"),i=s.default.forwardRef((e,l)=>{let{className:i,children:o}=e,n=(0,a.__rest)(e,["className","children"]);return s.default.createElement("div",Object.assign({ref:l,className:(0,t.tremorTwMerge)(r("root"),"w-full mx-auto my-6 flex justify-between gap-3 items-center text-tremor-default","text-tremor-content","dark:text-dark-tremor-content",i)},n),o?s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:(0,t.tremorTwMerge)("w-full h-[1px] bg-tremor-border dark:bg-dark-tremor-border")}),s.default.createElement("div",{className:(0,t.tremorTwMerge)("text-inherit whitespace-nowrap")},o),s.default.createElement("div",{className:(0,t.tremorTwMerge)("w-full h-[1px] bg-tremor-border dark:bg-dark-tremor-border")})):s.default.createElement("div",{className:(0,t.tremorTwMerge)("w-full h-[1px] bg-tremor-border dark:bg-dark-tremor-border")}))});i.displayName="Divider",e.s(["Divider",()=>i],114600)},227814,e=>{"use strict";var a=e.i(843476),t=e.i(271645),l=e.i(111110),s=e.i(764205),r=e.i(584578),i=e.i(808613),o=e.i(56567),n=e.i(304967),d=e.i(629569),c=e.i(599724),m=e.i(114600),u=e.i(994388),h=e.i(779241),x=e.i(898586),p=e.i(482725),g=e.i(790848),f=e.i(199133),j=e.i(860585),_=e.i(355619),b=e.i(727749),v=e.i(162386),y=e.i(170334);let w=({accessToken:e,userID:r,userRole:i})=>{let{t:o}=(0,l.useLanguage)(),[w,T]=(0,t.useState)(!0),[M,N]=(0,t.useState)(null),[S,C]=(0,t.useState)(!1),[k,F]=(0,t.useState)({}),[I,A]=(0,t.useState)(!1),[z,L]=(0,t.useState)([]),{Paragraph:P}=x.Typography,{Option:B}=f.Select;(0,t.useEffect)(()=>{(async()=>{if(!e)return T(!1);try{let a=await (0,s.getDefaultTeamSettings)(e);if(N(a),F(a.values||{}),e)try{let a=await (0,s.modelAvailableCall)(e,r,i);if(a&&a.data){let e=a.data.map(e=>e.id);L(e)}}catch(e){console.error("Error fetching available models:",e)}}catch(e){console.error("Error fetching team SSO settings:",e),b.default.fromBackend((0,y.teamT)(o,"teams.defaultSettings.loadFailed"))}finally{T(!1)}})()},[e]);let O=async()=>{if(e){A(!0);try{let a=await (0,s.updateDefaultTeamSettings)(e,k);N({...M,values:a.settings}),C(!1),b.default.success((0,y.teamT)(o,"teams.defaultSettings.saveSuccess"))}catch(e){console.error("Error updating team settings:",e),b.default.fromBackend((0,y.teamT)(o,"teams.defaultSettings.updateFailed"))}finally{A(!1)}}},D=(e,a)=>{F(t=>({...t,[e]:a}))};if(w)return(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)(p.Spin,{size:"large"})});if(!M)return(0,a.jsx)(n.Card,{children:(0,a.jsx)(c.Text,{children:(0,y.teamT)(o,"teams.defaultSettings.notAvailable")})});let E=M?.field_schema?.description,H=E&&E.includes("Default parameters to apply")?(0,y.teamT)(o,"teams.defaultSettings.description"):E||(0,y.teamT)(o,"teams.defaultSettings.description");return(0,a.jsxs)(n.Card,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)(d.Title,{className:"text-xl",children:(0,y.teamT)(o,"teams.defaultSettings.title")}),!w&&M&&(S?(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(u.Button,{variant:"secondary",onClick:()=>{C(!1),F(M.values||{})},disabled:I,children:(0,y.teamT)(o,"teams.defaultSettings.cancel")}),(0,a.jsx)(u.Button,{onClick:O,loading:I,children:(0,y.teamT)(o,"teams.defaultSettings.saveChanges")})]}):(0,a.jsx)(u.Button,{onClick:()=>C(!0),children:(0,y.teamT)(o,"teams.defaultSettings.editSettings")}))]}),(0,a.jsx)(c.Text,{children:H}),(0,a.jsx)(m.Divider,{}),(0,a.jsx)("div",{className:"mt-4 space-y-4",children:(()=>{let{values:e,field_schema:t}=M;return t&&t.properties?Object.entries(t.properties).map(([t,l])=>{let s=e[t],r=t.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),i=(0,y.teamDefaultSettingsFieldLabel)(t,r);return(0,a.jsxs)("div",{className:"mb-6 pb-6 border-b border-gray-200 last:border-0",children:[(0,a.jsx)(c.Text,{className:"font-medium text-lg",children:i}),(0,a.jsx)(P,{className:"text-sm text-gray-500 mt-1",children:(0,y.teamDefaultSettingsFieldDescription)(t,l.description)}),S?(0,a.jsx)("div",{className:"mt-2",children:((e,t,l)=>{let s=t.type;if("budget_duration"===e)return(0,a.jsx)(j.default,{value:k[e]||null,onChange:a=>D(e,a),className:"mt-2"});if("boolean"===s)return(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(g.Switch,{checked:!!k[e],onChange:a=>D(e,a)})});if("array"===s&&t.items?.enum)return(0,a.jsx)(f.Select,{mode:"multiple",style:{width:"100%"},value:k[e]||[],onChange:a=>D(e,a),className:"mt-2",children:t.items.enum.map(e=>(0,a.jsx)(B,{value:e,children:e},e))});if("models"===e)return(0,a.jsx)(v.ModelSelect,{value:k[e]||[],onChange:a=>D(e,a),context:"global",style:{width:"100%"},options:{includeSpecialOptions:!0}});if("string"===s&&t.enum)return(0,a.jsx)(f.Select,{style:{width:"100%"},value:k[e]||"",onChange:a=>D(e,a),className:"mt-2",children:t.enum.map(e=>(0,a.jsx)(B,{value:e,children:e},e))});else return(0,a.jsx)(h.TextInput,{value:void 0!==k[e]?String(k[e]):"",onChange:a=>D(e,a.target.value),placeholder:t.description||"",className:"mt-2"})})(t,l,0)}):(0,a.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:((e,t)=>{if(null==t)return(0,a.jsx)("span",{className:"text-gray-400",children:(0,y.teamT)(o,"teams.defaultSettings.notSet")});if("budget_duration"===e)return(0,a.jsx)("span",{children:(0,j.getBudgetDurationLabel)(t)});if("boolean"==typeof t)return(0,a.jsx)("span",{children:t?(0,y.teamT)(o,"teams.defaultSettings.enabled"):(0,y.teamT)(o,"teams.defaultSettings.disabled")});if("models"===e&&Array.isArray(t))return 0===t.length?(0,a.jsx)("span",{className:"text-gray-400",children:(0,y.teamT)(o,"teams.defaultSettings.none")}):(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:t.map((e,t)=>(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100 rounded text-xs",children:(0,_.getModelDisplayName)(e)},t))});if("object"==typeof t)return Array.isArray(t)?0===t.length?(0,a.jsx)("span",{className:"text-gray-400",children:(0,y.teamT)(o,"teams.defaultSettings.none")}):(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:t.map((e,t)=>(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100 rounded text-xs",children:"object"==typeof e?JSON.stringify(e):String(e)},t))}):(0,a.jsx)("pre",{className:"bg-gray-100 p-2 rounded text-xs overflow-auto mt-1",children:JSON.stringify(t,null,2)});return(0,a.jsx)("span",{children:String(t)})})(t,s)})]},t)}):(0,a.jsx)(c.Text,{children:(0,y.teamT)(o,"teams.defaultSettings.noSchema")})})()})]})};var T=e.i(708347),M=e.i(309426),N=e.i(350967),S=e.i(404206),C=e.i(500330),k=e.i(752978),F=e.i(197647),I=e.i(653824),A=e.i(881073),z=e.i(723731),L=e.i(278587);let P=({lastRefreshed:e,onRefresh:t,userRole:s,children:r})=>{let{t:i}=(0,l.useLanguage)();return(0,a.jsxs)(I.TabGroup,{className:"gap-2 h-[75vh] w-full",children:[(0,a.jsxs)(A.TabList,{className:"flex justify-between mt-2 w-full items-center",children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(F.Tab,{children:(0,y.teamT)(i,"teams.tabs.myTeams")}),(0,T.isAdminRole)(s||"")&&(0,a.jsx)(F.Tab,{children:(0,y.teamT)(i,"teams.tabs.defaultSettings")})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[e&&(0,a.jsxs)(c.Text,{children:[(0,y.teamT)(i,"teams.lastRefreshed"),e]}),(0,a.jsx)(k.Icon,{icon:L.RefreshIcon,variant:"shadow",size:"xs",className:"self-center",onClick:t})]})]}),(0,a.jsx)(z.TabPanels,{children:r})]})};var B=e.i(206929),O=e.i(35983);let D=({filters:e,organizations:t,showFilters:s,onToggleFilters:r,onChange:i,onReset:o})=>{let{t:n}=(0,l.useLanguage)();return(0,a.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,a.jsxs)("div",{className:"relative w-64",children:[(0,a.jsx)("input",{type:"text",placeholder:(0,y.teamT)(n,"teams.filters.searchPlaceholder"),className:"w-full px-3 py-2 pl-8 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:e.team_alias,onChange:e=>i("team_alias",e.target.value)}),(0,a.jsx)("svg",{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,a.jsxs)("button",{className:`px-3 py-2 text-sm border rounded-md hover:bg-gray-50 flex items-center gap-2 ${s?"bg-gray-100":""}`,onClick:()=>r(!s),children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),(0,y.teamT)(n,"teams.filters.filter"),(e.team_id||e.team_alias||e.organization_id)&&(0,a.jsx)("span",{"data-testid":"active-filter-indicator",className:"w-2 h-2 rounded-full bg-blue-500"})]}),(0,a.jsxs)("button",{className:"px-3 py-2 text-sm border rounded-md hover:bg-gray-50 flex items-center gap-2",onClick:o,children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,y.teamT)(n,"teams.filters.reset")]})]}),s&&(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mt-3",children:[(0,a.jsxs)("div",{className:"relative w-64",children:[(0,a.jsx)("input",{type:"text",placeholder:(0,y.teamT)(n,"teams.filters.teamIdPlaceholder"),className:"w-full px-3 py-2 pl-8 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:e.team_id,onChange:e=>i("team_id",e.target.value)}),(0,a.jsx)("svg",{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),(0,a.jsx)("div",{className:"w-64",children:(0,a.jsx)(B.Select,{value:e.organization_id||"",onValueChange:e=>i("organization_id",e),placeholder:(0,y.teamT)(n,"teams.filters.selectOrganization"),children:t?.map(e=>(0,a.jsx)(O.SelectItem,{value:e.organization_id||"",children:e.organization_alias||e.organization_id},e.organization_id))})})]})]})};var E=e.i(135214),H=e.i(269200),V=e.i(942232),R=e.i(977572),W=e.i(427612),$=e.i(64848),J=e.i(496020),G=e.i(592968),K=e.i(591935),U=e.i(68155),q=e.i(389083),X=e.i(871943),Q=e.i(502547);let Y=({team:e})=>{let{t:s}=(0,l.useLanguage)(),[r,i]=(0,t.useState)(!1);return(0,a.jsx)(R.TableCell,{style:{maxWidth:"8-x",whiteSpace:"pre-wrap",overflow:"hidden"},className:e.models.length>3?"px-0":"",children:(0,a.jsx)("div",{className:"flex flex-col",children:Array.isArray(e.models)?(0,a.jsx)("div",{className:"flex flex-col",children:0===e.models.length?(0,a.jsx)(q.Badge,{size:"xs",className:"mb-1",color:"red",children:(0,a.jsx)(c.Text,{children:(0,y.teamT)(s,"teams.allProxyModels")})}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex items-start",children:[e.models.length>3&&(0,a.jsx)("div",{children:(0,a.jsx)(k.Icon,{icon:r?X.ChevronDownIcon:Q.ChevronRightIcon,className:"cursor-pointer",size:"xs",onClick:()=>{i(e=>!e)}})}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.models.slice(0,3).map((e,t)=>"all-proxy-models"===e?(0,a.jsx)(q.Badge,{size:"xs",color:"red",children:(0,a.jsx)(c.Text,{children:(0,y.teamT)(s,"teams.allProxyModels")})},t):(0,a.jsx)(q.Badge,{size:"xs",color:"blue",children:(0,a.jsx)(c.Text,{children:e.length>30?`${(0,_.getModelDisplayName)(e).slice(0,30)}...`:(0,_.getModelDisplayName)(e)})},t)),e.models.length>3&&!r&&(0,a.jsx)(q.Badge,{size:"xs",color:"gray",className:"cursor-pointer",children:(0,a.jsxs)(c.Text,{children:["+",e.models.length-3," ",(0,y.teamT)(s,"teams.table.moreModels")]})}),r&&(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.models.slice(3).map((e,t)=>"all-proxy-models"===e?(0,a.jsx)(q.Badge,{size:"xs",color:"red",children:(0,a.jsx)(c.Text,{children:(0,y.teamT)(s,"teams.allProxyModels")})},t+3):(0,a.jsx)(q.Badge,{size:"xs",color:"blue",children:(0,a.jsx)(c.Text,{children:e.length>30?`${(0,_.getModelDisplayName)(e).slice(0,30)}...`:(0,_.getModelDisplayName)(e)})},t+3))})]})]})})}):null})})};var Z=e.i(918549),Z=Z,ee=e.i(846753),ee=ee;let ea=({team:e,userId:t})=>{let s=(e=>{let{t}=(0,l.useLanguage)(),s="inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium border";return"admin"===e?(0,a.jsxs)("span",{className:s,style:{backgroundColor:"#EEF2FF",color:"#3730A3",borderColor:"#C7D2FE"},children:[(0,a.jsx)(Z.default,{className:"h-3 w-3 mr-1"}),(0,y.teamT)(t,"teams.roleBadges.admin")]}):(0,a.jsxs)("span",{className:s,style:{backgroundColor:"#F3F4F6",color:"#4B5563",borderColor:"#E5E7EB"},children:[(0,a.jsx)(ee.default,{className:"h-3 w-3 mr-1"}),(0,y.teamT)(t,"teams.roleBadges.member")]})})(((e,a)=>{if(!a)return null;let t=e.members_with_roles?.find(e=>e.user_id===a);return t?.role??null})(e,t));return(0,a.jsx)(R.TableCell,{children:s})},et=({teams:e,currentOrg:t,setSelectedTeamId:s,perTeamInfo:r,userRole:i,userId:o,setEditTeam:n,onDeleteTeam:d})=>{let{t:m}=(0,l.useLanguage)();return(0,a.jsxs)(H.Table,{children:[(0,a.jsx)(W.TableHead,{children:(0,a.jsxs)(J.TableRow,{children:[(0,a.jsx)($.TableHeaderCell,{children:(0,y.teamT)(m,"teams.table.teamName")}),(0,a.jsx)($.TableHeaderCell,{children:(0,y.teamT)(m,"teams.table.teamId")}),(0,a.jsx)($.TableHeaderCell,{children:(0,y.teamT)(m,"teams.table.createdAt")}),(0,a.jsx)($.TableHeaderCell,{children:(0,y.teamT)(m,"teams.table.spend")}),(0,a.jsx)($.TableHeaderCell,{children:(0,y.teamT)(m,"teams.table.budget")}),(0,a.jsx)($.TableHeaderCell,{children:(0,y.teamT)(m,"teams.table.models")}),(0,a.jsx)($.TableHeaderCell,{children:(0,y.teamT)(m,"teams.table.organization")}),(0,a.jsx)($.TableHeaderCell,{children:"角色"}),(0,a.jsx)($.TableHeaderCell,{children:(0,y.teamT)(m,"teams.table.info")})]})}),(0,a.jsx)(V.TableBody,{children:e&&e.length>0?e.filter(e=>!t||e.organization_id===t.organization_id).sort((e,a)=>new Date(a.created_at).getTime()-new Date(e.created_at).getTime()).map(e=>(0,a.jsxs)(J.TableRow,{children:[(0,a.jsx)(R.TableCell,{style:{maxWidth:"4px",whiteSpace:"pre-wrap",overflow:"hidden"},children:e.team_alias}),(0,a.jsx)(R.TableCell,{children:(0,a.jsx)("div",{className:"overflow-hidden",children:(0,a.jsx)(G.Tooltip,{title:e.team_id,children:(0,a.jsxs)(u.Button,{size:"xs",variant:"light",className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left overflow-hidden truncate max-w-[200px]",onClick:()=>{s(e.team_id)},children:[e.team_id.slice(0,7),"..."]})})})}),(0,a.jsx)(R.TableCell,{style:{maxWidth:"4px",whiteSpace:"pre-wrap",overflow:"hidden"},children:e.created_at?new Date(e.created_at).toLocaleDateString():(0,y.teamT)(m,"teams.table.none")}),(0,a.jsx)(R.TableCell,{style:{maxWidth:"4px",whiteSpace:"pre-wrap",overflow:"hidden"},children:(0,C.formatNumberWithCommas)(e.spend,4)}),(0,a.jsx)(R.TableCell,{style:{maxWidth:"4px",whiteSpace:"pre-wrap",overflow:"hidden"},children:null!==e.max_budget&&void 0!==e.max_budget?e.max_budget:(0,y.teamT)(m,"teams.table.unlimited")}),(0,a.jsx)(Y,{team:e}),(0,a.jsx)(R.TableCell,{children:e.organization_id}),(0,a.jsx)(ea,{team:e,userId:o}),(0,a.jsxs)(R.TableCell,{children:[(0,a.jsxs)(c.Text,{children:[r&&e.team_id&&r[e.team_id]&&r[e.team_id].keys&&r[e.team_id].keys.length," ",(0,y.teamT)(m,"teams.table.keys").trim()]}),(0,a.jsxs)(c.Text,{children:[r&&e.team_id&&r[e.team_id]&&r[e.team_id].team_info&&r[e.team_id].team_info.members_with_roles&&r[e.team_id].team_info.members_with_roles.length," ",(0,y.teamT)(m,"teams.table.members").trim()]})]}),(0,a.jsx)(R.TableCell,{children:"Admin"==i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.Icon,{icon:K.PencilAltIcon,size:"sm",onClick:()=>{s(e.team_id),n(!0)}}),(0,a.jsx)(k.Icon,{onClick:()=>d(e.team_id),icon:U.TrashIcon,size:"sm"})]}):null})]},e.team_id)):null})]})};var el=e.i(582458),el=el,es=e.i(995926);let er=({teams:e,teamToDelete:s,onCancel:r,onConfirm:i})=>{let{t:o}=(0,l.useLanguage)(),[n,d]=(0,t.useState)(""),c=e?.find(e=>e.team_id===s),m=c?.team_alias||"",u=c?.keys?.length||0,h=n===m;return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl min-h-[380px] py-6 overflow-hidden transform transition-all flex flex-col justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:o("teams.deleteModal.title")}),(0,a.jsx)("button",{"aria-label":o("teams.deleteModal.close"),onClick:()=>{r(),d("")},className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:(0,a.jsx)(es.XIcon,{size:20})})]}),(0,a.jsxs)("div",{className:"px-6 py-4",children:[u>0&&(0,a.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-red-50 border border-red-100 rounded-md mb-5",children:[(0,a.jsx)("div",{className:"text-red-500 mt-0.5",children:(0,a.jsx)(el.default,{size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-base font-medium text-red-600",children:o("teams.deleteModal.warningKeys").replace("{keyCount}",String(u))}),(0,a.jsx)("p",{className:"text-base text-red-600 mt-2",children:o("teams.deleteModal.warningDeleteAll")})]})]}),(0,a.jsx)("p",{className:"text-base text-gray-600 mb-5",children:o("teams.deleteModal.confirmInfo")}),(0,a.jsxs)("div",{className:"mb-5",children:[(0,a.jsxs)("label",{className:"block text-base font-medium text-gray-700 mb-2",children:[o("teams.deleteModal.enterName"),(0,a.jsx)("span",{className:"underline",children:m}),o("teams.deleteModal.confirmLabel")]}),(0,a.jsx)("input",{type:"text",value:n,onChange:e=>d(e.target.value),placeholder:o("teams.deleteModal.placeholder"),className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base",autoFocus:!0})]})]})]}),(0,a.jsxs)("div",{className:"px-6 py-4 bg-gray-50 flex justify-end gap-4",children:[(0,a.jsx)("button",{onClick:()=>{r(),d("")},className:"px-5 py-3 bg-white border border-gray-300 rounded-md text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:o("teams.deleteModal.cancel")}),(0,a.jsx)("button",{onClick:i,disabled:!h,className:`px-5 py-3 rounded-md text-base font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 ${h?"bg-red-600 hover:bg-red-700":"bg-red-300 cursor-not-allowed"}`,children:o("teams.deleteModal.forceDelete")})]})]})})};var ei=e.i(464571),eo=e.i(311451),en=e.i(212931),ed=e.i(677667),ec=e.i(130643),em=e.i(898667),eu=e.i(827252),eh=e.i(435451),ex=e.i(916940),ep=e.i(75921),eg=e.i(552130),ef=e.i(651904),ej=e.i(533882),e_=e.i(390605);let eb=({isTeamModalVisible:e,handleOk:r,handleCancel:o,currentOrg:n,organizations:d,teams:m,setTeams:u,modelAliases:x,setModelAliases:p,loggingSettings:j,setLoggingSettings:v,setIsTeamModalVisible:y})=>{let{userId:w,userRole:T,accessToken:M,premiumUser:N}=(0,E.default)(),{t:S}=(0,l.useLanguage)(),[C]=i.Form.useForm(),[k,F]=(0,t.useState)([]),[I,A]=(0,t.useState)(null),[z,L]=(0,t.useState)([]),[P,B]=(0,t.useState)([]),[O,D]=(0,t.useState)([]),[H,V]=(0,t.useState)([]),[R,W]=(0,t.useState)(!1);(0,t.useEffect)(()=>{(async()=>{try{if(null===w||null===T||null===M)return;let e=await (0,_.fetchAvailableModelsForTeamOrKey)(w,T,M);e&&F(e)}catch(e){console.error("Error fetching user models:",e)}})()},[M,w,T,m]),(0,t.useEffect)(()=>{let e;console.log(`currentOrgForCreateTeam: ${I}`);let a=(e=[],I&&I.models.length>0?(console.log(`organization.models: ${I.models}`),e=I.models):e=k,(0,_.unfurlWildcardModelsInList)(e,k));console.log(`models: ${a}`),L(a),C.setFieldValue("models",[])},[I,k,C]);let $=async()=>{try{if(null==M)return;let e=await (0,s.fetchMCPAccessGroups)(M);V(e)}catch(e){console.error("Failed to fetch MCP access groups:",e)}};(0,t.useEffect)(()=>{$()},[M,$]),(0,t.useEffect)(()=>{let e=async()=>{try{if(null==M)return;let e=(await (0,s.getPoliciesList)(M)).policies.map(e=>e.policy_name);D(e)}catch(e){console.error("Failed to fetch policies:",e)}};(async()=>{try{if(null==M)return;let e=(await (0,s.getGuardrailsList)(M)).guardrails.map(e=>e.guardrail_name);B(e)}catch(e){console.error("Failed to fetch guardrails:",e)}})(),e()},[M]);let J=async e=>{try{if(console.log(`formValues: ${JSON.stringify(e)}`),null!=M){let a=e?.team_alias,t=m?.map(e=>e.team_alias)??[],l=e?.organization_id||n?.organization_id;if(""===l||"string"!=typeof l?e.organization_id=null:e.organization_id=l.trim(),t.includes(a))throw Error(`Team alias ${a} already exists, please pick another alias`);if(b.default.info(S("teams.createModal.creating")),j.length>0){let a={};if(e.metadata)try{a=JSON.parse(e.metadata)}catch(e){console.warn("Invalid JSON in metadata field, starting with empty object")}a={...a,logging:j.filter(e=>e.callback_name)},e.metadata=JSON.stringify(a)}if(e.secret_manager_settings&&"string"==typeof e.secret_manager_settings)if(""===e.secret_manager_settings.trim())delete e.secret_manager_settings;else try{e.secret_manager_settings=JSON.parse(e.secret_manager_settings)}catch(e){throw Error("Failed to parse secret manager settings: "+e)}if(e.allowed_vector_store_ids&&e.allowed_vector_store_ids.length>0||e.allowed_mcp_servers_and_groups&&(e.allowed_mcp_servers_and_groups.servers?.length>0||e.allowed_mcp_servers_and_groups.accessGroups?.length>0||e.allowed_mcp_servers_and_groups.toolPermissions)){if(e.object_permission={},e.allowed_vector_store_ids&&e.allowed_vector_store_ids.length>0&&(e.object_permission.vector_stores=e.allowed_vector_store_ids,delete e.allowed_vector_store_ids),e.allowed_mcp_servers_and_groups){let{servers:a,accessGroups:t}=e.allowed_mcp_servers_and_groups;a&&a.length>0&&(e.object_permission.mcp_servers=a),t&&t.length>0&&(e.object_permission.mcp_access_groups=t),delete e.allowed_mcp_servers_and_groups}if(e.mcp_tool_permissions&&Object.keys(e.mcp_tool_permissions).length>0&&(e.object_permission||(e.object_permission={}),e.object_permission.mcp_tool_permissions=e.mcp_tool_permissions,delete e.mcp_tool_permissions),e.allowed_agents_and_groups){let{agents:a,accessGroups:t}=e.allowed_agents_and_groups;e.object_permission||(e.object_permission={}),a&&a.length>0&&(e.object_permission.agents=a),t&&t.length>0&&(e.object_permission.agent_access_groups=t),delete e.allowed_agents_and_groups}}e.allowed_mcp_access_groups&&e.allowed_mcp_access_groups.length>0&&(e.object_permission||(e.object_permission={}),e.object_permission.mcp_access_groups=e.allowed_mcp_access_groups,delete e.allowed_mcp_access_groups),Object.keys(x).length>0&&(e.model_aliases=x);let r=await (0,s.teamCreateCall)(M,e);null!==m?u([...m,r]):u([r]),console.log(`response for team create call: ${r}`),b.default.success(S("teams.createModal.success")),C.resetFields(),v([]),p({}),y(!1)}}catch(e){console.error("Error creating the team:",e),b.default.fromBackend(S("teams.createModal.failed")+e)}};return(0,a.jsx)(en.Modal,{title:S("teams.createModal.title"),open:e,width:1e3,footer:null,onOk:r,onCancel:o,children:(0,a.jsxs)(i.Form,{form:C,onFinish:J,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Form.Item,{label:S("teams.createModal.teamAlias"),name:"team_alias",rules:[{required:!0,message:S("teams.createModal.teamAliasRequired")}],children:(0,a.jsx)(h.TextInput,{placeholder:S("teams.createModal.teamAliasPlaceholder")})}),(0,a.jsx)(i.Form.Item,{label:(0,a.jsxs)("span",{children:[S("teams.createModal.organization")," ",(0,a.jsx)(G.Tooltip,{title:(0,a.jsxs)("span",{children:[S("teams.createModal.organizationHelp")," ",(0,a.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/user_management_heirarchy",target:"_blank",rel:"noopener noreferrer",style:{color:"#1890ff",textDecoration:"underline"},onClick:e=>e.stopPropagation(),children:S("teams.createModal.userManagementHierarchy")})]}),children:(0,a.jsx)(eu.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"organization_id",initialValue:n?n.organization_id:null,className:"mt-8",children:(0,a.jsx)(f.Select,{showSearch:!0,allowClear:!0,placeholder:S("teams.createModal.organizationPlaceholder"),onChange:e=>{C.setFieldValue("organization_id",e),A(d?.find(a=>a.organization_id===e)||null)},filterOption:(e,a)=>!!a&&(a.children?.toString()||"").toLowerCase().includes(e.toLowerCase()),optionFilterProp:"children",children:d?.map(e=>(0,a.jsxs)(f.Select.Option,{value:e.organization_id,children:[(0,a.jsx)("span",{className:"font-medium",children:e.organization_alias})," ",(0,a.jsxs)("span",{className:"text-gray-500",children:["(",e.organization_id,")"]})]},e.organization_id))})}),(0,a.jsx)(i.Form.Item,{label:(0,a.jsxs)("span",{children:[S("teams.createModal.models")," ",(0,a.jsx)(G.Tooltip,{title:S("teams.createModal.modelsHelp"),children:(0,a.jsx)(eu.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"models",children:(0,a.jsxs)(f.Select,{mode:"multiple",placeholder:S("teams.createModal.modelsPlaceholder"),style:{width:"100%"},children:[(0,a.jsx)(f.Select.Option,{value:"all-proxy-models",children:S("teams.createModal.allProxyModels")},"all-proxy-models"),z.map(e=>(0,a.jsx)(f.Select.Option,{value:e,children:(0,_.getModelDisplayName)(e)},e))]})}),(0,a.jsx)(i.Form.Item,{label:S("teams.createModal.maxBudget"),name:"max_budget",children:(0,a.jsx)(eh.default,{step:.01,precision:2,width:200,placeholder:S("teams.createModal.maxBudgetPlaceholder")})}),(0,a.jsx)(i.Form.Item,{className:"mt-8",label:S("teams.createModal.budgetDuration"),name:"budget_duration",children:(0,a.jsxs)(f.Select,{defaultValue:null,placeholder:S("teams.createModal.budgetDurationPlaceholder"),children:[(0,a.jsx)(f.Select.Option,{value:"24h",children:S("teams.createModal.budgetDaily")}),(0,a.jsx)(f.Select.Option,{value:"7d",children:S("teams.createModal.budgetWeekly")}),(0,a.jsx)(f.Select.Option,{value:"30d",children:S("teams.createModal.budgetMonthly")})]})}),(0,a.jsx)(i.Form.Item,{label:S("teams.createModal.tpmLimit"),name:"tpm_limit",children:(0,a.jsx)(eh.default,{step:1,width:400,placeholder:S("teams.createModal.tpmLimitPlaceholder")})}),(0,a.jsx)(i.Form.Item,{label:S("teams.createModal.rpmLimit"),name:"rpm_limit",children:(0,a.jsx)(eh.default,{step:1,width:400,placeholder:S("teams.createModal.rpmLimitPlaceholder")})}),(0,a.jsxs)(ed.Accordion,{className:"mt-20 mb-8",onClick:()=>{R||($(),W(!0))},children:[(0,a.jsx)(em.AccordionHeader,{children:(0,a.jsx)("b",{children:S("teams.createModal.advancedSettings")})}),(0,a.jsxs)(ec.AccordionBody,{children:[(0,a.jsxs)(ed.Accordion,{className:"mb-4",children:[(0,a.jsx)(em.AccordionHeader,{children:(0,a.jsx)("b",{children:S("teams.createModal.otherSettings")})}),(0,a.jsxs)(ec.AccordionBody,{children:[(0,a.jsx)(i.Form.Item,{label:S("teams.createModal.teamId"),name:"team_id",help:S("teams.createModal.teamIdHelp"),children:(0,a.jsx)(h.TextInput,{onChange:e=>{e.target.value=e.target.value.trim()}})}),(0,a.jsx)(i.Form.Item,{label:S("teams.createModal.teamMemberBudget"),name:"team_member_budget",normalize:e=>e?Number(e):void 0,tooltip:S("teams.createModal.teamMemberBudgetHelp"),children:(0,a.jsx)(eh.default,{step:.01,precision:2,width:200,placeholder:S("teams.createModal.maxBudgetPlaceholder")})}),(0,a.jsx)(i.Form.Item,{label:S("teams.createModal.teamMemberKeyDuration"),name:"team_member_key_duration",tooltip:S("teams.createModal.teamMemberKeyDurationHelp"),children:(0,a.jsx)(h.TextInput,{placeholder:S("teams.createModal.teamMemberKeyDurationPlaceholder")})}),(0,a.jsx)(i.Form.Item,{label:S("teams.createModal.teamMemberRpmLimit"),name:"team_member_rpm_limit",tooltip:S("teams.createModal.teamMemberRpmLimitHelp"),children:(0,a.jsx)(eh.default,{step:1,width:400,placeholder:S("teams.createModal.maxBudgetPlaceholder")})}),(0,a.jsx)(i.Form.Item,{label:S("teams.createModal.teamMemberTpmLimit"),name:"team_member_tpm_limit",tooltip:S("teams.createModal.teamMemberTpmLimitHelp"),children:(0,a.jsx)(eh.default,{step:1,width:400,placeholder:S("teams.createModal.maxBudgetPlaceholder")})}),(0,a.jsx)(i.Form.Item,{label:S("teams.createModal.metadata"),name:"metadata",help:S("teams.createModal.metadataHelp"),children:(0,a.jsx)(eo.Input.TextArea,{rows:4})}),(0,a.jsx)(i.Form.Item,{label:S("teams.createModal.secretManagerSettings"),name:"secret_manager_settings",help:N?S("teams.createModal.secretManagerSettingsHelp"):S("teams.createModal.secretManagerSettingsPremiumHelp"),rules:[{validator:async(e,a)=>{if(!a)return Promise.resolve();try{return JSON.parse(a),Promise.resolve()}catch(e){return Promise.reject(Error(S("teams.createModal.invalidJsonError")))}}}],children:(0,a.jsx)(eo.Input.TextArea,{rows:4,placeholder:'{"namespace": "admin", "mount": "secret", "path_prefix": "litellm"}',disabled:!N})}),(0,a.jsx)(i.Form.Item,{label:(0,a.jsxs)("span",{children:["护栏"," ",(0,a.jsx)(G.Tooltip,{title:"配置你的第一个护栏",children:(0,a.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/guardrails/quick_start",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,a.jsx)(eu.InfoCircleOutlined,{style:{marginLeft:"4px"}})})})]}),name:"guardrails",className:"mt-8",help:S("teams.createModal.guardrailsPlaceholder"),children:(0,a.jsx)(f.Select,{mode:"tags",style:{width:"100%"},placeholder:S("teams.createModal.guardrailsPlaceholder"),options:P.map(e=>({value:e,label:e}))})}),(0,a.jsx)(i.Form.Item,{label:(0,a.jsxs)("span",{children:["禁用全局护栏"," ",(0,a.jsx)(G.Tooltip,{title:"开启后，此分组将跳过所有“每次请求都执行”的全局护栏",children:(0,a.jsx)(eu.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"disable_global_guardrails",className:"mt-4",valuePropName:"checked",help:S("teams.createModal.disableGlobalGuardrailsLabelHelp"),children:(0,a.jsx)(g.Switch,{checkedChildren:S("teams.createModal.yes"),unCheckedChildren:S("teams.createModal.no")})}),(0,a.jsx)(i.Form.Item,{label:(0,a.jsxs)("span",{children:["策略"," ",(0,a.jsx)(G.Tooltip,{title:S("teams.createModal.policiesHelp"),children:(0,a.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/guardrails/guardrail_policies",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,a.jsx)(eu.InfoCircleOutlined,{style:{marginLeft:"4px"}})})})]}),name:"policies",className:"mt-8",help:S("teams.createModal.policiesPlaceholder"),children:(0,a.jsx)(f.Select,{mode:"tags",style:{width:"100%"},placeholder:S("teams.createModal.policiesPlaceholder"),options:O.map(e=>({value:e,label:e}))})}),(0,a.jsx)(i.Form.Item,{label:(0,a.jsxs)("span",{children:["可用向量库"," ",(0,a.jsx)(G.Tooltip,{title:S("teams.createModal.availableVectorStoresHelp"),children:(0,a.jsx)(eu.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"allowed_vector_store_ids",className:"mt-8",help:S("teams.createModal.availableVectorStoresPlaceholder"),children:(0,a.jsx)(ex.default,{onChange:e=>C.setFieldValue("allowed_vector_store_ids",e),value:C.getFieldValue("allowed_vector_store_ids"),accessToken:M||"",placeholder:S("teams.createModal.availableVectorStoresPlaceholder")})})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)(ed.Accordion,{className:"mb-4",children:[(0,a.jsx)(em.AccordionHeader,{children:(0,a.jsx)("b",{children:S("teams.createModal.mcpSettings")})}),(0,a.jsxs)(ec.AccordionBody,{children:[(0,a.jsx)(i.Form.Item,{label:(0,a.jsxs)("span",{children:["可用 MCP 服务"," ",(0,a.jsx)(G.Tooltip,{title:S("teams.createModal.availableMcpServersHelp"),children:(0,a.jsx)(eu.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"allowed_mcp_servers_and_groups",className:"mt-4",help:S("teams.createModal.availableMcpServersPlaceholder"),children:(0,a.jsx)(ep.default,{onChange:e=>C.setFieldValue("allowed_mcp_servers_and_groups",e),value:C.getFieldValue("allowed_mcp_servers_and_groups"),accessToken:M||"",placeholder:S("teams.createModal.availableMcpServersPlaceholder")})}),(0,a.jsx)(i.Form.Item,{name:"mcp_tool_permissions",initialValue:{},hidden:!0,children:(0,a.jsx)(eo.Input,{type:"hidden"})}),(0,a.jsx)(i.Form.Item,{noStyle:!0,shouldUpdate:(e,a)=>e.allowed_mcp_servers_and_groups!==a.allowed_mcp_servers_and_groups||e.mcp_tool_permissions!==a.mcp_tool_permissions,children:()=>(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)(e_.default,{accessToken:M||"",selectedServers:C.getFieldValue("allowed_mcp_servers_and_groups")?.servers||[],toolPermissions:C.getFieldValue("mcp_tool_permissions")||{},onChange:e=>C.setFieldsValue({mcp_tool_permissions:e})})})})]})]}),(0,a.jsxs)(ed.Accordion,{className:"mb-4",children:[(0,a.jsx)(em.AccordionHeader,{children:(0,a.jsx)("b",{children:S("teams.createModal.agentsSettings")})}),(0,a.jsx)(ec.AccordionBody,{children:(0,a.jsx)(i.Form.Item,{label:(0,a.jsxs)("span",{children:["可用智能体"," ",(0,a.jsx)(G.Tooltip,{title:S("teams.createModal.availableAgentsHelp"),children:(0,a.jsx)(eu.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"allowed_agents_and_groups",className:"mt-4",help:S("teams.createModal.availableAgentsPlaceholder"),children:(0,a.jsx)(eg.default,{onChange:e=>C.setFieldValue("allowed_agents_and_groups",e),value:C.getFieldValue("allowed_agents_and_groups"),accessToken:M||"",placeholder:S("teams.createModal.availableAgentsPlaceholder")})})})]}),(0,a.jsxs)(ed.Accordion,{className:"mb-4",children:[(0,a.jsx)(em.AccordionHeader,{children:(0,a.jsx)("b",{children:S("teams.createModal.loggingSettings")})}),(0,a.jsx)(ec.AccordionBody,{children:(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(ef.default,{value:j,onChange:v,premiumUser:N})})})]}),(0,a.jsxs)(ed.Accordion,{className:"mb-0",children:[(0,a.jsx)(em.AccordionHeader,{children:(0,a.jsx)("b",{children:S("teams.createModal.modelAliases")})}),(0,a.jsx)(ec.AccordionBody,{children:(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)(c.Text,{className:"text-sm text-gray-600 mb-4",children:S("teams.createModal.modelAliasesDesc")}),(0,a.jsx)(ej.default,{accessToken:M||"",initialModelAliases:x,onAliasUpdate:p,showExampleConfig:!1})]})})]})]})]})]})]}),(0,a.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,a.jsx)(ei.Button,{htmlType:"submit",children:S("teams.createModal.submit")})})]})})};e.s(["default",0,({teams:e,accessToken:d,setTeams:m,userID:h,userRole:x,organizations:p,premiumUser:g=!1})=>{let{t:f}=(0,l.useLanguage)(),[j,_]=(0,t.useState)(null),[b,v]=(0,t.useState)(!1),[k,F]=(0,t.useState)({team_id:"",team_alias:"",organization_id:"",sort_by:"created_at",sort_order:"desc"}),[I]=i.Form.useForm(),[A]=i.Form.useForm(),[z,L]=(0,t.useState)(null),[B,O]=(0,t.useState)(!1),[H,V]=(0,t.useState)(!1),[R,W]=(0,t.useState)(!1),[$,J]=(0,t.useState)(!1),[G,K]=(0,t.useState)([]),[U,q]=(0,t.useState)(!1),[X,Q]=(0,t.useState)(null),[Y,Z]=(0,t.useState)({}),[ee,ea]=(0,t.useState)([]),[el,es]=(0,t.useState)({}),{lastRefreshed:ei,onRefreshClick:eo}=(({currentOrg:e,setTeams:a})=>{let[l,s]=(0,t.useState)(""),{accessToken:i,userId:o,userRole:n}=(0,E.default)(),d=(0,t.useCallback)(()=>{s(new Date().toLocaleString())},[]);return(0,t.useEffect)(()=>{i&&(0,r.fetchTeams)(i,o,n,e,a).then(),d()},[i,e,l,d,a,o,n]),{lastRefreshed:l,setLastRefreshed:s,onRefreshClick:d}})({currentOrg:j,setTeams:m});(0,t.useEffect)(()=>{e&&Z(e.reduce((e,a)=>(e[a.team_id]={keys:a.keys||[],team_info:{members_with_roles:a.members_with_roles||[]}},e),{}))},[e]);let en=async e=>{Q(e),q(!0)},ed=async()=>{if(null!=X&&null!=e&&null!=d){try{await (0,s.teamDeleteCall)(d,X),(0,r.fetchTeams)(d,h,x,j,m)}catch(e){console.error("Error deleting the team:",e)}q(!1),Q(null)}};return(0,a.jsx)("div",{className:"w-full mx-4 h-[75vh]",children:(0,a.jsx)(N.Grid,{numItems:1,className:"gap-2 p-8 w-full mt-2",children:(0,a.jsxs)(M.Col,{numColSpan:1,className:"flex flex-col gap-2",children:[("Admin"==x||"Org Admin"==x)&&(0,a.jsx)(u.Button,{className:"w-fit",onClick:()=>V(!0),children:(0,y.teamT)(f,"teams.create")}),z?(0,a.jsx)(o.default,{teamId:z,onUpdate:e=>{m(a=>{if(null==a)return a;let t=a.map(a=>e.team_id===a.team_id?(0,C.updateExistingKeys)(a,e):a);return d&&(0,r.fetchTeams)(d,h,x,j,m),t})},onClose:()=>{L(null),O(!1)},accessToken:d,is_team_admin:(e=>{if(null==e||null==e.members_with_roles)return!1;for(let a=0;a<e.members_with_roles.length;a++){let t=e.members_with_roles[a];if(t.user_id==h&&"admin"==t.role)return!0}return!1})(e?.find(e=>e.team_id===z)),is_proxy_admin:"Admin"==x,userModels:G,editTeam:B,premiumUser:g}):(0,a.jsxs)(P,{lastRefreshed:ei,onRefresh:eo,userRole:x,children:[(0,a.jsxs)(S.TabPanel,{children:[(0,a.jsx)(c.Text,{children:(0,y.teamT)(f,"teams.clickToView")}),(0,a.jsx)(N.Grid,{numItems:1,className:"gap-2 pt-2 pb-2 h-[75vh] w-full mt-2",children:(0,a.jsx)(M.Col,{numColSpan:1,children:(0,a.jsxs)(n.Card,{className:"w-full mx-auto flex-auto overflow-hidden overflow-y-auto max-h-[50vh]",children:[(0,a.jsx)("div",{className:"border-b px-6 py-4",children:(0,a.jsx)("div",{className:"flex flex-col space-y-4",children:(0,a.jsx)(D,{filters:k,organizations:p,showFilters:b,onToggleFilters:v,onChange:(e,a)=>{let t={...k,[e]:a};F(t),d&&(0,s.v2TeamListCall)(d,t.organization_id||null,null,t.team_id||null,t.team_alias||null).then(e=>{e&&e.teams&&m(e.teams)}).catch(e=>{console.error("Error fetching teams:",e)})},onReset:()=>{F({team_id:"",team_alias:"",organization_id:"",sort_by:"created_at",sort_order:"desc"}),d&&(0,s.v2TeamListCall)(d,null,h||null,null,null).then(e=>{e&&e.teams&&m(e.teams)}).catch(e=>{console.error("Error fetching teams:",e)})}})})}),(0,a.jsx)(et,{teams:e,currentOrg:j,perTeamInfo:Y,userRole:x,userId:h,setSelectedTeamId:L,setEditTeam:O,onDeleteTeam:en}),U&&(0,a.jsx)(er,{teams:e,teamToDelete:X,onCancel:()=>{q(!1),Q(null)},onConfirm:ed})]})})})]}),(0,T.isAdminRole)(x||"")&&(0,a.jsx)(S.TabPanel,{children:(0,a.jsx)(w,{accessToken:d,userID:h||"",userRole:x||""})})]}),("Admin"==x||"Org Admin"==x)&&(0,a.jsx)(eb,{isTeamModalVisible:H,handleOk:()=>{V(!1),I.resetFields(),ea([]),es({})},handleCancel:()=>{V(!1),I.resetFields(),ea([]),es({})},currentOrg:j,organizations:p,teams:e,setTeams:m,modelAliases:el,setModelAliases:es,loggingSettings:ee,setLoggingSettings:ea,setIsTeamModalVisible:V})]})})})}],227814)}]);